function globalEval(e){eval.call(null,e)}function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}function setValue(e,t,n,i){switch(n=n||"i8","*"===n.charAt(n.length-1)&&(n="i32"),n){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+n)}}function getValue(e,t,n){switch(t=t||"i8","*"===t.charAt(t.length-1)&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}function allocate(e,t,n,i){var r,a;"number"==typeof e?(r=!0,a=e):(r=!1,a=e.length);var o,s="string"==typeof t?t:null;if(o=n==ALLOC_NONE?i:[_malloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][void 0===n?ALLOC_STATIC:n](Math.max(a,s?1:t.length)),r){var l,i=o;for(assert(0==(3&o)),l=o+(a&-4);i<l;i+=4)HEAP32[i>>2]=0;for(l=o+a;i<l;)HEAP8[i++>>0]=0;return o}if("i8"===s)return e.subarray||e.slice?HEAPU8.set(e,o):HEAPU8.set(new Uint8Array(e),o),o;for(var u,c,h,f=0;f<a;){var d=e[f];"function"==typeof d&&(d=Runtime.getFunctionIndex(d)),u=s||t[f],0!==u?("i64"==u&&(u="i32"),setValue(o+f,d,u),h!==u&&(c=Runtime.getNativeTypeSize(u),h=u),f+=c):f++}return o}function getMemory(e){return staticSealed?"undefined"!=typeof _sbrk&&!_sbrk.called||!runtimeInitialized?Runtime.dynamicAlloc(e):_malloc(e):Runtime.staticAlloc(e)}function Pointer_stringify(e,t){if(0===t||!e)return"";for(var n,i=0,r=0;;){if(n=HEAPU8[e+r>>0],i|=n,0==n&&!t)break;if(r++,t&&r==t)break}t||(t=r);var a="";if(i<128){for(var o,s=1024;t>0;)o=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,s))),a=a?a+o:o,e+=s,t-=s;return a}return Module.UTF8ToString(e)}function AsciiToString(e){for(var t="";;){var n=HEAP8[e++>>0];if(!n)return t;t+=String.fromCharCode(n)}}function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}function UTF8ArrayToString(e,t){for(var n,i,r,a,o,s,l="";;){if(n=e[t++],!n)return l;if(128&n)if(i=63&e[t++],192!=(224&n))if(r=63&e[t++],224==(240&n)?n=(15&n)<<12|i<<6|r:(a=63&e[t++],240==(248&n)?n=(7&n)<<18|i<<12|r<<6|a:(o=63&e[t++],248==(252&n)?n=(3&n)<<24|i<<18|r<<12|a<<6|o:(s=63&e[t++],n=(1&n)<<30|i<<24|r<<18|a<<12|o<<6|s))),n<65536)l+=String.fromCharCode(n);else{var u=n-65536;l+=String.fromCharCode(55296|u>>10,56320|1023&u)}else l+=String.fromCharCode((31&n)<<6|i);else l+=String.fromCharCode(n)}}function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}function stringToUTF8Array(e,t,n,i){if(!(i>0))return 0;for(var r=n,a=n+i-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=a)break;t[n++]=s}else if(s<=2047){if(n+1>=a)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=a)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else if(s<=2097151){if(n+3>=a)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}else if(s<=67108863){if(n+4>=a)break;t[n++]=248|s>>24,t[n++]=128|s>>18&63,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+5>=a)break;t[n++]=252|s>>30,t[n++]=128|s>>24&63,t[n++]=128|s>>18&63,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-r}function stringToUTF8(e,t,n){return stringToUTF8Array(e,HEAPU8,t,n)}function lengthBytesUTF8(e){for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++n)),i<=127?++t:t+=i<=2047?2:i<=65535?3:i<=2097151?4:i<=67108863?5:6}return t}function UTF16ToString(e){for(var t=0,n="";;){var i=HEAP16[e+2*t>>1];if(0==i)return n;++t,n+=String.fromCharCode(i)}}function stringToUTF16(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;n-=2;for(var i=t,r=n<2*e.length?n/2:e.length,a=0;a<r;++a){var o=e.charCodeAt(a);HEAP16[t>>1]=o,t+=2}return HEAP16[t>>1]=0,t-i}function lengthBytesUTF16(e){return 2*e.length}function UTF32ToString(e){for(var t=0,n="";;){var i=HEAP32[e+4*t>>2];if(0==i)return n;if(++t,i>=65536){var r=i-65536;n+=String.fromCharCode(55296|r>>10,56320|1023&r)}else n+=String.fromCharCode(i)}}function stringToUTF32(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var i=t,r=i+n-4,a=0;a<e.length;++a){var o=e.charCodeAt(a);if(o>=55296&&o<=57343){var s=e.charCodeAt(++a);o=65536+((1023&o)<<10)|1023&s}if(HEAP32[t>>2]=o,t+=4,t+4>r)break}return HEAP32[t>>2]=0,t-i}function lengthBytesUTF32(e){for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=55296&&i<=57343&&++n,t+=4}return t}function demangle(e){function t(){s++,"K"===e[s]&&s++;for(var t=[];"E"!==e[s];)if("S"!==e[s])if("C"!==e[s]){var n=parseInt(e.substr(s)),i=n.toString().length;if(!n||!i){s--;break}var r=e.substr(s+i,n);t.push(r),u.push(r),s+=i+n}else t.push(t[t.length-1]),s+=2;else{s++;var a=e.indexOf("_",s),o=e.substring(s,a)||0;t.push(u[o]||"?"),s=a+1}return s++,t}function n(i,r,a){function o(){return"("+f.join(", ")+")"}r=r||1/0;var u,h="",f=[];if("N"===e[s]){if(u=t().join("::"),r--,0===r)return i?[u]:u}else{("K"===e[s]||c&&"L"===e[s])&&s++;var d=parseInt(e.substr(s));if(d){var p=d.toString().length;u=e.substr(s+p,d),s+=p+d}}if(c=!1,"I"===e[s]){s++;var g=n(!0),m=n(!0,1,!0);h+=m[0]+" "+u+"<"+g.join(", ")+">"}else h=u;e:for(;s<e.length&&r-- >0;){var v=e[s++];if(v in l)f.push(l[v]);else switch(v){case"P":f.push(n(!0,1,!0)[0]+"*");break;case"R":f.push(n(!0,1,!0)[0]+"&");break;case"L":s++;var _=e.indexOf("E",s),d=_-s;f.push(e.substr(s,d)),s+=d+2;break;case"A":var d=parseInt(e.substr(s));if(s+=d.toString().length,"_"!==e[s])throw"?";s++,f.push(n(!0,1,!0)[0]+" ["+d+"]");break;case"E":break e;default:h+="?"+v;break e}}return a||1!==f.length||"void"!==f[0]||(f=[]),i?(h&&f.push(h+"?"),f):h+o()}var i=!!Module.___cxa_demangle;if(i)try{var r=_malloc(e.length);writeStringToMemory(e.substr(1),r);var a=_malloc(4),o=Module.___cxa_demangle(r,0,0,a);if(0===getValue(a,"i32")&&o)return Pointer_stringify(o)}catch(e){}finally{r&&_free(r),a&&_free(a),o&&_free(o)}var s=3,l={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},u=[],c=!0,h=e;try{if("Object._main"==e||"_main"==e)return"main()";if("number"==typeof e&&(e=Pointer_stringify(e)),"_"!==e[0])return e;if("_"!==e[1])return e;if("Z"!==e[2])return e;switch(e[3]){case"n":return"operator new()";case"d":return"operator delete()"}h=n()}catch(e){h+="?"}return h.indexOf("?")>=0&&!i&&Runtime.warnOnce("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),h}function demangleAll(e){return e.replace(/__Z[\w\d_]+/g,function(e){var t=demangle(e);return e===t?e:e+" ["+t+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){return demangleAll(jsStackTrace())}function alignMemoryPage(e){return e%4096>0&&(e+=4096-e%4096),e}function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){abortOnCannotGrowMemory()}function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?Runtime.dynCall("v",n):Runtime.dynCall("vi",n,[t.arg]):n(void 0===t.arg?null:t.arg)}else t()}}function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__),runtimeExited=!0}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPreMain(e){__ATMAIN__.unshift(e)}function addOnExit(e){__ATEXIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}function intArrayFromString(e,t,n){var i=n>0?n:lengthBytesUTF8(e)+1,r=new Array(i),a=stringToUTF8Array(e,r,0,r.length);return t&&(r.length=a),r}function intArrayToString(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];i>255&&(i&=255),t.push(String.fromCharCode(i))}return t.join("")}function writeStringToMemory(e,t,n){for(var i=intArrayFromString(e,n),r=0;r<i.length;){var a=i[r];HEAP8[t+r>>0]=a,r+=1}}function writeArrayToMemory(e,t){for(var n=0;n<e.length;n++)HEAP8[t++>>0]=e[n]}function writeAsciiToMemory(e,t,n){for(var i=0;i<e.length;++i)HEAP8[t++>>0]=e.charCodeAt(i);n||(HEAP8[t>>0]=0)}function unSign(e,t,n){return e>=0?e:t<=32?2*Math.abs(1<<t-1)+e:Math.pow(2,t)+e}function reSign(e,t,n){if(e<=0)return e;var i=t<=32?Math.abs(1<<t-1):Math.pow(2,t-1);return e>=i&&(t<=32||e>i)&&(e=-2*i+e),e}function getUniqueRunDependency(e){return e}function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}function _emscripten_asm_const_33(e,t,n,i,r,a,o,s,l,u,c,h,f,d,p,g,m,v,_,y,b,w,x,E,k,M,T,S,A,R,C,P,O,L){return ASM_CONSTS[e](t,n,i,r,a,o,s,l,u,c,h,f,d,p,g,m,v,_,y,b,w,x,E,k,M,T,S,A,R,C,P,O,L)}function _emscripten_asm_const_4(e,t,n,i,r){return ASM_CONSTS[e](t,n,i,r)}function _emscripten_asm_const_5(e,t,n,i,r,a){return ASM_CONSTS[e](t,n,i,r,a)}function copyTempFloat(e){HEAP8[tempDoublePtr]=HEAP8[e],HEAP8[tempDoublePtr+1]=HEAP8[e+1],HEAP8[tempDoublePtr+2]=HEAP8[e+2],HEAP8[tempDoublePtr+3]=HEAP8[e+3]}function copyTempDouble(e){HEAP8[tempDoublePtr]=HEAP8[e],HEAP8[tempDoublePtr+1]=HEAP8[e+1],HEAP8[tempDoublePtr+2]=HEAP8[e+2],HEAP8[tempDoublePtr+3]=HEAP8[e+3],HEAP8[tempDoublePtr+4]=HEAP8[e+4],HEAP8[tempDoublePtr+5]=HEAP8[e+5],HEAP8[tempDoublePtr+6]=HEAP8[e+6],HEAP8[tempDoublePtr+7]=HEAP8[e+7]}function _atexit(e,t){__ATEXIT__.unshift({func:e,arg:t})}function ___cxa_atexit(){return _atexit.apply(null,arguments)}function ___assert_fail(e,t,n,i){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",n,i?Pointer_stringify(i):"unknown function"]+" at "+stackTrace()}function embind_init_charCodes(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);embind_charCodes=e}function readLatin1String(e){for(var t="",n=e;HEAPU8[n];)t+=embind_charCodes[HEAPU8[n++]];return t}function makeLegalFunctionName(e){if(void 0===e)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=char_0&&t<=char_9?"_"+e:e}function createNamedFunction(e,t){return e=makeLegalFunctionName(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function extendError(e,t){var n=createNamedFunction(t,function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}function throwBindingError(e){throw new BindingError(e)}function throwInternalError(e){throw new InternalError(e)}function whenDependentTypesAreResolved(e,t,n){function i(t){var i=n(t);i.length!==e.length&&throwInternalError("Mismatched type converter count");for(var r=0;r<e.length;++r)registerType(e[r],i[r])}e.forEach(function(e){typeDependencies[e]=t});var r=new Array(t.length),a=[],o=0;t.forEach(function(e,t){registeredTypes.hasOwnProperty(e)?r[t]=registeredTypes[e]:(a.push(e),awaitingDependencies.hasOwnProperty(e)||(awaitingDependencies[e]=[]),awaitingDependencies[e].push(function(){r[t]=registeredTypes[e],++o,o===a.length&&i(r)}))}),0===a.length&&i(r)}function registerType(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=t.name;if(e||throwBindingError('type "'+i+'" must have a positive integer typeid pointer'),registeredTypes.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;throwBindingError("Cannot register type '"+i+"' twice")}if(registeredTypes[e]=t,delete typeDependencies[e],awaitingDependencies.hasOwnProperty(e)){var r=awaitingDependencies[e];delete awaitingDependencies[e],r.forEach(function(e){e()})}}function __embind_register_void(e,t){t=readLatin1String(t),registerType(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),EXCEPTIONS.clearRef(EXCEPTIONS.deAdjust(e)),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return 0|(asm.setTempRet0(0),0);var t=EXCEPTIONS.infos[e],n=t.type;if(!n)return 0|(asm.setTempRet0(0),e);var i=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(n);___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var r=0;r<i.length;r++)if(i[r]&&Module.___cxa_can_catch(i[r],n,e))return e=HEAP32[e>>2],t.adjusted=e,0|(asm.setTempRet0(i[r]),e);return e=HEAP32[e>>2],0|(asm.setTempRet0(n),e)}function ___cxa_throw(e,t,n){throw EXCEPTIONS.infos[e]={ptr:e,adjusted:e,type:t,destructor:n,refcount:0},EXCEPTIONS.last=e,"uncaught_exception"in __ZSt18uncaught_exceptionv?__ZSt18uncaught_exceptionv.uncaught_exception++:__ZSt18uncaught_exceptionv.uncaught_exception=1,e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function getShiftFromSize(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function __embind_register_bool(e,t,n,i,r){var a=getShiftFromSize(n);t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){return!!e},toWireType:function(e,t){return t?i:r},argPackAdvance:8,readValueFromPointer:function(e){var i;if(1===n)i=HEAP8;else if(2===n)i=HEAP16;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);i=HEAP32}return this.fromWireType(i[e>>a])},destructorFunction:null})}function _abort(){Module.abort()}function _free(){}function _malloc(e){var t=Runtime.dynamicAlloc(e+8);return t+8&4294967288}function simpleReadValueFromPointer(e){return this.fromWireType(HEAPU32[e>>2])}function __embind_register_std_string(e,t){t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){for(var t=HEAPU32[e>>2],n=new Array(t),i=0;i<t;++i)n[i]=String.fromCharCode(HEAPU8[e+4+i]);return _free(e),n.join("")},toWireType:function(e,t){function n(e,t){return e[t]}function i(e,t){return e.charCodeAt(t)}t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r;t instanceof Uint8Array?r=n:t instanceof Int8Array?r=n:"string"==typeof t?r=i:throwBindingError("Cannot pass non-string to std::string");var a=t.length,o=_malloc(4+a);HEAPU32[o>>2]=a;for(var s=0;s<a;++s){var l=r(t,s);l>255&&(_free(o),throwBindingError("String has UTF-16 code units that do not fit in 8 bits")),HEAPU8[o+4+s]=l}return null!==e&&e.push(_free,o),o},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function __embind_register_std_wstring(e,t,n){n=readLatin1String(n);var i,r;2===t?(i=function(){return HEAPU16},r=1):4===t&&(i=function(){return HEAPU32},r=2),registerType(e,{name:n,fromWireType:function(e){for(var t=i(),n=HEAPU32[e>>2],a=new Array(n),o=e+4>>r,s=0;s<n;++s)a[s]=String.fromCharCode(t[o+s]);return _free(e),a.join("")},toWireType:function(e,n){var a=i(),o=n.length,s=_malloc(4+o*t);HEAPU32[s>>2]=o;for(var l=s+4>>r,u=0;u<o;++u)a[l+u]=n.charCodeAt(u);return null!==e&&e.push(_free,s),s},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function ___lock(){}function ___unlock(){}function _embind_repr(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function integerReadValueFromPointer(e,t,n){switch(t){case 0:return n?function(e){return HEAP8[e]}:function(e){return HEAPU8[e]};case 1:return n?function(e){return HEAP16[e>>1]}:function(e){return HEAPU16[e>>1]};case 2:return n?function(e){return HEAP32[e>>2]}:function(e){return HEAPU32[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function __embind_register_integer(e,t,n,i,r){t=readLatin1String(t),r===-1&&(r=4294967295);var a=getShiftFromSize(n),o=function(e){return e};if(0===i){var s=32-8*n;o=function(e){return e<<s>>>s}}registerType(e,{name:t,fromWireType:o,toWireType:function(e,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError('Cannot convert "'+_embind_repr(n)+'" to '+this.name);if(n<i||n>r)throw new TypeError('Passing a number "'+_embind_repr(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+i+", "+r+"]!");return 0|n},argPackAdvance:8,readValueFromPointer:integerReadValueFromPointer(t,a,0!==i),destructorFunction:null})}function __emval_decref(e){e>4&&0===--emval_handle_array[e].refcount&&(emval_handle_array[e]=void 0,emval_free_list.push(e))}function count_emval_handles(){for(var e=0,t=5;t<emval_handle_array.length;++t)void 0!==emval_handle_array[t]&&++e;return e}function get_first_emval(){for(var e=5;e<emval_handle_array.length;++e)if(void 0!==emval_handle_array[e])return emval_handle_array[e];return null}function init_emval(){Module.count_emval_handles=count_emval_handles,Module.get_first_emval=get_first_emval}function __emval_register(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=emval_free_list.length?emval_free_list.pop():emval_handle_array.length;return emval_handle_array[t]={refcount:1,value:e},t}}function __embind_register_emval(e,t){t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){var t=emval_handle_array[e].value;return __emval_decref(e),t},toWireType:function(e,t){return __emval_register(t)},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:null})}function ___cxa_allocate_exception(e){return _malloc(e)}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}function _sysconf(e){switch(e){case 30:return PAGE_SIZE;case 85:return totalMemory/PAGE_SIZE;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator?navigator.hardwareConcurrency||1:1}return ___setErrNo(ERRNO_CODES.EINVAL),-1}function __exit(e){Module.exit(e)}function _exit(e){__exit(e)}function floatReadValueFromPointer(e,t){switch(t){case 2:return function(e){return this.fromWireType(HEAPF32[e>>2])};case 3:return function(e){return this.fromWireType(HEAPF64[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function __embind_register_float(e,t,n){var i=getShiftFromSize(n);t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+_embind_repr(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:floatReadValueFromPointer(t,i),destructorFunction:null})}function _pthread_cleanup_push(e,t){__ATEXIT__.push(function(){Runtime.dynCall("vi",e,[t])}),_pthread_cleanup_push.level=__ATEXIT__.length}function new_(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=createNamedFunction(e.name||"unknownFunctionName",function(){});n.prototype=e.prototype;var i=new n,r=e.apply(i,t);return r instanceof Object?r:i}function runDestructors(e){for(;e.length;){var t=e.pop(),n=e.pop();n(t)}}function craftInvokerFunction(e,t,n,i,r){var a=t.length;a<2&&throwBindingError("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&null!==n,s="",l="",u=0;u<a-2;++u)s+=(0!==u?", ":"")+"arg"+u,l+=(0!==u?", ":"")+"arg"+u+"Wired";for(var c="return function "+makeLegalFunctionName(e)+"("+s+") {\nif (arguments.length !== "+(a-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(a-2)+" args!');\n}\n",h=!1,u=1;u<t.length;++u)if(null!==t[u]&&void 0===t[u].destructorFunction){h=!0;break}h&&(c+="var destructors = [];\n");var f=h?"destructors":"null",d=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],p=[throwBindingError,i,r,runDestructors,t[0],t[1]];o&&(c+="var thisWired = classParam.toWireType("+f+", this);\n");for(var u=0;u<a-2;++u)c+="var arg"+u+"Wired = argType"+u+".toWireType("+f+", arg"+u+"); // "+t[u+2].name+"\n",d.push("argType"+u),p.push(t[u+2]);o&&(l="thisWired"+(l.length>0?", ":"")+l);var g="void"!==t[0].name;if(c+=(g?"var rv = ":"")+"invoker(fn"+(l.length>0?", ":"")+l+");\n",h)c+="runDestructors(destructors);\n";else for(var u=o?1:2;u<t.length;++u){var m=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==t[u].destructorFunction&&(c+=m+"_dtor("+m+"); // "+t[u].name+"\n",d.push(m+"_dtor"),p.push(t[u].destructorFunction))}g&&(c+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),c+="}\n",d.push(c);var v=new_(Function,d).apply(null,p);return v}function ensureOverloadTable(e,t,n){if(void 0===e[t].overloadTable){var i=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||throwBindingError("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}}function exposePublicSymbol(e,t,n){Module.hasOwnProperty(e)?((void 0===n||void 0!==Module[e].overloadTable&&void 0!==Module[e].overloadTable[n])&&throwBindingError("Cannot register public name '"+e+"' twice"),ensureOverloadTable(Module,e,e),Module.hasOwnProperty(n)&&throwBindingError("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),Module[e].overloadTable[n]=t):(Module[e]=t,void 0!==n&&(Module[e].numArguments=n))}function heap32VectorToArray(e,t){for(var n=[],i=0;i<e;i++)n.push(HEAP32[(t>>2)+i]);return n}function replacePublicSymbol(e,t,n){Module.hasOwnProperty(e)||throwInternalError("Replacing nonexistant public symbol"),void 0!==Module[e].overloadTable&&void 0!==n?Module[e].overloadTable[n]=t:Module[e]=t}function requireFunction(e,t){function n(n){for(var i=[],r=1;r<e.length;++r)i.push("a"+r);var a="dynCall_"+e+"_"+t,o="return function "+a+"("+i.join(", ")+") {\n";return o+="    return dynCall(rawFunction"+(i.length?", ":"")+i.join(", ")+");\n",o+="};\n",new Function("dynCall","rawFunction",o)(n,t)}e=readLatin1String(e);var i;if(void 0!==Module["FUNCTION_TABLE_"+e])i=Module["FUNCTION_TABLE_"+e][t];else if("undefined"!=typeof FUNCTION_TABLE)i=FUNCTION_TABLE[t];else{var r=asm["dynCall_"+e];void 0===r&&(r=asm["dynCall_"+e.replace(/f/g,"d")],void 0===r&&throwBindingError("No dynCall invoker for signature: "+e)),i=n(r)}return"function"!=typeof i&&throwBindingError("unknown function pointer with signature "+e+": "+t),i}function getTypeName(e){var t=___getTypeName(e),n=readLatin1String(t);return _free(t),n}function throwUnboundTypeError(e,t){function n(e){if(!r[e]&&!registeredTypes[e]){if(typeDependencies[e])return void typeDependencies[e].forEach(n);i.push(e),r[e]=!0}}var i=[],r={};throw t.forEach(n),new UnboundTypeError(e+": "+i.map(getTypeName).join([", "]))}function __embind_register_function(e,t,n,i,r,a){var o=heap32VectorToArray(t,n);e=readLatin1String(e),r=requireFunction(i,r),exposePublicSymbol(e,function(){throwUnboundTypeError("Cannot call "+e+" due to unbound types",o)},t-1),whenDependentTypesAreResolved([],o,function(n){var i=[n[0],null].concat(n.slice(1));return replacePublicSymbol(e,craftInvokerFunction(e,i,null,r,a),t-1),[]})}function __embind_register_constant(e,t,n){e=readLatin1String(e),whenDependentTypesAreResolved([],[t],function(t){return t=t[0],Module[e]=t.fromWireType(n),[]})}function _pthread_cleanup_pop(){assert(_pthread_cleanup_push.level==__ATEXIT__.length,"cannot pop if something else added meanwhile!"),__ATEXIT__.pop(),_pthread_cleanup_push.level=__ATEXIT__.length}function ___syscall5(e,t){SYSCALLS.varargs=t;try{var n=SYSCALLS.getStr(),i=SYSCALLS.get(),r=SYSCALLS.get(),a=FS.open(n,i,r);return a.fd}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function _emscripten_memcpy_big(e,t,n){return HEAPU8.set(HEAPU8.subarray(t,t+n),e),e}function ___syscall6(e,t){SYSCALLS.varargs=t;try{var n=SYSCALLS.getStreamFromFD();return FS.close(n),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function _sbrk(e){var t=_sbrk;t.called||(DYNAMICTOP=alignMemoryPage(DYNAMICTOP),t.called=!0,assert(Runtime.dynamicAlloc),t.alloc=Runtime.dynamicAlloc,Runtime.dynamicAlloc=function(){abort("cannot dynamically allocate, sbrk now has control")});var n=DYNAMICTOP;if(0!=e){var i=t.alloc(e);if(!i)return-1>>>0}return n}function ___syscall54(e,t){SYSCALLS.varargs=t;try{var n=SYSCALLS.getStreamFromFD(),i=SYSCALLS.get();switch(i){case 21505:return n.tty?0:-ERRNO_CODES.ENOTTY;case 21506:return n.tty?0:-ERRNO_CODES.ENOTTY;case 21519:if(!n.tty)return-ERRNO_CODES.ENOTTY;var r=SYSCALLS.get();return HEAP32[r>>2]=0,0;case 21520:return n.tty?-ERRNO_CODES.EINVAL:-ERRNO_CODES.ENOTTY;case 21531:var r=SYSCALLS.get();return FS.ioctl(n,i,r);default:abort("bad ioctl syscall "+i)}}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function __embind_register_memory_view(e,t,n){function i(e){e>>=2;var t=HEAPU32,n=t[e],i=t[e+1];return new a(t.buffer,i,n)}var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],a=r[t];n=readLatin1String(n),registerType(e,{name:n,fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})}function _time(e){var t=Date.now()/1e3|0;return e&&(HEAP32[e>>2]=t),t}function _pthread_self(){return 0}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var n=SYSCALLS.getStreamFromFD(),i=SYSCALLS.get(),r=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),s=r;return assert(0===i),FS.llseek(n,s,o),HEAP32[a>>2]=n.position,n.getdents&&0===s&&0===o&&(n.getdents=null),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var n=SYSCALLS.getStreamFromFD(),i=SYSCALLS.get(),r=SYSCALLS.get();return SYSCALLS.doWritev(n,i,r)}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___syscall221(e,t){SYSCALLS.varargs=t;try{var n=SYSCALLS.getStreamFromFD(),i=SYSCALLS.get();switch(i){case 0:var r=SYSCALLS.get();if(r<0)return-ERRNO_CODES.EINVAL;var a;return a=FS.open(n.path,n.flags,0,r),a.fd;case 1:case 2:return 0;case 3:return n.flags;case 4:var r=SYSCALLS.get();return n.flags|=r,0;case 12:case 12:var r=SYSCALLS.get(),o=0;return HEAP16[r+o>>1]=2,0;case 13:case 14:case 13:case 14:return 0;case 16:case 8:return-ERRNO_CODES.EINVAL;case 9:return ___setErrNo(ERRNO_CODES.EINVAL),-1;default:return-ERRNO_CODES.EINVAL}}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___syscall145(e,t){SYSCALLS.varargs=t;try{var n=SYSCALLS.getStreamFromFD(),i=SYSCALLS.get(),r=SYSCALLS.get();return SYSCALLS.doReadv(n,i,r)}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function invoke_iiii(e,t,n,i){try{return Module.dynCall_iiii(e,t,n,i)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_viiiii(e,t,n,i,r,a){try{Module.dynCall_viiiii(e,t,n,i,r,a)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_dii(e,t,n){try{return Module.dynCall_dii(e,t,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_vid(e,t,n){try{Module.dynCall_vid(e,t,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_di(e,t){try{return Module.dynCall_di(e,t)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_i(e){try{return Module.dynCall_i(e)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_vii(e,t,n){try{Module.dynCall_vii(e,t,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_viii(e,t,n,i){try{Module.dynCall_viii(e,t,n,i)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_viid(e,t,n,i){try{Module.dynCall_viid(e,t,n,i);
}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_iiiii(e,t,n,i,r){try{return Module.dynCall_iiiii(e,t,n,i,r)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_viiiiii(e,t,n,i,r,a,o){try{Module.dynCall_viiiiii(e,t,n,i,r,a,o)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_iii(e,t,n){try{return Module.dynCall_iii(e,t,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_viiii(e,t,n,i,r){try{Module.dynCall_viiii(e,t,n,i,r)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function run(e){function t(){Module.calledRun||(Module.calledRun=!0,ABORT||(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}e=e||Module.arguments,null===preloadStartTime&&(preloadStartTime=Date.now()),runDependencies>0||(preRun(),runDependencies>0||Module.calledRun||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()))}function exit(e,t){if(!t||!Module.noExitRuntime)throw Module.noExitRuntime||(ABORT=!0,EXITSTATUS=e,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE?(process.stdout.once("drain",function(){process.exit(e)}),console.log(" "),setTimeout(function(){process.exit(e)},500)):ENVIRONMENT_IS_SHELL&&"function"==typeof quit&&quit(e),new ExitStatus(e)}function abort(e){void 0!==e?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0,EXITSTATUS=1;var t="\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.",n="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(t){n=t(n,e)}),n}!function(e,t,n){"use strict";!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),n(50),n(51),n(52),n(54),n(55),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(68),n(70),n(72),n(74),n(77),n(78),n(79),n(83),n(86),n(87),n(88),n(89),n(91),n(92),n(93),n(94),n(95),n(97),n(99),n(100),n(101),n(103),n(104),n(105),n(107),n(108),n(109),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(126),n(130),n(131),n(132),n(133),n(137),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(158),n(159),n(161),n(162),n(163),n(167),n(168),n(169),n(170),n(171),n(173),n(174),n(175),n(176),n(179),n(181),n(182),n(183),n(185),n(187),n(189),n(190),n(191),n(193),n(194),n(195),n(196),n(203),n(206),n(207),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(231),n(234),n(235),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(258),n(259),n(261),n(262),n(263),n(264),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(291),n(156),n(293),n(292),n(294),n(295),n(296),n(297),n(298),n(300),n(301),n(302),n(304),e.exports=n(305)},function(e,t,i){var r=i(2),a=i(3),o=i(4),s=i(6),l=i(16),u=i(20).KEY,c=i(5),h=i(21),f=i(22),d=i(17),p=i(23),g=i(24),m=i(25),v=i(27),_=i(40),y=i(43),b=i(10),w=i(30),x=i(14),E=i(15),k=i(44),M=i(47),T=i(49),S=i(9),A=i(28),R=T.f,C=S.f,P=M.f,O=r.Symbol,L=r.JSON,N=L&&L.stringify,F="prototype",D=p("_hidden"),I=p("toPrimitive"),U={}.propertyIsEnumerable,H=h("symbol-registry"),z=h("symbols"),B=h("op-symbols"),j=Object[F],V="function"==typeof O,G=r.QObject,W=!G||!G[F]||!G[F].findChild,X=o&&c(function(){return 7!=k(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=R(j,t);i&&delete j[t],C(e,t,n),i&&e!==j&&C(j,t,i)}:C,Y=function(e){var t=z[e]=k(O[F]);return t._k=e,t},q=V&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},Z=function(e,t,n){return e===j&&Z(B,t,n),b(e),t=x(t,!0),b(n),a(z,t)?(n.enumerable?(a(e,D)&&e[D][t]&&(e[D][t]=!1),n=k(n,{enumerable:E(0,!1)})):(a(e,D)||C(e,D,E(1,{})),e[D][t]=!0),X(e,t,n)):C(e,t,n)},Q=function(e,t){b(e);for(var n,i=_(t=w(t)),r=0,a=i.length;a>r;)Z(e,n=i[r++],t[n]);return e},$=function(e,t){return t===n?k(e):Q(k(e),t)},J=function(e){var t=U.call(this,e=x(e,!0));return!(this===j&&a(z,e)&&!a(B,e))&&(!(t||!a(this,e)||!a(z,e)||a(this,D)&&this[D][e])||t)},K=function(e,t){if(e=w(e),t=x(t,!0),e!==j||!a(z,t)||a(B,t)){var n=R(e,t);return!n||!a(z,t)||a(e,D)&&e[D][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=P(w(e)),i=[],r=0;n.length>r;)a(z,t=n[r++])||t==D||t==u||i.push(t);return i},te=function(e){for(var t,n=e===j,i=P(n?B:w(e)),r=[],o=0;i.length>o;)!a(z,t=i[o++])||n&&!a(j,t)||r.push(z[t]);return r};V||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:n),t=function(n){this===j&&t.call(B,n),a(this,D)&&a(this[D],e)&&(this[D][e]=!1),X(this,e,E(1,n))};return o&&W&&X(j,e,{configurable:!0,set:t}),Y(e)},l(O[F],"toString",function(){return this._k}),T.f=K,S.f=Z,i(48).f=M.f=ee,i(42).f=J,i(41).f=te,o&&!i(26)&&l(j,"propertyIsEnumerable",J,!0),g.f=function(e){return Y(p(e))}),s(s.G+s.W+s.F*!V,{Symbol:O});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;ne.length>ie;)p(ne[ie++]);for(var ne=A(p.store),ie=0;ne.length>ie;)m(ne[ie++]);s(s.S+s.F*!V,"Symbol",{for:function(e){return a(H,e+="")?H[e]:H[e]=O(e)},keyFor:function(e){if(q(e))return v(H,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!V,"Object",{create:$,defineProperty:Z,defineProperties:Q,getOwnPropertyDescriptor:K,getOwnPropertyNames:ee,getOwnPropertySymbols:te}),L&&s(s.S+s.F*(!V||c(function(){var e=O();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))})),"JSON",{stringify:function(e){if(e!==n&&!q(e)){for(var t,i,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);return t=r[1],"function"==typeof t&&(i=t),!i&&y(t)||(t=function(e,t){if(i&&(t=i.call(this,e,t)),!q(t))return t}),r[1]=t,N.apply(L,r)}}}),O[F][I]||i(8)(O[F],I,O[F].valueOf),f(O,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,n){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof t&&(t=i)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=!n(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,i){var r=i(2),a=i(7),o=i(8),s=i(16),l=i(18),u="prototype",c=function(e,t,i){var h,f,d,p,g=e&c.F,m=e&c.G,v=e&c.S,_=e&c.P,y=e&c.B,b=m?r:v?r[t]||(r[t]={}):(r[t]||{})[u],w=m?a:a[t]||(a[t]={}),x=w[u]||(w[u]={});m&&(i=t);for(h in i)f=!g&&b&&b[h]!==n,d=(f?b:i)[h],p=y&&f?l(d,r):_&&"function"==typeof d?l(Function.call,d):d,b&&s(b,h,d,e&c.U),w[h]!=d&&o(w,h,p),_&&x[h]!=d&&(x[h]=d)};r.core=a,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(t,n){var i=t.exports={version:"2.4.0"};"number"==typeof e&&(e=i)},function(e,t,n){var i=n(9),r=n(15);e.exports=n(4)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(10),r=n(12),a=n(14),o=Object.defineProperty;t.f=n(4)?Object.defineProperty:function(e,t,n){if(i(e),t=a(t,!0),i(n),r)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(11);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(4)&&!n(5)(function(){return 7!=Object.defineProperty(n(13)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(11),r=n(2).document,a=i(r)&&i(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},function(e,t,n){var i=n(11);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(2),r=n(8),a=n(3),o=n(17)("src"),s="toString",l=Function[s],u=(""+l).split(s);n(7).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,n,s){var l="function"==typeof n;l&&(a(n,"name")||r(n,"name",t)),e[t]!==n&&(l&&(a(n,o)||r(n,o,e[t]?""+e[t]:u.join(String(t)))),e===i?e[t]=n:s?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[o]||l.call(this)})},function(e,t){var i=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(e===n?"":e,")_",(++i+r).toString(36))}},function(e,t,i){var r=i(19);e.exports=function(e,t,i){if(r(e),t===n)return e;switch(i){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(17)("meta"),r=n(11),a=n(3),o=n(9).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(5)(function(){return l(Object.preventExtensions({}))}),c=function(e){o(e,i,{value:{i:"O"+ ++s,w:{}}})},h=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},f=function(e,t){if(!a(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},d=function(e){return u&&p.NEED&&l(e)&&!a(e,i)&&c(e),e},p=e.exports={KEY:i,NEED:!1,fastKey:h,getWeak:f,onFreeze:d}},function(e,t,n){var i=n(2),r="__core-js_shared__",a=i[r]||(i[r]={});e.exports=function(e){return a[e]||(a[e]={})}},function(e,t,n){var i=n(9).f,r=n(3),a=n(23)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},function(e,t,n){var i=n(21)("wks"),r=n(17),a=n(2).Symbol,o="function"==typeof a,s=e.exports=function(e){return i[e]||(i[e]=o&&a[e]||(o?a:r)("Symbol."+e))};s.store=i},function(e,t,n){t.f=n(23)},function(e,t,n){var i=n(2),r=n(7),a=n(26),o=n(24),s=n(9).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=a?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t){e.exports=!1},function(e,t,n){var i=n(28),r=n(30);e.exports=function(e,t){for(var n,a=r(e),o=i(a),s=o.length,l=0;s>l;)if(a[n=o[l++]]===t)return n}},function(e,t,n){var i=n(29),r=n(39);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(3),r=n(30),a=n(34)(!1),o=n(38)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),l=0,u=[];for(n in s)n!=o&&i(s,n)&&u.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~a(u,n)||u.push(n));return u}},function(e,t,n){var i=n(31),r=n(33);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(e==n)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(30),r=n(35),a=n(37);e.exports=function(e){return function(t,n,o){var s,l=i(t),u=r(l.length),c=a(o,u);if(e&&n!=n){for(;u>c;)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(36),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(36),r=Math.max,a=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):a(e,t)}},function(e,t,n){var i=n(21)("keys"),r=n(17);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(28),r=n(41),a=n(42);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var o,s=n(e),l=a.f,u=0;s.length>u;)l.call(e,o=s[u++])&&t.push(o);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var i=n(32);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,i){var r=i(10),a=i(45),o=i(39),s=i(38)("IE_PROTO"),l=function(){},u="prototype",c=function(){var e,t=i(13)("iframe"),n=o.length,r="<",a=">";for(t.style.display="none",i(46).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+a+"document.F=Object"+r+"/script"+a),e.close(),c=e.F;n--;)delete c[u][o[n]];return c()};e.exports=Object.create||function(e,t){var i;return null!==e?(l[u]=r(e),i=new l,l[u]=null,i[s]=e):i=c(),t===n?i:a(i,t)}},function(e,t,n){var i=n(9),r=n(10),a=n(28);e.exports=n(4)?Object.defineProperties:function(e,t){r(e);for(var n,o=a(t),s=o.length,l=0;s>l;)i.f(e,n=o[l++],t[n]);return e}},function(e,t,n){e.exports=n(2).document&&document.documentElement},function(e,t,n){var i=n(30),r=n(48).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return r(e)}catch(e){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?s(e):r(i(e))}},function(e,t,n){var i=n(29),r=n(39).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(42),r=n(15),a=n(30),o=n(14),s=n(3),l=n(12),u=Object.getOwnPropertyDescriptor;t.f=n(4)?u:function(e,t){if(e=a(e),t=o(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){var i=n(6);i(i.S+i.F*!n(4),"Object",{defineProperty:n(9).f})},function(e,t,n){var i=n(6);i(i.S+i.F*!n(4),"Object",{defineProperties:n(45)})},function(e,t,n){var i=n(30),r=n(49).f;n(53)("getOwnPropertyDescriptor",function(){return function(e,t){return r(i(e),t)}})},function(e,t,n){var i=n(6),r=n(7),a=n(5);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],o={};o[e]=t(n),i(i.S+i.F*a(function(){n(1)}),"Object",o)}},function(e,t,n){var i=n(6);i(i.S,"Object",{create:n(44)})},function(e,t,n){var i=n(56),r=n(57);n(53)("getPrototypeOf",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(33);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(3),r=n(56),a=n(38)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){var i=n(56),r=n(28);n(53)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){n(53)("getOwnPropertyNames",function(){return n(47).f})},function(e,t,n){var i=n(11),r=n(20).onFreeze;n(53)("freeze",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(11),r=n(20).onFreeze;n(53)("seal",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(11),r=n(20).onFreeze;n(53)("preventExtensions",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(11);n(53)("isFrozen",function(e){return function(t){return!i(t)||!!e&&e(t)}})},function(e,t,n){var i=n(11);n(53)("isSealed",function(e){return function(t){return!i(t)||!!e&&e(t)}})},function(e,t,n){var i=n(11);n(53)("isExtensible",function(e){return function(t){return!!i(t)&&(!e||e(t))}})},function(e,t,n){var i=n(6);i(i.S+i.F,"Object",{assign:n(67)})},function(e,t,n){var i=n(28),r=n(41),a=n(42),o=n(56),s=n(31),l=Object.assign;e.exports=!l||n(5)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var n=o(e),l=arguments.length,u=1,c=r.f,h=a.f;l>u;)for(var f,d=s(arguments[u++]),p=c?i(d).concat(c(d)):i(d),g=p.length,m=0;g>m;)h.call(d,f=p[m++])&&(n[f]=d[f]);return n}:l},function(e,t,n){var i=n(6);i(i.S,"Object",{is:n(69)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){var i=n(6);i(i.S,"Object",{setPrototypeOf:n(71).set})},function(e,t,i){var r=i(11),a=i(10),o=function(e,t){if(a(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=i(18)(Function.call,i(49).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,i){return o(e,i),t?e.__proto__=i:n(e,i),e}}({},!1):n),check:o}},function(e,t,n){var i=n(73),r={};r[n(23)("toStringTag")]="z",r+""!="[object z]"&&n(16)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(e,t,i){var r=i(32),a=i(23)("toStringTag"),o="Arguments"==r(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,i,l;return e===n?"Undefined":null===e?"Null":"string"==typeof(i=s(t=Object(e),a))?i:o?r(t):"Object"==(l=r(t))&&"function"==typeof t.callee?"Arguments":l}},function(e,t,n){var i=n(6);i(i.P,"Function",{bind:n(75)})},function(e,t,n){var i=n(19),r=n(11),a=n(76),o=[].slice,s={},l=function(e,t,n){if(!(t in s)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";s[t]=Function("F,a","return new F("+i.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=o.call(arguments,1),s=function(){var i=n.concat(o.call(arguments));return this instanceof s?l(t,i.length,i):a(t,i,e)};return r(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,i){var r=i===n;switch(t.length){case 0:return r?e():e.call(i);case 1:return r?e(t[0]):e.call(i,t[0]);case 2:return r?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},function(e,t,n){var i=n(9).f,r=n(15),a=n(3),o=Function.prototype,s=/^\s*function ([^ (]*)/,l="name",u=Object.isExtensible||function(){return!0};l in o||n(4)&&i(o,l,{configurable:!0,get:function(){try{var e=this,t=(""+e).match(s)[1];return a(e,l)||!u(e)||i(e,l,r(5,t)),t}catch(e){return""}}})},function(e,t,n){var i=n(11),r=n(57),a=n(23)("hasInstance"),o=Function.prototype;a in o||n(9).f(o,a,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=r(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var i=n(2),r=n(3),a=n(32),o=n(80),s=n(14),l=n(5),u=n(48).f,c=n(49).f,h=n(9).f,f=n(81).trim,d="Number",p=i[d],g=p,m=p.prototype,v=a(n(44)(m))==d,_="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=_?t.trim():f(t,3);var n,i,r,a=t.charCodeAt(0);if(43===a||45===a){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var o,l=t.slice(2),u=0,c=l.length;u<c;u++)if(o=l.charCodeAt(u),o<48||o>r)return NaN;return parseInt(l,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(v?l(function(){m.valueOf.call(n)}):a(n)!=d)?o(new g(y(t)),n,p):y(t)};for(var b,w=n(4)?u(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)r(g,b=w[x])&&!r(p,b)&&h(p,b,c(g,b));p.prototype=m,m.constructor=p,n(16)(i,d,p)}},function(e,t,n){var i=n(11),r=n(71).set;e.exports=function(e,t,n){var a,o=t.constructor;return o!==n&&"function"==typeof o&&(a=o.prototype)!==n.prototype&&i(a)&&r&&r(e,a),e}},function(e,t,n){var i=n(6),r=n(33),a=n(5),o=n(82),s="["+o+"]",l="鈥嬄�",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),h=function(e,t,n){var r={},s=a(function(){return!!o[e]()||l[e]()!=l}),u=r[e]=s?t(f):o[e];n&&(r[n]=u),i(i.P+i.F*s,"String",r)},f=h.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=h},function(e,t){e.exports="\t\n\v\f\r 聽釟€釥庘€€鈥佲€傗€冣€勨€呪€嗏€団€堚€夆€娾€仧銆€\u2028\u2029\ufeff"},function(e,t,n){var i=n(6),r=n(36),a=n(84),o=n(85),s=1..toFixed,l=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",h="0",f=function(e,t){for(var n=-1,i=t;++n<6;)i+=e*u[n],u[n]=i%1e7,i=l(i/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=l(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+o.call(h,7-n.length)+n}return t},g=function(e,t,n){return 0===t?n:t%2===1?g(e,t-1,n*e):g(e*e,t/2,n)},m=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};i(i.P+i.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(5)(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,i,s,l=a(this,c),u=r(e),v="",_=h;if(u<0||u>20)throw RangeError(c);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(v="-",l=-l),l>1e-21)if(t=m(l*g(2,69,1))-69,n=t<0?l*g(2,-t,1):l/g(2,t,1),n*=4503599627370496,t=52-t,t>0){for(f(0,n),i=u;i>=7;)f(1e7,0),i-=7;for(f(g(10,i,1),0),i=t-1;i>=23;)d(1<<23),i-=23;d(1<<i),f(1,1),d(2),_=p()}else f(0,n),f(1<<-t,0),_=p()+o.call(h,u);return u>0?(s=_.length,_=v+(s<=u?"0."+o.call(h,u-s)+_:_.slice(0,s-u)+"."+_.slice(s-u))):_=v+_,_}})},function(e,t,n){var i=n(32);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=i(e))throw TypeError(t);return+e}},function(e,t,n){var i=n(36),r=n(33);e.exports=function(e){var t=String(r(this)),n="",a=i(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t,i){var r=i(6),a=i(5),o=i(84),s=1..toPrecision;r(r.P+r.F*(a(function(){return"1"!==s.call(1,n)})||!a(function(){s.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return e===n?s.call(t):s.call(t,e)}})},function(e,t,n){var i=n(6);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var i=n(6),r=n(2).isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}})},function(e,t,n){var i=n(6);i(i.S,"Number",{isInteger:n(90)})},function(e,t,n){var i=n(11),r=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},function(e,t,n){var i=n(6);i(i.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var i=n(6),r=n(90),a=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return r(e)&&a(e)<=9007199254740991}})},function(e,t,n){var i=n(6);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var i=n(6);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var i=n(6),r=n(96);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(e,t,n){var i=n(2).parseFloat,r=n(81).trim;e.exports=1/i(n(82)+"-0")!==-(1/0)?function(e){var t=r(String(e),3),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},function(e,t,n){var i=n(6),r=n(98);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(e,t,n){var i=n(2).parseInt,r=n(81).trim,a=n(82),o=/^[\-+]?0[xX]/;e.exports=8!==i(a+"08")||22!==i(a+"0x16")?function(e,t){var n=r(String(e),3);return i(n,t>>>0||(o.test(n)?16:10))}:i},function(e,t,n){var i=n(6),r=n(98);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(e,t,n){var i=n(6),r=n(96);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(e,t,n){var i=n(6),r=n(102),a=Math.sqrt,o=Math.acosh;i(i.S+i.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:r(e-1+a(e-1)*a(e+1))}})},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){function i(e){return isFinite(e=+e)&&0!=e?e<0?-i(-e):Math.log(e+Math.sqrt(e*e+1)):e}var r=n(6),a=Math.asinh;r(r.S+r.F*!(a&&1/a(0)>0),"Math",{asinh:i})},function(e,t,n){var i=n(6),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var i=n(6),r=n(106);i(i.S,"Math",{cbrt:function(e){return r(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){var i=n(6);i(i.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var i=n(6),r=Math.exp;i(i.S,"Math",{cosh:function(e){return(r(e=+e)+r(-e))/2}})},function(e,t,n){var i=n(6),r=n(110);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var i=n(6),r=n(106),a=Math.pow,o=a(2,-52),s=a(2,-23),l=a(2,127)*(2-s),u=a(2,-126),c=function(e){return e+1/o-1/o};i(i.S,"Math",{fround:function(e){var t,n,i=Math.abs(e),a=r(e);return i<u?a*c(i/u/s)*u*s:(t=(1+s/o)*i,n=t-(t-i),n>l||n!=n?a*(1/0):a*n)}})},function(e,t,n){var i=n(6),r=Math.abs;i(i.S,"Math",{hypot:function(e,t){for(var n,i,a=0,o=0,s=arguments.length,l=0;o<s;)n=r(arguments[o++]),l<n?(i=l/n,a=a*i*i+1,l=n):n>0?(i=n/l,a+=i*i):a+=n;return l===1/0?1/0:l*Math.sqrt(a)}})},function(e,t,n){var i=n(6),r=Math.imul;i(i.S+i.F*n(5)(function(){return r(4294967295,5)!=-5||2!=r.length}),"Math",{imul:function(e,t){var n=65535,i=+e,r=+t,a=n&i,o=n&r;return 0|a*o+((n&i>>>16)*o+a*(n&r>>>16)<<16>>>0)}})},function(e,t,n){var i=n(6);i(i.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},function(e,t,n){var i=n(6);i(i.S,"Math",{log1p:n(102)})},function(e,t,n){var i=n(6);i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var i=n(6);i(i.S,"Math",{sign:n(106)})},function(e,t,n){var i=n(6),r=n(110),a=Math.exp;i(i.S+i.F*n(5)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},function(e,t,n){var i=n(6),r=n(110),a=Math.exp;i(i.S,"Math",{tanh:function(e){var t=r(e=+e),n=r(-e);return t==1/0?1:n==1/0?-1:(t-n)/(a(e)+a(-e))}})},function(e,t,n){var i=n(6);i(i.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var i=n(6),r=n(37),a=String.fromCharCode,o=String.fromCodePoint;i(i.S+i.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,o=0;i>o;){if(t=+arguments[o++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(((t-=65536)>>10)+55296,t%1024+56320))}return n.join("")}})},function(e,t,n){var i=n(6),r=n(30),a=n(35);i(i.S,"String",{raw:function(e){for(var t=r(e.raw),n=a(t.length),i=arguments.length,o=[],s=0;n>s;)o.push(String(t[s++])),s<i&&o.push(String(arguments[s]));return o.join("")}})},function(e,t,n){n(81)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){var i=n(6),r=n(125)(!1);i(i.P,"String",{codePointAt:function(e){return r(this,e)}})},function(e,t,i){var r=i(36),a=i(33);e.exports=function(e){return function(t,i){var o,s,l=String(a(t)),u=r(i),c=l.length;return u<0||u>=c?e?"":n:(o=l.charCodeAt(u),o<55296||o>56319||u+1===c||(s=l.charCodeAt(u+1))<56320||s>57343?e?l.charAt(u):o:e?l.slice(u,u+2):(o-55296<<10)+(s-56320)+65536)}}},function(e,t,i){var r=i(6),a=i(35),o=i(127),s="endsWith",l=""[s];r(r.P+r.F*i(129)(s),"String",{endsWith:function(e){var t=o(this,e,s),i=arguments.length>1?arguments[1]:n,r=a(t.length),u=i===n?r:Math.min(a(i),r),c=String(e);return l?l.call(t,c,u):t.slice(u-c.length,u)===c}})},function(e,t,n){var i=n(128),r=n(33);e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},function(e,t,i){var r=i(11),a=i(32),o=i(23)("match");e.exports=function(e){var t;return r(e)&&((t=e[o])!==n?!!t:"RegExp"==a(e))}},function(e,t,n){var i=n(23)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,i){var r=i(6),a=i(127),o="includes";r(r.P+r.F*i(129)(o),"String",{includes:function(e){return!!~a(this,e,o).indexOf(e,arguments.length>1?arguments[1]:n)}})},function(e,t,n){var i=n(6);i(i.P,"String",{repeat:n(85)})},function(e,t,i){var r=i(6),a=i(35),o=i(127),s="startsWith",l=""[s];r(r.P+r.F*i(129)(s),"String",{startsWith:function(e){var t=o(this,e,s),i=a(Math.min(arguments.length>1?arguments[1]:n,t.length)),r=String(e);return l?l.call(t,r,i):t.slice(i,i+r.length)===r}})},function(e,t,i){var r=i(125)(!0);i(134)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:n,done:!0}:(e=r(t,i),this._i+=e.length,{value:e,done:!1})})},function(e,t,i){var r=i(26),a=i(6),o=i(16),s=i(8),l=i(3),u=i(135),c=i(136),h=i(22),f=i(57),d=i(23)("iterator"),p=!([].keys&&"next"in[].keys()),g="@@iterator",m="keys",v="values",_=function(){return this};e.exports=function(e,t,i,y,b,w,x){c(i,t,y);var E,k,M,T=function(e){if(!p&&e in C)return C[e];switch(e){case m:return function(){return new i(this,e)};case v:return function(){return new i(this,e)}}return function(){return new i(this,e)}},S=t+" Iterator",A=b==v,R=!1,C=e.prototype,P=C[d]||C[g]||b&&C[b],O=P||T(b),L=b?A?T("entries"):O:n,N="Array"==t?C.entries||P:P;if(N&&(M=f(N.call(new e)),M!==Object.prototype&&(h(M,S,!0),r||l(M,d)||s(M,d,_))),A&&P&&P.name!==v&&(R=!0,O=function(){return P.call(this)}),r&&!x||!p&&!R&&C[d]||s(C,d,O),u[t]=O,u[S]=_,b)if(E={values:A?O:T(v),keys:w?O:T(m),entries:L},x)for(k in E)k in C||o(C,k,E[k]);else a(a.P+a.F*(p||R),t,E);return E}},function(e,t){e.exports={}},function(e,t,n){var i=n(44),r=n(15),a=n(22),o={};n(8)(o,n(23)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(o,{next:r(1,n)}),a(e,t+" Iterator")}},function(e,t,n){n(138)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){var i=n(6),r=n(5),a=n(33),o=/"/g,s=function(e,t,n,i){var r=String(a(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),s+">"+r+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),i(i.P+i.F*r(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){n(138)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){n(138)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){n(138)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){n(138)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){n(138)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){n(138)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){n(138)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){n(138)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){n(138)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){n(138)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){n(138)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){n(138)("sup",function(e){
return function(){return e(this,"sup","","")}})},function(e,t,n){var i=n(6);i(i.S,"Array",{isArray:n(43)})},function(e,t,i){var r=i(18),a=i(6),o=i(56),s=i(153),l=i(154),u=i(35),c=i(155),h=i(156);a(a.S+a.F*!i(157)(function(e){Array.from(e)}),"Array",{from:function(e){var t,i,a,f,d=o(e),p="function"==typeof this?this:Array,g=arguments.length,m=g>1?arguments[1]:n,v=m!==n,_=0,y=h(d);if(v&&(m=r(m,g>2?arguments[2]:n,2)),y==n||p==Array&&l(y))for(t=u(d.length),i=new p(t);t>_;_++)c(i,_,v?m(d[_],_):d[_]);else for(f=y.call(d),i=new p;!(a=f.next()).done;_++)c(i,_,v?s(f,m,[a.value,_],!0):a.value);return i.length=_,i}})},function(e,t,i){var r=i(10);e.exports=function(e,t,i,a){try{return a?t(r(i)[0],i[1]):t(i)}catch(t){var o=e.return;throw o!==n&&r(o.call(e)),t}}},function(e,t,i){var r=i(135),a=i(23)("iterator"),o=Array.prototype;e.exports=function(e){return e!==n&&(r.Array===e||o[a]===e)}},function(e,t,n){var i=n(9),r=n(15);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,i){var r=i(73),a=i(23)("iterator"),o=i(135);e.exports=i(7).getIteratorMethod=function(e){if(e!=n)return e[a]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var i=n(23)("iterator"),r=!1;try{var a=[7][i]();a.return=function(){r=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var a=[7],o=a[i]();o.next=function(){return{done:n=!0}},a[i]=function(){return o},e(a)}catch(e){}return n}},function(e,t,n){var i=n(6),r=n(155);i(i.S+i.F*n(5)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)r(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,i){var r=i(6),a=i(30),o=[].join;r(r.P+r.F*(i(31)!=Object||!i(160)(o)),"Array",{join:function(e){return o.call(a(this),e===n?",":e)}})},function(e,t,n){var i=n(5);e.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,i){var r=i(6),a=i(46),o=i(32),s=i(37),l=i(35),u=[].slice;r(r.P+r.F*i(5)(function(){a&&u.call(a)}),"Array",{slice:function(e,t){var i=l(this.length),r=o(this);if(t=t===n?i:t,"Array"==r)return u.call(this,e,t);for(var a=s(e,i),c=s(t,i),h=l(c-a),f=Array(h),d=0;d<h;d++)f[d]="String"==r?this.charAt(a+d):this[a+d];return f}})},function(e,t,i){var r=i(6),a=i(19),o=i(56),s=i(5),l=[].sort,u=[1,2,3];r(r.P+r.F*(s(function(){u.sort(n)})||!s(function(){u.sort(null)})||!i(160)(l)),"Array",{sort:function(e){return e===n?l.call(o(this)):l.call(o(this),a(e))}})},function(e,t,n){var i=n(6),r=n(164)(0),a=n(160)([].forEach,!0);i(i.P+i.F*!a,"Array",{forEach:function(e){return r(this,e,arguments[1])}})},function(e,t,i){var r=i(18),a=i(31),o=i(56),s=i(35),l=i(165);e.exports=function(e,t){var i=1==e,u=2==e,c=3==e,h=4==e,f=6==e,d=5==e||f,p=t||l;return function(t,l,g){for(var m,v,_=o(t),y=a(_),b=r(l,g,3),w=s(y.length),x=0,E=i?p(t,w):u?p(t,0):n;w>x;x++)if((d||x in y)&&(m=y[x],v=b(m,x,_),e))if(i)E[x]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return x;case 2:E.push(m)}else if(h)return!1;return f?-1:c||h?h:E}}},function(e,t,n){var i=n(166);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,i){var r=i(11),a=i(43),o=i(23)("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)||(t=n),r(t)&&(t=t[o],null===t&&(t=n))),t===n?Array:t}},function(e,t,n){var i=n(6),r=n(164)(1);i(i.P+i.F*!n(160)([].map,!0),"Array",{map:function(e){return r(this,e,arguments[1])}})},function(e,t,n){var i=n(6),r=n(164)(2);i(i.P+i.F*!n(160)([].filter,!0),"Array",{filter:function(e){return r(this,e,arguments[1])}})},function(e,t,n){var i=n(6),r=n(164)(3);i(i.P+i.F*!n(160)([].some,!0),"Array",{some:function(e){return r(this,e,arguments[1])}})},function(e,t,n){var i=n(6),r=n(164)(4);i(i.P+i.F*!n(160)([].every,!0),"Array",{every:function(e){return r(this,e,arguments[1])}})},function(e,t,n){var i=n(6),r=n(172);i(i.P+i.F*!n(160)([].reduce,!0),"Array",{reduce:function(e){return r(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){var i=n(19),r=n(56),a=n(31),o=n(35);e.exports=function(e,t,n,s,l){i(t);var u=r(e),c=a(u),h=o(u.length),f=l?h-1:0,d=l?-1:1;if(n<2)for(;;){if(f in c){s=c[f],f+=d;break}if(f+=d,l?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;l?f>=0:h>f;f+=d)f in c&&(s=t(s,c[f],f,u));return s}},function(e,t,n){var i=n(6),r=n(172);i(i.P+i.F*!n(160)([].reduceRight,!0),"Array",{reduceRight:function(e){return r(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){var i=n(6),r=n(34)(!1),a=[].indexOf,o=!!a&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(o||!n(160)(a)),"Array",{indexOf:function(e){return o?a.apply(this,arguments)||0:r(this,e,arguments[1])}})},function(e,t,n){var i=n(6),r=n(30),a=n(36),o=n(35),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!n(160)(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=r(this),n=o(t.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,a(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}})},function(e,t,n){var i=n(6);i(i.P,"Array",{copyWithin:n(177)}),n(178)("copyWithin")},function(e,t,i){var r=i(56),a=i(37),o=i(35);e.exports=[].copyWithin||function(e,t){var i=r(this),s=o(i.length),l=a(e,s),u=a(t,s),c=arguments.length>2?arguments[2]:n,h=Math.min((c===n?s:a(c,s))-u,s-l),f=1;for(u<l&&l<u+h&&(f=-1,u+=h-1,l+=h-1);h-- >0;)u in i?i[l]=i[u]:delete i[l],l+=f,u+=f;return i}},function(e,t,i){var r=i(23)("unscopables"),a=Array.prototype;a[r]==n&&i(8)(a,r,{}),e.exports=function(e){a[r][e]=!0}},function(e,t,n){var i=n(6);i(i.P,"Array",{fill:n(180)}),n(178)("fill")},function(e,t,i){var r=i(56),a=i(37),o=i(35);e.exports=function(e){for(var t=r(this),i=o(t.length),s=arguments.length,l=a(s>1?arguments[1]:n,i),u=s>2?arguments[2]:n,c=u===n?i:a(u,i);c>l;)t[l++]=e;return t}},function(e,t,i){var r=i(6),a=i(164)(5),o="find",s=!0;o in[]&&Array(1)[o](function(){s=!1}),r(r.P+r.F*s,"Array",{find:function(e){return a(this,e,arguments.length>1?arguments[1]:n)}}),i(178)(o)},function(e,t,i){var r=i(6),a=i(164)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),r(r.P+r.F*s,"Array",{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:n)}}),i(178)(o)},function(e,t,i){var r=i(178),a=i(184),o=i(135),s=i(30);e.exports=i(134)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=n,a(1)):"keys"==t?a(0,i):"values"==t?a(0,e[i]):a(0,[i,e[i]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){n(186)("Array")},function(e,t,n){var i=n(2),r=n(9),a=n(4),o=n(23)("species");e.exports=function(e){var t=i[e];a&&t&&!t[o]&&r.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t,i){var r=i(2),a=i(80),o=i(9).f,s=i(48).f,l=i(128),u=i(188),c=r.RegExp,h=c,f=c.prototype,d=/a/g,p=/a/g,g=new c(d)!==d;if(i(4)&&(!g||i(5)(function(){return p[i(23)("match")]=!1,c(d)!=d||c(p)==p||"/a/i"!=c(d,"i")}))){c=function(e,t){var i=this instanceof c,r=l(e),o=t===n;return!i&&r&&e.constructor===c&&o?e:a(g?new h(r&&!o?e.source:e,t):h((r=e instanceof c)?e.source:e,r&&o?u.call(e):t),i?this:f,c)};for(var m=(function(e){e in c||o(c,e,{configurable:!0,get:function(){return h[e]},set:function(t){h[e]=t}})}),v=s(h),_=0;v.length>_;)m(v[_++]);f.constructor=c,c.prototype=f,i(16)(r,"RegExp",c)}i(186)("RegExp")},function(e,t,n){var i=n(10);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,i){i(190);var r=i(10),a=i(188),o=i(4),s="toString",l=/./[s],u=function(e){i(16)(RegExp.prototype,s,e,!0)};i(5)(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?u(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?a.call(e):n)}):l.name!=s&&u(function(){return l.call(this)})},function(e,t,n){n(4)&&"g"!=/./g.flags&&n(9).f(RegExp.prototype,"flags",{configurable:!0,get:n(188)})},function(e,t,i){i(192)("match",1,function(e,t,i){return[function(i){var r=e(this),a=i==n?n:i[t];return a!==n?a.call(i,r):new RegExp(i)[t](String(r))},i]})},function(e,t,n){var i=n(8),r=n(16),a=n(5),o=n(33),s=n(23);e.exports=function(e,t,n){var l=s(e),u=n(o,l,""[e]),c=u[0],h=u[1];a(function(){var t={};return t[l]=function(){return 7},7!=""[e](t)})&&(r(String.prototype,e,c),i(RegExp.prototype,l,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)}))}},function(e,t,i){i(192)("replace",2,function(e,t,i){return[function(r,a){var o=e(this),s=r==n?n:r[t];return s!==n?s.call(r,o,a):i.call(String(o),r,a)},i]})},function(e,t,i){i(192)("search",1,function(e,t,i){return[function(i){var r=e(this),a=i==n?n:i[t];return a!==n?a.call(i,r):new RegExp(i)[t](String(r))},i]})},function(e,t,i){i(192)("split",2,function(e,t,r){var a=i(128),o=r,s=[].push,l="split",u="length",c="lastIndex";if("c"=="abbc"[l](/(b)*/)[1]||4!="test"[l](/(?:)/,-1)[u]||2!="ab"[l](/(?:ab)*/)[u]||4!="."[l](/(.?)(.?)/)[u]||"."[l](/()()/)[u]>1||""[l](/.?/)[u]){var h=/()??/.exec("")[1]===n;r=function(e,t){var i=String(this);if(e===n&&0===t)return[];if(!a(e))return o.call(i,e,t);var r,l,f,d,p,g=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,_=t===n?4294967295:t>>>0,y=new RegExp(e.source,m+"g");for(h||(r=new RegExp("^"+y.source+"$(?!\\s)",m));(l=y.exec(i))&&(f=l.index+l[0][u],!(f>v&&(g.push(i.slice(v,l.index)),!h&&l[u]>1&&l[0].replace(r,function(){for(p=1;p<arguments[u]-2;p++)arguments[p]===n&&(l[p]=n)}),l[u]>1&&l.index<i[u]&&s.apply(g,l.slice(1)),d=l[0][u],v=f,g[u]>=_)));)y[c]===l.index&&y[c]++;return v===i[u]?!d&&y.test("")||g.push(""):g.push(i.slice(v)),g[u]>_?g.slice(0,_):g}}else"0"[l](n,0)[u]&&(r=function(e,t){return e===n&&0===t?[]:o.call(this,e,t)});return[function(i,a){var o=e(this),s=i==n?n:i[t];return s!==n?s.call(i,o,a):r.call(String(o),i,a)},r]})},function(e,t,i){var r,a,o,s=i(26),l=i(2),u=i(18),c=i(73),h=i(6),f=i(11),d=i(19),p=i(197),g=i(198),m=i(199),v=i(200).set,_=i(201)(),y="Promise",b=l.TypeError,w=l.process,x=l[y],w=l.process,E="process"==c(w),k=function(){},M=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[i(23)("species")]=function(e){e(k,k)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof t}catch(e){}}(),T=function(e,t){return e===t||e===x&&t===o},S=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},A=function(e){return T(x,e)?new R(e):new a(e)},R=a=function(e){var t,i;this.promise=new e(function(e,r){if(t!==n||i!==n)throw b("Bad Promise constructor");t=e,i=r}),this.resolve=d(t),this.reject=d(i)},C=function(e){try{e()}catch(e){return{error:e}}},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;_(function(){for(var i=e._v,r=1==e._s,a=0,o=function(t){var n,a,o=r?t.ok:t.fail,s=t.resolve,l=t.reject,u=t.domain;try{o?(r||(2==e._h&&N(e),e._h=1),o===!0?n=i:(u&&u.enter(),n=o(i),u&&u.exit()),n===t.promise?l(b("Promise-chain cycle")):(a=S(n))?a.call(n,s,l):s(n)):l(i)}catch(e){l(e)}};n.length>a;)o(n[a++]);e._c=[],e._n=!1,t&&!e._h&&O(e)})}},O=function(e){v.call(l,function(){var t,i,r,a=e._v;if(L(e)&&(t=C(function(){E?w.emit("unhandledRejection",a,e):(i=l.onunhandledrejection)?i({promise:e,reason:a}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",a)}),e._h=E||L(e)?2:1),e._a=n,t)throw t.error})},L=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,i=0;n.length>i;)if(t=n[i++],t.fail||!L(t.promise))return!1;return!0},N=function(e){v.call(l,function(){var t;E?w.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},F=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},D=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw b("Promise can't be resolved itself");(t=S(e))?_(function(){var i={_w:n,_d:!1};try{t.call(e,u(D,i,1),u(F,i,1))}catch(e){F.call(i,e)}}):(n._v=e,n._s=1,P(n,!1))}catch(e){F.call({_w:n,_d:!1},e)}}};M||(x=function(e){p(this,x,y,"_h"),d(e),r.call(this);try{e(u(D,this,1),u(F,this,1))}catch(e){F.call(this,e)}},r=function(e){this._c=[],this._a=n,this._s=0,this._d=!1,this._v=n,this._h=0,this._n=!1},r.prototype=i(202)(x.prototype,{then:function(e,t){var i=A(m(this,x));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=E?w.domain:n,this._c.push(i),this._a&&this._a.push(i),this._s&&P(this,!1),i.promise},catch:function(e){return this.then(n,e)}}),R=function(){var e=new r;this.promise=e,this.resolve=u(D,e,1),this.reject=u(F,e,1)}),h(h.G+h.W+h.F*!M,{Promise:x}),i(22)(x,y),i(186)(y),o=i(7)[y],h(h.S+h.F*!M,y,{reject:function(e){var t=A(this),n=t.reject;return n(e),t.promise}}),h(h.S+h.F*(s||!M),y,{resolve:function(e){if(e instanceof x&&T(e.constructor,this))return e;var t=A(this),n=t.resolve;return n(e),t.promise}}),h(h.S+h.F*!(M&&i(157)(function(e){x.all(e).catch(k)})),y,{all:function(e){var t=this,i=A(t),r=i.resolve,a=i.reject,o=C(function(){var i=[],o=0,s=1;g(e,!1,function(e){var l=o++,u=!1;i.push(n),s++,t.resolve(e).then(function(e){u||(u=!0,i[l]=e,--s||r(i))},a)}),--s||r(i)});return o&&a(o.error),i.promise},race:function(e){var t=this,n=A(t),i=n.reject,r=C(function(){g(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r&&i(r.error),n.promise}})},function(e,t){e.exports=function(e,t,i,r){if(!(e instanceof t)||r!==n&&r in e)throw TypeError(i+": incorrect invocation!");return e}},function(e,t,n){var i=n(18),r=n(153),a=n(154),o=n(10),s=n(35),l=n(156),u={},c={},t=e.exports=function(e,t,n,h,f){var d,p,g,m,v=f?function(){return e}:l(e),_=i(n,h,t?2:1),y=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(a(v)){for(d=s(e.length);d>y;y++)if(m=t?_(o(p=e[y])[0],p[1]):_(e[y]),m===u||m===c)return m}else for(g=v.call(e);!(p=g.next()).done;)if(m=r(g,_,p.value,t),m===u||m===c)return m};t.BREAK=u,t.RETURN=c},function(e,t,i){var r=i(10),a=i(19),o=i(23)("species");e.exports=function(e,t){var i,s=r(e).constructor;return s===n||(i=r(s)[o])==n?t:a(i)}},function(e,t,n){var i,r,a,o=n(18),s=n(76),l=n(46),u=n(13),c=n(2),h=c.process,f=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,g=0,m={},v="onreadystatechange",_=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},y=function(e){_.call(e.data)};f&&d||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++g]=function(){s("function"==typeof e?e:Function(e),t)},i(g),g},d=function(e){delete m[e]},"process"==n(32)(h)?i=function(e){h.nextTick(o(_,e,1))}:p?(r=new p,a=r.port2,r.port1.onmessage=y,i=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",y,!1)):i=v in u("script")?function(e){l.appendChild(u("script"))[v]=function(){l.removeChild(this),_.call(e)}}:function(e){setTimeout(o(_,e,1),0)}),e.exports={set:f,clear:d}},function(e,t,i){var r=i(2),a=i(200).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,l=r.Promise,u="process"==i(32)(s);e.exports=function(){var e,t,i,c=function(){var r,a;for(u&&(r=s.domain)&&r.exit();e;){a=e.fn,e=e.next;try{a()}catch(r){throw e?i():t=n,r}}t=n,r&&r.enter()};if(u)i=function(){s.nextTick(c)};else if(o){var h=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),i=function(){f.data=h=!h}}else if(l&&l.resolve){var d=l.resolve();i=function(){d.then(c)}}else i=function(){a.call(r,c)};return function(r){var a={fn:r,next:n};t&&(t.next=a),e||(e=a,i()),t=a}}},function(e,t,n){var i=n(16);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,i){var r=i(204);e.exports=i(205)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:n)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},function(e,t,i){var r=i(9).f,a=i(44),o=i(202),s=i(18),l=i(197),u=i(33),c=i(198),h=i(134),f=i(184),d=i(186),p=i(4),g=i(20).fastKey,m=p?"_s":"size",v=function(e,t){var n,i=g(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,i,h){var f=e(function(e,r){l(e,f,t,"_i"),e._i=a(null),e._f=n,e._l=n,e[m]=0,r!=n&&c(r,i,e[h],e)});return o(f.prototype,{clear:function(){for(var e=this,t=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=n),delete t[i.i];e._f=e._l=n,e[m]=0},delete:function(e){var t=this,n=v(t,e);if(n){var i=n.n,r=n.p;delete t._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),t._f==n&&(t._f=i),t._l==n&&(t._l=r),t[m]--}return!!n},forEach:function(e){l(this,f,"forEach");for(var t,i=s(e,arguments.length>1?arguments[1]:n,3);t=t?t.n:this._f;)for(i(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!v(this,e)}}),p&&r(f.prototype,"size",{get:function(){return u(this[m])}}),f},def:function(e,t,i){var r,a,o=v(e,t);return o?o.v=i:(e._l=o={i:a=g(t,!0),k:t,v:i,p:r=e._l,n:n,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==a&&(e._i[a]=o)),e},getEntry:v,setStrong:function(e,t,i){h(e,t,function(e,t){this._t=e,this._k=t,this._l=n},function(){for(var e=this,t=e._k,i=e._l;i&&i.r;)i=i.p;return e._t&&(e._l=i=i?i.n:e._t._f)?"keys"==t?f(0,i.k):"values"==t?f(0,i.v):f(0,[i.k,i.v]):(e._t=n,f(1))},i?"entries":"values",!i,!0),d(t)}}},function(e,t,i){var r=i(2),a=i(6),o=i(16),s=i(202),l=i(20),u=i(198),c=i(197),h=i(11),f=i(5),d=i(157),p=i(22),g=i(80);e.exports=function(e,t,i,m,v,_){var y=r[e],b=y,w=v?"set":"add",x=b&&b.prototype,E={},k=function(e){var t=x[e];o(x,e,"delete"==e?function(e){return!(_&&!h(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(_&&!h(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return _&&!h(e)?n:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(_||x.forEach&&!f(function(){(new b).entries().next()}))){var M=new b,T=M[w](_?{}:-0,1)!=M,S=f(function(){M.has(1)}),A=d(function(e){new b(e)}),R=!_&&f(function(){for(var e=new b,t=5;t--;)e[w](t,t);return!e.has(-0)});A||(b=t(function(t,i){c(t,b,e);var r=g(new y,t,b);return i!=n&&u(i,v,r[w],r),r}),b.prototype=x,x.constructor=b),(S||R)&&(k("delete"),k("has"),v&&k("get")),(R||T)&&k(w),_&&x.clear&&delete x.clear}else b=m.getConstructor(t,e,v,w),s(b.prototype,i),l.NEED=!0;return p(b,e),E[e]=b,a(a.G+a.W+a.F*(b!=y),E),_||m.setStrong(b,e,v),b}},function(e,t,i){var r=i(204);e.exports=i(205)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:n)}},{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},function(e,t,i){var r,a=i(164)(0),o=i(16),s=i(20),l=i(67),u=i(208),c=i(11),h=s.getWeak,f=Object.isExtensible,d=u.ufstore,p={},g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:n)}},m={get:function(e){if(c(e)){var t=h(e);return t===!0?d(this).get(e):t?t[this._i]:n}},set:function(e,t){return u.def(this,e,t)}},v=e.exports=i(205)("WeakMap",g,m,u,!0,!0);7!=(new v).set((Object.freeze||Object)(p),7).get(p)&&(r=u.getConstructor(g),l(r.prototype,m),s.NEED=!0,a(["delete","has","get","set"],function(e){var t=v.prototype,n=t[e];o(t,e,function(t,i){if(c(t)&&!f(t)){this._f||(this._f=new r);var a=this._f[e](t,i);return"set"==e?this:a}return n.call(this,t,i)})}))},function(e,t,i){var r=i(202),a=i(20).getWeak,o=i(10),s=i(11),l=i(197),u=i(198),c=i(164),h=i(3),f=c(5),d=c(6),p=0,g=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},v=function(e,t){return f(e.a,function(e){return e[0]===t})};m.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,i,o){var c=e(function(e,r){l(e,c,t,"_i"),e._i=p++,e._l=n,r!=n&&u(r,i,e[o],e)});return r(c.prototype,{delete:function(e){if(!s(e))return!1;var t=a(e);return t===!0?g(this).delete(e):t&&h(t,this._i)&&delete t[this._i]},has:function(e){if(!s(e))return!1;var t=a(e);return t===!0?g(this).has(e):t&&h(t,this._i)}}),c},def:function(e,t,n){var i=a(o(t),!0);return i===!0?g(e).set(t,n):i[e._i]=n,e},ufstore:g}},function(e,t,i){var r=i(208);i(205)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:n)}},{add:function(e){return r.def(this,e,!0)}},r,!1,!0)},function(e,t,n){var i=n(6),r=n(19),a=n(10),o=(n(2).Reflect||{}).apply,s=Function.apply;i(i.S+i.F*!n(5)(function(){o(function(){})}),"Reflect",{apply:function(e,t,n){var i=r(e),l=a(n);return o?o(i,t,l):s.call(i,t,l)}})},function(e,t,n){var i=n(6),r=n(44),a=n(19),o=n(10),s=n(11),l=n(5),u=n(75),c=(n(2).Reflect||{}).construct,h=l(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),f=!l(function(){c(function(){})});i(i.S+i.F*(h||f),"Reflect",{construct:function(e,t){a(e),o(t);var n=arguments.length<3?e:a(arguments[2]);if(f&&!h)return c(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(u.apply(e,i))}var l=n.prototype,d=r(s(l)?l:Object.prototype),p=Function.apply.call(e,d,t);return s(p)?p:d}})},function(e,t,n){var i=n(9),r=n(6),a=n(10),o=n(14);r(r.S+r.F*n(5)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){a(e),t=o(t,!0),a(n);try{return i.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var i=n(6),r=n(49).f,a=n(10);i(i.S,"Reflect",{deleteProperty:function(e,t){var n=r(a(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,i){var r=i(6),a=i(10),o=function(e){this._t=a(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};i(136)(o,"Object",function(){var e,t=this,i=t._k;do if(t._i>=i.length)return{value:n,done:!0};while(!((e=i[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,i){function r(e,t){var i,l,h=arguments.length<3?e:arguments[2];return c(e)===h?e[t]:(i=a.f(e,t))?s(i,"value")?i.value:i.get!==n?i.get.call(h):n:u(l=o(e))?r(l,t,h):void 0}var a=i(49),o=i(57),s=i(3),l=i(6),u=i(11),c=i(10);l(l.S,"Reflect",{get:r})},function(e,t,n){var i=n(49),r=n(6),a=n(10);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return i.f(a(e),t)}})},function(e,t,n){var i=n(6),r=n(57),a=n(10);i(i.S,"Reflect",{getPrototypeOf:function(e){return r(a(e))}})},function(e,t,n){var i=n(6);i(i.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var i=n(6),r=n(10),a=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(e){return r(e),!a||a(e)}})},function(e,t,n){var i=n(6);i(i.S,"Reflect",{ownKeys:n(221)})},function(e,t,n){var i=n(48),r=n(41),a=n(10),o=n(2).Reflect;e.exports=o&&o.ownKeys||function(e){var t=i.f(a(e)),n=r.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(6),r=n(10),a=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(e){r(e);try{return a&&a(e),!0}catch(e){return!1}}})},function(e,t,i){function r(e,t,i){var u,d,p=arguments.length<4?e:arguments[3],g=o.f(h(e),t);if(!g){if(f(d=s(e)))return r(d,t,i,p);g=c(0)}return l(g,"value")?!(g.writable===!1||!f(p)||(u=o.f(p,t)||c(0),u.value=i,a.f(p,t,u),0)):g.set!==n&&(g.set.call(p,i),!0)}var a=i(9),o=i(49),s=i(57),l=i(3),u=i(6),c=i(15),h=i(10),f=i(11);u(u.S,"Reflect",{set:r})},function(e,t,n){var i=n(6),r=n(71);r&&i(i.S,"Reflect",{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){var i=n(6);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){var i=n(6),r=n(56),a=n(14);i(i.P+i.F*n(5)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=r(this),n=a(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var i=n(6),r=n(5),a=Date.prototype.getTime,o=function(e){return e>9?e:"0"+e};i(i.P+i.F*(r(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!r(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),i=t<0?"-":t>9999?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"."+(n>99?n:"0"+o(n))+"Z"}})},function(e,t,n){var i=Date.prototype,r="Invalid Date",a="toString",o=i[a],s=i.getTime;new Date(NaN)+""!=r&&n(16)(i,a,function(){var e=s.call(this);return e===e?o.call(this):r})},function(e,t,n){var i=n(23)("toPrimitive"),r=Date.prototype;i in r||n(8)(r,i,n(230))},function(e,t,n){var i=n(10),r=n(14),a="number";e.exports=function(e){if("string"!==e&&e!==a&&"default"!==e)throw TypeError("Incorrect hint");return r(i(this),e!=a)}},function(e,t,i){var r=i(6),a=i(232),o=i(233),s=i(10),l=i(37),u=i(35),c=i(11),h=i(2).ArrayBuffer,f=i(199),d=o.ArrayBuffer,p=o.DataView,g=a.ABV&&h.isView,m=d.prototype.slice,v=a.VIEW,_="ArrayBuffer";r(r.G+r.W+r.F*(h!==d),{ArrayBuffer:d}),r(r.S+r.F*!a.CONSTR,_,{isView:function(e){return g&&g(e)||c(e)&&v in e}}),r(r.P+r.U+r.F*i(5)(function(){return!new d(2).slice(1,n).byteLength}),_,{slice:function(e,t){if(m!==n&&t===n)return m.call(s(this),e);for(var i=s(this).byteLength,r=l(e,i),a=l(t===n?i:t,i),o=new(f(this,d))(u(a-r)),c=new p(this),h=new p(o),g=0;r<a;)h.setUint8(g++,c.getUint8(r++));return o}}),i(186)(_)},function(e,t,n){for(var i,r=n(2),a=n(8),o=n(17),s=o("typed_array"),l=o("view"),u=!(!r.ArrayBuffer||!r.DataView),c=u,h=0,f=9,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<f;)(i=r[d[h++]])?(a(i.prototype,s,!0),a(i.prototype,l,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:l}},function(e,t,i){var r=i(2),a=i(4),o=i(26),s=i(232),l=i(8),u=i(202),c=i(5),h=i(197),f=i(36),d=i(35),p=i(48).f,g=i(9).f,m=i(180),v=i(22),_="ArrayBuffer",y="DataView",b="prototype",w="Wrong length!",x="Wrong index!",E=r[_],k=r[y],M=r.Math,T=r.RangeError,S=r.Infinity,A=E,R=M.abs,C=M.pow,P=M.floor,O=M.log,L=M.LN2,N="buffer",F="byteLength",D="byteOffset",I=a?"_b":N,U=a?"_l":F,H=a?"_o":D,z=function(e,t,n){var i,r,a,o=Array(n),s=8*n-t-1,l=(1<<s)-1,u=l>>1,c=23===t?C(2,-24)-C(2,-77):0,h=0,f=e<0||0===e&&1/e<0?1:0;for(e=R(e),e!=e||e===S?(r=e!=e?1:0,i=l):(i=P(O(e)/L),e*(a=C(2,-i))<1&&(i--,a*=2),e+=i+u>=1?c/a:c*C(2,1-u),e*a>=2&&(i++,a/=2),i+u>=l?(r=0,i=l):i+u>=1?(r=(e*a-1)*C(2,t),i+=u):(r=e*C(2,u-1)*C(2,t),i=0));t>=8;o[h++]=255&r,r/=256,t-=8);for(i=i<<t|r,s+=t;s>0;o[h++]=255&i,i/=256,s-=8);return o[--h]|=128*f,o},B=function(e,t,n){var i,r=8*n-t-1,a=(1<<r)-1,o=a>>1,s=r-7,l=n-1,u=e[l--],c=127&u;for(u>>=7;s>0;c=256*c+e[l],l--,s-=8);for(i=c&(1<<-s)-1,c>>=-s,s+=t;s>0;i=256*i+e[l],l--,s-=8);if(0===c)c=1-o;else{if(c===a)return i?NaN:u?-S:S;i+=C(2,t),c-=o}return(u?-1:1)*i*C(2,c-t)},j=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},V=function(e){return[255&e]},G=function(e){return[255&e,e>>8&255]},W=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},X=function(e){return z(e,52,8)},Y=function(e){return z(e,23,4)},q=function(e,t,n){g(e[b],t,{get:function(){return this[n]}})},Z=function(e,t,n,i){var r=+n,a=f(r);if(r!=a||a<0||a+t>e[U])throw T(x);var o=e[I]._b,s=a+e[H],l=o.slice(s,s+t);return i?l:l.reverse()},Q=function(e,t,n,i,r,a){var o=+n,s=f(o);if(o!=s||s<0||s+t>e[U])throw T(x);for(var l=e[I]._b,u=s+e[H],c=i(+r),h=0;h<t;h++)l[u+h]=c[a?h:t-h-1]},$=function(e,t){h(e,E,_);var n=+t,i=d(n);if(n!=i)throw T(w);return i};if(s.ABV){if(!c(function(){new E})||!c(function(){new E(.5)})){E=function(e){return new A($(this,e))};for(var J,K=E[b]=A[b],ee=p(A),te=0;ee.length>te;)(J=ee[te++])in E||l(E,J,A[J]);o||(K.constructor=E)}var ne=new k(new E(2)),ie=k[b].setInt8;ne.setInt8(0,2147483648),ne.setInt8(1,2147483649),!ne.getInt8(0)&&ne.getInt8(1)||u(k[b],{setInt8:function(e,t){ie.call(this,e,t<<24>>24)},setUint8:function(e,t){ie.call(this,e,t<<24>>24)}},!0)}else E=function(e){var t=$(this,e);this._b=m.call(Array(t),0),this[U]=t},k=function(e,t,i){h(this,k,y),h(e,E,y);var r=e[U],a=f(t);if(a<0||a>r)throw T("Wrong offset!");if(i=i===n?r-a:d(i),a+i>r)throw T(w);this[I]=e,this[H]=a,this[U]=i},a&&(q(E,F,"_l"),q(k,N,"_b"),q(k,F,"_l"),q(k,D,"_o")),u(k[b],{getInt8:function(e){return Z(this,1,e)[0]<<24>>24},getUint8:function(e){return Z(this,1,e)[0]},getInt16:function(e){var t=Z(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Z(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return j(Z(this,4,e,arguments[1]))},getUint32:function(e){return j(Z(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return B(Z(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return B(Z(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){Q(this,1,e,V,t)},setUint8:function(e,t){Q(this,1,e,V,t)},setInt16:function(e,t){Q(this,2,e,G,t,arguments[2])},setUint16:function(e,t){Q(this,2,e,G,t,arguments[2])},setInt32:function(e,t){Q(this,4,e,W,t,arguments[2])},setUint32:function(e,t){Q(this,4,e,W,t,arguments[2])},setFloat32:function(e,t){Q(this,4,e,Y,t,arguments[2])},setFloat64:function(e,t){Q(this,8,e,X,t,arguments[2])}});v(E,_),v(k,y),l(k[b],s.VIEW,!0),t[_]=E,t[y]=k},function(e,t,n){var i=n(6);i(i.G+i.W+i.F*!n(232).ABV,{DataView:n(233).DataView})},function(e,t,n){n(236)("Int8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,i){if(i(4)){var r=i(26),a=i(2),o=i(5),s=i(6),l=i(232),u=i(233),c=i(18),h=i(197),f=i(15),d=i(8),p=i(202),g=i(36),m=i(35),v=i(37),_=i(14),y=i(3),b=i(69),w=i(73),x=i(11),E=i(56),k=i(154),M=i(44),T=i(57),S=i(48).f,A=i(156),R=i(17),C=i(23),P=i(164),O=i(34),L=i(199),N=i(183),F=i(135),D=i(157),I=i(186),U=i(180),H=i(177),z=i(9),B=i(49),j=z.f,V=B.f,G=a.RangeError,W=a.TypeError,X=a.Uint8Array,Y="ArrayBuffer",q="Shared"+Y,Z="BYTES_PER_ELEMENT",Q="prototype",$=Array[Q],J=u.ArrayBuffer,K=u.DataView,ee=P(0),te=P(2),ne=P(3),ie=P(4),re=P(5),ae=P(6),oe=O(!0),se=O(!1),le=N.values,ue=N.keys,ce=N.entries,he=$.lastIndexOf,fe=$.reduce,de=$.reduceRight,pe=$.join,ge=$.sort,me=$.slice,ve=$.toString,_e=$.toLocaleString,ye=C("iterator"),be=C("toStringTag"),we=R("typed_constructor"),xe=R("def_constructor"),Ee=l.CONSTR,ke=l.TYPED,Me=l.VIEW,Te="Wrong length!",Se=P(1,function(e,t){return Le(L(e,e[xe]),t)}),Ae=o(function(){return 1===new X(new Uint16Array([1]).buffer)[0]}),Re=!!X&&!!X[Q].set&&o(function(){new X(1).set({})}),Ce=function(e,t){if(e===n)throw W(Te);var i=+e,r=m(e);if(t&&!b(i,r))throw G(Te);return r},Pe=function(e,t){var n=g(e);if(n<0||n%t)throw G("Wrong offset!");return n},Oe=function(e){if(x(e)&&ke in e)return e;throw W(e+" is not a typed array!")},Le=function(e,t){if(!(x(e)&&we in e))throw W("It is not a typed array constructor!");return new e(t)},Ne=function(e,t){return Fe(L(e,e[xe]),t)},Fe=function(e,t){for(var n=0,i=t.length,r=Le(e,i);i>n;)r[n]=t[n++];return r},De=function(e,t,n){j(e,t,{get:function(){return this._d[n]}})},Ie=function(e){var t,i,r,a,o,s,l=E(e),u=arguments.length,h=u>1?arguments[1]:n,f=h!==n,d=A(l);if(d!=n&&!k(d)){for(s=d.call(l),r=[],t=0;!(o=s.next()).done;t++)r.push(o.value);l=r}for(f&&u>2&&(h=c(h,arguments[2],2)),t=0,i=m(l.length),a=Le(this,i);i>t;t++)a[t]=f?h(l[t],t):l[t];return a},Ue=function(){for(var e=0,t=arguments.length,n=Le(this,t);t>e;)n[e]=arguments[e++];return n},He=!!X&&o(function(){_e.call(new X(1))}),ze=function(){return _e.apply(He?me.call(Oe(this)):Oe(this),arguments)},Be={copyWithin:function(e,t){return H.call(Oe(this),e,t,arguments.length>2?arguments[2]:n)},every:function(e){return ie(Oe(this),e,arguments.length>1?arguments[1]:n)},fill:function(e){return U.apply(Oe(this),arguments)},filter:function(e){return Ne(this,te(Oe(this),e,arguments.length>1?arguments[1]:n))},find:function(e){return re(Oe(this),e,arguments.length>1?arguments[1]:n)},findIndex:function(e){return ae(Oe(this),e,arguments.length>1?arguments[1]:n);
},forEach:function(e){ee(Oe(this),e,arguments.length>1?arguments[1]:n)},indexOf:function(e){return se(Oe(this),e,arguments.length>1?arguments[1]:n)},includes:function(e){return oe(Oe(this),e,arguments.length>1?arguments[1]:n)},join:function(e){return pe.apply(Oe(this),arguments)},lastIndexOf:function(e){return he.apply(Oe(this),arguments)},map:function(e){return Se(Oe(this),e,arguments.length>1?arguments[1]:n)},reduce:function(e){return fe.apply(Oe(this),arguments)},reduceRight:function(e){return de.apply(Oe(this),arguments)},reverse:function(){for(var e,t=this,n=Oe(t).length,i=Math.floor(n/2),r=0;r<i;)e=t[r],t[r++]=t[--n],t[n]=e;return t},some:function(e){return ne(Oe(this),e,arguments.length>1?arguments[1]:n)},sort:function(e){return ge.call(Oe(this),e)},subarray:function(e,t){var i=Oe(this),r=i.length,a=v(e,r);return new(L(i,i[xe]))(i.buffer,i.byteOffset+a*i.BYTES_PER_ELEMENT,m((t===n?r:v(t,r))-a))}},je=function(e,t){return Ne(this,me.call(Oe(this),e,t))},Ve=function(e){Oe(this);var t=Pe(arguments[1],1),n=this.length,i=E(e),r=m(i.length),a=0;if(r+t>n)throw G(Te);for(;a<r;)this[t+a]=i[a++]},Ge={entries:function(){return ce.call(Oe(this))},keys:function(){return ue.call(Oe(this))},values:function(){return le.call(Oe(this))}},We=function(e,t){return x(e)&&e[ke]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Xe=function(e,t){return We(e,t=_(t,!0))?f(2,e[t]):V(e,t)},Ye=function(e,t,n){return!(We(e,t=_(t,!0))&&x(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?j(e,t,n):(e[t]=n.value,e)};Ee||(B.f=Xe,z.f=Ye),s(s.S+s.F*!Ee,"Object",{getOwnPropertyDescriptor:Xe,defineProperty:Ye}),o(function(){ve.call({})})&&(ve=_e=function(){return pe.call(this)});var qe=p({},Be);p(qe,Ge),d(qe,ye,Ge.values),p(qe,{slice:je,set:Ve,constructor:function(){},toString:ve,toLocaleString:ze}),De(qe,"buffer","b"),De(qe,"byteOffset","o"),De(qe,"byteLength","l"),De(qe,"length","e"),j(qe,be,{get:function(){return this[ke]}}),e.exports=function(e,t,i,u){u=!!u;var c=e+(u?"Clamped":"")+"Array",f="Uint8Array"!=c,p="get"+e,g="set"+e,v=a[c],_=v||{},y=v&&T(v),b=!v||!l.ABV,E={},k=v&&v[Q],A=function(e,n){var i=e._d;return i.v[p](n*t+i.o,Ae)},R=function(e,n,i){var r=e._d;u&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[g](n*t+r.o,i,Ae)},C=function(e,t){j(e,t,{get:function(){return A(this,t)},set:function(e){return R(this,t,e)},enumerable:!0})};b?(v=i(function(e,i,r,a){h(e,v,c,"_d");var o,s,l,u,f=0,p=0;if(x(i)){if(!(i instanceof J||(u=w(i))==Y||u==q))return ke in i?Fe(v,i):Ie.call(v,i);o=i,p=Pe(r,t);var g=i.byteLength;if(a===n){if(g%t)throw G(Te);if(s=g-p,s<0)throw G(Te)}else if(s=m(a)*t,s+p>g)throw G(Te);l=s/t}else l=Ce(i,!0),s=l*t,o=new J(s);for(d(e,"_d",{b:o,o:p,l:s,e:l,v:new K(o)});f<l;)C(e,f++)}),k=v[Q]=M(qe),d(k,"constructor",v)):D(function(e){new v(null),new v(e)},!0)||(v=i(function(e,i,r,a){h(e,v,c);var o;return x(i)?i instanceof J||(o=w(i))==Y||o==q?a!==n?new _(i,Pe(r,t),a):r!==n?new _(i,Pe(r,t)):new _(i):ke in i?Fe(v,i):Ie.call(v,i):new _(Ce(i,f))}),ee(y!==Function.prototype?S(_).concat(S(y)):S(_),function(e){e in v||d(v,e,_[e])}),v[Q]=k,r||(k.constructor=v));var P=k[ye],O=!!P&&("values"==P.name||P.name==n),L=Ge.values;d(v,we,!0),d(k,ke,c),d(k,Me,!0),d(k,xe,v),(u?new v(1)[be]==c:be in k)||j(k,be,{get:function(){return c}}),E[c]=v,s(s.G+s.W+s.F*(v!=_),E),s(s.S,c,{BYTES_PER_ELEMENT:t,from:Ie,of:Ue}),Z in k||d(k,Z,t),s(s.P,c,Be),I(c),s(s.P+s.F*Re,c,{set:Ve}),s(s.P+s.F*!O,c,Ge),s(s.P+s.F*(k.toString!=ve),c,{toString:ve}),s(s.P+s.F*o(function(){new v(1).slice()}),c,{slice:je}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!o(function(){k.toLocaleString.call([1,2])})),c,{toLocaleString:ze}),F[c]=O?P:L,r||O||d(k,ye,L)}}else e.exports=function(){}},function(e,t,n){n(236)("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(236)("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}},!0)},function(e,t,n){n(236)("Int16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(236)("Uint16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(236)("Int32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(236)("Uint32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(236)("Float32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(236)("Float64",8,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,i){var r=i(6),a=i(34)(!0);r(r.P,"Array",{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:n)}}),i(178)("includes")},function(e,t,n){var i=n(6),r=n(125)(!0);i(i.P,"String",{at:function(e){return r(this,e)}})},function(e,t,i){var r=i(6),a=i(248);r(r.P,"String",{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:n,!0)}})},function(e,t,i){var r=i(35),a=i(85),o=i(33);e.exports=function(e,t,i,s){var l=String(o(e)),u=l.length,c=i===n?" ":String(i),h=r(t);if(h<=u||""==c)return l;var f=h-u,d=a.call(c,Math.ceil(f/c.length));return d.length>f&&(d=d.slice(0,f)),s?d+l:l+d}},function(e,t,i){var r=i(6),a=i(248);r(r.P,"String",{padEnd:function(e){return a(this,e,arguments.length>1?arguments[1]:n,!1)}})},function(e,t,n){n(81)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){n(81)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){var i=n(6),r=n(33),a=n(35),o=n(128),s=n(188),l=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n(136)(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),i(i.P,"String",{matchAll:function(e){if(r(this),!o(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in l?String(e.flags):s.call(e),i=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=a(e.lastIndex),new u(i,t)}})},function(e,t,n){n(25)("asyncIterator")},function(e,t,n){n(25)("observable")},function(e,t,n){var i=n(6),r=n(221),a=n(30),o=n(49),s=n(155);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n=a(e),i=o.f,l=r(n),u={},c=0;l.length>c;)s(u,t=l[c++],i(n,t));return u}})},function(e,t,n){var i=n(6),r=n(257)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){var i=n(28),r=n(30),a=n(42).f;e.exports=function(e){return function(t){for(var n,o=r(t),s=i(o),l=s.length,u=0,c=[];l>u;)a.call(o,n=s[u++])&&c.push(e?[n,o[n]]:o[n]);return c}}},function(e,t,n){var i=n(6),r=n(257)(!0);i(i.S,"Object",{entries:function(e){return r(e)}})},function(e,t,n){var i=n(6),r=n(56),a=n(19),o=n(9);n(4)&&i(i.P+n(260),"Object",{__defineGetter__:function(e,t){o.f(r(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},function(e,t,n){e.exports=n(26)||!n(5)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(2)[e]})},function(e,t,n){var i=n(6),r=n(56),a=n(19),o=n(9);n(4)&&i(i.P+n(260),"Object",{__defineSetter__:function(e,t){o.f(r(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},function(e,t,n){var i=n(6),r=n(56),a=n(14),o=n(57),s=n(49).f;n(4)&&i(i.P+n(260),"Object",{__lookupGetter__:function(e){var t,n=r(this),i=a(e,!0);do if(t=s(n,i))return t.get;while(n=o(n))}})},function(e,t,n){var i=n(6),r=n(56),a=n(14),o=n(57),s=n(49).f;n(4)&&i(i.P+n(260),"Object",{__lookupSetter__:function(e){var t,n=r(this),i=a(e,!0);do if(t=s(n,i))return t.set;while(n=o(n))}})},function(e,t,n){var i=n(6);i(i.P+i.R,"Map",{toJSON:n(265)("Map")})},function(e,t,n){var i=n(73),r=n(266);e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,n){var i=n(198);e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},function(e,t,n){var i=n(6);i(i.P+i.R,"Set",{toJSON:n(265)("Set")})},function(e,t,n){var i=n(6);i(i.S,"System",{global:n(2)})},function(e,t,n){var i=n(6),r=n(32);i(i.S,"Error",{isError:function(e){return"Error"===r(e)}})},function(e,t,n){var i=n(6);i(i.S,"Math",{iaddh:function(e,t,n,i){var r=e>>>0,a=t>>>0,o=n>>>0;return a+(i>>>0)+((r&o|(r|o)&~(r+o>>>0))>>>31)|0}})},function(e,t,n){var i=n(6);i(i.S,"Math",{isubh:function(e,t,n,i){var r=e>>>0,a=t>>>0,o=n>>>0;return a-(i>>>0)-((~r&o|~(r^o)&r-o>>>0)>>>31)|0}})},function(e,t,n){var i=n(6);i(i.S,"Math",{imulh:function(e,t){var n=65535,i=+e,r=+t,a=i&n,o=r&n,s=i>>16,l=r>>16,u=(s*o>>>0)+(a*o>>>16);return s*l+(u>>16)+((a*l>>>0)+(u&n)>>16)}})},function(e,t,n){var i=n(6);i(i.S,"Math",{umulh:function(e,t){var n=65535,i=+e,r=+t,a=i&n,o=r&n,s=i>>>16,l=r>>>16,u=(s*o>>>0)+(a*o>>>16);return s*l+(u>>>16)+((a*l>>>0)+(u&n)>>>16)}})},function(e,t,n){var i=n(275),r=n(10),a=i.key,o=i.set;i.exp({defineMetadata:function(e,t,n,i){o(e,t,r(n),a(i))}})},function(e,t,i){var r=i(203),a=i(6),o=i(21)("metadata"),s=o.store||(o.store=new(i(207))),l=function(e,t,i){var a=s.get(e);if(!a){if(!i)return n;s.set(e,a=new r)}var o=a.get(t);if(!o){if(!i)return n;a.set(t,o=new r)}return o},u=function(e,t,i){var r=l(t,i,!1);return r!==n&&r.has(e)},c=function(e,t,i){var r=l(t,i,!1);return r===n?n:r.get(e)},h=function(e,t,n,i){l(n,i,!0).set(e,t)},f=function(e,t){var n=l(e,t,!1),i=[];return n&&n.forEach(function(e,t){i.push(t)}),i},d=function(e){return e===n||"symbol"==typeof e?e:String(e)},p=function(e){a(a.S,"Reflect",e)};e.exports={store:s,map:l,has:u,get:c,set:h,keys:f,key:d,exp:p}},function(e,t,i){var r=i(275),a=i(10),o=r.key,s=r.map,l=r.store;r.exp({deleteMetadata:function(e,t){var i=arguments.length<3?n:o(arguments[2]),r=s(a(t),i,!1);if(r===n||!r.delete(e))return!1;if(r.size)return!0;var u=l.get(t);return u.delete(i),!!u.size||l.delete(t)}})},function(e,t,i){var r=i(275),a=i(10),o=i(57),s=r.has,l=r.get,u=r.key,c=function(e,t,i){var r=s(e,t,i);if(r)return l(e,t,i);var a=o(t);return null!==a?c(e,a,i):n};r.exp({getMetadata:function(e,t){return c(e,a(t),arguments.length<3?n:u(arguments[2]))}})},function(e,t,i){var r=i(206),a=i(266),o=i(275),s=i(10),l=i(57),u=o.keys,c=o.key,h=function(e,t){var n=u(e,t),i=l(e);if(null===i)return n;var o=h(i,t);return o.length?n.length?a(new r(n.concat(o))):o:n};o.exp({getMetadataKeys:function(e){return h(s(e),arguments.length<2?n:c(arguments[1]))}})},function(e,t,i){var r=i(275),a=i(10),o=r.get,s=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,a(t),arguments.length<3?n:s(arguments[2]))}})},function(e,t,i){var r=i(275),a=i(10),o=r.keys,s=r.key;r.exp({getOwnMetadataKeys:function(e){return o(a(e),arguments.length<2?n:s(arguments[1]))}})},function(e,t,i){var r=i(275),a=i(10),o=i(57),s=r.has,l=r.key,u=function(e,t,n){var i=s(e,t,n);if(i)return!0;var r=o(t);return null!==r&&u(e,r,n)};r.exp({hasMetadata:function(e,t){return u(e,a(t),arguments.length<3?n:l(arguments[2]))}})},function(e,t,i){var r=i(275),a=i(10),o=r.has,s=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,a(t),arguments.length<3?n:s(arguments[2]))}})},function(e,t,i){var r=i(275),a=i(10),o=i(19),s=r.key,l=r.set;r.exp({metadata:function(e,t){return function(i,r){l(e,t,(r!==n?a:o)(i),s(r))}}})},function(e,t,n){var i=n(6),r=n(201)(),a=n(2).process,o="process"==n(32)(a);i(i.G,{asap:function(e){var t=o&&a.domain;r(t?t.bind(e):e)}})},function(e,t,i){var r=i(6),a=i(2),o=i(7),s=i(201)(),l=i(23)("observable"),u=i(19),c=i(10),h=i(197),f=i(202),d=i(8),p=i(198),g=p.RETURN,m=function(e){return null==e?n:u(e)},v=function(e){var t=e._c;t&&(e._c=n,t())},_=function(e){return e._o===n},y=function(e){_(e)||(e._o=n,v(e))},b=function(e,t){c(e),this._c=n,this._o=e,e=new w(this);try{var i=t(e),r=i;null!=i&&("function"==typeof i.unsubscribe?i=function(){r.unsubscribe()}:u(i),this._c=i)}catch(t){return void e.error(t)}_(this)&&v(this)};b.prototype=f({},{unsubscribe:function(){y(this)}});var w=function(e){this._s=e};w.prototype=f({},{next:function(e){var t=this._s;if(!_(t)){var n=t._o;try{var i=m(n.next);if(i)return i.call(n,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(_(t))throw e;var i=t._o;t._o=n;try{var r=m(i.error);if(!r)throw e;e=r.call(i,e)}catch(e){try{v(t)}finally{throw e}}return v(t),e},complete:function(e){var t=this._s;if(!_(t)){var i=t._o;t._o=n;try{var r=m(i.complete);e=r?r.call(i,e):n}catch(e){try{v(t)}finally{throw e}}return v(t),e}}});var x=function(e){h(this,x,"Observable","_f")._f=u(e)};f(x.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||a.Promise)(function(n,i){u(e);var r=t.subscribe({next:function(t){try{return e(t)}catch(e){i(e),r.unsubscribe()}},error:i,complete:n})})}}),f(x,{from:function(e){var t="function"==typeof this?this:x,n=m(c(e)[l]);if(n){var i=c(n.call(e));return i.constructor===t?i:new t(function(e){return i.subscribe(e)})}return new t(function(t){var n=!1;return s(function(){if(!n){try{if(p(e,!1,function(e){if(t.next(e),n)return g})===g)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:x)(function(e){var t=!1;return s(function(){if(!t){for(var i=0;i<n.length;++i)if(e.next(n[i]),t)return;e.complete()}}),function(){t=!0}})}}),d(x.prototype,l,function(){return this}),r(r.G,{Observable:x}),i(186)("Observable")},function(e,t,n){var i=n(6),r=n(200);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,n){for(var i=n(183),r=n(16),a=n(2),o=n(8),s=n(135),l=n(23),u=l("iterator"),c=l("toStringTag"),h=s.Array,f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],d=0;d<5;d++){var p,g=f[d],m=a[g],v=m&&m.prototype;if(v){v[u]||o(v,u,h),v[c]||o(v,c,g),s[g]=h;for(p in i)v[p]||r(v,p,i[p],!0)}}},function(e,t,n){var i=n(2),r=n(6),a=n(76),o=n(289),s=i.navigator,l=!!s&&/MSIE .\./.test(s.userAgent),u=function(e){return l?function(t,n){return e(a(o,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),n)}:e};r(r.G+r.B+r.F*l,{setTimeout:u(i.setTimeout),setInterval:u(i.setInterval)})},function(e,t,n){var i=n(290),r=n(76),a=n(19);e.exports=function(){for(var e=a(this),t=arguments.length,n=Array(t),o=0,s=i._,l=!1;t>o;)(n[o]=arguments[o++])===s&&(l=!0);return function(){var i,a=this,o=arguments.length,u=0,c=0;if(!l&&!o)return r(e,n,a);if(i=n.slice(),l)for(;t>u;u++)i[u]===s&&(i[u]=arguments[c++]);for(;o>c;)i.push(arguments[c++]);return r(e,i,a)}}},function(e,t,n){e.exports=n(2)},function(e,t,i){function r(e){var t=p(null);return e!=n&&(w(e)?b(e,!0,function(e,n){t[e]=n}):d(t,e)),t}function a(e,t,n){y(t);var i,r,a=M(e),o=m(a),s=o.length,l=0;if(arguments.length<3){if(!s)throw TypeError("Reduce of empty object with no initial value");i=a[o[l++]]}else i=Object(n);for(;s>l;)S(a,r=o[l++])&&(i=t(i,a[r],r,e));return i}function o(e,t){return(t==t?_(e,t):R(e,function(e){return e!=e}))!==n}function s(e,t){if(S(e,t))return e[t]}function l(e,t,n){return T&&t in Object?v.f(e,t,f(0,n)):e[t]=n,e}function u(e){return k(e)&&g(e)===r.prototype}var c=i(18),h=i(6),f=i(15),d=i(67),p=i(44),g=i(57),m=i(28),v=i(9),_=i(27),y=i(19),b=i(198),w=i(292),x=i(136),E=i(184),k=i(11),M=i(30),T=i(4),S=i(3),A=function(e){var t=1==e,i=4==e;return function(a,o,s){var l,u,h,f=c(o,s,3),d=M(a),p=t||7==e||2==e?new("function"==typeof this?this:r):n;for(l in d)if(S(d,l)&&(u=d[l],h=f(u,l,a),e))if(t)p[l]=h;else if(h)switch(e){case 2:p[l]=u;break;case 3:return!0;case 5:return u;case 6:return l;case 7:p[h[0]]=h[1]}else if(i)return!1;return 3==e||i?i:p}},R=A(6),C=function(e){return function(t){return new P(t,e)}},P=function(e,t){this._t=M(e),this._a=m(e),this._i=0,this._k=t};x(P,"Dict",function(){var e,t=this,i=t._t,r=t._a,a=t._k;do if(t._i>=r.length)return t._t=n,E(1);while(!S(i,e=r[t._i++]));return"keys"==a?E(0,e):"values"==a?E(0,i[e]):E(0,[e,i[e]])}),r.prototype=null,h(h.G+h.F,{Dict:r}),h(h.S,"Dict",{keys:C("keys"),values:C("values"),entries:C("entries"),forEach:A(0),map:A(1),filter:A(2),some:A(3),every:A(4),find:A(5),findKey:R,mapPairs:A(7),reduce:a,keyOf:_,includes:o,has:S,get:s,set:l,isDict:u})},function(e,t,i){var r=i(73),a=i(23)("iterator"),o=i(135);e.exports=i(7).isIterable=function(e){var t=Object(e);return t[a]!==n||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){var i=n(10),r=n(156);e.exports=n(7).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,n){var i=n(2),r=n(7),a=n(6),o=n(289);a(a.G+a.F,{delay:function(e){return new(r.Promise||i.Promise)(function(t){setTimeout(o.call(t,!0),e)})}})},function(e,t,n){var i=n(290),r=n(6);n(7)._=i._=i._||{},r(r.P+r.F,"Function",{part:n(289)})},function(e,t,n){var i=n(6);i(i.S+i.F,"Object",{isObject:n(11)})},function(e,t,n){var i=n(6);i(i.S+i.F,"Object",{classof:n(73)})},function(e,t,n){var i=n(6),r=n(299);i(i.S+i.F,"Object",{define:r})},function(e,t,n){var i=n(9),r=n(49),a=n(221),o=n(30);e.exports=function(e,t){for(var n,s=a(o(t)),l=s.length,u=0;l>u;)i.f(e,n=s[u++],r.f(t,n));return e}},function(e,t,n){var i=n(6),r=n(299),a=n(44);i(i.S+i.F,"Object",{make:function(e,t){return r(a(e),t)}})},function(e,t,i){i(134)(Number,"Number",function(e){this._l=+e,this._i=0},function(){var e=this._i++,t=!(e<this._l);return{done:t,value:t?n:e}})},function(e,t,n){var i=n(6),r=n(303)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(e){return r(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){var i=n(6),r=n(303)(/[&<>"']/g,{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"});i(i.P+i.F,"String",{escapeHTML:function(){return r(this)}})},function(e,t,n){var i=n(6),r=n(303)(/&(?:amp|lt|gt|quot|apos);/g,{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"});i(i.P+i.F,"String",{unescapeHTML:function(){return r(this)}})}]),"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.core=e}(1,1),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.IntlPolyfill=t()}(this,function(){"use strict";function e(e){if("function"==typeof Math.log10)return Math.floor(Math.log10(e));var t=Math.round(Math.log(e)*Math.LOG10E);return t-(Number("1e"+t)>e)}function t(e){for(var n in e)(e instanceof t||Fe.call(e,n))&&De(this,n,{value:e[n],enumerable:!0,writable:!0,configurable:!0})}function n(){De(this,"length",{writable:!0,value:0}),arguments.length&&Be.apply(this,He.call(arguments))}function i(){if(We.disableRegExpRestore)return function(){};for(var e={lastMatch:RegExp.lastMatch||"",leftContext:RegExp.leftContext,multiline:RegExp.multiline,input:RegExp.input},t=!1,i=1;i<=9;i++)t=(e["$"+i]=RegExp["$"+i])||t;return function(){var i=/[.?*+^$[\]\\(){}|-]/g,r=e.lastMatch.replace(i,"\\$&"),a=new n;if(t)for(var o=1;o<=9;o++){var s=e["$"+o];s?(s=s.replace(i,"\\$&"),r=r.replace(s,"("+s+")")):r="()"+r,Be.call(a,r.slice(0,r.indexOf("(")+1)),r=r.slice(r.indexOf("(")+1)}var l=je.call(a,"")+r;l=l.replace(/(\\\(|\\\)|[^()])+/g,function(e){return"[\\s\\S]{"+e.replace("\\","").length+"}"});var u=new RegExp(l,e.multiline?"gm":"g");u.lastIndex=e.leftContext.length,u.exec(e.input)}}function r(e){if(null===e)throw new TypeError("Cannot convert null or undefined to object");return"object"===("undefined"==typeof e?"undefined":Oe.typeof(e))?e:Object(e)}function a(e){return"number"==typeof e?e:Number(e)}function o(e){var t=a(e);return isNaN(t)?0:0===t||t===-0||t===+(1/0)||t===-(1/0)?t:t<0?Math.floor(Math.abs(t))*-1:Math.floor(Math.abs(t))}function s(e){var t=o(e);return t<=0?0:t===1/0?Math.pow(2,53)-1:Math.min(t,Math.pow(2,53)-1)}function l(e){return Fe.call(e,"__getInternalProperties")?e.__getInternalProperties(Xe):Ue(null)}function u(e){ut=e}function c(e){for(var t=e.length;t--;){var n=e.charAt(t);n>="a"&&n<="z"&&(e=e.slice(0,t)+n.toUpperCase()+e.slice(t+1))}return e}function h(e){return!!at.test(e)&&!ot.test(e)&&!st.test(e)}function f(e){var t=void 0,n=void 0;e=e.toLowerCase(),n=e.split("-");for(var i=1,r=n.length;i<r;i++)if(2===n[i].length)n[i]=n[i].toUpperCase();else if(4===n[i].length)n[i]=n[i].charAt(0).toUpperCase()+n[i].slice(1);else if(1===n[i].length&&"x"!==n[i])break;e=je.call(n,"-"),(t=e.match(lt))&&t.length>1&&(t.sort(),e=e.replace(RegExp("(?:"+lt.source+")+","i"),je.call(t,""))),Fe.call(ct.tags,e)&&(e=ct.tags[e]),n=e.split("-");for(var a=1,o=n.length;a<o;a++)Fe.call(ct.subtags,n[a])?n[a]=ct.subtags[n[a]]:Fe.call(ct.extLang,n[a])&&(n[a]=ct.extLang[n[a]][0],1===a&&ct.extLang[n[1]][1]===n[0]&&(n=He.call(n,a++),o-=1));return je.call(n,"-")}function d(){return ut}function p(e){var t=String(e),n=c(t);return ht.test(n)!==!1}function g(e){if(void 0===e)return new n;var t=new n;e="string"==typeof e?[e]:e;for(var i=r(e),a=s(i.length),o=0;o<a;){var l=String(o),u=l in i;if(u){var c=i[l];if(null===c||"string"!=typeof c&&"object"!==("undefined"==typeof c?"undefined":Oe.typeof(c)))throw new TypeError("String or Object type expected");var d=String(c);if(!h(d))throw new RangeError("'"+d+"' is not a structurally valid language tag");d=f(d),Ie.call(t,d)===-1&&Be.call(t,d)}o++}return t}function m(e,t){for(var n=t;n;){if(Ie.call(e,n)>-1)return n;var i=n.lastIndexOf("-");if(i<0)return;i>=2&&"-"===n.charAt(i-2)&&(i-=2),n=n.substring(0,i)}}function v(e,n){for(var i=0,r=n.length,a=void 0,o=void 0,s=void 0;i<r&&!a;)o=n[i],s=String(o).replace(ft,""),a=m(e,s),i++;var l=new t;if(void 0!==a){if(l["[[locale]]"]=a,String(o)!==String(s)){var u=o.match(ft)[0],c=o.indexOf("-u-");l["[[extension]]"]=u,l["[[extensionIndex]]"]=c}}else l["[[locale]]"]=d();return l}function _(e,t){return v(e,t)}function y(e,n,i,r,a){if(0===e.length)throw new ReferenceError("No locale data has been provided for this object yet.");var o=i["[[localeMatcher]]"],s=void 0;s="lookup"===o?v(e,n):_(e,n);var l=s["[[locale]]"],u=void 0,c=void 0;if(Fe.call(s,"[[extension]]")){var h=s["[[extension]]"],d=String.prototype.split;u=d.call(h,"-"),c=u.length}var p=new t;p["[[dataLocale]]"]=l;for(var g="-u",m=0,y=r.length;m<y;){var b=r[m],w=a[l],x=w[b],E=x[0],k="",M=Ie;if(void 0!==u){var T=M.call(u,b);if(T!==-1)if(T+1<c&&u[T+1].length>2){var S=u[T+1],A=M.call(x,S);A!==-1&&(E=S,k="-"+b+"-"+E)}else{var R=M(x,"true");R!==-1&&(E="true")}}if(Fe.call(i,"[["+b+"]]")){var C=i["[["+b+"]]"];M.call(x,C)!==-1&&C!==E&&(E=C,k="")}p["[["+b+"]]"]=E,g+=k,m++}if(g.length>2){var P=l.indexOf("-x-");if(P===-1)l+=g;else{var O=l.substring(0,P),L=l.substring(P);l=O+g+L}l=f(l)}return p["[[locale]]"]=l,p}function b(e,t){for(var i=t.length,r=new n,a=0;a<i;){var o=t[a],s=String(o).replace(ft,""),l=m(e,s);void 0!==l&&Be.call(r,o),a++}var u=He.call(r);return u}function w(e,t){return b(e,t)}function x(e,n,i){var a=void 0,o=void 0;if(void 0!==i&&(i=new t(r(i)),a=i.localeMatcher,void 0!==a&&(a=String(a),"lookup"!==a&&"best fit"!==a)))throw new RangeError('matcher should be "lookup" or "best fit"');o=void 0===a||"best fit"===a?w(e,n):b(e,n);for(var s in o)Fe.call(o,s)&&De(o,s,{writable:!1,configurable:!1,value:o[s]});return De(o,"length",{writable:!1}),o}function E(e,t,n,i,r){var a=e[t];if(void 0!==a){if(a="boolean"===n?Boolean(a):"string"===n?String(a):a,void 0!==i&&Ie.call(i,a)===-1)throw new RangeError("'"+a+"' is not an allowed value for `"+t+"`");return a}return r}function k(e,t,n,i,r){var a=e[t];if(void 0!==a){if(a=Number(a),isNaN(a)||a<n||a>i)throw new RangeError("Value is not a number or outside accepted range");return Math.floor(a)}return r}function M(e){for(var t=g(e),n=[],i=t.length,r=0;r<i;)n[r]=t[r],r++;return n}function T(){var e=arguments[0],t=arguments[1];return this&&this!==dt?S(r(this),e,t):new dt.NumberFormat(e,t)}function S(e,a,o){var s=l(e),u=i();if(s["[[initializedIntlObject]]"]===!0)throw new TypeError("`this` object has already been initialized as an Intl object");De(e,"__getInternalProperties",{value:function(){if(arguments[0]===Xe)return s}}),s["[[initializedIntlObject]]"]=!0;var c=g(a);o=void 0===o?{}:r(o);var h=new t,f=E(o,"localeMatcher","string",new n("lookup","best fit"),"best fit");h["[[localeMatcher]]"]=f;var d=We.NumberFormat["[[localeData]]"],m=y(We.NumberFormat["[[availableLocales]]"],c,h,We.NumberFormat["[[relevantExtensionKeys]]"],d);s["[[locale]]"]=m["[[locale]]"],s["[[numberingSystem]]"]=m["[[nu]]"],s["[[dataLocale]]"]=m["[[dataLocale]]"];var v=m["[[dataLocale]]"],_=E(o,"style","string",new n("decimal","percent","currency"),"decimal");s["[[style]]"]=_;var b=E(o,"currency","string");if(void 0!==b&&!p(b))throw new RangeError("'"+b+"' is not a valid currency code");if("currency"===_&&void 0===b)throw new TypeError("Currency code is required when style is currency");var w=void 0;"currency"===_&&(b=b.toUpperCase(),s["[[currency]]"]=b,w=A(b));var x=E(o,"currencyDisplay","string",new n("code","symbol","name"),"symbol");"currency"===_&&(s["[[currencyDisplay]]"]=x);var M=k(o,"minimumIntegerDigits",1,21,1);s["[[minimumIntegerDigits]]"]=M;var T="currency"===_?w:0,S=k(o,"minimumFractionDigits",0,20,T);s["[[minimumFractionDigits]]"]=S;var C="currency"===_?Math.max(S,w):"percent"===_?Math.max(S,0):Math.max(S,3),P=k(o,"maximumFractionDigits",S,20,C);s["[[maximumFractionDigits]]"]=P;var O=o.minimumSignificantDigits,L=o.maximumSignificantDigits;void 0===O&&void 0===L||(O=k(o,"minimumSignificantDigits",1,21,1),L=k(o,"maximumSignificantDigits",O,21,21),s["[[minimumSignificantDigits]]"]=O,s["[[maximumSignificantDigits]]"]=L);var N=E(o,"useGrouping","boolean",void 0,!0);s["[[useGrouping]]"]=N;var F=d[v],D=F.patterns,I=D[_];return s["[[positivePattern]]"]=I.positivePattern,s["[[negativePattern]]"]=I.negativePattern,s["[[boundFormat]]"]=void 0,s["[[initializedNumberFormat]]"]=!0,Ne&&(e.format=R.call(e)),u(),e}function A(e){return void 0!==pt[e]?pt[e]:2}function R(){var e=null!==this&&"object"===Oe.typeof(this)&&l(this);if(!e||!e["[[initializedNumberFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.NumberFormat object.");if(void 0===e["[[boundFormat]]"]){var t=function(e){return L(this,Number(e))},n=Ge.call(t,this);e["[[boundFormat]]"]=n}return e["[[boundFormat]]"]}function C(){var e=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],t=null!==this&&"object"===Oe.typeof(this)&&l(this);if(!t||!t["[[initializedNumberFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.NumberFormat object.");var n=Number(e);return P(this,n)}function P(e,t){for(var n=O(e,t),i=[],r=0,a=0;n.length>a;a++){var o=n[a],s={};s.type=o["[[type]]"],s.value=o["[[value]]"],i[r]=s,r+=1}return i}function O(e,t){var i=l(e),r=i["[[dataLocale]]"],a=i["[[numberingSystem]]"],o=We.NumberFormat["[[localeData]]"][r],s=o.symbols[a]||o.symbols.latn,u=void 0;!isNaN(t)&&t<0?(t=-t,u=i["[[negativePattern]]"]):u=i["[[positivePattern]]"];for(var c=new n,h=u.indexOf("{",0),f=0,d=0,p=u.length;h>-1&&h<p;){if(f=u.indexOf("}",h),f===-1)throw new Error;if(h>d){var g=u.substring(d,h);Be.call(c,{"[[type]]":"literal","[[value]]":g})}var m=u.substring(h+1,f);if("number"===m)if(isNaN(t)){var v=s.nan;Be.call(c,{"[[type]]":"nan","[[value]]":v})}else if(isFinite(t)){"percent"===i["[[style]]"]&&isFinite(t)&&(t*=100);var _=void 0;_=Fe.call(i,"[[minimumSignificantDigits]]")&&Fe.call(i,"[[maximumSignificantDigits]]")?N(t,i["[[minimumSignificantDigits]]"],i["[[maximumSignificantDigits]]"]):F(t,i["[[minimumIntegerDigits]]"],i["[[minimumFractionDigits]]"],i["[[maximumFractionDigits]]"]),gt[a]?!function(){var e=gt[a];_=String(_).replace(/\d/g,function(t){return e[t]})}():_=String(_);var y=void 0,b=void 0,w=_.indexOf(".",0);if(w>0?(y=_.substring(0,w),b=_.substring(w+1,w.length)):(y=_,b=void 0),i["[[useGrouping]]"]===!0){var x=s.group,E=[],k=o.patterns.primaryGroupSize||3,M=o.patterns.secondaryGroupSize||k;if(y.length>k){var T=y.length-k,S=T%M,A=y.slice(0,S);for(A.length&&Be.call(E,A);S<T;)Be.call(E,y.slice(S,S+M)),S+=M;Be.call(E,y.slice(T))}else Be.call(E,y);if(0===E.length)throw new Error;for(;E.length;){var R=Ve.call(E);Be.call(c,{"[[type]]":"integer","[[value]]":R}),E.length&&Be.call(c,{"[[type]]":"group","[[value]]":x})}}else Be.call(c,{"[[type]]":"integer","[[value]]":y});if(void 0!==b){var C=s.decimal;Be.call(c,{"[[type]]":"decimal","[[value]]":C}),Be.call(c,{"[[type]]":"fraction","[[value]]":b})}}else{var P=s.infinity;Be.call(c,{"[[type]]":"infinity","[[value]]":P})}else if("plusSign"===m){var O=s.plusSign;Be.call(c,{"[[type]]":"plusSign","[[value]]":O})}else if("minusSign"===m){var L=s.minusSign;Be.call(c,{"[[type]]":"minusSign","[[value]]":L})}else if("percentSign"===m&&"percent"===i["[[style]]"]){var D=s.percentSign;Be.call(c,{"[[type]]":"literal","[[value]]":D})}else if("currency"===m&&"currency"===i["[[style]]"]){var I=i["[[currency]]"],U=void 0;"code"===i["[[currencyDisplay]]"]?U=I:"symbol"===i["[[currencyDisplay]]"]?U=o.currencies[I]||I:"name"===i["[[currencyDisplay]]"]&&(U=I),Be.call(c,{"[[type]]":"currency","[[value]]":U})}else{var H=u.substring(h,f);Be.call(c,{"[[type]]":"literal","[[value]]":H})}d=f+1,h=u.indexOf("{",d)}if(d<p){var z=u.substring(d,p);Be.call(c,{"[[type]]":"literal","[[value]]":z})}return c}function L(e,t){for(var n=O(e,t),i="",r=0;n.length>r;r++){var a=n[r];i+=a["[[value]]"]}return i}function N(t,n,i){var r=i,a=void 0,o=void 0;if(0===t)a=je.call(Array(r+1),"0"),o=0;else{o=e(Math.abs(t));var s=Math.round(Math.exp(Math.abs(o-r+1)*Math.LN10));a=String(Math.round(o-r+1<0?t*s:t/s))}if(o>=r)return a+je.call(Array(o-r+1+1),"0");if(o===r-1)return a;if(o>=0?a=a.slice(0,o+1)+"."+a.slice(o+1):o<0&&(a="0."+je.call(Array(-(o+1)+1),"0")+a),a.indexOf(".")>=0&&i>n){for(var l=i-n;l>0&&"0"===a.charAt(a.length-1);)a=a.slice(0,-1),l--;"."===a.charAt(a.length-1)&&(a=a.slice(0,-1))}return a}function F(e,t,n,i){var r=i,a=Math.pow(10,r)*e,o=0===a?"0":a.toFixed(0),s=void 0,l=(s=o.indexOf("e"))>-1?o.slice(s+1):0;l&&(o=o.slice(0,s).replace(".",""),o+=je.call(Array(l-(o.length-1)+1),"0"));var u=void 0;if(0!==r){var c=o.length;if(c<=r){var h=je.call(Array(r+1-c+1),"0");o=h+o,c=r+1}var f=o.substring(0,c-r),d=o.substring(c-r,o.length);o=f+"."+d,u=f.length}else u=o.length;for(var p=i-n;p>0&&"0"===o.slice(-1);)o=o.slice(0,-1),p--;if("."===o.slice(-1)&&(o=o.slice(0,-1)),u<t){var g=je.call(Array(t-u+1),"0");o=g+o}return o}function D(e){for(var t=0;t<bt.length;t+=1)if(e.hasOwnProperty(bt[t]))return!1;return!0}function I(e){for(var t=0;t<yt.length;t+=1)if(e.hasOwnProperty(yt[t]))return!1;return!0}function U(e,t){for(var n={_:{}},i=0;i<yt.length;i+=1)e[yt[i]]&&(n[yt[i]]=e[yt[i]]),e._[yt[i]]&&(n._[yt[i]]=e._[yt[i]]);for(var r=0;r<bt.length;r+=1)t[bt[r]]&&(n[bt[r]]=t[bt[r]]),t._[bt[r]]&&(n._[bt[r]]=t._[bt[r]]);return n}function H(e){return e.pattern12=e.extendedPattern.replace(/'([^']*)'/g,function(e,t){return t?t:"'"}),e.pattern=e.pattern12.replace("{ampm}","").replace(vt,""),e}function z(e,t){switch(e.charAt(0)){case"G":return t.era=["short","short","short","long","narrow"][e.length-1],"{era}";case"y":case"Y":case"u":case"U":case"r":return t.year=2===e.length?"2-digit":"numeric","{year}";case"Q":case"q":return t.quarter=["numeric","2-digit","short","long","narrow"][e.length-1],"{quarter}";case"M":case"L":return t.month=["numeric","2-digit","short","long","narrow"][e.length-1],"{month}";case"w":return t.week=2===e.length?"2-digit":"numeric","{weekday}";case"W":return t.week="numeric","{weekday}";case"d":return t.day=2===e.length?"2-digit":"numeric","{day}";case"D":case"F":case"g":return t.day="numeric","{day}";case"E":return t.weekday=["short","short","short","long","narrow","short"][e.length-1],"{weekday}";case"e":return t.weekday=["numeric","2-digit","short","long","narrow","short"][e.length-1],"{weekday}";case"c":return t.weekday=["numeric",void 0,"short","long","narrow","short"][e.length-1],"{weekday}";case"a":case"b":case"B":return t.hour12=!0,"{ampm}";case"h":case"H":return t.hour=2===e.length?"2-digit":"numeric","{hour}";case"k":case"K":return t.hour12=!0,t.hour=2===e.length?"2-digit":"numeric","{hour}";case"m":return t.minute=2===e.length?"2-digit":"numeric","{minute}";case"s":return t.second=2===e.length?"2-digit":"numeric","{second}";case"S":case"A":return t.second="numeric",
"{second}";case"z":case"Z":case"O":case"v":case"V":case"X":case"x":return t.timeZoneName=e.length<4?"short":"long","{timeZoneName}"}}function B(e,t){if(!_t.test(t)){var n={originalPattern:t,_:{}};return n.extendedPattern=t.replace(mt,function(e){return z(e,n._)}),e.replace(mt,function(e){return z(e,n)}),H(n)}}function j(e){var t=e.availableFormats,n=e.timeFormats,i=e.dateFormats,r=[],a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=[],h=[];for(a in t)t.hasOwnProperty(a)&&(o=t[a],s=B(a,o),s&&(r.push(s),D(s)?h.push(s):I(s)&&c.push(s)));for(a in n)n.hasOwnProperty(a)&&(o=n[a],s=B(a,o),s&&(r.push(s),c.push(s)));for(a in i)i.hasOwnProperty(a)&&(o=i[a],s=B(a,o),s&&(r.push(s),h.push(s)));for(l=0;l<c.length;l+=1)for(u=0;u<h.length;u+=1)o="long"===h[u].month?h[u].weekday?e.full:e.long:"short"===h[u].month?e.medium:e.short,s=U(h[u],c[l]),s.originalPattern=o,s.extendedPattern=o.replace("{0}",c[l].extendedPattern).replace("{1}",h[u].extendedPattern).replace(/^[,\s]+|[,\s]+$/gi,""),r.push(H(s));return r}function V(e,t){if(wt[e]&&wt[e][t]){var n;return n={originalPattern:wt[e][t],_:he({},e,t),extendedPattern:"{"+e+"}"},he(n,e,t),he(n,"pattern12","{"+e+"}"),he(n,"pattern","{"+e+"}"),n}}function G(e,t,n,i,r){var a=e[t]&&e[t][n]?e[t][n]:e.gregory[n],o={narrow:["short","long"],short:["long","narrow"],long:["short","narrow"]},s=Fe.call(a,i)?a[i]:Fe.call(a,o[i][0])?a[o[i][0]]:a[o[i][1]];return null!==r?s[r]:s}function W(){var e=arguments[0],t=arguments[1];return this&&this!==dt?X(r(this),e,t):new dt.DateTimeFormat(e,t)}function X(e,r,a){var o=l(e),s=i();if(o["[[initializedIntlObject]]"]===!0)throw new TypeError("`this` object has already been initialized as an Intl object");De(e,"__getInternalProperties",{value:function(){if(arguments[0]===Xe)return o}}),o["[[initializedIntlObject]]"]=!0;var u=g(r);a=q(a,"any","date");var h=new t,f=E(a,"localeMatcher","string",new n("lookup","best fit"),"best fit");h["[[localeMatcher]]"]=f;var d=We.DateTimeFormat,p=d["[[localeData]]"],m=y(d["[[availableLocales]]"],u,h,d["[[relevantExtensionKeys]]"],p);o["[[locale]]"]=m["[[locale]]"],o["[[calendar]]"]=m["[[ca]]"],o["[[numberingSystem]]"]=m["[[nu]]"],o["[[dataLocale]]"]=m["[[dataLocale]]"];var v=m["[[dataLocale]]"],_=a.timeZone;if(void 0!==_&&(_=c(_),"UTC"!==_))throw new RangeError("timeZone is not supported.");o["[[timeZone]]"]=_,h=new t;for(var b in Et)if(Fe.call(Et,b)){var w=E(a,b,"string",Et[b]);h["[["+b+"]]"]=w}var x=void 0,k=p[v],M=Y(k.formats);if(f=E(a,"formatMatcher","string",new n("basic","best fit"),"best fit"),k.formats=M,"basic"===f)x=Z(h,M);else{var T=E(a,"hour12","boolean");h.hour12=void 0===T?k.hour12:T,x=Q(h,M)}for(var S in Et)if(Fe.call(Et,S)&&Fe.call(x,S)){var A=x[S];A=x._&&Fe.call(x._,S)?x._[S]:A,o["[["+S+"]]"]=A}var R=void 0,C=E(a,"hour12","boolean");if(o["[[hour]]"])if(C=void 0===C?k.hour12:C,o["[[hour12]]"]=C,C===!0){var P=k.hourNo0;o["[[hourNo0]]"]=P,R=x.pattern12}else R=x.pattern;else R=x.pattern;return o["[[pattern]]"]=R,o["[[boundFormat]]"]=void 0,o["[[initializedDateTimeFormat]]"]=!0,Ne&&(e.format=$.call(e)),s(),e}function Y(e){return"[object Array]"===Object.prototype.toString.call(e)?e:j(e)}function q(e,n,i){if(void 0===e)e=null;else{var a=r(e);e=new t;for(var o in a)e[o]=a[o]}var s=Ue;e=s(e);var l=!0;return"date"!==n&&"any"!==n||void 0===e.weekday&&void 0===e.year&&void 0===e.month&&void 0===e.day||(l=!1),"time"!==n&&"any"!==n||void 0===e.hour&&void 0===e.minute&&void 0===e.second||(l=!1),!l||"date"!==i&&"all"!==i||(e.year=e.month=e.day="numeric"),!l||"time"!==i&&"all"!==i||(e.hour=e.minute=e.second="numeric"),e}function Z(e,t){for(var n=120,i=20,r=8,a=6,o=6,s=3,l=-(1/0),u=void 0,c=0,h=t.length;c<h;){var f=t[c],d=0;for(var p in Et)if(Fe.call(Et,p)){var g=e["[["+p+"]]"],m=Fe.call(f,p)?f[p]:void 0;if(void 0===g&&void 0!==m)d-=i;else if(void 0!==g&&void 0===m)d-=n;else{var v=["2-digit","numeric","narrow","short","long"],_=Ie.call(v,g),y=Ie.call(v,m),b=Math.max(Math.min(y-_,2),-2);2===b?d-=a:1===b?d-=s:b===-1?d-=o:b===-2&&(d-=r)}}d>l&&(l=d,u=f),c++}return u}function Q(e,t){var n=[];for(var i in Et)Fe.call(Et,i)&&void 0!==e["[["+i+"]]"]&&n.push(i);if(1===n.length){var r=V(n[0],e["[["+n[0]+"]]"]);if(r)return r}for(var a=120,o=20,s=8,l=6,u=6,c=3,h=2,f=1,d=-(1/0),p=void 0,g=0,m=t.length;g<m;){var v=t[g],_=0;for(var y in Et)if(Fe.call(Et,y)){var b=e["[["+y+"]]"],w=Fe.call(v,y)?v[y]:void 0,x=Fe.call(v._,y)?v._[y]:void 0;if(b!==x&&(_-=h),void 0===b&&void 0!==w)_-=o;else if(void 0!==b&&void 0===w)_-=a;else{var E=["2-digit","numeric","narrow","short","long"],k=Ie.call(E,b),M=Ie.call(E,w),T=Math.max(Math.min(M-k,2),-2);M<=1&&k>=2||M>=2&&k<=1?T>0?_-=l:T<0&&(_-=s):T>1?_-=c:T<-1&&(_-=u)}}v._.hour12!==e.hour12&&(_-=f),_>d&&(d=_,p=v),g++}return p}function $(){var e=null!==this&&"object"===Oe.typeof(this)&&l(this);if(!e||!e["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.DateTimeFormat object.");if(void 0===e["[[boundFormat]]"]){var t=function(){var e=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],t=void 0===e?Date.now():a(e);return ee(this,t)},n=Ge.call(t,this);e["[[boundFormat]]"]=n}return e["[[boundFormat]]"]}function J(){var e=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],t=null!==this&&"object"===Oe.typeof(this)&&l(this);if(!t||!t["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.DateTimeFormat object.");var n=void 0===e?Date.now():a(e);return te(this,n)}function K(e,t){if(!isFinite(t))throw new RangeError("Invalid valid date passed to format");var r=e.__getInternalProperties(Xe);i();for(var a=r["[[locale]]"],o=new dt.NumberFormat([a],{useGrouping:!1}),s=new dt.NumberFormat([a],{minimumIntegerDigits:2,useGrouping:!1}),l=ne(t,r["[[calendar]]"],r["[[timeZone]]"]),u=r["[[pattern]]"],c=new n,h=0,f=u.indexOf("{"),d=0,p=r["[[dataLocale]]"],g=We.DateTimeFormat["[[localeData]]"][p].calendars,m=r["[[calendar]]"];f!==-1;){var v=void 0;if(d=u.indexOf("}",f),d===-1)throw new Error("Unclosed pattern");f>h&&Be.call(c,{type:"literal",value:u.substring(h,f)});var _=u.substring(f+1,d);if(Et.hasOwnProperty(_)){var y=r["[["+_+"]]"],b=l["[["+_+"]]"];if("year"===_&&b<=0?b=1-b:"month"===_?b++:"hour"===_&&r["[[hour12]]"]===!0&&(b%=12,0===b&&r["[[hourNo0]]"]===!0&&(b=12)),"numeric"===y)v=L(o,b);else if("2-digit"===y)v=L(s,b),v.length>2&&(v=v.slice(-2));else if(y in xt)switch(_){case"month":v=G(g,m,"months",y,l["[["+_+"]]"]);break;case"weekday":try{v=G(g,m,"days",y,l["[["+_+"]]"])}catch(e){throw new Error("Could not find weekday data for locale "+a)}break;case"timeZoneName":v="";break;case"era":try{v=G(g,m,"eras",y,l["[["+_+"]]"])}catch(e){throw new Error("Could not find era data for locale "+a)}break;default:v=l["[["+_+"]]"]}Be.call(c,{type:_,value:v})}else if("ampm"===_){var w=l["[[hour]]"];v=G(g,m,"dayPeriods",w>11?"pm":"am",null),Be.call(c,{type:"dayPeriod",value:v})}else Be.call(c,{type:"literal",value:u.substring(f,d+1)});h=d+1,f=u.indexOf("{",h)}return d<u.length-1&&Be.call(c,{type:"literal",value:u.substr(d+1)}),c}function ee(e,t){for(var n=K(e,t),i="",r=0;n.length>r;r++){var a=n[r];i+=a.value}return i}function te(e,t){for(var n=K(e,t),i=[],r=0;n.length>r;r++){var a=n[r];i.push({type:a.type,value:a.value})}return i}function ne(e,n,i){var r=new Date(e),a="get"+(i||"");return new t({"[[weekday]]":r[a+"Day"](),"[[era]]":+(r[a+"FullYear"]()>=0),"[[year]]":r[a+"FullYear"](),"[[month]]":r[a+"Month"](),"[[day]]":r[a+"Date"](),"[[hour]]":r[a+"Hours"](),"[[minute]]":r[a+"Minutes"](),"[[second]]":r[a+"Seconds"](),"[[inDST]]":!1})}function ie(e,t){if(!e.number)throw new Error("Object passed doesn't contain locale data for Intl.NumberFormat");var n=void 0,i=[t],r=t.split("-");for(r.length>2&&4===r[1].length&&Be.call(i,r[0]+"-"+r[2]);n=Ve.call(i);)Be.call(We.NumberFormat["[[availableLocales]]"],n),We.NumberFormat["[[localeData]]"][n]=e.number,e.date&&(e.date.nu=e.number.nu,Be.call(We.DateTimeFormat["[[availableLocales]]"],n),We.DateTimeFormat["[[localeData]]"][n]=e.date);void 0===ut&&u(t)}var re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},ae=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var a=t&&t.defaultProps,o=arguments.length-3;if(n||0===o||(n={}),n&&a)for(var s in a)void 0===n[s]&&(n[s]=a[s]);else n||(n=a||{});if(1===o)n.children=r;else if(o>1){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),oe=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,a){try{var o=t[r](a),s=o.value}catch(e){return void n(e)}return o.done?void e(s):Promise.resolve(s).then(function(e){return i("next",e)},function(e){return i("throw",e)})}return i("next")})}},se=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},le=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ue=function(e,t){for(var n in t){var i=t[n];i.configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n,i)}return e},ce=function(e,t){for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var r=n[i],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}return e},he=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},de=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},pe=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ge=function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t},me=function(e){return e&&e.__esModule?e:{default:e}},ve=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},_e=function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},ye=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},be=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},we=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},xe="undefined"==typeof global?self:global,Ee=function e(t,n,i,r){var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);null!==o&&e(o,n,i,r)}else if("value"in a&&a.writable)a.value=i;else{var s=a.set;void 0!==s&&s.call(r,i)}return i},ke=function(){function e(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Me=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,i=[],r=e[Symbol.iterator]();!(n=r.next()).done&&(i.push(n.value),!t||i.length!==t););return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},Te=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},Se=function(e,t){return e.raw=t,e},Ae=function(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return e},Re={},Ce=function(e){return Array.isArray(e)?e:Array.from(e)},Pe=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},Oe=Object.freeze({jsx:ae,asyncToGenerator:oe,classCallCheck:se,createClass:le,defineEnumerableProperties:ue,defaults:ce,defineProperty:he,get:de,inherits:pe,interopRequireDefault:me,interopRequireWildcard:ve,newArrowCheck:_e,objectDestructuringEmpty:ye,objectWithoutProperties:be,possibleConstructorReturn:we,selfGlobal:xe,set:Ee,slicedToArray:ke,slicedToArrayLoose:Me,taggedTemplateLiteral:Te,taggedTemplateLiteralLoose:Se,temporalRef:Ae,temporalUndefined:Re,toArray:Ce,toConsumableArray:Pe,typeof:re,extends:fe,instanceof:ge}),Le=function(){var e=function(){};try{return Object.defineProperty(e,"a",{get:function(){return 1}}),Object.defineProperty(e,"prototype",{writable:!1}),1===e.a&&e.prototype instanceof Object}catch(e){return!1}}(),Ne=!Le&&!Object.prototype.__defineGetter__,Fe=Object.prototype.hasOwnProperty,De=Le?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):(!Fe.call(e,t)||"value"in n)&&(e[t]=n.value)},Ie=Array.prototype.indexOf||function(e){var t=this;if(!t.length)return-1;for(var n=arguments[1]||0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},Ue=Object.create||function(e,t){function n(){}var i=void 0;n.prototype=e,i=new n;for(var r in t)Fe.call(t,r)&&De(i,r,t[r]);return i},He=Array.prototype.slice,ze=Array.prototype.concat,Be=Array.prototype.push,je=Array.prototype.join,Ve=Array.prototype.shift,Ge=Function.prototype.bind||function(e){var t=this,n=He.call(arguments,1);return 1===t.length?function(){return t.apply(e,ze.call(n,He.call(arguments)))}:function(){return t.apply(e,ze.call(n,He.call(arguments)))}},We=Ue(null),Xe=Math.random();t.prototype=Ue(null),n.prototype=Ue(null);var Ye="[a-z]{3}(?:-[a-z]{3}){0,2}",qe="(?:[a-z]{2,3}(?:-"+Ye+")?|[a-z]{4}|[a-z]{5,8})",Ze="[a-z]{4}",Qe="(?:[a-z]{2}|\\d{3})",$e="(?:[a-z0-9]{5,8}|\\d[a-z0-9]{3})",Je="[0-9a-wy-z]",Ke=Je+"(?:-[a-z0-9]{2,8})+",et="x(?:-[a-z0-9]{1,8})+",tt="(?:en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))",nt="(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-(?:guoyu|hakka|min|min-nan|xiang))",it="(?:"+tt+"|"+nt+")",rt=qe+"(?:-"+Ze+")?(?:-"+Qe+")?(?:-"+$e+")*(?:-"+Ke+")*(?:-"+et+")?",at=RegExp("^(?:"+rt+"|"+et+"|"+it+")$","i"),ot=RegExp("^(?!x).*?-("+$e+")-(?:\\w{4,8}-(?!x-))*\\1\\b","i"),st=RegExp("^(?!x).*?-("+Je+")-(?:\\w+-(?!x-))*\\1\\b","i"),lt=RegExp("-"+Ke,"ig"),ut=void 0,ct={tags:{"art-lojban":"jbo","i-ami":"ami","i-bnn":"bnn","i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","no-bok":"nb","no-nyn":"nn","sgn-BE-FR":"sfb","sgn-BE-NL":"vgt","sgn-CH-DE":"sgg","zh-guoyu":"cmn","zh-hakka":"hak","zh-min-nan":"nan","zh-xiang":"hsn","sgn-BR":"bzs","sgn-CO":"csn","sgn-DE":"gsg","sgn-DK":"dsl","sgn-ES":"ssp","sgn-FR":"fsl","sgn-GB":"bfi","sgn-GR":"gss","sgn-IE":"isg","sgn-IT":"ise","sgn-JP":"jsl","sgn-MX":"mfs","sgn-NI":"ncs","sgn-NL":"dse","sgn-NO":"nsl","sgn-PT":"psr","sgn-SE":"swl","sgn-US":"ase","sgn-ZA":"sfs","zh-cmn":"cmn","zh-cmn-Hans":"cmn-Hans","zh-cmn-Hant":"cmn-Hant","zh-gan":"gan","zh-wuu":"wuu","zh-yue":"yue"},subtags:{BU:"MM",DD:"DE",FX:"FR",TP:"TL",YD:"YE",ZR:"CD",heploc:"alalc97",in:"id",iw:"he",ji:"yi",jw:"jv",mo:"ro",ayx:"nun",bjd:"drl",ccq:"rki",cjr:"mom",cka:"cmr",cmk:"xch",drh:"khk",drw:"prs",gav:"dev",hrr:"jal",ibi:"opa",kgh:"kml",lcq:"ppr",mst:"mry",myt:"mry",sca:"hle",tie:"ras",tkk:"twm",tlw:"weo",tnf:"prs",ybd:"rki",yma:"lrr"},extLang:{aao:["aao","ar"],abh:["abh","ar"],abv:["abv","ar"],acm:["acm","ar"],acq:["acq","ar"],acw:["acw","ar"],acx:["acx","ar"],acy:["acy","ar"],adf:["adf","ar"],ads:["ads","sgn"],aeb:["aeb","ar"],aec:["aec","ar"],aed:["aed","sgn"],aen:["aen","sgn"],afb:["afb","ar"],afg:["afg","sgn"],ajp:["ajp","ar"],apc:["apc","ar"],apd:["apd","ar"],arb:["arb","ar"],arq:["arq","ar"],ars:["ars","ar"],ary:["ary","ar"],arz:["arz","ar"],ase:["ase","sgn"],asf:["asf","sgn"],asp:["asp","sgn"],asq:["asq","sgn"],asw:["asw","sgn"],auz:["auz","ar"],avl:["avl","ar"],ayh:["ayh","ar"],ayl:["ayl","ar"],ayn:["ayn","ar"],ayp:["ayp","ar"],bbz:["bbz","ar"],bfi:["bfi","sgn"],bfk:["bfk","sgn"],bjn:["bjn","ms"],bog:["bog","sgn"],bqn:["bqn","sgn"],bqy:["bqy","sgn"],btj:["btj","ms"],bve:["bve","ms"],bvl:["bvl","sgn"],bvu:["bvu","ms"],bzs:["bzs","sgn"],cdo:["cdo","zh"],cds:["cds","sgn"],cjy:["cjy","zh"],cmn:["cmn","zh"],coa:["coa","ms"],cpx:["cpx","zh"],csc:["csc","sgn"],csd:["csd","sgn"],cse:["cse","sgn"],csf:["csf","sgn"],csg:["csg","sgn"],csl:["csl","sgn"],csn:["csn","sgn"],csq:["csq","sgn"],csr:["csr","sgn"],czh:["czh","zh"],czo:["czo","zh"],doq:["doq","sgn"],dse:["dse","sgn"],dsl:["dsl","sgn"],dup:["dup","ms"],ecs:["ecs","sgn"],esl:["esl","sgn"],esn:["esn","sgn"],eso:["eso","sgn"],eth:["eth","sgn"],fcs:["fcs","sgn"],fse:["fse","sgn"],fsl:["fsl","sgn"],fss:["fss","sgn"],gan:["gan","zh"],gds:["gds","sgn"],gom:["gom","kok"],gse:["gse","sgn"],gsg:["gsg","sgn"],gsm:["gsm","sgn"],gss:["gss","sgn"],gus:["gus","sgn"],hab:["hab","sgn"],haf:["haf","sgn"],hak:["hak","zh"],hds:["hds","sgn"],hji:["hji","ms"],hks:["hks","sgn"],hos:["hos","sgn"],hps:["hps","sgn"],hsh:["hsh","sgn"],hsl:["hsl","sgn"],hsn:["hsn","zh"],icl:["icl","sgn"],ils:["ils","sgn"],inl:["inl","sgn"],ins:["ins","sgn"],ise:["ise","sgn"],isg:["isg","sgn"],isr:["isr","sgn"],jak:["jak","ms"],jax:["jax","ms"],jcs:["jcs","sgn"],jhs:["jhs","sgn"],jls:["jls","sgn"],jos:["jos","sgn"],jsl:["jsl","sgn"],jus:["jus","sgn"],kgi:["kgi","sgn"],knn:["knn","kok"],kvb:["kvb","ms"],kvk:["kvk","sgn"],kvr:["kvr","ms"],kxd:["kxd","ms"],lbs:["lbs","sgn"],lce:["lce","ms"],lcf:["lcf","ms"],liw:["liw","ms"],lls:["lls","sgn"],lsg:["lsg","sgn"],lsl:["lsl","sgn"],lso:["lso","sgn"],lsp:["lsp","sgn"],lst:["lst","sgn"],lsy:["lsy","sgn"],ltg:["ltg","lv"],lvs:["lvs","lv"],lzh:["lzh","zh"],max:["max","ms"],mdl:["mdl","sgn"],meo:["meo","ms"],mfa:["mfa","ms"],mfb:["mfb","ms"],mfs:["mfs","sgn"],min:["min","ms"],mnp:["mnp","zh"],mqg:["mqg","ms"],mre:["mre","sgn"],msd:["msd","sgn"],msi:["msi","ms"],msr:["msr","sgn"],mui:["mui","ms"],mzc:["mzc","sgn"],mzg:["mzg","sgn"],mzy:["mzy","sgn"],nan:["nan","zh"],nbs:["nbs","sgn"],ncs:["ncs","sgn"],nsi:["nsi","sgn"],nsl:["nsl","sgn"],nsp:["nsp","sgn"],nsr:["nsr","sgn"],nzs:["nzs","sgn"],okl:["okl","sgn"],orn:["orn","ms"],ors:["ors","ms"],pel:["pel","ms"],pga:["pga","ar"],pks:["pks","sgn"],prl:["prl","sgn"],prz:["prz","sgn"],psc:["psc","sgn"],psd:["psd","sgn"],pse:["pse","ms"],psg:["psg","sgn"],psl:["psl","sgn"],pso:["pso","sgn"],psp:["psp","sgn"],psr:["psr","sgn"],pys:["pys","sgn"],rms:["rms","sgn"],rsi:["rsi","sgn"],rsl:["rsl","sgn"],sdl:["sdl","sgn"],sfb:["sfb","sgn"],sfs:["sfs","sgn"],sgg:["sgg","sgn"],sgx:["sgx","sgn"],shu:["shu","ar"],slf:["slf","sgn"],sls:["sls","sgn"],sqk:["sqk","sgn"],sqs:["sqs","sgn"],ssh:["ssh","ar"],ssp:["ssp","sgn"],ssr:["ssr","sgn"],svk:["svk","sgn"],swc:["swc","sw"],swh:["swh","sw"],swl:["swl","sgn"],syy:["syy","sgn"],tmw:["tmw","ms"],tse:["tse","sgn"],tsm:["tsm","sgn"],tsq:["tsq","sgn"],tss:["tss","sgn"],tsy:["tsy","sgn"],tza:["tza","sgn"],ugn:["ugn","sgn"],ugy:["ugy","sgn"],ukl:["ukl","sgn"],uks:["uks","sgn"],urk:["urk","ms"],uzn:["uzn","uz"],uzs:["uzs","uz"],vgt:["vgt","sgn"],vkk:["vkk","ms"],vkt:["vkt","ms"],vsi:["vsi","sgn"],vsl:["vsl","sgn"],vsv:["vsv","sgn"],wuu:["wuu","zh"],xki:["xki","sgn"],xml:["xml","sgn"],xmm:["xmm","ms"],xms:["xms","sgn"],yds:["yds","sgn"],ysl:["ysl","sgn"],yue:["yue","zh"],zib:["zib","sgn"],zlm:["zlm","ms"],zmi:["zmi","ms"],zsl:["zsl","sgn"],zsm:["zsm","ms"]}},ht=/^[A-Z]{3}$/,ft=/-u(?:-[0-9a-z]{2,8})+/gi,dt={};Object.defineProperty(dt,"getCanonicalLocales",{enumerable:!1,configurable:!0,writable:!0,value:M});var pt={BHD:3,BYR:0,XOF:0,BIF:0,XAF:0,CLF:4,CLP:0,KMF:0,DJF:0,XPF:0,GNF:0,ISK:0,IQD:3,JPY:0,JOD:3,KRW:0,KWD:3,LYD:3,OMR:3,PYG:0,RWF:0,TND:3,UGX:0,UYI:0,VUV:0,VND:0};De(dt,"NumberFormat",{configurable:!0,writable:!0,value:T}),De(dt.NumberFormat,"prototype",{writable:!1}),We.NumberFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["nu"],"[[localeData]]":{}},De(dt.NumberFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:Ge.call(function(e){if(!Fe.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=i(),n=arguments[1],r=this["[[availableLocales]]"],a=g(e);return t(),x(r,a,n)},We.NumberFormat)}),De(dt.NumberFormat.prototype,"format",{configurable:!0,get:R}),Object.defineProperty(dt.NumberFormat.prototype,"formatToParts",{configurable:!0,enumerable:!1,writable:!0,value:C});var gt={arab:["贍","佟","佗","伲","伽","佶","佴","侑","侉","侃"],arabext:["郯","郾","鄄","鄢","鄞","鄣","鄱","鄯","鄹","酃"],bali:["岘�","岘�","岘�","岘�","岘�","岘�","岘�","岘�","岘�","岘�"],beng:["唰�","唰�","唰�","唰�","唰�","唰�","唰�","唰�","唰�","唰�"],deva:["啷�","啷�","啷�","啷�","啷�","啷�","啷�","啷�","啷�","啷�"],fullwide:["锛�","锛�","锛�","锛�","锛�","锛�","锛�","锛�","锛�","锛�"],gujr:["喃�","喃�","喃�","喃�","喃�","喃�","喃�","喃�","喃�","喃�"],guru:["喋�","喋�","喋�","喋�","喋�","喋�","喋�","喋�","喋�","喋�"],hanidec:["銆�","涓€","浜�","涓�","鍥�","浜�","鍏�","涓�","鍏�","涔�"],khmr:["釤�","釤�","釤�","釤�","釤�","釤�","釤�","釤�","釤�","釤�"],knda:["喑�","喑�","喑�","喑�","喑�","喑�","喑�","喑�","喑�","喑�"],laoo:["嗷�","嗷�","嗷�","嗷�","嗷�","嗷�","嗷�","嗷�","嗷�","嗷�"],latn:["0","1","2","3","4","5","6","7","8","9"],limb:["幞�","幞�","幞�","幞�","幞�","幞�","幞�","幞�","幞�","幞�"],mlym:["嗟�","嗟�","嗟�","嗟�","嗟�","嗟�","嗟�","嗟�","嗟�","嗟�"],mong:["釥�","釥�","釥�","釥�","釥�","釥�","釥�","釥�","釥�","釥�"],mymr:["醽€","醽�","醽�","醽�","醽�","醽�","醽�","醽�","醽�","醽�"],orya:["喹�","喹�","喹�","喹�","喹�","喹�","喹�","喹�","喹�","喹�"],tamldec:["喁�","喁�","喁�","喁�","喁�","喁�","喁�","喁�","喁�","喁�"],telu:["啾�","啾�","啾�","啾�","啾�","啾�","啾�","啾�","啾�","啾�"],thai:["喙�","喙�","喙�","喙�","喙�","喙�","喙�","喙�","喙�","喙�"],tibt:["嗉�","嗉�","嗉�","嗉�","嗉�","嗉�","嗉�","嗉�","嗉�","嗉�"]};De(dt.NumberFormat.prototype,"resolvedOptions",{configurable:!0,writable:!0,value:function(){var e=void 0,n=new t,i=["locale","numberingSystem","style","currency","currencyDisplay","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","useGrouping"],r=null!==this&&"object"===Oe.typeof(this)&&l(this);if(!r||!r["[[initializedNumberFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.NumberFormat object.");for(var a=0,o=i.length;a<o;a++)Fe.call(r,e="[["+i[a]+"]]")&&(n[i[a]]={value:r[e],writable:!0,configurable:!0,enumerable:!0});return Ue({},n)}});var mt=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g,vt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,_t=/[rqQASjJgwWIQq]/,yt=["era","year","month","day","weekday","quarter"],bt=["hour","minute","second","hour12","timeZoneName"],wt={second:{numeric:"s","2-digit":"ss"},minute:{numeric:"m","2-digit":"mm"},year:{numeric:"y","2-digit":"yy"},day:{numeric:"d","2-digit":"dd"},month:{numeric:"L","2-digit":"LL",narrow:"LLLLL",short:"LLL",long:"LLLL"},weekday:{narrow:"ccccc",short:"ccc",long:"cccc"}},xt=Ue(null,{narrow:{},short:{},long:{}});De(dt,"DateTimeFormat",{configurable:!0,writable:!0,value:W}),De(W,"prototype",{writable:!1});var Et={weekday:["narrow","short","long"],era:["narrow","short","long"],year:["2-digit","numeric"],month:["2-digit","numeric","narrow","short","long"],day:["2-digit","numeric"],hour:["2-digit","numeric"],minute:["2-digit","numeric"],second:["2-digit","numeric"],timeZoneName:["short","long"]};We.DateTimeFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["ca","nu"],"[[localeData]]":{}},De(dt.DateTimeFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:Ge.call(function(e){if(!Fe.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=i(),n=arguments[1],r=this["[[availableLocales]]"],a=g(e);return t(),x(r,a,n)},We.NumberFormat)}),De(dt.DateTimeFormat.prototype,"format",{configurable:!0,get:$}),Object.defineProperty(dt.DateTimeFormat.prototype,"formatToParts",{enumerable:!1,writable:!0,configurable:!0,value:J}),De(dt.DateTimeFormat.prototype,"resolvedOptions",{writable:!0,configurable:!0,value:function(){var e=void 0,n=new t,i=["locale","calendar","numberingSystem","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"],r=null!==this&&"object"===Oe.typeof(this)&&l(this);if(!r||!r["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.DateTimeFormat object.");for(var a=0,o=i.length;a<o;a++)Fe.call(r,e="[["+i[a]+"]]")&&(n[i[a]]={value:r[e],writable:!0,configurable:!0,enumerable:!0});return Ue({},n)}});var kt=dt.__localeSensitiveProtos={Number:{},Date:{}};if(kt.Number.toLocaleString=function(){if("[object Number]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a number for Number.prototype.toLocaleString()");return L(new T(arguments[0],arguments[1]),this)},kt.Date.toLocaleString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1];n=q(n,"any","all");var i=new W(t,n);return ee(i,e)},kt.Date.toLocaleDateString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleDateString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1];n=q(n,"date","date");var i=new W(t,n);return ee(i,e)},kt.Date.toLocaleTimeString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleTimeString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1];n=q(n,"time","time");var i=new W(t,n);return ee(i,e)},De(dt,"__applyLocaleSensitivePrototypes",{writable:!0,configurable:!0,value:function(){De(Number.prototype,"toLocaleString",{writable:!0,configurable:!0,value:kt.Number.toLocaleString}),De(Date.prototype,"toLocaleString",{writable:!0,configurable:!0,value:kt.Date.toLocaleString});for(var e in kt.Date)Fe.call(kt.Date,e)&&De(Date.prototype,e,{writable:!0,configurable:!0,value:kt.Date[e]})}}),De(dt,"__addLocaleData",{value:function(e){if(!h(e.locale))throw new Error("Object passed doesn't identify itself with a valid language tag");ie(e,e.locale)}}),De(dt,"__disableRegExpRestore",{value:function(){We.disableRegExpRestore=!0}}),"undefined"==typeof Intl)try{window.Intl=dt,dt.__applyLocaleSensitivePrototypes()}catch(e){}return dt}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(this,function(){"use strict";function e(e,t){for(var n=e.length-1;n>=0;n--)"function"==typeof e[n]&&(e[n]=Zone.current.wrap(e[n],t+"_"+n));return e}function t(t,n){for(var i=t.constructor.name,r=function(r){var a=n[r],o=t[a];o&&(t[a]=function(t){return function(){return t.apply(this,e(arguments,i+"."+a))}}(o))},a=0;a<n.length;a++)r(a)}function n(e,t){var n=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!0,configurable:!0},i=Object.getOwnPropertyDescriptor(e,"original"+t);!i&&n.get&&Object.defineProperty(e,"original"+t,{enumerable:!1,configurable:!0,get:n.get}),delete n.writable,delete n.value;var r=t.substr(2),a=S("_"+t);n.set=function(e){if(this[a]&&this.removeEventListener(r,this[a]),"function"==typeof e){var t=function(t){var n;return n=e.apply(this,arguments),void 0==n||n||t.preventDefault(),n};this[a]=t,this.addEventListener(r,t,!1)}else this[a]=null},n.get=function(){var e=this[a]||null;return null===e&&i&&i.get&&(e=i.get.apply(this,arguments),e&&(n.set.apply(this,[e]),"function"==typeof this.removeAttribute&&this.removeAttribute(t))),this[a]||null},Object.defineProperty(e,t,n)}function i(e,t){var i=[];for(var r in e)"on"==r.substr(0,2)&&i.push(r);for(var a=0;a<i.length;a++)n(e,i[a]);if(t)for(var o=0;o<t.length;o++)n(e,"on"+t[o])}function r(e,t,n,i,r){var a=e[L];if(a)for(var o=0;o<a.length;o++){var s=a[o],l=s.data,u=l.handler;if((l.handler===t||u.listener===t)&&l.useCapturing===i&&l.eventName===n)return r&&a.splice(o,1),s}return null}function a(e,t,n){var i=e[L];i||(i=e[L]=[]),n?i.unshift(t):i.push(t)}function o(e,t,n,i,o,s){function l(e){var t=e.data;return a(t.target,e,o),t.invokeAddFunc(c,e)}function u(e){var t=e.data;return r(t.target,e.invoke,t.eventName,t.useCapturing,!0),t.invokeRemoveFunc(h,e)}void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===s&&(s=D);var c=S(e),h=S(t),f=!n&&void 0;return function(t,n){var a=s(t,n);a.useCapturing=a.useCapturing||f;var o=null;"function"==typeof a.handler?o=a.handler:a.handler&&a.handler.handleEvent&&(o=function(e){return a.handler.handleEvent(e)});var h=!1;try{h=a.handler&&"[object FunctionWrapper]"===a.handler.toString()}catch(e){return}if(!o||h)return a.invokeAddFunc(c,a.handler);if(!i){var d=r(a.target,a.handler,a.eventName,a.useCapturing,!1);if(d)return a.invokeAddFunc(c,d)}var p=Zone.current,g=a.target.constructor.name+"."+e+":"+a.eventName;p.scheduleEventTask(g,o,a,l,u)}}function s(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=D);var i=S(e),a=!t&&void 0;return function(e,t){var o=n(e,t);o.useCapturing=o.useCapturing||a;var s=r(o.target,o.handler,o.eventName,o.useCapturing,!0);s?s.zone.cancelTask(s):o.invokeRemoveFunc(i,o.handler)}}function l(e,t,n,i){return void 0===t&&(t=N),void 0===n&&(n=F),void 0===i&&(i=D),!(!e||!e[t])&&(h(e,t,function(){return o(t,n,!0,!1,!1,i)}),h(e,n,function(){return s(n,!0,i)}),!0)}function u(t){var n=A[t];if(n){A[t]=function(){var i=e(arguments,t);switch(i.length){case 0:this[I]=new n;break;case 1:this[I]=new n(i[0]);break;case 2:this[I]=new n(i[0],i[1]);break;case 3:this[I]=new n(i[0],i[1],i[2]);break;case 4:this[I]=new n(i[0],i[1],i[2],i[3]);break;default:throw new Error("Arg list too long.")}};var i,r=new n(function(){});for(i in r)"XMLHttpRequest"===t&&"responseBlob"===i||!function(e){"function"==typeof r[e]?A[t].prototype[e]=function(){return this[I][e].apply(this[I],arguments)}:Object.defineProperty(A[t].prototype,e,{set:function(n){"function"==typeof n?this[I][e]=Zone.current.wrap(n,t+"."+e):this[I][e]=n},get:function(){return this[I][e]}})}(i);for(i in n)"prototype"!==i&&n.hasOwnProperty(i)&&(A[t][i]=n[i])}}function c(e,t){try{return Function("f","return function "+e+"(){return f(this, arguments)}")(t)}catch(e){return function(){return t(this,arguments)}}}function h(e,t,n){for(var i=e;i&&Object.getOwnPropertyNames(i).indexOf(t)===-1;)i=Object.getPrototypeOf(i);!i&&e[t]&&(i=e);var r,a=S(t);return i&&!(r=i[a])&&(r=i[a]=i[t],i[t]=c(t,n(r,a,t))),r}function f(e,t){var n=e[S("eventTasks")],i=[];if(n)for(var r=0;r<n.length;r++){var a=n[r],o=a.data,s=o&&o.eventName;s===t&&i.push(a)}return i}function d(e,t,n,i){function r(t){function n(){try{t.invoke.apply(this,arguments)}finally{delete l[i.handleId]}}var i=t.data;return i.args[0]=n,i.handleId=o.apply(e,i.args),l[i.handleId]=t,t}function a(e){return delete l[e.data.handleId],s(e.data.handleId)}var o=null,s=null;t+=i,n+=i;var l={};o=h(e,t,function(n){return function(o,s){if("function"==typeof s[0]){var l=Zone.current,u={handleId:null,isPeriodic:"Interval"===i,delay:"Timeout"===i||"Interval"===i?s[1]||0:null,args:s},c=l.scheduleMacroTask(t,s[0],u,r,a);if(!c)return c;var h=c.data.handleId;return h&&h.ref&&h.unref&&"function"==typeof h.ref&&"function"==typeof h.unref&&(c.ref=h.ref.bind(h),c.unref=h.unref.bind(h)),c}return n.apply(e,s)}}),s=h(e,n,function(t){return function(n,i){
var r="number"==typeof i[0]?l[i[0]]:i[0];r&&"string"==typeof r.type?"notScheduled"!==r.state&&(r.cancelFn&&r.data.isPeriodic||0===r.runCount)&&r.zone.cancelTask(r):t.apply(e,i)}})}function p(){Object.defineProperty=function(e,t,n){if(m(e,t))throw new TypeError("Cannot assign to read only property '"+t+"' of "+e);var i=n.configurable;return"prototype"!==t&&(n=v(e,t,n)),_(e,t,n,i)},Object.defineProperties=function(e,t){return Object.keys(t).forEach(function(n){Object.defineProperty(e,n,t[n])}),e},Object.create=function(e,t){return"object"!=typeof t||Object.isFrozen(t)||Object.keys(t).forEach(function(n){t[n]=v(e,n,t[n])}),z(e,t)},Object.getOwnPropertyDescriptor=function(e,t){var n=H(e,t);return m(e,t)&&(n.configurable=!1),n}}function g(e,t,n){var i=n.configurable;return n=v(e,t,n),_(e,t,n,i)}function m(e,t){return e&&e[B]&&e[B][t]}function v(e,t,n){return n.configurable=!0,n.configurable||(e[B]||U(e,B,{writable:!0,value:{}}),e[B][t]=!0),n}function _(e,t,n,i){try{return U(e,t,n)}catch(a){if(!n.configurable)throw a;"undefined"==typeof i?delete n.configurable:n.configurable=i;try{return U(e,t,n)}catch(i){var r=null;try{r=JSON.stringify(n)}catch(e){r=r.toString()}console.log("Attempting to configure '"+t+"' with descriptor '"+r+"' on object '"+e+"' and got error, giving up: "+i)}}}function y(e){var t=[],n=e.wtf;n?t=j.split(",").map(function(e){return"HTML"+e+"Element"}).concat(V):e[G]?t.push(G):t=V;for(var i=0;i<t.length;i++){var r=e[t[i]];l(r&&r.prototype)}}function b(e){var t=e.WebSocket;e.EventTarget||l(t.prototype),e.WebSocket=function(e,n){var r,a=arguments.length>1?new t(e,n):new t(e),o=Object.getOwnPropertyDescriptor(a,"onmessage");return o&&o.configurable===!1?(r=Object.create(a),["addEventListener","removeEventListener","send","close"].forEach(function(e){r[e]=function(){return a[e].apply(a,arguments)}})):r=a,i(r,["close","error","message","open"]),r};for(var n in t)e.WebSocket[n]=t[n]}function w(e){if(!C||O){var t="undefined"!=typeof WebSocket;x()?(P&&(i(window,W),i(Document.prototype,W),"undefined"!=typeof SVGElement&&i(SVGElement.prototype,W),i(HTMLElement.prototype,W)),i(XMLHttpRequest.prototype,null),"undefined"!=typeof IDBIndex&&(i(IDBIndex.prototype,null),i(IDBRequest.prototype,null),i(IDBOpenDBRequest.prototype,null),i(IDBDatabase.prototype,null),i(IDBTransaction.prototype,null),i(IDBCursor.prototype,null)),t&&i(WebSocket.prototype,null)):(E(),u("XMLHttpRequest"),t&&b(e))}}function x(){if((P||O)&&!Object.getOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var e=Object.getOwnPropertyDescriptor(Element.prototype,"onclick");if(e&&!e.configurable)return!1}var t=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"onreadystatechange");Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{enumerable:!0,configurable:!0,get:function(){return!0}});var n=new XMLHttpRequest,i=!!n.onreadystatechange;return Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",t||{}),i}function E(){for(var e=function(e){var t=W[e],n="on"+t;self.addEventListener(t,function(e){var t,i,r=e.target;for(i=r?r.constructor.name+"."+n:"unknown."+n;r;)r[n]&&!r[n][X]&&(t=Zone.current.wrap(r[n],i),t[X]=r[n],r[n]=t),r=r.parentElement},!0)},t=0;t<W.length;t++)e(t)}function k(e){if((P||O)&&"registerElement"in e.document){var t=document.registerElement,n=["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"];document.registerElement=function(e,i){return i&&i.prototype&&n.forEach(function(e){var t="Document.registerElement::"+e;if(i.prototype.hasOwnProperty(e)){var n=Object.getOwnPropertyDescriptor(i.prototype,e);n&&n.value?(n.value=Zone.current.wrap(n.value,t),g(i.prototype,e,n)):i.prototype[e]=Zone.current.wrap(i.prototype[e],t)}else i.prototype[e]&&(i.prototype[e]=Zone.current.wrap(i.prototype[e],t))}),t.apply(document,[e,i])}}}function M(e){function t(e){var t=e[ee];return t}function n(e){XMLHttpRequest[ie]=!1;var t=e.data,n=t.target[ne];n&&t.target.removeEventListener("readystatechange",n);var i=t.target[ne]=function(){t.target.readyState===t.target.DONE&&!t.aborted&&XMLHttpRequest[ie]&&"scheduled"===e.state&&e.invoke()};t.target.addEventListener("readystatechange",i);var r=t.target[ee];return r||(t.target[ee]=e),o.apply(t.target,t.args),XMLHttpRequest[ie]=!0,e}function i(){}function r(e){var t=e.data;return t.aborted=!0,s.apply(t.target,t.args)}var a=h(e.XMLHttpRequest.prototype,"open",function(){return function(e,t){return e[te]=0==t[2],a.apply(e,t)}}),o=h(e.XMLHttpRequest.prototype,"send",function(){return function(e,t){var a=Zone.current;if(e[te])return o.apply(e,t);var s={target:e,isPeriodic:!1,delay:null,args:t,aborted:!1};return a.scheduleMacroTask("XMLHttpRequest.send",i,s,n,r)}}),s=h(e.XMLHttpRequest.prototype,"abort",function(e){return function(e,n){var i=t(e);if(i&&"string"==typeof i.type){if(null==i.cancelFn||i.data&&i.data.aborted)return;i.zone.cancelTask(i)}}})}function T(e){return function(t){var n=f(Q,e);n.forEach(function(n){var i=Q.PromiseRejectionEvent;if(i){var r=new i(e,{promise:t.promise,reason:t.rejection});n.invoke(r)}})}}var S=(function(e){function t(e){return"__zone_symbol__"+e}function n(){0===z&&0===I.length&&(e[L]?e[L].resolve(0)[N](o):e[O](o,0))}function i(e){n(),I.push(e)}function r(e){if(!S[t("ignoreConsoleErrorUncaughtError")]){var n=e&&e.rejection;n&&console.error("Unhandled Promise rejection:",n instanceof Error?n.message:n,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",n,n instanceof Error?n.stack:void 0),console.error(e)}}function a(e){r(e);try{var n=S[t("unhandledPromiseRejectionHandler")];n&&"function"==typeof n&&n.apply(this,[e])}catch(e){}}function o(){if(!U){for(U=!0;I.length;){var e=I;I=[];for(var t=0;t<e.length;t++){var n=e[t];try{n.zone.runTask(n,null,null)}catch(e){r(e)}}}for(;H.length;)for(var i=function(){var e=H.shift();try{e.zone.runGuarded(function(){throw e})}catch(e){a(e)}};H.length;)i();U=!1}}function s(e){return e&&e.then}function l(e){return e}function u(e){return Z.reject(e)}function c(e,t){return function(n){try{h(e,t,n)}catch(t){h(e,!1,t)}}}function h(e,i,r){var a=q();if(e===r)throw new TypeError("Promise resolved with itself");if(e[B]===G){var o=null;try{"object"!=typeof r&&"function"!=typeof r||(o=r&&r.then)}catch(t){return a(function(){h(e,!1,t)})(),e}if(i!==X&&r instanceof Z&&r.hasOwnProperty(B)&&r.hasOwnProperty(j)&&r[B]!==G)f(r),h(e,r[B],r[j]);else if(i!==X&&"function"==typeof o)try{o.apply(r,[a(c(e,i)),a(c(e,!1))])}catch(t){a(function(){h(e,!1,t)})()}else{e[B]=i;var s=e[j];e[j]=r,i===X&&r instanceof Error&&(r[t("currentTask")]=S.currentTask);for(var l=0;l<s.length;)d(e,s[l++],s[l++],s[l++],s[l++]);if(0==s.length&&i==X){e[B]=Y;try{throw new Error("Uncaught (in promise): "+r+(r&&r.stack?"\n"+r.stack:""))}catch(t){var u=t;u.rejection=r,u.promise=e,u.zone=S.current,u.task=S.currentTask,H.push(u),n()}}}}return e}function f(e){if(e[B]===Y){try{var n=S[t("rejectionHandledHandler")];n&&"function"==typeof n&&n.apply(this,[{rejection:e[j],promise:e}])}catch(e){}e[B]=X;for(var i=0;i<H.length;i++)e===H[i].promise&&H.splice(i,1)}}function d(e,t,n,i,r){f(e);var a=e[B]?"function"==typeof i?i:l:"function"==typeof r?r:u;t.scheduleMicroTask(V,function(){try{h(n,!0,t.run(a,void 0,[e[j]]))}catch(e){h(n,!1,e)}})}function p(e){var t=e.prototype,n=t.then;t[N]=n,e.prototype.then=function(e,t){var i=this,r=new Z(function(e,t){n.call(i,e,t)});return r.then(e,t)},e[$]=!0}function g(e){return function(){var t=e.apply(this,arguments);if(t instanceof Z)return t;var n=t.constructor;return n[$]||p(n),t}}function m(){var e=this,t=ne.apply(this,arguments);if(!t.stack)try{throw t}catch(e){t=e}var n=t.originalStack=t.stack;if(m[re]&&n){for(var i=n.split("\n"),r=F,a=0;i[a]!==K&&i[a]!==ee&&a<i.length;)a++;for(;a<i.length&&r;a++){var o=i[a];if(o.trim())switch(ie[o]){case 0:i.splice(a,1),a--;break;case 1:r.parent?(i[a]+=" ["+r.parent.zone.name+" => "+r.zone.name+"]",r=r.parent):r=null;break;default:i[a]+=" ["+r.zone.name+"]"}}try{t.stack=t.zoneAwareStack=i.join("\n")}catch(e){}}return this instanceof ne&&this.constructor!=ne?(Object.keys(t).concat("stack","message").forEach(function(n){if(void 0!==t[n])try{e[n]=t[n]}catch(e){}}),this):t}if(e.Zone)throw new Error("Zone already loaded.");var v={name:"NO ZONE"},_="notScheduled",y="scheduling",b="scheduled",w="running",x="canceling",E="unknown",k="microTask",M="macroTask",T="eventTask",S=function(){function t(e,t){this._properties=null,this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new R(this,this._parent&&this._parent._zoneDelegate,t)}return t.assertZonePatched=function(){if(e.Promise!==Z)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(t,"root",{get:function(){for(var e=t.current;e.parent;)e=e.parent;return e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"current",{get:function(){return F.zone},enumerable:!0,configurable:!0}),Object.defineProperty(t,"currentTask",{get:function(){return D},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var t=this.getZoneWith(e);if(t)return t._properties[e]},t.prototype.getZoneWith=function(e){for(var t=this;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null},t.prototype.fork=function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)},t.prototype.wrap=function(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);var n=this._zoneDelegate.intercept(this,e,t),i=this;return function(){return i.runGuarded(n,this,arguments,t)}},t.prototype.run=function(e,t,n,i){void 0===t&&(t=void 0),void 0===n&&(n=null),void 0===i&&(i=null),F=new P(F,this);try{return this._zoneDelegate.invoke(this,e,t,n,i)}finally{F=F.parent}},t.prototype.runGuarded=function(e,t,n,i){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),F=new P(F,this);try{try{return this._zoneDelegate.invoke(this,e,t,n,i)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{F=F.parent}},t.prototype.runTask=function(e,t,n){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||v).name+"; Execution: "+this.name+")");var i=e.state!=w;i&&e._transitionTo(w,b),e.runCount++;var r=D;D=e,F=new P(F,this);try{e.type==M&&e.data&&!e.data.isPeriodic&&(e.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,e,t,n)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{e.state!==_&&e.state!==E&&(e.type==T||e.data&&e.data.isPeriodic?i&&e._transitionTo(b,w):(e.runCount=0,this._updateTaskCount(e,-1),i&&e._transitionTo(_,w,_))),F=F.parent,D=r}},t.prototype.scheduleTask=function(e){if(e.zone&&e.zone!==this)for(var t=this;t;){if(t===e.zone)throw Error("can not reschedule task to "+this.name+" which is descendants of the original zone "+e.zone.name);t=t.parent}e._transitionTo(y,_);var n=[];e._zoneDelegates=n,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(t){throw e._transitionTo(E,y,_),this._zoneDelegate.handleError(this,t),t}return e._zoneDelegates===n&&this._updateTaskCount(e,1),e.state==y&&e._transitionTo(b,y),e},t.prototype.scheduleMicroTask=function(e,t,n,i){return this.scheduleTask(new C(k,e,t,n,i,null))},t.prototype.scheduleMacroTask=function(e,t,n,i,r){return this.scheduleTask(new C(M,e,t,n,i,r))},t.prototype.scheduleEventTask=function(e,t,n,i,r){return this.scheduleTask(new C(T,e,t,n,i,r))},t.prototype.cancelTask=function(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||v).name+"; Execution: "+this.name+")");e._transitionTo(x,b,w);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(E,x),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(_,x),e.runCount=0,e},t.prototype._updateTaskCount=function(e,t){var n=e._zoneDelegates;t==-1&&(e._zoneDelegates=null);for(var i=0;i<n.length;i++)n[i]._updateTaskCount(e.type,t)},t}();S.__symbol__=t;var A={name:"",onHasTask:function(e,t,n,i){return e.hasTask(n,i)},onScheduleTask:function(e,t,n,i){return e.scheduleTask(n,i)},onInvokeTask:function(e,t,n,i,r,a){return e.invokeTask(n,i,r,a)},onCancelTask:function(e,t,n,i){return e.cancelTask(n,i)}},R=function(){function e(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._forkCurrZone=n&&(n.onFork?this.zone:t.zone),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this.zone:t.zone),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this.zone:t.zone),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this.zone:t.zone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this.zone:t.zone),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this.zone:t.zone),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this.zone:t.zone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;var i=n&&n.onHasTask,r=t&&t._hasTaskZS;(i||r)&&(this._hasTaskZS=i?n:A,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=e,n.onScheduleTask||(this._scheduleTaskZS=A,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),n.onInvokeTask||(this._invokeTaskZS=A,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),n.onCancelTask||(this._cancelTaskZS=A,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}return e.prototype.fork=function(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new S(e,t)},e.prototype.intercept=function(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,n):t},e.prototype.invoke=function(e,t,n,i,r){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,n,i,r):t.apply(n,i)},e.prototype.handleError=function(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)},e.prototype.scheduleTask=function(e,t){var n=t;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t),n||(n=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=k)throw new Error("Task is missing scheduleFn.");i(t)}return n},e.prototype.invokeTask=function(e,t,n,i){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,n,i):t.callback.apply(n,i)},e.prototype.cancelTask=function(e,t){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");n=t.cancelFn(t)}return n},e.prototype.hasTask=function(e,t){try{return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(e){}},e.prototype._updateTaskCount=function(e,t){var n=this._taskCounts,i=n[e],r=n[e]=i+t;if(r<0)throw new Error("More tasks executed then were scheduled.");if(0==i||0==r){var a={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e};this.hasTask(this.zone,a)}},e}(),C=function(){function e(e,t,n,i,r,a){this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=e,this.source=t,this.data=i,this.scheduleFn=r,this.cancelFn=a,this.callback=n;var s=this;this.invoke=function(){z++;try{return s.runCount++,s.zone.runTask(s,this,arguments)}finally{1==z&&o(),z--}}}return Object.defineProperty(e.prototype,"zone",{get:function(){return this._zone},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.cancelScheduleRequest=function(){this._transitionTo(_,y)},e.prototype._transitionTo=function(e,t,n){if(this._state!==t&&this._state!==n)throw new Error(this.type+" '"+this.source+"': can not transition to '"+e+"', expecting state '"+t+"'"+(n?" or '"+n+"'":"")+", was '"+this._state+"'.");this._state=e,e==_&&(this._zoneDelegates=null)},e.prototype.toString=function(){return this.data&&"undefined"!=typeof this.data.handleId?this.data.handleId:Object.prototype.toString.call(this)},e.prototype.toJSON=function(){return{type:this.type,state:this.state,source:this.source,data:this.data,zone:this.zone.name,invoke:this.invoke,scheduleFn:this.scheduleFn,cancelFn:this.cancelFn,runCount:this.runCount,callback:this.callback}},e}(),P=function(){function e(e,t){this.parent=e,this.zone=t}return e}(),O=t("setTimeout"),L=t("Promise"),N=t("then"),F=new P(null,new S(null,null)),D=null,I=[],U=!1,H=[],z=0,B=t("state"),j=t("value"),V="Promise.then",G=null,W=!0,X=!1,Y=0,q=function(){var e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}},Z=function(){function e(t){var n=this;if(!(n instanceof e))throw new Error("Must be an instanceof Promise.");n[B]=G,n[j]=[];try{t&&t(c(n,W),c(n,X))}catch(e){h(n,!1,e)}}return e.toString=function(){return"function ZoneAwarePromise() { [native code] }"},e.resolve=function(e){return h(new this(null),W,e)},e.reject=function(e){return h(new this(null),X,e)},e.race=function(e){function t(e){a&&(a=i(e))}function n(e){a&&(a=r(e))}for(var i,r,a=new this(function(e,t){n=[e,t],i=n[0],r=n[1];var n}),o=0,l=e;o<l.length;o++){var u=l[o];s(u)||(u=this.resolve(u)),u.then(t,n)}return a},e.all=function(e){for(var t,n,i=new this(function(e,i){t=e,n=i}),r=0,a=[],o=0,l=e;o<l.length;o++){var u=l[o];s(u)||(u=this.resolve(u)),u.then(function(e){return function(n){a[e]=n,r--,r||t(a)}}(r),n),r++}return r||t(a),i},e.prototype.then=function(e,t){var n=new this.constructor(null),i=S.current;return this[B]==G?this[j].push(i,n,e,t):d(this,i,n,e,t),n},e.prototype.catch=function(e){return this.then(null,e)},e}();Z.resolve=Z.resolve,Z.reject=Z.reject,Z.race=Z.race,Z.all=Z.all;var Q=e[L]=e.Promise;e.Promise=Z;var $=t("thenPatched");if(Q){p(Q);var J=e.fetch;"function"==typeof J&&(e.fetch=g(J))}Promise[S.__symbol__("uncaughtPromiseErrors")]=H;var K,ee,te=S.__symbol__("blacklistedStackFrames"),ne=e[t("Error")]=e.Error,ie={};e.Error=m;var re="stackRewrite";m.prototype=ne.prototype,m[te]=ie,m[re]=!1;var ae=["stackTraceLimit","captureStackTrace","prepareStackTrace"],oe=Object.keys(ne);oe&&oe.forEach(function(e){0===ae.filter(function(t){return t===e}).length&&Object.defineProperty(m,e,{get:function(){return ne[e]},set:function(t){ne[e]=t}})}),ne.hasOwnProperty("stackTraceLimit")&&(ne.stackTraceLimit=Math.max(ne.stackTraceLimit,15),Object.defineProperty(m,"stackTraceLimit",{get:function(){return ne.stackTraceLimit},set:function(e){return ne.stackTraceLimit=e}})),ne.hasOwnProperty("captureStackTrace")&&Object.defineProperty(m,"captureStackTrace",{value:function(e,t){ne.captureStackTrace(e,t)}}),Object.defineProperty(m,"prepareStackTrace",{get:function(){return ne.prepareStackTrace},set:function(e){return e&&"function"==typeof e?ne.prepareStackTrace=function(t,n){if(n)for(var i=0;i<n.length;i++){var r=n[i];if("zoneCaptureStackTrace"===r.getFunctionName()){n.splice(i,1);break}}return e.apply(this,[t,n])}:ne.prepareStackTrace=e}});var se=S.current.fork({name:"detect",onInvoke:function(e,t,n,i,r,a,o){return e.invoke(n,i,r,a,o)},onHandleError:function(e,t,n,i){if(i.originalStack&&Error===m)for(var r=i.originalStack.split(/\n/),a=!1,o=!1,s=!1;r.length;){var l=r.shift();if(/:\d+:\d+/.test(l)){var u=l.split("(")[0].split("@")[0],c=1;if(u.indexOf("ZoneAwareError")!==-1&&(K=l,ee=l.replace("Error.",""),ie[ee]=0),u.indexOf("runGuarded")!==-1?o=!0:u.indexOf("runTask")!==-1?s=!0:u.indexOf("run")!==-1?a=!0:c=0,ie[l]=c,a&&o&&s){m[re]=!0;break}}}return!1}}),le=function(){se.run(function(){se.runGuarded(function(){throw new m(m,ne)})})};return se.runTask(se.scheduleMacroTask("detect",le,null,function(){return null},null)),e.Zone=S}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global),function(e){return"__zone_symbol__"+e}),A="object"==typeof window&&window||"object"==typeof self&&self||global,R="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,C=!("nw"in A)&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),P=!C&&!R&&!("undefined"==typeof window||!window.HTMLElement),O="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)&&!R&&!("undefined"==typeof window||!window.HTMLElement),L=S("eventTasks"),N="addEventListener",F="removeEventListener",D=function(e,t){return{useCapturing:t[2],eventName:t[0],handler:t[1],target:e||A,name:t[0],invokeAddFunc:function(e,t){return t&&t.invoke?this.target[e](this.eventName,t.invoke,this.useCapturing):this.target[e](this.eventName,t,this.useCapturing)},invokeRemoveFunc:function(e,t){return t&&t.invoke?this.target[e](this.eventName,t.invoke,this.useCapturing):this.target[e](this.eventName,t,this.useCapturing)}}},I=(o(N,F),s(F),S("originalInstance"));Zone[S("patchEventTargetMethods")]=l,Zone[S("patchOnProperties")]=i;var U=Object[S("defineProperty")]=Object.defineProperty,H=Object[S("getOwnPropertyDescriptor")]=Object.getOwnPropertyDescriptor,z=Object.create,B=S("unconfigurables"),j="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video",V="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex,WebSocket".split(","),G="EventTarget",W="copy cut paste abort blur focus canplay canplaythrough change click contextmenu dblclick drag dragend dragenter dragleave dragover dragstart drop durationchange emptied ended input invalid keydown keypress keyup load loadeddata loadedmetadata loadstart message mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup pause play playing progress ratechange reset scroll seeked seeking select show stalled submit suspend timeupdate volumechange waiting mozfullscreenchange mozfullscreenerror mozpointerlockchange mozpointerlockerror error webglcontextrestored webglcontextlost webglcontextcreationerror".split(" "),X=S("unbound"),Y="set",q="clear",Z=["alert","prompt","confirm"],Q="undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global;d(Q,Y,q,"Timeout"),d(Q,Y,q,"Interval"),d(Q,Y,q,"Immediate"),d(Q,"request","cancel","AnimationFrame"),d(Q,"mozRequest","mozCancel","AnimationFrame"),d(Q,"webkitRequest","webkitCancel","AnimationFrame");for(var $=0;$<Z.length;$++){var J=Z[$];h(Q,J,function(e,t,n){return function(t,i){return Zone.current.run(e,Q,i,n)}})}y(Q);var K=Q.XMLHttpRequestEventTarget;K&&K.prototype&&l(K.prototype),w(Q),u("MutationObserver"),u("WebKitMutationObserver"),u("FileReader"),p(),k(Q),M(Q);var ee=S("xhrTask"),te=S("xhrSync"),ne=S("xhrListener"),ie=S("xhrScheduled");Q.navigator&&Q.navigator.geolocation&&t(Q.navigator.geolocation,["getCurrentPosition","watchPosition"]),Q.PromiseRejectionEvent&&(Zone[S("unhandledPromiseRejectionHandler")]=T("unhandledrejection"),Zone[S("rejectionHandledHandler")]=T("rejectionhandled"))}),function(e,t,n,i){"use strict";function r(e,t,n){return setTimeout(u(e,n),t)}function a(e,t,n){return!!Array.isArray(e)&&(o(e,n[t],n),!0)}function o(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==i)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function s(t,n,i){var r="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=e.console&&(e.console.warn||e.console.log);return a&&a.call(e.console,r,i),t.apply(this,arguments)}}function l(e,t,n){var i,r=t.prototype;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&he(i,n)}function u(e,t){return function(){return e.apply(t,arguments)}}function c(e,t){return typeof e==pe?e.apply(t?t[0]||i:i,t):e}function h(e,t){return e===i?t:e}function f(e,t,n){o(m(t),function(t){e.addEventListener(t,n,!1)})}function d(e,t,n){o(m(t),function(t){e.removeEventListener(t,n,!1)})}function p(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function g(e,t){return e.indexOf(t)>-1}function m(e){return e.trim().split(/\s+/g)}function v(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function _(e){return Array.prototype.slice.call(e,0)}function y(e,t,n){for(var i=[],r=[],a=0;a<e.length;){var o=t?e[a][t]:e[a];v(r,o)<0&&i.push(e[a]),r[a]=o,a++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function b(e,t){for(var n,r,a=t[0].toUpperCase()+t.slice(1),o=0;o<fe.length;){if(n=fe[o],r=n?n+a:t,r in e)return r;o++}return i}function w(){return be++}function x(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function E(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){c(e.options.enable,[e])&&n.handler(t)},this.init()}function k(e){var t,n=e.options.inputClass;return new(t=n?n:Ee?U:ke?B:xe?V:I)(e,M)}function M(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,a=t&Ce&&i-r===0,o=t&(Oe|Le)&&i-r===0;n.isFirst=!!a,n.isFinal=!!o,a&&(e.session={}),n.eventType=t,T(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function T(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=R(t)),r>1&&!n.firstMultiple?n.firstMultiple=R(t):1===r&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,s=o?o.center:a.center,l=t.center=C(i);t.timeStamp=ve(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=N(s,l),t.distance=L(s,l),S(n,t),t.offsetDirection=O(t.deltaX,t.deltaY);var u=P(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=me(u.x)>me(u.y)?u.x:u.y,t.scale=o?D(o.pointers,i):1,t.rotation=o?F(o.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,A(n,t);var c=e.element;p(t.srcEvent.target,c)&&(c=t.srcEvent.target),t.target=c}function S(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},a=e.prevInput||{};t.eventType!==Ce&&a.eventType!==Oe||(r=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}function A(e,t){var n,r,a,o,s=e.lastInterval||t,l=t.timeStamp-s.timeStamp;if(t.eventType!=Le&&(l>Re||s.velocity===i)){var u=t.deltaX-s.deltaX,c=t.deltaY-s.deltaY,h=P(l,u,c);r=h.x,a=h.y,n=me(h.x)>me(h.y)?h.x:h.y,o=O(u,c),e.lastInterval=t}else n=s.velocity,r=s.velocityX,a=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=r,t.velocityY=a,t.direction=o}function R(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:ge(e.pointers[n].clientX),clientY:ge(e.pointers[n].clientY)},n++;return{timeStamp:ve(),pointers:t,center:C(t),deltaX:e.deltaX,deltaY:e.deltaY}}function C(e){var t=e.length;if(1===t)return{x:ge(e[0].clientX),y:ge(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:ge(n/t),y:ge(i/t)}}function P(e,t,n){return{x:t/e||0,y:n/e||0}}function O(e,t){return e===t?Ne:me(e)>=me(t)?e<0?Fe:De:t<0?Ie:Ue}function L(e,t,n){n||(n=je);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function N(e,t,n){n||(n=je);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function F(e,t){return N(t[1],t[0],Ve)+N(e[1],e[0],Ve)}function D(e,t){return L(t[0],t[1],Ve)/L(e[0],e[1],Ve)}function I(){this.evEl=We,this.evWin=Xe,this.pressed=!1,E.apply(this,arguments)}function U(){this.evEl=Ze,this.evWin=Qe,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function H(){this.evTarget=Je,this.evWin=Ke,this.started=!1,E.apply(this,arguments)}function z(e,t){var n=_(e.touches),i=_(e.changedTouches);return t&(Oe|Le)&&(n=y(n.concat(i),"identifier",!0)),[n,i]}function B(){this.evTarget=tt,this.targetIds={},E.apply(this,arguments)}function j(e,t){var n=_(e.touches),i=this.targetIds;if(t&(Ce|Pe)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,a,o=_(e.changedTouches),s=[],l=this.target;if(a=n.filter(function(e){return p(e.target,l)}),t===Ce)for(r=0;r<a.length;)i[a[r].identifier]=!0,r++;for(r=0;r<o.length;)i[o[r].identifier]&&s.push(o[r]),t&(Oe|Le)&&delete i[o[r].identifier],r++;return s.length?[y(a.concat(s),"identifier",!0),s]:void 0}function V(){E.apply(this,arguments);var e=u(this.handler,this);this.touch=new B(this.manager,e),this.mouse=new I(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function G(e,t){e&Ce?(this.primaryTouch=t.changedPointers[0].identifier,W.call(this,t)):e&(Oe|Le)&&W.call(this,t)}function W(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)};setTimeout(r,nt)}}function X(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],a=Math.abs(t-r.x),o=Math.abs(n-r.y);if(a<=it&&o<=it)return!0}return!1}function Y(e,t){this.manager=e,this.set(t)}function q(e){if(g(e,ut))return ut;var t=g(e,ct),n=g(e,ht);return t&&n?ut:t||n?t?ct:ht:g(e,lt)?lt:st}function Z(){if(!at)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!n||e.CSS.supports("touch-action",i)}),t}function Q(e){this.options=he({},this.defaults,e||{}),this.id=w(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=dt,this.simultaneous={},this.requireFail=[]}function $(e){return e&_t?"cancel":e&mt?"end":e&gt?"move":e&pt?"start":""}function J(e){return e==Ue?"down":e==Ie?"up":e==Fe?"left":e==De?"right":""}function K(e,t){var n=t.manager;return n?n.get(e):e}function ee(){Q.apply(this,arguments)}function te(){ee.apply(this,arguments),this.pX=null,this.pY=null}function ne(){ee.apply(this,arguments)}function ie(){Q.apply(this,arguments),this._timer=null,this._input=null}function re(){ee.apply(this,arguments)}function ae(){ee.apply(this,arguments)}function oe(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function se(e,t){return t=t||{},t.recognizers=h(t.recognizers,se.defaults.preset),
new le(e,t)}function le(e,t){this.options=he({},se.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=k(this),this.touchAction=new Y(this,this.options.touchAction),ue(this,!0),o(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ue(e,t){var n=e.element;if(n.style){var i;o(e.options.cssProps,function(r,a){i=b(n.style,a),t?(e.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={})}}function ce(e,n){var i=t.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var he,fe=["","webkit","Moz","MS","ms","o"],de=t.createElement("div"),pe="function",ge=Math.round,me=Math.abs,ve=Date.now;he="function"!=typeof Object.assign?function(e){if(e===i||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])}return t}:Object.assign;var _e=s(function(e,t,n){for(var r=Object.keys(t),a=0;a<r.length;)(!n||n&&e[r[a]]===i)&&(e[r[a]]=t[r[a]]),a++;return e},"extend","Use `assign`."),ye=s(function(e,t){return _e(e,t,!0)},"merge","Use `assign`."),be=1,we=/mobile|tablet|ip(ad|hone|od)|android/i,xe="ontouchstart"in e,Ee=b(e,"PointerEvent")!==i,ke=xe&&we.test(navigator.userAgent),Me="touch",Te="pen",Se="mouse",Ae="kinect",Re=25,Ce=1,Pe=2,Oe=4,Le=8,Ne=1,Fe=2,De=4,Ie=8,Ue=16,He=Fe|De,ze=Ie|Ue,Be=He|ze,je=["x","y"],Ve=["clientX","clientY"];E.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(x(this.element),this.evWin,this.domHandler)}};var Ge={mousedown:Ce,mousemove:Pe,mouseup:Oe},We="mousedown",Xe="mousemove mouseup";l(I,E,{handler:function(e){var t=Ge[e.type];t&Ce&&0===e.button&&(this.pressed=!0),t&Pe&&1!==e.which&&(t=Oe),this.pressed&&(t&Oe&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Se,srcEvent:e}))}});var Ye={pointerdown:Ce,pointermove:Pe,pointerup:Oe,pointercancel:Le,pointerout:Le},qe={2:Me,3:Te,4:Se,5:Ae},Ze="pointerdown",Qe="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Ze="MSPointerDown",Qe="MSPointerMove MSPointerUp MSPointerCancel"),l(U,E,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=Ye[i],a=qe[e.pointerType]||e.pointerType,o=a==Me,s=v(t,e.pointerId,"pointerId");r&Ce&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):r&(Oe|Le)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(s,1))}});var $e={touchstart:Ce,touchmove:Pe,touchend:Oe,touchcancel:Le},Je="touchstart",Ke="touchstart touchmove touchend touchcancel";l(H,E,{handler:function(e){var t=$e[e.type];if(t===Ce&&(this.started=!0),this.started){var n=z.call(this,e,t);t&(Oe|Le)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Me,srcEvent:e})}}});var et={touchstart:Ce,touchmove:Pe,touchend:Oe,touchcancel:Le},tt="touchstart touchmove touchend touchcancel";l(B,E,{handler:function(e){var t=et[e.type],n=j.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Me,srcEvent:e})}});var nt=2500,it=25;l(V,E,{handler:function(e,t,n){var i=n.pointerType==Me,r=n.pointerType==Se;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)G.call(this,t,n);else if(r&&X.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var rt=b(de.style,"touchAction"),at=rt!==i,ot="compute",st="auto",lt="manipulation",ut="none",ct="pan-x",ht="pan-y",ft=Z();Y.prototype={set:function(e){e==ot&&(e=this.compute()),at&&this.manager.element.style&&ft[e]&&(this.manager.element.style[rt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return o(this.manager.recognizers,function(t){c(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),q(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,r=g(i,ut)&&!ft[ut],a=g(i,ht)&&!ft[ht],o=g(i,ct)&&!ft[ct];if(r){var s=1===e.pointers.length,l=e.distance<2,u=e.deltaTime<250;if(s&&l&&u)return}return o&&a?void 0:r||a&&n&He||o&&n&ze?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var dt=1,pt=2,gt=4,mt=8,vt=mt,_t=16,yt=32;Q.prototype={defaults:{},set:function(e){return he(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(a(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=K(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return a(e,"dropRecognizeWith",this)?this:(e=K(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(a(e,"requireFailure",this))return this;var t=this.requireFail;return e=K(e,this),v(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(a(e,"dropRequireFailure",this))return this;e=K(e,this);var t=v(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,i=this.state;i<mt&&t(n.options.event+$(i)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),i>=mt&&t(n.options.event+$(i))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=yt)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(yt|dt)))return!1;e++}return!0},recognize:function(e){var t=he({},e);return c(this.options.enable,[this,t])?(this.state&(vt|_t|yt)&&(this.state=dt),this.state=this.process(t),void(this.state&(pt|gt|mt|_t)&&this.tryEmit(t))):(this.reset(),void(this.state=yt))},process:function(e){},getTouchAction:function(){},reset:function(){}},l(ee,Q,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(pt|gt),r=this.attrTest(e);return i&&(n&Le||!r)?t|_t:i||r?n&Oe?t|mt:t&pt?t|gt:pt:yt}}),l(te,ee,{defaults:{event:"pan",threshold:10,pointers:1,direction:Be},getTouchAction:function(){var e=this.options.direction,t=[];return e&He&&t.push(ht),e&ze&&t.push(ct),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,a=e.deltaX,o=e.deltaY;return r&t.direction||(t.direction&He?(r=0===a?Ne:a<0?Fe:De,n=a!=this.pX,i=Math.abs(e.deltaX)):(r=0===o?Ne:o<0?Ie:Ue,n=o!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return ee.prototype.attrTest.call(this,e)&&(this.state&pt||!(this.state&pt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=J(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),l(ne,ee,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ut]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&pt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),l(ie,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[st]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(Oe|Le)&&!a)this.reset();else if(e.eventType&Ce)this.reset(),this._timer=r(function(){this.state=vt,this.tryEmit()},t.time,this);else if(e.eventType&Oe)return vt;return yt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===vt&&(e&&e.eventType&Oe?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ve(),this.manager.emit(this.options.event,this._input)))}}),l(re,ee,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ut]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&pt)}}),l(ae,ee,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:He|ze,pointers:1},getTouchAction:function(){return te.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(He|ze)?t=e.overallVelocity:n&He?t=e.overallVelocityX:n&ze&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&me(t)>this.options.velocity&&e.eventType&Oe},emit:function(e){var t=J(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),l(oe,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[lt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),e.eventType&Ce&&0===this.count)return this.failTimeout();if(i&&a&&n){if(e.eventType!=Oe)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||L(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e;var l=this.count%t.taps;if(0===l)return this.hasRequireFailures()?(this._timer=r(function(){this.state=vt,this.tryEmit()},t.interval,this),pt):vt}return yt},failTimeout:function(){return this._timer=r(function(){this.state=yt},this.options.interval,this),yt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==vt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),se.VERSION="2.0.7",se.defaults={domEvents:!1,touchAction:ot,enable:!0,inputTarget:null,inputClass:null,preset:[[re,{enable:!1}],[ne,{enable:!1},["rotate"]],[ae,{direction:He}],[te,{direction:He},["swipe"]],[oe],[oe,{event:"doubletap",taps:2},["tap"]],[ie]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var bt=1,wt=2;le.prototype={set:function(e){return he(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?wt:bt},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&vt)&&(r=t.curRecognizer=null);for(var a=0;a<i.length;)n=i[a],t.stopped===wt||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(pt|gt|mt)&&(r=t.curRecognizer=n),a++}},get:function(e){if(e instanceof Q)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(a(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(a(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=v(t,e);n!==-1&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==i&&t!==i){var n=this.handlers;return o(m(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==i){var n=this.handlers;return o(m(e),function(e){t?n[e]&&n[e].splice(v(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&ce(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&ue(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},he(se,{INPUT_START:Ce,INPUT_MOVE:Pe,INPUT_END:Oe,INPUT_CANCEL:Le,STATE_POSSIBLE:dt,STATE_BEGAN:pt,STATE_CHANGED:gt,STATE_ENDED:mt,STATE_RECOGNIZED:vt,STATE_CANCELLED:_t,STATE_FAILED:yt,DIRECTION_NONE:Ne,DIRECTION_LEFT:Fe,DIRECTION_RIGHT:De,DIRECTION_UP:Ie,DIRECTION_DOWN:Ue,DIRECTION_HORIZONTAL:He,DIRECTION_VERTICAL:ze,DIRECTION_ALL:Be,Manager:le,Input:E,TouchAction:Y,TouchInput:B,MouseInput:I,PointerEventInput:U,TouchMouseInput:V,SingleTouchInput:H,Recognizer:Q,AttrRecognizer:ee,Tap:oe,Pan:te,Swipe:ae,Pinch:ne,Rotate:re,Press:ie,on:f,off:d,each:o,merge:ye,extend:_e,assign:he,inherit:l,bindFn:u,prefixed:b});var xt="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};xt.Hammer=se,"function"==typeof define&&define.amd?define(function(){return se}):"undefined"!=typeof module&&module.exports?module.exports=se:e[n]=se}(window,document,"Hammer"),function(){var e=window.MutationObserver||window.WebKitMutationObserver,t="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,n=void 0!==document.documentElement.style["touch-action"]||document.documentElement.style["-ms-touch-action"];if(!n&&t&&e){window.Hammer=window.Hammer||{};var i=/touch-action[:][\s]*(none)[^;'"]*/,r=/touch-action[:][\s]*(manipulation)[^;'"]*/,a=/touch-action/,o=/(iP(ad|hone|od))/.test(navigator.userAgent)&&("indexedDB"in window||!!window.performance);window.Hammer.time={getTouchAction:function(e){return this.checkStyleString(e.getAttribute("style"))},checkStyleString:function(e){if(a.test(e))return i.test(e)?"none":!r.test(e)||"manipulation"},shouldHammer:function(e){var t=e.target.hasParent;return!(!t||o&&!(Date.now()-e.target.lastStart<125))&&t},touchHandler:function(e){var t=this.shouldHammer(e);if("none"===t)this.dropHammer(e);else if("manipulation"===t){var n=e.target.getBoundingClientRect(),i=n.top!==this.pos.top||n.left!==this.pos.left;!i&&this.dropHammer(e)}this.scrolled=!1,delete e.target.lastStart,delete e.target.hasParent},dropHammer:function(e){"touchend"===e.type&&(e.target.focus(),setTimeout(function(){e.target.click()},0)),e.preventDefault()},touchStart:function(e){this.pos=e.target.getBoundingClientRect(),e.target.hasParent=this.hasParent(e.target),o&&e.target.hasParent&&(e.target.lastStart=Date.now())},styleWatcher:function(e){e.forEach(this.styleUpdater,this)},styleUpdater:function(e){if(e.target.updateNext)return void(e.target.updateNext=!1);var t=this.getTouchAction(e.target);return t?void("none"!==t&&(e.target.hadTouchNone=!1)):void(!t&&(e.oldValue&&this.checkStyleString(e.oldValue)||e.target.hadTouchNone)&&(e.target.hadTouchNone=!0,e.target.updateNext=!1,e.target.setAttribute("style",e.target.getAttribute("style")+" touch-action: none;")))},hasParent:function(e){for(var t,n=e;n&&n.parentNode;n=n.parentNode)if(t=this.getTouchAction(n))return t;return!1},installStartEvents:function(){document.addEventListener("touchstart",this.touchStart.bind(this)),document.addEventListener("mousedown",this.touchStart.bind(this))},installEndEvents:function(){document.addEventListener("touchend",this.touchHandler.bind(this),!0),document.addEventListener("mouseup",this.touchHandler.bind(this),!0)},installObserver:function(){this.observer=new e(this.styleWatcher.bind(this)).observe(document,{subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})},install:function(){this.installEndEvents(),this.installStartEvents(),this.installObserver()}},window.Hammer.time.install()}}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.THREE={})}(this,function(e){"use strict";function t(){}function n(e,t){this.x=e||0,this.y=t||0}function i(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function r(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}function a(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function o(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function s(e,t,i,r,a,l,u,c,h,f){Object.defineProperty(this,"id",{value:Tl++}),this.uuid=Ml.generateUUID(),this.name="",this.image=void 0!==e?e:s.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:s.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:os,this.wrapT=void 0!==r?r:os,this.magFilter=void 0!==a?a:hs,this.minFilter=void 0!==l?l:ds,this.anisotropy=void 0!==h?h:1,this.format=void 0!==u?u:As,this.type=void 0!==c?c:ps,this.offset=new n(0,0),this.repeat=new n(1,1),this.center=new n(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new o,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:gl,this.version=0,this.onUpdate=null}function l(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function u(e,t,n){this.uuid=Ml.generateUUID(),this.width=e,this.height=t,this.scissor=new l(0,0,e,t),this.scissorTest=!1,this.viewport=new l(0,0,e,t),n=n||{},void 0===n.minFilter&&(n.minFilter=hs),this.texture=new s((void 0),(void 0),n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function c(e,t,n){u.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function h(e,t,n,i,r,a,o,l,u,c,h,f){s.call(this,null,a,o,l,u,c,i,r,h,f),this.image={data:e,width:t,height:n},this.magFilter=void 0!==u?u:ls,this.minFilter=void 0!==c?c:ls,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function f(e,t,n,i,r,a,o,l,u,c){e=void 0!==e?e:[],t=void 0!==t?t:Jo,s.call(this,e,t,n,i,r,a,o,l,u,c),this.flipY=!1}function d(){this.seq=[],this.map={}}function p(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,a=Rl[r];if(void 0===a&&(a=new Float32Array(r),Rl[r]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function g(e,t){var n=Cl[t];void 0===n&&(n=new Int32Array(t),Cl[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocTextureUnit();return n}function m(e,t){e.uniform1f(this.addr,t)}function v(e,t){e.uniform1i(this.addr,t)}function _(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function y(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function b(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function w(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function x(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Ol.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Ol))}function E(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(Pl.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Pl))}function k(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTexture2D(t||Sl,i)}function M(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTextureCube(t||Al,i)}function T(e,t){e.uniform2iv(this.addr,t)}function S(e,t){e.uniform3iv(this.addr,t)}function A(e,t){e.uniform4iv(this.addr,t)}function R(e){switch(e){case 5126:return m;case 35664:return _;case 35665:return y;case 35666:return b;case 35674:return w;case 35675:return x;case 35676:return E;case 35678:case 36198:return k;case 35680:return M;case 5124:case 35670:return v;case 35667:case 35671:return T;case 35668:case 35672:return S;case 35669:case 35673:return A}}function C(e,t){e.uniform1fv(this.addr,t)}function P(e,t){e.uniform1iv(this.addr,t)}function O(e,t){e.uniform2fv(this.addr,p(t,this.size,2))}function L(e,t){e.uniform3fv(this.addr,p(t,this.size,3))}function N(e,t){e.uniform4fv(this.addr,p(t,this.size,4))}function F(e,t){e.uniformMatrix2fv(this.addr,!1,p(t,this.size,4))}function D(e,t){e.uniformMatrix3fv(this.addr,!1,p(t,this.size,9))}function I(e,t){e.uniformMatrix4fv(this.addr,!1,p(t,this.size,16))}function U(e,t,n){var i=t.length,r=g(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture2D(t[a]||Sl,r[a])}function H(e,t,n){var i=t.length,r=g(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTextureCube(t[a]||Al,r[a])}function z(e){switch(e){case 5126:return C;case 35664:return O;case 35665:return L;case 35666:return N;case 35674:return F;case 35675:return D;case 35676:return I;case 35678:return U;case 35680:return H;case 5124:case 35670:return P;case 35667:case 35671:return T;case 35668:case 35672:return S;case 35669:case 35673:return A}}function B(e,t,n){this.id=e,this.addr=n,this.setValue=R(t.type)}function j(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=z(t.type)}function V(e){this.id=e,d.call(this)}function G(e,t){e.seq.push(t),e.map[t.id]=t}function W(e,t,n){var i=e.name,r=i.length;for(Ll.lastIndex=0;;){var a=Ll.exec(i),o=Ll.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s=0|s),void 0===u||"["===u&&o+2===r){G(n,void 0===u?new B(s,e,t):new j(s,e,t));break}var c=n.map,h=c[s];void 0===h&&(h=new V(s),G(n,h)),n=h}}function X(e,t,n){d.call(this),this.renderer=n;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;++r){var a=e.getActiveUniform(t,r),o=a.name,s=e.getUniformLocation(t,o);W(a,s,this)}}function Y(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function q(e,t,n,i,r,a,o,l,u){s.call(this,e,t,n,i,r,a,o,l,u),this.needsUpdate=!0}function Z(e,t,n,i,o){function s(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);c=t.createBuffer(),h=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),f=l(),d={position:t.getAttribLocation(f,"position"),uv:t.getAttribLocation(f,"uv")},p={uvOffset:t.getUniformLocation(f,"uvOffset"),uvScale:t.getUniformLocation(f,"uvScale"),rotation:t.getUniformLocation(f,"rotation"),center:t.getUniformLocation(f,"center"),scale:t.getUniformLocation(f,"scale"),color:t.getUniformLocation(f,"color"),map:t.getUniformLocation(f,"map"),opacity:t.getUniformLocation(f,"opacity"),modelViewMatrix:t.getUniformLocation(f,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(f,"projectionMatrix"),fogType:t.getUniformLocation(f,"fogType"),fogDensity:t.getUniformLocation(f,"fogDensity"),fogNear:t.getUniformLocation(f,"fogNear"),fogFar:t.getUniformLocation(f,"fogFar"),fogColor:t.getUniformLocation(f,"fogColor"),fogDepth:t.getUniformLocation(f,"fogDepth"),alphaTest:t.getUniformLocation(f,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var r=i.getContext("2d");r.fillStyle="white",r.fillRect(0,0,8,8),g=new q(i)}function l(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,["precision "+o.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(i,["precision "+o.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(n),t.compileShader(i),t.attachShader(e,n),t.attachShader(e,i),t.linkProgram(e),e}function u(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var c,h,f,d,p,g,m=new a,v=new r,_=new a;this.render=function(r,a,o){if(0!==r.length){void 0===f&&s(),n.useProgram(f),n.initAttributes(),n.enableAttribute(d.position),n.enableAttribute(d.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,c),t.vertexAttribPointer(d.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(d.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h),t.uniformMatrix4fv(p.projectionMatrix,!1,o.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(p.map,0);var l=0,y=0,b=a.fog;b?(t.uniform3f(p.fogColor,b.color.r,b.color.g,b.color.b),b.isFog?(t.uniform1f(p.fogNear,b.near),t.uniform1f(p.fogFar,b.far),t.uniform1i(p.fogType,1),l=1,y=1):b.isFogExp2&&(t.uniform1f(p.fogDensity,b.density),t.uniform1i(p.fogType,2),l=2,y=2)):(t.uniform1i(p.fogType,0),l=0,y=0);for(var w=0,x=r.length;w<x;w++){var E=r[w];E.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}r.sort(u);for(var k=[],M=[],w=0,x=r.length;w<x;w++){var E=r[w],T=E.material;if(T.visible!==!1){E.onBeforeRender(e,a,o,void 0,T,void 0),t.uniform1f(p.alphaTest,T.alphaTest),t.uniformMatrix4fv(p.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(m,v,_),k[0]=_.x,k[1]=_.y,M[0]=E.center.x-.5,M[1]=E.center.y-.5;var S=0;a.fog&&T.fog&&(S=y),l!==S&&(t.uniform1i(p.fogType,S),l=S),null!==T.map?(t.uniform2f(p.uvOffset,T.map.offset.x,T.map.offset.y),t.uniform2f(p.uvScale,T.map.repeat.x,T.map.repeat.y)):(t.uniform2f(p.uvOffset,0,0),t.uniform2f(p.uvScale,1,1)),t.uniform1f(p.opacity,T.opacity),t.uniform3f(p.color,T.color.r,T.color.g,T.color.b),t.uniform1f(p.rotation,T.rotation),t.uniform2fv(p.center,M),t.uniform2fv(p.scale,k),n.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst,T.blendEquationAlpha,T.blendSrcAlpha,T.blendDstAlpha,T.premultipliedAlpha),n.buffers.depth.setTest(T.depthTest),n.buffers.depth.setMask(T.depthWrite),n.buffers.color.setMask(T.colorWrite),i.setTexture2D(T.map||g,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),E.onAfterRender(e,a,o,void 0,T,void 0)}}n.enable(t.CULL_FACE),n.reset()}}}function Q(){Object.defineProperty(this,"id",{value:zc++}),this.uuid=Ml.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=po,this.side=ro,this.flatShading=!1,this.vertexColors=uo,this.opacity=1,this.transparent=!1,this.blendSrc=Ao,this.blendDst=Ro,this.blendEquation=yo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Uo,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function $(e){Q.call(this),this.type="MeshDepthMaterial",this.depthPacking=El,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function J(e){Q.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new a,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function K(e,t){this.min=void 0!==e?e:new a((+(1/0)),(+(1/0)),(+(1/0))),this.max=void 0!==t?t:new a((-(1/0)),(-(1/0)),(-(1/0)))}function ee(e,t){this.center=void 0!==e?e:new a,this.radius=void 0!==t?t:0}function te(e,t){this.normal=void 0!==e?e:new a(1,0,0),this.constant=void 0!==t?t:0}function ne(e,t,n,i,r,a){this.planes=[void 0!==e?e:new te,void 0!==t?t:new te,void 0!==n?n:new te,void 0!==i?i:new te,void 0!==r?r:new te,void 0!==a?a:new te]}function ie(e,t,r){function o(t,n,i,r,a,o){var s=t.geometry,l=null,u=y,c=t.customDepthMaterial;if(i&&(u=b,c=t.customDistanceMaterial),c)l=c;else{var h=!1;n.morphTargets&&(s&&s.isBufferGeometry?h=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(h=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&n.skinning===!1&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var f=t.isSkinnedMesh&&n.skinning,d=0;h&&(d|=m),f&&(d|=v),l=u[d]}if(e.localClippingEnabled&&n.clipShadows===!0&&0!==n.clippingPlanes.length){var p=l.uuid,g=n.uuid,_=w[p];void 0===_&&(_={},w[p]=_);var E=_[g];void 0===E&&(E=l.clone(),_[g]=E),l=E}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:x[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,i&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=a,l.farDistance=o),l}function s(n,i,r,a){if(n.visible!==!1){var l=n.layers.test(i.layers);if(l&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||c.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,n.matrixWorld);var u=t.update(n),h=n.material;if(Array.isArray(h))for(var f=u.groups,d=0,p=f.length;d<p;d++){var m=f[d],v=h[m.materialIndex];if(v&&v.visible){var _=o(n,v,a,g,r.near,r.far);e.renderBufferDirect(r,null,u,_,n,m)}}else if(h.visible){var _=o(n,h,a,g,r.near,r.far);e.renderBufferDirect(r,null,u,_,n,null)}}for(var y=n.children,b=0,w=y.length;b<w;b++)s(y[b],i,r,a)}}for(var c=new ne,h=new i,f=new n,d=new n(r,r),p=new a,g=new a,m=1,v=2,_=(m|v)+1,y=new Array(_),b=new Array(_),w={},x={0:ao,1:ro,2:oo},E=[new a(1,0,0),new a((-1),0,0),new a(0,0,1),new a(0,0,(-1)),new a(0,1,0),new a(0,(-1),0)],k=[new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,0,1),new a(0,0,(-1))],M=[new l,new l,new l,new l,new l,new l],T=0;T!==_;++T){var S=0!==(T&m),A=0!==(T&v),R=new $({depthPacking:kl,morphTargets:S,skinning:A});y[T]=R;var C=new J({morphTargets:S,skinning:A});b[T]=C}var P=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=no,this.render=function(t,n,i){if(P.enabled!==!1&&(P.autoUpdate!==!1||P.needsUpdate!==!1)&&0!==t.length){var r=e.context,a=e.state;a.disable(r.BLEND),a.buffers.color.setClear(1,1,1,1),a.buffers.depth.setTest(!0),a.setScissorTest(!1);for(var o,l=0,m=t.length;l<m;l++){var v=t[l],_=v.shadow,y=v&&v.isPointLight;if(void 0!==_){
var b=_.camera;if(f.copy(_.mapSize),f.min(d),y){var w=f.x,x=f.y;M[0].set(2*w,x,w,x),M[1].set(0,x,w,x),M[2].set(3*w,x,w,x),M[3].set(w,x,w,x),M[4].set(3*w,0,w,x),M[5].set(w,0,w,x),f.x*=4,f.y*=2}if(null===_.map){var T={minFilter:ls,magFilter:ls,format:As};_.map=new u(f.x,f.y,T),_.map.texture.name=v.name+".shadowMap",b.updateProjectionMatrix()}_.isSpotLightShadow&&_.update(v);var S=_.map,A=_.matrix;g.setFromMatrixPosition(v.matrixWorld),b.position.copy(g),y?(o=6,A.makeTranslation(-g.x,-g.y,-g.z)):(o=1,p.setFromMatrixPosition(v.target.matrixWorld),b.lookAt(p),b.updateMatrixWorld(),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(b.projectionMatrix),A.multiply(b.matrixWorldInverse)),e.setRenderTarget(S),e.clear();for(var R=0;R<o;R++){if(y){p.copy(b.position),p.add(E[R]),b.up.copy(k[R]),b.lookAt(p),b.updateMatrixWorld();var C=M[R];a.viewport(C)}h.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),c.setFromMatrix(h),s(n,i,b,y)}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}P.needsUpdate=!1}}}function re(e){function t(t,n){var i=t.array,r=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,i,r),t.onUploadCallback();var o=e.FLOAT;return i instanceof Float32Array?o=e.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=e.UNSIGNED_SHORT:i instanceof Int16Array?o=e.SHORT:i instanceof Uint32Array?o=e.UNSIGNED_INT:i instanceof Int32Array?o=e.INT:i instanceof Int8Array?o=e.BYTE:i instanceof Uint8Array&&(o=e.UNSIGNED_BYTE),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}function n(t,n,i){var r=n.array,a=n.updateRange;e.bindBuffer(i,t),n.dynamic===!1?e.bufferData(i,r,e.STATIC_DRAW):a.count===-1?e.bufferSubData(i,0,r):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1)}function i(e){return e.isInterleavedBufferAttribute&&(e=e.data),o[e.uuid]}function r(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=o[t.uuid];n&&(e.deleteBuffer(n.buffer),delete o[t.uuid])}function a(e,i){e.isInterleavedBufferAttribute&&(e=e.data);var r=o[e.uuid];void 0===r?o[e.uuid]=t(e,i):r.version<e.version&&(n(r.buffer,e,i),r.version=e.version)}var o={};return{get:i,remove:r,update:a}}function ae(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||ae.DefaultOrder}function oe(){this.mask=1}function se(){function e(){l.setFromEuler(s,!1)}function t(){s.setFromQuaternion(l,void 0,!1)}Object.defineProperty(this,"id",{value:Bc++}),this.uuid=Ml.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=se.DefaultUp.clone();var n=new a,s=new ae,l=new r,u=new a(1,1,1);s.onChange(e),l.onChange(t),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:s},quaternion:{enumerable:!0,value:l},scale:{enumerable:!0,value:u},modelViewMatrix:{value:new i},normalMatrix:{value:new o}}),this.matrix=new i,this.matrixWorld=new i,this.matrixAutoUpdate=se.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new oe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function le(){se.call(this),this.type="Camera",this.matrixWorldInverse=new i,this.projectionMatrix=new i}function ue(e,t,n,i,r,a){le.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function ce(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new a,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new Y,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}function he(){Object.defineProperty(this,"id",{value:jc+=2}),this.uuid=Ml.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function fe(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Ml.generateUUID(),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function de(e,t,n){fe.call(this,new Int8Array(e),t,n)}function pe(e,t,n){fe.call(this,new Uint8Array(e),t,n)}function ge(e,t,n){fe.call(this,new Uint8ClampedArray(e),t,n)}function me(e,t,n){fe.call(this,new Int16Array(e),t,n)}function ve(e,t,n){fe.call(this,new Uint16Array(e),t,n)}function _e(e,t,n){fe.call(this,new Int32Array(e),t,n)}function ye(e,t,n){fe.call(this,new Uint32Array(e),t,n)}function be(e,t,n){fe.call(this,new Float32Array(e),t,n)}function we(e,t,n){fe.call(this,new Float64Array(e),t,n)}function xe(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ee(e){if(0===e.length)return-(1/0);for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}function ke(){Object.defineProperty(this,"id",{value:Vc+=2}),this.uuid=Ml.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Me(e,t,n,i,r,a){he.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new Te(e,t,n,i,r,a)),this.mergeVertices()}function Te(e,t,n,i,r,o){function s(e,t,n,i,r,o,s,g,m,v,_){var y,b,w=o/m,x=s/v,E=o/2,k=s/2,M=g/2,T=m+1,S=v+1,A=0,R=0,C=new a;for(b=0;b<S;b++){var P=b*x-k;for(y=0;y<T;y++){var O=y*w-E;C[e]=O*i,C[t]=P*r,C[n]=M,c.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=g>0?1:-1,h.push(C.x,C.y,C.z),f.push(y/m),f.push(1-b/v),A+=1}}for(b=0;b<v;b++)for(y=0;y<m;y++){var L=d+y+T*b,N=d+y+T*(b+1),F=d+(y+1)+T*(b+1),D=d+(y+1)+T*b;u.push(L,N,D),u.push(N,F,D),R+=6}l.addGroup(p,R,_),p+=R,d+=A}ke.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};var l=this;e=e||1,t=t||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,o=Math.floor(o)||1;var u=[],c=[],h=[],f=[],d=0,p=0;s("z","y","x",-1,-1,n,t,e,o,r,0),s("z","y","x",1,-1,n,t,-e,o,r,1),s("x","z","y",1,1,e,n,t,i,o,2),s("x","z","y",1,-1,e,n,-t,i,o,3),s("x","y","z",1,-1,e,t,n,i,r,4),s("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(u),this.addAttribute("position",new be(c,3)),this.addAttribute("normal",new be(h,3)),this.addAttribute("uv",new be(f,2))}function Se(e,t,n,i){he.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Ae(e,t,n,i)),this.mergeVertices()}function Ae(e,t,n,i){ke.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},e=e||1,t=t||1;var r,a,o=e/2,s=t/2,l=Math.floor(n)||1,u=Math.floor(i)||1,c=l+1,h=u+1,f=e/l,d=t/u,p=[],g=[],m=[],v=[];for(a=0;a<h;a++){var _=a*d-s;for(r=0;r<c;r++){var y=r*f-o;g.push(y,-_,0),m.push(0,0,1),v.push(r/l),v.push(1-a/u)}}for(a=0;a<u;a++)for(r=0;r<l;r++){var b=r+c*a,w=r+c*(a+1),x=r+1+c*(a+1),E=r+1+c*a;p.push(b,w,E),p.push(w,x,E)}this.setIndex(p),this.addAttribute("position",new be(g,3)),this.addAttribute("normal",new be(m,3)),this.addAttribute("uv",new be(v,2))}function Re(e){Q.call(this),this.type="MeshBasicMaterial",this.color=new Y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Vo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Ce(e){Q.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Pe(e,t){this.origin=void 0!==e?e:new a,this.direction=void 0!==t?t:new a}function Oe(e,t){this.start=void 0!==e?e:new a,this.end=void 0!==t?t:new a}function Le(e,t,n){this.a=void 0!==e?e:new a,this.b=void 0!==t?t:new a,this.c=void 0!==n?n:new a}function Ne(e,t){se.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new ke,this.material=void 0!==t?t:new Re({color:16777215*Math.random()}),this.drawMode=fl,this.updateMorphTargets()}function Fe(e,t,n,i){function r(t,i,r,h){var f=i.background;null===f?a(u,c):f&&f.isColor&&(a(f,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&f.isCubeTexture?(void 0===l&&(l=new Ne(new Te(1,1,1),new Ce({uniforms:Hc.cube.uniforms,vertexShader:Hc.cube.vertexShader,fragmentShader:Hc.cube.fragmentShader,side:ao,depthTest:!0,depthWrite:!1,fog:!1})),l.geometry.removeAttribute("normal"),l.geometry.removeAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(l.geometry)),l.material.uniforms.tCube.value=f,t.push(l,l.geometry,l.material,0,null)):f&&f.isTexture&&(void 0===o&&(o=new ue((-1),1,1,(-1),0,1),s=new Ne(new Ae(2,2),new Re({depthTest:!1,depthWrite:!1,fog:!1})),n.update(s.geometry)),s.material.map=f,e.renderBufferDirect(o,null,s.geometry,s.material,s,null))}function a(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}var o,s,l,u=new Y(0),c=0;return{getClearColor:function(){return u},setClearColor:function(e,t){u.set(e),c=void 0!==t?t:1,a(u,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,a(u,c)},render:r}}function De(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ie(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ue(){function e(){r=0,a.length=0,o.length=0}function t(e,t,n,s,l){var u=i[r];void 0===u?(u={id:e.id,object:e,geometry:t,material:n,program:n.program,renderOrder:e.renderOrder,z:s,group:l},i[r]=u):(u.id=e.id,u.object=e,u.geometry=t,u.material=n,u.program=n.program,u.renderOrder=e.renderOrder,u.z=s,u.group=l),(n.transparent===!0?o:a).push(u),r++}function n(){a.length>1&&a.sort(De),o.length>1&&o.sort(Ie)}var i=[],r=0,a=[],o=[];return{opaque:a,transparent:o,init:e,push:t,sort:n}}function He(){function e(e,t){var i=e.id+","+t.id,r=n[i];return void 0===r&&(r=new Ue,n[i]=r),r}function t(){n={}}var n={};return{get:e,dispose:t}}function ze(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Be(e){function t(t,r,a,o){var s=t.morphTargetInfluences,l=s.length,u=n[r.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];n[r.id]=u}for(var h=a.morphTargets&&r.morphAttributes.position,f=a.morphNormals&&r.morphAttributes.normal,c=0;c<l;c++){var d=u[c];0!==d[1]&&(h&&r.removeAttribute("morphTarget"+c),f&&r.removeAttribute("morphNormal"+c))}for(var c=0;c<l;c++){var d=u[c];d[0]=c,d[1]=s[c]}u.sort(ze);for(var c=0;c<8;c++){var d=u[c];if(d){var p=d[0],g=d[1];if(g){h&&r.addAttribute("morphTarget"+c,h[p]),f&&r.addAttribute("morphNormal"+c,f[p]),i[c]=g;continue}}i[c]=0}o.getUniforms().setValue(e,"morphTargetInfluences",i)}var n={},i=new Float32Array(8);return{update:t}}function je(e,t,n){function i(e){s=e}function r(e){l=e.type,u=e.bytesPerElement}function a(t,i){e.drawElements(s,i,l,t*u),n.calls++,n.vertices+=i,s===e.TRIANGLES?n.faces+=i/3:s===e.POINTS&&(n.points+=i)}function o(i,r,a){var o=t.get("ANGLE_instanced_arrays");return null===o?void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(o.drawElementsInstancedANGLE(s,a,l,r*u,i.maxInstancedCount),n.calls++,n.vertices+=a*i.maxInstancedCount,void(s===e.TRIANGLES?n.faces+=i.maxInstancedCount*a/3:s===e.POINTS&&(n.points+=i.maxInstancedCount*a)))}var s,l,u;this.setMode=i,this.setIndex=r,this.render=a,this.renderInstances=o}function Ve(e,t,n){function i(e){o=e}function r(t,i){e.drawArrays(o,t,i),n.calls++,n.vertices+=i,o===e.TRIANGLES?n.faces+=i/3:o===e.POINTS&&(n.points+=i)}function a(i,r,a){var s=t.get("ANGLE_instanced_arrays");if(null===s)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var l=i.attributes.position;l.isInterleavedBufferAttribute?(a=l.data.count,s.drawArraysInstancedANGLE(o,0,a,i.maxInstancedCount)):s.drawArraysInstancedANGLE(o,r,a,i.maxInstancedCount),n.calls++,n.vertices+=a*i.maxInstancedCount,o===e.TRIANGLES?n.faces+=i.maxInstancedCount*a/3:o===e.POINTS&&(n.points+=i.maxInstancedCount*a)}var o;this.setMode=i,this.render=r,this.renderInstances=a}function Ge(e,t,n){function i(e){var r=e.target,a=s[r.id];null!==a.index&&t.remove(a.index);for(var o in a.attributes)t.remove(a.attributes[o]);r.removeEventListener("dispose",i),delete s[r.id];var u=l[r.id];u&&(t.remove(u),delete l[r.id]),u=l[a.id],u&&(t.remove(u),delete l[a.id]),n.geometries--}function r(e,t){var r=s[t.id];return r?r:(t.addEventListener("dispose",i),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new ke).setFromObject(e)),r=t._bufferGeometry),s[t.id]=r,n.geometries++,r)}function a(n){var i=n.index,r=n.attributes;null!==i&&t.update(i,e.ELEMENT_ARRAY_BUFFER);for(var a in r)t.update(r[a],e.ARRAY_BUFFER);var o=n.morphAttributes;for(var a in o)for(var s=o[a],l=0,u=s.length;l<u;l++)t.update(s[l],e.ARRAY_BUFFER)}function o(n){var i=l[n.id];if(i)return i;var r=[],a=n.index,o=n.attributes;if(null!==a)for(var s=a.array,u=0,c=s.length;u<c;u+=3){var h=s[u+0],f=s[u+1],d=s[u+2];r.push(h,f,f,d,d,h)}else for(var s=o.position.array,u=0,c=s.length/3-1;u<c;u+=3){var h=u+0,f=u+1,d=u+2;r.push(h,f,f,d,d,h)}return i=new(Ee(r)>65535?ye:ve)(r,1),t.update(i,e.ELEMENT_ARRAY_BUFFER),l[n.id]=i,i}var s={},l={};return{get:r,update:a,getWireframeAttribute:o}}function We(e,t){function n(n){var i=t.frame,a=n.geometry,o=e.get(n,a);return r[o.id]!==i&&(a.isGeometry&&o.updateFromObject(n),e.update(o),r[o.id]=i),o}function i(){r={}}var r={};return{update:n,dispose:i}}function Xe(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function Ye(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),Xe(n)),i}function qe(e){switch(e){case gl:return["Linear","( value )"];case ml:return["sRGB","( value )"];case _l:return["RGBE","( value )"];case bl:return["RGBM","( value, 7.0 )"];case wl:return["RGBM","( value, 16.0 )"];case xl:return["RGBD","( value, 256.0 )"];case vl:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Ze(e,t){var n=qe(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Qe(e,t){var n=qe(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function $e(e,t){var n;switch(t){case Yo:n="Linear";break;case qo:n="Reinhard";break;case Zo:n="Uncharted2";break;case Qo:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Je(e,t,n){e=e||{};var i=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return i.filter(tt).join("\n")}function Ke(e){var t=[];for(var n in e){var i=e[n];i!==!1&&t.push("#define "+n+" "+i)}return t.join("\n")}function et(e,t){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var a=e.getActiveAttrib(t,r),o=a.name;n[o]=e.getAttribLocation(t,o)}return n}function tt(e){return""!==e}function nt(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function it(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function rt(e){function t(e,t){var n=Uc[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return rt(n)}var n=/^[ \t]*#include +<([\w\d.]+)>/gm;return e.replace(n,t)}function at(e){function t(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]");return r}var n=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(n,t)}function ot(e,t,n,i,r,a){var o=e.context,s=i.defines,l=r.vertexShader,u=r.fragmentShader,c="SHADOWMAP_TYPE_BASIC";a.shadowMapType===no?c="SHADOWMAP_TYPE_PCF":a.shadowMapType===io&&(c="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(i.envMap.mapping){case Jo:case Ko:h="ENVMAP_TYPE_CUBE";break;case is:case rs:h="ENVMAP_TYPE_CUBE_UV";break;case es:case ts:h="ENVMAP_TYPE_EQUIREC";break;case ns:h="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case Ko:case ts:f="ENVMAP_MODE_REFRACTION"}switch(i.combine){case Vo:d="ENVMAP_BLENDING_MULTIPLY";break;case Go:d="ENVMAP_BLENDING_MIX";break;case Wo:d="ENVMAP_BLENDING_ADD"}}var p,g,m=e.gammaFactor>0?e.gammaFactor:1,v=Je(i.extensions,a,t),_=Ke(s),y=o.createProgram();i.isRawShaderMaterial?(p=[_].filter(tt).join("\n"),p.length>0&&(p+="\n"),g=[v,_].filter(tt).join("\n"),g.length>0&&(g+="\n")):(p=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,_,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===!1?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+c:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(tt).join("\n"),g=[v,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,_,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"","#define GAMMA_FACTOR "+m,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+h:"",a.envMap?"#define "+f:"",a.envMap?"#define "+d:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+c:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==Xo?"#define TONE_MAPPING":"",a.toneMapping!==Xo?Uc.tonemapping_pars_fragment:"",a.toneMapping!==Xo?$e("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Uc.encodings_pars_fragment:"",a.mapEncoding?Ze("mapTexelToLinear",a.mapEncoding):"",a.envMapEncoding?Ze("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Ze("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?Qe("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(tt).join("\n")),l=rt(l),l=nt(l,a),l=it(l,a),u=rt(u),u=nt(u,a),u=it(u,a),l=at(l),u=at(u);var b=p+l,w=g+u,x=Ye(o,o.VERTEX_SHADER,b),E=Ye(o,o.FRAGMENT_SHADER,w);o.attachShader(y,x),o.attachShader(y,E),void 0!==i.index0AttributeName?o.bindAttribLocation(y,0,i.index0AttributeName):a.morphTargets===!0&&o.bindAttribLocation(y,0,"position"),o.linkProgram(y);var k=o.getProgramInfoLog(y).trim(),M=o.getShaderInfoLog(x).trim(),T=o.getShaderInfoLog(E).trim(),S=!0,A=!0;o.getProgramParameter(y,o.LINK_STATUS)===!1?(S=!1,console.error("THREE.WebGLProgram: shader error: ",o.getError(),"gl.VALIDATE_STATUS",o.getProgramParameter(y,o.VALIDATE_STATUS),"gl.getProgramInfoLog",k,M,T)):""!==k?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",k):""!==M&&""!==T||(A=!1),A&&(this.diagnostics={runnable:S,material:i,programLog:k,vertexShader:{log:M,prefix:p},fragmentShader:{log:T,prefix:g}}),o.deleteShader(x),o.deleteShader(E);var R;this.getUniforms=function(){return void 0===R&&(R=new X(o,y,e)),R};var C;return this.getAttributes=function(){return void 0===C&&(C=et(o,y)),C},this.destroy=function(){o.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Gc++,this.code=n,this.usedTimes=1,this.program=y,this.vertexShader=x,this.fragmentShader=E,this}function st(e,t,n){function i(e){var t=e.skeleton,i=t.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,a=Math.floor((r-20)/4),o=Math.min(a,i.length);return o<i.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+i.length+" bones. This GPU supports "+o+"."),0):o}function r(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=gl,n===gl&&t&&(n=vl),n}var a=[],o={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(t,a,s,l,u,c,h){var f=o[t.type],d=h.isSkinnedMesh?i(h):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision),p!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead."));var g=e.getRenderTarget(),m={shaderID:f,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:r(g?g.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:r(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:r(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===is||t.envMap.mapping===rs),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:r(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!l,useFog:t.fog,fogExp:l&&l.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numClippingPlanes:u,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&s.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===oo,flipSided:t.side===ao,depthPacking:void 0!==t.depthPacking&&t.depthPacking};return m},this.getProgramCode=function(t,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);for(var a=0;a<s.length;a++)i.push(n[s[a]]);return i.push(t.onBeforeCompile.toString()),i.push(e.gammaOutput),i.join()},this.acquireProgram=function(n,i,r,o){for(var s,l=0,u=a.length;l<u;l++){var c=a[l];if(c.code===o){s=c,++s.usedTimes;break}}return void 0===s&&(s=new ot(e,t,o,n,i,r),a.push(s)),s},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=a.indexOf(e);a[t]=a[a.length-1],a.pop(),e.destroy()}},this.programs=a}function lt(e,t,n,i,r,a,o,s){function l(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=Math.floor(e.width*n),i.height=Math.floor(e.height*n);var r=i.getContext("2d");return r.drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function u(e){return Ml.isPowerOfTwo(e.width)&&Ml.isPowerOfTwo(e.height)}function c(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap){void 0===C&&(C=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),C.width=Ml.floorPowerOfTwo(e.width),C.height=Ml.floorPowerOfTwo(e.height);var t=C.getContext("2d");return t.drawImage(e,0,0,C.width,C.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+C.width+"x"+C.height,e),C}return e}function h(e){return e.wrapS!==os||e.wrapT!==os||e.minFilter!==ls&&e.minFilter!==hs}function f(e,t){return e.generateMipmaps&&t&&e.minFilter!==ls&&e.minFilter!==hs}function d(t){return t===ls||t===us||t===cs?e.NEAREST:e.LINEAR}function p(e){var t=e.target;t.removeEventListener("dispose",p),m(t),t.isVideoTexture&&delete O[t.id],o.textures--}function g(e){var t=e.target;t.removeEventListener("dispose",g),v(t),o.textures--}function m(t){var n=i.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}i.remove(t)}function v(t){var n=i.get(t),r=i.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[a]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}}function _(t,r){var a=i.get(t);if(t.isVideoTexture&&R(t),t.version>0&&a.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(o.complete!==!1)return void x(a,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t);
}}n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_2D,a.__webglTexture)}function y(t,s){var c=i.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",p),c.__image__webglTextureCube=e.createTexture(),o.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var h=t&&t.isCompressedTexture,d=t.image[0]&&t.image[0].isDataTexture,g=[],m=0;m<6;m++)h||d?g[m]=d?t.image[m].image:t.image[m]:g[m]=l(t.image[m],r.maxCubemapSize);var v=g[0],_=u(v),y=a.convert(t.format),b=a.convert(t.type);w(e.TEXTURE_CUBE_MAP,t,_);for(var m=0;m<6;m++)if(h)for(var x,E=g[m].mipmaps,k=0,M=E.length;k<M;k++)x=E[k],t.format!==As&&t.format!==Ss?n.getCompressedTextureFormats().indexOf(y)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,k,y,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,k,y,x.width,x.height,0,y,b,x.data);else d?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,g[m].width,g[m].height,0,y,b,g[m].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,y,b,g[m]);f(t,_)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)}function b(t,r){n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)}function w(n,o,s){var l;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,a.convert(o.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,a.convert(o.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,a.convert(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,a.convert(o.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o.wrapS===os&&o.wrapT===os||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o),e.texParameteri(n,e.TEXTURE_MAG_FILTER,d(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,d(o.minFilter)),o.minFilter!==ls&&o.minFilter!==hs&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)),l=t.get("EXT_texture_filter_anisotropic")){if(o.type===bs&&null===t.get("OES_texture_float_linear"))return;if(o.type===ws&&null===t.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function x(t,i,s){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",p),t.__webglTexture=e.createTexture(),o.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment);var d=l(i.image,r.maxTextureSize);h(i)&&u(d)===!1&&(d=c(d));var g=u(d),m=a.convert(i.format),v=a.convert(i.type);w(e.TEXTURE_2D,i,g);var _,y=i.mipmaps;if(i.isDepthTexture){var b=e.DEPTH_COMPONENT;if(i.type===bs){if(!P)throw new Error("Float Depth Texture only supported in WebGL2.0");b=e.DEPTH_COMPONENT32F}else P&&(b=e.DEPTH_COMPONENT16);i.format===Os&&b===e.DEPTH_COMPONENT&&i.type!==vs&&i.type!==ys&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=vs,v=a.convert(i.type)),i.format===Ls&&(b=e.DEPTH_STENCIL,i.type!==Ms&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Ms,v=a.convert(i.type))),n.texImage2D(e.TEXTURE_2D,0,b,d.width,d.height,0,m,v,null)}else if(i.isDataTexture)if(y.length>0&&g){for(var x=0,E=y.length;x<E;x++)_=y[x],n.texImage2D(e.TEXTURE_2D,x,m,_.width,_.height,0,m,v,_.data);i.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,m,d.width,d.height,0,m,v,d.data);else if(i.isCompressedTexture)for(var x=0,E=y.length;x<E;x++)_=y[x],i.format!==As&&i.format!==Ss?n.getCompressedTextureFormats().indexOf(m)>-1?n.compressedTexImage2D(e.TEXTURE_2D,x,m,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,x,m,_.width,_.height,0,m,v,_.data);else if(y.length>0&&g){for(var x=0,E=y.length;x<E;x++)_=y[x],n.texImage2D(e.TEXTURE_2D,x,m,m,v,_);i.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,m,m,v,d);f(i,g)&&e.generateMipmap(e.TEXTURE_2D),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function E(t,r,o,s){var l=a.convert(r.texture.format),u=a.convert(r.texture.type);n.texImage2D(s,0,l,r.width,r.height,0,l,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function k(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function M(t,n){var r=n&&n.isWebGLRenderTargetCube;if(r)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),_(n.depthTexture,0);var a=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Os)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(n.depthTexture.format!==Ls)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}function T(t){var n=i.get(t),r=t.isWebGLRenderTargetCube===!0;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");M(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=e.createRenderbuffer(),k(n.__webglDepthbuffer[a],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),k(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function S(t){var r=i.get(t),a=i.get(t.texture);t.addEventListener("dispose",g),a.__webglTexture=e.createTexture(),o.textures++;var s=t.isWebGLRenderTargetCube===!0,l=u(t);if(s){r.__webglFramebuffer=[];for(var c=0;c<6;c++)r.__webglFramebuffer[c]=e.createFramebuffer()}else r.__webglFramebuffer=e.createFramebuffer();if(s){n.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture),w(e.TEXTURE_CUBE_MAP,t.texture,l);for(var c=0;c<6;c++)E(r.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);f(t.texture,l)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,a.__webglTexture),w(e.TEXTURE_2D,t.texture,l),E(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),f(t.texture,l)&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&T(t)}function A(t){var r=t.texture,a=u(t);if(f(r,a)){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=i.get(r).__webglTexture;n.bindTexture(o,s),e.generateMipmap(o),n.bindTexture(o,null)}}function R(e){var t=e.id,n=s.frame;O[t]!==n&&(O[t]=n,e.update())}var C,P="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,O={};this.setTexture2D=_,this.setTextureCube=y,this.setTextureCubeDynamic=b,this.setupRenderTarget=S,this.updateRenderTargetMipmap=A}function ut(){function e(e){var t=e.uuid,n=r[t];return void 0===n&&(n={},r[t]=n),n}function t(e){delete r[e.uuid]}function n(e,t,n){var i=e.uuid,a=r[i];a[t]=n}function i(){r={}}var r={};return{get:e,remove:t,update:n,dispose:i}}function ct(e,t,n){function i(){var t=!1,n=new l,i=null,r=new l(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,o,s){s===!0&&(t*=o,i*=o,a*=o),n.set(t,i,a,o),r.equals(n)===!1&&(e.clearColor(t,i,a,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}}function r(){var t=!1,n=null,i=null,r=null;return{setTest:function(t){t?f(e.DEPTH_TEST):d(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case Fo:e.depthFunc(e.NEVER);break;case Do:e.depthFunc(e.ALWAYS);break;case Io:e.depthFunc(e.LESS);break;case Uo:e.depthFunc(e.LEQUAL);break;case Ho:e.depthFunc(e.EQUAL);break;case zo:e.depthFunc(e.GEQUAL);break;case Bo:e.depthFunc(e.GREATER);break;case jo:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}}function a(){var t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(t){t?f(e.STENCIL_TEST):d(e.STENCIL_TEST)},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&a===o||(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){o===t&&s===n&&l===i||(e.stencilOp(t,n,i),o=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null}}}function o(t,n,i){var r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;o<i;o++)e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return a}function s(){for(var e=0,t=N.length;e<t;e++)N[e]=0}function u(n){if(N[n]=1,0===F[n]&&(e.enableVertexAttribArray(n),F[n]=1),0!==D[n]){var i=t.get("ANGLE_instanced_arrays");i.vertexAttribDivisorANGLE(n,0),D[n]=0}}function c(n,i){if(N[n]=1,0===F[n]&&(e.enableVertexAttribArray(n),F[n]=1),D[n]!==i){var r=t.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(n,i),D[n]=i}}function h(){for(var t=0,n=F.length;t!==n;++t)F[t]!==N[t]&&(e.disableVertexAttribArray(t),F[t]=0)}function f(t){I[t]!==!0&&(e.enable(t),I[t]=!0)}function d(t){I[t]!==!1&&(e.disable(t),I[t]=!1)}function p(){if(null===U&&(U=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)U.push(n[i]);return U}function g(t){return H!==t&&(e.useProgram(t),H=t,!0)}function m(t,i,r,a,o,s,l,u){if(t!==fo?f(e.BLEND):d(e.BLEND),t!==_o){if(t!==z||u!==Y)switch(t){case go:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case mo:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case vo:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}B=null,j=null,V=null,G=null,W=null,X=null}else o=o||i,s=s||r,l=l||a,i===B&&o===G||(e.blendEquationSeparate(n.convert(i),n.convert(o)),B=i,G=o),r===j&&a===V&&s===W&&l===X||(e.blendFuncSeparate(n.convert(r),n.convert(a),n.convert(s),n.convert(l)),j=r,V=a,W=s,X=l);z=t,Y=u}function v(t,n){t.side===oo?d(e.CULL_FACE):f(e.CULL_FACE);var i=t.side===ao;n&&(i=!i),_(i),t.transparent===!0?m(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):m(fo),P.setFunc(t.depthFunc),P.setTest(t.depthTest),P.setMask(t.depthWrite),C.setMask(t.colorWrite),w(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function _(t){q!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),q=t)}function y(t){t!==Za?(f(e.CULL_FACE),t!==Z&&(t===Qa?e.cullFace(e.BACK):t===$a?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):d(e.CULL_FACE),Z=t}function b(t){t!==Q&&(ee&&e.lineWidth(t),Q=t)}function w(t,n,i){t?(f(e.POLYGON_OFFSET_FILL),$===n&&J===i||(e.polygonOffset(n,i),$=n,J=i)):d(e.POLYGON_OFFSET_FILL)}function x(t){t?f(e.SCISSOR_TEST):d(e.SCISSOR_TEST)}function E(t){void 0===t&&(t=e.TEXTURE0+K-1),ie!==t&&(e.activeTexture(t),ie=t)}function k(t,n){null===ie&&E();var i=re[ie];void 0===i&&(i={type:void 0,texture:void 0},re[ie]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||se[t]),i.type=t,i.texture=n)}function M(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function T(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function S(t){ae.equals(t)===!1&&(e.scissor(t.x,t.y,t.z,t.w),ae.copy(t))}function A(t){oe.equals(t)===!1&&(e.viewport(t.x,t.y,t.z,t.w),oe.copy(t))}function R(){for(var t=0;t<F.length;t++)1===F[t]&&(e.disableVertexAttribArray(t),F[t]=0);I={},U=null,ie=null,re={},H=null,z=null,q=null,Z=null,C.reset(),P.reset(),O.reset()}var C=new i,P=new r,O=new a,L=e.getParameter(e.MAX_VERTEX_ATTRIBS),N=new Uint8Array(L),F=new Uint8Array(L),D=new Uint8Array(L),I={},U=null,H=null,z=null,B=null,j=null,V=null,G=null,W=null,X=null,Y=!1,q=null,Z=null,Q=null,$=null,J=null,K=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ee=!1,te=0,ne=e.getParameter(e.VERSION);ne.indexOf("WebGL")!==-1?(te=parseFloat(/^WebGL\ ([0-9])/.exec(ne)[1]),ee=te>=1):ne.indexOf("OpenGL ES")!==-1&&(te=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ne)[1]),ee=te>=2);var ie=null,re={},ae=new l,oe=new l,se={};return se[e.TEXTURE_2D]=o(e.TEXTURE_2D,e.TEXTURE_2D,1),se[e.TEXTURE_CUBE_MAP]=o(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),C.setClear(0,0,0,1),P.setClear(1),O.setClear(0),f(e.DEPTH_TEST),P.setFunc(Uo),_(!1),y(Qa),f(e.CULL_FACE),f(e.BLEND),m(po),{buffers:{color:C,depth:P,stencil:O},initAttributes:s,enableAttribute:u,enableAttributeAndDivisor:c,disableUnusedAttributes:h,enable:f,disable:d,getCompressedTextureFormats:p,useProgram:g,setBlending:m,setMaterial:v,setFlipSided:_,setCullFace:y,setLineWidth:b,setPolygonOffset:w,setScissorTest:x,activeTexture:E,bindTexture:k,compressedTexImage2D:M,texImage2D:T,scissor:S,viewport:A,reset:R}}function ht(e,t,n){function i(){if(void 0!==a)return a;var n=t.get("EXT_texture_filter_anisotropic");return a=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a,o=void 0!==n.precision?n.precision:"highp",s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=n.logarithmicDepthBuffer===!0,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=c>0,_=!!t.get("OES_texture_float"),y=v&&_;return{getMaxAnisotropy:i,getMaxPrecision:r,precision:o,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:g,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:_,floatVertexTextures:y}}function ft(e,t,n,i){le.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function dt(e){ft.call(this),this.cameras=e||[]}function pt(e){function t(){if(null!==r&&r.isPresenting){var t=r.getEyeParameters("left"),i=t.renderWidth,a=t.renderHeight;g=e.getPixelRatio(),p=e.getSize(),e.setDrawingBufferSize(2*i,a,1)}else n.enabled&&e.setDrawingBufferSize(p.width,p.height,g)}var n=this,r=null,a=null,o=null,s=new i,u=new i;"undefined"!=typeof window&&"VRFrameData"in window&&(a=new window.VRFrameData);var c=new i,h=new ft;h.bounds=new l(0,0,.5,1),h.layers.enable(1);var f=new ft;f.bounds=new l(.5,0,.5,1),f.layers.enable(2);var d=new dt([h,f]);d.layers.enable(1),d.layers.enable(2);var p,g;"undefined"!=typeof window&&window.addEventListener("vrdisplaypresentchange",t,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e)},this.setPoseTarget=function(e){void 0!==e&&(o=e)},this.getCamera=function(e){if(null===r)return e;r.depthNear=e.near,r.depthFar=e.far,r.getFrameData(a);var t=a.pose,i=null!==o?o:e;null!==t.position?i.position.fromArray(t.position):i.position.set(0,0,0),null!==t.orientation&&i.quaternion.fromArray(t.orientation);var l=r.stageParameters;if(l?s.fromArray(l.sittingToStandingTransform):s.makeTranslation(0,n.userHeight,0),i.position.applyMatrix4(s),i.updateMatrixWorld(),r.isPresenting===!1)return e;h.near=e.near,f.near=e.near,h.far=e.far,f.far=e.far,d.matrixWorld.copy(e.matrixWorld),d.matrixWorldInverse.copy(e.matrixWorldInverse),h.matrixWorldInverse.fromArray(a.leftViewMatrix),f.matrixWorldInverse.fromArray(a.rightViewMatrix),u.getInverse(s),h.matrixWorldInverse.multiply(u),f.matrixWorldInverse.multiply(u);var p=i.parent;null!==p&&(c.getInverse(p.matrixWorld),h.matrixWorldInverse.multiply(c),f.matrixWorldInverse.multiply(c)),h.matrixWorld.getInverse(h.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),h.projectionMatrix.fromArray(a.leftProjectionMatrix),f.projectionMatrix.fromArray(a.rightProjectionMatrix),d.projectionMatrix.copy(h.projectionMatrix);var g=r.getLayers();if(g.length){var m=g[0];null!==m.leftBounds&&4===m.leftBounds.length&&h.bounds.fromArray(m.leftBounds),null!==m.rightBounds&&4===m.rightBounds.length&&f.bounds.fromArray(m.rightBounds)}return d},this.getStandingMatrix=function(){return s},this.submitFrame=function(){r&&r.isPresenting&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",t)}}function gt(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=e.getExtension("WEBGL_compressed_texture_etc1");break;default:i=e.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=i,i}}}function mt(){function e(){c.value!==i&&(c.value=i,c.needsUpdate=r>0),n.numPlanes=r,n.numIntersection=0}function t(e,t,i,r){var a=null!==e?e.length:0,o=null;if(0!==a){if(o=c.value,r!==!0||null===o){var s=i+4*a,h=t.matrixWorldInverse;u.getNormalMatrix(h),(null===o||o.length<s)&&(o=new Float32Array(s));for(var f=0,d=i;f!==a;++f,d+=4)l.copy(e[f]).applyMatrix4(h,u),l.normal.toArray(o,d),o[d+3]=l.constant}c.value=o,c.needsUpdate=!0}return n.numPlanes=a,o}var n=this,i=null,r=0,a=!1,s=!1,l=new te,u=new o,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,o){var s=0!==e.length||n||0!==r||a;return a=n,i=t(e,o,0),r=e.length,s},this.beginShadows=function(){s=!0,t(null)},this.endShadows=function(){s=!1,e()},this.setState=function(n,o,l,u,h,f){if(!a||null===n||0===n.length||s&&!l)s?t(null):e();else{var d=s?0:r,p=4*d,g=h.clippingState||null;c.value=g,g=t(n,u,p,f);for(var m=0;m!==p;++m)g[m]=i[m];h.clippingState=g,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=d}}}function vt(e,t){function n(n){var i;if(n===as)return e.REPEAT;if(n===os)return e.CLAMP_TO_EDGE;if(n===ss)return e.MIRRORED_REPEAT;if(n===ls)return e.NEAREST;if(n===us)return e.NEAREST_MIPMAP_NEAREST;if(n===cs)return e.NEAREST_MIPMAP_LINEAR;if(n===hs)return e.LINEAR;if(n===fs)return e.LINEAR_MIPMAP_NEAREST;if(n===ds)return e.LINEAR_MIPMAP_LINEAR;if(n===ps)return e.UNSIGNED_BYTE;if(n===xs)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Es)return e.UNSIGNED_SHORT_5_5_5_1;if(n===ks)return e.UNSIGNED_SHORT_5_6_5;if(n===gs)return e.BYTE;if(n===ms)return e.SHORT;if(n===vs)return e.UNSIGNED_SHORT;if(n===_s)return e.INT;if(n===ys)return e.UNSIGNED_INT;if(n===bs)return e.FLOAT;if(n===ws&&(i=t.get("OES_texture_half_float"),null!==i))return i.HALF_FLOAT_OES;if(n===Ts)return e.ALPHA;if(n===Ss)return e.RGB;if(n===As)return e.RGBA;if(n===Rs)return e.LUMINANCE;if(n===Cs)return e.LUMINANCE_ALPHA;if(n===Os)return e.DEPTH_COMPONENT;if(n===Ls)return e.DEPTH_STENCIL;if(n===yo)return e.FUNC_ADD;if(n===bo)return e.FUNC_SUBTRACT;if(n===wo)return e.FUNC_REVERSE_SUBTRACT;if(n===ko)return e.ZERO;if(n===Mo)return e.ONE;if(n===To)return e.SRC_COLOR;if(n===So)return e.ONE_MINUS_SRC_COLOR;if(n===Ao)return e.SRC_ALPHA;if(n===Ro)return e.ONE_MINUS_SRC_ALPHA;if(n===Co)return e.DST_ALPHA;if(n===Po)return e.ONE_MINUS_DST_ALPHA;if(n===Oo)return e.DST_COLOR;if(n===Lo)return e.ONE_MINUS_DST_COLOR;if(n===No)return e.SRC_ALPHA_SATURATE;if((n===Ns||n===Fs||n===Ds||n===Is)&&(i=t.get("WEBGL_compressed_texture_s3tc"),null!==i)){if(n===Ns)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Fs)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ds)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Is)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===Us||n===Hs||n===zs||n===Bs)&&(i=t.get("WEBGL_compressed_texture_pvrtc"),null!==i)){if(n===Us)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Hs)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===zs)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Bs)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===js&&(i=t.get("WEBGL_compressed_texture_etc1"),null!==i))return i.COMPRESSED_RGB_ETC1_WEBGL;if((n===Vs||n===Gs||n===Ws||n===Xs||n===Ys||n===qs||n===Zs||n===Qs||n===$s||n===Js||n===Ks||n===el||n===tl||n===nl)&&(i=t.get("WEBGL_compressed_texture_astc"),null!==i))return n;if((n===xo||n===Eo)&&(i=t.get("EXT_blend_minmax"),null!==i)){if(n===xo)return i.MIN_EXT;if(n===Eo)return i.MAX_EXT}return n===Ms&&(i=t.get("WEBGL_depth_texture"),null!==i)?i.UNSIGNED_INT_24_8_WEBGL:0}return{convert:n}}function _t(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var i;switch(t.type){case"DirectionalLight":i={direction:new a,color:new Y,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":i={position:new a,direction:new a,color:new Y,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":i={position:new a,color:new Y,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":i={direction:new a,skyColor:new Y,groundColor:new Y};break;case"RectAreaLight":i={color:new Y,position:new a,halfWidth:new a,halfHeight:new a}}return e[t.id]=i,i}}}function yt(){function e(e,i,a){for(var l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0,m=a.matrixWorldInverse,v=0,_=e.length;v<_;v++){var y=e[v],b=y.color,w=y.intensity,x=y.distance,E=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)l+=b.r*w,u+=b.g*w,c+=b.b*w;else if(y.isDirectionalLight){var k=t.get(y);if(k.color.copy(y.color).multiplyScalar(y.intensity),k.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),k.direction.sub(r),k.direction.transformDirection(m),k.shadow=y.castShadow,y.castShadow){var M=y.shadow;k.shadowBias=M.bias,k.shadowRadius=M.radius,k.shadowMapSize=M.mapSize}n.directionalShadowMap[h]=E,n.directionalShadowMatrix[h]=y.shadow.matrix,n.directional[h]=k,h++}else if(y.isSpotLight){var k=t.get(y);if(k.position.setFromMatrixPosition(y.matrixWorld),k.position.applyMatrix4(m),k.color.copy(b).multiplyScalar(w),k.distance=x,k.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),k.direction.sub(r),k.direction.transformDirection(m),k.coneCos=Math.cos(y.angle),k.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),k.decay=0===y.distance?0:y.decay,k.shadow=y.castShadow,y.castShadow){var M=y.shadow;k.shadowBias=M.bias,k.shadowRadius=M.radius,k.shadowMapSize=M.mapSize}n.spotShadowMap[d]=E,n.spotShadowMatrix[d]=y.shadow.matrix,n.spot[d]=k,d++}else if(y.isRectAreaLight){var k=t.get(y);k.color.copy(b).multiplyScalar(w),k.position.setFromMatrixPosition(y.matrixWorld),k.position.applyMatrix4(m),s.identity(),o.copy(y.matrixWorld),o.premultiply(m),s.extractRotation(o),k.halfWidth.set(.5*y.width,0,0),k.halfHeight.set(0,.5*y.height,0),k.halfWidth.applyMatrix4(s),k.halfHeight.applyMatrix4(s),n.rectArea[p]=k,p++}else if(y.isPointLight){var k=t.get(y);if(k.position.setFromMatrixPosition(y.matrixWorld),k.position.applyMatrix4(m),k.color.copy(y.color).multiplyScalar(y.intensity),k.distance=y.distance,k.decay=0===y.distance?0:y.decay,k.shadow=y.castShadow,y.castShadow){var M=y.shadow;k.shadowBias=M.bias,k.shadowRadius=M.radius,k.shadowMapSize=M.mapSize,k.shadowCameraNear=M.camera.near,k.shadowCameraFar=M.camera.far}n.pointShadowMap[f]=E,n.pointShadowMatrix[f]=y.shadow.matrix,n.point[f]=k,f++}else if(y.isHemisphereLight){var k=t.get(y);k.direction.setFromMatrixPosition(y.matrixWorld),k.direction.transformDirection(m),k.direction.normalize(),k.skyColor.copy(y.color).multiplyScalar(w),k.groundColor.copy(y.groundColor).multiplyScalar(w),n.hemi[g]=k,g++}}n.ambient[0]=l,n.ambient[1]=u,n.ambient[2]=c,n.directional.length=h,n.spot.length=d,n.rectArea.length=p,n.point.length=f,n.hemi.length=g,n.hash=n.id+","+h+","+f+","+d+","+p+","+g+","+i.length}var t=new _t,n={id:Wc++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=new a,o=new i,s=new i;return{setup:e,state:n}}function bt(){function e(){o.length=0,s.length=0,l.length=0}function t(e){o.push(e)}function n(e){s.push(e)}function i(e){l.push(e)}function r(e){a.setup(o,s,e)}var a=new yt,o=[],s=[],l=[],u={lightsArray:o,shadowsArray:s,spritesArray:l,lights:a};return{init:e,state:u,setupLights:r,pushLight:t,pushShadow:n,pushSprite:i}}function wt(){function e(e,t){var i=e.id+","+t.id,r=n[i];return void 0===r&&(r=new bt,n[i]=r),r}function t(){n={}}var n={};return{get:e,dispose:t}}function xt(e){function t(){Te.frame++,Te.calls=0,Te.vertices=0,Te.faces=0,Te.points=0}function n(){return null===ee?ge:1}function r(){Re=new gt(Se),Re.get("WEBGL_depth_texture"),Re.get("OES_texture_float"),Re.get("OES_texture_float_linear"),Re.get("OES_texture_half_float"),Re.get("OES_texture_half_float_linear"),Re.get("OES_standard_derivatives"),Re.get("OES_element_index_uint"),Re.get("ANGLE_instanced_arrays"),Je=new vt(Se,Re),Ce=new ht(Se,Re,e),Pe=new ct(Se,Re,Je),Pe.scissor(ce.copy(ve).multiplyScalar(ge)),Pe.viewport(ue.copy(me).multiplyScalar(ge)),Oe=new ut,Le=new lt(Se,Re,Pe,Oe,Ce,Je,Me,Te),Ne=new re(Se),De=new Ge(Se,Ne,Me),Ie=new We(De,Te),qe=new Be(Se),Ue=new st(J,Re,Ce),ze=new He,Xe=new wt,Ye=new Fe(J,Pe,De,W),Ze=new Ve(Se,Re,Te),Qe=new je(Se,Re,Te),$e=new Z(J,Se,Pe,Le,Ce),J.info.programs=Ue.programs,J.context=Se,J.capabilities=Ce,J.extensions=Re,J.properties=Oe,J.renderLists=ze,J.state=Pe}function o(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),K=!0}function s(){console.log("THREE.WebGLRenderer: Context Restored."),K=!1,r()}function u(e){var t=e.target;t.removeEventListener("dispose",u),c(t)}function c(e){f(e),Oe.remove(e)}function f(e){var t=Oe.get(e).program;e.program=void 0,void 0!==t&&Ue.releaseProgram(t)}function d(e,t,n){e.render(function(e){J.renderBufferImmediate(e,t,n)})}function p(e,t,n,i){if(n&&n.isInstancedBufferGeometry&&null===Re.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0),Pe.initAttributes();var r=n.attributes,a=t.getAttributes(),o=e.defaultAttributeValues;for(var s in a){var l=a[s];if(l>=0){var u=r[s];if(void 0!==u){var c=u.normalized,h=u.itemSize,f=Ne.get(u);if(void 0===f)continue;var d=f.buffer,p=f.type,g=f.bytesPerElement;if(u.isInterleavedBufferAttribute){var m=u.data,v=m.stride,_=u.offset;m&&m.isInstancedInterleavedBuffer?(Pe.enableAttributeAndDivisor(l,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):Pe.enableAttribute(l),Se.bindBuffer(Se.ARRAY_BUFFER,d),Se.vertexAttribPointer(l,h,p,c,v*g,(i*v+_)*g)}else u.isInstancedBufferAttribute?(Pe.enableAttributeAndDivisor(l,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):Pe.enableAttribute(l),Se.bindBuffer(Se.ARRAY_BUFFER,d),Se.vertexAttribPointer(l,h,p,c,0,i*h*g)}else if(void 0!==o){var y=o[s];if(void 0!==y)switch(y.length){case 2:Se.vertexAttrib2fv(l,y);break;case 3:Se.vertexAttrib3fv(l,y);break;case 4:Se.vertexAttrib4fv(l,y);break;default:Se.vertexAttrib1fv(l,y)}}}}Pe.disableUnusedAttributes()}function g(){tt||(v(),tt=!0)}function m(){tt=!1}function v(){var e=Ke.getDevice();e&&e.isPresenting?e.requestAnimationFrame(_):window.requestAnimationFrame(_)}function _(e){tt!==!1&&(nt(e),v())}function y(e,t,n){if(e.visible!==!1){var i=e.layers.test(t.layers);if(i)if(e.isLight)$.pushLight(e),e.castShadow&&$.pushShadow(e);else if(e.isSprite)e.frustumCulled&&!ye.intersectsSprite(e)||$.pushSprite(e);else if(e.isImmediateRenderObject)n&&ke.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ee),Q.push(e,null,e.material,ke.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||ye.intersectsObject(e))){n&&ke.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ee);var r=Ie.update(e),a=e.material;if(Array.isArray(a))for(var o=r.groups,s=0,l=o.length;s<l;s++){var u=o[s],c=a[u.materialIndex];c&&c.visible&&Q.push(e,r,c,ke.z,u)}else a.visible&&Q.push(e,r,a,ke.z,null)}for(var h=e.children,s=0,l=h.length;s<l;s++)y(h[s],t,n)}}function b(e,t,n,i){for(var r=0,a=e.length;r<a;r++){var o=e[r],s=o.object,l=o.geometry,u=void 0===i?o.material:i,c=o.group;if(n.isArrayCamera){le=n;for(var h=n.cameras,f=0,d=h.length;f<d;f++){var p=h[f];if(s.layers.test(p.layers)){var g=p.bounds,m=g.x*de,v=g.y*pe,_=g.z*de,y=g.w*pe;
Pe.viewport(ue.set(m,v,_,y).multiplyScalar(ge)),w(s,t,p,l,u,c)}}}else le=null,w(s,t,n,l,u,c)}}function w(e,t,n,i,r,a){if(e.onBeforeRender(J,t,n,i,r,a),$=Xe.get(t,le||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var o=e.isMesh&&e.matrixWorld.determinant()<0;Pe.setMaterial(r,o);var s=E(n,t.fog,r,e);oe="",d(e,s,r)}else J.renderBufferDirect(n,t.fog,i,r,e,a);e.onAfterRender(J,t,n,i,r,a),$=Xe.get(t,le||n)}function x(e,t,n){var i=Oe.get(e),r=$.state.lights,a=$.state.shadowsArray,o=Ue.getParameters(e,r.state,a,t,be.numPlanes,be.numIntersection,n),s=Ue.getProgramCode(e,o),l=i.program,c=!0;if(void 0===l)e.addEventListener("dispose",u);else if(l.code!==s)f(e);else if(i.lightsHash!==r.state.hash)Oe.update(e,"lightsHash",r.state.hash),c=!1;else{if(void 0!==o.shaderID)return;c=!1}if(c){if(o.shaderID){var h=Hc[o.shaderID];i.shader={name:e.type,uniforms:Dl.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader),l=Ue.acquireProgram(e,i.shader,o,s),i.program=l,e.program=l}var d=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<J.maxMorphTargets;p++)d["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var p=0;p<J.maxMorphNormals;p++)d["morphNormal"+p]>=0&&e.numSupportedMorphNormals++}var g=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&e.clipping!==!0||(i.numClippingPlanes=be.numPlanes,i.numIntersection=be.numIntersection,g.clippingPlanes=be.uniform),i.fog=t,i.lightsHash=r.state.hash,e.lights&&(g.ambientLightColor.value=r.state.ambient,g.directionalLights.value=r.state.directional,g.spotLights.value=r.state.spot,g.rectAreaLights.value=r.state.rectArea,g.pointLights.value=r.state.point,g.hemisphereLights.value=r.state.hemi,g.directionalShadowMap.value=r.state.directionalShadowMap,g.directionalShadowMatrix.value=r.state.directionalShadowMatrix,g.spotShadowMap.value=r.state.spotShadowMap,g.spotShadowMatrix.value=r.state.spotShadowMatrix,g.pointShadowMap.value=r.state.pointShadowMap,g.pointShadowMatrix.value=r.state.pointShadowMatrix);var m=i.program.getUniforms(),v=X.seqWithValue(m.seq,g);i.uniformsList=v}function E(e,t,n,i){fe=0;var r=Oe.get(n),a=$.state.lights;if(we&&(xe||e!==se)){var o=e===se&&n.id===ae;be.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,o)}n.needsUpdate===!1&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==t?n.needsUpdate=!0:n.lights&&r.lightsHash!==a.state.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===be.numPlanes&&r.numIntersection===be.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(x(n,t,i),n.needsUpdate=!1);var s=!1,l=!1,u=!1,c=r.program,f=c.getUniforms(),d=r.shader.uniforms;if(Pe.useProgram(c.program)&&(s=!0,l=!0,u=!0),n.id!==ae&&(ae=n.id,l=!0),s||e!==se){if(f.setValue(Se,"projectionMatrix",e.projectionMatrix),Ce.logarithmicDepthBuffer&&f.setValue(Se,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),se!==(le||e)&&(se=le||e,l=!0,u=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var p=f.map.cameraPosition;void 0!==p&&p.setValue(Se,ke.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&f.setValue(Se,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){f.setOptional(Se,i,"bindMatrix"),f.setOptional(Se,i,"bindMatrixInverse");var g=i.skeleton;if(g){var m=g.bones;if(Ce.floatVertexTextures){if(void 0===g.boneTexture){var v=Math.sqrt(4*m.length);v=Ml.ceilPowerOfTwo(v),v=Math.max(v,4);var _=new Float32Array(v*v*4);_.set(g.boneMatrices);var y=new h(_,v,v,As,bs);y.needsUpdate=!0,g.boneMatrices=_,g.boneTexture=y,g.boneTextureSize=v}f.setValue(Se,"boneTexture",g.boneTexture),f.setValue(Se,"boneTextureSize",g.boneTextureSize)}else f.setOptional(Se,g,"boneMatrices")}}return l&&(f.setValue(Se,"toneMappingExposure",J.toneMappingExposure),f.setValue(Se,"toneMappingWhitePoint",J.toneMappingWhitePoint),n.lights&&I(d,u),t&&n.fog&&A(d,t),n.isMeshBasicMaterial?k(d,n):n.isMeshLambertMaterial?(k(d,n),R(d,n)):n.isMeshPhongMaterial?(k(d,n),n.isMeshToonMaterial?P(d,n):C(d,n)):n.isMeshStandardMaterial?(k(d,n),n.isMeshPhysicalMaterial?L(d,n):O(d,n)):n.isMeshDepthMaterial?(k(d,n),N(d,n)):n.isMeshDistanceMaterial?(k(d,n),F(d,n)):n.isMeshNormalMaterial?(k(d,n),D(d,n)):n.isLineBasicMaterial?(M(d,n),n.isLineDashedMaterial&&T(d,n)):n.isPointsMaterial?S(d,n):n.isShadowMaterial&&(d.color.value=n.color,d.opacity.value=n.opacity),void 0!==d.ltc_1&&(d.ltc_1.value=Fl.LTC_1),void 0!==d.ltc_2&&(d.ltc_2.value=Fl.LTC_2),X.upload(Se,r.uniformsList,d,J)),n.isShaderMaterial&&n.uniformsNeedUpdate===!0&&(X.upload(Se,r.uniformsList,d,J),n.uniformsNeedUpdate=!1),f.setValue(Se,"modelViewMatrix",i.modelViewMatrix),f.setValue(Se,"normalMatrix",i.normalMatrix),f.setValue(Se,"modelMatrix",i.matrixWorld),c}function k(e,t){e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;if(t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){if(n.isWebGLRenderTarget&&(n=n.texture),n.matrixAutoUpdate===!0){var i=n.offset,r=n.repeat,a=n.rotation,o=n.center;n.matrix.setUvTransform(i.x,i.y,r.x,r.y,a,o.x,o.y)}e.uvTransform.value.copy(n.matrix)}}function M(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function T(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function S(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*ge,e.scale.value=.5*pe,e.map.value=t.map,null!==t.map){if(t.map.matrixAutoUpdate===!0){var n=t.map.offset,i=t.map.repeat,r=t.map.rotation,a=t.map.center;t.map.matrix.setUvTransform(n.x,n.y,i.x,i.y,r,a.x,a.y)}e.uvTransform.value.copy(t.map.matrix)}}function A(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function R(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function C(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function P(e,t){C(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function O(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function L(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,O(e,t)}function N(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function F(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function D(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function I(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function U(){var e=fe;return e>=Ce.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+Ce.maxTextures),fe+=1,e}console.log("THREE.WebGLRenderer",Ya),e=e||{};var H=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),z=void 0!==e.context?e.context:null,B=void 0!==e.alpha&&e.alpha,j=void 0===e.depth||e.depth,V=void 0===e.stencil||e.stencil,G=void 0!==e.antialias&&e.antialias,W=void 0===e.premultipliedAlpha||e.premultipliedAlpha,Y=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,q=void 0!==e.powerPreference?e.powerPreference:"default",Q=null,$=null;this.domElement=H,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Yo,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var J=this,K=!1,ee=null,te=null,ae=-1,oe="",se=null,le=null,ue=new l,ce=new l,he=null,fe=0,de=H.width,pe=H.height,ge=1,me=new l(0,0,de,pe),ve=new l(0,0,de,pe),_e=!1,ye=new ne,be=new mt,we=!1,xe=!1,Ee=new i,ke=new a,Me={geometries:0,textures:0},Te={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Te,memory:Me,programs:null,autoReset:!0,reset:t};var Se;try{var Ae={alpha:B,depth:j,stencil:V,antialias:G,premultipliedAlpha:W,preserveDrawingBuffer:Y,powerPreference:q};if(H.addEventListener("webglcontextlost",o,!1),H.addEventListener("webglcontextrestored",s,!1),Se=z||H.getContext("webgl",Ae)||H.getContext("experimental-webgl",Ae),null===Se)throw null!==H.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===Se.getShaderPrecisionFormat&&(Se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}var Re,Ce,Pe,Oe,Le,Ne,De,Ie,Ue,ze,Xe,Ye,qe,Ze,Qe,$e,Je;r();var Ke=new pt(J);this.vr=Ke;var et=new ie(J,Ie,Ce.maxTextureSize);this.shadowMap=et,this.getContext=function(){return Se},this.getContextAttributes=function(){return Se.getContextAttributes()},this.forceContextLoss=function(){var e=Re.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=Re.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ge},this.setPixelRatio=function(e){void 0!==e&&(ge=e,this.setSize(de,pe,!1))},this.getSize=function(){return{width:de,height:pe}},this.setSize=function(e,t,n){var i=Ke.getDevice();return i&&i.isPresenting?void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(de=e,pe=t,H.width=e*ge,H.height=t*ge,n!==!1&&(H.style.width=e+"px",H.style.height=t+"px"),void this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(){return{width:de*ge,height:pe*ge}},this.setDrawingBufferSize=function(e,t,n){de=e,pe=t,ge=n,H.width=e*n,H.height=t*n,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(){return ue},this.setViewport=function(e,t,n,i){me.set(e,pe-t-i,n,i),Pe.viewport(ue.copy(me).multiplyScalar(ge))},this.setScissor=function(e,t,n,i){ve.set(e,pe-t-i,n,i),Pe.scissor(ce.copy(ve).multiplyScalar(ge))},this.setScissorTest=function(e){Pe.setScissorTest(_e=e)},this.getClearColor=function(){return Ye.getClearColor()},this.setClearColor=function(){Ye.setClearColor.apply(Ye,arguments)},this.getClearAlpha=function(){return Ye.getClearAlpha()},this.setClearAlpha=function(){Ye.setClearAlpha.apply(Ye,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=Se.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=Se.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=Se.STENCIL_BUFFER_BIT),Se.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,i){this.setRenderTarget(e),this.clear(t,n,i)},this.dispose=function(){H.removeEventListener("webglcontextlost",o,!1),H.removeEventListener("webglcontextrestored",s,!1),ze.dispose(),Xe.dispose(),Oe.dispose(),Ie.dispose(),Ke.dispose(),m()},this.renderBufferImmediate=function(e,t,n){Pe.initAttributes();var i=Oe.get(e);e.hasPositions&&!i.position&&(i.position=Se.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=Se.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=Se.createBuffer()),e.hasColors&&!i.color&&(i.color=Se.createBuffer());var r=t.getAttributes();if(e.hasPositions&&(Se.bindBuffer(Se.ARRAY_BUFFER,i.position),Se.bufferData(Se.ARRAY_BUFFER,e.positionArray,Se.DYNAMIC_DRAW),Pe.enableAttribute(r.position),Se.vertexAttribPointer(r.position,3,Se.FLOAT,!1,0,0)),e.hasNormals){if(Se.bindBuffer(Se.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&n.flatShading===!0)for(var a=0,o=3*e.count;a<o;a+=9){var s=e.normalArray,l=(s[a+0]+s[a+3]+s[a+6])/3,u=(s[a+1]+s[a+4]+s[a+7])/3,c=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=l,s[a+1]=u,s[a+2]=c,s[a+3]=l,s[a+4]=u,s[a+5]=c,s[a+6]=l,s[a+7]=u,s[a+8]=c}Se.bufferData(Se.ARRAY_BUFFER,e.normalArray,Se.DYNAMIC_DRAW),Pe.enableAttribute(r.normal),Se.vertexAttribPointer(r.normal,3,Se.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(Se.bindBuffer(Se.ARRAY_BUFFER,i.uv),Se.bufferData(Se.ARRAY_BUFFER,e.uvArray,Se.DYNAMIC_DRAW),Pe.enableAttribute(r.uv),Se.vertexAttribPointer(r.uv,2,Se.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==uo&&(Se.bindBuffer(Se.ARRAY_BUFFER,i.color),Se.bufferData(Se.ARRAY_BUFFER,e.colorArray,Se.DYNAMIC_DRAW),Pe.enableAttribute(r.color),Se.vertexAttribPointer(r.color,3,Se.FLOAT,!1,0,0)),Pe.disableUnusedAttributes(),Se.drawArrays(Se.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,r,a,o){var s=a.isMesh&&a.matrixWorld.determinant()<0;Pe.setMaterial(r,s);var l=E(e,t,r,a),u=i.id+"_"+l.id+"_"+(r.wireframe===!0),c=!1;u!==oe&&(oe=u,c=!0),a.morphTargetInfluences&&(qe.update(a,i,r,l),c=!0);var h=i.index,f=i.attributes.position,d=1;r.wireframe===!0&&(h=De.getWireframeAttribute(i),d=2);var g,m=Ze;null!==h&&(g=Ne.get(h),m=Qe,m.setIndex(g)),c&&(p(r,l,i),null!==h&&Se.bindBuffer(Se.ELEMENT_ARRAY_BUFFER,g.buffer));var v=1/0;null!==h?v=h.count:void 0!==f&&(v=f.count);var _=i.drawRange.start*d,y=i.drawRange.count*d,b=null!==o?o.start*d:0,w=null!==o?o.count*d:1/0,x=Math.max(_,b),k=Math.min(v,_+y,b+w)-1,M=Math.max(0,k-x+1);if(0!==M){if(a.isMesh)if(r.wireframe===!0)Pe.setLineWidth(r.wireframeLinewidth*n()),m.setMode(Se.LINES);else switch(a.drawMode){case fl:m.setMode(Se.TRIANGLES);break;case dl:m.setMode(Se.TRIANGLE_STRIP);break;case pl:m.setMode(Se.TRIANGLE_FAN)}else if(a.isLine){var T=r.linewidth;void 0===T&&(T=1),Pe.setLineWidth(T*n()),a.isLineSegments?m.setMode(Se.LINES):a.isLineLoop?m.setMode(Se.LINE_LOOP):m.setMode(Se.LINE_STRIP)}else a.isPoints&&m.setMode(Se.POINTS);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&m.renderInstances(i,x,M):m.render(x,M)}},this.compile=function(e,t){$=Xe.get(e,t),$.init(),e.traverse(function(e){e.isLight&&($.pushLight(e),e.castShadow&&$.pushShadow(e))}),$.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)x(t.material[n],e.fog,t);else x(t.material,e.fog,t)})};var tt=!1,nt=null;this.animate=function(e){nt=e,null!==nt?g():m()},this.render=function(e,t,n,i){if(!t||!t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!K){oe="",ae=-1,se=null,e.autoUpdate===!0&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Ke.enabled&&(t=Ke.getCamera(t)),$=Xe.get(e,t),$.init(),e.onBeforeRender(J,e,t,n),Ee.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ye.setFromMatrix(Ee),xe=this.localClippingEnabled,we=be.init(this.clippingPlanes,xe,t),Q=ze.get(e,t),Q.init(),y(e,t,J.sortObjects),J.sortObjects===!0&&Q.sort(),we&&be.beginShadows();var r=$.state.shadowsArray;et.render(r,e,t),$.setupLights(t),we&&be.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),Ye.render(Q,e,t,i);var a=Q.opaque,o=Q.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;a.length&&b(a,e,t,s),o.length&&b(o,e,t,s)}else a.length&&b(a,e,t),o.length&&b(o,e,t);var l=$.state.spritesArray;$e.render(l,e,t),n&&Le.updateRenderTargetMipmap(n),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1),e.onAfterRender(J,e,t),Ke.enabled&&Ke.submitFrame(),Q=null,$=null}},this.allocTextureUnit=U,this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),Le.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),Le.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?Le.setTextureCube(t,n):Le.setTextureCubeDynamic(t,n)}}(),this.getRenderTarget=function(){return ee},this.setRenderTarget=function(e){ee=e,e&&void 0===Oe.get(e).__webglFramebuffer&&Le.setupRenderTarget(e);var t=null,n=!1;if(e){var i=Oe.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=i[e.activeCubeFace],n=!0):t=i,ue.copy(e.viewport),ce.copy(e.scissor),he=e.scissorTest}else ue.copy(me).multiplyScalar(ge),ce.copy(ve).multiplyScalar(ge),he=_e;if(te!==t&&(Se.bindFramebuffer(Se.FRAMEBUFFER,t),te=t),Pe.viewport(ue),Pe.scissor(ce),Pe.setScissorTest(he),n){var r=Oe.get(e.texture);Se.framebufferTexture2D(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,Se.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,i,r,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var o=Oe.get(e).__webglFramebuffer;if(o){var s=!1;o!==te&&(Se.bindFramebuffer(Se.FRAMEBUFFER,o),s=!0);try{var l=e.texture,u=l.format,c=l.type;if(u!==As&&Je.convert(u)!==Se.getParameter(Se.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===ps||Je.convert(c)===Se.getParameter(Se.IMPLEMENTATION_COLOR_READ_TYPE)||c===bs&&(Re.get("OES_texture_float")||Re.get("WEBGL_color_buffer_float"))||c===ws&&Re.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Se.checkFramebufferStatus(Se.FRAMEBUFFER)===Se.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&Se.readPixels(t,n,i,r,Je.convert(u),Je.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&Se.bindFramebuffer(Se.FRAMEBUFFER,te)}}},this.copyFramebufferToTexture=function(e,t,n){var i=t.image.width,r=t.image.height,a=Je.convert(t.format);this.setTexture2D(t,0),Se.copyTexImage2D(Se.TEXTURE_2D,n||0,a,e.x,e.y,i,r,0)}}function Et(e,t){this.name="",this.color=new Y(e),this.density=void 0!==t?t:25e-5}function kt(e,t,n){this.name="",this.color=new Y(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Mt(){se.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Tt(e){Q.call(this),this.type="SpriteMaterial",this.color=new Y(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function St(e){se.call(this),this.type="Sprite",this.material=void 0!==e?e:new Tt,this.center=new n(.5,.5)}function At(){se.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Rt(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new i)}}function Ct(){se.call(this),this.type="Bone"}function Pt(e,t){Ne.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new i,this.bindMatrixInverse=new i;var n=this.initBones(),r=new Rt(n);this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}function Ot(e){Q.call(this),this.type="LineBasicMaterial",this.color=new Y(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Lt(e,t,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Nt(e,t)):(se.call(this),this.type="Line",this.geometry=void 0!==e?e:new ke,void(this.material=void 0!==t?t:new Ot({color:16777215*Math.random()})))}function Nt(e,t){Lt.call(this,e,t),this.type="LineSegments"}function Ft(e,t){Lt.call(this,e,t),this.type="LineLoop"}function Dt(e){Q.call(this),this.type="PointsMaterial",this.color=new Y(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function It(e,t){se.call(this),this.type="Points",this.geometry=void 0!==e?e:new ke,this.material=void 0!==t?t:new Dt({color:16777215*Math.random()})}function Ut(){se.call(this),this.type="Group"}function Ht(e,t,n,i,r,a,o,l,u){s.call(this,e,t,n,i,r,a,o,l,u),this.generateMipmaps=!1}function zt(e,t,n,i,r,a,o,l,u,c,h,f){s.call(this,null,a,o,l,u,c,i,r,h,f),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Bt(e,t,n,i,r,a,o,l,u,c){if(c=void 0!==c?c:Os,c!==Os&&c!==Ls)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Os&&(n=vs),void 0===n&&c===Ls&&(n=Ms),s.call(this,null,i,r,a,o,l,c,n,u),this.image={width:e,height:t},this.magFilter=void 0!==o?o:ls,this.minFilter=void 0!==l?l:ls,this.flipY=!1,this.generateMipmaps=!1}function jt(e){ke.call(this),this.type="WireframeGeometry";var t,n,i,r,o,s,l,u,c,h,f=[],d=[0,0],p={},g=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var v=m[t];for(n=0;n<3;n++)l=v[g[n]],u=v[g[(n+1)%3]],d[0]=Math.min(l,u),d[1]=Math.max(l,u),c=d[0]+","+d[1],void 0===p[c]&&(p[c]={index1:d[0],index2:d[1]})}for(c in p)s=p[c],h=e.vertices[s.index1],f.push(h.x,h.y,h.z),h=e.vertices[s.index2],f.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var _,y,b,w,x,E,k,M;if(h=new a,null!==e.index){for(_=e.attributes.position,y=e.index,b=e.groups,0===b.length&&(b=[{start:0,count:y.count,materialIndex:0}]),r=0,o=b.length;r<o;++r)for(w=b[r],x=w.start,E=w.count,t=x,i=x+E;t<i;t+=3)for(n=0;n<3;n++)l=y.getX(t+n),u=y.getX(t+(n+1)%3),d[0]=Math.min(l,u),d[1]=Math.max(l,u),c=d[0]+","+d[1],void 0===p[c]&&(p[c]={index1:d[0],index2:d[1]});for(c in p)s=p[c],h.fromBufferAttribute(_,s.index1),f.push(h.x,h.y,h.z),h.fromBufferAttribute(_,s.index2),f.push(h.x,h.y,h.z)}else for(_=e.attributes.position,t=0,i=_.count/3;t<i;t++)for(n=0;n<3;n++)k=3*t+n,h.fromBufferAttribute(_,k),f.push(h.x,h.y,h.z),M=3*t+(n+1)%3,h.fromBufferAttribute(_,M),f.push(h.x,h.y,h.z)}this.addAttribute("position",new be(f,3))}function Vt(e,t,n){he.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Gt(e,t,n)),this.mergeVertices()}function Gt(e,t,n){ke.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,o=[],s=[],l=[],u=[],c=1e-5,h=new a,f=new a,d=new a,p=new a,g=new a,m=t+1;for(i=0;i<=n;i++){var v=i/n;for(r=0;r<=t;r++){var _=r/t;f=e(_,v,f),s.push(f.x,f.y,f.z),_-c>=0?(d=e(_-c,v,d),p.subVectors(f,d)):(d=e(_+c,v,d),p.subVectors(d,f)),v-c>=0?(d=e(_,v-c,d),g.subVectors(f,d)):(d=e(_,v+c,d),g.subVectors(d,f)),h.crossVectors(p,g).normalize(),l.push(h.x,h.y,h.z),u.push(_,v)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var y=i*m+r,b=i*m+r+1,w=(i+1)*m+r+1,x=(i+1)*m+r;o.push(y,b,x),o.push(b,w,x)}this.setIndex(o),this.addAttribute("position",new be(s,3)),this.addAttribute("normal",new be(l,3)),this.addAttribute("uv",new be(u,2))}function Wt(e,t,n,i){he.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new Xt(e,t,n,i)),this.mergeVertices()}function Xt(e,t,i,r){function o(e){for(var n=new a,i=new a,r=new a,o=0;o<t.length;o+=3)f(t[o+0],n),f(t[o+1],i),f(t[o+2],r),s(n,i,r,e)}function s(e,t,n,i){var r,a,o=Math.pow(2,i),s=[];for(r=0;r<=o;r++){s[r]=[];var l=e.clone().lerp(n,r/o),u=t.clone().lerp(n,r/o),c=o-r;for(a=0;a<=c;a++)0===a&&r===o?s[r][a]=l:s[r][a]=l.clone().lerp(u,a/c)}for(r=0;r<o;r++)for(a=0;a<2*(o-r)-1;a++){var f=Math.floor(a/2);a%2===0?(h(s[r][f+1]),h(s[r+1][f]),h(s[r][f])):(h(s[r][f+1]),h(s[r+1][f+1]),h(s[r+1][f]))}}function l(e){for(var t=new a,n=0;n<v.length;n+=3)t.x=v[n+0],t.y=v[n+1],t.z=v[n+2],t.normalize().multiplyScalar(e),v[n+0]=t.x,v[n+1]=t.y,v[n+2]=t.z}function u(){for(var e=new a,t=0;t<v.length;t+=3){e.x=v[t+0],e.y=v[t+1],e.z=v[t+2];var n=g(e)/2/Math.PI+.5,i=m(e)/Math.PI+.5;_.push(n,1-i)}d(),c()}function c(){for(var e=0;e<_.length;e+=6){var t=_[e+0],n=_[e+2],i=_[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(_[e+0]+=1),n<.2&&(_[e+2]+=1),i<.2&&(_[e+4]+=1))}}function h(e){v.push(e.x,e.y,e.z)}function f(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function d(){for(var e=new a,t=new a,i=new a,r=new a,o=new n,s=new n,l=new n,u=0,c=0;u<v.length;u+=9,c+=6){e.set(v[u+0],v[u+1],v[u+2]),t.set(v[u+3],v[u+4],v[u+5]),i.set(v[u+6],v[u+7],v[u+8]),o.set(_[c+0],_[c+1]),s.set(_[c+2],_[c+3]),l.set(_[c+4],_[c+5]),r.copy(e).add(t).add(i).divideScalar(3);var h=g(r);p(o,c+0,e,h),p(s,c+2,t,h),p(l,c+4,i,h)}}function p(e,t,n,i){i<0&&1===e.x&&(_[t]=e.x-1),0===n.x&&0===n.z&&(_[t]=i/2/Math.PI+.5)}function g(e){return Math.atan2(e.z,-e.x)}function m(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}ke.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r},i=i||1,r=r||0;var v=[],_=[];o(r),l(i),u(),this.addAttribute("position",new be(v,3)),this.addAttribute("normal",new be(v.slice(),3)),this.addAttribute("uv",new be(_,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Yt(e,t){he.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new qt(e,t)),this.mergeVertices()}function qt(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];Xt.call(this,n,i,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Zt(e,t){he.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Qt(e,t)),this.mergeVertices()}function Qt(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Xt.call(this,n,i,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function $t(e,t){he.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Jt(e,t)),this.mergeVertices()}function Jt(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Xt.call(this,i,r,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Kt(e,t){he.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new en(e,t)),this.mergeVertices()}function en(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Xt.call(this,r,a,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function tn(e,t,n,i,r,a){he.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new nn(e,t,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function nn(e,t,i,r,o){function s(){for(f=0;f<t;f++)l(f);l(o===!1?t:0),c(),u()}function l(n){v=e.getPointAt(n/t,v);var a=h.normals[n],o=h.binormals[n];for(d=0;d<=r;d++){var s=d/r*Math.PI*2,l=Math.sin(s),u=-Math.cos(s);g.x=u*a.x+l*o.x,g.y=u*a.y+l*o.y,g.z=u*a.z+l*o.z,g.normalize(),y.push(g.x,g.y,g.z),p.x=v.x+i*g.x,p.y=v.y+i*g.y,p.z=v.z+i*g.z,_.push(p.x,p.y,p.z)}}function u(){for(d=1;d<=t;d++)for(f=1;f<=r;f++){var e=(r+1)*(d-1)+(f-1),n=(r+1)*d+(f-1),i=(r+1)*d+f,a=(r+1)*(d-1)+f;w.push(e,n,a),w.push(n,i,a)}}function c(){for(f=0;f<=t;f++)for(d=0;d<=r;d++)m.x=f/t,m.y=d/r,b.push(m.x,m.y)}ke.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:o},t=t||64,i=i||1,r=r||8,o=o||!1;var h=e.computeFrenetFrames(t,o);this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var f,d,p=new a,g=new a,m=new n,v=new a,_=[],y=[],b=[],w=[];s(),this.setIndex(w),this.addAttribute("position",new be(_,3)),this.addAttribute("normal",new be(y,3)),this.addAttribute("uv",new be(b,2))}function rn(e,t,n,i,r,a,o){he.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new an(e,t,n,i,r,a)),this.mergeVertices()}function an(e,t,n,i,r,o){function s(e,t,n,i,r){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}ke.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;var l,u,c=[],h=[],f=[],d=[],p=new a,g=new a,m=new a,v=new a,_=new a,y=new a,b=new a;for(l=0;l<=n;++l){var w=l/n*r*Math.PI*2;for(s(w,r,o,e,m),s(w+.01,r,o,e,v),y.subVectors(v,m),b.addVectors(v,m),_.crossVectors(y,b),b.crossVectors(_,y),_.normalize(),
b.normalize(),u=0;u<=i;++u){var x=u/i*Math.PI*2,E=-t*Math.cos(x),k=t*Math.sin(x);p.x=m.x+(E*b.x+k*_.x),p.y=m.y+(E*b.y+k*_.y),p.z=m.z+(E*b.z+k*_.z),h.push(p.x,p.y,p.z),g.subVectors(p,m).normalize(),f.push(g.x,g.y,g.z),d.push(l/n),d.push(u/i)}}for(u=1;u<=n;u++)for(l=1;l<=i;l++){var M=(i+1)*(u-1)+(l-1),T=(i+1)*u+(l-1),S=(i+1)*u+l,A=(i+1)*(u-1)+l;c.push(M,T,A),c.push(T,S,A)}this.setIndex(c),this.addAttribute("position",new be(h,3)),this.addAttribute("normal",new be(f,3)),this.addAttribute("uv",new be(d,2))}function on(e,t,n,i,r){he.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new sn(e,t,n,i,r)),this.mergeVertices()}function sn(e,t,n,i,r){ke.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var o,s,l=[],u=[],c=[],h=[],f=new a,d=new a,p=new a;for(o=0;o<=n;o++)for(s=0;s<=i;s++){var g=s/i*r,m=o/n*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(g),d.y=(e+t*Math.cos(m))*Math.sin(g),d.z=t*Math.sin(m),u.push(d.x,d.y,d.z),f.x=e*Math.cos(g),f.y=e*Math.sin(g),p.subVectors(d,f).normalize(),c.push(p.x,p.y,p.z),h.push(s/i),h.push(o/n)}for(o=1;o<=n;o++)for(s=1;s<=i;s++){var v=(i+1)*o+s-1,_=(i+1)*(o-1)+s-1,y=(i+1)*(o-1)+s,b=(i+1)*o+s;l.push(v,_,b),l.push(_,y,b)}this.setIndex(l),this.addAttribute("position",new be(u,3)),this.addAttribute("normal",new be(c,3)),this.addAttribute("uv",new be(h,2))}function ln(e,t,n,i,r){var a,o;if(r===Fn(e,t,n,i)>0)for(a=t;a<n;a+=i)o=On(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=On(a,e[a],e[a+1],o);return o&&Tn(o,o.next)&&(Ln(o),o=o.next),o}function un(e,t){if(!e)return e;t||(t=e);var n,i=e;do if(n=!1,i.steiner||!Tn(i,i.next)&&0!==Mn(i.prev,i,i.next))i=i.next;else{if(Ln(i),i=t=i.prev,i===i.next)break;n=!0}while(n||i!==t);return t}function cn(e,t,n,i,r,a,o){if(e){!o&&a&&yn(e,i,r,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?fn(e,i,r,a):hn(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),Ln(e),e=l.next,u=l.next;else if(e=l,e===u){o?1===o?(e=dn(e,t,n),cn(e,t,n,i,r,a,2)):2===o&&pn(e,t,n,i,r,a):cn(un(e),t,n,i,r,a,1);break}}}function hn(e){var t=e.prev,n=e,i=e.next;if(Mn(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(En(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Mn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function fn(e,t,n,i){var r=e.prev,a=e,o=e.next;if(Mn(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,l=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,u=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,c=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,h=wn(s,l,t,n,i),f=wn(u,c,t,n,i),d=e.nextZ;d&&d.z<=f;){if(d!==e.prev&&d!==e.next&&En(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Mn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&En(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Mn(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function dn(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!Tn(r,a)&&Sn(r,i,i.next,a)&&Rn(r,a)&&Rn(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),Ln(i),Ln(i.next),i=e=a),i=i.next}while(i!==e);return i}function pn(e,t,n,i,r,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&kn(o,s)){var l=Pn(o,s);return o=un(o,o.next),l=un(l,l.next),cn(o,t,n,i,r,a),void cn(l,t,n,i,r,a)}s=s.next}o=o.next}while(o!==e)}function gn(e,t,n,i){var r,a,o,s,l,u=[];for(r=0,a=t.length;r<a;r++)o=t[r]*i,s=r<a-1?t[r+1]*i:e.length,l=ln(e,o,s,i,!1),l===l.next&&(l.steiner=!0),u.push(xn(l));for(u.sort(mn),r=0;r<u.length;r++)vn(u[r],n),n=un(n,n.next);return n}function mn(e,t){return e.x-t.x}function vn(e,t){if(t=_n(e,t)){var n=Pn(t,e);un(n,n.next)}}function _n(e,t){var n,i=t,r=e.x,a=e.y,o=-(1/0);do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===o)return n.prev;var l,u=n,c=n.x,h=n.y,f=1/0;for(i=n.next;i!==u;)r>=i.x&&i.x>=c&&r!==i.x&&En(a<h?r:o,a,c,h,a<h?o:r,a,i.x,i.y)&&(l=Math.abs(a-i.y)/(r-i.x),(l<f||l===f&&i.x>n.x)&&Rn(i,e)&&(n=i,f=l)),i=i.next;return n}function yn(e,t,n,i){var r=e;do null===r.z&&(r.z=wn(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,bn(r)}function bn(e){var t,n,i,r,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<u&&(s++,i=i.nextZ,i);t++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(o>1);return e}function wn(e,t,n,i,r){return e=32767*(e-n)*r,t=32767*(t-i)*r,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function xn(e){var t=e,n=e;do t.x<n.x&&(n=t),t=t.next;while(t!==e);return n}function En(e,t,n,i,r,a,o,s){return(r-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function kn(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!An(e,t)&&Rn(e,t)&&Rn(t,e)&&Cn(e,t)}function Mn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Tn(e,t){return e.x===t.x&&e.y===t.y}function Sn(e,t,n,i){return!!(Tn(e,t)&&Tn(n,i)||Tn(e,i)&&Tn(n,t))||Mn(e,t,n)>0!=Mn(e,t,i)>0&&Mn(n,i,e)>0!=Mn(n,i,t)>0}function An(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Sn(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function Rn(e,t){return Mn(e.prev,e,e.next)<0?Mn(e,t,e.next)>=0&&Mn(e,e.prev,t)>=0:Mn(e,t,e.prev)<0||Mn(e,e.next,t)<0}function Cn(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==e);return i}function Pn(e,t){var n=new Nn(e.i,e.x,e.y),i=new Nn(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function On(e,t,n,i){var r=new Nn(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ln(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Nn(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fn(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}function Dn(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function In(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Un(e,t){he.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Hn(e,t)),this.mergeVertices()}function Hn(e,t){"undefined"!=typeof e&&(ke.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}function zn(e,t){he.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Bn(e,t)),this.mergeVertices()}function Bn(e,t){t=t||{};var n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new he;var i=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Hn.call(this,i,t),this.type="TextBufferGeometry"}function jn(e,t,n,i,r,a,o){he.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Vn(e,t,n,i,r,a,o)),this.mergeVertices()}function Vn(e,t,n,i,r,o,s){ke.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var l,u,c=o+s,h=0,f=[],d=new a,p=new a,g=[],m=[],v=[],_=[];for(u=0;u<=n;u++){var y=[],b=u/n;for(l=0;l<=t;l++){var w=l/t;d.x=-e*Math.cos(i+w*r)*Math.sin(o+b*s),d.y=e*Math.cos(o+b*s),d.z=e*Math.sin(i+w*r)*Math.sin(o+b*s),m.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),v.push(p.x,p.y,p.z),_.push(w,1-b),y.push(h++)}f.push(y)}for(u=0;u<n;u++)for(l=0;l<t;l++){var x=f[u][l+1],E=f[u][l],k=f[u+1][l],M=f[u+1][l+1];(0!==u||o>0)&&g.push(x,E,M),(u!==n-1||c<Math.PI)&&g.push(E,k,M)}this.setIndex(g),this.addAttribute("position",new be(m,3)),this.addAttribute("normal",new be(v,3)),this.addAttribute("uv",new be(_,2))}function Gn(e,t,n,i,r,a){he.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new Wn(e,t,n,i,r,a)),this.mergeVertices()}function Wn(e,t,i,r,o,s){ke.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:o,thetaLength:s},e=e||.5,t=t||1,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,i=void 0!==i?Math.max(3,i):8,r=void 0!==r?Math.max(1,r):1;var l,u,c,h=[],f=[],d=[],p=[],g=e,m=(t-e)/r,v=new a,_=new n;for(u=0;u<=r;u++){for(c=0;c<=i;c++)l=o+c/i*s,v.x=g*Math.cos(l),v.y=g*Math.sin(l),f.push(v.x,v.y,v.z),d.push(0,0,1),_.x=(v.x/t+1)/2,_.y=(v.y/t+1)/2,p.push(_.x,_.y);g+=m}for(u=0;u<r;u++){var y=u*(i+1);for(c=0;c<i;c++){l=c+y;var b=l,w=l+i+1,x=l+i+2,E=l+1;h.push(b,w,E),h.push(w,x,E)}}this.setIndex(h),this.addAttribute("position",new be(f,3)),this.addAttribute("normal",new be(d,3)),this.addAttribute("uv",new be(p,2))}function Xn(e,t,n,i){he.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new Yn(e,t,n,i)),this.mergeVertices()}function Yn(e,t,i,r){ke.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t)||12,i=i||0,r=r||2*Math.PI,r=Ml.clamp(r,0,2*Math.PI);var o,s,l,u=[],c=[],h=[],f=1/t,d=new a,p=new n;for(s=0;s<=t;s++){var g=i+s*f*r,m=Math.sin(g),v=Math.cos(g);for(l=0;l<=e.length-1;l++)d.x=e[l].x*m,d.y=e[l].y,d.z=e[l].x*v,c.push(d.x,d.y,d.z),p.x=s/t,p.y=l/(e.length-1),h.push(p.x,p.y)}for(s=0;s<t;s++)for(l=0;l<e.length-1;l++){o=l+s*e.length;var _=o,y=o+e.length,b=o+e.length+1,w=o+1;u.push(_,y,w),u.push(y,b,w)}if(this.setIndex(u),this.addAttribute("position",new be(c,3)),this.addAttribute("uv",new be(h,2)),this.computeVertexNormals(),r===2*Math.PI){var x=this.attributes.normal.array,E=new a,k=new a,M=new a;for(o=t*e.length*3,s=0,l=0;s<e.length;s++,l+=3)E.x=x[l+0],E.y=x[l+1],E.z=x[l+2],k.x=x[o+l+0],k.y=x[o+l+1],k.z=x[o+l+2],M.addVectors(E,k).normalize(),x[l+0]=x[o+l+0]=M.x,x[l+1]=x[o+l+1]=M.y,x[l+2]=x[o+l+2]=M.z}}function qn(e,t){he.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Zn(e,t)),this.mergeVertices()}function Zn(e,t){function n(e){var n,s,u,c=r.length/3,h=e.extractPoints(t),f=h.shape,d=h.holes;if(Yc.isClockWise(f)===!1)for(f=f.reverse(),n=0,s=d.length;n<s;n++)u=d[n],Yc.isClockWise(u)===!0&&(d[n]=u.reverse());var p=Yc.triangulateShape(f,d);for(n=0,s=d.length;n<s;n++)u=d[n],f=f.concat(u);for(n=0,s=f.length;n<s;n++){var g=f[n];r.push(g.x,g.y,0),a.push(0,0,1),o.push(g.x,g.y)}for(n=0,s=p.length;n<s;n++){var m=p[n],v=m[0]+c,_=m[1]+c,y=m[2]+c;i.push(v,_,y),l+=3}}ke.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var i=[],r=[],a=[],o=[],s=0,l=0;if(Array.isArray(e)===!1)n(e);else for(var u=0;u<e.length;u++)n(e[u]),this.addGroup(s,l,u),s+=l,l=0;this.setIndex(i),this.addAttribute("position",new be(r,3)),this.addAttribute("normal",new be(a,3)),this.addAttribute("uv",new be(o,2))}function Qn(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function $n(e,t){ke.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,a,o=[],s=Math.cos(Ml.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(a=new he,a.fromBufferGeometry(e)):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,f=a.faces,d=0,p=f.length;d<p;d++)for(var g=f[d],m=0;m<3;m++)n=g[c[m]],i=g[c[(m+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),r=l[0]+","+l[1],void 0===u[r]?u[r]={index1:l[0],index2:l[1],face1:d,face2:void 0}:u[r].face2=d;for(r in u){var v=u[r];if(void 0===v.face2||f[v.face1].normal.dot(f[v.face2].normal)<=s){var _=h[v.index1];o.push(_.x,_.y,_.z),_=h[v.index2],o.push(_.x,_.y,_.z)}}this.addAttribute("position",new be(o,3))}function Jn(e,t,n,i,r,a,o,s){he.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Kn(e,t,n,i,r,a,o,s)),this.mergeVertices()}function Kn(e,t,i,r,o,s,l,u){function c(){var n,s,c=new a,h=new a,w=0,x=(t-e)/i;for(s=0;s<=o;s++){var E=[],k=s/o,M=k*(t-e)+e;for(n=0;n<=r;n++){var T=n/r,S=T*u+l,A=Math.sin(S),R=Math.cos(S);h.x=M*A,h.y=-k*i+y,h.z=M*R,p.push(h.x,h.y,h.z),c.set(A,x,R).normalize(),g.push(c.x,c.y,c.z),m.push(T,1-k),E.push(v++)}_.push(E)}for(n=0;n<r;n++)for(s=0;s<o;s++){var C=_[s][n],P=_[s+1][n],O=_[s+1][n+1],L=_[s][n+1];d.push(C,P,L),d.push(P,O,L),w+=6}f.addGroup(b,w,0),b+=w}function h(i){var o,s,c,h=new n,_=new a,w=0,x=i===!0?e:t,E=i===!0?1:-1;for(s=v,o=1;o<=r;o++)p.push(0,y*E,0),g.push(0,E,0),m.push(.5,.5),v++;for(c=v,o=0;o<=r;o++){var k=o/r,M=k*u+l,T=Math.cos(M),S=Math.sin(M);_.x=x*S,_.y=y*E,_.z=x*T,p.push(_.x,_.y,_.z),g.push(0,E,0),h.x=.5*T+.5,h.y=.5*S*E+.5,m.push(h.x,h.y),v++}for(o=0;o<r;o++){var A=s+o,R=c+o;i===!0?d.push(R,R+1,A):d.push(R+1,R,A),w+=3}f.addGroup(b,w,i===!0?1:2),b+=w}ke.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:u};var f=this;e=void 0!==e?e:1,t=void 0!==t?t:1,i=i||1,r=Math.floor(r)||8,o=Math.floor(o)||1,s=void 0!==s&&s,l=void 0!==l?l:0,u=void 0!==u?u:2*Math.PI;var d=[],p=[],g=[],m=[],v=0,_=[],y=i/2,b=0;c(),s===!1&&(e>0&&h(!0),t>0&&h(!1)),this.setIndex(d),this.addAttribute("position",new be(p,3)),this.addAttribute("normal",new be(g,3)),this.addAttribute("uv",new be(m,2))}function ei(e,t,n,i,r,a,o){Jn.call(this,0,e,t,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function ti(e,t,n,i,r,a,o){Kn.call(this,0,e,t,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function ni(e,t,n,i){he.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new ii(e,t,n,i)),this.mergeVertices()}function ii(e,t,i,r){ke.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var o,s,l=[],u=[],c=[],h=[],f=new a,d=new n;for(u.push(0,0,0),c.push(0,0,1),h.push(.5,.5),s=0,o=3;s<=t;s++,o+=3){var p=i+s/t*r;f.x=e*Math.cos(p),f.y=e*Math.sin(p),u.push(f.x,f.y,f.z),c.push(0,0,1),d.x=(u[o]/e+1)/2,d.y=(u[o+1]/e+1)/2,h.push(d.x,d.y)}for(o=1;o<=t;o++)l.push(o,o+1,0);this.setIndex(l),this.addAttribute("position",new be(u,3)),this.addAttribute("normal",new be(c,3)),this.addAttribute("uv",new be(h,2))}function ri(e){Q.call(this),this.type="ShadowMaterial",this.color=new Y(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(e)}function ai(e){Ce.call(this,e),this.type="RawShaderMaterial"}function oi(e){Q.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Y(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function si(e){oi.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function li(e){Q.call(this),this.type="MeshPhongMaterial",this.color=new Y(16777215),this.specular=new Y(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Vo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ui(e){li.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function ci(e){Q.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function hi(e){Q.call(this),this.type="MeshLambertMaterial",this.color=new Y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Vo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function fi(e){Ot.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function di(e,t,n){var i=this,r=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,r===!1&&void 0!==i.onStart&&i.onStart(e,a,o),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}function pi(e){this.manager=void 0!==e?e:$c}function gi(e){this.manager=void 0!==e?e:$c,this._parser=null}function mi(e){this.manager=void 0!==e?e:$c,this._parser=null}function vi(e){this.manager=void 0!==e?e:$c}function _i(e){this.manager=void 0!==e?e:$c}function yi(e){this.manager=void 0!==e?e:$c}function bi(){this.type="Curve",this.arcLengthDivisions=200}function wi(e,t,n,i,r,a,o,s){bi.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function xi(e,t,n,i,r,a){wi.call(this,e,t,n,n,i,r,a),this.type="ArcCurve"}function Ei(){function e(e,a,o,s){t=e,n=o,i=-3*e+3*a-2*o-s,r=2*e-2*a+o+s}var t=0,n=0,i=0,r=0;return{initCatmullRom:function(t,n,i,r,a){e(n,i,a*(i-t),a*(r-n))},initNonuniformCatmullRom:function(t,n,i,r,a,o,s){var l=(n-t)/a-(i-t)/(a+o)+(i-n)/o,u=(i-n)/o-(r-n)/(o+s)+(r-i)/s;l*=o,u*=o,e(n,i,l,u)},calc:function(e){var a=e*e,o=a*e;return t+n*e+i*a+r*o}}}function ki(e,t,n,i){bi.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function Mi(e,t,n,i,r){var a=.5*(i-t),o=.5*(r-n),s=e*e,l=e*s;return(2*n-2*i+a+o)*l+(-3*n+3*i-2*a-o)*s+a*e+n}function Ti(e,t){var n=1-e;return n*n*t}function Si(e,t){return 2*(1-e)*e*t}function Ai(e,t){return e*e*t}function Ri(e,t,n,i){return Ti(e,t)+Si(e,n)+Ai(e,i)}function Ci(e,t){var n=1-e;return n*n*n*t}function Pi(e,t){var n=1-e;return 3*n*n*e*t}function Oi(e,t){return 3*(1-e)*e*e*t}function Li(e,t){return e*e*e*t}function Ni(e,t,n,i,r){return Ci(e,t)+Pi(e,n)+Oi(e,i)+Li(e,r)}function Fi(e,t,i,r){bi.call(this),this.type="CubicBezierCurve",this.v0=e||new n,this.v1=t||new n,this.v2=i||new n,this.v3=r||new n}function Di(e,t,n,i){bi.call(this),this.type="CubicBezierCurve3",this.v0=e||new a,this.v1=t||new a,this.v2=n||new a,this.v3=i||new a}function Ii(e,t){bi.call(this),this.type="LineCurve",this.v1=e||new n,this.v2=t||new n}function Ui(e,t){bi.call(this),this.type="LineCurve3",this.v1=e||new a,this.v2=t||new a}function Hi(e,t,i){bi.call(this),this.type="QuadraticBezierCurve",this.v0=e||new n,this.v1=t||new n,this.v2=i||new n}function zi(e,t,n){bi.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new a,this.v1=t||new a,this.v2=n||new a}function Bi(e){bi.call(this),this.type="SplineCurve",this.points=e||[]}function ji(){bi.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Vi(e){ji.call(this),this.type="Path",this.currentPoint=new n,e&&this.setFromPoints(e)}function Gi(e){Vi.call(this,e),this.uuid=Ml.generateUUID(),this.type="Shape",this.holes=[]}function Wi(e,t){se.call(this),this.type="Light",this.color=new Y(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Xi(e,t,n){Wi.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(se.DefaultUp),this.updateMatrix(),this.groundColor=new Y(t)}function Yi(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.matrix=new i}function qi(){Yi.call(this,new ft(50,1,.5,500))}function Zi(e,t,n,i,r,a){Wi.call(this,e,t),this.type="SpotLight",this.position.copy(se.DefaultUp),this.updateMatrix(),this.target=new se,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new qi}function Qi(e,t,n,i){Wi.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Yi(new ft(90,1,.5,500))}function $i(){Yi.call(this,new ue((-5),5,5,(-5),.5,500))}function Ji(e,t){Wi.call(this,e,t),this.type="DirectionalLight",this.position.copy(se.DefaultUp),this.updateMatrix(),this.target=new se,this.shadow=new $i}function Ki(e,t){Wi.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function er(e,t,n,i){Wi.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function tr(e,t,n,i){hr.call(this,e,t,n,i)}function nr(e,t,n){hr.call(this,e,t,n)}function ir(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function rr(e,t,n,i){ir.call(this,e,t,n,i)}function ar(e,t,n,i){hr.call(this,e,t,n,i)}function or(e,t,n,i){hr.call(this,e,t,n,i)}function sr(e,t,n,i){hr.call(this,e,t,n,i)}function lr(e,t,n,i){ir.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ur(e,t,n,i){ir.call(this,e,t,n,i)}function cr(e,t,n,i){ir.call(this,e,t,n,i)}function hr(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=rh.convertArray(t,this.TimeBufferType),this.values=rh.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function fr(e,t,n,i){hr.call(this,e,t,n,i)}function dr(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Ml.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function pr(e){this.manager=void 0!==e?e:$c,this.textures={}}function gr(e){this.manager=void 0!==e?e:$c}function mr(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function vr(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:$c,this.withCredentials=!1}function _r(e){this.manager=void 0!==e?e:$c,this.texturePath=""}function yr(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:$c,this.options=void 0}function br(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function wr(e){this.type="Font",this.data=e}function xr(e,t,n,i){for(var r=String(e).split(""),a=t/i.resolution,o=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*a,s=[],l=0,u=0,c=0;c<r.length;c++){var h=r[c];if("\n"===h)l=0,u-=o;else{var f=Er(h,n,a,l,u,i);l+=f.offsetX,s.push(f.path)}}return s}function Er(e,t,n,i,r,a){var o=a.glyphs[e]||a.glyphs["?"];if(o){var s,l,u,c,h,f,d,p,g=new br;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,_=m.length;v<_;){var y=m[v++];switch(y){case"m":s=m[v++]*n+i,l=m[v++]*n+r,g.moveTo(s,l);break;case"l":s=m[v++]*n+i,l=m[v++]*n+r,g.lineTo(s,l);break;case"q":u=m[v++]*n+i,c=m[v++]*n+r,h=m[v++]*n+i,f=m[v++]*n+r,g.quadraticCurveTo(h,f,u,c);break;case"b":u=m[v++]*n+i,c=m[v++]*n+r,h=m[v++]*n+i,f=m[v++]*n+r,d=m[v++]*n+i,p=m[v++]*n+r,g.bezierCurveTo(h,f,d,p,u,c)}}return{offsetX:o.ha*n,path:g}}}function kr(e){this.manager=void 0!==e?e:$c}function Mr(e){this.manager=void 0!==e?e:$c}function Tr(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ft,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ft,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Sr(e,t,n){se.call(this),this.type="CubeCamera";var i=90,r=1,o=new ft(i,r,e,t);o.up.set(0,-1,0),o.lookAt(new a(1,0,0)),this.add(o);var s=new ft(i,r,e,t);s.up.set(0,-1,0),s.lookAt(new a((-1),0,0)),this.add(s);var l=new ft(i,r,e,t);l.up.set(0,0,1),l.lookAt(new a(0,1,0)),this.add(l);var u=new ft(i,r,e,t);u.up.set(0,0,-1),u.lookAt(new a(0,(-1),0)),this.add(u);var h=new ft(i,r,e,t);h.up.set(0,-1,0),h.lookAt(new a(0,0,1)),this.add(h);var f=new ft(i,r,e,t);f.up.set(0,-1,0),f.lookAt(new a(0,0,(-1))),this.add(f);var d={format:Ss,magFilter:hs,minFilter:hs};this.renderTarget=new c(n,n,d),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,o,n),n.activeCubeFace=1,e.render(t,s,n),n.activeCubeFace=2,e.render(t,l,n),n.activeCubeFace=3,e.render(t,u,n),n.activeCubeFace=4,e.render(t,h,n),n.texture.generateMipmaps=i,n.activeCubeFace=5,e.render(t,f,n),e.setRenderTarget(null)},this.clear=function(e,t,n,i){for(var r=this.renderTarget,a=0;a<6;a++)r.activeCubeFace=a,e.setRenderTarget(r),e.clear(t,n,i);e.setRenderTarget(null)}}function Ar(){se.call(this),this.type="AudioListener",this.context=hh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Rr(e){se.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Cr(e){Rr.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Pr(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Or(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Lr(e,t,n){var i=n||Nr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function Nr(e,t,n){this.path=t,this.parsedPath=n||Nr.parseTrackName(t),this.node=Nr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Fr(){this.uuid=Ml.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Dr(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,a=new Array(r),o={endingStart:ul,endingEnd:ul},s=0;s!==r;++s){var l=i[s].createInterpolant(null);a[s]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rl,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ir(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ur(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Hr(){ke.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function zr(e,t,n,i){this.uuid=Ml.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=i===!0}function Br(e,t){this.uuid=Ml.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function jr(e,t,n){Br.call(this,e,t),this.meshPerAttribute=n||1}function Vr(e,t,n){fe.call(this,e,t),this.meshPerAttribute=n||1}function Gr(e,t,n,i){this.ray=new Pe(e,t),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Wr(e,t){return e.distance-t.distance}function Xr(e,t,n,i){if(e.visible!==!1&&(e.raycast(t,n),i===!0))for(var r=e.children,a=0,o=r.length;a<o;a++)Xr(r[a],t,n,!0)}function Yr(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function qr(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Zr(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function Qr(e,t){this.min=void 0!==e?e:new n((+(1/0)),(+(1/0))),
this.max=void 0!==t?t:new n((-(1/0)),(-(1/0)))}function $r(e){se.call(this),this.material=e,this.render=function(){}}function Jr(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new ke,u=new be(2*o*3,3);l.addAttribute("position",u),Nt.call(this,l,new Ot({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Kr(e,t){se.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new ke,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1,o=32;r<o;r++,a++){var s=r/o*Math.PI*2,l=a/o*Math.PI*2;i.push(Math.cos(s),Math.sin(s),1,Math.cos(l),Math.sin(l),1)}n.addAttribute("position",new be(i,3));var u=new Ot({fog:!1});this.cone=new Nt(n,u),this.add(this.cone),this.update()}function ea(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,ea(e.children[n]));return t}function ta(e){for(var t=ea(e),n=new ke,i=[],r=[],a=new Y(0,0,1),o=new Y(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.addAttribute("position",new be(i,3)),n.addAttribute("color",new be(r,3));var u=new Ot({vertexColors:ho,depthTest:!1,depthWrite:!1,transparent:!0});Nt.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function na(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new Vn(t,4,2),r=new Re({wireframe:!0,fog:!1});Ne.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ia(e,t){se.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new Ot({fog:!1}),i=new ke;i.addAttribute("position",new fe(new Float32Array(15),3)),this.line=new Lt(i,n),this.add(this.line),this.update()}function ra(e,t,n){se.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Qt(t);i.rotateY(.5*Math.PI),this.material=new Re({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=ho);var r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.addAttribute("color",new fe(a,3)),this.add(new Ne(i,this.material)),this.update()}function aa(e,t,n,i){e=e||10,t=t||10,n=new Y(void 0!==n?n:4473924),i=new Y(void 0!==i?i:8947848);for(var r=t/2,a=e/t,o=e/2,s=[],l=[],u=0,c=0,h=-o;u<=t;u++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var f=u===r?n:i;f.toArray(l,c),c+=3,f.toArray(l,c),c+=3,f.toArray(l,c),c+=3,f.toArray(l,c),c+=3}var d=new ke;d.addAttribute("position",new be(s,3)),d.addAttribute("color",new be(l,3));var p=new Ot({vertexColors:ho});Nt.call(this,d,p)}function oa(e,t,n,i,r,a){e=e||10,t=t||16,n=n||8,i=i||64,r=new Y(void 0!==r?r:4473924),a=new Y(void 0!==a?a:8947848);var o,s,l,u,c,h,f,d=[],p=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),o=Math.sin(l)*e,s=Math.cos(l)*e,d.push(0,0,0),d.push(o,0,s),f=1&u?r:a,p.push(f.r,f.g,f.b),p.push(f.r,f.g,f.b);for(u=0;u<=n;u++)for(f=1&u?r:a,h=e-e/n*u,c=0;c<i;c++)l=c/i*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,d.push(o,0,s),p.push(f.r,f.g,f.b),l=(c+1)/i*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,d.push(o,0,s),p.push(f.r,f.g,f.b);var g=new ke;g.addAttribute("position",new be(d,3)),g.addAttribute("color",new be(p,3));var m=new Ot({vertexColors:ho});Nt.call(this,g,m)}function sa(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new ke,u=new be(2*o*3,3);l.addAttribute("position",u),Nt.call(this,l,new Ot({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function la(e,t,n){se.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new ke;i.addAttribute("position",new be([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new Ot({fog:!1});this.lightPlane=new Lt(i,r),this.add(this.lightPlane),i=new ke,i.addAttribute("position",new be([0,0,0,0,0,1],3)),this.targetLine=new Lt(i,r),this.add(this.targetLine),this.update()}function ua(e){function t(e,t,i){n(e,i),n(t,i)}function n(e,t){a.push(0,0,0),o.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(a.length/3-1)}var i=new ke,r=new Ot({color:16777215,vertexColors:co}),a=[],o=[],s={},l=new Y(16755200),u=new Y(16711680),c=new Y(43775),h=new Y(16777215),f=new Y(3355443);t("n1","n2",l),t("n2","n4",l),t("n4","n3",l),t("n3","n1",l),t("f1","f2",l),t("f2","f4",l),t("f4","f3",l),t("f3","f1",l),t("n1","f1",l),t("n2","f2",l),t("n3","f3",l),t("n4","f4",l),t("p","n1",u),t("p","n2",u),t("p","n3",u),t("p","n4",u),t("u1","u2",c),t("u2","u3",c),t("u3","u1",c),t("c","t",h),t("p","c",f),t("cn1","cn2",f),t("cn3","cn4",f),t("cf1","cf2",f),t("cf3","cf4",f),i.addAttribute("position",new be(a,3)),i.addAttribute("color",new be(o,3)),Nt.call(this,i,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function ca(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new ke;r.setIndex(new fe(n,1)),r.addAttribute("position",new fe(i,3)),Nt.call(this,r,new Ot({color:t})),this.matrixAutoUpdate=!1,this.update()}function ha(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new ke;a.setIndex(new fe(i,1)),a.addAttribute("position",new be(r,3)),Nt.call(this,a,new Ot({color:n})),this.geometry.computeBoundingSphere()}function fa(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],a=new ke;a.addAttribute("position",new be(r,3)),a.computeBoundingSphere(),Lt.call(this,a,new Ot({color:i}));var o=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new ke;s.addAttribute("position",new be(o,3)),s.computeBoundingSphere(),this.add(new Ne(s,new Re({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function da(e,t,n,i,r,a){se.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===dh&&(dh=new ke,dh.addAttribute("position",new be([0,0,0,0,1,0],3)),ph=new Kn(0,.5,1,5,1),ph.translate(0,-.5,0)),this.position.copy(t),this.line=new Lt(dh,new Ot({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ne(ph,new Re({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}function pa(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new ke;i.addAttribute("position",new be(t,3)),i.addAttribute("color",new be(n,3));var r=new Ot({vertexColors:ho});Nt.call(this,i,r)}function ga(e,t,n,i,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ce(e,t,n,r,a,o)}function ma(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function va(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function _a(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new It(e,t)}function ya(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new St(e)}function ba(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new It(e,t)}function wa(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Dt(e)}function xa(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Dt(e)}function Ea(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Dt(e)}function ka(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new a(e,t,n)}function Ma(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new fe(e,t).setDynamic(!0)}function Ta(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new de(e,t)}function Sa(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new pe(e,t)}function Aa(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ge(e,t)}function Ra(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new me(e,t)}function Ca(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ve(e,t)}function Pa(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new _e(e,t)}function Oa(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new ye(e,t)}function La(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new be(e,t)}function Na(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new we(e,t)}function Fa(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ki.call(this,e),this.type="catmullrom",this.closed=!0}function Da(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ki.call(this,e),this.type="catmullrom"}function Ia(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ki.call(this,e),this.type="catmullrom"}function Ua(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new pa(e)}function Ha(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ca(e,t)}function za(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Nt(new $n(e.geometry),new Ot({color:void 0!==t?t:16777215}))}function Ba(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Nt(new jt(e.geometry),new Ot({color:void 0!==t?t:16777215}))}function ja(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new pi(e)}function Va(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new mi(e)}function Ga(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Wa(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}function Xa(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}}(),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,i=n[e];if(void 0!==i){var r=i.indexOf(t);r!==-1&&i.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var i=n.slice(0),r=0,a=i.length;r<a;r++)i[r].call(this,e)}}}});var Ya="90",qa={LEFT:0,MIDDLE:1,RIGHT:2},Za=0,Qa=1,$a=2,Ja=3,Ka=0,eo=1,to=0,no=1,io=2,ro=0,ao=1,oo=2,so=1,lo=2,uo=0,co=1,ho=2,fo=0,po=1,go=2,mo=3,vo=4,_o=5,yo=100,bo=101,wo=102,xo=103,Eo=104,ko=200,Mo=201,To=202,So=203,Ao=204,Ro=205,Co=206,Po=207,Oo=208,Lo=209,No=210,Fo=0,Do=1,Io=2,Uo=3,Ho=4,zo=5,Bo=6,jo=7,Vo=0,Go=1,Wo=2,Xo=0,Yo=1,qo=2,Zo=3,Qo=4,$o=300,Jo=301,Ko=302,es=303,ts=304,ns=305,is=306,rs=307,as=1e3,os=1001,ss=1002,ls=1003,us=1004,cs=1005,hs=1006,fs=1007,ds=1008,ps=1009,gs=1010,ms=1011,vs=1012,_s=1013,ys=1014,bs=1015,ws=1016,xs=1017,Es=1018,ks=1019,Ms=1020,Ts=1021,Ss=1022,As=1023,Rs=1024,Cs=1025,Ps=As,Os=1026,Ls=1027,Ns=33776,Fs=33777,Ds=33778,Is=33779,Us=35840,Hs=35841,zs=35842,Bs=35843,js=36196,Vs=37808,Gs=37809,Ws=37810,Xs=37811,Ys=37812,qs=37813,Zs=37814,Qs=37815,$s=37816,Js=37817,Ks=37818,el=37819,tl=37820,nl=37821,il=2200,rl=2201,al=2202,ol=2300,sl=2301,ll=2302,ul=2400,cl=2401,hl=2402,fl=0,dl=1,pl=2,gl=3e3,ml=3001,vl=3007,_l=3002,yl=3003,bl=3004,wl=3005,xl=3006,El=3200,kl=3201,Ml={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16).toUpperCase();return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Ml.DEG2RAD},radToDeg:function(e){return e*Ml.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};Object.defineProperties(n.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(n.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new n,t=new n;return function(n,i){return e.set(n,n),t.set(i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}}),Object.assign(i.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,a,o,s,l,u,c,h,f,d,p,g){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=i,m[1]=r,m[5]=a,m[9]=o,m[13]=s,m[2]=l,m[6]=u,m[10]=c,m[14]=h,m[3]=f,m[7]=d,m[11]=p,m[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new i).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new a;return function(t){var n=this.elements,i=t.elements,r=1/e.setFromMatrixColumn(t,0).length(),a=1/e.setFromMatrixColumn(t,1).length(),o=1/e.setFromMatrixColumn(t,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){var h=a*u,f=a*c,d=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=f+d*l,t[5]=h-p*l,t[9]=-o*s,t[2]=p-h*l,t[6]=d+f*l,t[10]=a*s}else if("YXZ"===e.order){var g=s*u,m=s*c,v=l*u,_=l*c;t[0]=g+_*o,t[4]=v*o-m,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=m*o-v,t[6]=_+g*o,t[10]=a*s}else if("ZXY"===e.order){var g=s*u,m=s*c,v=l*u,_=l*c;t[0]=g-_*o,t[4]=-a*c,t[8]=v+m*o,t[1]=m+v*o,t[5]=a*u,t[9]=_-g*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var h=a*u,f=a*c,d=o*u,p=o*c;t[0]=s*u,t[4]=d*l-f,t[8]=h*l+p,t[1]=s*c,t[5]=p*l+h,t[9]=f*l-d,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var y=a*s,b=a*l,w=o*s,x=o*l;t[0]=s*u,t[4]=x-y*c,t[8]=w*c+b,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=b*c+w,t[10]=y-x*c}else if("XZY"===e.order){var y=a*s,b=a*l,w=o*s,x=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=y*c+x,t[5]=a*u,t[9]=b*c-w,t[2]=w*c-b,t[6]=o*u,t[10]=x*c+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,i=e._y,r=e._z,a=e._w,o=n+n,s=i+i,l=r+r,u=n*o,c=n*s,h=n*l,f=i*s,d=i*l,p=r*l,g=a*o,m=a*s,v=a*l;return t[0]=1-(f+p),t[4]=c-v,t[8]=h+m,t[1]=c+v,t[5]=1-(u+p),t[9]=d-g,t[2]=h-m,t[6]=d+g,t[10]=1-(u+f),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new a,t=new a,n=new a;return function(i,r,a){var o=this.elements;return n.subVectors(i,r),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(a,n),0===e.lengthSq()&&(1===Math.abs(a.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(a,n)),e.normalize(),t.crossVectors(n,e),o[0]=e.x,o[4]=t.x,o[8]=n.x,o[1]=e.y,o[5]=t.y,o[9]=n.y,o[2]=e.z,o[6]=t.z,o[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],g=n[10],m=n[14],v=n[3],_=n[7],y=n[11],b=n[15],w=i[0],x=i[4],E=i[8],k=i[12],M=i[1],T=i[5],S=i[9],A=i[13],R=i[2],C=i[6],P=i[10],O=i[14],L=i[3],N=i[7],F=i[11],D=i[15];return r[0]=a*w+o*M+s*R+l*L,r[4]=a*x+o*T+s*C+l*N,r[8]=a*E+o*S+s*P+l*F,r[12]=a*k+o*A+s*O+l*D,r[1]=u*w+c*M+h*R+f*L,r[5]=u*x+c*T+h*C+f*N,r[9]=u*E+c*S+h*P+f*F,r[13]=u*k+c*A+h*O+f*D,r[2]=d*w+p*M+g*R+m*L,r[6]=d*x+p*T+g*C+m*N,r[10]=d*E+p*S+g*P+m*F,r[14]=d*k+p*A+g*O+m*D,r[3]=v*w+_*M+y*R+b*L,r[7]=v*x+_*T+y*C+b*N,r[11]=v*E+_*S+y*P+b*F,r[15]=v*k+_*A+y*O+b*D,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new a;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],f=e[14],d=e[3],p=e[7],g=e[11],m=e[15];return d*(+r*s*c-i*l*c-r*o*h+n*l*h+i*o*f-n*s*f)+p*(+t*s*f-t*l*h+r*a*h-i*a*f+i*l*u-r*s*u)+g*(+t*l*c-t*o*f-r*a*c+n*a*f+r*o*u-n*l*u)+m*(-i*o*u-t*s*c+t*o*h+i*a*c-n*a*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],c=i[6],h=i[7],f=i[8],d=i[9],p=i[10],g=i[11],m=i[12],v=i[13],_=i[14],y=i[15],b=d*_*h-v*p*h+v*c*g-u*_*g-d*c*y+u*p*y,w=m*p*h-f*_*h-m*c*g+l*_*g+f*c*y-l*p*y,x=f*v*h-m*d*h+m*u*g-l*v*g-f*u*y+l*d*y,E=m*d*c-f*v*c-m*u*p+l*v*p+f*u*_-l*d*_,k=r*b+a*w+o*x+s*E;if(0===k){var M="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(t===!0)throw new Error(M);return console.warn(M),this.identity()}var T=1/k;return n[0]=b*T,n[1]=(v*p*s-d*_*s-v*o*g+a*_*g+d*o*y-a*p*y)*T,n[2]=(u*_*s-v*c*s+v*o*h-a*_*h-u*o*y+a*c*y)*T,n[3]=(d*c*s-u*p*s-d*o*h+a*p*h+u*o*g-a*c*g)*T,n[4]=w*T,n[5]=(f*_*s-m*p*s+m*o*g-r*_*g-f*o*y+r*p*y)*T,n[6]=(m*c*s-l*_*s-m*o*h+r*_*h+l*o*y-r*c*y)*T,n[7]=(l*p*s-f*c*s+f*o*h-r*p*h-l*o*g+r*c*g)*T,n[8]=x*T,n[9]=(m*d*s-f*v*s-m*a*g+r*v*g+f*a*y-r*d*y)*T,n[10]=(l*v*s-m*u*s+m*a*h-r*v*h-l*a*y+r*u*y)*T,n[11]=(f*u*s-l*d*s-f*a*h+r*d*h+l*a*g-r*u*g)*T,n[12]=E*T,n[13]=(f*v*o-m*d*o+m*a*p-r*v*p-f*a*_+r*d*_)*T,n[14]=(m*u*o-l*v*o-m*a*c+r*v*c+l*a*_-r*u*_)*T,n[15]=(l*d*o-f*u*o+f*a*c-r*d*c-l*a*p+r*u*p)*T,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,l=r*a,u=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+n,u*s-i*a,0,l*s-i*o,u*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new a,t=new i;return function(n,i,r){var a=this.elements,o=e.set(a[0],a[1],a[2]).length(),s=e.set(a[4],a[5],a[6]).length(),l=e.set(a[8],a[9],a[10]).length(),u=this.determinant();u<0&&(o=-o),n.x=a[12],n.y=a[13],n.z=a[14],t.copy(this);var c=1/o,h=1/s,f=1/l;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=h,t.elements[5]*=h,t.elements[6]*=h,t.elements[8]*=f,t.elements[9]*=f,t.elements[10]*=f,i.setFromRotationMatrix(t),r.x=o,r.y=s,r.z=l,this}}(),makePerspective:function(e,t,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(t-e),l=2*r/(n-i),u=(t+e)/(t-e),c=(n+i)/(n-i),h=-(a+r)/(a-r),f=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,i,r,a){var o=this.elements,s=1/(t-e),l=1/(n-i),u=1/(a-r),c=(t+e)*s,h=(n+i)*l,f=(a+r)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(r,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,a,o){var s=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],h=r[a+0],f=r[a+1],d=r[a+2],p=r[a+3];if(c!==p||s!==h||l!==f||u!==d){var g=1-o,m=s*h+l*f+u*d+c*p,v=m>=0?1:-1,_=1-m*m;if(_>Number.EPSILON){var y=Math.sqrt(_),b=Math.atan2(y,m*v);g=Math.sin(g*b)/y,o=Math.sin(o*b)/y}var w=o*v;if(s=s*g+h*w,l=l*g+f*w,u=u*g+d*w,c=c*g+p*w,g===1-o){var x=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=x,l*=x,u*=x,c*=x}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.defineProperties(r.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(r.prototype,{set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,a=e.order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(i/2),c=o(r/2),h=s(n/2),f=s(i/2),d=s(r/2);return"XYZ"===a?(this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d):"YXZ"===a?(this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d):"ZXY"===a?(this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d):"ZYX"===a?(this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d):"YZX"===a?(this._x=h*u*c+l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c-h*f*d):"XZY"===a&&(this._x=h*u*c-l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c+h*f*d),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],a=n[8],o=n[1],s=n[5],l=n[9],u=n[2],c=n[6],h=n[10],f=i+s+h;return f>0?(t=.5/Math.sqrt(f+1),this._w=.25/t,this._x=(c-l)*t,this._y=(a-u)*t,this._z=(o-r)*t):i>s&&i>h?(t=2*Math.sqrt(1+i-s-h),this._w=(c-l)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(a+u)/t):s>h?(t=2*Math.sqrt(1+s-i-h),this._w=(a-u)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+h-i-s),this._w=(o-r)/t,this._x=(a+u)/t,this._y=(l+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new a,n=1e-6;return function(i,r){return void 0===t&&(t=new a),e=i.dot(r)+1,e<n?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.crossVectors(i,r),
this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+i*l-r*s,this._y=i*u+a*s+r*o-n*l,this._z=r*u+a*l+n*s-i*o,this._w=a*u-n*o-i*s-r*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var l=Math.atan2(s,o),u=Math.sin((1-t)*l)/s,c=Math.sin(t*l)/s;return this._w=a*u+this._w*c,this._x=n*u+this._x*c,this._y=i*u+this._y*c,this._z=r*u+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(a.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new r;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new r;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*i-o*n,u=s*n+o*t-r*i,c=s*i+r*n-a*t,h=-r*t-a*n-o*i;return this.x=l*s+h*-r+u*-o-c*-a,this.y=u*s+h*-a+c*-r-l*-o,this.z=c*s+h*-o+l*-a-u*-r,this},project:function(){var e=new i;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new i;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new a,t=new a;return function(n,i){return e.set(n,n,n),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new a;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new a;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Ml.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(o.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=r,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new a;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=i[0],g=i[3],m=i[6],v=i[1],_=i[4],y=i[7],b=i[2],w=i[5],x=i[8];return r[0]=a*p+o*v+s*b,r[3]=a*g+o*_+s*w,r[6]=a*m+o*y+s*x,r[1]=l*p+u*v+c*b,r[4]=l*g+u*_+c*w,r[7]=l*m+u*y+c*x,r[2]=h*p+f*v+d*b,r[5]=h*g+f*_+d*w,r[8]=h*m+f*y+d*x,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*r*u+n*o*s+i*r*l-i*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],f=n[8],d=f*l-u*h,p=u*c-f*s,g=h*s-l*c,m=r*d+a*p+o*g;if(0===m){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(t===!0)throw new Error(v);return console.warn(v),this.identity()}var _=1/m;return i[0]=d*_,i[1]=(o*h-f*a)*_,i[2]=(u*a-o*l)*_,i[3]=p*_,i[4]=(f*r-o*c)*_,i[5]=(o*s-u*r)*_,i[6]=g*_,i[7]=(a*c-h*r)*_,i[8]=(l*r-a*s)*_,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,a,o){var s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-i*l,i*s,-i*(-l*a+s*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],l=i[4],u=i[7];return i[0]=t*r+n*s,i[3]=t*a+n*l,i[6]=t*o+n*u,i[1]=-n*r+t*s,i[4]=-n*a+t*l,i[7]=-n*o+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Tl=0;s.DEFAULT_IMAGE=void 0,s.DEFAULT_MAPPING=$o,s.prototype=Object.assign(Object.create(t.prototype),{constructor:s,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){function t(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}var n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=Ml.generateUUID()),n||void 0!==e.images[r.uuid]||(e.images[r.uuid]={uuid:r.uuid,url:t(r)}),i.image=r.uuid}return n||(e.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===$o){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case as:e.x=e.x-Math.floor(e.x);break;case os:e.x=e.x<0?0:1;break;case ss:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case as:e.y=e.y-Math.floor(e.y);break;case os:e.y=e.y<0?0:1;break;case ss:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(s.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Object.assign(l.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],h=s[1],f=s[5],d=s[9],p=s[2],g=s[6],m=s[10];if(Math.abs(u-h)<a&&Math.abs(c-p)<a&&Math.abs(d-g)<a){if(Math.abs(u+h)<o&&Math.abs(c+p)<o&&Math.abs(d+g)<o&&Math.abs(l+f+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var v=(l+1)/2,_=(f+1)/2,y=(m+1)/2,b=(u+h)/4,w=(c+p)/4,x=(d+g)/4;return v>_&&v>y?v<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(v),i=b/n,r=w/n):_>y?_<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(_),n=b/i,r=x/i):y<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(y),n=w/r,i=x/r),this.set(n,i,r,t),this}var E=Math.sqrt((g-d)*(g-d)+(c-p)*(c-p)+(h-u)*(h-u));return Math.abs(E)<.001&&(E=1),this.x=(g-d)/E,this.y=(c-p)/E,this.z=(h-u)/E,this.w=Math.acos((l+f+m-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,i){return void 0===e&&(e=new l,t=new l),e.set(n,n,n,n),t.set(i,i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),u.prototype=Object.assign(Object.create(t.prototype),{constructor:u,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),c.prototype=Object.create(u.prototype),c.prototype.constructor=c,c.prototype.isWebGLRenderTargetCube=!0,h.prototype=Object.create(s.prototype),h.prototype.constructor=h,h.prototype.isDataTexture=!0,f.prototype=Object.create(s.prototype),f.prototype.constructor=f,f.prototype.isCubeTexture=!0,Object.defineProperty(f.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Sl=new s,Al=new f,Rl=[],Cl=[],Pl=new Float32Array(16),Ol=new Float32Array(9);V.prototype.setValue=function(e,t){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var a=n[i];a.setValue(e,t[a.id])}};var Ll=/([\w\d_]+)(\])?(\[|\.)?/g;X.prototype.setValue=function(e,t,n){var i=this.map[t];void 0!==i&&i.setValue(e,n,this.renderer)},X.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},X.upload=function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var o=t[r],s=n[o.id];s.needsUpdate!==!1&&o.setValue(e,s.value,i)}},X.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n};var Nl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(Y.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,i){if(t=Ml.euclideanModulo(t,1),n=Ml.clamp(n,0,1),i=Ml.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,a=2*i-r;this.r=e(a,r,t+1/3),this.g=e(a,r,t),this.b=e(a,r,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(o,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=n[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(e&&e.length>0){var u=Nl[e];void 0!==u?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,n,i=e||{h:0,s:0,l:0},r=this.r,a=this.g,o=this.b,s=Math.max(r,a,o),l=Math.min(r,a,o),u=(l+s)/2;if(l===s)t=0,n=0;else{var c=s-l;switch(n=u<=.5?c/(s+l):c/(2-s-l),s){case r:t=(a-o)/c+(a<o?6:0);break;case a:t=(o-r)/c+2;break;case o:t=(r-a)/c+4}t/=6}return i.h=t,i.s=n,i.l=u,i},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var i=this.getHSL();return i.h+=e,i.s+=t,i.l+=n,this.setHSL(i.h,i.s,i.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var Fl={common:{diffuse:{value:new Y(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new o},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Y(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Y(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new o}}},Dl={merge:function(e){
for(var t={},n=0;n<e.length;n++){var i=this.clone(e[n]);for(var r in i)t[r]=i[r]}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var i in e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}},Il="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",Ul="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",Hl="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",zl="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",Bl="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",jl="\nvec3 transformed = vec3( position );\n",Vl="\nvec3 objectNormal = vec3( normal );\n",Gl="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",Wl="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",Xl="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",Yl="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",ql="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",Zl="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",Ql="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",$l="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",Jl="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Kl="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",eu="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",tu="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",nu="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",iu="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",ru="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",au="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",ou="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",su="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",lu="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",uu="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",cu="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",hu="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",fu="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",du="\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",pu="#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",gu="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",mu="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",vu="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",_u="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",yu="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",bu="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",wu="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",xu="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",Eu="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",ku="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",Mu="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",Tu="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",Su="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Au="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",Ru="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",Cu="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",Pu="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",Ou="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",Lu="#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",Nu="#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",Fu="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",Du="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Iu="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",Uu="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",Hu="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",zu="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",Bu="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",ju="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",Vu="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",Gu="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",Wu="#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",Xu="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",Yu="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",qu="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Zu="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",Qu="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",$u="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",Ju="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",Ku="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",ec="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",tc="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",nc="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",ic="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",rc="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",ac="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",oc="#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",sc="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",lc="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uc="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",cc="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",hc="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",fc="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",dc="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",pc="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",gc="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",mc="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",vc="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",_c="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",yc="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",bc="uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",wc="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",xc="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Ec="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",kc="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Mc="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",Tc="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",Sc="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",Ac="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",Rc="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",Cc="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",Pc="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",Oc="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",Lc="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",Nc="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Fc="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",Dc="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",Ic="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",Uc={
alphamap_fragment:Il,alphamap_pars_fragment:Ul,alphatest_fragment:Hl,aomap_fragment:zl,aomap_pars_fragment:Bl,begin_vertex:jl,beginnormal_vertex:Vl,bsdfs:Gl,bumpmap_pars_fragment:Wl,clipping_planes_fragment:Xl,clipping_planes_pars_fragment:Yl,clipping_planes_pars_vertex:ql,clipping_planes_vertex:Zl,color_fragment:Ql,color_pars_fragment:$l,color_pars_vertex:Jl,color_vertex:Kl,common:eu,cube_uv_reflection_fragment:tu,defaultnormal_vertex:nu,displacementmap_pars_vertex:iu,displacementmap_vertex:ru,emissivemap_fragment:au,emissivemap_pars_fragment:ou,encodings_fragment:su,encodings_pars_fragment:lu,envmap_fragment:uu,envmap_pars_fragment:cu,envmap_pars_vertex:hu,envmap_vertex:fu,fog_vertex:du,fog_pars_vertex:pu,fog_fragment:gu,fog_pars_fragment:mu,gradientmap_pars_fragment:vu,lightmap_fragment:_u,lightmap_pars_fragment:yu,lights_lambert_vertex:bu,lights_pars:wu,lights_phong_fragment:xu,lights_phong_pars_fragment:Eu,lights_physical_fragment:ku,lights_physical_pars_fragment:Mu,lights_template:Tu,logdepthbuf_fragment:Su,logdepthbuf_pars_fragment:Au,logdepthbuf_pars_vertex:Ru,logdepthbuf_vertex:Cu,map_fragment:Pu,map_pars_fragment:Ou,map_particle_fragment:Lu,map_particle_pars_fragment:Nu,metalnessmap_fragment:Fu,metalnessmap_pars_fragment:Du,morphnormal_vertex:Iu,morphtarget_pars_vertex:Uu,morphtarget_vertex:Hu,normal_fragment:zu,normalmap_pars_fragment:Bu,packing:ju,premultiplied_alpha_fragment:Vu,project_vertex:Gu,dithering_fragment:Wu,dithering_pars_fragment:Xu,roughnessmap_fragment:Yu,roughnessmap_pars_fragment:qu,shadowmap_pars_fragment:Zu,shadowmap_pars_vertex:Qu,shadowmap_vertex:$u,shadowmask_pars_fragment:Ju,skinbase_vertex:Ku,skinning_pars_vertex:ec,skinning_vertex:tc,skinnormal_vertex:nc,specularmap_fragment:ic,specularmap_pars_fragment:rc,tonemapping_fragment:ac,tonemapping_pars_fragment:oc,uv_pars_fragment:sc,uv_pars_vertex:lc,uv_vertex:uc,uv2_pars_fragment:cc,uv2_pars_vertex:hc,uv2_vertex:fc,worldpos_vertex:dc,cube_frag:pc,cube_vert:gc,depth_frag:mc,depth_vert:vc,distanceRGBA_frag:_c,distanceRGBA_vert:yc,equirect_frag:bc,equirect_vert:wc,linedashed_frag:xc,linedashed_vert:Ec,meshbasic_frag:kc,meshbasic_vert:Mc,meshlambert_frag:Tc,meshlambert_vert:Sc,meshphong_frag:Ac,meshphong_vert:Rc,meshphysical_frag:Cc,meshphysical_vert:Pc,normal_frag:Oc,normal_vert:Lc,points_frag:Nc,points_vert:Fc,shadow_frag:Dc,shadow_vert:Ic},Hc={basic:{uniforms:Dl.merge([Fl.common,Fl.specularmap,Fl.envmap,Fl.aomap,Fl.lightmap,Fl.fog]),vertexShader:Uc.meshbasic_vert,fragmentShader:Uc.meshbasic_frag},lambert:{uniforms:Dl.merge([Fl.common,Fl.specularmap,Fl.envmap,Fl.aomap,Fl.lightmap,Fl.emissivemap,Fl.fog,Fl.lights,{emissive:{value:new Y(0)}}]),vertexShader:Uc.meshlambert_vert,fragmentShader:Uc.meshlambert_frag},phong:{uniforms:Dl.merge([Fl.common,Fl.specularmap,Fl.envmap,Fl.aomap,Fl.lightmap,Fl.emissivemap,Fl.bumpmap,Fl.normalmap,Fl.displacementmap,Fl.gradientmap,Fl.fog,Fl.lights,{emissive:{value:new Y(0)},specular:{value:new Y(1118481)},shininess:{value:30}}]),vertexShader:Uc.meshphong_vert,fragmentShader:Uc.meshphong_frag},standard:{uniforms:Dl.merge([Fl.common,Fl.envmap,Fl.aomap,Fl.lightmap,Fl.emissivemap,Fl.bumpmap,Fl.normalmap,Fl.displacementmap,Fl.roughnessmap,Fl.metalnessmap,Fl.fog,Fl.lights,{emissive:{value:new Y(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Uc.meshphysical_vert,fragmentShader:Uc.meshphysical_frag},points:{uniforms:Dl.merge([Fl.points,Fl.fog]),vertexShader:Uc.points_vert,fragmentShader:Uc.points_frag},dashed:{uniforms:Dl.merge([Fl.common,Fl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Uc.linedashed_vert,fragmentShader:Uc.linedashed_frag},depth:{uniforms:Dl.merge([Fl.common,Fl.displacementmap]),vertexShader:Uc.depth_vert,fragmentShader:Uc.depth_frag},normal:{uniforms:Dl.merge([Fl.common,Fl.bumpmap,Fl.normalmap,Fl.displacementmap,{opacity:{value:1}}]),vertexShader:Uc.normal_vert,fragmentShader:Uc.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Uc.cube_vert,fragmentShader:Uc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Uc.equirect_vert,fragmentShader:Uc.equirect_frag},distanceRGBA:{uniforms:Dl.merge([Fl.common,Fl.displacementmap,{referencePosition:{value:new a},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Uc.distanceRGBA_vert,fragmentShader:Uc.distanceRGBA_frag},shadow:{uniforms:Dl.merge([Fl.lights,Fl.fog,{color:{value:new Y(0)},opacity:{value:1}}]),vertexShader:Uc.shadow_vert,fragmentShader:Uc.shadow_frag}};Hc.physical={uniforms:Dl.merge([Hc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Uc.meshphysical_vert,fragmentShader:Uc.meshphysical_frag},q.prototype=Object.create(s.prototype),q.prototype.constructor=q;var zc=0;Q.prototype=Object.assign(Object.create(t.prototype),{constructor:Q,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):"overdraw"===t?this[t]=Number(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===so;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}var n=void 0===e||"string"==typeof e;n&&(e={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==po&&(i.blending=this.blending),this.flatShading===!0&&(i.flatShading=this.flatShading),this.side!==ro&&(i.side=this.side),this.vertexColors!==uo&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(i.morphTargets=!0),this.skinning===!0&&(i.skinning=!0),this.visible===!1&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),n){var r=t(e.textures),a=t(e.images);r.length>0&&(i.textures=r),a.length>0&&(i.images=a)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),$.prototype=Object.create(Q.prototype),$.prototype.constructor=$,$.prototype.isMeshDepthMaterial=!0,$.prototype.copy=function(e){return Q.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},J.prototype=Object.create(Q.prototype),J.prototype.constructor=J,J.prototype.isMeshDistanceMaterial=!0,J.prototype.copy=function(e){return Q.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Object.assign(K.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=+(1/0),n=+(1/0),i=+(1/0),r=-(1/0),a=-(1/0),o=-(1/0),s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(e){for(var t=+(1/0),n=+(1/0),i=+(1/0),r=-(1/0),a=-(1/0),o=-(1/0),s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new a;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new a;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new a;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){function e(e){var a=e.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(n=0,i=o.length;n<i;n++)r.copy(o[n]),r.applyMatrix4(e.matrixWorld),t.expandByPoint(r)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(n=0,i=s.count;n<i;n++)r.fromBufferAttribute(s,n).applyMatrix4(e.matrixWorld),t.expandByPoint(r)}}var t,n,i,r=new a;return function(n){return t=this,n.updateMatrixWorld(!0),n.traverse(e),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var n=t||new a;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new a;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){function e(e){var r,a;for(r=0,a=e.length-3;r<=a;r+=3){l.fromArray(e,r);var o=c.x*Math.abs(l.x)+c.y*Math.abs(l.y)+c.z*Math.abs(l.z),s=t.dot(l),u=n.dot(l),h=i.dot(l);if(Math.max(-Math.max(s,u,h),Math.min(s,u,h))>o)return!1}return!0}var t=new a,n=new a,i=new a,r=new a,o=new a,s=new a,l=new a,u=new a,c=new a,h=new a;return function(a){if(this.isEmpty())return!1;this.getCenter(u),c.subVectors(this.max,u),t.subVectors(a.a,u),n.subVectors(a.b,u),i.subVectors(a.c,u),r.subVectors(n,t),o.subVectors(i,n),s.subVectors(t,i);var l=[0,-r.z,r.y,0,-o.z,o.y,0,-s.z,s.y,r.z,0,-r.x,o.z,0,-o.x,s.z,0,-s.x,-r.y,r.x,0,-o.y,o.x,0,-s.y,s.x,0];return!!e(l)&&(l=[1,0,0,0,1,0,0,0,1],!!e(l)&&(h.crossVectors(r,o),l=[h.x,h.y,h.z],e(l)))}}(),clampPoint:function(e,t){var n=t||new a;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new a;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var e=new a;return function(t){var n=t||new ee;return this.getCenter(n.center),n.radius=.5*this.getSize(e).length(),n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new a,new a,new a,new a,new a,new a,new a,new a];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(ee.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new K;return function(t,n){var i=this.center;void 0!==n?i.copy(n):e.setFromPoints(t).getCenter(i);for(var r=0,a=0,o=t.length;a<o;a++)r=Math.max(r,i.distanceToSquared(t[a]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),i=t||new a;return i.copy(e),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(e){var t=e||new K;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(te.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new a,t=new a;return function(n,i,r){var a=e.subVectors(r,i).cross(t.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(a,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){var n=t||new a;return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new a;return function(t,n){var i=n||new a,r=t.delta(e),o=this.normal.dot(r);if(0!==o){var s=-(t.start.dot(this.normal)+this.constant)/o;if(!(s<0||s>1))return i.copy(r).multiplyScalar(s).add(t.start)}else if(0===this.distanceToPoint(t.start))return i.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new a;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new a,t=new o;return function(n,i){var r=i||t.getNormalMatrix(n),a=this.coplanarPoint(e).applyMatrix4(n),o=this.normal.applyMatrix3(r).normalize();return this.constant=-a.dot(o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(ne.prototype,{set:function(e,t,n,i,r,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],g=n[12],m=n[13],v=n[14],_=n[15];return t[0].setComponents(o-i,c-s,p-h,_-g).normalize(),t[1].setComponents(o+i,c+s,p+h,_+g).normalize(),t[2].setComponents(o+r,c+l,p+f,_+m).normalize(),t[3].setComponents(o-r,c-l,p-f,_-m).normalize(),t[4].setComponents(o-a,c-u,p-d,_-v).normalize(),t[5].setComponents(o+a,c+u,p+d,_+v).normalize(),this},intersectsObject:function(){var e=new ee;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new ee;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){var a=t[r].distanceToPoint(n);if(a<i)return!1}return!0},intersectsBox:function(){var e=new a,t=new a;return function(n){for(var i=this.planes,r=0;r<6;r++){var a=i[r];e.x=a.normal.x>0?n.min.x:n.max.x,t.x=a.normal.x>0?n.max.x:n.min.x,e.y=a.normal.y>0?n.min.y:n.max.y,t.y=a.normal.y>0?n.max.y:n.min.y,e.z=a.normal.z>0?n.min.z:n.max.z,t.z=a.normal.z>0?n.max.z:n.min.z;var o=a.distanceToPoint(e),s=a.distanceToPoint(t);if(o<0&&s<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}),ae.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ae.DefaultOrder="XYZ",Object.defineProperties(ae.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(ae.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=Ml.clamp,r=e.elements,a=r[0],o=r[4],s=r[8],l=r[1],u=r[5],c=r[9],h=r[2],f=r[6],d=r[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===t?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===t?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new i;return function(t,n,i){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new r;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new a(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(oe.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var Bc=0;se.DefaultUp=new a(0,1,0),se.DefaultMatrixAutoUpdate=!0,se.prototype=Object.assign(Object.create(t.prototype),{constructor:se,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new r;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new r;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new a(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new a(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new a(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new a;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new a(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new a(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new a(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new i;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new i,t=new a;return function(n,i,r){n.isVector3?t.copy(n):t.set(n,i,r),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return n!==-1&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],a=r.getObjectByProperty(e,t);if(void 0!==a)return a}},getWorldPosition:function(e){var t=e||new a;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new a,t=new a;return function(n){var i=n||new r;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,i,t),i}}(),getWorldRotation:function(){var e=new r;return function(t){var n=t||new ae;return this.getWorldQuaternion(e),n.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new a,t=new r;return function(n){var i=n||new a;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(){var e=new r;return function(t){var n=t||new a;return this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){function t(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}function n(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}var i=void 0===e||"string"==typeof e,r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.matrix=this.matrix.toArray(),void 0!==this.geometry){a.geometry=t(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var s=o.shapes;if(Array.isArray(s))for(var l=0,u=s.length;l<u;l++){var c=s[l];t(e.shapes,c)}else t(e.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],l=0,u=this.material.length;l<u;l++)h.push(t(e.materials,this.material[l]));a.material=h}else a.material=t(e.materials,this.material);if(this.children.length>0){a.children=[];for(var l=0;l<this.children.length;l++)a.children.push(this.children[l].toJSON(e).object)}if(i){var f=n(e.geometries),d=n(e.materials),p=n(e.textures),g=n(e.images),s=n(e.shapes);f.length>0&&(r.geometries=f),d.length>0&&(r.materials=d),p.length>0&&(r.textures=p),g.length>0&&(r.images=g),s.length>0&&(r.shapes=s)}return r.object=a,r},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(var n=0;n<e.children.length;n++){
var i=e.children[n];this.add(i.clone())}return this}}),le.prototype=Object.assign(Object.create(se.prototype),{constructor:le,isCamera:!0,copy:function(e,t){return se.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new r;return function(t){var n=t||new a;return this.getWorldQuaternion(e),n.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){se.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),ue.prototype=Object.assign(Object.create(le.prototype),{constructor:ue,isOrthographicCamera:!0,copy:function(e,t){return le.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;r+=c*(this.view.offsetX/l),a=r+c*(this.view.width/l),o-=h*(this.view.offsetY/u),s=o-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far)},toJSON:function(e){var t=se.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(ce.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var jc=0;he.prototype=Object.assign(Object.create(t.prototype),{constructor:he,isGeometry:!0,applyMatrix:function(e){for(var t=(new o).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){var r=this.vertices[n];r.applyMatrix4(e)}for(var n=0,i=this.faces.length;n<i;n++){var a=this.faces[n];a.normal.applyMatrix3(t).normalize();for(var s=0,l=a.vertexNormals.length;s<l;s++)a.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new i;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new i;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new i;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new i;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new i;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new se;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,n,r){var a=void 0!==l?[f[e].clone(),f[t].clone(),f[n].clone()]:[],o=void 0!==u?[i.colors[e].clone(),i.colors[t].clone(),i.colors[n].clone()]:[],s=new ce(e,t,n,a,o,r);i.faces.push(s),void 0!==c&&i.faceVertexUvs[0].push([d[e].clone(),d[t].clone(),d[n].clone()]),void 0!==h&&i.faceVertexUvs[1].push([p[e].clone(),p[t].clone(),p[n].clone()])}var i=this,r=null!==e.index?e.index.array:void 0,o=e.attributes,s=o.position.array,l=void 0!==o.normal?o.normal.array:void 0,u=void 0!==o.color?o.color.array:void 0,c=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var f=[],d=[],p=[],g=0,m=0;g<s.length;g+=3,m+=2)i.vertices.push(new a(s[g],s[g+1],s[g+2])),void 0!==l&&f.push(new a(l[g],l[g+1],l[g+2])),void 0!==u&&i.colors.push(new Y(u[g],u[g+1],u[g+2])),void 0!==c&&d.push(new n(c[m],c[m+1])),void 0!==h&&p.push(new n(h[m],h[m+1]));var v=e.groups;if(v.length>0)for(var g=0;g<v.length;g++)for(var _=v[g],y=_.start,b=_.count,m=y,w=y+b;m<w;m+=3)void 0!==r?t(r[m],r[m+1],r[m+2],_.materialIndex):t(m,m+1,m+2,_.materialIndex);else if(void 0!==r)for(var g=0;g<r.length;g+=3)t(r[g],r[g+1],r[g+2]);else for(var g=0;g<s.length/3;g+=3)t(g,g+1,g+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new i;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new a,t=new a,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],s=this.vertices[r.b],l=this.vertices[r.c];e.subVectors(l,s),t.subVectors(o,s),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,n,i,r,o,s;for(s=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)s[t]=new a;if(e){var l,u,c,h=new a,f=new a;for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],l=this.vertices[o.a],u=this.vertices[o.b],c=this.vertices[o.c],h.subVectors(c,u),f.subVectors(l,u),h.cross(f),s[o.a].add(h),s[o.b].add(h),s[o.c].add(h)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o=this.faces[i],s[o.a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)s[t].normalize();for(i=0,r=this.faces.length;i<r;i++){o=this.faces[i];var d=o.vertexNormals;3===d.length?(d[0].copy(s[o.a]),d[1].copy(s[o.b]),d[2].copy(s[o.c])):(d[0]=s[o.a].clone(),d[1]=s[o.b].clone(),d[2]=s[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for(r=this.faces[n],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var o=new he;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var s,l,u=this.morphNormals[e].faceNormals,c=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)s=new a,l={a:new a,b:new a,c:new a},u.push(s),c.push(l)}var h=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var s,l;for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],s=h.faceNormals[n],l=h.vertexNormals[n],s.copy(r.normal),l.a.copy(r.vertexNormals[0]),l.b.copy(r.vertexNormals[1]),l.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new K),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ee),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var i,r=this.vertices.length,a=this.vertices,s=e.vertices,l=this.faces,u=e.faces,c=this.faceVertexUvs[0],h=e.faceVertexUvs[0],f=this.colors,d=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new o).getNormalMatrix(t));for(var p=0,g=s.length;p<g;p++){var m=s[p],v=m.clone();void 0!==t&&v.applyMatrix4(t),a.push(v)}for(var p=0,g=d.length;p<g;p++)f.push(d[p].clone());for(p=0,g=u.length;p<g;p++){var _,y,b,w=u[p],x=w.vertexNormals,E=w.vertexColors;_=new ce(w.a+r,w.b+r,w.c+r),_.normal.copy(w.normal),void 0!==i&&_.normal.applyMatrix3(i).normalize();for(var k=0,M=x.length;k<M;k++)y=x[k].clone(),void 0!==i&&y.applyMatrix3(i).normalize(),_.vertexNormals.push(y);_.color.copy(w.color);for(var k=0,M=E.length;k<M;k++)b=E[k],_.vertexColors.push(b.clone());_.materialIndex=w.materialIndex+n,l.push(_)}for(p=0,g=h.length;p<g;p++){var T=h[p],S=[];if(void 0!==T){for(var k=0,M=T.length;k<M;k++)S.push(T[k].clone());c.push(S)}}},mergeMesh:function(e){return e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),void this.merge(e.geometry,e.matrix)):void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,i,r,a,o,s,l={},u=[],c=[],h=4,f=Math.pow(10,h);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],t=Math.round(e.x*f)+"_"+Math.round(e.y*f)+"_"+Math.round(e.z*f),void 0===l[t]?(l[t]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[t]];var d=[];for(n=0,i=this.faces.length;n<i;n++){r=this.faces[n],r.a=c[r.a],r.b=c[r.b],r.c=c[r.c],a=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(a[p]===a[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var g=d[n];for(this.faces.splice(g,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(g,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new a(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,n=t.length,i=0;i<n;i++)t[i]._id=i;t.sort(e);var r,a,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];o&&o.length===n&&(r=[]),s&&s.length===n&&(a=[]);for(var i=0;i<n;i++){var l=t[i]._id;r&&r.push(o[l]),a&&a.push(s[l])}r&&(this.faceVertexUvs[0]=r),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==f[t]?f[t]:(f[t]=h.length/3,h.push(e.x,e.y,e.z),f[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==p[t]?p[t]:(p[t]=d.length,d.push(e.getHex()),p[t])}function i(e){var t=e.x.toString()+e.y.toString();return void 0!==m[t]?m[t]:(m[t]=g.length/2,g.push(e.x,e.y),m[t])}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var o in a)void 0!==a[o]&&(r[o]=a[o]);return r}for(var s=[],l=0;l<this.vertices.length;l++){var u=this.vertices[l];s.push(u.x,u.y,u.z)}for(var c=[],h=[],f={},d=[],p={},g=[],m={},l=0;l<this.faces.length;l++){var v=this.faces[l],_=!0,y=!1,b=void 0!==this.faceVertexUvs[0][l],w=v.normal.length()>0,x=v.vertexNormals.length>0,E=1!==v.color.r||1!==v.color.g||1!==v.color.b,k=v.vertexColors.length>0,M=0;if(M=e(M,0,0),M=e(M,1,_),M=e(M,2,y),M=e(M,3,b),M=e(M,4,w),M=e(M,5,x),M=e(M,6,E),M=e(M,7,k),c.push(M),c.push(v.a,v.b,v.c),c.push(v.materialIndex),b){var T=this.faceVertexUvs[0][l];c.push(i(T[0]),i(T[1]),i(T[2]))}if(w&&c.push(t(v.normal)),x){var S=v.vertexNormals;c.push(t(S[0]),t(S[1]),t(S[2]))}if(E&&c.push(n(v.color)),k){var A=v.vertexColors;c.push(n(A[0]),n(A[1]),n(A[2]))}}return r.data={},r.data.vertices=s,r.data.normals=h,d.length>0&&(r.data.colors=d),g.length>0&&(r.data.uvs=[g]),r.data.faces=c,r},clone:function(){return(new he).copy(this)},copy:function(e){var t,n,i,r,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=c.length;i<r;i++){var h=c[i],f=[];for(a=0,o=h.length;a<o;a++){var d=h[a];f.push(d.clone())}this.faceVertexUvs[t].push(f)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var g={};if(g.name=p[t].name,void 0!==p[t].vertices)for(g.vertices=[],i=0,r=p[t].vertices.length;i<r;i++)g.vertices.push(p[t].vertices[i].clone());if(void 0!==p[t].normals)for(g.normals=[],i=0,r=p[t].normals.length;i<r;i++)g.normals.push(p[t].normals[i].clone());this.morphTargets.push(g)}var m=e.morphNormals;for(t=0,n=m.length;t<n;t++){var v={};if(void 0!==m[t].vertexNormals)for(v.vertexNormals=[],i=0,r=m[t].vertexNormals.length;i<r;i++){var _=m[t].vertexNormals[i],y={};y.a=_.a.clone(),y.b=_.b.clone(),y.c=_.c.clone(),v.vertexNormals.push(y)}if(void 0!==m[t].faceNormals)for(v.faceNormals=[],i=0,r=m[t].faceNormals.length;i<r;i++)v.faceNormals.push(m[t].faceNormals[i].clone());this.morphNormals.push(v)}var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());var w=e.skinIndices;for(t=0,n=w.length;t<n;t++)this.skinIndices.push(w[t].clone());var x=e.lineDistances;for(t=0,n=x.length;t<n;t++)this.lineDistances.push(x[t]);var E=e.boundingBox;null!==E&&(this.boundingBox=E.clone());var k=e.boundingSphere;return null!==k&&(this.boundingSphere=k.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(fe.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Object.assign(fe.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new Y),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];t[n++]=a.a,t[n++]=a.b,t[n++]=a.c}return this},copyVector2sArray:function(e){for(var t=this.array,i=0,r=0,a=e.length;r<a;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new n),t[i++]=o.x,t[i++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new a),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new l),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),de.prototype=Object.create(fe.prototype),de.prototype.constructor=de,pe.prototype=Object.create(fe.prototype),pe.prototype.constructor=pe,ge.prototype=Object.create(fe.prototype),ge.prototype.constructor=ge,me.prototype=Object.create(fe.prototype),me.prototype.constructor=me,ve.prototype=Object.create(fe.prototype),ve.prototype.constructor=ve,_e.prototype=Object.create(fe.prototype),_e.prototype.constructor=_e,ye.prototype=Object.create(fe.prototype),ye.prototype.constructor=ye,be.prototype=Object.create(fe.prototype),be.prototype.constructor=be,we.prototype=Object.create(fe.prototype),we.prototype.constructor=we,Object.assign(xe.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,n.push(t)),t={start:3*a,materialIndex:i})}void 0!==t&&(t.count=3*a-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,i=e.faces,r=e.vertices,a=e.faceVertexUvs,o=a[0]&&a[0].length>0,s=a[1]&&a[1].length>0,l=e.morphTargets,u=l.length;if(u>0){t=[];for(var c=0;c<u;c++)t[c]=[];this.morphTargets.position=t}var h,f=e.morphNormals,d=f.length;if(d>0){h=[];for(var c=0;c<d;c++)h[c]=[];this.morphTargets.normal=h}for(var p=e.skinIndices,g=e.skinWeights,m=p.length===r.length,v=g.length===r.length,c=0;c<i.length;c++){var _=i[c];this.vertices.push(r[_.a],r[_.b],r[_.c]);var y=_.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=_.normal;this.normals.push(b,b,b)}var w=_.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var x=_.color;this.colors.push(x,x,x)}if(o===!0){var E=a[0][c];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new n,new n,new n))}if(s===!0){var E=a[1][c];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new n,new n,new n))}for(var k=0;k<u;k++){var M=l[k].vertices;t[k].push(M[_.a],M[_.b],M[_.c])}for(var k=0;k<d;k++){var T=f[k].vertexNormals[c];h[k].push(T.a,T.b,T.c)}m&&this.skinIndices.push(p[_.a],p[_.b],p[_.c]),v&&this.skinWeights.push(g[_.a],g[_.b],g[_.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Vc=1;ke.prototype=Object.assign(Object.create(t.prototype),{constructor:ke,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Ee(e)>65535?ye:ve)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new fe(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new o).getNormalMatrix(e);i.applyToBufferAttribute(n),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new i;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new i;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new i;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new i;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new i;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new se;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new be(3*t.vertices.length,3),i=new be(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new be(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new be(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var i;return t.verticesNeedUpdate===!0&&(i=this.attributes.position,void 0!==i&&(i.copyVector3sArray(t.vertices),i.needsUpdate=!0),t.verticesNeedUpdate=!1),t.normalsNeedUpdate===!0&&(i=this.attributes.normal,void 0!==i&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1),t.colorsNeedUpdate===!0&&(i=this.attributes.color,void 0!==i&&(i.copyColorsArray(t.colors),i.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(i=this.attributes.uv,void 0!==i&&(i.copyVector2sArray(t.uvs),i.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(i=this.attributes.lineDistance,void 0!==i&&(i.copyArray(t.lineDistances),i.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new xe).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new fe(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new fe(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new fe(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new fe(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new fe(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var o=Ee(e.indices)>65535?Uint32Array:Uint16Array,s=new o(3*e.indices.length);this.setIndex(new fe(s,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var l in e.morphTargets){for(var u=[],c=e.morphTargets[l],h=0,f=c.length;h<f;h++){var d=c[h],p=new be(3*d.length,3);u.push(p.copyVector3sArray(d))}this.morphAttributes[l]=u}if(e.skinIndices.length>0){var g=new be(4*e.skinIndices.length,4);this.addAttribute("skinIndex",g.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var m=new be(4*e.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new K);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new K,t=new a;return function(){null===this.boundingSphere&&(this.boundingSphere=new ee);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(i);for(var r=0,a=0,o=n.count;a<o;a++)t.x=n.getX(a),t.y=n.getY(a),t.z=n.getZ(a),r=Math.max(r,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new fe(new Float32Array(i.length),3));else for(var r=t.normal.array,o=0,s=r.length;o<s;o++)r[o]=0;var l,u,c,h=t.normal.array,f=new a,d=new a,p=new a,g=new a,m=new a;if(e){var v=e.array;0===n.length&&this.addGroup(0,v.length);for(var _=0,y=n.length;_<y;++_)for(var b=n[_],w=b.start,x=b.count,o=w,s=w+x;o<s;o+=3)l=3*v[o+0],u=3*v[o+1],c=3*v[o+2],f.fromArray(i,l),d.fromArray(i,u),p.fromArray(i,c),g.subVectors(p,d),m.subVectors(f,d),g.cross(m),h[l]+=g.x,h[l+1]+=g.y,h[l+2]+=g.z,h[u]+=g.x,h[u+1]+=g.y,h[u+2]+=g.z,h[c]+=g.x,h[c+1]+=g.y,h[c+2]+=g.z}else for(var o=0,s=i.length;o<s;o+=9)f.fromArray(i,o),d.fromArray(i,o+3),p.fromArray(i,o+6),g.subVectors(p,d),m.subVectors(f,d),g.cross(m),h[o]=g.x,h[o+1]=g.y,h[o+2]=g.z,h[o+3]=g.x,h[o+4]=g.y,h[o+5]=g.z,h[o+6]=g.x,h[o+7]=g.y,h[o+8]=g.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0);var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i],a=r.array,o=e.attributes[i],s=o.array,l=o.itemSize,u=0,c=l*t;u<s.length;u++,c++)a[c]=s[u];return this},normalizeNormals:function(){var e=new a;return function(){for(var t=this.attributes.normal,n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new ke,t=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],a=r.array,o=r.itemSize,s=new a.constructor(t.length*o),l=0,u=0,c=0,h=t.length;c<h;c++){l=t[c]*o;for(var f=0;f<o;f++)s[u++]=a[l++]}e.addAttribute(i,new fe(s,o))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:r}}var a=this.attributes;for(var n in a){var o=a[n],r=Array.prototype.slice.call(o.array);e.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:r,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new ke).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var l=[],u=s[t];for(n=0,i=u.length;n<i;n++)l.push(u[n].clone());this.morphAttributes[t]=l}var c=e.groups;for(n=0,i=c.length;n<i;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var f=e.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Me.prototype=Object.create(he.prototype),Me.prototype.constructor=Me,Te.prototype=Object.create(ke.prototype),Te.prototype.constructor=Te,Se.prototype=Object.create(he.prototype),Se.prototype.constructor=Se,Ae.prototype=Object.create(ke.prototype),Ae.prototype.constructor=Ae,Re.prototype=Object.create(Q.prototype),Re.prototype.constructor=Re,Re.prototype.isMeshBasicMaterial=!0,Re.prototype.copy=function(e){return Q.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Ce.prototype=Object.create(Q.prototype),Ce.prototype.constructor=Ce,Ce.prototype.isShaderMaterial=!0,Ce.prototype.copy=function(e){return Q.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Dl.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,
this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Ce.prototype.toJSON=function(e){var t=Q.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Pe.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new a;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new a;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new a;n.subVectors(e,this.origin);var i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new a;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new a,t=new a,n=new a;return function(i,r,a,o){e.copy(i).add(r).multiplyScalar(.5),t.copy(r).sub(i).normalize(),n.copy(this.origin).sub(e);var s,l,u,c,h=.5*i.distanceTo(r),f=-this.direction.dot(t),d=n.dot(this.direction),p=-n.dot(t),g=n.lengthSq(),m=Math.abs(1-f*f);if(m>0)if(s=f*p-d,l=f*d-p,c=h*m,s>=0)if(l>=-c)if(l<=c){var v=1/m;s*=v,l*=v,u=s*(s+f*l+2*d)+l*(f*s+l+2*p)+g}else l=h,s=Math.max(0,-(f*l+d)),u=-s*s+l*(l+2*p)+g;else l=-h,s=Math.max(0,-(f*l+d)),u=-s*s+l*(l+2*p)+g;else l<=-c?(s=Math.max(0,-(-f*h+d)),l=s>0?-h:Math.min(Math.max(-h,-p),h),u=-s*s+l*(l+2*p)+g):l<=c?(s=0,l=Math.min(Math.max(-h,-p),h),u=l*(l+2*p)+g):(s=Math.max(0,-(f*h+d)),l=s>0?h:Math.min(Math.max(-h,-p),h),u=-s*s+l*(l+2*p)+g);else l=f>0?-h:h,s=Math.max(0,-(f*l+d)),u=-s*s+l*(l+2*p)+g;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(t).multiplyScalar(l).add(e),u}}(),intersectSphere:function(){var e=new a;return function(t,n){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),r=e.dot(e)-i*i,a=t.radius*t.radius;if(r>a)return null;var o=Math.sqrt(a-r),s=i-o,l=i+o;return s<0&&l<0?null:s<0?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return n*t<0},intersectBox:function(e,t){var n,i,r,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),u>=0?(r=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(r=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),n>a||r>i?null:((r>n||n!==n)&&(n=r),(a<i||i!==i)&&(i=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>i?null:((o>n||n!==n)&&(n=o),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:function(){var e=new a;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new a,t=new a,n=new a,i=new a;return function(r,a,o,s,l){t.subVectors(a,r),n.subVectors(o,r),i.crossVectors(t,n);var u,c=this.direction.dot(i);if(c>0){if(s)return null;u=1}else{if(!(c<0))return null;u=-1,c=-c}e.subVectors(this.origin,r);var h=u*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var f=u*this.direction.dot(t.cross(e));if(f<0)return null;if(h+f>c)return null;var d=-u*e.dot(i);return d<0?null:this.at(d/c,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Oe.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){var t=e||new a;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new a;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new a;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new a,t=new a;return function(n,i){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var r=t.dot(t),a=t.dot(e),o=a/r;return i&&(o=Ml.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t),r=n||new a;return this.delta(r).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(Le,{normal:function(){var e=new a;return function(t,n,i,r){var o=r||new a;o.subVectors(i,n),e.subVectors(t,n),o.cross(e);var s=o.lengthSq();return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new a,t=new a,n=new a;return function(i,r,o,s,l){e.subVectors(s,r),t.subVectors(o,r),n.subVectors(i,r);var u=e.dot(e),c=e.dot(t),h=e.dot(n),f=t.dot(t),d=t.dot(n),p=u*f-c*c,g=l||new a;if(0===p)return g.set(-2,-1,-1);var m=1/p,v=(f*h-c*d)*m,_=(u*d-c*h)*m;return g.set(1-v-_,_,v)}}(),containsPoint:function(){var e=new a;return function(t,n,i,r){var a=Le.barycoordFromPoint(t,n,i,r,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}()}),Object.assign(Le.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new a,t=new a;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new a;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return Le.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new te;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return Le.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Le.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new te,t=[new Oe,new Oe,new Oe],n=new a,i=new a;return function(r,o){var s=o||new a,l=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(r,n),this.containsPoint(n)===!0)s.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var u=0;u<t.length;u++){t[u].closestPointToPoint(n,!0,i);var c=n.distanceToSquared(i);c<l&&(l=c,s.copy(i))}}return s}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Ne.prototype=Object.assign(Object.create(se.prototype),{constructor:Ne,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return se.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){function e(e,t,n,i,r,a,o){return Le.barycoordFromPoint(e,t,n,i,_),r.multiplyScalar(_.x),a.multiplyScalar(_.y),o.multiplyScalar(_.z),r.add(a).add(o),r.clone()}function t(e,t,n,i,r,a,o,s){var l;if(l=t.side===ao?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,t.side!==oo,s),null===l)return null;b.copy(s),b.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(b);return u<n.near||u>n.far?null:{distance:u,point:b.clone(),object:e}}function r(n,i,r,a,o,s,l,f){u.fromBufferAttribute(a,s),c.fromBufferAttribute(a,l),h.fromBufferAttribute(a,f);var d=t(n,n.material,i,r,u,c,h,y);return d&&(o&&(g.fromBufferAttribute(o,s),m.fromBufferAttribute(o,l),v.fromBufferAttribute(o,f),d.uv=e(y,u,c,h,g,m,v)),d.face=new ce(s,l,f,Le.normal(u,c,h)),d.faceIndex=s),d}var o=new i,s=new Pe,l=new ee,u=new a,c=new a,h=new a,f=new a,d=new a,p=new a,g=new n,m=new n,v=new n,_=new a,y=new a,b=new a;return function(n,i){var a=this.geometry,_=this.material,b=this.matrixWorld;if(void 0!==_&&(null===a.boundingSphere&&a.computeBoundingSphere(),l.copy(a.boundingSphere),l.applyMatrix4(b),n.ray.intersectsSphere(l)!==!1&&(o.getInverse(b),s.copy(n.ray).applyMatrix4(o),null===a.boundingBox||s.intersectsBox(a.boundingBox)!==!1))){var w;if(a.isBufferGeometry){var x,E,k,M,T,S=a.index,A=a.attributes.position,R=a.attributes.uv;if(null!==S)for(M=0,T=S.count;M<T;M+=3)x=S.getX(M),E=S.getX(M+1),k=S.getX(M+2),w=r(this,n,s,A,R,x,E,k),w&&(w.faceIndex=Math.floor(M/3),i.push(w));else if(void 0!==A)for(M=0,T=A.count;M<T;M+=3)x=M,E=M+1,k=M+2,w=r(this,n,s,A,R,x,E,k),w&&(w.index=x,i.push(w))}else if(a.isGeometry){var C,P,O,L,N=Array.isArray(_),F=a.vertices,D=a.faces,I=a.faceVertexUvs[0];I.length>0&&(L=I);for(var U=0,H=D.length;U<H;U++){var z=D[U],B=N?_[z.materialIndex]:_;if(void 0!==B){if(C=F[z.a],P=F[z.b],O=F[z.c],B.morphTargets===!0){var j=a.morphTargets,V=this.morphTargetInfluences;u.set(0,0,0),c.set(0,0,0),h.set(0,0,0);for(var G=0,W=j.length;G<W;G++){var X=V[G];if(0!==X){var Y=j[G].vertices;u.addScaledVector(f.subVectors(Y[z.a],C),X),c.addScaledVector(d.subVectors(Y[z.b],P),X),h.addScaledVector(p.subVectors(Y[z.c],O),X)}}u.add(C),c.add(P),h.add(O),C=u,P=c,O=h}if(w=t(this,B,n,s,C,P,O,y)){if(L&&L[U]){var q=L[U];g.copy(q[0]),m.copy(q[1]),v.copy(q[2]),w.uv=e(y,C,P,O,g,m,v)}w.face=z,w.faceIndex=U,i.push(w)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Gc=0;ft.prototype=Object.assign(Object.create(le.prototype),{constructor:ft,isPerspectiveCamera:!0,copy:function(e,t){return le.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ml.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Ml.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Ml.RAD2DEG*Math.atan(Math.tan(.5*Ml.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Ml.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,t-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far)},toJSON:function(e){var t=se.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),dt.prototype=Object.assign(Object.create(ft.prototype),{constructor:dt,isArrayCamera:!0});var Wc=0;Et.prototype.isFogExp2=!0,Et.prototype.clone=function(){return new Et(this.color.getHex(),this.density)},Et.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},kt.prototype.isFog=!0,kt.prototype.clone=function(){return new kt(this.color.getHex(),this.near,this.far)},kt.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Mt.prototype=Object.assign(Object.create(se.prototype),{constructor:Mt,copy:function(e,t){return se.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=se.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Tt.prototype=Object.create(Q.prototype),Tt.prototype.constructor=Tt,Tt.prototype.isSpriteMaterial=!0,Tt.prototype.copy=function(e){return Q.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},St.prototype=Object.assign(Object.create(se.prototype),{constructor:St,isSprite:!0,raycast:function(){var e=new a,t=new a,n=new a;return function(i,r){t.setFromMatrixPosition(this.matrixWorld),i.ray.closestPointToPoint(t,e),n.setFromMatrixScale(this.matrixWorld);var a=n.x*n.y/4;if(!(t.distanceToSquared(e)>a)){var o=i.ray.origin.distanceTo(e);o<i.near||o>i.far||r.push({distance:o,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return se.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),At.prototype=Object.assign(Object.create(se.prototype),{constructor:At,copy:function(e){se.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);n.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new a;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(t,n)}}(),update:function(){var e=new a,t=new a;return function(n){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);i[0].object.visible=!0;for(var a=1,o=i.length;a<o&&r>=i[a].distance;a++)i[a-1].object.visible=!1,i[a].object.visible=!0;for(;a<o;a++)i[a].object.visible=!1}}}(),toJSON:function(e){var t=se.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Object.assign(Rt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new i;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new i,t=new i;return function(){for(var n=this.bones,i=this.boneInverses,r=this.boneMatrices,a=this.boneTexture,o=0,s=n.length;o<s;o++){var l=n[o]?n[o].matrixWorld:t;e.multiplyMatrices(l,i[o]),e.toArray(r,16*o)}void 0!==a&&(a.needsUpdate=!0)}}(),clone:function(){return new Rt(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),Ct.prototype=Object.assign(Object.create(se.prototype),{constructor:Ct,isBone:!0}),Pt.prototype=Object.assign(Object.create(Ne.prototype),{constructor:Pt,isSkinnedMesh:!0,initBones:function(){var e,t,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],e=new Ct,r.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],t.parent!==-1&&null!==t.parent&&void 0!==r[t.parent]?r[t.parent].add(r[n]):this.add(r[n])}return this.updateMatrixWorld(!0),r},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];e=1/n.manhattanLength(),e!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new l,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)i.x=r.getX(t),i.y=r.getY(t),i.z=r.getZ(t),i.w=r.getW(t),e=1/i.manhattanLength(),e!==1/0?i.multiplyScalar(e):i.set(1,0,0,0),r.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(e){Ne.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ot.prototype=Object.create(Q.prototype),Ot.prototype.constructor=Ot,Ot.prototype.isLineBasicMaterial=!0,Ot.prototype.copy=function(e){return Q.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Lt.prototype=Object.assign(Object.create(se.prototype),{constructor:Lt,isLine:!0,computeLineDistances:function(){var e=new a,t=new a;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[0],a=1,o=i.count;a<o;a++)e.fromBufferAttribute(i,a-1),t.fromBufferAttribute(i,a),r[a]=r[a-1],r[a]+=e.distanceTo(t);n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices,r=n.lineDistances;r[0]=0;for(var a=1,o=s.length;a<o;a++)r[a]=r[a-1],r[a]+=s[a-1].distanceTo(s[a])}return this}}(),raycast:function(){var e=new i,t=new Pe,n=new ee;return function(i,r){var o=i.linePrecision,s=o*o,l=this.geometry,u=this.matrixWorld;if(null===l.boundingSphere&&l.computeBoundingSphere(),n.copy(l.boundingSphere),n.applyMatrix4(u),i.ray.intersectsSphere(n)!==!1){e.getInverse(u),t.copy(i.ray).applyMatrix4(e);var c=new a,h=new a,f=new a,d=new a,p=this&&this.isLineSegments?2:1;if(l.isBufferGeometry){var g=l.index,m=l.attributes,v=m.position.array;if(null!==g)for(var _=g.array,y=0,b=_.length-1;y<b;y+=p){var w=_[y],x=_[y+1];c.fromArray(v,3*w),h.fromArray(v,3*x);var E=t.distanceSqToSegment(c,h,d,f);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var k=i.ray.origin.distanceTo(d);k<i.near||k>i.far||r.push({distance:k,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(var y=0,b=v.length/3-1;y<b;y+=p){c.fromArray(v,3*y),h.fromArray(v,3*y+3);var E=t.distanceSqToSegment(c,h,d,f);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var k=i.ray.origin.distanceTo(d);k<i.near||k>i.far||r.push({distance:k,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}else if(l.isGeometry)for(var M=l.vertices,T=M.length,y=0;y<T-1;y+=p){var E=t.distanceSqToSegment(M[y],M[y+1],d,f);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var k=i.ray.origin.distanceTo(d);k<i.near||k>i.far||r.push({distance:k,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Nt.prototype=Object.assign(Object.create(Lt.prototype),{constructor:Nt,isLineSegments:!0,computeLineDistances:function(){var e=new a,t=new a;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[],a=0,o=i.count;a<o;a+=2)e.fromBufferAttribute(i,a),t.fromBufferAttribute(i,a+1),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+e.distanceTo(t);n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry)for(var s=n.vertices,r=n.lineDistances,a=0,o=s.length;a<o;a+=2)e.copy(s[a]),t.copy(s[a+1]),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+e.distanceTo(t);return this}}()}),Ft.prototype=Object.assign(Object.create(Lt.prototype),{constructor:Ft,isLineLoop:!0}),Dt.prototype=Object.create(Q.prototype),Dt.prototype.constructor=Dt,Dt.prototype.isPointsMaterial=!0,Dt.prototype.copy=function(e){return Q.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},It.prototype=Object.assign(Object.create(se.prototype),{constructor:It,isPoints:!0,raycast:function(){var e=new i,t=new Pe,n=new ee;return function(i,r){function o(e,n){var a=t.distanceSqToPoint(e);if(a<f){var o=t.closestPointToPoint(e);o.applyMatrix4(u);var l=i.ray.origin.distanceTo(o);if(l<i.near||l>i.far)return;r.push({distance:l,distanceToRay:Math.sqrt(a),point:o.clone(),index:n,face:null,object:s})}}var s=this,l=this.geometry,u=this.matrixWorld,c=i.params.Points.threshold;if(null===l.boundingSphere&&l.computeBoundingSphere(),n.copy(l.boundingSphere),n.applyMatrix4(u),n.radius+=c,i.ray.intersectsSphere(n)!==!1){e.getInverse(u),t.copy(i.ray).applyMatrix4(e);var h=c/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,d=new a;if(l.isBufferGeometry){var p=l.index,g=l.attributes,m=g.position.array;if(null!==p)for(var v=p.array,_=0,y=v.length;_<y;_++){var b=v[_];d.fromArray(m,3*b),o(d,b)}else for(var _=0,w=m.length/3;_<w;_++)d.fromArray(m,3*_),o(d,_)}else for(var x=l.vertices,_=0,w=x.length;_<w;_++)o(x[_],_)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ut.prototype=Object.assign(Object.create(se.prototype),{constructor:Ut,isGroup:!0}),Ht.prototype=Object.assign(Object.create(s.prototype),{constructor:Ht,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),zt.prototype=Object.create(s.prototype),zt.prototype.constructor=zt,zt.prototype.isCompressedTexture=!0,Bt.prototype=Object.create(s.prototype),Bt.prototype.constructor=Bt,Bt.prototype.isDepthTexture=!0,jt.prototype=Object.create(ke.prototype),jt.prototype.constructor=jt,Vt.prototype=Object.create(he.prototype),Vt.prototype.constructor=Vt,Gt.prototype=Object.create(ke.prototype),Gt.prototype.constructor=Gt,Wt.prototype=Object.create(he.prototype),Wt.prototype.constructor=Wt,Xt.prototype=Object.create(ke.prototype),Xt.prototype.constructor=Xt,Yt.prototype=Object.create(he.prototype),Yt.prototype.constructor=Yt,qt.prototype=Object.create(Xt.prototype),qt.prototype.constructor=qt,Zt.prototype=Object.create(he.prototype),Zt.prototype.constructor=Zt,Qt.prototype=Object.create(Xt.prototype),Qt.prototype.constructor=Qt,$t.prototype=Object.create(he.prototype),$t.prototype.constructor=$t,Jt.prototype=Object.create(Xt.prototype),Jt.prototype.constructor=Jt,Kt.prototype=Object.create(he.prototype),Kt.prototype.constructor=Kt,en.prototype=Object.create(Xt.prototype),en.prototype.constructor=en,tn.prototype=Object.create(he.prototype),tn.prototype.constructor=tn,nn.prototype=Object.create(ke.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(he.prototype),rn.prototype.constructor=rn,an.prototype=Object.create(ke.prototype),an.prototype.constructor=an,on.prototype=Object.create(he.prototype),on.prototype.constructor=on,sn.prototype=Object.create(ke.prototype),sn.prototype.constructor=sn;var Xc={triangulate:function(e,t,n){n=n||2;var i=t&&t.length,r=i?t[0]*n:e.length,a=ln(e,0,r,n,!0),o=[];if(!a)return o;var s,l,u,c,h,f,d;if(i&&(a=gn(e,t,a,n)),e.length>80*n){s=u=e[0],l=c=e[1];for(var p=n;p<r;p+=n)h=e[p],f=e[p+1],h<s&&(s=h),f<l&&(l=f),h>u&&(u=h),f>c&&(c=f);d=Math.max(u-s,c-l),d=0!==d?1/d:0}return cn(a,o,n,s,l,d),o}},Yc={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return Yc.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];Dn(e),In(n,e);var a=e.length;t.forEach(Dn);for(var o=0;o<t.length;o++)i.push(a),a+=t[o].length,In(n,t[o]);for(var s=Xc.triangulate(n,i),o=0;o<s.length;o+=3)r.push(s.slice(o,o+3));return r}};Un.prototype=Object.create(he.prototype),Un.prototype.constructor=Un,Hn.prototype=Object.create(ke.prototype),Hn.prototype.constructor=Hn,Hn.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],n=this.getAttribute("uv"),i=n?Array.prototype.slice.call(n.array):[],r=this.index,a=r?Array.prototype.slice.call(r.array):[];return{position:t,uv:i,index:a}},Hn.prototype.addShapeList=function(e,t){var n=e.length;t.arrays=this.getArrays();for(var i=0;i<n;i++){var r=e[i];this.addShape(r,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new be(t.arrays.position,3)),this.addAttribute("uv",new be(t.arrays.uv,2))},Hn.prototype.addShape=function(e,t){function i(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function r(e,t,i){var r,a,o,s=e.x-t.x,l=e.y-t.y,u=i.x-e.x,c=i.y-e.y,h=s*s+l*l,f=s*c-l*u;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(h),p=Math.sqrt(u*u+c*c),g=t.x-l/d,m=t.y+s/d,v=i.x-c/p,_=i.y+u/p,y=((v-g)*c-(_-m)*u)/(s*c-l*u);r=g+s*y-e.x,a=m+l*y-e.y;var b=r*r+a*a;if(b<=2)return new n(r,a);o=Math.sqrt(b/2)}else{var w=!1;s>Number.EPSILON?u>Number.EPSILON&&(w=!0):s<-Number.EPSILON?u<-Number.EPSILON&&(w=!0):Math.sign(l)===Math.sign(c)&&(w=!0),w?(r=-l,a=s,o=Math.sqrt(h)):(r=s,a=l,o=Math.sqrt(h/2))}return new n(r/o,a/o)}function o(){var e=b.length/3;if(A){var n=0,i=Q*n;for(K=0;K<$;K++)Z=j[K],c(Z[2]+i,Z[1]+i,Z[0]+i);for(n=C+2*S,i=Q*n,K=0;K<$;K++)Z=j[K],c(Z[0]+i,Z[1]+i,Z[2]+i)}else{for(K=0;K<$;K++)Z=j[K],c(Z[2],Z[1],Z[0]);for(K=0;K<$;K++)Z=j[K],c(Z[0]+Q*C,Z[1]+Q*C,Z[2]+Q*C)}I.addGroup(e,b.length/3-e,void 0!==t.material?t.material:0)}function s(){var e=b.length/3,n=0;for(l(V,n),n+=V.length,F=0,D=z.length;F<D;F++)N=z[F],l(N,n),n+=N.length;I.addGroup(e,b.length/3-e,void 0!==t.extrudeMaterial?t.extrudeMaterial:1)}function l(e,t){var n,i;for(K=e.length;--K>=0;){n=K,i=K-1,i<0&&(i=e.length-1);var r=0,a=C+2*S;for(r=0;r<a;r++){var o=Q*r,s=Q*(r+1),l=t+n+o,u=t+i+o,c=t+i+s,f=t+n+s;h(l,u,c,f)}}}function u(e,t,n){E.push(e),E.push(t),E.push(n)}function c(e,t,n){f(e),f(t),f(n);var i=b.length/3,r=L.generateTopUV(I,b,i-3,i-2,i-1);d(r[0]),d(r[1]),d(r[2])}function h(e,t,n,i){f(e),f(t),f(i),f(t),f(n),f(i);var r=b.length/3,a=L.generateSideWallUV(I,b,r-6,r-3,r-2,r-1);d(a[0]),d(a[1]),d(a[3]),d(a[1]),d(a[2]),d(a[3])}function f(e){w.push(b.length/3),b.push(E[3*e+0]),b.push(E[3*e+1]),b.push(E[3*e+2])}function d(e){x.push(e.x),x.push(e.y)}var p,g,m,v,_,y=t.arrays?t.arrays:this.getArrays(),b=y.position,w=y.index,x=y.uv,E=[],k=void 0!==t.amount?t.amount:100,M=void 0!==t.bevelThickness?t.bevelThickness:6,T=void 0!==t.bevelSize?t.bevelSize:M-2,S=void 0!==t.bevelSegments?t.bevelSegments:3,A=void 0===t.bevelEnabled||t.bevelEnabled,R=void 0!==t.curveSegments?t.curveSegments:12,C=void 0!==t.steps?t.steps:1,P=t.extrudePath,O=!1,L=void 0!==t.UVGenerator?t.UVGenerator:Un.WorldUVGenerator;P&&(p=P.getSpacedPoints(C),O=!0,A=!1,g=void 0!==t.frames?t.frames:P.computeFrenetFrames(C,!1),m=new a,v=new a,_=new a),A||(S=0,M=0,T=0);var N,F,D,I=this,U=e.extractPoints(R),H=U.shape,z=U.holes,B=!Yc.isClockWise(H);if(B)for(H=H.reverse(),F=0,D=z.length;F<D;F++)N=z[F],Yc.isClockWise(N)&&(z[F]=N.reverse());var j=Yc.triangulateShape(H,z),V=H;for(F=0,D=z.length;F<D;F++)N=z[F],H=H.concat(N);for(var G,W,X,Y,q,Z,Q=H.length,$=j.length,J=[],K=0,ee=V.length,te=ee-1,ne=K+1;K<ee;K++,te++,ne++)te===ee&&(te=0),ne===ee&&(ne=0),J[K]=r(V[K],V[te],V[ne]);var ie,re=[],ae=J.concat();for(F=0,D=z.length;F<D;F++){for(N=z[F],ie=[],K=0,ee=N.length,te=ee-1,ne=K+1;K<ee;K++,te++,ne++)te===ee&&(te=0),ne===ee&&(ne=0),ie[K]=r(N[K],N[te],N[ne]);re.push(ie),ae=ae.concat(ie)}for(G=0;G<S;G++){for(X=G/S,Y=M*Math.cos(X*Math.PI/2),W=T*Math.sin(X*Math.PI/2),K=0,ee=V.length;K<ee;K++)q=i(V[K],J[K],W),u(q.x,q.y,-Y);for(F=0,D=z.length;F<D;F++)for(N=z[F],ie=re[F],K=0,ee=N.length;K<ee;K++)q=i(N[K],ie[K],W),u(q.x,q.y,-Y)}for(W=T,K=0;K<Q;K++)q=A?i(H[K],ae[K],W):H[K],O?(v.copy(g.normals[0]).multiplyScalar(q.x),m.copy(g.binormals[0]).multiplyScalar(q.y),_.copy(p[0]).add(v).add(m),u(_.x,_.y,_.z)):u(q.x,q.y,0);var oe;for(oe=1;oe<=C;oe++)for(K=0;K<Q;K++)q=A?i(H[K],ae[K],W):H[K],O?(v.copy(g.normals[oe]).multiplyScalar(q.x),m.copy(g.binormals[oe]).multiplyScalar(q.y),_.copy(p[oe]).add(v).add(m),u(_.x,_.y,_.z)):u(q.x,q.y,k/C*oe);for(G=S-1;G>=0;G--){for(X=G/S,Y=M*Math.cos(X*Math.PI/2),W=T*Math.sin(X*Math.PI/2),K=0,ee=V.length;K<ee;K++)q=i(V[K],J[K],W),u(q.x,q.y,k+Y);for(F=0,D=z.length;F<D;F++)for(N=z[F],ie=re[F],K=0,ee=N.length;K<ee;K++)q=i(N[K],ie[K],W),O?u(q.x,q.y+p[C-1].y,p[C-1].x+Y):u(q.x,q.y,k+Y)}o(),s(),t.arrays||(this.setIndex(w),this.addAttribute("position",new be(b,3)),this.addAttribute("uv",new be(x,2)))},Un.WorldUVGenerator={generateTopUV:function(e,t,i,r,a){var o=t[3*i],s=t[3*i+1],l=t[3*r],u=t[3*r+1],c=t[3*a],h=t[3*a+1];return[new n(o,s),new n(l,u),new n(c,h)]},generateSideWallUV:function(e,t,i,r,a,o){var s=t[3*i],l=t[3*i+1],u=t[3*i+2],c=t[3*r],h=t[3*r+1],f=t[3*r+2],d=t[3*a],p=t[3*a+1],g=t[3*a+2],m=t[3*o],v=t[3*o+1],_=t[3*o+2];return Math.abs(l-h)<.01?[new n(s,1-u),new n(c,1-f),new n(d,1-g),new n(m,1-_)]:[new n(l,1-u),new n(h,1-f),new n(p,1-g),new n(v,1-_)]}},zn.prototype=Object.create(he.prototype),zn.prototype.constructor=zn,Bn.prototype=Object.create(Hn.prototype),Bn.prototype.constructor=Bn,jn.prototype=Object.create(he.prototype),jn.prototype.constructor=jn,Vn.prototype=Object.create(ke.prototype),Vn.prototype.constructor=Vn,Gn.prototype=Object.create(he.prototype),Gn.prototype.constructor=Gn,Wn.prototype=Object.create(ke.prototype),Wn.prototype.constructor=Wn,Xn.prototype=Object.create(he.prototype),Xn.prototype.constructor=Xn,Yn.prototype=Object.create(ke.prototype),Yn.prototype.constructor=Yn,qn.prototype=Object.create(he.prototype),
qn.prototype.constructor=qn,qn.prototype.toJSON=function(){var e=he.prototype.toJSON.call(this),t=this.parameters.shapes;return Qn(t,e)},Zn.prototype=Object.create(ke.prototype),Zn.prototype.constructor=Zn,Zn.prototype.toJSON=function(){var e=ke.prototype.toJSON.call(this),t=this.parameters.shapes;return Qn(t,e)},$n.prototype=Object.create(ke.prototype),$n.prototype.constructor=$n,Jn.prototype=Object.create(he.prototype),Jn.prototype.constructor=Jn,Kn.prototype=Object.create(ke.prototype),Kn.prototype.constructor=Kn,ei.prototype=Object.create(Jn.prototype),ei.prototype.constructor=ei,ti.prototype=Object.create(Kn.prototype),ti.prototype.constructor=ti,ni.prototype=Object.create(he.prototype),ni.prototype.constructor=ni,ii.prototype=Object.create(ke.prototype),ii.prototype.constructor=ii;var qc=Object.freeze({WireframeGeometry:jt,ParametricGeometry:Vt,ParametricBufferGeometry:Gt,TetrahedronGeometry:Yt,TetrahedronBufferGeometry:qt,OctahedronGeometry:Zt,OctahedronBufferGeometry:Qt,IcosahedronGeometry:$t,IcosahedronBufferGeometry:Jt,DodecahedronGeometry:Kt,DodecahedronBufferGeometry:en,PolyhedronGeometry:Wt,PolyhedronBufferGeometry:Xt,TubeGeometry:tn,TubeBufferGeometry:nn,TorusKnotGeometry:rn,TorusKnotBufferGeometry:an,TorusGeometry:on,TorusBufferGeometry:sn,TextGeometry:zn,TextBufferGeometry:Bn,SphereGeometry:jn,SphereBufferGeometry:Vn,RingGeometry:Gn,RingBufferGeometry:Wn,PlaneGeometry:Se,PlaneBufferGeometry:Ae,LatheGeometry:Xn,LatheBufferGeometry:Yn,ShapeGeometry:qn,ShapeBufferGeometry:Zn,ExtrudeGeometry:Un,ExtrudeBufferGeometry:Hn,EdgesGeometry:$n,ConeGeometry:ei,ConeBufferGeometry:ti,CylinderGeometry:Jn,CylinderBufferGeometry:Kn,CircleGeometry:ni,CircleBufferGeometry:ii,BoxGeometry:Me,BoxBufferGeometry:Te});ri.prototype=Object.create(Q.prototype),ri.prototype.constructor=ri,ri.prototype.isShadowMaterial=!0,ai.prototype=Object.create(Ce.prototype),ai.prototype.constructor=ai,ai.prototype.isRawShaderMaterial=!0,oi.prototype=Object.create(Q.prototype),oi.prototype.constructor=oi,oi.prototype.isMeshStandardMaterial=!0,oi.prototype.copy=function(e){return Q.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},si.prototype=Object.create(oi.prototype),si.prototype.constructor=si,si.prototype.isMeshPhysicalMaterial=!0,si.prototype.copy=function(e){return oi.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},li.prototype=Object.create(Q.prototype),li.prototype.constructor=li,li.prototype.isMeshPhongMaterial=!0,li.prototype.copy=function(e){return Q.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ui.prototype=Object.create(li.prototype),ui.prototype.constructor=ui,ui.prototype.isMeshToonMaterial=!0,ui.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},ci.prototype=Object.create(Q.prototype),ci.prototype.constructor=ci,ci.prototype.isMeshNormalMaterial=!0,ci.prototype.copy=function(e){return Q.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},hi.prototype=Object.create(Q.prototype),hi.prototype.constructor=hi,hi.prototype.isMeshLambertMaterial=!0,hi.prototype.copy=function(e){return Q.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},fi.prototype=Object.create(Ot.prototype),fi.prototype.constructor=fi,fi.prototype.isLineDashedMaterial=!0,fi.prototype.copy=function(e){return Ot.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Zc=Object.freeze({ShadowMaterial:ri,SpriteMaterial:Tt,RawShaderMaterial:ai,ShaderMaterial:Ce,PointsMaterial:Dt,MeshPhysicalMaterial:si,MeshStandardMaterial:oi,MeshPhongMaterial:li,MeshToonMaterial:ui,MeshNormalMaterial:ci,MeshLambertMaterial:hi,MeshDepthMaterial:$,MeshDistanceMaterial:J,MeshBasicMaterial:Re,LineDashedMaterial:fi,LineBasicMaterial:Ot,Material:Q}),Qc={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},$c=new di,Jc={};Object.assign(pi.prototype,{load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Qc.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;if(void 0!==Jc[e])return void Jc[e].push({onLoad:t,onProgress:n,onError:i});var o=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(o);if(s){var l=s[1],u=!!s[2],c=s[3];c=window.decodeURIComponent(c),u&&(c=window.atob(c));try{var h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);h="blob"===f?new Blob([d.buffer],{type:l}):d.buffer;break;case"document":var g=new DOMParser;h=g.parseFromString(c,l);break;case"json":h=JSON.parse(c);break;default:h=c}window.setTimeout(function(){t&&t(h),r.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},0)}}else{Jc[e]=[],Jc[e].push({onLoad:t,onProgress:n,onError:i});var m=new XMLHttpRequest;m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;Qc.add(e,n);var i=Jc[e];if(delete Jc[e],200===this.status){for(var a=0,o=i.length;a<o;a++){var s=i[a];s.onLoad&&s.onLoad(n)}r.manager.itemEnd(e)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=i.length;a<o;a++){var s=i[a];s.onLoad&&s.onLoad(n)}r.manager.itemEnd(e)}else{for(var a=0,o=i.length;a<o;a++){var s=i[a];s.onError&&s.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)}},!1),m.addEventListener("progress",function(t){for(var n=Jc[e],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=Jc[e];delete Jc[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var v in this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return r.manager.itemStart(e),m},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(gi.prototype,{load:function(e,t,n,i){function r(r){l.load(e[r],function(e){var n=a._parser(e,!0);o[r]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},u+=1,6===u&&(1===n.mipmapCount&&(s.minFilter=hs),s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,i)}var a=this,o=[],s=new zt;s.image=o;var l=new pi(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,h=e.length;c<h;++c)r(c);else l.load(e,function(e){var n=a._parser(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,r=0;r<i;r++){o[r]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[r].mipmaps.push(n.mipmaps[r*n.mipmapCount+l]),o[r].format=n.format,o[r].width=n.width,o[r].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=hs),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,i);return s},setPath:function(e){return this.path=e,this}}),Object.assign(mi.prototype,{load:function(e,t,n,i){var r=this,a=new h,o=new pi(this.manager);return o.setResponseType("arraybuffer"),o.load(e,function(e){var n=r._parser(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:os,a.wrapT=void 0!==n.wrapT?n.wrapT:os,a.magFilter=void 0!==n.magFilter?n.magFilter:hs,a.minFilter=void 0!==n.minFilter?n.minFilter:ds,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=hs),a.needsUpdate=!0,t&&t(a,n))},n,i),a}}),Object.assign(vi.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Qc.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){Qc.add(e,this),t&&t(this),r.manager.itemEnd(e)},!1),o.addEventListener("error",function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(_i.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){function r(n){o.load(e[n],function(e){a.images[n]=e,s++,6===s&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}var a=new f,o=new vi(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var s=0,l=0;l<e.length;++l)r(l);return a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(yi.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){var r=new s,a=new vi(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(n){r.image=n;var i=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?Ss:As,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(bi.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=e;n++)t=this.getPoint(n/e),a+=t.distanceTo(r),i.push(a),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t?t:e*i[a-1];for(var o,s=0,l=a-1;s<=l;)if(r=Math.floor(s+(l-s)/2),o=i[r]-n,o<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(r=l,i[r]===n)return r/(a-1);var u=i[r],c=i[r+1],h=c-u,f=(n-u)/h,d=(r+f)/(a-1);return d},getTangent:function(e){var t=1e-4,n=e-t,i=e+t;n<0&&(n=0),i>1&&(i=1);var r=this.getPoint(n),a=this.getPoint(i),o=a.clone().sub(r);return o.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,o,s=new a,l=[],u=[],c=[],h=new a,f=new i;for(n=0;n<=e;n++)r=n/e,l[n]=this.getTangentAt(r),l[n].normalize();u[0]=new a,c[0]=new a;var d=Number.MAX_VALUE,p=Math.abs(l[0].x),g=Math.abs(l[0].y),m=Math.abs(l[0].z);for(p<=d&&(d=p,s.set(1,0,0)),g<=d&&(d=g,s.set(0,1,0)),m<=d&&s.set(0,0,1),h.crossVectors(l[0],s).normalize(),u[0].crossVectors(l[0],h),c[0].crossVectors(l[0],u[0]),n=1;n<=e;n++)u[n]=u[n-1].clone(),c[n]=c[n-1].clone(),h.crossVectors(l[n-1],l[n]),h.length()>Number.EPSILON&&(h.normalize(),o=Math.acos(Ml.clamp(l[n-1].dot(l[n]),-1,1)),u[n].applyMatrix4(f.makeRotationAxis(h,o))),c[n].crossVectors(l[n],u[n]);if(t===!0)for(o=Math.acos(Ml.clamp(u[0].dot(u[e]),-1,1)),o/=e,l[0].dot(h.crossVectors(u[0],u[e]))>0&&(o=-o),n=1;n<=e;n++)u[n].applyMatrix4(f.makeRotationAxis(l[n],o*n)),c[n].crossVectors(l[n],u[n]);return{tangents:l,normals:u,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),wi.prototype=Object.create(bi.prototype),wi.prototype.constructor=wi,wi.prototype.isEllipseCurve=!0,wi.prototype.getPoint=function(e,t){for(var i=t||new n,r=2*Math.PI,a=this.aEndAngle-this.aStartAngle,o=Math.abs(a)<Number.EPSILON;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(a=o?0:r),this.aClockwise!==!0||o||(a===r?a=-r:a-=r);var s=this.aStartAngle+e*a,l=this.aX+this.xRadius*Math.cos(s),u=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,d=u-this.aY;l=f*c-d*h+this.aX,u=f*h+d*c+this.aY}return i.set(l,u)},wi.prototype.copy=function(e){return bi.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},wi.prototype.toJSON=function(){var e=bi.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},wi.prototype.fromJSON=function(e){return bi.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},xi.prototype=Object.create(wi.prototype),xi.prototype.constructor=xi,xi.prototype.isArcCurve=!0;var Kc=new a,eh=new Ei,th=new Ei,nh=new Ei;ki.prototype=Object.create(bi.prototype),ki.prototype.constructor=ki,ki.prototype.isCatmullRomCurve3=!0,ki.prototype.getPoint=function(e,t){var n=t||new a,i=this.points,r=i.length,o=(r-(this.closed?0:1))*e,s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/i.length)+1)*i.length:0===l&&s===r-1&&(s=r-2,l=1);var u,c,h,f;if(this.closed||s>0?u=i[(s-1)%r]:(Kc.subVectors(i[0],i[1]).add(i[0]),u=Kc),c=i[s%r],h=i[(s+1)%r],this.closed||s+2<r?f=i[(s+2)%r]:(Kc.subVectors(i[r-1],i[r-2]).add(i[r-1]),f=Kc),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(u.distanceToSquared(c),d),g=Math.pow(c.distanceToSquared(h),d),m=Math.pow(h.distanceToSquared(f),d);g<1e-4&&(g=1),p<1e-4&&(p=g),m<1e-4&&(m=g),eh.initNonuniformCatmullRom(u.x,c.x,h.x,f.x,p,g,m),th.initNonuniformCatmullRom(u.y,c.y,h.y,f.y,p,g,m),nh.initNonuniformCatmullRom(u.z,c.z,h.z,f.z,p,g,m)}else"catmullrom"===this.curveType&&(eh.initCatmullRom(u.x,c.x,h.x,f.x,this.tension),th.initCatmullRom(u.y,c.y,h.y,f.y,this.tension),nh.initCatmullRom(u.z,c.z,h.z,f.z,this.tension));return n.set(eh.calc(l),th.calc(l),nh.calc(l)),n},ki.prototype.copy=function(e){bi.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},ki.prototype.toJSON=function(){var e=bi.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},ki.prototype.fromJSON=function(e){bi.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new a).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Fi.prototype=Object.create(bi.prototype),Fi.prototype.constructor=Fi,Fi.prototype.isCubicBezierCurve=!0,Fi.prototype.getPoint=function(e,t){var i=t||new n,r=this.v0,a=this.v1,o=this.v2,s=this.v3;return i.set(Ni(e,r.x,a.x,o.x,s.x),Ni(e,r.y,a.y,o.y,s.y)),i},Fi.prototype.copy=function(e){return bi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Fi.prototype.toJSON=function(){var e=bi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Fi.prototype.fromJSON=function(e){return bi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Di.prototype=Object.create(bi.prototype),Di.prototype.constructor=Di,Di.prototype.isCubicBezierCurve3=!0,Di.prototype.getPoint=function(e,t){var n=t||new a,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(Ni(e,i.x,r.x,o.x,s.x),Ni(e,i.y,r.y,o.y,s.y),Ni(e,i.z,r.z,o.z,s.z)),n},Di.prototype.copy=function(e){return bi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Di.prototype.toJSON=function(){var e=bi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Di.prototype.fromJSON=function(e){return bi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Ii.prototype=Object.create(bi.prototype),Ii.prototype.constructor=Ii,Ii.prototype.isLineCurve=!0,Ii.prototype.getPoint=function(e,t){var i=t||new n;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i},Ii.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ii.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()},Ii.prototype.copy=function(e){return bi.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ii.prototype.toJSON=function(){var e=bi.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ii.prototype.fromJSON=function(e){return bi.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ui.prototype=Object.create(bi.prototype),Ui.prototype.constructor=Ui,Ui.prototype.isLineCurve3=!0,Ui.prototype.getPoint=function(e,t){var n=t||new a;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Ui.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ui.prototype.copy=function(e){return bi.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ui.prototype.toJSON=function(){var e=bi.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ui.prototype.fromJSON=function(e){return bi.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Hi.prototype=Object.create(bi.prototype),Hi.prototype.constructor=Hi,Hi.prototype.isQuadraticBezierCurve=!0,Hi.prototype.getPoint=function(e,t){var i=t||new n,r=this.v0,a=this.v1,o=this.v2;return i.set(Ri(e,r.x,a.x,o.x),Ri(e,r.y,a.y,o.y)),i},Hi.prototype.copy=function(e){return bi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Hi.prototype.toJSON=function(){var e=bi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Hi.prototype.fromJSON=function(e){return bi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},zi.prototype=Object.create(bi.prototype),zi.prototype.constructor=zi,zi.prototype.isQuadraticBezierCurve3=!0,zi.prototype.getPoint=function(e,t){var n=t||new a,i=this.v0,r=this.v1,o=this.v2;return n.set(Ri(e,i.x,r.x,o.x),Ri(e,i.y,r.y,o.y),Ri(e,i.z,r.z,o.z)),n},zi.prototype.copy=function(e){return bi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},zi.prototype.toJSON=function(){var e=bi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},zi.prototype.fromJSON=function(e){return bi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Bi.prototype=Object.create(bi.prototype),Bi.prototype.constructor=Bi,Bi.prototype.isSplineCurve=!0,Bi.prototype.getPoint=function(e,t){var i=t||new n,r=this.points,a=(r.length-1)*e,o=Math.floor(a),s=a-o,l=r[0===o?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(Mi(s,l.x,u.x,c.x,h.x),Mi(s,l.y,u.y,c.y,h.y)),i},Bi.prototype.copy=function(e){bi.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},Bi.prototype.toJSON=function(){var e=bi.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},Bi.prototype.fromJSON=function(e){bi.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new n).fromArray(r))}return this};var ih=Object.freeze({ArcCurve:xi,CatmullRomCurve3:ki,CubicBezierCurve:Fi,CubicBezierCurve3:Di,EllipseCurve:wi,LineCurve:Ii,LineCurve3:Ui,QuadraticBezierCurve:Hi,QuadraticBezierCurve3:zi,SplineCurve:Bi});ji.prototype=Object.assign(Object.create(bi.prototype),{constructor:ji,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ii(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){bi.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=bi.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){bi.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new ih[i.type]).fromJSON(i))}return this}}),Vi.prototype=Object.assign(Object.create(ji.prototype),{constructor:Vi,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var i=new Ii(this.currentPoint.clone(),new n(e,t));this.curves.push(i),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,i,r){var a=new Hi(this.currentPoint.clone(),new n(e,t),new n(i,r));this.curves.push(a),this.currentPoint.set(i,r)},bezierCurveTo:function(e,t,i,r,a,o){var s=new Fi(this.currentPoint.clone(),new n(e,t),new n(i,r),new n(a,o));this.curves.push(s),this.currentPoint.set(a,o)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new Bi(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,n,i,r,a)},absarc:function(e,t,n,i,r,a){this.absellipse(e,t,n,n,i,r,a)},ellipse:function(e,t,n,i,r,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,n,i,r,a,o,s)},absellipse:function(e,t,n,i,r,a,o,s){var l=new wi(e,t,n,i,r,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return ji.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=ji.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return ji.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Gi.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Gi,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Vi.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=Vi.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){Vi.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new Vi).fromJSON(i))}return this}}),Wi.prototype=Object.assign(Object.create(se.prototype),{constructor:Wi,isLight:!0,copy:function(e){return se.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=se.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Xi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Xi,isHemisphereLight:!0,copy:function(e){return Wi.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Yi.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),qi.prototype=Object.assign(Object.create(Yi.prototype),{constructor:qi,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Ml.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix())}}),Zi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Zi,isSpotLight:!0,copy:function(e){return Wi.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Qi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Qi,isPointLight:!0,copy:function(e){return Wi.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),$i.prototype=Object.assign(Object.create(Yi.prototype),{constructor:$i}),Ji.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Ji,isDirectionalLight:!0,copy:function(e){return Wi.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ki.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Ki,isAmbientLight:!0}),er.prototype=Object.assign(Object.create(Wi.prototype),{constructor:er,isRectAreaLight:!0,copy:function(e){return Wi.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Wi.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),tr.prototype=Object.assign(Object.create(hr.prototype),{constructor:tr,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:ol,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),nr.prototype=Object.assign(Object.create(hr.prototype),{constructor:nr,ValueTypeName:"bool",ValueBufferType:Array,
DefaultInterpolation:ol,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(ir.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}{if(e>=r)break e;var s=t[1];e<s&&(n=2,r=s);for(var o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===o)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0}}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ir.prototype,{beforeStart_:ir.prototype.copySampleValue_,afterEnd_:ir.prototype.copySampleValue_}),rr.prototype=Object.assign(Object.create(ir.prototype),{constructor:rr,interpolate_:function(e,t,n,i){for(var a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,u=(n-t)/(i-t),c=l+s;l!==c;l+=4)r.slerpFlat(a,0,o,l-s,o,l,u);return a}}),ar.prototype=Object.assign(Object.create(hr.prototype),{constructor:ar,ValueTypeName:"quaternion",DefaultInterpolation:sl,InterpolantFactoryMethodLinear:function(e){return new rr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),or.prototype=Object.assign(Object.create(hr.prototype),{constructor:or,ValueTypeName:"color"}),sr.prototype=Object.assign(Object.create(hr.prototype),{constructor:sr,ValueTypeName:"number"}),lr.prototype=Object.assign(Object.create(ir.prototype),{constructor:lr,DefaultSettings_:{endingStart:ul,endingEnd:ul},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case cl:r=e,o=2*t-n;break;case hl:r=i.length-2,o=t+i[r]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case cl:a=e,s=2*n-t;break;case hl:a=1,s=n+i[1]-i[0];break;default:a=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=r*u,this._offsetNext=a*u},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(i-t),p=d*d,g=p*d,m=-h*g+2*h*p-h*d,v=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*d+1,_=(-1-f)*g+(1.5+f)*p+.5*d,y=f*g-f*p,b=0;b!==o;++b)r[b]=m*a[u+b]+v*a[l+b]+_*a[s+b]+y*a[c+b];return r}}),ur.prototype=Object.assign(Object.create(ir.prototype),{constructor:ur,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(i-t),c=1-u,h=0;h!==o;++h)r[h]=a[l+h]*c+a[s+h]*u;return r}}),cr.prototype=Object.assign(Object.create(ir.prototype),{constructor:cr,interpolate_:function(e){return this.copySampleValue_(e-1)}});var rh={arraySlice:function(e,t,n){return rh.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,i=new Array(n),r=0;r!==n;++r)i[r]=r;return i.sort(t),i},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*t,l=0;l!==t;++l)r[o++]=e[s+l];return r},flattenJSON:function(e,t,n,i){for(var r=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o)){do o=a[i],void 0!==o&&(t.push(a.time),n.push.apply(n,o)),a=e[r++];while(void 0!==a)}else if(void 0!==o.toArray){do o=a[i],void 0!==o&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++];while(void 0!==a)}else do o=a[i],void 0!==o&&(t.push(a.time),n.push(o)),a=e[r++];while(void 0!==a)}}};Object.assign(hr,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=hr._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],i=[];rh.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:rh.convertArray(e.times,Array),values:rh.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return sr;case"vector":case"vector2":case"vector3":case"vector4":return fr;case"color":return or;case"quaternion":return ar;case"bool":case"boolean":return nr;case"string":return tr}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(hr.prototype,{constructor:hr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:sl,InterpolantFactoryMethodDiscrete:function(e){return new cr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new ur(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new lr(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case ol:t=this.InterpolantFactoryMethodDiscrete;break;case sl:t=this.InterpolantFactoryMethodLinear;break;case ll:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn("THREE.KeyframeTrack:",n)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ol;case this.InterpolantFactoryMethodLinear:return sl;case this.InterpolantFactoryMethodSmooth:return ll}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<e;)++r;for(;a!==-1&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);var o=this.getValueSize();this.times=rh.arraySlice(n,r,a),this.values=rh.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==i&&rh.isTypedArray(i))for(var o=0,l=i.length;o!==l;++o){var u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=this.getInterpolation()===ll,r=1,a=e.length-1,o=1;o<a;++o){var s=!1,l=e[o],u=e[o+1];if(l!==u&&(1!==o||l!==l[0]))if(i)s=!0;else for(var c=o*n,h=c-n,f=c+n,d=0;d!==n;++d){var p=t[c+d];if(p!==t[h+d]||p!==t[f+d]){s=!0;break}}if(s){if(o!==r){e[r]=e[o];for(var g=o*n,m=r*n,d=0;d!==n;++d)t[m+d]=t[g+d]}++r}}if(a>0){e[r]=e[a];for(var g=a*n,m=r*n,d=0;d!==n;++d)t[m+d]=t[g+d];++r}return r!==e.length&&(this.times=rh.arraySlice(e,0,r),this.values=rh.arraySlice(t,0,r*n)),this}}),fr.prototype=Object.assign(Object.create(hr.prototype),{constructor:fr,ValueTypeName:"vector"}),Object.assign(dr,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(hr.parse(n[r]).scale(i));return new dr(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t},r=0,a=n.length;r!==a;++r)t.push(hr.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var u=rh.getKeyframeOrder(s);s=rh.sortedArray(s,1,u),l=rh.sortedArray(l,1,u),i||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new sr(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new dr(e,(-1),a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(r);if(l&&l.length>1){var u=l[1],c=i[u];c||(i[u]=c=[]),c.push(s)}}var h=[];for(var u in i)h.push(dr.CreateFromMorphTargetSequence(u,i[u],t,n));return h},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],o=[];rh.flattenJSON(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var f=0;f<u[h].morphTargets.length;f++)c[u[h].morphTargets[f]]=-1;for(var d in c){for(var p=[],g=[],f=0;f!==u[h].morphTargets.length;++f){var m=u[h];p.push(m.time),g.push(m.morphTarget===d?1:0)}i.push(new sr(".morphTargetInfluence["+d+"]",p,g))}a=c.length*(o||1)}else{var v=".bones["+t[l].name+"]";n(fr,v+".position",u,"pos",i),n(ar,v+".quaternion",u,"rot",i),n(fr,v+".scale",u,"scl",i)}}if(0===i.length)return null;var _=new dr(r,a,i);return _}}),Object.assign(dr.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,n=0,i=e.length;n!==i;++n){var r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(pr.prototype,{load:function(e,t,n,i){var r=this,a=new pi(r.manager);a.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return void 0===i[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),i[e]}var i=this.textures,r=new Zc[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=t(e.map)),void 0!==e.alphaMap&&(r.alphaMap=t(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=t(e.normalMap)),void 0!==e.normalScale){var a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=(new n).fromArray(a)}return void 0!==e.displacementMap&&(r.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=t(e.specularMap)),void 0!==e.envMap&&(r.envMap=t(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=t(e.gradientMap)),r}}),Object.assign(gr.prototype,{load:function(e,t,n,i){var r=this,a=new pi(r.manager);a.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=new ke,n=e.data.index;if(void 0!==n){var i=new ah[n.type](n.array);t.setIndex(new fe(i,1))}var r=e.data.attributes;for(var o in r){var s=r[o],i=new ah[s.type](s.array);t.addAttribute(o,new fe(i,s.itemSize,s.normalized))}var l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(var u=0,c=l.length;u!==c;++u){var h=l[u];t.addGroup(h.start,h.count,h.materialIndex)}var f=e.data.boundingSphere;if(void 0!==f){var d=new a;void 0!==f.center&&d.fromArray(f.center),t.boundingSphere=new ee(d,f.radius)}return t}});var ah={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};mr.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],a=t[n+1];if(r.test(e))return a}return null}},Object.assign(mr.prototype,{crossOrigin:void 0,initMaterials:function(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t,n);return i},createMaterial:function(){var e={NoBlending:fo,NormalBlending:po,AdditiveBlending:go,SubtractiveBlending:mo,MultiplyBlending:vo,CustomBlending:_o},t=new Y,n=new yi,i=new pr;return function(r,a,o){function s(e,t,i,r,s){var u,c=a+e,h=mr.Handlers.get(c);null!==h?u=h.load(c):(n.setCrossOrigin(o),u=n.load(c)),void 0!==t&&(u.repeat.fromArray(t),1!==t[0]&&(u.wrapS=as),1!==t[1]&&(u.wrapT=as)),void 0!==i&&u.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(u.wrapS=as),"mirror"===r[0]&&(u.wrapS=ss),"repeat"===r[1]&&(u.wrapT=as),"mirror"===r[1]&&(u.wrapT=ss)),void 0!==s&&(u.anisotropy=s);var f=Ml.generateUUID();return l[f]=u,f}var l={},u={uuid:Ml.generateUUID(),type:"MeshLambertMaterial"};for(var c in r){var h=r[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":u.name=h;break;case"blending":u.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":u.color=t.fromArray(h).getHex();break;case"colorSpecular":u.specular=t.fromArray(h).getHex();break;case"colorEmissive":u.emissive=t.fromArray(h).getHex();break;case"specularCoef":u.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(u.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(u.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=s(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":u.emissiveMap=s(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":u.lightMap=s(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":u.aoMap=s(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":u.bumpMap=s(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":u.normalMap=s(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":u.specularMap=s(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":u.metalnessMap=s(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":u.roughnessMap=s(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":u.alphaMap=s(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":u.side=ao;break;case"doubleSided":u.side=oo;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),u.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[c]=h;break;case"vertexColors":h===!0&&(u.vertexColors=ho),"face"===h&&(u.vertexColors=co);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,h)}}return"MeshBasicMaterial"===u.type&&delete u.emissive,"MeshPhongMaterial"!==u.type&&delete u.specular,u.opacity<1&&(u.transparent=!0),i.setTextures(l),i.parse(u)}}()});var oh={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")}};Object.assign(vr.prototype,{load:function(e,t,n,i){var r=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:oh.extractUrlBase(e),o=new pi(this.manager);o.setWithCredentials(this.withCredentials),o.load(e,function(n){var i=JSON.parse(n),o=i.metadata;if(void 0!==o){var s=o.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var l=r.parse(i,a);t(l.geometry,l.materials)},n,i)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(e,t){function i(e,t){return e&1<<t}var r,o,s,l,u,c,h,f,d,p,g,m,v,_,y,b,w,x,E,k,M,T,S,A,R,C,P,O=e.faces,L=e.vertices,N=e.normals,F=e.colors,D=e.scale,I=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&I++;for(r=0;r<I;r++)t.faceVertexUvs[r]=[]}for(l=0,u=L.length;l<u;)x=new a,x.x=L[l++]*D,x.y=L[l++]*D,x.z=L[l++]*D,t.vertices.push(x);for(l=0,u=O.length;l<u;)if(p=O[l++],g=i(p,0),m=i(p,1),v=i(p,3),_=i(p,4),y=i(p,5),b=i(p,6),w=i(p,7),g){if(k=new ce,k.a=O[l],k.b=O[l+1],k.c=O[l+3],M=new ce,M.a=O[l+1],M.b=O[l+2],M.c=O[l+3],l+=4,m&&(d=O[l++],k.materialIndex=d,M.materialIndex=d),s=t.faces.length,v)for(r=0;r<I;r++)for(A=e.uvs[r],t.faceVertexUvs[r][s]=[],t.faceVertexUvs[r][s+1]=[],o=0;o<4;o++)f=O[l++],C=A[2*f],P=A[2*f+1],R=new n(C,P),2!==o&&t.faceVertexUvs[r][s].push(R),0!==o&&t.faceVertexUvs[r][s+1].push(R);if(_&&(h=3*O[l++],k.normal.set(N[h++],N[h++],N[h]),M.normal.copy(k.normal)),y)for(r=0;r<4;r++)h=3*O[l++],S=new a(N[h++],N[h++],N[h]),2!==r&&k.vertexNormals.push(S),0!==r&&M.vertexNormals.push(S);if(b&&(c=O[l++],T=F[c],k.color.setHex(T),M.color.setHex(T)),w)for(r=0;r<4;r++)c=O[l++],T=F[c],2!==r&&k.vertexColors.push(new Y(T)),0!==r&&M.vertexColors.push(new Y(T));t.faces.push(k),t.faces.push(M)}else{if(E=new ce,E.a=O[l++],E.b=O[l++],E.c=O[l++],m&&(d=O[l++],E.materialIndex=d),s=t.faces.length,v)for(r=0;r<I;r++)for(A=e.uvs[r],t.faceVertexUvs[r][s]=[],o=0;o<3;o++)f=O[l++],C=A[2*f],P=A[2*f+1],R=new n(C,P),t.faceVertexUvs[r][s].push(R);if(_&&(h=3*O[l++],E.normal.set(N[h++],N[h++],N[h])),y)for(r=0;r<3;r++)h=3*O[l++],S=new a(N[h++],N[h++],N[h]),E.vertexNormals.push(S);if(b&&(c=O[l++],E.color.setHex(F[c])),w)for(r=0;r<3;r++)c=O[l++],E.vertexColors.push(new Y(F[c]));t.faces.push(E)}}function t(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,r=e.skinWeights.length;i<r;i+=n){var a=e.skinWeights[i],o=n>1?e.skinWeights[i+1]:0,s=n>2?e.skinWeights[i+2]:0,u=n>3?e.skinWeights[i+3]:0;t.skinWeights.push(new l(a,o,s,u))}if(e.skinIndices)for(var i=0,r=e.skinIndices.length;i<r;i+=n){var c=e.skinIndices[i],h=n>1?e.skinIndices[i+1]:0,f=n>2?e.skinIndices[i+2]:0,d=n>3?e.skinIndices[i+3]:0;t.skinIndices.push(new l(c,h,f,d))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}function i(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var i=0,r=e.morphTargets.length;i<r;i++){t.morphTargets[i]={},t.morphTargets[i].name=e.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var o=t.morphTargets[i].vertices,s=e.morphTargets[i].vertices,l=0,u=s.length;l<u;l+=3){var c=new a;c.x=s[l]*n,c.y=s[l+1]*n,c.z=s[l+2]*n,o.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=t.faces,f=e.morphColors[0].colors,i=0,r=h.length;i<r;i++)h[i].color.fromArray(f,3*i)}}function r(e,t){var n=[],i=[];void 0!==e.animation&&i.push(e.animation),void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var r=0;r<i.length;r++){var a=dr.parseAnimation(i[r],t.bones);a&&n.push(a)}if(t.morphTargets){var o=dr.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(o)}n.length>0&&(t.animations=n)}return function(n,a){void 0!==n.data&&(n=n.data),void 0!==n.scale?n.scale=1/n.scale:n.scale=1;var o=new he;if(e(n,o),t(n,o),i(n,o),r(n,o),o.computeFaceNormals(),o.computeBoundingSphere(),void 0===n.materials||0===n.materials.length)return{geometry:o};var s=mr.prototype.initMaterials(n.materials,a,this.crossOrigin);return{geometry:o,materials:s}}}()}),Object.assign(_r.prototype,{load:function(e,t,n,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var r=this,a=new pi(r.manager);a.load(e,function(n){var a=null;try{a=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var o=a.metadata;return void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase()?void console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead."):void r.parse(a,t)},n,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,function(){void 0!==t&&t(s)}),a=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,i,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new Gi).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new vr,r=new gr,a=0,o=e.length;a<o;a++){var s,l=e[a];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new qc[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new qc[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new qc[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new qc[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new qc[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new qc[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new qc[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new qc[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new qc[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new qc[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new qc[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new qc[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],a=0,o=l.shapes.length;a<o;a++){var c=t[l.shapes[a]];u.push(c)}s=new qc[l.type](u,l.curveSegments);break;case"BufferGeometry":s=r.parse(l);break;case"Geometry":s=i.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),n[l.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var i=new pr;i.setTextures(t);for(var r=0,a=e.length;r<a;r++){var o=e[r];if("MultiMaterial"===o.type){for(var s=[],l=0;l<o.materials.length;l++)s.push(i.parse(o.materials[l]));n[o.uuid]=s}else n[o.uuid]=i.parse(o)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=dr.parse(e[n]);t.push(i)}return t},parseImages:function(e,t){function n(e){return i.manager.itemStart(e),o.load(e,function(){i.manager.itemEnd(e)},void 0,function(){i.manager.itemEnd(e),i.manager.itemError(e)})}var i=this,r={};if(void 0!==e&&e.length>0){var a=new di(t),o=new vi(a);o.setCrossOrigin(this.crossOrigin);for(var s=0,l=e.length;s<l;s++){var u=e[s],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:i.texturePath+u.url;r[u.uuid]=n(c)}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var l=new s(t[o.image]);l.needsUpdate=!0,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,sh)),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],lh),l.wrapT=n(o.wrap[1],lh)),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,uh)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,uh)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),i[o.uuid]=l}return i},parseObject:function(e,t,n){function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function r(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var a=e[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}var a;switch(e.type){case"Scene":a=new Mt,void 0!==e.background&&Number.isInteger(e.background)&&(a.background=new Y(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new kt(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new Et(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new ft(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ue(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":a=new Ki(e.color,e.intensity);break;case"DirectionalLight":a=new Ji(e.color,e.intensity);break;case"PointLight":a=new Qi(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new er(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Zi(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Xi(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=i(e.geometry),s=r(e.material);a=o.bones&&o.bones.length>0?new Pt(o,s):new Ne(o,s);break;case"LOD":a=new At;break;case"Line":a=new Lt(i(e.geometry),r(e.material),e.mode);break;
case"LineLoop":a=new Ft(i(e.geometry),r(e.material));break;case"LineSegments":a=new Nt(i(e.geometry),r(e.material));break;case"PointCloud":case"Points":a=new It(i(e.geometry),r(e.material));break;case"Sprite":a=new St(r(e.material));break;case"Group":a=new Ut;break;default:a=new se}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.children)for(var l=e.children,u=0;u<l.length;u++)a.add(this.parseObject(l[u],t,n));if("LOD"===e.type)for(var c=e.levels,h=0;h<c.length;h++){var f=c[h],d=a.getObjectByProperty("uuid",f.object);void 0!==d&&a.addLevel(d,f.distance)}return a}});var sh={UVMapping:$o,CubeReflectionMapping:Jo,CubeRefractionMapping:Ko,EquirectangularReflectionMapping:es,EquirectangularRefractionMapping:ts,SphericalReflectionMapping:ns,CubeUVReflectionMapping:is,CubeUVRefractionMapping:rs},lh={RepeatWrapping:as,ClampToEdgeWrapping:os,MirroredRepeatWrapping:ss},uh={NearestFilter:ls,NearestMipMapNearestFilter:us,NearestMipMapLinearFilter:cs,LinearFilter:hs,LinearMipMapNearestFilter:fs,LinearMipMapLinearFilter:ds};yr.prototype={constructor:yr,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var r=this,a=Qc.get(e);return void 0!==a?(r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a):void fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,r.options)}).then(function(n){Qc.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(br.prototype,{moveTo:function(e,t){this.currentPath=new Vi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,a){this.currentPath.bezierCurveTo(e,t,n,i,r,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new Gi;a.curves=r.curves,t.push(a)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=t[r],s=t[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=t[a],l=-l,s=t[r],u=-u),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=u*(e.x-o.x)-l*(e.y-o.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return i}var r=Yc.isClockWise,a=this.subPaths;if(0===a.length)return[];if(t===!0)return n(a);var o,s,l,u=[];if(1===a.length)return s=a[0],l=new Gi,l.curves=s.curves,u.push(l),u;var c=!r(a[0].getPoints());c=e?!c:c;var h,f=[],d=[],p=[],g=0;d[g]=void 0,p[g]=[];for(var m=0,v=a.length;m<v;m++)s=a[m],h=s.getPoints(),o=r(h),o=e?!o:o,o?(!c&&d[g]&&g++,d[g]={s:new Gi,p:h},d[g].s.curves=s.curves,c&&g++,p[g]=[]):p[g].push({h:s,p:h[0]});if(!d[0])return n(a);if(d.length>1){for(var _=!1,y=[],b=0,w=d.length;b<w;b++)f[b]=[];for(var b=0,w=d.length;b<w;b++)for(var x=p[b],E=0;E<x.length;E++){for(var k=x[E],M=!0,T=0;T<d.length;T++)i(k.p,d[T].p)&&(b!==T&&y.push({froms:b,tos:T,hole:E}),M?(M=!1,f[T].push(k)):_=!0);M&&f[b].push(k)}y.length>0&&(_||(p=f))}for(var S,m=0,A=d.length;m<A;m++){l=d[m].s,u.push(l),S=p[m];for(var R=0,C=S.length;R<C;R++)l.holes.push(S[R].h)}return u}}),Object.assign(wr.prototype,{isFont:!0,generateShapes:function(e,t,n){void 0===t&&(t=100),void 0===n&&(n=4);for(var i=[],r=xr(e,t,n,this.data),a=0,o=r.length;a<o;a++)Array.prototype.push.apply(i,r[a].toShapes());return i}}),Object.assign(kr.prototype,{load:function(e,t,n,i){var r=this,a=new pi(this.manager);a.setPath(this.path),a.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)},n,i)},parse:function(e){return new wr(e)},setPath:function(e){return this.path=e,this}});var ch,hh={getContext:function(){return void 0===ch&&(ch=new(window.AudioContext||window.webkitAudioContext)),ch},setContext:function(e){ch=e}};Object.assign(Mr.prototype,{load:function(e,t,n,i){var r=new pi(this.manager);r.setResponseType("arraybuffer"),r.load(e,function(e){var n=hh.getContext();n.decodeAudioData(e,function(e){t(e)})},n,i)}}),Object.assign(Tr.prototype,{update:function(){var e,t,n,r,a,o,s,l,u=new i,c=new i;return function(i){var h=e!==this||t!==i.focus||n!==i.fov||r!==i.aspect*this.aspect||a!==i.near||o!==i.far||s!==i.zoom||l!==this.eyeSep;if(h){e=this,t=i.focus,n=i.fov,r=i.aspect*this.aspect,a=i.near,o=i.far,s=i.zoom;var f=i.projectionMatrix.clone();l=this.eyeSep/2;var d,p,g=l*a/t,m=a*Math.tan(Ml.DEG2RAD*n*.5)/s;c.elements[12]=-l,u.elements[12]=l,d=-m*r+g,p=m*r+g,f.elements[0]=2*a/(p-d),f.elements[8]=(p+d)/(p-d),this.cameraL.projectionMatrix.copy(f),d=-m*r-g,p=m*r-g,f.elements[0]=2*a/(p-d),f.elements[8]=(p+d)/(p-d),this.cameraR.projectionMatrix.copy(f)}this.cameraL.matrixWorld.copy(i.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(i.matrixWorld).multiply(u)}}()}),Sr.prototype=Object.create(se.prototype),Sr.prototype.constructor=Sr,Ar.prototype=Object.assign(Object.create(se.prototype),{constructor:Ar,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new a,t=new r,n=new a,i=new a;return function(r){se.prototype.updateMatrixWorld.call(this,r);var a=this.context.listener,o=this.up;this.matrixWorld.decompose(e,t,n),i.set(0,0,-1).applyQuaternion(t),a.positionX?(a.positionX.setValueAtTime(e.x,this.context.currentTime),a.positionY.setValueAtTime(e.y,this.context.currentTime),a.positionZ.setValueAtTime(e.z,this.context.currentTime),a.forwardX.setValueAtTime(i.x,this.context.currentTime),a.forwardY.setValueAtTime(i.y,this.context.currentTime),a.forwardZ.setValueAtTime(i.z,this.context.currentTime),a.upX.setValueAtTime(o.x,this.context.currentTime),a.upY.setValueAtTime(o.y,this.context.currentTime),a.upZ.setValueAtTime(o.z,this.context.currentTime)):(a.setPosition(e.x,e.y,e.z),a.setOrientation(i.x,i.y,i.z,o.x,o.y,o.z))}}()}),Rr.prototype=Object.assign(Object.create(se.prototype),{constructor:Rr,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.isPlaying===!0&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.offset=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),Cr.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Cr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new a;return function(t){se.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(Pr.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Or.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=t}else{a+=t;var s=t/a;this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,r<1){var o=3*t;this._mixBufferRegion(n,i,o,1-r,t)}for(var s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){a.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,i){r.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*i}}});var fh="\\[\\]\\.:\\/";Object.assign(Lr.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Nr,{Composite:Lr,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Nr.Composite(e,t,n):new Nr(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("["+fh+"]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+fh+"]",t="[^"+fh.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),i=/(WCOD+)?/.source.replace("WCOD",t),r=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),a=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),o=new RegExp("^"+n+i+r+a+"$"),s=["material","materials","bones"];return function(e){var t=o.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&i!==-1){var r=n.nodeName.substring(i+1);s.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var a=i(r.children);if(a)return a}return null},r=i(e.children);if(r)return r}return null}}),Object.assign(Nr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=Nr.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[i];if(void 0===s){var l=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e)}var u=this.Versioning.None;void 0!==e.needsUpdate?(u=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===r){r=o;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Nr.prototype,{_getValue_unbound:Nr.prototype.getValue,_setValue_unbound:Nr.prototype.setValue}),Object.assign(Fr.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],f=h.uuid,d=i[f];if(void 0===d){d=t++,i[f]=d,e.push(h);for(var p=0,g=s;p!==g;++p)o[p].push(new Nr(h,r[p],a[p]))}else if(d<n){l=e[d];var m=--n,v=e[m];i[v.uuid]=d,e[d]=v,i[f]=m,e[m]=h;for(var p=0,g=s;p!==g;++p){var _=o[p],y=_[m],b=_[d];_[d]=y,void 0===b&&(b=new Nr(h,r[p],a[p])),_[m]=b}}else e[d]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=n[l];if(void 0!==u&&u>=t){var c=t++,h=e[c];n[h.uuid]=u,e[u]=h,n[l]=c,e[c]=s;for(var f=0,d=r;f!==d;++f){var p=i[f],g=p[c],m=p[u];p[u]=g,p[c]=m}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=i[u];if(void 0!==c)if(delete i[u],c<n){var h=--n,f=e[h],d=--t,p=e[d];i[f.uuid]=c,e[c]=f,i[p.uuid]=h,e[h]=p,e.pop();for(var g=0,m=a;g!==m;++g){var v=r[g],_=v[h],y=v[d];v[c]=_,v[h]=y,v.pop()}}else{var d=--t,p=e[d];i[p.uuid]=c,e[c]=p,e.pop();for(var g=0,m=a;g!==m;++g){var v=r[g];v[c]=v[d],v.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[e]=i,a.push(e),o.push(t),r.push(c);for(var h=u,f=s.length;h!==f;++h){var d=s[h];c[h]=new Nr(d,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],l=e[o];t[l]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(Dr.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,o=i/r;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/o,l[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);var r=this._startTime;if(null!==r){var a=(e-r)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(i,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(i===il){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=i===al;if(r===-1&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=n||t<0){var o=Math.floor(t/n);t-=n*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1===(1&r))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=cl,i.endingEnd=cl):(e?i.endingStart=this.zeroSlopeAtStart?cl:ul:i.endingStart=hl,t?i.endingEnd=this.zeroSlopeAtEnd?cl:ul:i.endingEnd=hl)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}),Ir.prototype=Object.assign(Object.create(t.prototype),{constructor:Ir,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==r;++c){var h=i[c],f=h.name,d=u[f];if(void 0!==d)a[c]=d;else{if(d=a[c],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;d=new Or(Nr.create(n,f,p),h.ValueTypeName,h.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,s,f),a[c]=d}o[c].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;var c=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete c[h],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],a=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[r];e:{for(var u in o)break e;delete a[i]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new ur(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?dr.findByName(n,e):e,a=null!==r?r.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var l=o.actionByRoot[i];if(void 0!==l)return l;s=o.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var u=new Dr(this,r,t);return this._bindAction(u,s),this._addInactiveAction(u,a,i),u},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?dr.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o?o.actionByRoot[i]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(var r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){var s=t[o];s._update(i,e,r,a)}for(var l=this._bindings,u=this._nActiveBindings,o=0;o!==u;++o)l[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot,a=r[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[t];if(void 0!==s)for(var l in s){var u=s[l];u.restoreOriginalState(),
this._removeInactiveBinding(u)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Ur.prototype.clone=function(){return new Ur(void 0===this.value.clone?this.value:this.value.clone())},Hr.prototype=Object.assign(Object.create(ke.prototype),{constructor:Hr,isInstancedBufferGeometry:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(zr.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(zr.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),Object.defineProperty(Br.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Object.assign(Br.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),jr.prototype=Object.assign(Object.create(Br.prototype),{constructor:jr,isInstancedInterleavedBuffer:!0,copy:function(e){return Br.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Vr.prototype=Object.assign(Object.create(fe.prototype),{constructor:Vr,isInstancedBufferAttribute:!0,copy:function(e){return fe.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Gr.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var n=[];return Xr(e,this,n,t),n.sort(Wr),n},intersectObjects:function(e,t){var n=[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,r=e.length;i<r;i++)Xr(e[i],this,n,t);return n.sort(Wr),n}}),Object.assign(Yr.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(qr.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Ml.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Zr.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(Qr.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new n;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new n;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new n;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var i=t||new n;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){var i=t||new n;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new n;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),$r.prototype=Object.create(se.prototype),$r.prototype.constructor=$r,$r.prototype.isImmediateRenderObject=!0,Jr.prototype=Object.create(Nt.prototype),Jr.prototype.constructor=Jr,Jr.prototype.update=function(){var e=new a,t=new a,n=new o;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,l=o.faces,u=0,c=0,h=l.length;c<h;c++)for(var f=l[c],d=0,p=f.vertexNormals.length;d<p;d++){var g=s[f[i[d]]],m=f.vertexNormals[d];e.copy(g).applyMatrix4(r),t.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}else if(o&&o.isBufferGeometry)for(var v=o.attributes.position,_=o.attributes.normal,u=0,d=0,p=v.count;d<p;d++)e.set(v.getX(d),v.getY(d),v.getZ(d)).applyMatrix4(r),t.set(_.getX(d),_.getY(d),_.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1;a.needsUpdate=!0}}(),Kr.prototype=Object.create(se.prototype),Kr.prototype.constructor=Kr,Kr.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Kr.prototype.update=function(){var e=new a,t=new a;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),ta.prototype=Object.create(Nt.prototype),ta.prototype.constructor=ta,ta.prototype.updateMatrixWorld=function(){var e=new a,t=new i,n=new i;return function(i){var r=this.bones,a=this.geometry,o=a.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<r.length;s++){var u=r[s];u.parent&&u.parent.isBone&&(t.multiplyMatrices(n,u.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(n,u.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(l+1,e.x,e.y,e.z),l+=2)}a.getAttribute("position").needsUpdate=!0,se.prototype.updateMatrixWorld.call(this,i)}}(),na.prototype=Object.create(Ne.prototype),na.prototype.constructor=na,na.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},na.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ia.prototype=Object.create(se.prototype),ia.prototype.constructor=ia,ia.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ia.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,i=n.array;i[0]=e,i[1]=-t,i[2]=0,i[3]=e,i[4]=t,i[5]=0,i[6]=-e,i[7]=t,i[8]=0,i[9]=-e,i[10]=-t,i[11]=0,i[12]=e,i[13]=-t,i[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},ra.prototype=Object.create(se.prototype),ra.prototype.constructor=ra,ra.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ra.prototype.update=function(){var e=new a,t=new Y,n=new Y;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var a=0,o=r.count;a<o;a++){var s=a<o/2?t:n;r.setXYZ(a,s.r,s.g,s.b)}r.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),aa.prototype=Object.create(Nt.prototype),aa.prototype.constructor=aa,oa.prototype=Object.create(Nt.prototype),oa.prototype.constructor=oa,sa.prototype=Object.create(Nt.prototype),sa.prototype.constructor=sa,sa.prototype.update=function(){var e=new a,t=new a,n=new o;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,l=0,u=0,c=s.length;u<c;u++){var h=s[u],f=h.normal;e.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(i),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),r.setXYZ(l,e.x,e.y,e.z),l+=1,r.setXYZ(l,t.x,t.y,t.z),l+=1}r.needsUpdate=!0}}(),la.prototype=Object.create(se.prototype),la.prototype.constructor=la,la.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},la.prototype.update=function(){var e=new a,t=new a,n=new a;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),ua.prototype=Object.create(Nt.prototype),ua.prototype.constructor=ua,ua.prototype.update=function(){function e(e,a,o,s){i.set(a,o,s).unproject(r);var l=n[e];if(void 0!==l)for(var u=t.getAttribute("position"),c=0,h=l.length;c<h;c++)u.setXYZ(l[c],i.x,i.y,i.z)}var t,n,i=new a,r=new le;return function(){t=this.geometry,n=this.pointMap;var i=1,a=1;r.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-i,-a,-1),e("n2",i,-a,-1),e("n3",-i,a,-1),e("n4",i,a,-1),e("f1",-i,-a,1),e("f2",i,-a,1),e("f3",-i,a,1),e("f4",i,a,1),e("u1",.7*i,1.1*a,-1),e("u2",.7*-i,1.1*a,-1),e("u3",0,2*a,-1),e("cf1",-i,0,1),e("cf2",i,0,1),e("cf3",0,-a,1),e("cf4",0,a,1),e("cn1",-i,0,-1),e("cn2",i,0,-1),e("cn3",0,-a,-1),e("cn4",0,a,-1),t.getAttribute("position").needsUpdate=!0}}(),ca.prototype=Object.create(Nt.prototype),ca.prototype.constructor=ca,ca.prototype.update=function(){var e=new K;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,i=e.max,r=this.geometry.attributes.position,a=r.array;a[0]=i.x,a[1]=i.y,a[2]=i.z,a[3]=n.x,a[4]=i.y,a[5]=i.z,a[6]=n.x,a[7]=n.y,a[8]=i.z,a[9]=i.x,a[10]=n.y,a[11]=i.z,a[12]=i.x,a[13]=i.y,a[14]=n.z,a[15]=n.x,a[16]=i.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=i.x,a[22]=n.y,a[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),ca.prototype.setFromObject=function(e){return this.object=e,this.update(),this},ha.prototype=Object.create(Nt.prototype),ha.prototype.constructor=ha,ha.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),se.prototype.updateMatrixWorld.call(this,e))},fa.prototype=Object.create(Lt.prototype),fa.prototype.constructor=fa,fa.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),se.prototype.updateMatrixWorld.call(this,e)};var dh,ph;da.prototype=Object.create(se.prototype),da.prototype.constructor=da,da.prototype.setDirection=function(){var e,t=new a;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),da.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},da.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},pa.prototype=Object.create(Nt.prototype),pa.prototype.constructor=pa;var gh=0,mh=1;bi.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(bi.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(ji.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new he,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new a(r.x,r.y,r.z||0))}return t}}),Object.assign(Vi.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Fa.prototype=Object.create(ki.prototype),Da.prototype=Object.create(ki.prototype),Ia.prototype=Object.create(ki.prototype),Object.assign(Ia.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),aa.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ta.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(mr.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),oh.extractUrlBase(e)}}),Object.assign(Qr.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(K.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Oe.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Ml,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ml.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ml.ceilPowerOfTwo(e)}}),Object.assign(o.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(i.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new a),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,a)}}),te.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},r.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Pe.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Gi.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Un(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new qn(this,e)}}),Object.assign(n.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(a.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(l.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(he.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(se.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(se.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(At.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Rt.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(bi.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),ft.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Wi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(fe.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(ke.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(ke.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Ur.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Q.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Y}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===so}}}),Object.defineProperties(li.prototype,{
metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ce.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(xt.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(xt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ie.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(u.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(pt.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Rr.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this,n=new Mr;return n.load(e,function(e){t.setBuffer(e)}),this},Pr.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Sr.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var vh={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},_h={crossOrigin:void 0,loadTexture:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new yi;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},loadTextureCube:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new _i;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},yh={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};e.WebGLRenderTargetCube=c,e.WebGLRenderTarget=u,e.WebGLRenderer=xt,e.ShaderLib=Hc,e.UniformsLib=Fl,e.UniformsUtils=Dl,e.ShaderChunk=Uc,e.FogExp2=Et,e.Fog=kt,e.Scene=Mt,e.Sprite=St,e.LOD=At,e.SkinnedMesh=Pt,e.Skeleton=Rt,e.Bone=Ct,e.Mesh=Ne,e.LineSegments=Nt,e.LineLoop=Ft,e.Line=Lt,e.Points=It,e.Group=Ut,e.VideoTexture=Ht,e.DataTexture=h,e.CompressedTexture=zt,e.CubeTexture=f,e.CanvasTexture=q,e.DepthTexture=Bt,e.Texture=s,e.CompressedTextureLoader=gi,e.DataTextureLoader=mi,e.CubeTextureLoader=_i,e.TextureLoader=yi,e.ObjectLoader=_r,e.MaterialLoader=pr,e.BufferGeometryLoader=gr,e.DefaultLoadingManager=$c,e.LoadingManager=di,e.JSONLoader=vr,e.ImageLoader=vi,e.ImageBitmapLoader=yr,e.FontLoader=kr,e.FileLoader=pi,e.Loader=mr,e.LoaderUtils=oh,e.Cache=Qc,e.AudioLoader=Mr,e.SpotLightShadow=qi,e.SpotLight=Zi,e.PointLight=Qi,e.RectAreaLight=er,e.HemisphereLight=Xi,e.DirectionalLightShadow=$i,e.DirectionalLight=Ji,e.AmbientLight=Ki,e.LightShadow=Yi,e.Light=Wi,e.StereoCamera=Tr,e.PerspectiveCamera=ft,e.OrthographicCamera=ue,e.CubeCamera=Sr,e.ArrayCamera=dt,e.Camera=le,e.AudioListener=Ar,e.PositionalAudio=Cr,e.AudioContext=hh,e.AudioAnalyser=Pr,e.Audio=Rr,e.VectorKeyframeTrack=fr,e.StringKeyframeTrack=tr,e.QuaternionKeyframeTrack=ar,e.NumberKeyframeTrack=sr,e.ColorKeyframeTrack=or,e.BooleanKeyframeTrack=nr,e.PropertyMixer=Or,e.PropertyBinding=Nr,e.KeyframeTrack=hr,e.AnimationUtils=rh,e.AnimationObjectGroup=Fr,e.AnimationMixer=Ir,e.AnimationClip=dr,e.Uniform=Ur,e.InstancedBufferGeometry=Hr,e.BufferGeometry=ke,e.Geometry=he,e.InterleavedBufferAttribute=zr,e.InstancedInterleavedBuffer=jr,e.InterleavedBuffer=Br,e.InstancedBufferAttribute=Vr,e.Face3=ce,e.Object3D=se,e.Raycaster=Gr,e.Layers=oe,e.EventDispatcher=t,e.Clock=Yr,e.QuaternionLinearInterpolant=rr,e.LinearInterpolant=ur,e.DiscreteInterpolant=cr,e.CubicInterpolant=lr,e.Interpolant=ir,e.Triangle=Le,e.Math=Ml,e.Spherical=qr,e.Cylindrical=Zr,e.Plane=te,e.Frustum=ne,e.Sphere=ee,e.Ray=Pe,e.Matrix4=i,e.Matrix3=o,e.Box3=K,e.Box2=Qr,e.Line3=Oe,e.Euler=ae,e.Vector4=l,e.Vector3=a,e.Vector2=n,e.Quaternion=r,e.Color=Y,e.ImmediateRenderObject=$r,e.VertexNormalsHelper=Jr,e.SpotLightHelper=Kr,e.SkeletonHelper=ta,e.PointLightHelper=na,e.RectAreaLightHelper=ia,e.HemisphereLightHelper=ra,e.GridHelper=aa,e.PolarGridHelper=oa,e.FaceNormalsHelper=sa,e.DirectionalLightHelper=la,e.CameraHelper=ua,e.BoxHelper=ca,e.Box3Helper=ha,e.PlaneHelper=fa,e.ArrowHelper=da,e.AxesHelper=pa,e.Shape=Gi,e.Path=Vi,e.ShapePath=br,e.Font=wr,e.CurvePath=ji,e.Curve=bi,e.ShapeUtils=Yc,e.WebGLUtils=vt,e.WireframeGeometry=jt,e.ParametricGeometry=Vt,e.ParametricBufferGeometry=Gt,e.TetrahedronGeometry=Yt,e.TetrahedronBufferGeometry=qt,e.OctahedronGeometry=Zt,e.OctahedronBufferGeometry=Qt,e.IcosahedronGeometry=$t,e.IcosahedronBufferGeometry=Jt,e.DodecahedronGeometry=Kt,e.DodecahedronBufferGeometry=en,e.PolyhedronGeometry=Wt,e.PolyhedronBufferGeometry=Xt,e.TubeGeometry=tn,e.TubeBufferGeometry=nn,e.TorusKnotGeometry=rn,e.TorusKnotBufferGeometry=an,e.TorusGeometry=on,e.TorusBufferGeometry=sn,e.TextGeometry=zn,e.TextBufferGeometry=Bn,e.SphereGeometry=jn,e.SphereBufferGeometry=Vn,e.RingGeometry=Gn,e.RingBufferGeometry=Wn,e.PlaneGeometry=Se,e.PlaneBufferGeometry=Ae,e.LatheGeometry=Xn,e.LatheBufferGeometry=Yn,e.ShapeGeometry=qn,e.ShapeBufferGeometry=Zn,e.ExtrudeGeometry=Un,e.ExtrudeBufferGeometry=Hn,e.EdgesGeometry=$n,e.ConeGeometry=ei,e.ConeBufferGeometry=ti,e.CylinderGeometry=Jn,e.CylinderBufferGeometry=Kn,e.CircleGeometry=ni,e.CircleBufferGeometry=ii,e.BoxGeometry=Me,e.BoxBufferGeometry=Te,e.ShadowMaterial=ri,e.SpriteMaterial=Tt,e.RawShaderMaterial=ai,e.ShaderMaterial=Ce,e.PointsMaterial=Dt,e.MeshPhysicalMaterial=si,e.MeshStandardMaterial=oi,e.MeshPhongMaterial=li,e.MeshToonMaterial=ui,e.MeshNormalMaterial=ci,e.MeshLambertMaterial=hi,e.MeshDepthMaterial=$,e.MeshDistanceMaterial=J,e.MeshBasicMaterial=Re,e.LineDashedMaterial=fi;e.LineBasicMaterial=Ot;e.Material=Q,e.Float64BufferAttribute=we,e.Float32BufferAttribute=be,e.Uint32BufferAttribute=ye,e.Int32BufferAttribute=_e,e.Uint16BufferAttribute=ve,e.Int16BufferAttribute=me,e.Uint8ClampedBufferAttribute=ge,e.Uint8BufferAttribute=pe,e.Int8BufferAttribute=de,e.BufferAttribute=fe,e.ArcCurve=xi,e.CatmullRomCurve3=ki,e.CubicBezierCurve=Fi,e.CubicBezierCurve3=Di,e.EllipseCurve=wi,e.LineCurve=Ii,e.LineCurve3=Ui,e.QuadraticBezierCurve=Hi,e.QuadraticBezierCurve3=zi,e.SplineCurve=Bi,e.REVISION=Ya,e.MOUSE=qa,e.CullFaceNone=Za,e.CullFaceBack=Qa,e.CullFaceFront=$a,e.CullFaceFrontBack=Ja,e.FrontFaceDirectionCW=Ka,e.FrontFaceDirectionCCW=eo,e.BasicShadowMap=to,e.PCFShadowMap=no,e.PCFSoftShadowMap=io,e.FrontSide=ro,e.BackSide=ao,e.DoubleSide=oo,e.FlatShading=so,e.SmoothShading=lo,e.NoColors=uo,e.FaceColors=co,e.VertexColors=ho,e.NoBlending=fo,e.NormalBlending=po,e.AdditiveBlending=go,e.SubtractiveBlending=mo,e.MultiplyBlending=vo,e.CustomBlending=_o,e.AddEquation=yo,e.SubtractEquation=bo,e.ReverseSubtractEquation=wo,e.MinEquation=xo,e.MaxEquation=Eo,e.ZeroFactor=ko,e.OneFactor=Mo,e.SrcColorFactor=To,e.OneMinusSrcColorFactor=So,e.SrcAlphaFactor=Ao,e.OneMinusSrcAlphaFactor=Ro,e.DstAlphaFactor=Co,e.OneMinusDstAlphaFactor=Po,e.DstColorFactor=Oo,e.OneMinusDstColorFactor=Lo,e.SrcAlphaSaturateFactor=No,e.NeverDepth=Fo,e.AlwaysDepth=Do,e.LessDepth=Io,e.LessEqualDepth=Uo,e.EqualDepth=Ho,e.GreaterEqualDepth=zo,e.GreaterDepth=Bo,e.NotEqualDepth=jo,e.MultiplyOperation=Vo,e.MixOperation=Go,e.AddOperation=Wo,e.NoToneMapping=Xo,e.LinearToneMapping=Yo,e.ReinhardToneMapping=qo,e.Uncharted2ToneMapping=Zo,e.CineonToneMapping=Qo,e.UVMapping=$o,e.CubeReflectionMapping=Jo,e.CubeRefractionMapping=Ko,e.EquirectangularReflectionMapping=es,e.EquirectangularRefractionMapping=ts,e.SphericalReflectionMapping=ns,e.CubeUVReflectionMapping=is,e.CubeUVRefractionMapping=rs,e.RepeatWrapping=as,e.ClampToEdgeWrapping=os,e.MirroredRepeatWrapping=ss,e.NearestFilter=ls,e.NearestMipMapNearestFilter=us,e.NearestMipMapLinearFilter=cs,e.LinearFilter=hs,e.LinearMipMapNearestFilter=fs,e.LinearMipMapLinearFilter=ds,e.UnsignedByteType=ps,e.ByteType=gs,e.ShortType=ms,e.UnsignedShortType=vs,e.IntType=_s,e.UnsignedIntType=ys,e.FloatType=bs,e.HalfFloatType=ws,e.UnsignedShort4444Type=xs,e.UnsignedShort5551Type=Es,e.UnsignedShort565Type=ks,e.UnsignedInt248Type=Ms,e.AlphaFormat=Ts,e.RGBFormat=Ss,e.RGBAFormat=As,e.LuminanceFormat=Rs,e.LuminanceAlphaFormat=Cs,e.RGBEFormat=Ps,e.DepthFormat=Os,e.DepthStencilFormat=Ls,e.RGB_S3TC_DXT1_Format=Ns,e.RGBA_S3TC_DXT1_Format=Fs,e.RGBA_S3TC_DXT3_Format=Ds,e.RGBA_S3TC_DXT5_Format=Is,e.RGB_PVRTC_4BPPV1_Format=Us,e.RGB_PVRTC_2BPPV1_Format=Hs,e.RGBA_PVRTC_4BPPV1_Format=zs,e.RGBA_PVRTC_2BPPV1_Format=Bs,e.RGB_ETC1_Format=js,e.RGBA_ASTC_4x4_Format=Vs,e.RGBA_ASTC_5x4_Format=Gs,e.RGBA_ASTC_5x5_Format=Ws,e.RGBA_ASTC_6x5_Format=Xs,e.RGBA_ASTC_6x6_Format=Ys,e.RGBA_ASTC_8x5_Format=qs,e.RGBA_ASTC_8x6_Format=Zs,e.RGBA_ASTC_8x8_Format=Qs,e.RGBA_ASTC_10x5_Format=$s,e.RGBA_ASTC_10x6_Format=Js,e.RGBA_ASTC_10x8_Format=Ks,e.RGBA_ASTC_10x10_Format=el,e.RGBA_ASTC_12x10_Format=tl,e.RGBA_ASTC_12x12_Format=nl,e.LoopOnce=il,e.LoopRepeat=rl,e.LoopPingPong=al,e.InterpolateDiscrete=ol,e.InterpolateLinear=sl,e.InterpolateSmooth=ll,e.ZeroCurvatureEnding=ul,e.ZeroSlopeEnding=cl,e.WrapAroundEnding=hl,e.TrianglesDrawMode=fl,e.TriangleStripDrawMode=dl,e.TriangleFanDrawMode=pl,e.LinearEncoding=gl,e.sRGBEncoding=ml,e.GammaEncoding=vl,e.RGBEEncoding=_l,e.LogLuvEncoding=yl,e.RGBM7Encoding=bl,e.RGBM16Encoding=wl,e.RGBDEncoding=xl,e.BasicDepthPacking=El,e.RGBADepthPacking=kl,e.CubeGeometry=Me,e.Face4=ga,e.LineStrip=gh,e.LinePieces=mh,e.MeshFaceMaterial=ma,e.MultiMaterial=va,e.PointCloud=_a,e.Particle=ya,e.ParticleSystem=ba,e.PointCloudMaterial=wa,e.ParticleBasicMaterial=xa,e.ParticleSystemMaterial=Ea,e.Vertex=ka,e.DynamicBufferAttribute=Ma,e.Int8Attribute=Ta,e.Uint8Attribute=Sa,e.Uint8ClampedAttribute=Aa,e.Int16Attribute=Ra,e.Uint16Attribute=Ca,e.Int32Attribute=Pa,e.Uint32Attribute=Oa,e.Float32Attribute=La,e.Float64Attribute=Na,e.ClosedSplineCurve3=Fa,e.SplineCurve3=Da,e.Spline=Ia,e.AxisHelper=Ua,e.BoundingBoxHelper=Ha,e.EdgesHelper=za,e.WireframeHelper=Ba,e.XHRLoader=ja,e.BinaryTextureLoader=Va,e.GeometryUtils=vh,e.ImageUtils=_h,e.Projector=Ga,e.CanvasRenderer=Wa,e.SceneUtils=yh,e.LensFlare=Xa,Object.defineProperty(e,"__esModule",{value:!0})}),function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){e("./index")(THREE)},{"./index":2}],2:[function(e,t,n){t.exports=function(t){e("./monkey-patch.js")(t);var n=new t.MeshDepthMaterial;n.depthPacking=t.RGBADepthPacking,n.clipping=!0,n.defines={INSTANCE_TRANSFORM:"",INSTANCE_VISIBLE:""};var i=t.ShaderLib.distanceRGBA,r=t.UniformsUtils.clone(i.uniforms),a={USE_SHADOWMAP:"",INSTANCE_VISIBLE:"",INSTANCE_TRANSFORM:""},o=new t.ShaderMaterial({defines:a,uniforms:r,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,clipping:!0});return t.InstancedMesh=function(e,i,r,a){t.Mesh.call(this,new t.InstancedBufferGeometry),this._dynamic=!!i,this._uniformScale=!!a,this._colors=!!r,this.numInstances=e,this._setAttributes(),this.frustumCulled=!1,this.customDepthMaterial=n,this.customDistanceMaterial=o},t.InstancedMesh.prototype=Object.create(t.Mesh.prototype),t.InstancedMesh.constructor=t.InstancedMesh,Object.defineProperties(t.InstancedMesh.prototype,{material:{set:function(e){e.defines?(e.defines.INSTANCE_TRANSFORM="",e.defines.INSTANCE_VISIBLE="",this._uniformScale?e.defines.INSTANCE_UNIFORM="":delete e.defines.INSTANCE_UNIFORM,this._colors?e.defines.INSTANCE_COLOR="":delete e.defines.INSTANCE_COLOR):(e.defines={INSTANCE_TRANSFORM:"",INSTANCE_VISIBLE:""},this._uniformScale&&(e.defines.INSTANCE_UNIFORM=""),this._colors&&(e.defines.INSTANCE_COLOR="")),this._material=e},get:function(){return this._material}},numInstances:{set:function(e){this._numInstances=e,this._setAttributes()},get:function(){return this._numInstances}},geometry:{set:function(e){e.attributes.instancePosition?(this._geometry=new t.InstancedBufferGeometry,this._setAttributes()):this._geometry=e},get:function(){return this._geometry}}}),t.InstancedMesh.prototype.setPositionAt=function(e,t){this.geometry.attributes.instancePosition.setXYZ(e,t.x,t.y,t.z)},t.InstancedMesh.prototype.setMColAt=function(e,t,n){this.geometry.attributes[t].setXYZ(e,n.x,n.y,n.z)},t.InstancedMesh.prototype.setVisibleAt=function(e,t){this.geometry.attributes.visible.setX(e,t)},t.InstancedMesh.prototype.setQuaternionAt=function(e,t){this.geometry.attributes.instanceQuaternion.setXYZW(e,t.x,t.y,t.z,t.w)},t.InstancedMesh.prototype.setScaleAt=function(e,t){this.geometry.attributes.instanceScale.setXYZ(e,t.x,t.y,t.z)},t.InstancedMesh.prototype.setTransformMatrixAt=function(e,t){for(var n=0;n<16;n++)this.geometry.attributes.transformMatrix.set(16*e+n,t[n])},t.InstancedMesh.prototype.setColorAt=function(e,t){return this._colors?void this.geometry.attributes.instanceColor.setXYZ(e,Math.floor(255*t.r),Math.floor(255*t.g),Math.floor(255*t.b)):void console.warn("THREE.InstancedMesh: color not enabled")},t.InstancedMesh.prototype.getPositionAt=function(e,n){var i=this.geometry.attributes.mcol0.array;return e*=3,n?n.set(i[e++],i[e++],i[e]):new t.Vector3(i[e++],i[e++],i[e])},t.InstancedMesh.prototype.getMColAt=function(e,n,i){var r=this.geometry.attributes[n].array;return e*=3,i?i.set(r[e++],r[e++],r[e]):new t.Vector3(r[e++],r[e++],r[e])},t.InstancedMesh.prototype.getVisibleAt=function(e){var t=this.geometry.attributes.visible.array;return t[e]},t.InstancedMesh.prototype.getPositionAt=function(e,n){var i=this.geometry.attributes.instancePosition.array;return e*=3,n?n.set(i[e++],i[e++],i[e]):new t.Vector3(i[e++],i[e++],i[e])},t.InstancedMesh.prototype.getTransformMatrix=function(e,n){var i=this.geometry.attributes.instanceQuaternion.array;return e*=16,n?quat.set(i[e++],i[e++],i[e++],i[e]):new t.Quaternion(i[e++],i[e++],i[e++],i[e])},t.InstancedMesh.prototype.getQuaternionAt=function(e,n){var i=this.geometry.attributes.instanceQuaternion.array;return e<<=2,n?n.set(i[e++],i[e++],i[e++],i[e]):new t.Quaternion(i[e++],i[e++],i[e++],i[e])},t.InstancedMesh.prototype.getScaleAt=function(e,n){var i=this.geometry.attributes.instanceScale.array;return e*=3,n?n.set(i[e++],i[e++],i[e]):new t.Vector3(i[e++],i[e++],i[e])},t.InstancedMesh.prototype.getColorAt=function(){var e=1/255;return function(n,i){if(!this._colors)return console.warn("THREE.InstancedMesh: color not enabled"),!1;var r=this.geometry.attributes.instanceColor.array;return n*=3,i?i.setRGB(r[n++]*e,r[n++]*e,r[n]*e):new t.Vector3(r[n++],r[n++],r[n]).multiplyScalar(e)}}(),t.InstancedMesh.prototype.needsUpdate=function(e){switch(e){case"position":this.geometry.attributes.instancePosition.needsUpdate=!0;break;case"quaternion":this.geometry.attributes.instanceQuaternion.needsUpdate=!0;break;case"scale":this.geometry.attributes.instanceScale.needsUpdate=!0;break;case"transformMatrix":this.geometry.attributes.transformMatrix.needsUpdate=!0;break;case"colors":default:this.geometry.attributes.mcol0.needsUpdate=!0,this.geometry.attributes.mcol1.needsUpdate=!0,this.geometry.attributes.mcol2.needsUpdate=!0,this.geometry.attributes.mcol3.needsUpdate=!0,this.geometry.attributes.visible.needsUpdate=!0}},t.InstancedMesh.prototype.copyAttributes=function(){var e=this.bufferGeometry.index;null!==e&&this.geometry.setIndex(e);for(var t in this.bufferGeometry.attributes)this.geometry.addAttribute(t,this.bufferGeometry.attributes[t])},t.InstancedMesh.prototype._setAttributes=function(){this.geometry.addAttribute("mcol0",new t.InstancedBufferAttribute(new Float32Array(3*this.numInstances),3,1)),this.geometry.addAttribute("mcol1",new t.InstancedBufferAttribute(new Float32Array(3*this.numInstances),3,1)),this.geometry.addAttribute("mcol2",new t.InstancedBufferAttribute(new Float32Array(3*this.numInstances),3,1)),this.geometry.addAttribute("mcol3",new t.InstancedBufferAttribute(new Float32Array(3*this.numInstances),3,1)),this.geometry.addAttribute("visible",new t.InstancedBufferAttribute(new Float32Array(1*this.numInstances),1,1)),this.geometry.attributes.mcol0.dynamic=this._dynamic,this.geometry.attributes.mcol1.dynamic=this._dynamic,this.geometry.attributes.mcol2.dynamic=this._dynamic,this.geometry.attributes.mcol3.dynamic=this._dynamic,this.geometry.attributes.visible.dynamic=!0},t.InstancedMesh}},{"./monkey-patch.js":3}],3:[function(e,t,n){t.exports=function(t){return/InstancedMesh/.test(t.REVISION)?t:(e("./monkey-patch/index.js")(t),t.REVISION+="_InstancedMesh",t)}},{"./monkey-patch/index.js":9}],4:[function(e,t,n){t.exports=["#ifndef INSTANCE_TRANSFORM","vec3 transformed = vec3( position );","#else","#ifndef INSTANCE_MATRIX","mat4 _instanceMatrix = getInstanceMatrix();","#define INSTANCE_MATRIX","#endif","vec3 transformed = ( _instanceMatrix * vec4( position , 1. )).xyz;","#endif","#ifdef INSTANCE_VISIBLE","vVisible = visible;","#endif"].join("\n")},{}],5:[function(e,t,n){t.exports=["#ifdef USE_COLOR","diffuseColor.rgb *= vColor;","#endif","#if defined(INSTANCE_COLOR)","diffuseColor.rgb *= vInstanceColor;","#endif","#ifdef INSTANCE_VISIBLE ","if ( vVisible < 0.0 ) {","discard;","}","#endif"].join("\n")},{}],6:[function(e,t,n){t.exports=["#ifdef USE_COLOR","varying vec3 vColor;","#endif","#if defined( INSTANCE_COLOR )","varying vec3 vInstanceColor;","#endif","#ifdef INSTANCE_VISIBLE ","varying float vVisible;","#endif"].join("\n")},{}],7:[function(e,t,n){t.exports=["#ifdef USE_COLOR","vColor.xyz = color.xyz;","#endif","#if defined( INSTANCE_COLOR ) && defined( INSTANCE_TRANSFORM )","vInstanceColor = instanceColor;","#endif"].join("\n")},{}],8:[function(e,t,n){t.exports=["#ifdef FLIP_SIDED","objectNormal = -objectNormal;","#endif","#ifndef INSTANCE_TRANSFORM","vec3 transformedNormal = normalMatrix * objectNormal;","#else","#ifndef INSTANCE_MATRIX ","mat4 _instanceMatrix = getInstanceMatrix();","#define INSTANCE_MATRIX","#endif","#ifndef INSTANCE_UNIFORM","vec3 transformedNormal =  transposeMat3( inverse( mat3( modelViewMatrix * _instanceMatrix ) ) ) * objectNormal ;","#else","vec3 transformedNormal = ( modelViewMatrix * _instanceMatrix * vec4( objectNormal , 0.0 ) ).xyz;","#endif","#endif"].join("\n")},{}],9:[function(e,t,n){t.exports=function(t){t.ShaderChunk.begin_vertex=e("./begin_vertex.glsl.js"),t.ShaderChunk.color_fragment=e("./color_fragment.glsl.js"),t.ShaderChunk.color_pars_fragment=e("./color_pars_fragment.glsl.js"),t.ShaderChunk.color_vertex=e("./color_vertex.glsl.js"),t.ShaderChunk.defaultnormal_vertex=e("./defaultnormal_vertex.glsl.js"),t.ShaderChunk.uv_pars_vertex=e("./uv_pars_vertex.glsl.js")}},{"./begin_vertex.glsl.js":4,"./color_fragment.glsl.js":5,"./color_pars_fragment.glsl.js":6,"./color_vertex.glsl.js":7,"./defaultnormal_vertex.glsl.js":8,"./uv_pars_vertex.glsl.js":10}],10:[function(e,t,n){t.exports=["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )","varying vec2 vUv;","uniform mat3 uvTransform;","#endif","#ifdef INSTANCE_TRANSFORM","mat3 inverse(mat3 m) {","float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];","float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];","float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];","float b01 = a22 * a11 - a12 * a21;","float b11 = -a22 * a10 + a12 * a20;","float b21 = a21 * a10 - a11 * a20;","float det = a00 * b01 + a01 * b11 + a02 * b21;","return mat3(b01, (-a22 * a01 + a02 * a21), ( a12 * a01 - a02 * a11),","b11, ( a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),","b21, (-a21 * a00 + a01 * a20), ( a11 * a00 - a01 * a10)) / det;","}","attribute vec3 mcol0;","attribute vec3 mcol1;","attribute vec3 mcol2;","attribute vec3 mcol3;","#ifdef INSTANCE_VISIBLE ","attribute float visible;","varying float vVisible;","#endif","#if defined( INSTANCE_COLOR )","attribute vec3 instanceColor;","varying vec3 vInstanceColor;","#endif","mat4 getInstanceMatrix(){","return mat4(","mcol0 , 0.0,","mcol1 , 0.0,","mcol2 , 0.0,","mcol3  , 1.0",");","}","#endif"].join("\n")},{}]},{},[1]),void 0===THREE.LoaderSupport&&(THREE.LoaderSupport={}),THREE.LoaderSupport.Validator={isValid:function(e){return null!==e&&void 0!==e},verifyInput:function(e,t){return null===e||void 0===e?t:e}},THREE.LoaderSupport.ConsoleLogger=function(){function e(e,t){this.enabled=e!==!1,this.debug=t===!0}return e.prototype.setDebug=function(e){this.debug=e===!0},e.prototype.isDebug=function(){return this.isEnabled()&&this.debug},e.prototype.setEnabled=function(e){this.enabled=e===!0},e.prototype.isEnabled=function(){return this.enabled},e.prototype.logDebug=function(e,t){this.enabled&&this.debug&&this._createStatement(e,"Additional content:",t,function(e){console.debug(e)})},e.prototype.logInfo=function(e,t){this.enabled&&this._createStatement(e,"Additional content:",t,function(e){console.info(e)})},e.prototype.logWarn=function(e,t){this._createStatement(e,"Additional content:",t,function(e){console.warn(e)})},e.prototype.logError=function(e,t){this._createStatement(e,"Additional content:",t,function(e){console.error(e)})},e.prototype.logTimeStart=function(e){this.enabled&&console.time(e)},e.prototype.logTimeEnd=function(e){this.enabled&&console.timeEnd(e)},e.prototype._createStatement=function(e,t,n,i){var r=e;Array.isArray(n)&&(r+="\n"+t+"\n"+n.join("\n")),i(r)},e}(),THREE.LoaderSupport.Callbacks=function(){function e(){this.onProgress=null,this.onMeshAlter=null,this.onLoad=null,this.onLoadMaterials=null}var t=THREE.LoaderSupport.Validator;return e.prototype.setCallbackOnProgress=function(e){this.onProgress=t.verifyInput(e,this.onProgress)},e.prototype.setCallbackOnMeshAlter=function(e){this.onMeshAlter=t.verifyInput(e,this.onMeshAlter)},e.prototype.setCallbackOnLoad=function(e){this.onLoad=t.verifyInput(e,this.onLoad)},e.prototype.setCallbackOnLoadMaterials=function(e){this.onLoadMaterials=t.verifyInput(e,this.onLoadMaterials)},e}(),THREE.LoaderSupport.LoadedMeshUserOverride=function(){function e(e,t){this.disregardMesh=e===!0,this.alteredMesh=t===!0,this.meshes=[]}return e.prototype.addMesh=function(e){this.meshes.push(e),this.alteredMesh=!0},e.prototype.isDisregardMesh=function(){return this.disregardMesh},e.prototype.providesAlteredMeshes=function(){return this.alteredMesh},e}(),THREE.LoaderSupport.ResourceDescriptor=function(){function e(e,n){var i=e.split("/");i.length<2?(this.path=null,this.name=e,this.url=e):(this.path=t.verifyInput(i.slice(0,i.length-1).join("/")+"/",null),this.name=t.verifyInput(i[i.length-1],null),this.url=e),this.extension=t.verifyInput(n,"default"),this.extension=this.extension.trim(),this.content=null}var t=THREE.LoaderSupport.Validator;return e.prototype.setContent=function(e){this.content=t.verifyInput(e,null)},e}(),THREE.LoaderSupport.PrepData=function(){function e(e){this.modelName=t.verifyInput(e,""),this.resources=[],this.streamMeshesTo=null,this.materialPerSmoothingGroup=!1,this.useIndices=!1,this.disregardNormals=!1,this.callbacks=new THREE.LoaderSupport.Callbacks,this.crossOrigin,this.useAsync=!1}var t=THREE.LoaderSupport.Validator;return e.prototype.setStreamMeshesTo=function(e){this.streamMeshesTo=t.verifyInput(e,null)},e.prototype.setMaterialPerSmoothingGroup=function(e){this.materialPerSmoothingGroup=e===!0},e.prototype.setUseIndices=function(e){this.useIndices=e===!0},e.prototype.setDisregardNormals=function(e){this.disregardNormals=e===!0},e.prototype.getCallbacks=function(){return this.callbacks},e.prototype.setCrossOrigin=function(e){this.crossOrigin=e},e.prototype.addResource=function(e){this.resources.push(e)},e.prototype.setUseAsync=function(e){this.useAsync=e===!0},e.prototype.clone=function(){var e=new THREE.LoaderSupport.PrepData(this.modelName);return e.resources=this.resources,e.streamMeshesTo=this.streamMeshesTo,e.materialPerSmoothingGroup=this.materialPerSmoothingGroup,e.useIndices=this.useIndices,e.disregardNormals=this.disregardNormals,e.callbacks=this.callbacks,e.crossOrigin=this.crossOrigin,e.useAsync=this.useAsync,
e},e}(),THREE.LoaderSupport.Builder=function(){function e(e){this.logger=n.verifyInput(e,new i),this.logger.logInfo("Using THREE.LoaderSupport.Builder version: "+t),this.callbacks=new THREE.LoaderSupport.Callbacks,this.materials=[],this._createDefaultMaterials()}var t="1.1.1",n=THREE.LoaderSupport.Validator,i=THREE.LoaderSupport.ConsoleLogger;return e.prototype._createDefaultMaterials=function(){var e=new THREE.MeshStandardMaterial({color:14479871});e.name="defaultMaterial";var t=new THREE.MeshStandardMaterial({color:14479871});t.name="defaultVertexColorMaterial",t.vertexColors=THREE.VertexColors;var n=new THREE.LineBasicMaterial;n.name="defaultLineMaterial";var i=new THREE.PointsMaterial({size:1,sizeAttenuation:!1});i.name="defaultPointMaterial";var r={};r[e.name]=e,r[t.name]=t,r[n.name]=n,r[i.name]=i,this.updateMaterials({cmd:"materialData",materials:{materialCloneInstructions:null,serializedMaterials:null,runtimeMaterials:r}})},e.prototype.setMaterials=function(e){var t={cmd:"materialData",materials:{materialCloneInstructions:null,serializedMaterials:null,runtimeMaterials:n.isValid(this.callbacks.onLoadMaterials)?this.callbacks.onLoadMaterials(e):e}};this.updateMaterials(t)},e.prototype._setCallbacks=function(e){n.isValid(e.onProgress)&&this.callbacks.setCallbackOnProgress(e.onProgress),n.isValid(e.onMeshAlter)&&this.callbacks.setCallbackOnMeshAlter(e.onMeshAlter),n.isValid(e.onLoad)&&this.callbacks.setCallbackOnLoad(e.onLoad),n.isValid(e.onLoadMaterials)&&this.callbacks.setCallbackOnLoadMaterials(e.onLoadMaterials)},e.prototype.processPayload=function(e){return"meshData"===e.cmd?this.buildMeshes(e):"materialData"===e.cmd?(this.updateMaterials(e),null):void 0},e.prototype.buildMeshes=function(e){var t=e.params.meshName,i=new THREE.BufferGeometry;i.addAttribute("position",new THREE.BufferAttribute(new Float32Array(e.buffers.vertices),3)),n.isValid(e.buffers.indices)&&i.setIndex(new THREE.BufferAttribute(new Uint32Array(e.buffers.indices),1));var r=n.isValid(e.buffers.colors);r&&i.addAttribute("color",new THREE.BufferAttribute(new Float32Array(e.buffers.colors),3)),n.isValid(e.buffers.normals)?i.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(e.buffers.normals),3)):i.computeVertexNormals(),n.isValid(e.buffers.uvs)&&i.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(e.buffers.uvs),2));var a,o,s,l=e.materials.materialNames,u=e.materials.multiMaterial,c=[];for(s in l)o=l[s],a=this.materials[o],u&&c.push(a);if(u){a=c;var h,f=e.materials.materialGroups;for(s in f)h=f[s],i.addGroup(h.start,h.count,h.index)}var d,p,g=[],m=this.callbacks.onMeshAlter,v=!0,_=n.verifyInput(e.geometryType,0);if(n.isValid(m)&&(p=m({detail:{meshName:t,bufferGeometry:i,material:a,geometryType:_}}),n.isValid(p))){if(!p.isDisregardMesh()&&p.providesAlteredMeshes())for(var y in p.meshes)g.push(p.meshes[y]);v=!1}v&&(e.computeBoundingSphere&&i.computeBoundingSphere(),d=0===_?new THREE.Mesh(i,a):1===_?new THREE.LineSegments(i,a):new THREE.Points(i,a),d.name=t,g.push(d));var b;if(n.isValid(g)&&g.length>0){var w=[];for(var y in g)d=g[y],w[y]=d.name;b="Adding mesh(es) ("+w.length+": "+w+") from input mesh: "+t,b+=" ("+(100*e.progress.numericalValue).toFixed(2)+"%)"}else b="Not adding mesh: "+t,b+=" ("+(100*e.progress.numericalValue).toFixed(2)+"%)";var x=this.callbacks.onProgress;if(n.isValid(x)){var E=new CustomEvent("BuilderEvent",{detail:{type:"progress",modelName:e.params.meshName,text:b,numericalValue:e.progress.numericalValue}});x(E)}return g},e.prototype.updateMaterials=function(e){var t,i,r=e.materials.materialCloneInstructions;if(n.isValid(r)){var a=r.materialNameOrg,o=this.materials[a];if(n.isValid(a)){t=o.clone(),i=r.materialName,t.name=i;var s=r.materialProperties;for(var l in s)t.hasOwnProperty(l)&&s.hasOwnProperty(l)&&(t[l]=s[l]);this.materials[i]=t}else this.logger.logWarn('Requested material "'+a+'" is not available!')}var u=e.materials.serializedMaterials;if(n.isValid(u)&&Object.keys(u).length>0){var c,h=new THREE.MaterialLoader;for(i in u)c=u[i],n.isValid(c)&&(t=h.parse(c),this.logger.logInfo('De-serialized material with name "'+i+'" will be added.'),this.materials[i]=t)}if(u=e.materials.runtimeMaterials,n.isValid(u)&&Object.keys(u).length>0)for(i in u)t=u[i],this.logger.logInfo('Material with name "'+i+'" will be added.'),this.materials[i]=t},e.prototype.getMaterialsJSON=function(){var e,t={};for(var n in this.materials)e=this.materials[n],t[n]=e.toJSON();return t},e.prototype.getMaterials=function(){return this.materials},e}(),THREE.LoaderSupport.LoaderBase=function(){function e(e,i){this.manager=t.verifyInput(e,THREE.DefaultLoadingManager),this.logger=t.verifyInput(i,new n),this.fileLoader=new THREE.FileLoader(this.manager),this.fileLoader.setResponseType("arraybuffer"),this.modelName="",this.instanceNo=0,this.path="",this.useIndices=!1,this.disregardNormals=!1,this.loaderRootNode=new THREE.Group,this.builder=new THREE.LoaderSupport.Builder(this.logger),this.callbacks=new THREE.LoaderSupport.Callbacks}var t=THREE.LoaderSupport.Validator,n=THREE.LoaderSupport.ConsoleLogger;return e.prototype._applyPrepData=function(e){t.isValid(e)&&(this.setModelName(e.modelName),this.setStreamMeshesTo(e.streamMeshesTo),this.builder.setMaterials(e.materials),this.setUseIndices(e.useIndices),this.setDisregardNormals(e.disregardNormals),this._setCallbacks(e.getCallbacks()))},e.prototype._setCallbacks=function(e){t.isValid(e.onProgress)&&this.callbacks.setCallbackOnProgress(e.onProgress),t.isValid(e.onMeshAlter)&&this.callbacks.setCallbackOnMeshAlter(e.onMeshAlter),t.isValid(e.onLoad)&&this.callbacks.setCallbackOnLoad(e.onLoad),t.isValid(e.onLoadMaterials)&&this.callbacks.setCallbackOnLoadMaterials(e.onLoadMaterials),this.builder._setCallbacks(this.callbacks)},e.prototype.getLogger=function(){return this.logger},e.prototype.setModelName=function(e){this.modelName=t.verifyInput(e,this.modelName)},e.prototype.setPath=function(e){this.path=t.verifyInput(e,this.path)},e.prototype.setStreamMeshesTo=function(e){this.loaderRootNode=t.verifyInput(e,this.loaderRootNode)},e.prototype.setMaterials=function(e){this.builder.setMaterials(e)},e.prototype.setUseIndices=function(e){this.useIndices=e===!0},e.prototype.setDisregardNormals=function(e){this.disregardNormals=e===!0},e.prototype.onProgress=function(e,n,i){var r=t.isValid(n)?n:"",a={detail:{type:e,modelName:this.modelName,instanceNo:this.instanceNo,text:r,numericalValue:i}};t.isValid(this.callbacks.onProgress)&&this.callbacks.onProgress(a),this.logger.logDebug(r)},e.prototype.load=function(e,n,i,r,a,o){var s=this;if(!t.isValid(i)){var l=0,u=0;i=function(t){if(t.lengthComputable&&(u=t.loaded/t.total,u>l)){l=u;var n='Download of "'+e+'": '+(100*u).toFixed(2)+"%";s.onProgress("progressLoad",n,u)}}}t.isValid(r)||(r=function(t){var n='Error occurred while downloading "'+e+'"';s.logger.logError(n+": "+t),s.onProgress("error",n,-1)}),this.fileLoader.setPath(this.path),this.fileLoader.load(e,function(e){if(o)s.parseAsync(e,n);else{var t=new THREE.LoaderSupport.Callbacks;t.setCallbackOnMeshAlter(a),s._setCallbacks(t),n({detail:{loaderRootNode:s.parse(e),modelName:s.modelName,instanceNo:s.instanceNo}})}},i,r)},e.prototype.checkResourceDescriptorFiles=function(e,n){var i,r,a,o,s={};for(var l in e)if(i=e[l],o=!1,t.isValid(i.name))if(t.isValid(i.content)){for(a=0;a<n.length&&!o;a++)if(r=n[a],i.extension.toLowerCase()===r.ext.toLowerCase())if(r.ignore)o=!0;else if("Uint8Array"===r.type){if(!(i.content instanceof Uint8Array))throw"Provided content is not of type arraybuffer! Aborting...";s[r.ext]=i,o=!0}else if("String"===r.type){if(!("string"==typeof i.content||i.content instanceof String))throw"Provided  content is not of type String! Aborting...";s[r.ext]=i,o=!0}if(!o)throw'Unidentified resource "'+i.name+'": '+i.url}else{if(!("string"==typeof i.name||i.name instanceof String))throw"Provided file is not properly defined! Aborting...";for(a=0;a<n.length&&!o;a++)r=n[a],i.extension.toLowerCase()===r.ext.toLowerCase()&&(r.ignore||(s[r.ext]=i),o=!0);if(!o)throw'Unidentified resource "'+i.name+'": '+i.url}return s},e}(),THREE.LoaderSupport.WorkerRunnerRefImpl=function(){function e(){var e=this,t=function(t){e.processMessage(t.data)};self.addEventListener("message",t,!1)}return e.prototype.applyProperties=function(e,t){var n,i,r;for(n in t)i="set"+n.substring(0,1).toLocaleUpperCase()+n.substring(1),r=t[n],"function"==typeof e[i]?e[i](r):e.hasOwnProperty(n)&&(e[n]=r)},e.prototype.processMessage=function(e){var t=e.logger.enabled,n=e.logger.enabled;if("run"===e.cmd){var i={callbackBuilder:function(e){self.postMessage(e)},callbackProgress:function(e){t&&n&&console.debug("WorkerRunner: progress: "+e)}},r=new Parser;"function"==typeof r.setLogConfig&&r.setLogConfig(t,n),this.applyProperties(r,e.params),this.applyProperties(r,e.materials),this.applyProperties(r,i),r.workerScope=self,r.parse(e.data.input,e.data.options),t&&console.log("WorkerRunner: Run complete!"),i.callbackBuilder({cmd:"complete",msg:"WorkerRunner completed run."})}else console.error("WorkerRunner: Received unknown command: "+e.cmd)},e}(),THREE.LoaderSupport.WorkerSupport=function(){function e(e){if(this.logger=n.verifyInput(e,new THREE.LoaderSupport.ConsoleLogger),this.logger.logInfo("Using THREE.LoaderSupport.WorkerSupport version: "+t),void 0===window.Worker)throw"This browser does not support web workers!";if(void 0===window.Blob)throw"This browser does not support Blob!";if("function"!=typeof window.URL.createObjectURL)throw"This browser does not support Object creation from URL!";this.loaderWorker=new i(this.logger)}var t="2.1.2",n=THREE.LoaderSupport.Validator,i=function(){function e(e){this.logger=n.verifyInput(e,new THREE.LoaderSupport.ConsoleLogger),this._reset()}return e.prototype._reset=function(){this.worker=null,this.runnerImplName=null,this.callbacks={builder:null,onLoad:null},this.terminateRequested=!1,this.queuedMessage=null,this.started=!1},e.prototype.initWorker=function(e,t){this.runnerImplName=t;var n=new Blob([e],{type:"application/javascript"});this.worker=new Worker(window.URL.createObjectURL(n)),this.worker.onmessage=this._receiveWorkerMessage,this.worker.runtimeRef=this,this._postMessage()},e.prototype._receiveWorkerMessage=function(e){var t=e.data;switch(t.cmd){case"meshData":case"materialData":case"imageData":this.runtimeRef.callbacks.builder(t);break;case"complete":this.runtimeRef.queuedMessage=null,this.started=!1,this.runtimeRef.callbacks.onLoad(t.msg),this.runtimeRef.terminateRequested&&(this.runtimeRef.logger.logInfo("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Run is complete. Terminating application on request!"),this.runtimeRef._terminate());break;case"error":this.runtimeRef.logger.logError("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Reported error: "+t.msg),this.runtimeRef.queuedMessage=null,this.started=!1,this.runtimeRef.callbacks.onLoad(t.msg),this.runtimeRef.terminateRequested&&(this.runtimeRef.logger.logInfo("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Run reported error. Terminating application on request!"),this.runtimeRef._terminate());break;default:this.runtimeRef.logger.logError("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Received unknown command: "+t.cmd)}},e.prototype.setCallbacks=function(e,t){this.callbacks.builder=n.verifyInput(e,this.callbacks.builder),this.callbacks.onLoad=n.verifyInput(t,this.callbacks.onLoad)},e.prototype.run=function(e){if(n.isValid(this.queuedMessage))return void console.warn("Already processing message. Rejecting new run instruction");if(this.queuedMessage=e,this.started=!0,!n.isValid(this.callbacks.builder))throw'Unable to run as no "builder" callback is set.';if(!n.isValid(this.callbacks.onLoad))throw'Unable to run as no "onLoad" callback is set.';"run"!==e.cmd&&(e.cmd="run"),n.isValid(e.logger)?(e.logger.enabled=n.verifyInput(e.logger.enabled,!0),e.logger.debug=n.verifyInput(e.logger.debug,!1)):e.logger={enabled:!0,debug:!1},this._postMessage()},e.prototype._postMessage=function(){n.isValid(this.queuedMessage)&&n.isValid(this.worker)&&(this.queuedMessage.data.input instanceof ArrayBuffer?this.worker.postMessage(this.queuedMessage,[this.queuedMessage.data.input]):this.worker.postMessage(this.queuedMessage))},e.prototype.setTerminateRequested=function(e){this.terminateRequested=e===!0,this.terminateRequested&&n.isValid(this.worker)&&!n.isValid(this.queuedMessage)&&this.started&&(this.logger.logInfo("Worker is terminated immediately as it is not running!"),this._terminate())},e.prototype._terminate=function(){this.worker.terminate(),this._reset()},e}();e.prototype.validate=function(e,t,i,o,s){if(!n.isValid(this.loaderWorker.worker)){this.logger.logInfo("WorkerSupport: Building worker code..."),this.logger.logTimeStart("buildWebWorkerCode"),n.isValid(s)?this.logger.logInfo('WorkerSupport: Using "'+s.name+'" as Runner class for worker.'):(s=THREE.LoaderSupport.WorkerRunnerRefImpl,this.logger.logInfo('WorkerSupport: Using DEFAULT "THREE.LoaderSupport.WorkerRunnerRefImpl" as Runner class for worker.'));var l=e(r,a);l+="var Parser = "+t+";\n\n",l+=a(s.name,s),l+="new "+s.name+"();\n\n";var u=this;if(n.isValid(i)&&i.length>0){var c="",h=function(e,t){if(0===t.length)u.loaderWorker.initWorker(c+l,s.name),u.logger.logTimeEnd("buildWebWorkerCode");else{var n=function(n){c+=n,h(e,t)},i=new THREE.FileLoader;i.setPath(e),i.setResponseType("text"),i.load(t[0],n),t.shift()}};h(o,i)}else this.loaderWorker.initWorker(l,s.name),this.logger.logTimeEnd("buildWebWorkerCode")}},e.prototype.setCallbacks=function(e,t){this.loaderWorker.setCallbacks(e,t)},e.prototype.run=function(e){this.loaderWorker.run(e)},e.prototype.setTerminateRequested=function(e){this.loaderWorker.setTerminateRequested(e)};var r=function(e,t){var n,i=e+" = {\n";for(var r in t)n=t[r],"string"==typeof n||n instanceof String?(n=n.replace("\n","\\n"),n=n.replace("\r","\\r"),i+="\t"+r+': "'+n+'",\n'):n instanceof Array?i+="\t"+r+": ["+n+"],\n":Number.isInteger(n)?i+="\t"+r+": "+n+",\n":"function"==typeof n&&(i+="\t"+r+": "+n+",\n");return i+="}\n\n"},a=function(e,t,i){var r,a,o,s="",l=n.isValid(i)?i:t.name;for(var u in t.prototype)a=t.prototype[u],"constructor"===u?(r=a.toString(),r=r.replace("function",""),o="\tfunction "+l+r+";\n\n"):"function"==typeof a&&(r=a.toString(),s+="\t"+l+".prototype."+u+" = "+r+";\n\n");return s+="\treturn "+l+";\n",s+="})();\n\n",n.isValid(o)?s=e+" = (function () {\n\n"+o+s:(o=e+" = (function () {\n\n",o+="\t"+t.prototype.constructor.toString()+"\n\n",s=o+s),s};return e}(),THREE.LoaderSupport.WorkerDirector=function(){function e(e,a){if(this.logger=n.verifyInput(a,new THREE.LoaderSupport.ConsoleLogger),this.logger.logInfo("Using THREE.LoaderSupport.WorkerDirector version: "+t),this.maxQueueSize=r,this.maxWebWorkers=i,this.crossOrigin=null,!n.isValid(e))throw"Provided invalid classDef: "+e;this.workerDescription={classDef:e,globalCallbacks:{},workerSupports:{}},this.objectsCompleted=0,this.instructionQueue=[],this.instructionQueuePointer=0,this.callbackOnFinishedProcessing=null}var t="2.1.0",n=THREE.LoaderSupport.Validator,i=16,r=8192;return e.prototype.getMaxQueueSize=function(){return this.maxQueueSize},e.prototype.getMaxWebWorkers=function(){return this.maxWebWorkers},e.prototype.setCrossOrigin=function(e){this.crossOrigin=e},e.prototype.prepareWorkers=function(e,t,a){n.isValid(e)&&(this.workerDescription.globalCallbacks=e),this.maxQueueSize=Math.min(t,r),this.maxWebWorkers=Math.min(a,i),this.maxWebWorkers=Math.min(this.maxWebWorkers,this.maxQueueSize),this.objectsCompleted=0,this.instructionQueue=[],this.instructionQueuePointer=0;for(var o=0;o<this.maxWebWorkers;o++)this.workerDescription.workerSupports[o]={instanceNo:o,inUse:!1,terminateRequested:!1,workerSupport:new THREE.LoaderSupport.WorkerSupport(this.logger),loader:null}},e.prototype.enqueueForRun=function(e){this.instructionQueue.length<this.maxQueueSize&&this.instructionQueue.push(e)},e.prototype.isRunning=function(){var e=Object.keys(this.workerDescription.workerSupports);return this.instructionQueue.length>0&&this.instructionQueuePointer<this.instructionQueue.length||e.length>0},e.prototype.processQueue=function(){var e,t;for(var n in this.workerDescription.workerSupports)t=this.workerDescription.workerSupports[n],t.inUse||(this.instructionQueuePointer<this.instructionQueue.length?(e=this.instructionQueue[this.instructionQueuePointer],this._kickWorkerRun(e,t),this.instructionQueuePointer++):this._deregister(t));this.isRunning()||null===this.callbackOnFinishedProcessing||(this.callbackOnFinishedProcessing(),this.callbackOnFinishedProcessing=null)},e.prototype._kickWorkerRun=function(e,t){t.inUse=!0,t.workerSupport.setTerminateRequested(t.terminateRequested),this.logger.logInfo("\nAssigning next item from queue to worker (queue length: "+this.instructionQueue.length+")\n\n");var i=this,r=e.getCallbacks(),a=this.workerDescription.globalCallbacks,o=function(e){n.isValid(a.onLoad)&&a.onLoad(e),n.isValid(r.onLoad)&&r.onLoad(e),i.objectsCompleted++,t.inUse=!1,i.processQueue()},s=function(e){n.isValid(a.onProgress)&&a.onProgress(e),n.isValid(r.onProgress)&&r.onProgress(e)},l=function(e){n.isValid(a.onMeshAlter)&&a.onMeshAlter(e),n.isValid(r.onMeshAlter)&&r.onMeshAlter(e)};t.loader=this._buildLoader(t.instanceNo);var u=new THREE.LoaderSupport.Callbacks;u.setCallbackOnLoad(o),u.setCallbackOnProgress(s),u.setCallbackOnMeshAlter(l),e.callbacks=u,t.loader.run(e,t.workerSupport)},e.prototype._buildLoader=function(e){var t=this.workerDescription.classDef,i=Object.create(t.prototype);if(this.workerDescription.classDef.call(i,THREE.DefaultLoadingManager,this.logger),!i.hasOwnProperty("instanceNo"))throw t.name+' has no property "instanceNo".';if(i.instanceNo=e,!i.hasOwnProperty("workerSupport"))throw t.name+' has no property "workerSupport".';if("function"!=typeof i.run)throw t.name+' has no function "run".';return i.hasOwnProperty("callbacks")&&n.isValid(i.callbacks)||(this.logger.logWarn(t.name+' has an invalid property "callbacks". Will change to "THREE.LoaderSupport.Callbacks"'),i.callbacks=new THREE.LoaderSupport.Callbacks),i},e.prototype._deregister=function(e){if(n.isValid(e)){e.workerSupport.setTerminateRequested(!0),this.logger.logInfo("Requested termination of worker #"+e.instanceNo+".");var t=e.loader.callbacks;n.isValid(t.onProgress)&&t.onProgress({detail:{text:""}}),delete this.workerDescription.workerSupports[e.instanceNo]}},e.prototype.tearDown=function(e){this.logger.logInfo("WorkerDirector received the deregister call. Terminating all workers!"),this.instructionQueuePointer=this.instructionQueue.length,this.callbackOnFinishedProcessing=n.verifyInput(e,null);for(var t in this.workerDescription.workerSupports)this.workerDescription.workerSupports[t].terminateRequested=!0},e}();var CTM=CTM||{};CTM.CompressionMethod={RAW:5718354,MG1:3229517,MG2:3295053},CTM.Flags={NORMALS:1},CTM.File=function(e){this.load(e)},CTM.File.prototype.load=function(e){this.header=new CTM.FileHeader(e),this.body=new CTM.FileBody(this.header),this.getReader().read(e,this.body)},CTM.File.prototype.getReader=function(){var e;switch(this.header.compressionMethod){case CTM.CompressionMethod.RAW:e=new CTM.ReaderRAW;break;case CTM.CompressionMethod.MG1:e=new CTM.ReaderMG1;break;case CTM.CompressionMethod.MG2:e=new CTM.ReaderMG2}return e},CTM.FileHeader=function(e){e.readInt32(),this.fileFormat=e.readInt32(),this.compressionMethod=e.readInt32(),this.vertexCount=e.readInt32(),this.triangleCount=e.readInt32(),this.uvMapCount=e.readInt32(),this.attrMapCount=e.readInt32(),this.flags=e.readInt32(),this.comment=e.readString()},CTM.FileHeader.prototype.hasNormals=function(){return this.flags&CTM.Flags.NORMALS},CTM.FileBody=function(e){var t=3*e.triangleCount,n=3*e.vertexCount,i=e.hasNormals()?3*e.vertexCount:0,r=2*e.vertexCount,a=4*e.vertexCount,o=0;if(this.data=new ArrayBuffer(4*(t+n+i+r*e.uvMapCount+a*e.attrMapCount)),this.indices=new Uint32Array(this.data,0,t),this.vertices=new Float32Array(this.data,4*t,n),e.hasNormals()&&(this.normals=new Float32Array(this.data,4*(t+n),i)),e.uvMapCount)for(this.uvMaps=[],o=0;o<e.uvMapCount;++o)this.uvMaps[o]={uv:new Float32Array(this.data,4*(t+n+i+o*r),r)};if(e.attrMapCount)for(this.attrMaps=[],o=0;o<e.attrMapCount;++o)this.attrMaps[o]={attr:new Float32Array(this.data,4*(t+n+i+r*e.uvMapCount+o*a),a)}},CTM.FileBody.prototype.flush=function(){this.indices=null,this.vertices=null,this.uvMaps=null,this.data=null},CTM.FileMG2Header=function(e){e.readInt32(),this.vertexPrecision=e.readFloat32(),this.normalPrecision=e.readFloat32(),this.lowerBoundx=e.readFloat32(),this.lowerBoundy=e.readFloat32(),this.lowerBoundz=e.readFloat32(),this.higherBoundx=e.readFloat32(),this.higherBoundy=e.readFloat32(),this.higherBoundz=e.readFloat32(),this.divx=e.readInt32(),this.divy=e.readInt32(),this.divz=e.readInt32(),this.sizex=(this.higherBoundx-this.lowerBoundx)/this.divx,this.sizey=(this.higherBoundy-this.lowerBoundy)/this.divy,this.sizez=(this.higherBoundz-this.lowerBoundz)/this.divz},CTM.ReaderRAW=function(){},CTM.ReaderRAW.prototype.read=function(e,t){this.readIndices(e,t.indices),this.readVertices(e,t.vertices),t.normals&&this.readNormals(e,t.normals),t.uvMaps&&this.readUVMaps(e,t.uvMaps),t.attrMaps&&this.readAttrMaps(e,t.attrMaps)},CTM.ReaderRAW.prototype.readIndices=function(e,t){e.readInt32(),e.readArrayInt32(t)},CTM.ReaderRAW.prototype.readVertices=function(e,t){e.readInt32(),e.readArrayFloat32(t)},CTM.ReaderRAW.prototype.readNormals=function(e,t){e.readInt32(),e.readArrayFloat32(t)},CTM.ReaderRAW.prototype.readUVMaps=function(e,t){for(var n=0;n<t.length;++n)e.readInt32(),t[n].name=e.readString(),t[n].filename=e.readString(),e.readArrayFloat32(t[n].uv)},CTM.ReaderRAW.prototype.readAttrMaps=function(e,t){for(var n=0;n<t.length;++n)e.readInt32(),t[n].name=e.readString(),e.readArrayFloat32(t[n].attr)},CTM.ReaderMG1=function(){},CTM.ReaderMG1.prototype.read=function(e,t){this.readIndices(e,t.indices),this.readVertices(e,t.vertices),t.normals&&this.readNormals(e,t.normals),t.uvMaps&&this.readUVMaps(e,t.uvMaps),t.attrMaps&&this.readAttrMaps(e,t.attrMaps)},CTM.ReaderMG1.prototype.readIndices=function(e,t){e.readInt32();var n=e.readInt32(),i=new CTM.InterleavedStream(t,3);CTM.decompress(e,n,i),CTM.restoreIndices(t,t.length)},CTM.ReaderMG1.prototype.readVertices=function(e,t){e.readInt32();var n=e.readInt32(),i=new CTM.InterleavedStream(t,1);CTM.decompress(e,n,i)},CTM.ReaderMG1.prototype.readNormals=function(e,t){e.readInt32();var n=e.readInt32(),i=new CTM.InterleavedStream(t,3);CTM.decompress(e,n,i)},CTM.ReaderMG1.prototype.readUVMaps=function(e,t){for(var n=0;n<t.length;++n){e.readInt32(),t[n].name=e.readString(),t[n].filename=e.readString();var i=e.readInt32(),r=new CTM.InterleavedStream(t[n].uv,2);CTM.decompress(e,i,r)}},CTM.ReaderMG1.prototype.readAttrMaps=function(e,t){for(var n=0;n<t.length;++n){e.readInt32(),t[n].name=e.readString();var i=e.readInt32(),r=new CTM.InterleavedStream(t[n].attr,4);CTM.decompress(e,i,r)}},CTM.ReaderMG2=function(){},CTM.ReaderMG2.prototype.read=function(e,t){this.MG2Header=new CTM.FileMG2Header(e),this.readVertices(e,t.vertices),this.readIndices(e,t.indices),t.normals&&this.readNormals(e,t),t.uvMaps&&this.readUVMaps(e,t.uvMaps),t.attrMaps&&this.readAttrMaps(e,t.attrMaps)},CTM.ReaderMG2.prototype.readVertices=function(e,t){e.readInt32();var n=e.readInt32(),i=new CTM.InterleavedStream(t,3);CTM.decompress(e,n,i);var r=this.readGridIndices(e,t);CTM.restoreVertices(t,this.MG2Header,r,this.MG2Header.vertexPrecision)},CTM.ReaderMG2.prototype.readGridIndices=function(e,t){e.readInt32();var n=e.readInt32(),i=new Uint32Array(t.length/3),r=new CTM.InterleavedStream(i,1);return CTM.decompress(e,n,r),CTM.restoreGridIndices(i,i.length),i},CTM.ReaderMG2.prototype.readIndices=function(e,t){e.readInt32();var n=e.readInt32(),i=new CTM.InterleavedStream(t,3);CTM.decompress(e,n,i),CTM.restoreIndices(t,t.length)},CTM.ReaderMG2.prototype.readNormals=function(e,t){e.readInt32();var n=e.readInt32(),i=new CTM.InterleavedStream(t.normals,3);CTM.decompress(e,n,i);var r=CTM.calcSmoothNormals(t.indices,t.vertices);CTM.restoreNormals(t.normals,r,this.MG2Header.normalPrecision)},CTM.ReaderMG2.prototype.readUVMaps=function(e,t){for(var n=0;n<t.length;++n){e.readInt32(),t[n].name=e.readString(),t[n].filename=e.readString();var i=e.readFloat32(),r=e.readInt32(),a=new CTM.InterleavedStream(t[n].uv,2);CTM.decompress(e,r,a),CTM.restoreMap(t[n].uv,2,i)}},CTM.ReaderMG2.prototype.readAttrMaps=function(e,t){for(var n=0;n<t.length;++n){e.readInt32(),t[n].name=e.readString();var i=e.readFloat32(),r=e.readInt32(),a=new CTM.InterleavedStream(t[n].attr,4);CTM.decompress(e,r,a),CTM.restoreMap(t[n].attr,4,i)}},CTM.decompress=function(e,t,n){var i=e.offset;LZMA.decompress(e,e,n,n.data.length),e.offset=i+5+t},CTM.restoreIndices=function(e,t){var n=3;for(t>0&&(e[2]+=e[0],e[1]+=e[0]);n<t;n+=3)e[n]+=e[n-3],e[n]===e[n-3]?e[n+1]+=e[n-2]:e[n+1]+=e[n],e[n+2]+=e[n]},CTM.restoreGridIndices=function(e,t){for(var n=1;n<t;++n)e[n]+=e[n-1]},CTM.restoreVertices=function(e,t,n,i){for(var r,a,o,s,l,u=new Uint32Array(e.buffer,e.byteOffset,e.length),c=t.divx,h=c*t.divy,f=2147483647,d=0,p=0,g=0,m=n.length;p<m;g+=3)o=r=n[p++],l=~~(o/h),o-=~~(l*h),s=~~(o/c),o-=~~(s*c),a=u[g],r===f&&(a+=d),e[g]=t.lowerBoundx+o*t.sizex+i*a,e[g+1]=t.lowerBoundy+s*t.sizey+i*u[g+1],e[g+2]=t.lowerBoundz+l*t.sizez+i*u[g+2],f=r,d=a},CTM.restoreNormals=function(e,t,n){for(var i,r,a,o,s,l,u,c,h,f,d=new Uint32Array(e.buffer,e.byteOffset,e.length),p=0,g=e.length,m=1.5707963267948966;p<g;p+=3)i=d[p]*n,r=d[p+1],0===r?(e[p]=t[p]*i,e[p+1]=t[p+1]*i,e[p+2]=t[p+2]*i):(a=r<=4?(d[p+2]-2)*m:(4*d[p+2]/r-2)*m,r*=n*m,o=i*Math.sin(r),s=o*Math.cos(a),l=o*Math.sin(a),u=i*Math.cos(r),h=t[p+1],c=t[p]-t[p+2],f=Math.sqrt(2*h*h+c*c),f>1e-20&&(c/=f,h/=f),e[p]=t[p]*u+(t[p+1]*h-t[p+2]*c)*l-h*s,e[p+1]=t[p+1]*u-(t[p+2]+t[p])*h*l+c*s,e[p+2]=t[p+2]*u+(t[p]*c+t[p+1]*h)*l+h*s)},CTM.restoreMap=function(e,t,n){for(var i,r,a,o=new Uint32Array(e.buffer,e.byteOffset,e.length),s=0,l=e.length;s<t;++s)for(i=0,a=s;a<l;a+=t)r=o[a],i+=1&r?-(r+1>>1):r>>1,e[a]=i*n},CTM.calcSmoothNormals=function(e,t){var n,i,r,a,o,s,l,u,c,h,f,d,p,g,m,v=new Float32Array(t.length);for(g=0,m=e.length;g<m;)n=3*e[g++],i=3*e[g++],r=3*e[g++],l=t[i]-t[n],h=t[r]-t[n],u=t[i+1]-t[n+1],f=t[r+1]-t[n+1],c=t[i+2]-t[n+2],d=t[r+2]-t[n+2],a=u*d-c*f,o=c*h-l*d,s=l*f-u*h,p=Math.sqrt(a*a+o*o+s*s),p>1e-10&&(a/=p,o/=p,s/=p),v[n]+=a,v[n+1]+=o,v[n+2]+=s,v[i]+=a,v[i+1]+=o,v[i+2]+=s,v[r]+=a,v[r+1]+=o,v[r+2]+=s;for(g=0,m=v.length;g<m;g+=3)p=Math.sqrt(v[g]*v[g]+v[g+1]*v[g+1]+v[g+2]*v[g+2]),p>1e-10&&(v[g]/=p,v[g+1]/=p,v[g+2]/=p);return v},CTM.isLittleEndian=function(){var e=new ArrayBuffer(2),t=new Uint8Array(e),n=new Uint16Array(e);return t[0]=1,1===n[0]}(),CTM.InterleavedStream=function(e,t){this.data=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),this.offset=CTM.isLittleEndian?3:0,this.count=4*t,this.len=this.data.length},CTM.InterleavedStream.prototype.writeByte=function(e){this.data[this.offset]=e,this.offset+=this.count,this.offset>=this.len&&(this.offset-=this.len-4,this.offset>=this.count&&(this.offset-=this.count+(CTM.isLittleEndian?1:-1)))},CTM.Stream=function(e){this.data=e,this.offset=0},CTM.Stream.prototype.TWO_POW_MINUS23=Math.pow(2,-23),CTM.Stream.prototype.TWO_POW_MINUS126=Math.pow(2,-126),CTM.Stream.prototype.readByte=function(){return"string"==typeof this.data?255&this.data.charCodeAt(this.offset++):255&this.data[this.offset++]},CTM.Stream.prototype.readInt32=function(){var e=this.readByte();return e|=this.readByte()<<8,e|=this.readByte()<<16,e|this.readByte()<<24},CTM.Stream.prototype.readFloat32=function(){var e=this.readByte();e+=this.readByte()<<8;var t=this.readByte(),n=this.readByte();e+=(127&t)<<16;var i=(127&n)<<1|(128&t)>>>7,r=128&n?-1:1;return 255===i?0!==e?NaN:r*(1/0):i>0?r*(1+e*this.TWO_POW_MINUS23)*Math.pow(2,i-127):0!==e?r*e*this.TWO_POW_MINUS126:0*r},CTM.Stream.prototype.readString=function(){var e=this.readInt32();return this.offset+=e,this.data.substr(this.offset-e,e)},CTM.Stream.prototype.readArrayInt32=function(e){for(var t=0,n=e.length;t<n;)e[t++]=this.readInt32();return e},CTM.Stream.prototype.readArrayFloat32=function(e){for(var t=0,n=e.length;t<n;)e[t++]=this.readFloat32();return e};var LZMA=LZMA||{};LZMA.OutWindow=function(){this._windowSize=0},LZMA.OutWindow.prototype.create=function(e){this._buffer&&this._windowSize===e||(this._buffer=[]),this._windowSize=e,this._pos=0,this._streamPos=0},LZMA.OutWindow.prototype.flush=function(){var e=this._pos-this._streamPos;if(0!==e){for(;e--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},LZMA.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},LZMA.OutWindow.prototype.setStream=function(e){this.releaseStream(),this._stream=e},LZMA.OutWindow.prototype.init=function(e){e||(this._streamPos=0,this._pos=0)},LZMA.OutWindow.prototype.copyBlock=function(e,t){var n=this._pos-e-1;for(n<0&&(n+=this._windowSize);t--;)n>=this._windowSize&&(n=0),this._buffer[this._pos++]=this._buffer[n++],this._pos>=this._windowSize&&this.flush()},LZMA.OutWindow.prototype.putByte=function(e){this._buffer[this._pos++]=e,this._pos>=this._windowSize&&this.flush()},LZMA.OutWindow.prototype.getByte=function(e){var t=this._pos-e-1;return t<0&&(t+=this._windowSize),this._buffer[t]},LZMA.RangeDecoder=function(){},LZMA.RangeDecoder.prototype.setStream=function(e){this._stream=e},LZMA.RangeDecoder.prototype.releaseStream=function(){this._stream=null},LZMA.RangeDecoder.prototype.init=function(){var e=5;for(this._code=0,this._range=-1;e--;)this._code=this._code<<8|this._stream.readByte()},LZMA.RangeDecoder.prototype.decodeDirectBits=function(e){for(var t,n=0,i=e;i--;)this._range>>>=1,t=this._code-this._range>>>31,this._code-=this._range&t-1,n=n<<1|1-t,0===(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return n},LZMA.RangeDecoder.prototype.decodeBit=function(e,t){var n=e[t],i=(this._range>>>11)*n;return(2147483648^this._code)<(2147483648^i)?(this._range=i,e[t]+=2048-n>>>5,0===(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=i,this._code-=i,e[t]-=n>>>5,0===(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},LZMA.initBitModels=function(e,t){for(;t--;)e[t]=1024},LZMA.BitTreeDecoder=function(e){this._models=[],this._numBitLevels=e},LZMA.BitTreeDecoder.prototype.init=function(){LZMA.initBitModels(this._models,1<<this._numBitLevels)},LZMA.BitTreeDecoder.prototype.decode=function(e){for(var t=1,n=this._numBitLevels;n--;)t=t<<1|e.decodeBit(this._models,t);return t-(1<<this._numBitLevels)},LZMA.BitTreeDecoder.prototype.reverseDecode=function(e){for(var t,n=1,i=0,r=0;r<this._numBitLevels;++r)t=e.decodeBit(this._models,n),n=n<<1|t,i|=t<<r;return i},LZMA.reverseDecode2=function(e,t,n,i){for(var r,a=1,o=0,s=0;s<i;++s)r=n.decodeBit(e,t+a),a=a<<1|r,o|=r<<s;return o},LZMA.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new LZMA.BitTreeDecoder(8),this._numPosStates=0},LZMA.LenDecoder.prototype.create=function(e){for(;this._numPosStates<e;++this._numPosStates)this._lowCoder[this._numPosStates]=new LZMA.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new LZMA.BitTreeDecoder(3)},LZMA.LenDecoder.prototype.init=function(){var e=this._numPosStates;for(LZMA.initBitModels(this._choice,2);e--;)this._lowCoder[e].init(),this._midCoder[e].init();this._highCoder.init()},LZMA.LenDecoder.prototype.decode=function(e,t){return 0===e.decodeBit(this._choice,0)?this._lowCoder[t].decode(e):0===e.decodeBit(this._choice,1)?8+this._midCoder[t].decode(e):16+this._highCoder.decode(e)},LZMA.Decoder2=function(){this._decoders=[]},LZMA.Decoder2.prototype.init=function(){LZMA.initBitModels(this._decoders,768)},LZMA.Decoder2.prototype.decodeNormal=function(e){var t=1;do t=t<<1|e.decodeBit(this._decoders,t);while(t<256);return 255&t},LZMA.Decoder2.prototype.decodeWithMatchByte=function(e,t){
var n,i,r=1;do if(n=t>>7&1,t<<=1,i=e.decodeBit(this._decoders,(1+n<<8)+r),r=r<<1|i,n!==i){for(;r<256;)r=r<<1|e.decodeBit(this._decoders,r);break}while(r<256);return 255&r},LZMA.LiteralDecoder=function(){},LZMA.LiteralDecoder.prototype.create=function(e,t){var n;if(!this._coders||this._numPrevBits!==t||this._numPosBits!==e)for(this._numPosBits=e,this._posMask=(1<<e)-1,this._numPrevBits=t,this._coders=[],n=1<<this._numPrevBits+this._numPosBits;n--;)this._coders[n]=new LZMA.Decoder2},LZMA.LiteralDecoder.prototype.init=function(){for(var e=1<<this._numPrevBits+this._numPosBits;e--;)this._coders[e].init()},LZMA.LiteralDecoder.prototype.getDecoder=function(e,t){return this._coders[((e&this._posMask)<<this._numPrevBits)+((255&t)>>>8-this._numPrevBits)]},LZMA.Decoder=function(){this._outWindow=new LZMA.OutWindow,this._rangeDecoder=new LZMA.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new LZMA.BitTreeDecoder(4),this._lenDecoder=new LZMA.LenDecoder,this._repLenDecoder=new LZMA.LenDecoder,this._literalDecoder=new LZMA.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new LZMA.BitTreeDecoder(6),this._posSlotDecoder[1]=new LZMA.BitTreeDecoder(6),this._posSlotDecoder[2]=new LZMA.BitTreeDecoder(6),this._posSlotDecoder[3]=new LZMA.BitTreeDecoder(6)},LZMA.Decoder.prototype.setDictionarySize=function(e){return!(e<0)&&(this._dictionarySize!==e&&(this._dictionarySize=e,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},LZMA.Decoder.prototype.setLcLpPb=function(e,t,n){var i=1<<n;return!(e>8||t>4||n>4)&&(this._literalDecoder.create(t,e),this._lenDecoder.create(i),this._repLenDecoder.create(i),this._posStateMask=i-1,!0)},LZMA.Decoder.prototype.init=function(){var e=4;for(this._outWindow.init(!1),LZMA.initBitModels(this._isMatchDecoders,192),LZMA.initBitModels(this._isRep0LongDecoders,192),LZMA.initBitModels(this._isRepDecoders,12),LZMA.initBitModels(this._isRepG0Decoders,12),LZMA.initBitModels(this._isRepG1Decoders,12),LZMA.initBitModels(this._isRepG2Decoders,12),LZMA.initBitModels(this._posDecoders,114),this._literalDecoder.init();e--;)this._posSlotDecoder[e].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},LZMA.Decoder.prototype.decode=function(e,t,n){var i,r,a,o,s,l,u=0,c=0,h=0,f=0,d=0,p=0,g=0;for(this._rangeDecoder.setStream(e),this._outWindow.setStream(t),this.init();n<0||p<n;)if(i=p&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(u<<4)+i))r=this._literalDecoder.getDecoder(p++,g),g=u>=7?r.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(c)):r.decodeNormal(this._rangeDecoder),this._outWindow.putByte(g),u=u<4?0:u-(u<10?3:6);else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,u))a=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,u)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(u<<4)+i)&&(u=u<7?9:11,a=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,u)?o=h:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,u)?o=f:(o=d,d=f),f=h),h=c,c=o),0===a&&(a=2+this._repLenDecoder.decode(this._rangeDecoder,i),u=u<7?8:11);else if(d=f,f=h,h=c,a=2+this._lenDecoder.decode(this._rangeDecoder,i),u=u<7?7:10,s=this._posSlotDecoder[a<=5?a-2:3].decode(this._rangeDecoder),s>=4){if(l=(s>>1)-1,c=(2|1&s)<<l,s<14)c+=LZMA.reverseDecode2(this._posDecoders,c-s-1,this._rangeDecoder,l);else if(c+=this._rangeDecoder.decodeDirectBits(l-4)<<4,c+=this._posAlignDecoder.reverseDecode(this._rangeDecoder),c<0){if(c===-1)break;return!1}}else c=s;if(c>=p||c>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(c,a),p+=a,g=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},LZMA.Decoder.prototype.setDecoderProperties=function(e){var t,n,i,r,a;return!(e.size<5)&&(t=e.readByte(),n=t%9,t=~~(t/9),i=t%5,r=~~(t/5),!!this.setLcLpPb(n,i,r)&&(a=e.readByte(),a|=e.readByte()<<8,a|=e.readByte()<<16,a+=16777216*e.readByte(),this.setDictionarySize(a)))},LZMA.decompress=function(e,t,n,i){var r=new LZMA.Decoder;if(!r.setDecoderProperties(e))throw"Incorrect stream properties";if(!r.decode(t,n,i))throw"Error in data stream";return!0},THREE.DRACOLoader=function(e){this.timeLoaded=0,this.manager=e||THREE.DefaultLoadingManager,this.materials=null,this.verbosity=0,this.attributeOptions={},this.drawMode=THREE.TrianglesDrawMode,this.attributeUniqueIdMap={},this.nativeAttributeMap={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"}},THREE.DRACOLoader.prototype={constructor:THREE.DRACOLoader,load:function(e,t,n,i){var r=this,a=new THREE.FileLoader(r.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),a.load(e,function(e){r.decodeDracoFile(e,t)},n,i)},setPath:function(e){this.path=e},setCrossOrigin:function(e){this.crossOrigin=e},setVerbosity:function(e){this.verbosity=e},setDrawMode:function(e){this.drawMode=e},setSkipDequantization:function(e,t){var n=!0;"undefined"!=typeof t&&(n=t),this.getAttributeOptions(e).skipDequantization=n},decodeDracoFile:function(e,t,n){var i=this;this.attributeUniqueIdMap=n||{},THREE.DRACOLoader.getDecoderModule().then(function(n){i.decodeDracoFileInternal(e,n.decoder,t)})},decodeDracoFileInternal:function(e,t,n){var i=new t.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength);var r=new t.Decoder,a=r.GetEncodedGeometryType(i);if(a==t.TRIANGULAR_MESH)this.verbosity>0&&console.log("Loaded a mesh.");else{if(a!=t.POINT_CLOUD){var o="THREE.DRACOLoader: Unknown geometry type.";throw console.error(o),new Error(o)}this.verbosity>0&&console.log("Loaded a point cloud.")}n(this.convertDracoGeometryTo3JS(t,r,a,i))},addAttributeToGeometry:function(e,t,n,i,r,a,o){if(0===r.ptr){var s="THREE.DRACOLoader: No attribute "+i;throw console.error(s),new Error(s)}var l=r.num_components(),u=new e.DracoFloat32Array;t.GetAttributeFloatForAllPoints(n,r,u);var c=n.num_points(),h=c*l;o[i]=new Float32Array(h);for(var f=0;f<h;f++)o[i][f]=u.GetValue(f);a.addAttribute(i,new THREE.Float32BufferAttribute(o[i],l)),e.destroy(u)},convertDracoGeometryTo3JS:function(e,t,n,i){this.getAttributeOptions("position").skipDequantization===!0&&t.SkipAttributeTransform(e.POSITION);var r,a;const o=performance.now();if(n===e.TRIANGULAR_MESH?(r=new e.Mesh,a=t.DecodeBufferToMesh(i,r)):(r=new e.PointCloud,a=t.DecodeBufferToPointCloud(i,r)),!a.ok()||0==r.ptr){var s="THREE.DRACOLoader: Decoding failed: ";throw s+=a.error_msg(),console.error(s),e.destroy(t),e.destroy(r),new Error(s)}var l=performance.now();e.destroy(i);var u;n==e.TRIANGULAR_MESH?(u=r.num_faces(),this.verbosity>0&&console.log("Number of faces loaded: "+u.toString())):u=0;var c=r.num_points(),h=r.num_attributes();this.verbosity>0&&(console.log("Number of points loaded: "+c.toString()),console.log("Number of attributes loaded: "+h.toString()));var f=t.GetAttributeId(r,e.POSITION);if(f==-1){var s="THREE.DRACOLoader: No position attribute found.";throw console.error(s),e.destroy(t),e.destroy(r),new Error(s)}var d=t.GetAttribute(r,f),p={},g=new THREE.BufferGeometry;for(var m in this.nativeAttributeMap)if(void 0===this.attributeUniqueIdMap[m]){var v=t.GetAttributeId(r,e[this.nativeAttributeMap[m]]);if(v!==-1){this.verbosity>0&&console.log("Loaded "+m+" attribute.");var _=t.GetAttribute(r,v);this.addAttributeToGeometry(e,t,r,m,_,g,p)}}for(var m in this.attributeUniqueIdMap){var y=this.attributeUniqueIdMap[m],_=t.GetAttributeByUniqueId(r,y);this.addAttributeToGeometry(e,t,r,m,_,g,p)}if(n==e.TRIANGULAR_MESH)if(this.drawMode===THREE.TriangleStripDrawMode){var b=new e.DracoInt32Array;t.GetTriangleStripsFromMesh(r,b);p.indices=new Uint32Array(b.size());for(var w=0;w<b.size();++w)p.indices[w]=b.GetValue(w);e.destroy(b)}else{var x=3*u;p.indices=new Uint32Array(x);for(var E=new e.DracoInt32Array,w=0;w<u;++w){t.GetFaceFromMesh(r,w,E);var k=3*w;p.indices[k]=E.GetValue(0),p.indices[k+1]=E.GetValue(1),p.indices[k+2]=E.GetValue(2)}e.destroy(E)}g.drawMode=this.drawMode,n==e.TRIANGULAR_MESH&&g.setIndex(new(p.indices.length>65535?THREE.Uint32BufferAttribute:THREE.Uint16BufferAttribute)(p.indices,1));var M=new e.AttributeQuantizationTransform;if(M.InitFromAttribute(d)){g.attributes.position.isQuantized=!0,g.attributes.position.maxRange=M.range(),g.attributes.position.numQuantizationBits=M.quantization_bits(),g.attributes.position.minValues=new Float32Array(3);for(var w=0;w<3;++w)g.attributes.position.minValues[w]=M.min_value(w)}return e.destroy(M),e.destroy(t),e.destroy(r),this.decode_time=l-o,this.import_time=performance.now()-l,this.verbosity>0&&(console.log("Decode time: "+this.decode_time),console.log("Import time: "+this.import_time)),g},isVersionSupported:function(e,t){THREE.DRACOLoader.getDecoderModule().then(function(n){t(n.decoder.isVersionSupported(e))})},getAttributeOptions:function(e){return"undefined"==typeof this.attributeOptions[e]&&(this.attributeOptions[e]={}),this.attributeOptions[e]}},THREE.DRACOLoader.decoderPath="./",THREE.DRACOLoader.decoderConfig={},THREE.DRACOLoader.decoderModulePromise=null,THREE.DRACOLoader.setDecoderPath=function(e){THREE.DRACOLoader.decoderPath=e},THREE.DRACOLoader.setDecoderConfig=function(e){var t=THREE.DRACOLoader.decoderConfig.wasmBinary;THREE.DRACOLoader.decoderConfig=e||{},THREE.DRACOLoader.decoderModulePromise=null,t&&(THREE.DRACOLoader.decoderConfig.wasmBinary=t)},THREE.DRACOLoader.getDecoderModule=function(){var e=this,t=THREE.DRACOLoader.decoderPath,n=THREE.DRACOLoader.decoderConfig,i=THREE.DRACOLoader.decoderModulePromise;return i?i:("undefined"!=typeof DracoDecoderModule?i=Promise.resolve():"object"!=typeof WebAssembly||"js"===n.type?i=THREE.DRACOLoader._loadScript(t+"draco_decoder.js"):(n.wasmBinaryFile=t+"draco_decoder.wasm",i=THREE.DRACOLoader._loadScript(t+"draco_wasm_wrapper.js").then(function(){return THREE.DRACOLoader._loadArrayBuffer(n.wasmBinaryFile)}).then(function(e){n.wasmBinary=e})),i=i.then(function(){return new Promise(function(t){n.onModuleLoaded=function(n){e.timeLoaded=performance.now(),t({decoder:n})},DracoDecoderModule(n)})}),THREE.DRACOLoader.decoderModulePromise=i,i)},THREE.DRACOLoader._loadScript=function(e){var t=document.getElementById("decoder_script");null!==t&&t.parentNode.removeChild(t);var n=document.getElementsByTagName("head")[0],i=document.createElement("script");return i.id="decoder_script",i.type="text/javascript",i.src=e,new Promise(function(e){i.onload=e,n.appendChild(i)})},THREE.DRACOLoader._loadArrayBuffer=function(e){var t=new THREE.FileLoader;return t.setResponseType("arraybuffer"),new Promise(function(n,i){t.load(e,n,void 0,i)})},function(e){"use strict";function t(e){return!isNaN(e)&&isFinite(e)}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return e?n(e)!==!0?[e]:e:[]}function r(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function a(e,t,n){for(var i=0,r=e.length;i<r;i++)if(e[i][t]===n)return i;return-1}e.Octree=function(n){if(n=n||{},n.tree=this,this.nodeCount=0,this.INDEX_INSIDE_CROSS=-1,this.INDEX_OUTSIDE_OFFSET=2,this.INDEX_OUTSIDE_POS_X=t(n.INDEX_OUTSIDE_POS_X)?n.INDEX_OUTSIDE_POS_X:0,this.INDEX_OUTSIDE_NEG_X=t(n.INDEX_OUTSIDE_NEG_X)?n.INDEX_OUTSIDE_NEG_X:1,this.INDEX_OUTSIDE_POS_Y=t(n.INDEX_OUTSIDE_POS_Y)?n.INDEX_OUTSIDE_POS_Y:2,this.INDEX_OUTSIDE_NEG_Y=t(n.INDEX_OUTSIDE_NEG_Y)?n.INDEX_OUTSIDE_NEG_Y:3,this.INDEX_OUTSIDE_POS_Z=t(n.INDEX_OUTSIDE_POS_Z)?n.INDEX_OUTSIDE_POS_Z:4,this.INDEX_OUTSIDE_NEG_Z=t(n.INDEX_OUTSIDE_NEG_Z)?n.INDEX_OUTSIDE_NEG_Z:5,this.INDEX_OUTSIDE_MAP=[],this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_POS_X]={index:this.INDEX_OUTSIDE_POS_X,count:0,x:1,y:0,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_NEG_X]={index:this.INDEX_OUTSIDE_NEG_X,count:0,x:-1,y:0,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_POS_Y]={index:this.INDEX_OUTSIDE_POS_Y,count:0,x:0,y:1,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_NEG_Y]={index:this.INDEX_OUTSIDE_NEG_Y,count:0,x:0,y:-1,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_POS_Z]={index:this.INDEX_OUTSIDE_POS_Z,count:0,x:0,y:0,z:1},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_NEG_Z]={index:this.INDEX_OUTSIDE_NEG_Z,count:0,x:0,y:0,z:-1},this.FLAG_POS_X=1<<this.INDEX_OUTSIDE_POS_X+1,this.FLAG_NEG_X=1<<this.INDEX_OUTSIDE_NEG_X+1,this.FLAG_POS_Y=1<<this.INDEX_OUTSIDE_POS_Y+1,this.FLAG_NEG_Y=1<<this.INDEX_OUTSIDE_NEG_Y+1,this.FLAG_POS_Z=1<<this.INDEX_OUTSIDE_POS_Z+1,this.FLAG_NEG_Z=1<<this.INDEX_OUTSIDE_NEG_Z+1,this.utilVec31Search=new e.Vector3,this.utilVec32Search=new e.Vector3,this.scene=n.scene,this.scene){var i=new e.BoxHelper(new e.Mesh(new e.BoxGeometry(1,1,1)),16711782);this.visualGeometry=i.geometry,this.visualMaterial=i.material}this.objects=[],this.objectsMap={},this.objectsData=[],this.objectsDeferred=[],this.depthMax=t(n.depthMax)?n.depthMax:1/0,this.objectsThreshold=t(n.objectsThreshold)?n.objectsThreshold:8,this.overlapPct=t(n.overlapPct)?n.overlapPct:.15,this.undeferred=n.undeferred||!1,this.root=n.root instanceof e.OctreeNode?n.root:new e.OctreeNode(n)},e.Octree.prototype={update:function(){if(this.objectsDeferred.length>0){for(var e=0,t=this.objectsDeferred.length;e<t;e++){var n=this.objectsDeferred[e];this.addDeferred(n.object,n.options)}this.objectsDeferred.length=0}},add:function(e,t){this.undeferred?(this.updateObject(e),this.addDeferred(e,t)):this.objectsDeferred.push({object:e,options:t})},addDeferred:function(t,n){var i,r,a,o,s,l,u;if(t instanceof e.OctreeObjectData&&(t=t.object),t.uuid||(t.uuid=e.Math.generateUUID()),!this.objectsMap[t.uuid])if(this.objects.push(t),this.objectsMap[t.uuid]=t,n&&(s=n.useFaces,u=n.useVertices),u===!0)for(a=t.geometry,l=a.vertices,i=0,r=l.length;i<r;i++)this.addObjectData(t,l[i]);else if(s===!0)for(a=t.geometry,o=a.faces,i=0,r=o.length;i<r;i++)this.addObjectData(t,o[i]);else this.addObjectData(t)},addObjectData:function(t,n){var i=new e.OctreeObjectData(t,n);this.objectsData.push(i),this.root.addObject(i)},remove:function(t){var n,i,o,s,l=t;if(t instanceof e.OctreeObjectData&&(t=t.object),this.objectsMap[t.uuid]){if(this.objectsMap[t.uuid]=void 0,o=r(this.objects,t),o!==-1)for(this.objects.splice(o,1),s=this.root.removeObject(l),n=0,i=s.length;n<i;n++)l=s[n],o=r(this.objectsData,l),o!==-1&&this.objectsData.splice(o,1)}else this.objectsDeferred.length>0&&(o=a(this.objectsDeferred,"object",t),o!==-1&&this.objectsDeferred.splice(o,1))},extend:function(t){var n,i,r,a;if(t instanceof e.Octree)for(r=t.objectsData,n=0,i=r.length;n<i;n++)a=r[n],this.add(a,{useFaces:a.faces,useVertices:a.vertices})},rebuild:function(){var t,n,i,r,a,o,s=[];for(t=0,n=this.objectsData.length;t<n;t++)r=this.objectsData[t],i=r.node,r.update(),i instanceof e.OctreeNode&&!r.positionLast.equals(r.position)&&(o=r.indexOctant,a=i.getOctantIndex(r),a!==o&&s.push(r));for(t=0,n=s.length;t<n;t++)r=s[t],r.node.removeObject(r),this.root.addObject(r)},updateObject:function(e){var t,n,i,r,a=[e];for(i=e.parent;i;)a.push(i),i=i.parent;for(t=0,n=a.length;t<n;t++)i=a[t],i.matrixWorldNeedsUpdate===!0&&(r=i);"undefined"!=typeof r&&r.updateMatrixWorld()},search:function(t,n,i,a){var o,s,l,u,c,h,f,d,p,g,m;for(u=[].concat(this.root.objects),n>0||(n=Number.MAX_VALUE),a instanceof e.Vector3&&(a=this.utilVec31Search.copy(a).normalize(),m=this.utilVec32Search.set(1,1,1).divide(a)),o=0,s=this.root.nodesIndices.length;o<s;o++)l=this.root.nodesByIndex[this.root.nodesIndices[o]],u=l.search(t,n,u,a,m);if(i===!0)for(f=[],p=[],o=0,s=u.length;o<s;o++)c=u[o],h=c.object,g=r(p,h),g===-1?(d={object:h,faces:[],vertices:[]},f.push(d),p.push(h)):d=f[g],c.faces?d.faces.push(c.faces):c.vertices&&d.vertices.push(c.vertices);else f=u;return f},setRoot:function(t){t instanceof e.OctreeNode&&(this.root=t,this.root.updateProperties())},getDepthEnd:function(){return this.root.getDepthEnd()},getNodeCountEnd:function(){return this.root.getNodeCountEnd()},getObjectCountEnd:function(){return this.root.getObjectCountEnd()},toConsole:function(){this.root.toConsole()}},e.OctreeObjectData=function(t,n){this.object=t,n instanceof e.Face3?(this.faces=n,this.face3=!0,this.utilVec31FaceBounds=new e.Vector3):n instanceof e.Vector3&&(this.vertices=n),this.radius=0,this.position=new e.Vector3,this.object instanceof e.Object3D&&this.update(),this.positionLast=this.position.clone()},e.OctreeObjectData.prototype={update:function(){this.face3?(this.radius=this.getFace3BoundingRadius(this.object,this.faces),this.position.copy(this.faces.centroid).applyMatrix4(this.object.matrixWorld)):this.vertices?(this.radius=this.object.material.size||1,this.position.copy(this.vertices).applyMatrix4(this.object.matrixWorld)):this.object.geometry?(null===this.object.geometry.boundingSphere&&this.object.geometry.computeBoundingSphere(),this.radius=this.object.geometry.boundingSphere.radius,this.position.copy(this.object.geometry.boundingSphere.center).applyMatrix4(this.object.matrixWorld)):(this.radius=this.object.boundRadius,this.position.setFromMatrixPosition(this.object.matrixWorld)),this.radius=this.radius*Math.max(this.object.scale.x,this.object.scale.y,this.object.scale.z)},getFace3BoundingRadius:function(t,n){void 0===n.centroid&&(n.centroid=new e.Vector3);var i,r=t.geometry||t,a=r.vertices,o=n.centroid,s=a[n.a],l=a[n.b],u=a[n.c],c=this.utilVec31FaceBounds;return o.addVectors(s,l).add(u).divideScalar(3),i=Math.max(c.subVectors(o,s).length(),c.subVectors(o,l).length(),c.subVectors(o,u).length())}},e.OctreeNode=function(t){this.utilVec31Branch=new e.Vector3,this.utilVec31Expand=new e.Vector3,this.utilVec31Ray=new e.Vector3,t=t||{},t.tree instanceof e.Octree?this.tree=t.tree:t.parent instanceof e.OctreeNode!=!0&&(t.root=this,this.tree=new e.Octree(t)),this.id=this.tree.nodeCount++,this.position=t.position instanceof e.Vector3?t.position:new e.Vector3,this.radius=t.radius>0?t.radius:1,this.indexOctant=t.indexOctant,this.depth=0,this.reset(),this.setParent(t.parent),this.overlap=this.radius*this.tree.overlapPct,this.radiusOverlap=this.radius+this.overlap,this.left=this.position.x-this.radiusOverlap,this.right=this.position.x+this.radiusOverlap,this.bottom=this.position.y-this.radiusOverlap,this.top=this.position.y+this.radiusOverlap,this.back=this.position.z-this.radiusOverlap,this.front=this.position.z+this.radiusOverlap,this.tree.scene&&(this.visual=new e.LineSegments(this.tree.visualGeometry,this.tree.visualMaterial),this.visual.scale.set(2*this.radiusOverlap,2*this.radiusOverlap,2*this.radiusOverlap),this.visual.position.copy(this.position),this.tree.scene.add(this.visual))},e.OctreeNode.prototype={setParent:function(e){e!==this&&this.parent!==e&&(this.parent=e,this.updateProperties())},updateProperties:function(){var t,n;for(this.parent instanceof e.OctreeNode?(this.tree=this.parent.tree,this.depth=this.parent.depth+1):this.depth=0,t=0,n=this.nodesIndices.length;t<n;t++)this.nodesByIndex[this.nodesIndices[t]].updateProperties()},reset:function(e,t){var n,i,r,a=this.nodesIndices||[],o=this.nodesByIndex;for(this.objects=[],this.nodesIndices=[],this.nodesByIndex={},n=0,i=a.length;n<i;n++)r=o[a[n]],r.setParent(void 0),e===!0&&r.reset(e,t);t===!0&&this.visual&&this.visual.parent&&this.visual.parent.remove(this.visual)},addNode:function(e,t){e.indexOctant=t,r(this.nodesIndices,t)===-1&&this.nodesIndices.push(t),this.nodesByIndex[t]=e,e.parent!==this&&e.setParent(this)},removeNode:function(e){var t,n;t=r(this.nodesIndices,e),this.nodesIndices.splice(t,1),n=n||this.nodesByIndex[e],delete this.nodesByIndex[e],n.parent===this&&n.setParent(void 0)},addObject:function(t){var n,i,a;i=this.getOctantIndex(t),i>-1&&this.nodesIndices.length>0?(a=this.branch(i),a.addObject(t)):i<-1&&this.parent instanceof e.OctreeNode?this.parent.addObject(t):(n=r(this.objects,t),n===-1&&this.objects.push(t),t.node=this,this.checkGrow())},addObjectWithoutCheck:function(e){var t,n,i;for(t=0,n=e.length;t<n;t++)i=e[t],this.objects.push(i),i.node=this},removeObject:function(e){var t,n,i,r;if(r=this.removeObjectRecursive(e,{searchComplete:!1,nodesRemovedFrom:[],objectsDataRemoved:[]}),i=r.nodesRemovedFrom,i.length>0)for(t=0,n=i.length;t<n;t++)i[t].shrink();return r.objectsDataRemoved},removeObjectRecursive:function(t,n){var i,a,o,s,l,u=-1;if(t instanceof e.OctreeObjectData)u=r(this.objects,t),u!==-1&&(this.objects.splice(u,1),t.node=void 0,n.objectsDataRemoved.push(t),n.searchComplete=l=!0);else for(i=this.objects.length-1;i>=0;i--)if(o=this.objects[i],o.object===t&&(this.objects.splice(i,1),o.node=void 0,n.objectsDataRemoved.push(o),l=!0,!o.faces&&!o.vertices)){n.searchComplete=!0;break}if(l===!0&&n.nodesRemovedFrom.push(this),n.searchComplete!==!0)for(i=0,a=this.nodesIndices.length;i<a&&(s=this.nodesByIndex[this.nodesIndices[i]],n=s.removeObjectRecursive(t,n),n.searchComplete!==!0);i++);return n},checkGrow:function(){this.objects.length>this.tree.objectsThreshold&&this.tree.objectsThreshold>0&&this.grow()},grow:function(){var e,t,n,i,r=[],a=[],o=[],s=[],l=[];for(n=0,i=this.objects.length;n<i;n++)t=this.objects[n],e=this.getOctantIndex(t),e>-1?(o.push(t),s.push(e)):e<-1?(r.push(t),a.push(e)):l.push(t);o.length>0&&(l=l.concat(this.split(o,s))),r.length>0&&(l=l.concat(this.expand(r,a))),this.objects=l,this.checkMerge()},split:function(e,t){var n,i,r,a,o,s;if(this.depth<this.tree.depthMax){for(e=e||this.objects,t=t||[],s=[],n=0,i=e.length;n<i;n++)a=e[n],r=t[n],r>-1?(o=this.branch(r),o.addObject(a)):s.push(a);e===this.objects&&(this.objects=s)}else s=this.objects;return s},branch:function(t){var n,i,r,a,o,s;return this.nodesByIndex[t]instanceof e.OctreeNode?n=this.nodesByIndex[t]:(r=.5*this.radiusOverlap,i=r*this.tree.overlapPct,a=r-i,o=this.utilVec31Branch.set(1&t?a:-a,2&t?a:-a,4&t?a:-a),s=(new e.Vector3).addVectors(this.position,o),n=new e.OctreeNode({tree:this.tree,parent:this,position:s,radius:r,indexOctant:t}),this.addNode(n,t)),n},expand:function(t,n){var i,r,a,o,s,l,u,c,h,f,d,p,g,m,v,_,y,b,w,x,E,k,M,T,S,A,R,C,P,O=this.tree.INDEX_OUTSIDE_MAP,L=this.utilVec31Expand;if(this.tree.root.getDepthEnd()<this.tree.depthMax){for(t=t||this.objects,n=n||[],o=[],s=[],i=0,r=O.length;i<r;i++)O[i].count=0;for(i=0,r=t.length;i<r;i++)a=t[i],l=n[i],l<-1?(u=-l-this.tree.INDEX_OUTSIDE_OFFSET,u&this.tree.FLAG_POS_X?O[this.tree.INDEX_OUTSIDE_POS_X].count++:u&this.tree.FLAG_NEG_X&&O[this.tree.INDEX_OUTSIDE_NEG_X].count++,u&this.tree.FLAG_POS_Y?O[this.tree.INDEX_OUTSIDE_POS_Y].count++:u&this.tree.FLAG_NEG_Y&&O[this.tree.INDEX_OUTSIDE_NEG_Y].count++,u&this.tree.FLAG_POS_Z?O[this.tree.INDEX_OUTSIDE_POS_Z].count++:u&this.tree.FLAG_NEG_Z&&O[this.tree.INDEX_OUTSIDE_NEG_Z].count++,s.push(a)):o.push(a);if(s.length>0)for(h=O.slice(0),h.sort(function(e,t){return t.count-e.count}),f=h[0],g=1|f.index,v=h[1],_=h[2],d=(1|v.index)!==g?v:_,m=1|d.index,v=h[2],_=h[3],y=h[4],b=1|v.index,w=1|_.index,p=b!==g&&b!==m?v:w!==g&&w!==m?_:y,x=f.x+d.x+p.x,E=f.y+d.y+p.y,k=f.z+d.z+p.z,l=this.getOctantIndexFromPosition(x,E,k),c=this.getOctantIndexFromPosition(-x,-E,-k),M=this.overlap,T=this.radius,A=this.tree.overlapPct>0?M/(.5*this.tree.overlapPct*(1+this.tree.overlapPct)):2*T,R=A*this.tree.overlapPct,S=A+R-(T+M),L.set(1&l?S:-S,2&l?S:-S,4&l?S:-S),C=(new e.Vector3).addVectors(this.position,L),P=new e.OctreeNode({tree:this.tree,position:C,radius:A}),P.addNode(this,c),this.tree.setRoot(P),i=0,r=s.length;i<r;i++)this.tree.root.addObject(s[i]);t===this.objects&&(this.objects=o)}else o=t;return o},shrink:function(){this.checkMerge(),this.tree.root.checkContract()},checkMerge:function(){for(var t,n=this;n.parent instanceof e.OctreeNode&&n.getObjectCountEnd()<this.tree.objectsThreshold;)t=n,n=n.parent;n!==this&&n.merge(t)},merge:function(e){var t,n,r;for(e=i(e),t=0,n=e.length;t<n;t++)r=e[t],this.addObjectWithoutCheck(r.getObjectsEnd()),r.reset(!0,!0),this.removeNode(r.indexOctant,r);this.checkMerge()},checkContract:function(){var t,n,i,r,a,o,s;if(this.nodesIndices.length>0){for(o=0,s=this.objects.length,t=0,n=this.nodesIndices.length;t<n;t++)i=this.nodesByIndex[this.nodesIndices[t]],r=i.getObjectCountEnd(),s+=r,(a instanceof e.OctreeNode==!1||r>o)&&(a=i,o=r);s-=o,s<this.tree.objectsThreshold&&a instanceof e.OctreeNode&&this.contract(a)}},contract:function(e){var t,n,i;for(t=0,n=this.nodesIndices.length;t<n;t++)i=this.nodesByIndex[this.nodesIndices[t]],i!==e&&(e.addObjectWithoutCheck(i.getObjectsEnd()),i.reset(!0,!0));e.addObjectWithoutCheck(this.objects),this.reset(!1,!0),this.tree.setRoot(e),e.checkContract()},getOctantIndex:function(t){var n,i,r,a,o,s,l,u,c,h=this.position,f=this.radiusOverlap,d=this.overlap,p=0;if(t instanceof e.OctreeObjectData?(i=t.radius,n=t.position,t.positionLast.copy(n)):t instanceof e.OctreeNode&&(n=t.position,i=0),r=n.x-h.x,a=n.y-h.y,o=n.z-h.z,s=Math.abs(r),l=Math.abs(a),u=Math.abs(o),c=Math.max(s,l,u),c+i>f)return s+i>f&&(p^=r>0?this.tree.FLAG_POS_X:this.tree.FLAG_NEG_X),l+i>f&&(p^=a>0?this.tree.FLAG_POS_Y:this.tree.FLAG_NEG_Y),u+i>f&&(p^=o>0?this.tree.FLAG_POS_Z:this.tree.FLAG_NEG_Z),t.indexOctant=-p-this.tree.INDEX_OUTSIDE_OFFSET,t.indexOctant;if(r-i>-d)p=1|p;else if(!(r+i<d))return t.indexOctant=this.tree.INDEX_INSIDE_CROSS,t.indexOctant;if(a-i>-d)p=2|p;else if(!(a+i<d))return t.indexOctant=this.tree.INDEX_INSIDE_CROSS,t.indexOctant;if(o-i>-d)p=4|p;else if(!(o+i<d))return t.indexOctant=this.tree.INDEX_INSIDE_CROSS,t.indexOctant;return t.indexOctant=p,t.indexOctant},getOctantIndexFromPosition:function(e,t,n){var i=0;return e>0&&(i=1|i),t>0&&(i=2|i),n>0&&(i=4|i),i},search:function(e,t,n,i,r){var a,o,s,l;if(l=i?this.intersectRay(e,i,t,r):this.intersectSphere(e,t),l===!0)for(n=n.concat(this.objects),a=0,o=this.nodesIndices.length;a<o;a++)s=this.nodesByIndex[this.nodesIndices[a]],n=s.search(e,t,n,i);return n},intersectSphere:function(e,t){var n=t*t,i=e.x,r=e.y,a=e.z;return i<this.left?n-=Math.pow(i-this.left,2):i>this.right&&(n-=Math.pow(i-this.right,2)),r<this.bottom?n-=Math.pow(r-this.bottom,2):r>this.top&&(n-=Math.pow(r-this.top,2)),a<this.back?n-=Math.pow(a-this.back,2):a>this.front&&(n-=Math.pow(a-this.front,2)),n>=0},intersectRay:function(e,t,n,i){"undefined"==typeof i&&(i=this.utilVec31Ray.set(1,1,1).divide(t));var r,a=(this.left-e.x)*i.x,o=(this.right-e.x)*i.x,s=(this.bottom-e.y)*i.y,l=(this.top-e.y)*i.y,u=(this.back-e.z)*i.z,c=(this.front-e.z)*i.z,h=Math.min(Math.min(Math.max(a,o),Math.max(s,l)),Math.max(u,c));return!(h<0)&&(r=Math.max(Math.max(Math.min(a,o),Math.min(s,l)),Math.min(u,c)),!(r>h||r>n))},getDepthEnd:function(e){var t,n,i;if(this.nodesIndices.length>0)for(t=0,n=this.nodesIndices.length;t<n;t++)i=this.nodesByIndex[this.nodesIndices[t]],e=i.getDepthEnd(e);else e=!e||this.depth>e?this.depth:e;return e},getNodeCountEnd:function(){return this.tree.root.getNodeCountRecursive()+1},getNodeCountRecursive:function(){var e,t,n=this.nodesIndices.length;for(e=0,t=this.nodesIndices.length;e<t;e++)n+=this.nodesByIndex[this.nodesIndices[e]].getNodeCountRecursive();return n},getObjectsEnd:function(e){var t,n,i;for(e=(e||[]).concat(this.objects),t=0,n=this.nodesIndices.length;t<n;t++)i=this.nodesByIndex[this.nodesIndices[t]],e=i.getObjectsEnd(e);return e},getObjectCountEnd:function(){var e,t,n=this.objects.length;for(e=0,t=this.nodesIndices.length;e<t;e++)n+=this.nodesByIndex[this.nodesIndices[e]].getObjectCountEnd();return n},getObjectCountStart:function(){for(var t=this.objects.length,n=this.parent;n instanceof e.OctreeNode;)t+=n.objects.length,n=n.parent;return t},toConsole:function(e){var t,n,i,r="   ";for(e="string"==typeof e?e:r,console.log(this.parent?e+" octree NODE > ":" octree ROOT > ",this," // id: ",this.id," // indexOctant: ",this.indexOctant," // position: ",this.position.x,this.position.y,this.position.z," // radius: ",this.radius," // depth: ",this.depth),console.log(this.parent?e+" ":" ","+ objects ( ",this.objects.length," ) ",this.objects),console.log(this.parent?e+" ":" ","+ children ( ",this.nodesIndices.length," )",this.nodesIndices,this.nodesByIndex),t=0,n=this.nodesIndices.length;t<n;t++)i=this.nodesByIndex[this.nodesIndices[t]],i.toConsole(e+r)}},e.Raycaster.prototype.intersectOctreeObject=function(t,n){var i,r,a,o;return t.object instanceof e.Object3D?(r=t,t=r.object,o=r.faces,a=t.geometry.faces,o.length>0&&(t.geometry.faces=o),i=this.intersectObject(t,n),o.length>0&&(t.geometry.faces=a)):i=this.intersectObject(t,n),i},e.Raycaster.prototype.intersectOctreeObjects=function(e,t){var n,i,r=[];for(n=0,i=e.length;n<i;n++)r=r.concat(this.intersectOctreeObject(e[n],t));return r}}(THREE),THREE.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*P.autoRotateSpeed}function i(e){var t=1;return t=Math.abs(e)/120<=1?1:Math.abs(e)/120>=5?5:Math.floor(Math.abs(e)/120),Math.pow(Math.pow(.95,P.zoomSpeed),t)}function r(e){H.theta-=e}function a(e){H.phi-=e}function o(e){P.object.isPerspectiveCamera?z/=e:P.object.isOrthographicCamera?(P.object.zoom=Math.max(P.minZoom,Math.min(P.maxZoom,P.object.zoom*e)),P.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),P.enableZoom=!1)}function s(e){P.object.isPerspectiveCamera?z*=e:P.object.isOrthographicCamera?(P.object.zoom=Math.max(P.minZoom,Math.min(P.maxZoom,P.object.zoom/e)),P.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),P.enableZoom=!1)}function l(e){j.set(e.clientX,e.clientY)}function u(e){q.set(e.clientX,e.clientY)}function c(e){W.set(e.clientX,e.clientY)}function h(e){V.set(e.clientX,e.clientY),G.subVectors(V,j);var t=P.domElement===document?P.domElement.body:P.domElement;r(2*Math.PI*G.x/t.clientWidth*P.rotateSpeed),a(2*Math.PI*G.y/t.clientHeight*P.rotateSpeed),j.copy(V),P.update()}function f(e){Z.set(e.clientX,e.clientY),Q.subVectors(Z,q),Q.y>0?o(i(Q.y)):Q.y<0&&s(i(Q.y)),q.copy(Z),P.wheelEvent=!0,P.update()}function d(e){X.set(e.clientX,e.clientY),Y.subVectors(X,W),K(Y.x,Y.y),W.copy(X),P.update()}function p(e){}function g(e){e<0?s(i(e)):e>0&&o(i(e)),P.update()}function m(e){j.set(e.touches[0].pageX,e.touches[0].pageY)}function v(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);q.set(0,i)}function _(e){W.set(e.touches[0].pageX,e.touches[0].pageY)}function y(e){V.set(e.touches[0].pageX,e.touches[0].pageY),G.subVectors(V,j);var t=P.domElement===document?P.domElement.body:P.domElement;r(2*Math.PI*G.x/t.clientWidth*P.rotateSpeed),a(2*Math.PI*G.y/t.clientHeight*P.rotateSpeed),j.copy(V),P.update()}function b(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);Z.set(0,r),Q.subVectors(Z,q),Q.y>0?s(i(Q.y)):Q.y<0&&o(i(Q.y)),q.copy(Z),P.update()}function w(e){X.set(e.touches[0].pageX,e.touches[0].pageY),Y.subVectors(X,W),K(Y.x,Y.y),W.copy(X),P.update()}function x(e){}function E(e){P.domElement.__zone_symbol__removeEventListener("mousemove",M,!1),P.domElement.__zone_symbol__removeEventListener("mouseup",T,!1),P.wheelEvent=!1}function k(e){if(P.enabled!==!1){switch(e.preventDefault(),P.isMouseDown=!0,P.wheelEvent=!1,P.start.set(e.clientX,e.clientY),P.end.set(e.clientX,e.clientY),P.isMouseDown&&(P.domElement.__zone_symbol__addEventListener("mousemove",M,!1),P.domElement.__zone_symbol__addEventListener("mouseup",T,!1)),e.button){case P.mouseButtons.ORBIT:if(P.enableRotate===!1)return;l(e),D=F.ROTATE;break;case P.mouseButtons.ZOOM:if(P.enableZoom===!1)return;P.wheelEvent=!0,u(e),D=F.DOLLY;break;case P.mouseButtons.PAN:if(P.enablePan===!1)return;c(e),D=F.PAN}D!==F.NONE&&P.dispatchEvent(L)}}function M(e){if(P.enabled!==!1||P.isMouseDown!==!1)switch(e.preventDefault(),D!==F.DOLLY&&P.end.set(e.clientX,e.clientY),D){case F.ROTATE:if(P.enableRotate===!1)return;h(e);break;case F.DOLLY:if(P.enableZoom===!1)return;f(e);break;case F.PAN:if(P.enablePan===!1)return;d(e)}}function T(e){P.enabled===!1&&P.isMouseDown===!1||(P.end.set(e.clientX,e.clientY),
P.isMouseDown=!1,p(e),P.domElement.__zone_symbol__removeEventListener("mousemove",M,!1),P.domElement.__zone_symbol__removeEventListener("mouseup",T,!1),e.button!==P.mouseButtons.ZOOM&&(P.dispatchEvent(N),D=F.NONE))}function S(e){if(P.enabled!==!1&&P.enableZoom!==!1&&(D===F.NONE||D===F.ROTATE)){e.preventDefault(),e.stopPropagation();var e=window.event||e,t=.5*e.deltaY;P.wheelDelta||(P.wheelDelta=t),P.dispatchEvent(L),g(t),P.wheelEvent=!0}}function A(e){if(P.enabled!==!1){switch(e.touches.length){case 1:if(P.enableRotate===!1)return;P.isMouseDown=!0,P.wheelEvent=!1,P.start.set(e.touches[0].pageX,e.touches[0].pageY),P.end.set(e.touches[0].pageX,e.touches[0].pageY),P.isMouseDown&&(P.domElement.__zone_symbol__addEventListener("touchend",C,!1),P.domElement.__zone_symbol__addEventListener("touchmove",R,!1)),m(e),D=F.TOUCH_ROTATE;break;case 2:if(P.enableZoom===!1)return;P.start.set(e.touches[0].pageX,e.touches[0].pageY),P.end.set(e.touches[0].pageX,e.touches[0].pageY),P.wheelEvent=!0,v(e),D=F.TOUCH_DOLLY;break;case 3:if(P.enablePan===!1)return;P.start.set(e.touches[0].pageX,e.touches[0].pageY),P.end.set(e.touches[0].pageX,e.touches[0].pageY),_(e),P.wheelEvent=!1,D=F.TOUCH_PAN;break;default:D=F.NONE}D!==F.NONE&&P.dispatchEvent(L)}}function R(e){if(P.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(P.enableRotate===!1)return;if(D!==F.TOUCH_ROTATE)return;P.wheelEvent=!1,P.end.set(e.touches[0].pageX,e.touches[0].pageY),y(e);break;case 2:if(P.enableZoom===!1)return;if(D!==F.TOUCH_DOLLY)return;P.wheelEvent=!0,P.end.set(e.touches[0].pageX,e.touches[0].pageY),b(e);break;case 3:if(P.enablePan===!1)return;if(D!==F.TOUCH_PAN)return;P.wheelEvent=!1,P.end.set(e.touches[0].pageX,e.touches[0].pageY),w(e);break;default:D=F.NONE}}function C(e){P.enabled===!1&&P.isMouseDown===!1||(P.end.set(e.clientX,e.clientY),P.isMouseDown=!1,x(e),P.wheelEvent=!1,P.dispatchEvent(N),P.domElement.__zone_symbol__removeEventListener("touchend",C,!1),P.domElement.__zone_symbol__removeEventListener("touchmove",R,!1),D=F.NONE)}this.object=e,this.zoomChanged=!1,this.domElement=void 0!==t?t:document,this.wheelEvent=!1,this.wheelDelta=null,this.needResetLastPosition=!1,this.enabledDebugger=!1,this.start=new THREE.Vector2,this.end=new THREE.Vector2,this.ngZone=null,this.animationFlag=null,this.enabled=!0,this.clock=new THREE.Clock,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.mousemoveevent=null,this.isMouseDown=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return U.phi},this.getAzimuthalAngle=function(){return U.theta},this.saveState=function(){P.target0.copy(P.target),P.position0.copy(P.object.position),P.zoom0=P.object.zoom},this.isMoved=function(){return Math.abs(this.start.distanceTo(this.end))>=2},this.reset=function(){P.target.copy(P.target0),P.object.position.copy(P.position0),P.object.zoom=P.zoom0,P.object.updateProjectionMatrix(),P.dispatchEvent(O),P.update(),D=F.NONE},this.getRadius=function(){return U.radius},this.setScale=function(e){z=e},this.getScale=function(){return z},this.update=function(){var t=new THREE.Vector3,i=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),a=i.clone().inverse(),o=new THREE.Vector3,s=new THREE.Quaternion;return function(){var e=P.object.position;return t.copy(e).sub(P.target),t.applyQuaternion(i),U.setFromVector3(t),P.autoRotate&&D===F.NONE&&r(n()),U.theta+=H.theta,U.phi+=H.phi,U.theta=Math.max(P.minAzimuthAngle,Math.min(P.maxAzimuthAngle,U.theta)),U.phi=Math.max(P.minPolarAngle,Math.min(P.maxPolarAngle,U.phi)),U.makeSafe(),U.radius*=z,U.radius=Math.max(P.minDistance,Math.min(P.maxDistance,U.radius)),P.target.add(B),t.setFromSpherical(U),t.applyQuaternion(a),e.copy(P.target).add(t),P.enabledDebugger&&(P.enabledDebugger=!1),P.object.lookAt(P.target),P.enableDamping===!0?(H.theta*=1-P.dampingFactor,H.phi*=1-P.dampingFactor):H.set(0,0,0),z=1,B.set(0,0,0),!!(P.zoomChanged||o.distanceToSquared(P.object.position)>I||8*(1-s.dot(P.object.quaternion))>I)&&(P.enabled&&(P.wheelEvent?P.dispatchEvent({type:"change",target:P}):P.dispatchEvent(O)),P.needResetLastPosition&&(o.copy(P.object.position),s.copy(P.object.quaternion),P.needResetLastPosition=!1),P.zoomChanged=!1,!0)}}(),this.dispose=function(){P.domElement.__zone_symbol__removeEventListener("mousedown",k,!1),P.domElement.__zone_symbol__removeEventListener("wheel",S,!1),P.domElement.__zone_symbol__removeEventListener("mousewheel",S,!1),P.domElement.__zone_symbol__removeEventListener("onmousewheel",S,!1),P.domElement.__zone_symbol__removeEventListener("MozMousePixelScrol",S,!1),P.domElement.__zone_symbol__removeEventListener("touchstart",A,!1),P.domElement.__zone_symbol__removeEventListener("touchend",C,!1),P.domElement.__zone_symbol__removeEventListener("touchmove",R,!1),P.domElement.__zone_symbol__removeEventListener("mousemove",M,!1),P.domElement.__zone_symbol__removeEventListener("mouseup",T,!1)};var P=this,O={type:"change"},L={type:"start"},N={type:"end"},F={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},D=F.NONE,I=1e-6,U=new THREE.Spherical,H=new THREE.Spherical,z=1,B=new THREE.Vector3,j=new THREE.Vector2,V=new THREE.Vector2,G=new THREE.Vector2,W=new THREE.Vector2,X=new THREE.Vector2,Y=new THREE.Vector2,q=new THREE.Vector2,Z=new THREE.Vector2,Q=new THREE.Vector2;this.rotateLeftExp=function(e){H.theta-=e},this.rotateUpExp=function(e){H.phi-=e};var $=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),B.add(e)}}(),J=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),B.add(e)}}(),K=function(){var e=new THREE.Vector3;return function(t,n){var i=P.domElement===document?P.domElement.body:P.domElement;if(P.object.isPerspectiveCamera){var r=P.object.position;e.copy(r).sub(P.target);var a=e.length();a*=Math.tan(P.object.fov/2*Math.PI/180),$(2*t*a/i.clientHeight,P.object.matrix),J(2*n*a/i.clientHeight,P.object.matrix)}else P.object.isOrthographicCamera?($(t*(P.object.right-P.object.left)/P.object.zoom/i.clientWidth,P.object.matrix),J(n*(P.object.top-P.object.bottom)/P.object.zoom/i.clientHeight,P.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),P.enablePan=!1)}}();P.domElement.__zone_symbol__addEventListener("mouseout",E,!1),P.domElement.__zone_symbol__addEventListener("mousedown",k,!1),P.domElement.__zone_symbol__addEventListener("wheel",S,!1),P.domElement.__zone_symbol__addEventListener("onmousewheel",S,!1),P.domElement.__zone_symbol__addEventListener("mousewheel",S,!1),P.domElement.__zone_symbol__addEventListener("MozMousePixelScrol",S,!1),P.domElement.__zone_symbol__addEventListener("touchstart",A,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),THREE.DeviceOrientationControls=function(e){var t=this,n={type:"change"},i={type:"start"},r={type:"end"};this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alpha=0,this.alphaOffsetAngle=0;var a=function(e){t.deviceOrientation=e},t=this,n={type:"change"},i={type:"start"},r={type:"end"};this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alpha=0,this.alphaOffsetAngle=0;var a=function(e){t.deviceOrientation=e},o=function(){t.screenOrientation=window.orientation||0,t.dispatchEvent(i)},s=function(){var e=new THREE.Vector3(0,0,1),t=new THREE.Euler,n=new THREE.Quaternion,i=new THREE.Quaternion((-Math.sqrt(.5)),0,0,Math.sqrt(.5));return function(r,a,o,s,l){t.set(o,a,-s,"YXZ"),r.setFromEuler(t),r.multiply(i),r.multiply(n.setFromAxisAngle(e,-l))}}();this.connect=function(){o(),window.addEventListener("orientationchange",o,!1),window.addEventListener("deviceorientation",a,!1),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",o,!1),window.removeEventListener("deviceorientation",a,!1),t.dispatchEvent(r),t.enabled=!1},this.update=function(){if(t.enabled!==!1){var e=t.deviceOrientation.alpha?THREE.Math.degToRad(t.deviceOrientation.alpha)+this.alphaOffsetAngle:0,i=t.deviceOrientation.beta?THREE.Math.degToRad(t.deviceOrientation.beta):0,r=t.deviceOrientation.gamma?THREE.Math.degToRad(t.deviceOrientation.gamma):0,a=t.screenOrientation?THREE.Math.degToRad(t.screenOrientation):0;s(t.object.quaternion,e,i,r,a),this.alpha=e,t.dispatchEvent(n)}},this.updateAlphaOffsetAngle=function(e){this.alphaOffsetAngle=e,this.update()},this.dispose=function(){this.disconnect()},this.connect();var o=function(){t.screenOrientation=window.orientation||0,t.dispatchEvent(i)},s=function(){var e=new THREE.Vector3(0,0,1),t=new THREE.Euler,n=new THREE.Quaternion,i=new THREE.Quaternion((-Math.sqrt(.5)),0,0,Math.sqrt(.5));return function(r,a,o,s,l){t.set(o,a,-s,"YXZ"),r.setFromEuler(t),r.multiply(i),r.multiply(n.setFromAxisAngle(e,-l))}}();this.connect=function(){o(),window.addEventListener("orientationchange",o,!1),window.addEventListener("deviceorientation",a,!1),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",o,!1),window.removeEventListener("deviceorientation",a,!1),t.dispatchEvent(r),t.enabled=!1},this.update=function(){if(t.enabled!==!1){var e=t.deviceOrientation.alpha?THREE.Math.degToRad(t.deviceOrientation.alpha)+this.alphaOffsetAngle:0,i=t.deviceOrientation.beta?THREE.Math.degToRad(t.deviceOrientation.beta):0,r=t.deviceOrientation.gamma?THREE.Math.degToRad(t.deviceOrientation.gamma):0,a=t.screenOrientation?THREE.Math.degToRad(t.screenOrientation):0;s(t.object.quaternion,e,i,r,a),this.alpha=e,t.dispatchEvent(n)}},this.updateAlphaOffsetAngle=function(e){this.alphaOffsetAngle=e,this.update()},this.dispose=function(){this.disconnect()},this.connect()},THREE.DeviceOrientationControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1},i=e.getDrawingBufferSize();t=new THREE.WebGLRenderTarget(i.width,i.height,n),t.texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===THREE.ShaderPass&&console.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},Object.assign(THREE.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getDrawingBufferSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,n,i=!1,r=this.passes.length;for(n=0;n<r;n++)if(t=this.passes[n],t.enabled!==!1){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var a=this.renderer.context;a.stencilFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.stencilFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==THREE.MaskPass&&(t instanceof THREE.MaskPass?i=!0:t instanceof THREE.ClearMaskPass&&(i=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getDrawingBufferSize();e=this.renderTarget1.clone(),e.setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(e,t)}}),THREE.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(THREE.Pass.prototype,{setSize:function(e,t){},render:function(e,t,n,i,r){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),THREE.OutlineEffect=function(e,t){function n(){return new THREE.ShaderMaterial({name:"invisible",visible:!1})}function i(e){var t,i,r=b[e.type];e.outlineParameters;if(void 0!==r){var a=THREE.ShaderLib[r];t=a.uniforms,i=a.vertexShader}else if(e.isRawShaderMaterial===!0){if(t=e.uniforms,i=e.vertexShader,!/attribute\s+vec3\s+position\s*;/.test(i)||!/attribute\s+vec3\s+normal\s*;/.test(i))return console.warn("THREE.OutlineEffect requires both vec3 position and normal attributes in vertex shader, does not draw outline for "+e.name+"(uuid:"+e.uuid+") material."),n()}else{if(e.isShaderMaterial!==!0)return n();t=e.uniforms,i=e.vertexShader}var o=Object.assign({},t,w),s=i.replace(/void\s+main\s*\(\s*\)/,x+"\nvoid main()").replace(/\}\s*$/,E+"\n}").replace(/#include\s+<[\w_]*light[\w_]*>/g,""),l={};return/vec3\s+transformed\s*=/.test(i)||/#include\s+<begin_vertex>/.test(i)||(l.DECLARE_TRANSFORMED=!0),new THREE.ShaderMaterial({defines:l,uniforms:o,vertexShader:s,fragmentShader:k,side:THREE.BackSide,skinning:!1,morphTargets:!1,morphNormals:!1,fog:!1})}function r(e){var t=m[e.uuid];return void 0===t&&(t={material:i(e),used:!0,keepAlive:g,count:0},m[e.uuid]=t),t.used=!0,t.material}function a(e){var t=r(e);return _[t.uuid]=e,c(t,e),t}function o(e){if(void 0!==e.material){if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)e.material[t]=a(e.material[t]);else e.material=a(e.material);y[e.uuid]=e.onBeforeRender,e.onBeforeRender=l}}function s(e){if(void 0!==e.material){if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)e.material[t]=_[e.material[t].uuid];else e.material=_[e.material.uuid];e.onBeforeRender=y[e.uuid]}}function l(e,t,n,i,r,a){var o=_[r.uuid];void 0!==o&&u(r,o)}function u(e,t){var n=t.outlineParameters;e.uniforms.outlineAlpha.value=t.opacity,void 0!==n&&(void 0!==n.thickness&&(e.uniforms.outlineThickness.value=n.thickness),void 0!==n.color&&e.uniforms.outlineColor.value.copy(n.color),void 0!==n.alpha&&(e.uniforms.outlineAlpha.value=n.alpha))}function c(e,t){if("invisible"!==e.name){var n=t.outlineParameters;e.skinning=t.skinning,e.morphTargets=t.morphTargets,e.morphNormals=t.morphNormals,e.fog=t.fog,void 0!==n?(t.visible===!1?e.visible=!1:e.visible=void 0===n.visible||n.visible,e.transparent=void 0!==n.alpha&&n.alpha<1||t.transparent,void 0!==n.keepAlive&&(m[t.uuid].keepAlive=n.keepAlive)):(e.transparent=t.transparent,e.visible=t.visible),t.wireframe!==!0&&t.depthTest!==!1||(e.visible=!1)}}function h(){var e;e=Object.keys(_);for(var t=0,n=e.length;t<n;t++)_[e[t]]=void 0;e=Object.keys(y);for(var t=0,n=e.length;t<n;t++)y[e[t]]=void 0;e=Object.keys(m);for(var t=0,n=e.length;t<n;t++){var i=e[t];m[i].used===!1?(m[i].count++,m[i].keepAlive===!1&&m[i].count>v&&delete m[i]):(m[i].used=!1,m[i].count=0)}}t=t||{},this.enabled=!0;var f=void 0!==t.defaultThickness?t.defaultThickness:.003,d=void 0!==t.defaultColor?t.defaultColor:new THREE.Color(0),p=void 0!==t.defaultAlpha?t.defaultAlpha:1,g=void 0!==t.defaultKeepAlive&&t.defaultKeepAlive,m={},v=60,_={},y={},b={MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical"},w={outlineThickness:{type:"f",value:f},outlineColor:{type:"c",value:d},outlineAlpha:{type:"f",value:p}},x=["#include <fog_pars_vertex>","uniform float outlineThickness;","vec4 calculateOutline( vec4 pos, vec3 objectNormal, vec4 skinned ) {","\tfloat thickness = outlineThickness;","\tconst float ratio = 1.0;","\tvec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + objectNormal, 1.0 );","\tvec4 norm = normalize( pos - pos2 );","\treturn pos + norm * thickness * pos.w * ratio;","}"].join("\n"),E=["#if ! defined( LAMBERT ) && ! defined( PHONG ) && ! defined( TOON ) && ! defined( PHYSICAL )","\t#ifndef USE_ENVMAP","\t\tvec3 objectNormal = normalize( normal );","\t#endif","#endif","#ifdef FLIP_SIDED","\tobjectNormal = -objectNormal;","#endif","#ifdef DECLARE_TRANSFORMED","\tvec3 transformed = vec3( position );","#endif","gl_Position = calculateOutline( gl_Position, objectNormal, vec4( transformed, 1.0 ) );","#include <fog_vertex>"].join("\n"),k=["#include <common>","#include <fog_pars_fragment>","uniform vec3 outlineColor;","uniform float outlineAlpha;","void main() {","\tgl_FragColor = vec4( outlineColor, outlineAlpha );","\t#include <fog_fragment>","}"].join("\n");this.render=function(t,n,i,r){if(this.enabled===!1)return void e.render(t,n,i,r);var a=e.autoClear;e.autoClear=this.autoClear,e.render(t,n,i,r);var l=t.autoUpdate,u=t.background,c=e.shadowMap.enabled;t.autoUpdate=!1,t.background=null,e.autoClear=!1,e.shadowMap.enabled=!1,t.traverse(o),e.render(t,n,i),t.traverse(s),h(),t.autoUpdate=l,t.background=u,e.autoClear=a,e.shadowMap.enabled=c},this.autoClear=e.autoClear,this.domElement=e.domElement,this.shadowMap=e.shadowMap,this.clear=function(t,n,i){e.clear(t,n,i)},this.getPixelRatio=function(){return e.getPixelRatio()},this.setPixelRatio=function(t){e.setPixelRatio(t)},this.getSize=function(){return e.getSize()},this.setSize=function(t,n,i){e.setSize(t,n,i)},this.setViewport=function(t,n,i,r){e.setViewport(t,n,i,r)},this.setScissor=function(t,n,i,r){e.setScissor(t,n,i,r)},this.setScissorTest=function(t){e.setScissorTest(t)},this.setRenderTarget=function(t){e.setRenderTarget(t)}},THREE.RenderPass=function(e,t,n,i,r,a){THREE.Pass.call(this),this.scene=e,this.camera=t,this.background=a,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==r?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},THREE.RenderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.RenderPass,render:function(e,t,n,i,r){if(void 0===this.scene.length){var a=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial;var o,s;this.clearColor&&(o=e.getClearColor().getHex(),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:n,this.clear),this.clearColor&&e.setClearColor(o,s),this.scene.overrideMaterial=null,e.autoClear=a}else{var l=this.scene.length;e.clear(!0,!0,!0);var o,s;this.clearColor&&(o=e.getClearColor().getHex(),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth();var a=e.autoClear;e.autoClear=!1;for(var u=0;u<l;u++){var c=this.scene[u];e.render(c,this.camera,this.renderToScreen?null:n,this.clear)}this.clearColor&&e.setClearColor(o,s),this.background&&e.render(this.background,this.camera,this.renderToScreen?null:n,this.clear),c.overrideMaterial=null,e.autoClear=a}}}),THREE.TexturePass=function(e,t){THREE.Pass.call(this),void 0===THREE.CopyShader&&console.error("THREE.TexturePass relies on THREE.CopyShader");var n=THREE.CopyShader;this.map=e,this.opacity=void 0!==t?t:1,this.uniforms=THREE.UniformsUtils.clone(n.uniforms),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,depthTest:!1,depthWrite:!1}),this.needsSwap=!1,this.camera=new THREE.OrthographicCamera((-1),1,1,(-1),0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.TexturePass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.TexturePass,render:function(e,t,n,i,r){var a=e.autoClear;e.autoClear=!1,this.quad.material=this.material,this.uniforms.opacity.value=this.opacity,this.uniforms.tDiffuse.value=this.map,this.material.transparent=this.opacity<1,e.render(this.scene,this.camera,this.renderToScreen?null:n,this.clear),e.autoClear=a}}),THREE.ShaderPass=function(e,t){THREE.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof THREE.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new THREE.OrthographicCamera((-1),1,1,(-1),0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.ShaderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.ShaderPass,render:function(e,t,n,i,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera,null,this.clear):e.render(this.scene,this.camera,t,this.clear)}}),THREE.SSAOPass=function(e,t,n,i){if(void 0===THREE.SSAOShader)return console.warn("THREE.SSAOPass depends on THREE.SSAOShader"),new THREE.ShaderPass;THREE.ShaderPass.call(this,THREE.SSAOShader),this.inited=!1,this.width=void 0!==n?n:512,this.height=void 0!==i?i:256,this.renderToScreen=!1,this.camera2=t,this.scene2=e,this.depthMaterial=new THREE.MeshDepthMaterial,this.depthMaterial.depthWrite=!0,this.depthMaterial.depthTest=!0,this.depthMaterial.depthPacking=THREE.RGBADepthPacking,this.depthMaterial.blending=THREE.NoBlending,this.instanceDepthMaterial=new THREE.MeshDepthMaterial,this.instanceDepthMaterial.depthPacking=THREE.RGBADepthPacking,this.instanceDepthMaterial.blending=THREE.NoBlending,this.instanceDepthMaterial.depthWrite=!0,this.instanceDepthMaterial.depthTest=!0,this.instanceDepthMaterial.defines?this.instanceDepthMaterial.defines.INSTANCE_TRANSFORM="":this.instanceDepthMaterial.defines={INSTANCE_TRANSFORM:""},this.depthRenderTarget=new THREE.WebGLRenderTarget(this.width,this.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter}),this.depthRenderTarget.depthBuffer=!0,this.depthRenderTarget.stencilTest=!0,this.depthRenderTarget.stencilBuffer=!0,this.uniforms.tDepth.value=this.depthRenderTarget.texture,this.uniforms.size.value.set(this.width,this.height),this.uniforms.cameraNear.value=this.camera2.near,this.uniforms.cameraFar.value=this.camera2.far,this.uniforms.radius.value=4,this.uniforms.onlyAO.value=!1,this.uniforms.aoClamp.value=.25,this.uniforms.lumInfluence.value=.7;Object.defineProperties(this,{radius:{get:function(){return this.uniforms.radius.value},set:function(e){this.uniforms.radius.value=e}},onlyAO:{get:function(){return this.uniforms.onlyAO.value},set:function(e){this.uniforms.onlyAO.value=e}},aoClamp:{get:function(){return this.uniforms.aoClamp.value},set:function(e){this.uniforms.aoClamp.value=e}},lumInfluence:{get:function(){return this.uniforms.lumInfluence.value},set:function(e){this.uniforms.lumInfluence.value=e}}})},THREE.SSAOPass.prototype=Object.create(THREE.ShaderPass.prototype),THREE.SSAOPass.prototype.render=function(e,t,n,i,r){if(void 0===this.scene2.length)this.scene2.overrideMaterial=this.depthMaterial,e.render(this.scene2,this.camera2,this.depthRenderTarget,!0),this.scene2.overrideMaterial=null,THREE.ShaderPass.prototype.render.call(this,e,t,n,i,r);else{var a=this.scene2.length;e.clearTarget(this.depthRenderTarget,!0,!0,!0),e.clearTarget(t,!0,!0,!0);for(var o=0;o<a;o++){var s=this.scene2[o];s.isInstancedScenes?s.overrideMaterial=this.instanceDepthMaterial:s.overrideMaterial=this.depthMaterial,e.render(s,this.camera2,this.depthRenderTarget,!1),s.overrideMaterial=null}THREE.ShaderPass.prototype.render.call(this,e,t,n,i,r)}},THREE.SSAOPass.prototype.setScene=function(e){this.scene2=e},THREE.SSAOPass.prototype.setCamera=function(e){this.camera2=e,this.uniforms.cameraNear.value=this.camera2.near,this.uniforms.cameraFar.value=this.camera2.far},THREE.SSAOPass.prototype.setSize=function(e,t){this.width=e,this.height=t,this.uniforms.size.value.set(this.width,this.height),this.depthRenderTarget.setSize(this.width,this.height)},THREE.SAOPass=function(e,t,n,i,r,a){if(THREE.Pass.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.background=a,this.supportsDepthTextureExtension=void 0!==n&&n,this.supportsNormalTexture=void 0!==i&&i,this.oldClearColor=new THREE.Color,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=void 0!==r?new THREE.Vector2(r.x,r.y):new THREE.Vector2(256,256),this.saoRenderTarget=new THREE.WebGLRenderTarget(this.resolution.x,this.resolution.y,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new THREE.WebGLRenderTarget(this.resolution.x,this.resolution.y,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat}),this.depthRenderTarget=this.normalRenderTarget.clone(),this.supportsDepthTextureExtension){var n=new THREE.DepthTexture;n.type=THREE.UnsignedShortType,n.minFilter=THREE.NearestFilter,n.maxFilter=THREE.NearestFilter,this.beautyRenderTarget.depthTexture=n,this.beautyRenderTarget.depthBuffer=!0}this.depthMaterial=new THREE.MeshDepthMaterial,this.depthMaterial.depthPacking=THREE.RGBADepthPacking,this.depthMaterial.blending=THREE.NoBlending,this.instanceDepthMaterial=new THREE.MeshDepthMaterial,this.instanceDepthMaterial.depthPacking=THREE.RGBADepthPacking,this.instanceDepthMaterial.blending=THREE.NoBlending,this.instanceDepthMaterial.depthWrite=!0,this.instanceDepthMaterial.depthTest=!0,this.instanceDepthMaterial.defines?this.instanceDepthMaterial.defines.INSTANCE_TRANSFORM="":this.instanceDepthMaterial.defines={INSTANCE_TRANSFORM:""},this.normalMaterial=new THREE.MeshNormalMaterial,this.normalMaterial.blending=THREE.NoBlending,void 0===THREE.SAOShader&&console.error("THREE.SAOPass relies on THREE.SAOShader"),this.saoMaterial=new THREE.ShaderMaterial(THREE.SAOShader),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.extensions.drawBuffers=!0,this.saoMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.getInverse(this.camera.projectionMatrix),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=THREE.NoBlending,void 0===THREE.DepthLimitedBlurShader&&console.error("THREE.SAOPass relies on THREE.DepthLimitedBlurShader"),this.vBlurMaterial=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(THREE.DepthLimitedBlurShader.uniforms),defines:THREE.DepthLimitedBlurShader.defines,vertexShader:THREE.DepthLimitedBlurShader.vertexShader,fragmentShader:THREE.DepthLimitedBlurShader.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=THREE.NoBlending,this.hBlurMaterial=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(THREE.DepthLimitedBlurShader.uniforms),defines:THREE.DepthLimitedBlurShader.defines,vertexShader:THREE.DepthLimitedBlurShader.vertexShader,fragmentShader:THREE.DepthLimitedBlurShader.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=THREE.NoBlending,void 0===THREE.CopyShader&&console.error("THREE.SAOPass relies on THREE.CopyShader"),this.materialCopy=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(THREE.CopyShader.uniforms),vertexShader:THREE.CopyShader.vertexShader,fragmentShader:THREE.CopyShader.fragmentShader,blending:THREE.NoBlending}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=THREE.CustomBlending,this.materialCopy.blendSrc=THREE.DstColorFactor,this.materialCopy.blendDst=THREE.ZeroFactor,this.materialCopy.blendEquation=THREE.AddEquation,this.materialCopy.blendSrcAlpha=THREE.DstAlphaFactor,this.materialCopy.blendDstAlpha=THREE.ZeroFactor,this.materialCopy.blendEquationAlpha=THREE.AddEquation,void 0===THREE.CopyShader&&console.error("THREE.SAOPass relies on THREE.UnpackDepthRGBAShader"),this.depthCopy=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(THREE.UnpackDepthRGBAShader.uniforms),vertexShader:THREE.UnpackDepthRGBAShader.vertexShader,fragmentShader:THREE.UnpackDepthRGBAShader.fragmentShader,blending:THREE.NoBlending}),this.quadCamera=new THREE.OrthographicCamera((-1),1,1,(-1),0,1),
this.quadScene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneGeometry(2,2),null),this.quadScene.add(this.quad)},THREE.SAOPass.OUTPUT={Beauty:1,Default:0,SAO:2,Depth:3,Normal:4},THREE.SAOPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.SAOPass,render:function(e,t,n,i,r){if(this.renderToScreen&&(this.materialCopy.blending=THREE.NoBlending,this.materialCopy.uniforms.tDiffuse.value=n.texture,this.materialCopy.needsUpdate=!0,this.renderPass(e,this.materialCopy,null)),1!==this.params.output){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var a=e.autoClear;e.autoClear=!1,e.clearTarget(this.depthRenderTarget),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;var o=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);if(this.vBlurMaterial.uniforms.depthCutoff.value=o,this.hBlurMaterial.uniforms.depthCutoff.value=o,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),this.prevStdDev===this.params.saoBlurStdDev&&this.prevNumSamples===this.params.saoBlurRadius||(THREE.BlurShaderUtils.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new THREE.Vector2(0,1)),THREE.BlurShaderUtils.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new THREE.Vector2(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),void 0===this.scene.length)e.setClearColor(0),e.render(this.scene,this.camera,this.beautyRenderTarget,!0);else{e.clearTarget(n,!0,!0,!0),e.setClearColor(0);for(var s=this.scene.length,l=0;l<s;l++){var u=this.scene[l];e.render(u,this.camera,this.beautyRenderTarget,!1)}this.background&&e.render(this.background,this.camera,this.beautyRenderTarget,!1)}this.supportsDepthTextureExtension||this.renderDepthOverride(e,this.depthMaterial,this.depthRenderTarget,16777215,1),this.supportsNormalTexture&&this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(e,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(e,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(e,this.hBlurMaterial,this.saoRenderTarget,16777215,1));var c=this.materialCopy;3===this.params.output?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,c=this.depthCopy):4===this.params.output?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),0===this.params.output?c.blending=THREE.CustomBlending:c.blending=THREE.NoBlending,this.renderPass(e,c,this.renderToScreen?null:n),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=a}},renderPass:function(e,t,n,i,r){var a=e.getClearColor(),o=e.getClearAlpha(),s=e.autoClear;e.autoClear=!1;var l=void 0!==i&&null!==i;l&&(e.setClearColor(i),e.setClearAlpha(r||0)),this.quad.material=t,e.render(this.quadScene,this.quadCamera,n,l),e.autoClear=s,e.setClearColor(a),e.setClearAlpha(o)},renderOverride:function(e,t,n,i,r){var a=e.getClearColor(),o=e.getClearAlpha(),s=e.autoClear;e.autoClear=!1,i=t.clearColor||i,r=t.clearAlpha||r;var l=void 0!==i&&null!==i;if(l&&(e.setClearColor(i),e.setClearAlpha(r||0)),void 0===this.scene.length)this.scene.overrideMaterial=t,e.render(this.scene,this.camera,n,l),this.scene.overrideMaterial=null;else{var u=this.scene.length;e.clearTarget(n,!0,!0,!0);for(var c=0;c<u;c++){var h=this.scene[c];h.overrideMaterial=t,e.render(h,this.camera,n,!1),h.overrideMaterial=null}}e.autoClear=s,e.setClearColor(a),e.setClearAlpha(o)},renderDepthOverride:function(e,t,n,i,r){var a=e.getClearColor(),o=e.getClearAlpha(),s=e.autoClear;e.autoClear=!1,i=t.clearColor||i,r=t.clearAlpha||r;var l=void 0!==i&&null!==i;if(l&&(e.setClearColor(i),e.setClearAlpha(r||0)),void 0===this.scene.length)this.scene.overrideMaterial=t,e.render(this.scene,this.camera,n,l),this.scene.overrideMaterial=null;else{var u=this.scene.length;e.clearTarget(n,!0,!0,!0);for(var c=0;c<u;c++){var h=this.scene[c];h.isInstancedScenes?(h.overrideMaterial=this.instanceDepthMaterial,e.render(h,this.camera,n,!1),h.overrideMaterial=null):(h.overrideMaterial=t,e.render(h,this.camera,n,!1),h.overrideMaterial=null)}}e.autoClear=s,e.setClearColor(a),e.setClearAlpha(o)},setSize:function(e,t){this.beautyRenderTarget.setSize(e,t),this.saoRenderTarget.setSize(e,t),this.blurIntermediateRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.depthRenderTarget.setSize(e,t),this.saoMaterial.uniforms.size.value.set(e,t),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.getInverse(this.camera.projectionMatrix),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(e,t),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(e,t),this.hBlurMaterial.needsUpdate=!0}}),THREE.SavePass=function(e){THREE.Pass.call(this),void 0===THREE.CopyShader&&console.error("THREE.SavePass relies on THREE.CopyShader");var t=THREE.CopyShader;this.textureID="tDiffuse",this.uniforms=THREE.UniformsUtils.clone(t.uniforms),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.renderTarget=e,void 0===this.renderTarget&&(this.renderTarget=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1}),this.renderTarget.texture.name="SavePass.rt"),this.needsSwap=!1,this.camera=new THREE.OrthographicCamera((-1),1,1,(-1),0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.SavePass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.SavePass,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.quad.material=this.material,e.render(this.scene,this.camera,this.renderTarget,this.clear)}}),THREE.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},THREE.SSAOShader={uniforms:{tDiffuse:{value:null},tDepth:{value:null},size:{value:new THREE.Vector2(512,512)},cameraNear:{value:1},cameraFar:{value:100},radius:{value:32},onlyAO:{value:0},aoClamp:{value:.25},lumInfluence:{value:.7}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cameraNear;","uniform float cameraFar;","#ifdef USE_LOGDEPTHBUF","uniform float logDepthBufFC;","#endif","uniform float radius;","uniform bool onlyAO;","uniform vec2 size;","uniform float aoClamp;","uniform float lumInfluence;","uniform sampler2D tDiffuse;","uniform sampler2D tDepth;","varying vec2 vUv;","#define DL 2.399963229728653","#define EULER 2.718281828459045","const int samples = 128;","const bool useNoise = true;","const float noiseAmount = 0.00005;","const float diffArea = 0.2;","const float gDisplace = 0.4;","#include <packing>","vec2 rand( const vec2 coord ) {","vec2 noise;","if ( useNoise ) {","float nx = dot ( coord, vec2( 22.9898, 148.233 ) );","float ny = dot ( coord, vec2( 22.9898, 148.233 ) * 2.0 );","noise = clamp( fract ( 437.5453 * sin( vec2( nx, ny ) ) ), 0.0, 1.0 );","} else {","float ff = fract( 1.0 - coord.s * ( size.x / 2.0 ) );","float gg = fract( coord.t * ( size.y / 2.0 ) );","noise = vec2( 0.3, 0.7 ) * vec2( ff ) + vec2( 0.7, 0.3 ) * gg;","}","return ( noise * 2.0  - 1.0 ) * noiseAmount;","}","float readDepth( const in vec2 coord ) {","float cameraFarPlusNear = cameraFar + cameraNear;","float cameraFarMinusNear = cameraFar - cameraNear;","float cameraCoef = 2.0 * cameraNear;","#ifdef USE_LOGDEPTHBUF","float logz = unpackRGBAToDepth( texture2D( tDepth, coord ) );","float w = pow(2.0, (logz / logDepthBufFC)) - 1.0;","float z = (logz / w) + 1.0;","#else","float z = unpackRGBAToDepth( texture2D( tDepth, coord ) );","#endif","return cameraCoef / ( cameraFarPlusNear - z * cameraFarMinusNear );","}","float compareDepths( const in float depth1, const in float depth2, inout int far ) {","float garea = 8.0;","float diff = ( depth1 - depth2 ) * 100.0;","if ( diff < gDisplace ) {","garea = diffArea;","} else {","far = 1;","}","float dd = diff - gDisplace;","float gauss = pow( EULER, -2.0 * ( dd * dd ) / ( garea * garea ) );","return gauss;","}","float calcAO( float depth, float dw, float dh ) {","vec2 vv = vec2( dw, dh );","vec2 coord1 = vUv + radius * vv;","vec2 coord2 = vUv - radius * vv;","float temp1 = 0.0;","float temp2 = 0.0;","int far = 0;","temp1 = compareDepths( depth, readDepth( coord1 ), far );","if ( far > 0 ) {","temp2 = compareDepths( readDepth( coord2 ), depth, far );","temp1 += ( 1.0 - temp1 ) * temp2;","}","return temp1;","}","void main() {","vec2 noise = rand( vUv );","float depth = readDepth( vUv );","float tt = clamp( depth, aoClamp, 1.0 );","float w = ( 1.0 / size.x ) / tt + ( noise.x * ( 1.0 - noise.x ) );","float h = ( 1.0 / size.y ) / tt + ( noise.y * ( 1.0 - noise.y ) );","float ao = 0.0;","float dz = 1.0 / float( samples );","float l = 0.0;","float z = 1.0 - dz / 2.0;","for ( int i = 0; i <= samples; i ++ ) {","float r = sqrt( 1.0 - z );","float pw = cos( l ) * r;","float ph = sin( l ) * r;","ao += calcAO( depth, pw * w, ph * h );","z = z - dz;","l = l + DL;","}","ao /= float( samples );","ao = 1.0 - ao;","vec3 color = texture2D( tDiffuse, vUv ).rgb;","vec3 lumcoeff = vec3( 0.299, 0.587, 0.114 );","float lum = dot( color.rgb, lumcoeff );","vec3 luminance = vec3( lum );","vec3 final = vec3( color * mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );","if ( onlyAO ) {","final = vec3( mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );","}","gl_FragColor = vec4( final, 1.0 );","}"].join("\n")},THREE.SAOShader={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{type:"t",value:null},tDiffuse:{type:"t",value:null},tNormal:{type:"t",value:null},size:{type:"v2",value:new THREE.Vector2(512,512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},cameraProjectionMatrix:{type:"m4",value:new THREE.Matrix4},cameraInverseProjectionMatrix:{type:"m4",value:new THREE.Matrix4},scale:{type:"f",value:1},intensity:{type:"f",value:.1},bias:{type:"f",value:.5},minResolution:{type:"f",value:0},kernelRadius:{type:"f",value:100},randomSeed:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","#if DIFFUSE_TEXTURE == 1","uniform sampler2D tDiffuse;","#endif","uniform sampler2D tDepth;","#if NORMAL_TEXTURE == 1","uniform sampler2D tNormal;","#endif","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float scale;","uniform float intensity;","uniform float bias;","uniform float kernelRadius;","uniform float minResolution;","uniform vec2 size;","uniform float randomSeed;","// RGBA depth","#include <packing>","vec4 getDefaultColor( const in vec2 screenPosition ) {","\t#if DIFFUSE_TEXTURE == 1","\treturn texture2D( tDiffuse, vUv );","\t#else","\treturn vec4( 1.0 );","\t#endif","}","float getDepth( const in vec2 screenPosition ) {","\t#if DEPTH_PACKING == 1","\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","\t#else","\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","float getViewZ( const in float depth ) {","\t#if PERSPECTIVE_CAMERA == 1","\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","\t#else","\treturn orthoDepthToViewZ( depth, cameraNear, cameraFar );","\t#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","\tclipPosition *= clipW; // unprojection.","\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {","\t#if NORMAL_TEXTURE == 1","\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","\t#else","\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );","\t#endif","}","float scaleDividedByCameraFar;","float minResolutionMultipliedByCameraFar;","float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {","\tvec3 viewDelta = sampleViewPosition - centerViewPosition;","\tfloat viewDistance = length( viewDelta );","\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;","\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );","}","// moving costly divides into consts","const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );","const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );","float getAmbientOcclusion( const in vec3 centerViewPosition ) {","\t// precompute some variables require in getOcclusion.","\tscaleDividedByCameraFar = scale / cameraFar;","\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;","\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );","\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/","\tfloat angle = rand( vUv + randomSeed ) * PI2;","\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;","\tvec2 radiusStep = radius;","\tfloat occlusionSum = 0.0;","\tfloat weightSum = 0.0;","\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {","\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;","\t\tradius += radiusStep;","\t\tangle += ANGLE_STEP;","\t\tfloat sampleDepth = getDepth( sampleUv );","\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {","\t\t\tcontinue;","\t\t}","\t\tfloat sampleViewZ = getViewZ( sampleDepth );","\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );","\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );","\t\tweightSum += 1.0;","\t}","\tif( weightSum == 0.0 ) discard;","\treturn occlusionSum * ( intensity / weightSum );","}","void main() {","\tfloat centerDepth = getDepth( vUv );","\tif( centerDepth >= ( 1.0 - EPSILON ) ) {","\t\tdiscard;","\t}","\tfloat centerViewZ = getViewZ( centerDepth );","\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );","\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );","\tgl_FragColor = getDefaultColor( vUv );","\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;","}"].join("\n")},THREE.FXAAShader={uniforms:{tDiffuse:{value:null},resolution:{value:new THREE.Vector2(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 29","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 2 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 29","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 0.5","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.0","    #define FXAA_QUALITY_P6 1.0","    #define FXAA_QUALITY_P7 1.0","    #define FXAA_QUALITY_P8 1.0","    #define FXAA_QUALITY_P9 1.0","    #define FXAA_QUALITY_P10 1.0","    #define FXAA_QUALITY_P11 1.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) {  return sqrt(dot(rgba.rgb, vec3(0.299, 0.587, 0.114))); }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immedates.","    // Immedates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    1.0,","    0.125,","    0.0312,","    8.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")
},THREE.VignetteShader={uniforms:{tDiffuse:{value:null},offset:{value:1},darkness:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float offset;","uniform float darkness;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );","gl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );","}"].join("\n")},THREE.DepthLimitedBlurShader={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{type:"t",value:null},size:{type:"v2",value:new THREE.Vector2(512,512)},sampleUvOffsets:{type:"v2v",value:[new THREE.Vector2(0,0)]},sampleWeights:{type:"1fv",value:[1]},tDepth:{type:"t",value:null},cameraNear:{type:"f",value:10},cameraFar:{type:"f",value:1e3},depthCutoff:{type:"f",value:10}},vertexShader:["#include <common>","uniform vec2 size;","varying vec2 vUv;","varying vec2 vInvSize;","void main() {","\tvUv = uv;","\tvInvSize = 1.0 / size;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#include <packing>","uniform sampler2D tDiffuse;","uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","uniform float depthCutoff;","uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];","uniform float sampleWeights[ KERNEL_RADIUS + 1 ];","varying vec2 vUv;","varying vec2 vInvSize;","float getDepth( const in vec2 screenPosition ) {","\t#if DEPTH_PACKING == 1","\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","\t#else","\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","float getViewZ( const in float depth ) {","\t#if PERSPECTIVE_CAMERA == 1","\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","\t#else","\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );","\t#endif","}","void main() {","\tfloat depth = getDepth( vUv );","\tif( depth >= ( 1.0 - EPSILON ) ) {","\t\tdiscard;","\t}","\tfloat centerViewZ = -getViewZ( depth );","\tbool rBreak = false, lBreak = false;","\tfloat weightSum = sampleWeights[0];","\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;","\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {","\t\tfloat sampleWeight = sampleWeights[i];","\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;","\t\tvec2 sampleUv = vUv + sampleUvOffset;","\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );","\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;","\t\tif( ! rBreak ) {","\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","\t\t\tweightSum += sampleWeight;","\t\t}","\t\tsampleUv = vUv - sampleUvOffset;","\t\tviewZ = -getViewZ( getDepth( sampleUv ) );","\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;","\t\tif( ! lBreak ) {","\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","\t\t\tweightSum += sampleWeight;","\t\t}","\t}","\tgl_FragColor = diffuseSum / weightSum;","}"].join("\n")},THREE.BlurShaderUtils={createSampleWeights:function(e,t){for(var n=function(e,t){return Math.exp(-(e*e)/(2*(t*t)))/(Math.sqrt(2*Math.PI)*t)},i=[],r=0;r<=e;r++)i.push(n(r,t));return i},createSampleOffsets:function(e,t){for(var n=[],i=0;i<=e;i++)n.push(t.clone().multiplyScalar(i));return n},configure:function(e,t,n,i){e.defines.KERNEL_RADIUS=t,e.uniforms.sampleUvOffsets.value=THREE.BlurShaderUtils.createSampleOffsets(t,i),e.uniforms.sampleWeights.value=THREE.BlurShaderUtils.createSampleWeights(t,n),e.needsUpdate=!0}},THREE.UnpackDepthRGBAShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","#include <packing>","void main() {","float depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );","gl_FragColor = opacity * vec4( vec3( depth ), 1.0 );","}"].join("\n")},THREE.TriangleBlurShader={uniforms:{texture:{value:null},delta:{value:new THREE.Vector2(1,1)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#define ITERATIONS 10.0","uniform sampler2D texture;","uniform vec2 delta;","varying vec2 vUv;","void main() {","vec4 color = vec4( 0.0 );","float total = 0.0;","float offset = rand( vUv );","for ( float t = -ITERATIONS; t <= ITERATIONS; t ++ ) {","float percent = ( t + offset - 0.5 ) / ITERATIONS;","float weight = 1.0 - abs( percent );","color += texture2D( texture, vUv + delta * percent ) * weight;","total += weight;","}","gl_FragColor = color / total;","}"].join("\n")},THREE.HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float h;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")},THREE.VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")},function(){"use strict";function e(){this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this.geometry=new a.BufferGeometry,this.widthCallback=null}function t(e,t,n,i,r){var a;if(e=e.subarray||e.slice?e:e.buffer,n=n.subarray||n.slice?n:n.buffer,e=t?e.subarray?e.subarray(t,r&&t+r):e.slice(t,r&&t+r):e,n.set)n.set(e,i);else for(a=0;a<e.length;a++)n[a+i]=e[a];return n}function n(e){function t(e,t){return void 0===e?t:e}var n=["precision highp float;","","attribute vec3 position;","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute vec2 uv;","attribute float counters;","","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float near;","uniform float far;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","\t vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","\t float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","\t float pixelWidth = finalPosition.w * pixelWidthRatio;","    float w = 1.8 * pixelWidth * lineWidth * width;","","    if( sizeAttenuation == 1. ) {","        w = 1.8 * lineWidth * width;","    }","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec2 normal = vec2( -dir.y, dir.x );","    normal.x /= aspect;","    normal *= .5 * w;","","    vec4 offset = vec4( normal * side, 0.0, 1.0 );","    finalPosition.xy += offset.xy;","","    gl_Position = finalPosition;","","}"],i=["#extension GL_OES_standard_derivatives : enable","precision mediump float;","","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","}"];a.Material.call(this),e=e||{},this.lineWidth=t(e.lineWidth,1),this.map=t(e.map,null),this.useMap=t(e.useMap,0),this.alphaMap=t(e.alphaMap,null),this.useAlphaMap=t(e.useAlphaMap,0),this.color=t(e.color,new a.Color(16777215)),this.opacity=t(e.opacity,1),this.resolution=t(e.resolution,new a.Vector2(1,1)),this.sizeAttenuation=t(e.sizeAttenuation,1),this.near=t(e.near,1),this.far=t(e.far,1),this.dashArray=t(e.dashArray,0),this.dashOffset=t(e.dashOffset,0),this.dashRatio=t(e.dashRatio,.5),this.useDash=0!==this.dashArray?1:0,this.visibility=t(e.visibility,1),this.alphaTest=t(e.alphaTest,0),this.repeat=t(e.repeat,new a.Vector2(1,1));var r=new a.RawShaderMaterial({uniforms:{lineWidth:{type:"f",value:this.lineWidth},map:{type:"t",value:this.map},useMap:{type:"f",value:this.useMap},alphaMap:{type:"t",value:this.alphaMap},useAlphaMap:{type:"f",value:this.useAlphaMap},color:{type:"c",value:this.color},opacity:{type:"f",value:this.opacity},resolution:{type:"v2",value:this.resolution},sizeAttenuation:{type:"f",value:this.sizeAttenuation},near:{type:"f",value:this.near},far:{type:"f",value:this.far},dashArray:{type:"f",value:this.dashArray},dashOffset:{type:"f",value:this.dashOffset},dashRatio:{type:"f",value:this.dashRatio},useDash:{type:"f",value:this.useDash},visibility:{type:"f",value:this.visibility},alphaTest:{type:"f",value:this.alphaTest},repeat:{type:"v2",value:this.repeat}},vertexShader:n.join("\r\n"),fragmentShader:i.join("\r\n")});return delete e.lineWidth,delete e.map,delete e.useMap,delete e.alphaMap,delete e.useAlphaMap,delete e.color,delete e.opacity,delete e.resolution,delete e.sizeAttenuation,delete e.near,delete e.far,delete e.dashArray,delete e.dashOffset,delete e.dashRatio,delete e.visibility,delete e.alphaTest,delete e.repeat,r.type="MeshLineMaterial",r.setValues(e),r}var i=this,r="undefined"!=typeof require,a=i.THREE||r&&require("three");if(!a)throw new Error("MeshLine requires three.js");e.prototype.setGeometry=function(e,t){if(this.widthCallback=t,this.positions=[],this.counters=[],e instanceof a.Geometry)for(var n=0;n<e.vertices.length;n++){var i=e.vertices[n],t=n/e.vertices.length;this.positions.push(i.x,i.y,i.z),this.positions.push(i.x,i.y,i.z),this.counters.push(t),this.counters.push(t)}if(e instanceof a.BufferGeometry,e instanceof Float32Array||e instanceof Array)for(var n=0;n<e.length;n+=3){var t=n/e.length;this.positions.push(e[n],e[n+1],e[n+2]),this.positions.push(e[n],e[n+1],e[n+2]),this.counters.push(t),this.counters.push(t)}this.process()},e.prototype.compareV3=function(e,t){var n=6*e,i=6*t;return this.positions[n]===this.positions[i]&&this.positions[n+1]===this.positions[i+1]&&this.positions[n+2]===this.positions[i+2]},e.prototype.copyV3=function(e){var t=6*e;return[this.positions[t],this.positions[t+1],this.positions[t+2]]},e.prototype.process=function(){var e=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];for(var t=0;t<e;t++)this.side.push(1),this.side.push(-1);for(var n,t=0;t<e;t++)n=this.widthCallback?this.widthCallback(t/(e-1)):1,this.width.push(n),this.width.push(n);for(var t=0;t<e;t++)this.uvs.push(t/(e-1),0),this.uvs.push(t/(e-1),1);var i;i=this.compareV3(0,e-1)?this.copyV3(e-2):this.copyV3(0),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(var t=0;t<e-1;t++)i=this.copyV3(t),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(var t=1;t<e;t++)i=this.copyV3(t),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]);i=this.compareV3(e-1,0)?this.copyV3(1):this.copyV3(e-1),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]);for(var t=0;t<e-1;t++){var r=2*t;this.indices_array.push(r,r+1,r+2),this.indices_array.push(r+2,r+1,r+3)}this.attributes?(this.attributes.position.copyArray(new Float32Array(this.positions)),this.attributes.position.needsUpdate=!0,this.attributes.previous.copyArray(new Float32Array(this.previous)),this.attributes.previous.needsUpdate=!0,this.attributes.next.copyArray(new Float32Array(this.next)),this.attributes.next.needsUpdate=!0,this.attributes.side.copyArray(new Float32Array(this.side)),this.attributes.side.needsUpdate=!0,this.attributes.width.copyArray(new Float32Array(this.width)),this.attributes.width.needsUpdate=!0,this.attributes.uv.copyArray(new Float32Array(this.uvs)),this.attributes.uv.needsUpdate=!0,this.attributes.index.copyArray(new Uint16Array(this.indices_array)),this.attributes.index.needsUpdate=!0):this.attributes={position:new a.BufferAttribute(new Float32Array(this.positions),3),previous:new a.BufferAttribute(new Float32Array(this.previous),3),next:new a.BufferAttribute(new Float32Array(this.next),3),side:new a.BufferAttribute(new Float32Array(this.side),1),width:new a.BufferAttribute(new Float32Array(this.width),1),uv:new a.BufferAttribute(new Float32Array(this.uvs),2),index:new a.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new a.BufferAttribute(new Float32Array(this.counters),1)},this.geometry.addAttribute("position",this.attributes.position),this.geometry.addAttribute("previous",this.attributes.previous),this.geometry.addAttribute("next",this.attributes.next),this.geometry.addAttribute("side",this.attributes.side),this.geometry.addAttribute("width",this.attributes.width),this.geometry.addAttribute("uv",this.attributes.uv),this.geometry.addAttribute("counters",this.attributes.counters),this.geometry.setIndex(this.attributes.index)},e.prototype.advance=function(e){var n=this.attributes.position.array,i=this.attributes.previous.array,r=this.attributes.next.array,a=n.length;t(n,0,i,0,a),t(n,6,n,0,a-6),n[a-6]=e.x,n[a-5]=e.y,n[a-4]=e.z,n[a-3]=e.x,n[a-2]=e.y,n[a-1]=e.z,t(n,6,r,0,a-6),r[a-6]=e.x,r[a-5]=e.y,r[a-4]=e.z,r[a-3]=e.x,r[a-2]=e.y,r[a-1]=e.z,this.attributes.position.needsUpdate=!0,this.attributes.previous.needsUpdate=!0,this.attributes.next.needsUpdate=!0},n.prototype=Object.create(a.Material.prototype),n.prototype.constructor=n,n.prototype.copy=function(e){return a.Material.prototype.copy.call(this,e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.near=e.near,this.far=e.far,this.dashArray.copy(e.dashArray),this.dashOffset.copy(e.dashOffset),this.dashRatio.copy(e.dashRatio),this.useDash=e.useDash,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports={MeshLine:e,MeshLineMaterial:n}),exports.MeshLine=e,exports.MeshLineMaterial=n):(i.MeshLine=e,i.MeshLineMaterial=n)}.call(this);var paper=function(e,t){e=e||require("./node/self.js");var n=e.window,i=e.document,r=new function(){function e(e,t,r,a,o){function u(i,u){u=u||(u=s(t,i))&&(u.get?u:u.value),"string"==typeof u&&"#"===u[0]&&(u=e[u.substring(1)]||u);var h,f="function"==typeof u,d=u,p=o||f&&!u.base?u&&u.get?i in e:e[i]:null;o&&p||(f&&p&&(u.base=p),f&&a!==!1&&(h=i.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(c[h[3].toLowerCase()+h[4]]=h[2]),d&&!f&&d.get&&"function"==typeof d.get&&n.isPlainObject(d)||(d={value:d,writable:!0}),(s(e,i)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=r?r:!h),l(e,i,d))}var c={};if(t){for(var h in t)t.hasOwnProperty(h)&&!i.test(h)&&u(h);for(var h in c){var f=c[h],d=e["set"+f],p=e["get"+f]||d&&e["is"+f];!p||a!==!0&&0!==p.length||u(h,{get:p,set:d})}}return e}function n(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&h(this,n)}return this}var i=/^(statics|enumerable|beans|preserve)$/,r=[],a=r.slice,o=Object.create,s=Object.getOwnPropertyDescriptor,l=Object.defineProperty,u=r.forEach||function(e,t){for(var n=0,i=this.length;n<i;n++)e.call(t,this[n],n,this)},c=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)},h=Object.assign||function(e){for(var t=1,n=arguments.length;t<n;t++){var i=arguments[t];for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e},f=function(e,t,n){if(e){var i=s(e,"length");(i&&"number"==typeof i.value?u:c).call(e,t,n=n||e)}return n};return e(n,{inject:function(t){if(t){var n=t.statics===!0?t:t.statics,i=t.beans,r=t.preserve;n!==t&&e(this.prototype,t,t.enumerable,i,r),e(this,n,null,i,r)}for(var a=1,o=arguments.length;a<o;a++)this.inject(arguments[a]);return this},extend:function(){for(var t,n,i,r=this,a=0,s=arguments.length;a<s&&(!t||!n);a++)i=arguments[a],t=t||i.initialize,n=n||i.prototype;return t=t||function(){r.apply(this,arguments)},n=t.prototype=n||o(this.prototype),l(n,"constructor",{value:t,writable:!0,configurable:!0}),e(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=r,t}}).inject({enumerable:!1,initialize:n,set:n,inject:function(){for(var t=0,n=arguments.length;t<n;t++){var i=arguments[t];i&&e(this,i,i.enumerable,i.beans,i.preserve)}return this},extend:function(){var e=o(this);return e.inject.apply(e,arguments)},each:function(e,t){return f(this,e,t)},clone:function(){return new this.constructor(this)},statics:{set:h,each:f,create:o,define:l,describe:s,clone:function(e){return h(new e.constructor,e)},isPlainObject:function(e){var t=null!=e&&e.constructor;return t&&(t===Object||t===n||"Object"===t.name)},pick:function(e,n){return e!==t?e:n},slice:function(e,t,n){return a.call(e,t,n)}}})};"undefined"!=typeof module&&(module.exports=r),r.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+r.each(this,function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+("number"===n?l.instance.number(e):"string"===n?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return r.importJSON(e,this)},exportJSON:function(e){return r.exportJSON(this,e)},toJSON:function(){return r.serialize(this)},set:function(e,t){return e&&r.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!r.exports[n]&&(r.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)&&Array.isArray(t)){var n=e.length;if(n!==t.length)return!1;for(;n--;)if(!r.equals(e[n],t[n]))return!1}else{var i=Object.keys(e),n=i.length;if(n!==Object.keys(t).length)return!1;for(;n--;){var a=i[n];if(!t.hasOwnProperty(a)||!r.equals(e[a],t[a]))return!1}}return!0}return!1},read:function(e,n,i,a){if(this===r){var o=this.peek(e,n);return e.__index++,o}var s=this.prototype,l=s._readIndex,u=n||l&&e.__index||0,c=e.length,h=e[u];if(a=a||c-u,h instanceof this||i&&i.readNull&&null==h&&a<=1)return l&&(e.__index=u+1),h&&i&&i.clone?h.clone():h;if(h=r.create(s),l&&(h.__read=!0),h=h.initialize.apply(h,u>0||u+a<c?r.slice(e,u,u+a):e)||h,l){e.__index=u+h.__read;var f=h.__filtered;f&&(e.__filtered=f,h.__filtered=t),h.__read=t}return h},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,i){for(var r,a=[],o=t||0,s=i?o+i:e.length,l=o;l<s;l++)a.push(Array.isArray(r=e[l])?this.read(r,0,n):this.read(e,l,n,1));return a},readNamed:function(e,n,i,a,o){var s=this.getNamed(e,n),l=s!==t;if(l){var u=e.__filtered;u||(u=e.__filtered=r.create(e[0]),u.__unfiltered=e[0]),u[n]=t}var c=l?[s]:e,h=this.read(c,i,a,o);return h},getNamed:function(e,n){var i=e[0];if(e._hasObject===t&&(e._hasObject=1===e.length&&r.isPlainObject(i)),e._hasObject)return n?i[n]:e.__filtered||i},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,n,i,r){function a(r){if(!(i&&r in i||o&&r in o)){var a=n[r];a!==t&&(e[r]=a)}}var o;if(r){for(var s,l={},u=0,c=r.length;u<c;u++)(s=r[u])in n&&(a(s),l[s]=!0);o=l}return Object.keys(n.__unfiltered||n).forEach(a),e},isPlainValue:function(e,t){return r.isPlainObject(e)||Array.isArray(e)||t&&"string"==typeof e},serialize:function(e,t,n,i){t=t||{};var a,o=!i;if(o&&(t.formatter=new l(t.precision),i={length:0,definitions:{},references:{},add:function(e,t){var n="#"+e._id,i=this.references[n];if(!i){this.length++;var r=t.call(e),a=e._class;a&&r[0]!==a&&r.unshift(a),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),e&&e._serialize){a=e._serialize(t,i);var s=e._class;!s||e._compactSerialize||!o&&n||a[0]===s||a.unshift(s)}else if(Array.isArray(e)){a=[];for(var u=0,c=e.length;u<c;u++)a[u]=r.serialize(e[u],t,n,i)}else if(r.isPlainObject(e)){a={};for(var h=Object.keys(e),u=0,c=h.length;u<c;u++){var f=h[u];a[f]=r.serialize(e[f],t,n,i)}}else a="number"==typeof e?t.formatter.number(e,t.precision):e;return o&&i.length>0?[["dictionary",i.definitions],a]:a},deserialize:function(e,t,n,i,a){var o=e,s=!n,l=s&&e&&e.length&&"dictionary"===e[0][0];if(n=n||{},Array.isArray(e)){var u=e[0],c="dictionary"===u;if(1==e.length&&/^#/.test(u))return n.dictionary[u];u=r.exports[u],o=[];for(var h=u?1:0,f=e.length;h<f;h++)o.push(r.deserialize(e[h],t,n,c,l));if(u){var d=o;t?o=t(u,d,s||a):(o=r.create(u.prototype),u.apply(o,d))}}else if(r.isPlainObject(e)){o={},i&&(n.dictionary=o);for(var p in e)o[p]=r.deserialize(e[p],t,n)}return l?o[1]:o},exportJSON:function(e,t){var n=r.serialize(e,t);return t&&0==t.asString?n:JSON.stringify(n)},importJSON:function(e,t){return r.deserialize("string"==typeof e?JSON.parse(e):e,function(e,n,i){var a=i&&t&&t.constructor===e,o=a?t:r.create(e.prototype);if(1===n.length&&o instanceof b&&(a||!(o instanceof x))){var s=n[0];r.isPlainObject(s)&&(s.insert=!1)}return(a?o.set:e).apply(o,n),a&&(t=null),o})},splice:function(e,n,i,r){var a=n&&n.length,o=i===t;i=o?e.length:i,i>e.length&&(i=e.length);for(var s=0;s<a;s++)n[s]._index=i+s;if(o)return e.push.apply(e,n),[];var l=[i,r];n&&l.push.apply(l,n);for(var u=e.splice.apply(e,l),s=0,c=u.length;s<c;s++)u[s]._index=t;for(var s=i+a,c=e.length;s<c;s++)e[s]._index=s;return u},capitalize:function(e){return e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var a={on:function(e,t){if("string"!=typeof e)r.each(e,function(e,t){this.on(t,e)},this);else{var n=this._eventTypes,i=n&&n[e],a=this._callbacks=this._callbacks||{};a=a[e]=a[e]||[],a.indexOf(t)===-1&&(a.push(t),i&&i.install&&1===a.length&&i.install.call(this,e))}return this},off:function(e,t){if("string"!=typeof e)return void r.each(e,function(e,t){this.off(t,e)},this);var n,i=this._eventTypes,a=i&&i[e],o=this._callbacks&&this._callbacks[e];return o&&(!t||(n=o.indexOf(t))!==-1&&1===o.length?(a&&a.uninstall&&a.uninstall.call(this,e),delete this._callbacks[e]):n!==-1&&o.splice(n,1)),this},once:function(e,t){return this.on(e,function(){t.apply(this,arguments),this.off(e,t)})},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var i=r.slice(arguments,1),a=t&&t.target&&!t.currentTarget;n=n.slice(),a&&(t.currentTarget=this);for(var o=0,s=n.length;o<s;o++)if(0==n[o].apply(this,i)){t&&t.stop&&t.stop();break}return a&&delete t.currentTarget,!0},responds:function(e){return!(!this._callbacks||!this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,i=e?"install":"uninstall";if(t)for(var r in n)if(n[r].length>0){var a=t[r],o=a&&a[i];o&&o.call(this,r)}},statics:{inject:function e(t){var n=t._events;if(n){var i={};r.each(n,function(e,n){var a="string"==typeof e,o=a?e:n,s=r.capitalize(o),l=o.substring(2).toLowerCase();i[l]=a?{}:e,o="_"+o,t["get"+s]=function(){return this[o]},t["set"+s]=function(e){var t=this[o];t&&this.off(l,t),e&&this.on(l,e),this[o]=e}}),t._eventTypes=i}return e.base.apply(this,arguments)}}},o=r.extend({_class:"PaperScope",initialize:function t(){paper=this,this.settings=new r({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var n=t.prototype;if(!this.support){var i=ee.getContext(1,1)||{};n.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:te.nativeModes},ee.release(i)}if(!this.agent){var a=e.navigator.userAgent.toLowerCase(),o=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(a)||[])[0],s="darwin"===o?"mac":o,l=n.agent=n.browser={platform:s};s&&(l[s]=!0),a.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(e,t,n,i,r){if(!l.chrome){var a="opera"===t?i:/^(node|trident)$/.test(t)?r:n;l.version=a,l.versionNumber=parseFloat(a),t="trident"===t?"msie":t,l.name=t,l[t]=!0}}),l.chrome&&delete l.webkit,l.atom&&delete l.chrome}},version:"0.11.5",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){paper.PaperScript.execute(e,this,t),W.updateFocus()},install:function(e){var t=this;r.each(["project","view","tool"],function(n){r.define(e,n,{configurable:!0,get:function(){return t[n]}})});for(var n in this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return paper=this,this.project=new y(e),this},createCanvas:function(e,t){return ee.getCanvas(e,t)},activate:function(){paper=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;n>=0;n--)e[n].remove();for(var n=t.length-1;n>=0;n--)t[n].remove()},remove:function(){this.clear(),delete o._scopes[this._id]},statics:new function(){function e(e){return e+="Attribute",function(t,n){return t[e](n)||t[e]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),s=r.extend(a,{initialize:function(e){this._scope=paper,this._index=this._scope[this._list].push(this)-1,!e&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(r.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),l=r.extend({initialize:function(e){this.precision=r.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});l.instance=new l;var u=new function(){function e(e,t,n){return e<t?t:e>n?n:e}function t(e,t,n){function i(e){var t=134217729*e,n=e-t,i=n+t,r=e-i;return[i,r]}var r=t*t-e*n,o=t*t+e*n;if(3*a(r)<o){var s=i(e),l=i(t),u=i(n),c=t*t,h=l[0]*l[0]-c+2*l[0]*l[1]+l[1]*l[1],f=e*n,d=s[0]*u[0]-f+s[0]*u[1]+s[1]*u[0]+s[1]*u[1];r=c-f+(h-d)}return r}function n(){var e=Math.max.apply(Math,arguments);return e&&(e<1e-8||e>1e8)?s(2,-Math.round(l(e))):0}var i=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],r=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],a=Math.abs,o=Math.sqrt,s=Math.pow,l=Math.log2||function(e){
return Math.log(e)*Math.LOG2E},c=1e-12,h=1.12e-16;return{EPSILON:c,MACHINE_EPSILON:h,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(o(2)-1)/3,isZero:function(e){return e>=-c&&e<=c},clamp:e,integrate:function(e,t,n,a){for(var o=i[a-2],s=r[a-2],l=.5*(n-t),u=l+t,c=0,h=a+1>>1,f=1&a?s[c++]*e(u):0;c<h;){var d=l*o[c];f+=s[c++]*(e(u+d)+e(u-d))}return l*f},findRoot:function(t,n,i,r,o,s,l){for(var u=0;u<s;u++){var c=t(i),h=c/n(i),f=i-h;if(a(h)<l){i=f;break}c>0?(o=i,i=f<=r?.5*(r+o):f):(r=i,i=f>=o?.5*(r+o):f)}return e(i,r,o)},solveQuadratic:function(i,r,s,l,u,f){var d,p=1/0;if(a(i)<c){if(a(r)<c)return a(s)<c?-1:0;d=-s/r}else{r*=-.5;var g=t(i,r,s);if(g&&a(g)<h){var m=n(a(i),a(r),a(s));m&&(i*=m,r*=m,s*=m,g=t(i,r,s))}if(g>=-h){var v=g<0?0:o(g),_=r+(r<0?-v:v);0===_?(d=s/i,p=-d):(d=_/i,p=s/_)}}var y=0,b=null==u,w=u-c,x=f+c;return isFinite(d)&&(b||d>w&&d<x)&&(l[y++]=b?d:e(d,u,f)),p!==d&&isFinite(p)&&(b||p>w&&p<x)&&(l[y++]=b?p:e(p,u,f)),y},solveCubic:function(t,i,r,l,f,d,p){function g(e){m=e;var n=t*m;v=n+i,_=v*m+r,y=(n+v)*m+_,b=_*m+l}var m,v,_,y,b,w=n(a(t),a(i),a(r),a(l));if(w&&(t*=w,i*=w,r*=w,l*=w),a(t)<c)t=i,v=r,_=l,m=1/0;else if(a(l)<c)v=i,_=r,m=0;else{g(-(i/t)/3);var x=b/t,E=s(a(x),1/3),k=x<0?-1:1,M=-y/t,T=M>0?1.324717957244746*Math.max(E,o(M)):E,S=m-k*T;if(S!==m){do g(S),S=0===y?m:m-b/y/(1+h);while(k*S>k*m);a(t)*m*m>a(l/m)&&(_=-l/m,v=(_-r)/m)}}var A=u.solveQuadratic(t,v,_,f,d,p),R=null==d;return isFinite(m)&&(0===A||A>0&&m!==f[0]&&m!==f[1])&&(R||m>d-c&&m<p+c)&&(f[A++]=R?m:e(m,d,p)),A}}},c={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}return this._id++}},h=r.extend({_class:"Point",_readIndex:!0,initialize:function(e,t){var n=typeof e,i=this.__read,r=0;if("number"===n){var a="number"==typeof t;this._set(e,a?t:e),i&&(r=a?2:1)}else if("undefined"===n||null===e)this._set(0,0),i&&(r=null===e?1:0);else{var o="string"===n?e.split(/[\s,]+/)||[]:e;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new h(this.x,this.y)},toString:function(){var e=l.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();u.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=h.read(arguments),t=this.getLength()*e.getLength();if(u.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=h.read(arguments);return 180*Math.atan2(this.cross(e),this.dot(e))/Math.PI},getDistance:function(){var e=h.read(arguments),t=e.x-this.x,n=e.y-this.y,i=t*t+n*n,a=r.read(arguments);return a?i:Math.sqrt(i)},normalize:function(e){e===t&&(e=1);var n=this.getLength(),i=0!==n?e/n:0,r=new h(this.x*i,this.y*i);return i>=0&&(r._angle=this._angle),r},rotate:function(e,t){if(0===e)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,i=Math.sin(e),r=Math.cos(e);return n=new h(n.x*r-n.y*i,n.x*i+n.y*r),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=h.read(arguments);return new h(this.x+e.x,this.y+e.y)},subtract:function(){var e=h.read(arguments);return new h(this.x-e.x,this.y-e.y)},multiply:function(){var e=h.read(arguments);return new h(this.x*e.x,this.y*e.y)},divide:function(){var e=h.read(arguments);return new h(this.x/e.x,this.y/e.y)},modulo:function(){var e=h.read(arguments);return new h(this.x%e.x,this.y%e.y)},negate:function(){return new h((-this.x),(-this.y))},isInside:function(){return g.read(arguments).contains(this)},isClose:function(){var e=h.read(arguments),t=r.read(arguments);return this.getDistance(e)<=t},isCollinear:function(){var e=h.read(arguments);return h.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=h.read(arguments);return h.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=u.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=h.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=h.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=h.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new h(e.x*t,e.y*t)},statics:{min:function(){var e=h.read(arguments),t=h.read(arguments);return new h(Math.min(e.x,t.x),Math.min(e.y,t.y))},max:function(){var e=h.read(arguments),t=h.read(arguments);return new h(Math.max(e.x,t.x),Math.max(e.y,t.y))},random:function(){return new h(Math.random(),Math.random())},isCollinear:function(e,t,n,i){return Math.abs(e*i-t*n)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+i*i))},isOrthogonal:function(e,t,n,i){return Math.abs(e*n+t*i)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+i*i))}}},r.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new h(t(this.x),t(this.y))}},{})),f=h.extend({initialize:function(e,t,n,i){this._x=e,this._y=t,this._owner=n,this._setter=i},_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),d=r.extend({_class:"Size",_readIndex:!0,initialize:function(e,t){var n=typeof e,i=this.__read,r=0;if("number"===n){var a="number"==typeof t;this._set(e,a?t:e),i&&(r=a?2:1)}else if("undefined"===n||null===e)this._set(0,0),i&&(r=null===e?1:0);else{var o="string"===n?e.split(/[\s,]+/)||[]:e;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new d(this.width,this.height)},toString:function(){var e=l.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=d.read(arguments);return new d(this.width+e.width,this.height+e.height)},subtract:function(){var e=d.read(arguments);return new d(this.width-e.width,this.height-e.height)},multiply:function(){var e=d.read(arguments);return new d(this.width*e.width,this.height*e.height)},divide:function(){var e=d.read(arguments);return new d(this.width/e.width,this.height/e.height)},modulo:function(){var e=d.read(arguments);return new d(this.width%e.width,this.height%e.height)},negate:function(){return new d((-this.width),(-this.height))},isZero:function(){var e=u.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new d(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new d(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new d(Math.random(),Math.random())}}},r.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new d(t(this.width),t(this.height))}},{})),p=d.extend({initialize:function(e,t,n,i){this._width=e,this._height=t,this._owner=n,this._setter=i},_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),g=r.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,n,i,a){var o,s=typeof e;if("number"===s?(this._set(e,n,i,a),o=4):"undefined"===s||null===e?(this._set(0,0,0,0),o=null===e?1:0):1===arguments.length&&(Array.isArray(e)?(this._set.apply(this,e),o=1):e.x!==t||e.width!==t?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),o=1):e.from===t&&e.to===t&&(this._set(0,0,0,0),r.filter(this,e),o=1)),o===t){var l,u,c=h.readNamed(arguments,"from"),f=r.peek(arguments),p=c.x,g=c.y;if(f&&f.x!==t||r.hasNamed(arguments,"to")){var m=h.readNamed(arguments,"to");l=m.x-p,u=m.y-g,l<0&&(p=m.x,l=-l),u<0&&(g=m.y,u=-u)}else{var v=d.read(arguments);l=v.width,u=v.height}this._set(p,g,l,u),o=arguments.__index;var _=arguments.__filtered;_&&(this.__filtered=_)}return this.__read&&(this.__read=o),this},set:"#initialize",_set:function(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this},clone:function(){return new g(this.x,this.y,this.width,this.height)},equals:function(e){var t=r.isPlainValue(e)?g.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=l.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){var t=e?h:f;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){var e=h.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?d:p;return new t(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=d.read(arguments),t=this._sx,n=this._sy,i=e.width,r=e.height;t&&(this.x+=(this.width-i)*t),n&&(this.y+=(this.height-r)*n),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=.5===this._sx?2*t:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=.5===this._sy?2*t:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=.5===this._sx?2*t:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=.5===this._sy?2*t:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||.5===this._sx?this.x=e-this.width/2:(this._sx&&(this.x+=2*(e-this.x)*this._sx),this.width=2*(e-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||.5===this._sy?this.y=e-this.height/2:(this._sy&&(this.y+=2*(e-this.y)*this._sy),this.height=2*(e-this.y)),this._sy=.5,this._fh=0},getCenter:function(e){var t=e?h:f;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=h.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(e){return e&&e.width!==t||4===(Array.isArray(e)?e:arguments).length?this._containsRectangle(g.read(arguments)):this._containsPoint(h.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=g.read(arguments),t=r.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=g.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),i=Math.min(this.x+this.width,e.x+e.width),r=Math.min(this.y+this.height,e.y+e.height);return new g(t,n,i-t,r-n)},unite:function(){var e=g.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width),r=Math.max(this.y+this.height,e.y+e.height);return new g(t,n,i-t,r-n)},include:function(){var e=h.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x),r=Math.max(this.y+this.height,e.y);return new g(t,n,i-t,r-n)},expand:function(){var e=d.read(arguments),t=e.width,n=e.height;return new g(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,n){return this.expand(this.width*e-this.width,this.height*(n===t?e:n)-this.height)}},r.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var n=e.join(""),i=/^[RL]/.test(n);t>=4&&(e[1]+=i?"Y":"X");var r=e[i?0:1],a=e[i?1:0],o="get"+r,s="get"+a,l="set"+r,u="set"+a,c="get"+n,d="set"+n;this[c]=function(e){var t=e?h:f;return new t(this[o](),this[s](),this,d)},this[d]=function(){var e=h.read(arguments);this[l](e.x),this[u](e.y)}},{beans:!0})),m=g.extend({initialize:function(e,t,n,i,r,a){this._set(e,t,n,i,!0),this._owner=r,this._setter=a},_set:function(e,t,n,i,r){return this._x=e,this._y=t,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var e=g.prototype;return r.each(["x","y","width","height"],function(e){var t=r.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._dontNotify||this._owner[this._setter](this)}},r.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(e){var t=this._owner;t._changeSelection&&t._changeSelection(2,e)}}))}),v=r.extend({_class:"Matrix",initialize:function e(t,n){var i=arguments.length,r=!0;if(i>=6?this._set.apply(this,arguments):1===i||2===i?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):r=!1:i?r=!1:this.reset(),!r)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,n,i,r,a,o){return this._a=e,this._b=t,this._c=n,this._d=i,this._tx=r,this._ty=a,o||this._changed(),this},_serialize:function(e,t){return r.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(9))},clone:function(){return new v(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=l.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return!!n&&(n.transform(null,!0,r.pick(e,!0),t),this.isIdentity())},translate:function(){var e=h.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=h.read(arguments),t=h.read(arguments,0,{readNull:!0});return t&&this.translate(t),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,t&&this.translate(t.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=h.read(arguments,1),n=t.x,i=t.y,r=Math.cos(e),a=Math.sin(e),o=n-n*r+i*a,s=i-n*a-i*r,l=this._a,u=this._b,c=this._c,f=this._d;return this._a=r*l+a*c,this._b=r*u+a*f,this._c=-a*l+r*c,this._d=-a*u+r*f,this._tx+=o*l+s*c,this._ty+=o*u+s*f,this._changed(),this},shear:function(){var e=h.read(arguments),t=h.read(arguments,0,{readNull:!0});t&&this.translate(t);var n=this._a,i=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*n,this._d+=e.x*i,t&&this.translate(t.negate()),this._changed(),this},skew:function(){var e=h.read(arguments),t=h.read(arguments,0,{readNull:!0}),n=Math.PI/180,i=new h(Math.tan(e.x*n),Math.tan(e.y*n));return this.shear(i,t)},append:function(e,t){if(e){var n=this._a,i=this._b,r=this._c,a=this._d,o=e._a,s=e._c,l=e._b,u=e._d,c=e._tx,h=e._ty;this._a=o*n+l*r,this._c=s*n+u*r,this._b=o*i+l*a,this._d=s*i+u*a,this._tx+=c*n+h*r,this._ty+=c*i+h*a,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,i=this._b,r=this._c,a=this._d,o=this._tx,s=this._ty,l=e._a,u=e._c,c=e._b,h=e._d,f=e._tx,d=e._ty;this._a=l*n+u*i,this._c=l*r+u*a,this._b=c*n+h*i,this._d=c*r+h*a,this._tx=l*o+u*s+f,this._ty=c*o+h*s+d,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,i=this._d,r=this._tx,a=this._ty,o=e*i-t*n,s=null;return o&&!isNaN(o)&&isFinite(r)&&isFinite(a)&&(this._a=i/o,this._b=-t/o,this._c=-n/o,this._d=e/o,this._tx=(n*a-i*r)/o,this._ty=(t*r-e*a)/o,s=this),s},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new v(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(h.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var i=e.x,r=e.y;return t||(t=new h),t._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var i=0,r=2*n;i<r;i+=2){var a=e[i],o=e[i+1];t[i]=a*this._a+o*this._c+this._tx,t[i+1]=a*this._b+o*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,i=t+e.width,r=n+e.height,a=[t,n,i,n,i,r,t,r];return this._transformCoordinates(a,a,4)},_transformBounds:function(e,t,n){for(var i=this._transformCorners(e),r=i.slice(0,2),a=r.slice(),o=2;o<8;o++){var s=i[o],l=1&o;s<r[l]?r[l]=s:s>a[l]&&(a[l]=s)}return t||(t=new g),t._set(r[0],r[1],a[0]-r[0],a[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(h.read(arguments))},_inverseTransform:function(e,t,n){var i=this._a,r=this._b,a=this._c,o=this._d,s=this._tx,l=this._ty,u=i*o-r*a,c=null;if(u&&!isNaN(u)&&isFinite(s)&&isFinite(l)){var f=e.x-this._tx,d=e.y-this._ty;t||(t=new h),c=t._set((f*o-d*a)/u,(d*i-f*r)/u,n)}return c},decompose:function(){var e,t,n,i=this._a,r=this._b,a=this._c,o=this._d,s=i*o-r*a,l=Math.sqrt,u=Math.atan2,c=180/Math.PI;if(0!==i||0!==r){var f=l(i*i+r*r);e=Math.acos(i/f)*(r>0?1:-1),t=[f,s/f],n=[u(i*a+r*o,f*f),0]}else if(0!==a||0!==o){var d=l(a*a+o*o);e=Math.asin(a/d)*(o>0?1:-1),t=[s/d,d],n=[0,u(i*a+r*o,d*d)]}else e=0,n=t=[0,0];return{translation:this.getTranslation(),rotation:e*c,scaling:new h(t),skewing:new h(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new h(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},r.each(["a","b","c","d","tx","ty"],function(e){var t=r.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._changed()}},{})),_=r.extend({_class:"Line",initialize:function(e,t,n,i,r){var a=!1;arguments.length>=4?(this._px=e,this._py=t,this._vx=n,this._vy=i,a=r):(this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y,a=n),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new h(this._px,this._py)},getVector:function(){return new h(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return _.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return _.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return _.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return h.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return h.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,i,r,a,o,s,l,c){l||(n-=e,i-=t,o-=r,s-=a);var f=n*s-i*o;if(!u.isZero(f)){var d=e-r,p=t-a,g=(o*p-s*d)/f,m=(n*p-i*d)/f,v=1e-12,_=-v,y=1+v;if(c||_<g&&g<y&&_<m&&m<y)return c||(g=g<=0?0:g>=1?1:g),new h(e+g*n,t+g*i)}},getSide:function(e,t,n,i,r,a,o,s){o||(n-=e,i-=t);var l=r-e,c=a-t,h=l*i-c*n;return!s&&u.isZero(h)&&(h=(l*n+l*n)/(n*n+i*i),h>=0&&h<=1&&(h=0)),h<0?-1:h>0?1:0},getSignedDistance:function(e,t,n,i,r,a,o){return o||(n-=e,i-=t),0===n?i>0?r-e:e-r:0===i?n<0?a-t:t-a:((r-e)*i-(a-t)*n)/Math.sqrt(n*n+i*i)},getDistance:function(e,t,n,i,r,a,o){return Math.abs(_.getSignedDistance(e,t,n,i,r,a,o))}}}),y=s.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){s.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new j(null,null,this),this._view=W.create(this,e||ee.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return r.serialize(this._children,e,!0,t)},_changed:function(e,t){if(1&e){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&t){var r=this._changesById,a=t._id,o=r[a];o?o.flags|=e:i.push(r[a]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return!!e.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new x({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:M,match:function(n){var i=n._definition,r=i._id;return t[r]||(t[r]=!0,e.push(i)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var i=e[n],r=i._selection;1&r&&i.isInserted()?t.push(i):r||this._updateSelection(i)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(t,e)},insertLayer:function(e,t){if(t instanceof x){t._remove(!1,!0),r.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,n,i){return n=this.insertLayer(e,n)||(this._activeLayer||this._insertItem(t,new x(b.NO_INSERT),!0)).insertChild(e,n),i&&n.activate&&n.activate(),n},getItems:function(e){return b._getItems(this,e)},getItem:function(e){return b._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return r.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){"mouseup"===e&&(t.mousedrag=null);var n=t[e];if(n){for(var i in n){var r=n[i];for(var a in t){var o=t[a];o&&o!=n&&delete o[r._id]}r.remove()}t[e]=null}}},draw:function(e,t,n){this._updateVersion++,e.save(),t.applyToContext(e);for(var i=this._children,a=new r({offset:new h(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new v],updateMatrix:!0}),o=0,s=i.length;o<s;o++)i[o].draw(e,a);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var l=this._selectionItems,u=this._scope.settings.handleSize,c=this._updateVersion;for(var f in l)l[f]._drawSelection(e,t,u,l,c);e.restore()}}}),b=r.extend(a,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=r.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new v,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return r.each(e,function(e){this._events[e]={install:function(e){this.getView()._countItemEvent(e,1)},uninstall:function(e){this.getView()._countItemEvent(e,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,n){var i=e&&r.isPlainObject(e),a=i&&e.internal===!0,o=this._matrix=new v,s=i&&e.project||paper.project,l=paper.settings;return this._id=a?null:c.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&l.applyMatrix,n&&o.translate(n),o._owner=this,this._style=new j(s._currentStyle,this,s),a||i&&0==e.insert||!l.insertItems&&(!i||e.insert!==!0)?this._setProject(s):(i&&e.parent||s)._insertItem(t,this,!0),i&&e!==b.NO_INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(e,t){function n(n){for(var o in n){var s=a[o];r.equals(s,"leading"===o?1.2*n.fontSize:n[o])||(i[o]=r.serialize(s,e,"data"!==o,t))}}var i={},a=this;return n(this._serializeFields),this instanceof w||n(this._style._defaults),[this._class,i]},_changed:function(e){var n=this._symbol,i=this._parent||n,r=this._project;8&e&&(this._bounds=this._position=this._decomposed=this._globalMatrix=t),i&&40&e&&b._clearBoundsCache(i),2&e&&b._clearBoundsCache(this),r&&r._changed(e,this),n&&n._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var n=this._getOwner();if(e&&n){var i=n._children,r=n._namedChildren;(r[e]=r[e]||[]).push(this),e in i||(i[e]=this)}this._name=e||t,this._changed(128)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},r.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=r.capitalize(e),n="_"+e,i={locked:128,visible:137};this["get"+t]=function(){return this[n]},this["set"+t]=function(t){t!=this[n]&&(this[n]=t,this._changed(i[e]||129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(129))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren)for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0;return!!(1&this._selection)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,i=t.length;n<i;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(1&this._selection);if(e&&t){for(var n=0,i=e.length;n<i;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,i=t.length;n<i;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=this._position,n=e?h:f;if(!t){var i=this._pivot;t=this._position=i?this._matrix._transformPoint(i):this.getBounds().getCenter(!0)}return new n(t.x,t.y,this,"setPosition")},setPosition:function(){this.translate(h.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var e=this._pivot;return e?new f(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=h.read(arguments,0,{clone:!0,readNull:!0}),this._position=t}},r.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(t){return this.getBounds(t,e)}},{beans:!0,getBounds:function(e,t){var n=t||e instanceof v,i=r.set({},n?t:e,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var a=this._getCachedBounds(n&&e,i).rect;return arguments.length?a:new m(a.x,a.y,a.width,a.height,this,"setBounds")},setBounds:function(){var e=g.read(arguments),t=this.getBounds(),n=this._matrix,i=new v,r=e.getCenter();i.translate(r),e.width==t.width&&e.height==t.height||(n.isInvertible()||(n.set(n._backup||(new v).translate(n.getTranslation())),t=this.getBounds()),i.scale(0!==t.width?e.width/t.width:0,0!==t.height?e.height/t.height:0)),r=t.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(e,t){var n=this._children;return n&&n.length?(b._updateBoundsCache(this,t.cacheItem),b._getBounds(n,e,t)):new g},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var i=t.internal&&!n,r=t.cacheItem,a=i?null:this._matrix._orNullIfIdentity(),o=r&&(!e||e.equals(a))&&this._getBoundsCacheKey(t,i),s=this._bounds;if(b._updateBoundsCache(this._parent||this._symbol,r),o&&s&&o in s){var l=s[o];return{rect:l.rect.clone(),nonscaling:l.nonscaling}}var u=this._getBounds(e||a,t),c=u.rect||u,h=this._style,f=u.nonscaling||h.hasStroke()&&!h.getStrokeScaling();if(o){s||(this._bounds=s={});var l=s[o]={rect:c.clone(),nonscaling:f,internal:i}}return{rect:c,nonscaling:f}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():e;
return i&&i._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,i=e._boundsCache=e._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(t),i.ids[n]=t)}},_clearBoundsCache:function(e){var n=e._boundsCache;if(n){e._bounds=e._position=e._boundsCache=t;for(var i=0,r=n.list,a=r.length;i<a;i++){var o=r[i];o!==e&&(o._bounds=o._position=t,o._boundsCache&&b._clearBoundsCache(o))}}},_getBounds:function(e,t,n){var i=1/0,r=-i,a=i,o=r,s=!1;n=n||{};for(var l=0,u=e.length;l<u;l++){var c=e[l];if(c._visible&&!c.isEmpty()){var h=c._getCachedBounds(t&&t.appended(c._matrix),n,!0),f=h.rect;i=Math.min(f.x,i),a=Math.min(f.y,a),r=Math.max(f.x+f.width,r),o=Math.max(f.y+f.height,o),h.nonscaling&&(s=!0)}}return{rect:isFinite(i)?new g(i,a,r-i,o-a):new g,nonscaling:s}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(null!=t&&null!=e){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new f(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=h.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),i=this._decomposed,r=new v,a=this.getPosition(!0);r.translate(a),n&&r.rotate(n),r.scale(t.x/e.x,t.y/e.y),n&&r.rotate(-n),r.translate(a.negate()),this.transform(r),i&&(i.scaling=t,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.initialize.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix,n=this._project._updateVersion;if(t&&t._updateVersion!==n&&(t=null),!t){t=this._globalMatrix=this._matrix.clone();var i=this._parent;i&&t.prepend(i.getGlobalMatrix(!0)),t._updateVersion=n}return e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof x)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return r.equals(this._children,e._children)},clone:function(e){var n=new this.constructor(b.NO_INSERT),i=this._children,a=r.pick(e?e.insert:t,e===t||e===!0),o=r.pick(e?e.deep:t,!0);i&&n.copyAttributes(this),i&&!o||n.copyContent(this),i||n.copyAttributes(this),a&&n.insertAbove(this);var s=this._name,l=this._parent;if(s&&l){for(var i=l._children,u=s,c=1;i[s];)s=u+" "+c++;s!==u&&n.setName(s)}return n},copyContent:function(e){for(var t=e._children,n=0,i=t&&t.length;n<i;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,a=n.length;i<a;i++){var o=n[i];e.hasOwnProperty(o)&&(this[o]=e[o])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var s=e._data,l=e._name;this._data=s?r.clone(s):null,l&&this.setName(l)},rasterize:function(e,n){var i=this.getStrokeBounds(),a=(e||this.getView().getResolution())/72,o=i.getTopLeft().floor(),s=i.getBottomRight().ceil(),l=new d(s.subtract(o)),u=new k(b.NO_INSERT);if(!l.isZero()){var c=ee.getCanvas(l.multiply(a)),h=c.getContext("2d"),f=(new v).scale(a).translate(o.negate());h.save(),f.applyToContext(h),this.draw(h,new r({matrices:[f]})),h.restore(),u.setCanvas(c)}return u.transform((new v).translate(o.add(l.divide(2))).scale(1/a)),(n===t||n)&&u.insertAbove(this),u},contains:function(){return!!this._contains(this._matrix._inverseTransform(h.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return g.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new L.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof b&&this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0}},new function(){function e(){return this._hitTest(h.read(arguments),S.getOptions(arguments))}function t(){var e=h.read(arguments),t=S.getOptions(arguments),n=[];return this._hitTest(e,r.set({all:n},t)),n}function n(e,t,n,i){var r=this._children;if(r)for(var a=r.length-1;a>=0;a--){var o=r[a],s=o!==i&&o._hitTest(e,t,n);if(s&&!t.all)return s}return null}return y.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){function i(e){return e&&p&&!p(e)&&(e=null),e&&t.all&&t.all.push(e),e}function a(t,n){var i=n?c["get"+n]():g.getPosition();if(e.subtract(i).divide(u).length<=1)return new S(t,g,{name:n?r.hyphenate(n):t,point:i})}if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var o=this._matrix,s=n?n.appended(o):this.getGlobalMatrix().prepend(this.getView()._matrix),l=Math.max(t.tolerance,1e-12),u=t._tolerancePadding=new d(L._getStrokePadding(l,o._shiftless().invert()));if(e=o._inverseTransform(e),!e||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(u.multiply(2))._containsPoint(e))return null;var c,h,f=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==r.hyphenate(this._class)||t.class&&!(this instanceof t.class)),p=t.match,g=this,m=t.position,v=t.center,_=t.bounds;if(f&&this._parent&&(m||v||_)){if((v||_)&&(c=this.getInternalBounds()),h=m&&a("position")||v&&a("center","Center"),!h&&_)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],b=0;b<8&&!h;b++)h=a("bounds",y[b]);h=i(h)}return h||(h=this._hitTestChildren(e,t,s)||f&&i(this._hitTestSelf(e,t,s,this.getStrokeScaling()?null:s._shiftless().invert()))||null),h&&h.point&&(h.point=o.transform(h.point)),h},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new S("fill",this)},matches:function(e,t){function n(e,t){for(var i in e)if(e.hasOwnProperty(i)){var a=e[i],o=t[i];if(r.isPlainObject(a)&&r.isPlainObject(o)){if(!n(a,o))return!1}else if(!r.equals(a,o))return!1}return!0}var i=typeof e;if("object"===i){for(var a in e)if(e.hasOwnProperty(a)&&!this.matches(a,e[a]))return!1;return!0}if("function"===i)return e(this);if("match"===e)return t(this);var o=/^(empty|editable)$/.test(e)?this["is"+r.capitalize(e)]():"type"===e?r.hyphenate(this._class):this[e];if("class"===e){if("function"==typeof t)return this instanceof t;o=this._class}if("function"==typeof t)return!!t(o);if(t){if(t.test)return t.test(o);if(r.isPlainObject(t))return n(t,o)}return r.equals(o,t)},getItems:function(e){return b._getItems(this,e,this._matrix)},getItem:function(e){return b._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,i,a,o){if(!a){var s="object"==typeof n&&n,l=s&&s.overlapping,u=s&&s.inside,c=l||u,h=c&&g.read([c]);a={items:[],recursive:s&&s.recursive!==!1,inside:!!u,overlapping:!!l,rect:h,path:l&&new L.Rectangle({rectangle:h,insert:!1})},s&&(n=r.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var f=t._children,d=a.items,h=a.rect;i=h&&(i||new v);for(var p=0,m=f&&f.length;p<m;p++){var _=f[p],y=i&&i.appended(_._matrix),b=!0;if(h){var c=_.getBounds(y);if(!h.intersects(c))continue;h.contains(c)||a.overlapping&&(c.contains(h)||a.path.intersects(_,y))||(b=!1)}if(b&&_.matches(n)&&(d.push(_),o))break;if(a.recursive!==!1&&e(_,n,y,a,o),o&&d.length>0)break}return d}}},{importJSON:function(e){var t=r.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(t,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&t.length>0){t=r.slice(t);for(var i={},a=t.length-1;a>=0;a--){var o=t[a],s=o&&o._id;!o||i[s]?t.splice(a,1):(o._remove(!1,!0),i[s]=!0)}r.splice(n,t,e,0);for(var l=this._project,u=l._changes,a=0,c=t.length;a<c;a++){var o=t[a],h=o._name;o._parent=this,o._setProject(l,!0),h&&o.setName(h),u&&o._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var n=e&&e._getOwner(),i=e!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(e._index+t,i)),i},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(t,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(t,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&1===t.length){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,i=this._name,r=n[i],a=r?r.indexOf(this):-1;a!==-1&&(t[i]==this&&delete t[i],r.splice(a,1),r.length?t[i]=r[0]:delete n[i])}},_remove:function(e,t){var n=this._getOwner(),i=this._project,a=this._index;return!!n&&(this._name&&this._removeNamed(),null!=a&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),r.splice(n._children,null,a,1)),this._installEvents(!1),e&&i._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=r.pick(t,this._children.length);for(var n=r.splice(this._children,null,e,t-e),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(){var e=this._children;return!e||!e.length},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(e){var t=[];do t.unshift(e);while(e=e._parent);return t}for(var n=t(this),i=t(e),r=0,a=Math.min(n.length,i.length);r<a;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(e){return this._getOrder(e)===-1},isBelow:function(e){return 1===this._getOrder(e)},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return!!e&&e.isDescendant(this)},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},r.each(["rotate","scale","shear","skew"],function(e){var t="rotate"===e;this[e]=function(){var n=(t?r:h).read(arguments),i=h.read(arguments,0,{readNull:!0});return this.transform((new v)[e](n,i||this.getPosition(!0)))}},{translate:function(){var e=new v;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n,i){var r=this._matrix,a=e&&!e.isIdentity(),o=(t||this._applyMatrix)&&(!r.isIdentity()||a||t&&n&&this._children);if(!a&&!o)return this;if(a){!e.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(e,!0);var s=this._style,l=s.getFillColor(!0),u=s.getStrokeColor(!0);l&&l.transform(e),u&&u.transform(e)}if(o&&(o=this._transformContent(r,n,i))){var c=this._pivot;c&&r._transformPoint(c,c,!0),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var h=this._bounds,f=this._position;(a||o)&&this._changed(9);var d=a&&h&&e.decompose();if(d&&d.skewing.isZero()&&d.rotation%90===0){for(var p in h){var g=h[p];if(g.nonscaling)delete h[p];else if(o||!g.internal){var m=g.rect;e._transformBounds(m,m)}}this._bounds=h;var v=h[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=v.rect.getCenter(!0))}else a&&f&&this._pivot&&(this._position=e._transformPoint(f,f));return this},_transformContent:function(e,t,n){var i=this._children;if(i){for(var r=0,a=i.length;r<a;r++)i[r].transform(e,!0,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(h.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(h.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(h.read(arguments))},localToParent:function(){return this._matrix._transformPoint(h.read(arguments))},fitBounds:function(e,t){e=g.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=e.height/e.width,a=(t?i>r:i<r)?e.width/n.width:e.height/n.height,o=new g(new h,new d(n.width*a,n.height*a));o.setCenter(e.getCenter()),this.setBounds(o)}}),{_setStyles:function(e,t,n){var i=this._style,r=this._matrix;if(i.hasFill()&&(e.fillStyle=i.getFillColor().toCanvasStyle(e,r)),i.hasStroke()){e.strokeStyle=i.getStrokeColor().toCanvasStyle(e,r),e.lineWidth=i.getStrokeWidth();var a=i.getStrokeJoin(),o=i.getStrokeCap(),s=i.getMiterLimit();if(a&&(e.lineJoin=a),o&&(e.lineCap=o),s&&(e.miterLimit=s),paper.support.nativeDash){var l=i.getDashArray(),u=i.getDashOffset();l&&l.length&&("setLineDash"in e?(e.setLineDash(l),e.lineDashOffset=u):(e.mozDash=l,e.mozDashOffset=u))}}if(i.hasShadow()){var c=t.pixelRatio||1,f=n._shiftless().prepend((new v).scale(c,c)),d=f.transform(new h(i.getShadowBlur(),0)),p=f.transform(this.getShadowOffset());e.shadowColor=i.getShadowColor().toCanvasStyle(e),e.shadowBlur=d.getLength(),e.shadowOffsetX=p.x,e.shadowOffsetY=p.y}},draw:function(e,t,n){var i=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=t.matrices,a=t.viewMatrix,o=this._matrix,s=r[r.length-1].appended(o);if(s.isInvertible()){a=a?a.appended(s):s,r.push(s),t.updateMatrix&&(s._updateVersion=i,this._globalMatrix=s);var l,u,c,h=this._blendMode,f=this._opacity,d="normal"===h,p=te.nativeModes[h],g=d&&1===f||t.dontStart||t.clip||(p||d&&f<1)&&this._canComposite(),m=t.pixelRatio||1;if(!g){var v=this.getStrokeBounds(a);if(!v.width||!v.height)return;c=t.offset,u=t.offset=v.getTopLeft().floor(),l=e,e=ee.getContext(v.getSize().ceil().add(1).multiply(m)),1!==m&&e.scale(m,m)}e.save();var _=n?n.appended(o):this._canScaleStroke&&!this.getStrokeScaling(!0)&&a,y=!g&&t.clipItem,b=!_||y;if(g?(e.globalAlpha=f,p&&(e.globalCompositeOperation=h)):b&&e.translate(-u.x,-u.y),b&&(g?o:a).applyToContext(e),y&&t.clipItem.draw(e,t.extend({clip:!0})),_){e.setTransform(m,0,0,m,0,0);var w=t.offset;w&&e.translate(-w.x,-w.y)}this._draw(e,t,a,_),e.restore(),r.pop(),t.clip&&!t.dontFinish&&e.clip(),g||(te.process(h,e,l,f,u.subtract(c).multiply(m)),ee.release(e),t.offset=c)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof N)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,i,r){var a=this._selection,o=1&a,s=2&a||o&&this._selectBounds,l=4&a;if(this._drawSelected||(o=!1),(o||s||l)&&this._isUpdated(r)){var u,c=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),h=t.appended(this.getGlobalMatrix(!0)),f=n/2;if(e.strokeStyle=e.fillStyle=c?c.toCanvasStyle(e):"#009dec",o&&this._drawSelected(e,h,i),l){var d=this.getPosition(!0),p=d.x,g=d.y;e.beginPath(),e.arc(p,g,f,0,2*Math.PI,!0),e.stroke();for(var m=[[0,-1],[1,0],[0,1],[-1,0]],v=f,_=n+1,y=0;y<4;y++){var b=m[y],w=b[0],x=b[1];e.moveTo(p+w*v,g+x*v),e.lineTo(p+w*_,g+x*_),e.stroke()}}if(s){var E=h._transformCorners(this.getInternalBounds());e.beginPath();for(var y=0;y<8;y++)e[y?"lineTo":"moveTo"](E[y],E[++y]);e.closePath(),e.stroke();for(var y=0;y<8;y++)e.fillRect(E[y]-f,E[++y]-f,n,n)}}},_canComposite:function(){return!1}},r.each(["down","drag","up","move"],function(e){this["removeOn"+r.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}})),w=b.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function e(n){e.base.call(this,n),1026&n&&(this._clipItem=t)},_getClipItem:function(){var e=this._clipItem;if(e===t){e=null;for(var n=this._children,i=0,r=n.length;i<r;i++)if(n[i]._clipMask){e=n[i];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var i=this._getClipItem();return i?i._getCachedBounds(t&&t.appended(i._matrix),r.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,i){var r=this._getClipItem();return(!r||r.contains(t))&&e.base.call(this,t,n,i,r)},_draw:function(e,t){var n=t.clip,i=!n&&this._getClipItem();t=t.extend({clipItem:i,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):i&&i.draw(e,t.extend({clip:!0}));for(var r=this._children,a=0,o=r.length;a<o;a++){var s=r[a];s!==i&&s.draw(e,t)}}}),x=w.extend({_class:"Layer",initialize:function(){w.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function e(){return this._parent?e.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),E=b.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,t){this._initialize(e,t)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&r.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new p(e.width,e.height,this,"setSize")},setSize:function(){var e=d.read(arguments);if(this._size){if(!this._size.equals(e)){var t=this._type,n=e.width,i=e.height;"rectangle"===t?this._radius.set(d.min(this._radius,e.divide(2))):"circle"===t?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===t&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=e.clone()},getRadius:function(){var e=this._radius;return"circle"===this._type?e:new p(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if("circle"===t){if(e===this._radius)return;var n=2*e;this._radius=e,this._size._set(n,n)}else if(e=d.read(arguments),this._radius){if(this._radius.equals(e))return;if(this._radius.set(e),"rectangle"===t){var n=d.max(this._size,e.multiply(2));this._size.set(n)}else"ellipse"===t&&this._size._set(2*e.width,2*e.height)}else this._radius=e.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var n=new(L[r.capitalize(this._type)])({center:new h,size:this._size,radius:this._radius,insert:!1});return n.copyAttributes(this),paper.settings.applyMatrix&&n.setApplyMatrix(!0),(e===t||e)&&n.insertAbove(this),n},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,i){var r=this._style,a=r.hasFill(),o=r.hasStroke(),s=t.dontFinish||t.clip,l=!i;if(a||o||s){var u=this._type,c=this._radius,h="circle"===u;if(t.dontStart||e.beginPath(),l&&h)e.arc(0,0,c,0,2*Math.PI,!0);else{var f=h?c:c.width,d=h?c:c.height,p=this._size,g=p.width,m=p.height;if(l&&"rectangle"===u&&0===f&&0===d)e.rect(-g/2,-m/2,g,m);else{var v=g/2,_=m/2,y=.44771525016920644,b=f*y,w=d*y,x=[-v,-_+d,-v,-_+w,-v+b,-_,-v+f,-_,v-f,-_,v-b,-_,v,-_+w,v,-_+d,v,_-d,v,_-w,v-b,_,v-f,_,-v+f,_,-v+b,_,-v,_-w,-v,_-d];i&&i.transform(x,x,32),e.moveTo(x[0],x[1]),e.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]),v!==f&&e.lineTo(x[8],x[9]),e.bezierCurveTo(x[10],x[11],x[12],x[13],x[14],x[15]),_!==d&&e.lineTo(x[16],x[17]),e.bezierCurveTo(x[18],x[19],x[20],x[21],x[22],x[23]),v!==f&&e.lineTo(x[24],x[25]),e.bezierCurveTo(x[26],x[27],x[28],x[29],x[30],x[31])}}e.closePath()}s||!a&&!o||(this._setStyles(e,t,n),a&&(e.fill(r.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),o&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new g(this._size).setCenter(0,0),i=this._style,r=t.stroke&&i.hasStroke()&&i.getStrokeWidth();return e&&(n=e._transformBounds(n)),r?n.expand(L._getStrokePadding(r,this._getStrokeMatrix(e,t))):n}},new function(){function e(e,t,n){var i=e._radius;if(!i.isZero())for(var r=e._size.divide(2),a=1;a<=4;a++){var o=new h(a>1&&a<4?-1:1,a>2?-1:1),s=o.multiply(r),l=s.subtract(o.multiply(i)),u=new g(n?s.add(o.multiply(n)):s,l);if(u.contains(t))return{point:l,quadrant:a}}}function t(e,t,n,i){var r=e.divide(t);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(t).divide(n).length<=1}return{_contains:function t(n){if("rectangle"===this._type){var i=e(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:t.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,a,o){var s=!1,l=this._style,u=r.stroke&&l.hasStroke(),c=r.fill&&l.hasFill();if(u||c){var h=this._type,f=this._radius,d=u?l.getStrokeWidth()/2:0,p=r._tolerancePadding.add(L._getStrokePadding(d,!l.getStrokeScaling()&&o));if("rectangle"===h){var m=p.multiply(2),v=e(this,i,m);if(v)s=t(i.subtract(v.point),f,p,v.quadrant);else{var _=new g(this._size).setCenter(0,0),y=_.expand(m),b=_.expand(m.negate());s=y._containsPoint(i)&&!b._containsPoint(i)}}else s=t(i,f,p)}return s?new S(u?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function e(e,t,n,i,a){var o=new E(r.getNamed(a),t);return o._type=e,o._size=n,o._radius=i,o}return{Circle:function(){var t=h.readNamed(arguments,"center"),n=r.readNamed(arguments,"radius");return e("circle",t,new d(2*n),n,arguments)},Rectangle:function(){var t=g.readNamed(arguments,"rectangle"),n=d.min(d.readNamed(arguments,"radius"),t.getSize(!0).divide(2));return e("rectangle",t.getCenter(!0),t.getSize(!0),n,arguments)},Ellipse:function(){var t=E._readEllipse(arguments),n=t.radius;return e("ellipse",t.center,n.multiply(2),n,arguments)},_readEllipse:function(e){var t,n;if(r.hasNamed(e,"radius"))t=h.readNamed(e,"center"),n=d.readNamed(e,"radius");else{var i=g.readNamed(e,"rectangle");t=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:t,radius:n}}}}}),k=b.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(e,n){if(!this._initialize(e,n!==t&&h.read(arguments,1))){var r="string"==typeof e?i.getElementById(e):e;r?this.setImage(r):this.setSource(e)}this._size||(this._size=new d,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var i=ee.getCanvas(e._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new p(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(){var e=d.read(arguments);if(!e.equals(this._size))if(e.width>0&&e.height>0){var t=this.getElement();this._setImage(ee.getCanvas(e)),t&&this.getContext(!0).drawImage(t,0,0,e.width,e.height)}else this._canvas&&ee.release(this._canvas),this._size=e.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||0===e.width&&0===e.height},getResolution:function(){var e=this._matrix,t=new h(0,0).transform(e),n=new h(1,0).transform(e).subtract(t),i=new h(0,1).transform(e).subtract(t);return new d(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){function t(e){var t=n.getView(),i=e&&e.type||"load";t&&n.responds(i)&&(paper=t._scope,n.emit(i,new Y(e)))}var n=this;this._setImage(e),this._loaded?setTimeout(t,0):e&&G.add(e,{load:function(i){n._setImage(e),t(i)},error:t})},_setImage:function(e){this._canvas&&ee.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new d(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var e=ee.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){ee.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(513)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(t){var n=new e.Image,i=this._crossOrigin;i&&(n.crossOrigin=i),n.src=t,this.setImage(n)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=g.read(arguments),t=ee.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=g.read(arguments),t=new k(b.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=h.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof O?(n=e,t=e.getBounds()):"object"==typeof e&&("width"in e?t=new g(e):"x"in e&&(t=new g(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var i=32,a=Math.min(t.width,i),o=Math.min(t.height,i),s=k._sampleContext;s?s.clearRect(0,0,i+1,i+1):s=k._sampleContext=ee.getContext(new d(i)),s.save();var l=(new v).scale(a/t.width,o/t.height).translate(-t.x,-t.y);l.applyToContext(s),n&&n.draw(s,new r({clip:!0,matrices:[l]})),this._matrix.applyToContext(s);var u=this.getElement(),c=this._size;u&&s.drawImage(u,-c.width/2,-c.height/2),s.restore();for(var h=s.getImageData(.5,.5,Math.ceil(a),Math.ceil(o)).data,f=[0,0,0],p=0,m=0,_=h.length;m<_;m+=4){var y=h[m+3];p+=y,y/=255,f[0]+=h[m]*y,f[1]+=h[m+1]*y,f[2]+=h[m+2]*y}for(var m=0;m<3;m++)f[m]/=p;return p?H.read(f):null},getPixel:function(){var e=h.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new H("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=h.read(arguments),t=H.read(arguments),n=t._convert("rgb"),i=t._alpha,r=this.getContext(!0),a=r.createImageData(1,1),o=a.data;o[0]=255*n[0],o[1]=255*n[1],o[2]=255*n[2],o[3]=null!=i?255*i:255,r.putImageData(a,e.x,e.y)},createImageData:function(){var e=d.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=g.read(arguments);return e.isEmpty()&&(e=new g(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},setImageData:function(e){var t=h.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},_getBounds:function(e,t){var n=new g(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new S("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e){var t=this.getElement();t&&(e.globalAlpha=this._opacity,e.drawImage(t,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),M=b.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,n){this._initialize(e,n!==t&&h.read(arguments,1))||this.setDefinition(e instanceof T?e:new T(e))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var i=this._definition._item._hitTest(e,t,n);return i&&(i.item=this),i},_draw:function(e,t){this._definition._item.draw(e,t)}}),T=r.extend({_class:"SymbolDefinition",initialize:function(e,t){this._id=c.get(),this.project=paper.project,e&&this.setItem(e,t)},_serialize:function(e,t){return t.add(this,function(){return r.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){8&e&&b._clearBoundsCache(this),1&e&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new h),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new M(this,e)},clone:function(){return new T(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),S=r.extend({_class:"HitResult",initialize:function(e,t,n){this.type=e,this.item=t,n&&this.inject(n)},statics:{getOptions:function(e){
var t=e&&r.read(e);return r.set({type:null,tolerance:paper.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),A=r.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,n,i,r,a,o){var s,l,u,c,h=arguments.length;h>0&&(null==e||"object"==typeof e?1===h&&e&&"point"in e?(s=e.point,l=e.handleIn,u=e.handleOut,c=e.selection):(s=e,l=n,u=i,c=r):(s=[e,n],l=i!==t?[i,r]:null,u=a!==t?[a,o]:null)),new R(s,this,"_point"),new R(l,this,"_handleIn"),new R(u,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(e,t){var n=this._point,i=this._selection,a=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&a.push(i),r.serialize(a,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n,i=t._curves,r=this._index;i&&(e&&e!==this._point&&e!==this._handleIn||!(n=r>0?i[r-1]:t._closed?i[i.length-1]:null)||n._changed(),e&&e!==this._point&&e!==this._handleOut||!(n=i[r])||n._changed()),t._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(h.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(h.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(h.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(129))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(7&this._selection)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==t?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new P(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,n,i){var r=e||{},a=r.type,o=r.factor,s=this.getPrevious(),l=this.getNext(),u=(s||this)._point,c=this._point,f=(l||this)._point,d=u.getDistance(c),p=c.getDistance(f);if(a&&"catmull-rom"!==a){if("geometric"!==a)throw new Error("Smoothing method '"+a+"' not supported.");if(s&&l){var g=u.subtract(f),m=o===t?.4:o,v=m*d/(d+p);n||this.setHandleIn(g.multiply(v)),i||this.setHandleOut(g.multiply(v-m))}}else{var _=o===t?.5:o,y=Math.pow(d,_),b=y*y,w=Math.pow(p,_),x=w*w;if(!n&&s){var E=2*x+3*w*y+b,k=3*w*(w+y);this.setHandleIn(0!==k?new h((x*u._x+E*c._x-b*f._x)/k-c._x,(x*u._y+E*c._y-b*f._y)/k-c._y):new h)}if(!i&&l){var E=2*b+3*y*w+x,k=3*y*(y+w);this.setHandleOut(0!==k?new h((b*f._x+E*c._x-x*u._x)/k-c._x,(b*f._y+E*c._y-x*u._y)/k-c._y):new h)}}},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new A(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new A(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var i=1-n,r=n,a=e._point,o=t._point,s=e._handleIn,l=t._handleIn,u=t._handleOut,c=e._handleOut;this._point._set(i*a._x+r*o._x,i*a._y+r*o._y,!0),this._handleIn._set(i*s._x+r*l._x,i*s._y+r*l._y,!0),this._handleOut._set(i*c._x+r*u._x,i*c._y+r*u._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,o=i._x,s=i._y,l=2;return t[0]=o,t[1]=s,r&&(t[l++]=r._x+o,t[l++]=r._y+s),a&&(t[l++]=a._x+o,t[l++]=a._y+s),e&&(e._transformCoordinates(t,t,l/2),o=t[0],s=t[1],n?(i._x=o,i._y=s,l=2,r&&(r._x=t[l++]-o,r._y=t[l++]-s),a&&(a._x=t[l++]-o,a._y=t[l++]-s)):(r||(t[l++]=o,t[l++]=s),a||(t[l++]=o,t[l++]=s))),t}}),R=h.extend({initialize:function(e,n,i){var r,a,o;if(e)if((r=e[0])!==t)a=e[1];else{var s=e;(r=s.x)===t&&(s=h.read(arguments),r=s.x),a=s.y,o=s.selected}else r=a=0;this._x=r,this._y=a,this._owner=n,n[i]=this,o&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=u.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),C=r.extend({_class:"Curve",beans:!0,initialize:function(e,t,n,i,r,a,o,s){var l,u,c,h,f,d,p=arguments.length;3===p?(this._path=e,l=t,u=n):p?1===p?"segment1"in e?(l=new A(e.segment1),u=new A(e.segment2)):"point1"in e?(c=e.point1,f=e.handle1,d=e.handle2,h=e.point2):Array.isArray(e)&&(c=[e[0],e[1]],h=[e[6],e[7]],f=[e[2]-e[0],e[3]-e[1]],d=[e[4]-e[6],e[5]-e[7]]):2===p?(l=new A(e),u=new A(t)):4===p?(c=e,f=t,d=n,h=i):8===p&&(c=[e,t],h=[o,s],f=[n-e,i-t],d=[r-o,a-s]):(l=new A,u=new A),this._segment1=l||new A(c,null,f),this._segment2=u||new A(h,d,null)},_serialize:function(e,t){return r.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=t},clone:function(){return new C(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return C.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;e=t.remove(),e&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(h.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(h.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(h.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(h.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return C.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new h(e[n],e[n+1]));return t}},{getLength:function(){return null==this._length&&(this._length=C.getLength(this.getValues(),0,1)),this._length},getArea:function(){return C.getArea(this.getValues())},getLine:function(){return new _(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new C(C.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return C.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=1e-8,i=1-n,r=null;if(e>=n&&e<=i){var a=C.subdivide(this.getValues(),e),o=a[0],s=a[1],l=t||this.hasHandles(),u=this._segment1,c=this._segment2,f=this._path;l&&(u._handleOut._set(o[2]-o[0],o[3]-o[1]),c._handleIn._set(s[4]-s[6],s[5]-s[7]));var d=o[6],p=o[7],g=new A(new h(d,p),l&&new h(o[4]-d,o[5]-p),l&&new h(s[2]-d,s[3]-p));f?(f.insert(u._index+1,g),r=this.getNext()):(this._segment2=g,this._changed(),r=new C(g,c))}return r},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,n){return this.divideAtTime(e===t?.5:n?e:this.getTimeAt(e))},split:function(e,n){return this.splitAtTime(e===t?.5:n?e:this.getTimeAt(e))},reversed:function(){return new C(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,i){var r=e._point,a=e._handleOut,o=t._handleIn,s=t._point,l=r.x,u=r.y,c=s.x,h=s.y,f=i?[l,u,l,u,c,h,c,h]:[l,u,l+a._x,u+a._y,c+o._x,h+o._y,c,h];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7];n===t&&(n=.5);var h=1-n,f=h*i+n*a,d=h*r+n*o,p=h*a+n*s,g=h*o+n*l,m=h*s+n*u,v=h*l+n*c,_=h*f+n*p,y=h*d+n*g,b=h*p+n*m,w=h*g+n*v,x=h*_+n*b,E=h*y+n*w;return[[i,r,f,d,_,y,x,E],[x,E,b,w,m,v,u,c]]},getMonoCurves:function(e,t){var n=[],i=t?0:1,r=e[i+0],a=e[i+2],o=e[i+4],s=e[i+6];if(r>=a==a>=o&&a>=o==o>=s||C.isStraight(e))n.push(e);else{var l=3*(a-o)-r+s,c=2*(r+o)-4*a,h=a-r,f=1e-8,d=1-f,p=[],g=u.solveQuadratic(l,c,h,p,f,d);if(g){p.sort();var m=p[0],v=C.subdivide(e,m);n.push(v[0]),g>1&&(m=(p[1]-m)/(1-m),v=C.subdivide(v[1],m),n.push(v[0])),n.push(v[1])}else n.push(e)}return n},solveCubic:function(e,t,n,i,r,a){var o=e[t],s=e[t+2],l=e[t+4],c=e[t+6],h=0;if(!(o<n&&c<n&&s<n&&l<n||o>n&&c>n&&s>n&&l>n)){var f=3*(s-o),d=3*(l-s)-f,p=c-o-f-d;h=u.solveCubic(p,d,f,o-n,i,r,a)}return h},getTimeOf:function(e,t){var n=new h(e[0],e[1]),i=new h(e[6],e[7]),r=1e-12,a=1e-7,o=t.isClose(n,r)?0:t.isClose(i,r)?1:null;if(null===o)for(var s=[t.x,t.y],l=[],u=0;u<2;u++)for(var c=C.solveCubic(e,u,s[u],l,0,1),f=0;f<c;f++){var d=l[f];if(t.isClose(C.getPoint(e,d),a))return d}return t.isClose(n,a)?0:t.isClose(i,a)?1:null},getNearestTime:function(e,t){function n(n){if(n>=0&&n<=1){var i=t.getDistance(C.getPoint(e,n),!0);if(i<d)return d=i,p=n,!0}}if(C.isStraight(e)){var i=e[0],r=e[1],a=e[6],o=e[7],s=a-i,l=o-r,u=s*s+l*l;if(0===u)return 0;var c=((t.x-i)*s+(t.y-r)*l)/u;return c<1e-12?0:c>.999999999999?1:C.getTimeOf(e,new h(i+c*s,r+c*l))}for(var f=100,d=1/0,p=0,g=0;g<=f;g++)n(g/f);for(var m=1/(2*f);m>1e-8;)n(p-m)||n(p+m)||(m/=2);return p},getPart:function(e,t,n){var i=t>n;if(i){var r=t;t=n,n=r}return t>0&&(e=C.subdivide(e,t)[1]),n<1&&(e=C.subdivide(e,(n-t)/(1-t))[0]),i?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=3*r-2*n-l,h=3*a-2*i-u,f=3*o-2*l-n,d=3*s-2*u-i;return Math.max(c*c,f*f)+Math.max(h*h,d*d)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7];return 3*((l-n)*(i+a)-(s-t)*(r+o)+r*(t-a)-i*(n-o)+l*(a+t/3)-s*(o+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),i=[0,0],r=0;r<2;r++)C._addBounds(e[r],e[r+2],e[r+4],e[r+6],r,0,t,n,i);return new g(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,i,r,a,o,s,l){function c(e,t){var n=e-t,i=e+t;n<o[r]&&(o[r]=n),i>s[r]&&(s[r]=i)}a/=2;var h=o[r]-a,f=s[r]+a;if(e<h||t<h||n<h||i<h||e>f||t>f||n>f||i>f)if(t<e!=t<i&&n<e!=n<i)c(e,a),c(i,a);else{var d=3*(t-n)-e+i,p=2*(e+n)-4*t,g=t-e,m=u.solveQuadratic(d,p,g,l),v=1e-8,_=1-v;c(i,0);for(var y=0;y<m;y++){var b=l[y],w=1-b;v<=b&&b<=_&&c(w*w*w*e+3*w*w*b*t+3*w*b*b*n+b*b*b*i,a)}}}}},r.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=L[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),r.each({isStraight:function(e,t,n,i){if(t.isZero()&&n.isZero())return!0;var r=i.subtract(e);if(r.isZero())return!1;if(r.isCollinear(t)&&r.isCollinear(n)){var a=new _(e,i),o=1e-7;if(a.getDistance(e.add(t))<o&&a.getDistance(i.add(n))<o){var s=r.dot(r),l=r.dot(t)/s,u=r.dot(n)/s;return l>=0&&l<=1&&u<=0&&u>=-1}}return!1},isLinear:function(e,t,n,i){var r=i.subtract(e).divide(3);return t.equals(r)&&n.negate().equals(r)}},function(e,t){this[t]=function(t){var n=this._segment1,i=this._segment2;return e(n._point,n._handleOut,i._handleIn,i._point,t)},this.statics[t]=function(t,n){var i=t[0],r=t[1],a=t[6],o=t[7];return e(new h(i,r),new h(t[2]-i,t[3]-r),new h(t[4]-a,t[5]-o),new h(a,o),n)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return null!=e&&e>=0&&e<=1?new P(this,e):null},getTimeAt:function(e,t){return C.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(h.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return C.getTimeOf(this.getValues(),h.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=h.read(arguments),t=this.getValues(),n=C.getNearestTime(t,e),i=C.getPoint(t,n);return new P(this,n,i,null,e.getDistance(i))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e?e.getPoint():e}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return r.each(e,function(e){this[e+"At"]=function(t,n){var i=this.getValues();return C[e](i,n?t:C.getTimeAt(i,t))},this[e+"AtTime"]=function(t){return C[e](this.getValues(),t)}},{statics:{_evaluateMethods:e}})},new function(){function e(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=9*(i-a)+3*(s-t),c=6*(t+a)-12*i,h=3*(i-t),f=9*(r-o)+3*(l-n),d=6*(n+o)-12*r,p=3*(r-n);return function(e){var t=(u*e+c)*e+h,n=(f*e+d)*e+p;return Math.sqrt(t*t+n*n)}}function n(e,t){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(t-e))))}function i(e,t,n,i){if(null==t||t<0||t>1)return null;var r=e[0],a=e[1],o=e[2],s=e[3],l=e[4],c=e[5],f=e[6],d=e[7],p=u.isZero;p(o-r)&&p(s-a)&&(o=r,s=a),p(l-f)&&p(c-d)&&(l=f,c=d);var g,m,v=3*(o-r),_=3*(l-o)-v,y=f-r-v-_,b=3*(s-a),w=3*(c-s)-b,x=d-a-b-w;if(0===n)g=0===t?r:1===t?f:((y*t+_)*t+v)*t+r,m=0===t?a:1===t?d:((x*t+w)*t+b)*t+a;else{var E=1e-8,k=1-E;if(t<E?(g=v,m=b):t>k?(g=3*(f-l),m=3*(d-c)):(g=(3*y*t+2*_)*t+v,m=(3*x*t+2*w)*t+b),i){0===g&&0===m&&(t<E||t>k)&&(g=l-o,m=c-s);var M=Math.sqrt(g*g+m*m);M&&(g/=M,m/=M)}if(3===n){var l=6*y*t+2*_,c=6*x*t+2*w,T=Math.pow(g*g+m*m,1.5);g=0!==T?(g*c-m*l)/T:0,m=0}}return 2===n?new h(m,(-g)):new h(g,m)}return{statics:{classify:function(e){function n(e,n,i){var r=n!==t,a=r&&n>0&&n<1,o=r&&i>0&&i<1;return!r||(a||o)&&("loop"!==e||a&&o)||(e="arch",a=o=!1),{type:e,roots:a||o?a&&o?n<i?[n,i]:[i,n]:[a?n:i]:null}}var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],h=e[7],f=i*(h-l)+r*(s-c)+c*l-h*s,d=a*(r-h)+o*(c-i)+i*h-r*c,p=s*(o-r)+l*(i-a)+a*r-o*i,g=3*p,m=g-d,v=m-d+f,_=Math.sqrt(v*v+m*m+g*g),y=0!==_?1/_:0,b=u.isZero,w="serpentine";if(v*=y,m*=y,g*=y,b(v))return b(m)?n(b(g)?"line":"quadratic"):n(w,g/(3*m));var x=3*m*m-4*v*g;if(b(x))return n("cusp",m/(2*v));var E=x>0?Math.sqrt(x/3):Math.sqrt(-x),k=2*v;return n(x>0?w:"loop",(m+E)/k,(m-E)/k)},getLength:function(i,r,a,o){if(r===t&&(r=0),a===t&&(a=1),C.isStraight(i)){var s=i;a<1&&(s=C.subdivide(s,a)[0],r/=a),r>0&&(s=C.subdivide(s,r)[1]);var l=s[6]-s[0],c=s[7]-s[1];return Math.sqrt(l*l+c*c)}return u.integrate(o||e(i),r,a,n(r,a))},getTimeAt:function(i,r,a){function o(e){return v+=u.integrate(d,a,e,n(a,e)),a=e,v-r}if(a===t&&(a=r<0?1:0),0===r)return a;var s=Math.abs,l=1e-12,c=r>0,h=c?a:0,f=c?1:a,d=e(i),p=C.getLength(i,h,f,d),g=s(r)-p;if(s(g)<l)return c?f:h;if(g>l)return null;var m=r/p,v=0;return u.findRoot(o,d,a+m,h,f,32,1e-12)},getPoint:function(e,t){return i(e,t,0,!1)},getTangent:function(e,t){return i(e,t,1,!0)},getWeightedTangent:function(e,t){return i(e,t,1,!1)},getNormal:function(e,t){return i(e,t,2,!0)},getWeightedNormal:function(e,t){return i(e,t,2,!1)},getCurvature:function(e,t){return i(e,t,3,!1).x},getPeaks:function(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=-t+3*i-3*a+s,h=3*t-6*i+3*a,f=-3*t+3*i,d=-n+3*r-3*o+l,p=3*n-6*r+3*o,g=-3*n+3*r,m=1e-8,v=1-m,_=[];return u.solveCubic(9*(c*c+d*d),9*(c*h+p*d),2*(h*h+p*p)+3*(f*c+g*d),f*h+p*g,_,m,v),_.sort()}}}},new function(){function e(e,t,n,i,r,a,o){var s=!o&&n.getPrevious()===r,l=!o&&n!==r&&n.getNext()===r,u=1e-8,c=1-u;if(null!==i&&i>=(s?u:0)&&i<=(l?c:1)&&null!==a&&a>=(l?u:0)&&a<=(s?c:1)){var h=new P(n,i,null,o),f=new P(r,a,null,o);h._intersection=f,f._intersection=h,t&&!t(h)||P.insert(e,h,!0)}}function t(r,a,o,s,l,u,c,h,f,d,p,g,m){if(++f>=4096||++h>=40)return f;var v,y,b=1e-9,w=a[0],x=a[1],E=a[6],k=a[7],M=_.getSignedDistance,T=M(w,x,E,k,a[2],a[3]),S=M(w,x,E,k,a[4],a[5]),A=T*S>0?.75:4/9,R=A*Math.min(0,T,S),P=A*Math.max(0,T,S),O=M(w,x,E,k,r[0],r[1]),L=M(w,x,E,k,r[2],r[3]),N=M(w,x,E,k,r[4],r[5]),F=M(w,x,E,k,r[6],r[7]),D=n(O,L,N,F),I=D[0],U=D[1];if(0===T&&0===S&&0===O&&0===L&&0===N&&0===F||null==(v=i(I,U,R,P))||null==(y=i(I.reverse(),U.reverse(),R,P)))return f;var H=d+(p-d)*v,z=d+(p-d)*y;if(Math.max(m-g,z-H)<b){var B=(H+z)/2,j=(g+m)/2;e(l,u,c?s:o,c?j:B,c?o:s,c?B:j)}else if(r=C.getPart(r,v,y),y-v>.8)if(z-H>m-g){var V=C.subdivide(r,.5),B=(H+z)/2;f=t(a,V[0],s,o,l,u,!c,h,f,g,m,H,B),f=t(a,V[1],s,o,l,u,!c,h,f,g,m,B,z)}else{var V=C.subdivide(a,.5),j=(g+m)/2;f=t(V[0],r,s,o,l,u,!c,h,f,g,j,H,z),f=t(V[1],r,s,o,l,u,!c,h,f,j,m,H,z)}else f=m-g>=b?t(a,r,s,o,l,u,!c,h,f,g,m,H,z):t(r,a,o,s,l,u,c,h,f,H,z,g,m);return f}function n(e,t,n,i){var r,a=[0,e],o=[1/3,t],s=[2/3,n],l=[1,i],u=t-(2*e+i)/3,c=n-(e+2*i)/3;if(u*c<0)r=[[a,o,l],[a,s,l]];else{var h=u/c;r=[h>=2?[a,o,l]:h<=.5?[a,s,l]:[a,o,s,l],[a,l]]}return(u||c)<0?r.reverse():r}function i(e,t,n,i){return e[0][1]<n?r(e,!0,n):t[0][1]>i?r(t,!1,i):e[0][0]}function r(e,t,n){for(var i=e[0][0],r=e[0][1],a=1,o=e.length;a<o;a++){var s=e[a][0],l=e[a][1];if(t?l>=n:l<=n)return l===n?s:i+(n-r)*(s-i)/(l-r);i=s,r=l}return null}function a(e,t,n,i,r){var a=u.isZero;if(a(i)&&a(r)){var o=C.getTimeOf(e,new h(t,n));return null===o?[]:[o]}for(var s=Math.atan2(-r,i),l=Math.sin(s),c=Math.cos(s),f=[],d=[],p=0;p<8;p+=2){var g=e[p]-t,m=e[p+1]-n;f.push(g*c-m*l,g*l+m*c)}return C.solveCubic(f,1,0,d,0,1),d}function o(t,n,i,r,o,s,l){for(var u=n[0],c=n[1],h=n[6],f=n[7],d=a(t,u,c,h-u,f-c),p=0,g=d.length;p<g;p++){var m=d[p],v=C.getPoint(t,m),_=C.getTimeOf(n,v);null!==_&&e(o,s,l?r:i,l?_:m,l?i:r,l?m:_)}}function s(t,n,i,r,a,o){var s=_.intersect(t[0],t[1],t[6],t[7],n[0],n[1],n[6],n[7]);s&&e(a,o,i,C.getTimeOf(t,s),r,C.getTimeOf(n,s))}function l(n,i,r,a,l,u){var c=1e-12,f=Math.min,p=Math.max;if(p(n[0],n[2],n[4],n[6])+c>f(i[0],i[2],i[4],i[6])&&f(n[0],n[2],n[4],n[6])-c<p(i[0],i[2],i[4],i[6])&&p(n[1],n[3],n[5],n[7])+c>f(i[1],i[3],i[5],i[7])&&f(n[1],n[3],n[5],n[7])-c<p(i[1],i[3],i[5],i[7])){var g=d(n,i);if(g)for(var m=0;m<2;m++){var v=g[m];e(l,u,r,v[0],a,v[1],!0)}else{var _=C.isStraight(n),y=C.isStraight(i),b=_&&y,w=_&&!y,x=l.length;if((b?s:_||y?o:t)(w?i:n,w?n:i,w?a:r,w?r:a,l,u,w,0,0,0,1,0,1),!b||l.length===x)for(var m=0;m<4;m++){var E=m>>1,k=1&m,M=6*E,T=6*k,S=new h(n[M],n[M+1]),A=new h(i[T],i[T+1]);S.isClose(A,c)&&e(l,u,r,E,a,k)}}}return l}function c(t,n,i,r){var a=C.classify(t);if("loop"===a.type){var o=a.roots;e(i,r,n,o[0],n,o[1])}return i}function f(e,t,n,i,r,a){var o=!t;o&&(t=e);for(var s,u,h=e.length,f=t.length,d=[],p=[],g=0;g<f;g++)d[g]=t[g].getValues(r);for(var g=0;g<h;g++){var m=e[g],v=o?d[g]:m.getValues(i),_=m.getPath();_!==u&&(u=_,s=[],p.push(s)),o&&c(v,m,s,n);for(var y=o?g+1:0;y<f;y++){if(a&&s.length)return s;l(v,d[y],m,t[y],s,n)}}s=[];for(var g=0,b=p.length;g<b;g++)s.push.apply(s,p[g]);return s}function d(e,t){function n(e){var t=e[6]-e[0],n=e[7]-e[1];return t*t+n*n}var i=Math.abs,r=_.getDistance,a=1e-8,o=1e-7,s=C.isStraight(e),l=C.isStraight(t),u=s&&l,c=n(e)<n(t),f=c?t:e,d=c?e:t,p=f[0],g=f[1],m=f[6]-p,v=f[7]-g;if(r(p,g,m,v,d[0],d[1],!0)<o&&r(p,g,m,v,d[6],d[7],!0)<o)!u&&r(p,g,m,v,f[2],f[3],!0)<o&&r(p,g,m,v,f[4],f[5],!0)<o&&r(p,g,m,v,d[2],d[3],!0)<o&&r(p,g,m,v,d[4],d[5],!0)<o&&(s=l=u=!0);else if(u)return null;if(s^l)return null;for(var y=[e,t],b=[],w=0;w<4&&b.length<2;w++){var x=1&w,E=1^x,k=w>>1,M=C.getTimeOf(y[x],new h(y[E][k?6:0],y[E][k?7:1]));if(null!=M){var T=x?[k,M]:[M,k];(!b.length||i(T[0]-b[0][0])>a&&i(T[1]-b[0][1])>a)&&b.push(T)}if(w>2&&!b.length)break}if(2!==b.length)b=null;else if(!u){var S=C.getPart(e,b[0][0],b[1][0]),A=C.getPart(t,b[0][1],b[1][1]);(i(A[2]-S[2])>o||i(A[3]-S[3])>o||i(A[4]-S[4])>o||i(A[5]-S[5])>o)&&(b=null)}return b}return{getIntersections:function(e){var t=this.getValues(),n=e&&e!==this&&e.getValues();return n?l(t,n,this,e,[]):c(t,this,[])},statics:{getOverlaps:d,getIntersections:f,getCurveLineIntersections:a}}}),P=r.extend({_class:"CurveLocation",initialize:function(e,t,n,i,r){if(t>=.99999999){var a=e.getNext();a&&(t=0,e=a)}this._setCurve(e),this._time=t,this._point=n||e.getPointAtTime(t),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(e){var t=e._path;this._path=t,this._version=t?t._version:0,this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){this._setCurve(e.getCurve()),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){function e(e){var t=e&&e.getCurve();if(t&&null!=(n._time=t.getTimeOf(n._point)))return n._setCurve(t),t}var t=this._path,n=this;return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||e(this._segment)||e(this._segment1)||e(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&null==t?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(null==e){e=0;var t=this.getPath(),n=this.getIndex();if(t&&null!=n)for(var i=t.getCurves(),r=0;r<n;r++)e+=i[r].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(null==e){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=null!=n&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof P){var i=this.getCurve(),r=e.getCurve(),a=i._path,o=r._path;if(a===o){var s=Math.abs,l=1e-7,u=s(this.getOffset()-e.getOffset()),c=!t&&this._intersection,h=!t&&e._intersection;n=(u<l||a&&s(a.getLength()-u)<l)&&(!c&&!h||c&&h&&c.equals(h,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=l.instance;t&&e.push("point: "+t);var i=this.getIndex();null!=i&&e.push("index: "+i);var r=this.getTime();return null!=r&&e.push("time: "+n.number(r)),null!=this._distance&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){function e(e,t){var n=e.getValues(),i=C.classify(n).roots||C.getPeaks(n),r=i.length,a=t&&r>1?i[r-1]:r>0?i[0]:.5;d.push(C.getLength(n,t?a:0,t?1:a)/2)}function t(e,t,n){return t<n?e>t&&e<n:e>t||e<n}var n=this._intersection;if(!n)return!1;var i=this.getTime(),r=n.getTime(),a=1e-8,o=1-a,s=i>=a&&i<=o,l=r>=a&&r<=o;if(s&&l)return!this.isTouching();var u=this.getCurve(),c=i<a?u.getPrevious():u,h=n.getCurve(),f=r<a?h.getPrevious():h;if(i>o&&(u=u.getNext()),r>o&&(h=h.getNext()),!(c&&u&&f&&h))return!1;var d=[];s||(e(c,!0),e(u,!1)),l||(e(f,!0),e(h,!1));var p=this.getPoint(),g=Math.min.apply(Math,d),m=s?u.getTangentAtTime(i):u.getPointAt(g).subtract(p),v=s?m.negate():c.getPointAt(-g).subtract(p),_=l?h.getTangentAtTime(r):h.getPointAt(g).subtract(p),y=l?_.negate():f.getPointAt(-g).subtract(p),b=v.getAngle(),w=m.getAngle(),x=y.getAngle(),E=_.getAngle();return!!(s?t(b,x,E)^t(w,x,E)&&t(b,E,x)^t(w,E,x):t(x,b,w)^t(E,b,w)&&t(x,w,b)^t(E,w,b))},hasOverlap:function(){return!!this._overlap}},r.each(C._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var e=this.getCurve(),n=this.getTime();return null!=n&&e&&e[t](n,!0)}},{preserve:!0}),new function(){function e(e,t,n){function i(n,i){for(var a=n+i;a>=-1&&a<=r;a+=i){var o=e[(a%r+r)%r];if(!t.getPoint().isClose(o.getPoint(),1e-7))break;if(t.equals(o))return o}return null}for(var r=e.length,a=0,o=r-1;a<=o;){var s,l=a+o>>>1,u=e[l];if(n&&(s=t.equals(u)?u:i(l,-1)||i(l,1)))return t._overlap&&(s._overlap=s._intersection._overlap=!0),s;var c=t.getPath(),h=u.getPath(),f=c!==h?c._id-h._id:t.getIndex()+t.getTime()-(u.getIndex()+u.getTime());f<0?o=l-1:a=l+1}return e.splice(a,0,t),t}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),i=t.length-1;i>=0;i--)e(n,t[i]._intersection,!1);return n}}}}),O=b.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,n,i;if(r.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:"string"==typeof e&&(t=e),n){var a=n[0];i=a&&Array.isArray(a[0])}else t&&(i=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));var o=i?N:L;return new o(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){function t(e,t){var n=+i[e];return s&&(n+=l[t]),n}function n(e){return new h(t(e,"x"),t(e+1,"y"))}var i,r,a,o=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,l=new h,u=new h;this.clear();for(var c=0,f=o&&o.length;c<f;c++){var p=o[c],g=p[0],m=g.toLowerCase();i=p.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var v=i&&i.length;switch(s=g===m,"z"!==r||/[mz]/.test(m)||this.moveTo(l),m){case"m":case"l":for(var _="m"===m,y=0;y<v;y+=2)this[_?"moveTo":"lineTo"](l=n(y)),_&&(u=l,_=!1);a=l;break;case"h":case"v":var b="h"===m?"x":"y";l=l.clone();for(var y=0;y<v;y++)l[b]=t(y,b),this.lineTo(l);a=l;break;case"c":for(var y=0;y<v;y+=6)this.cubicCurveTo(n(y),a=n(y+2),l=n(y+4));break;case"s":for(var y=0;y<v;y+=4)this.cubicCurveTo(/[cs]/.test(r)?l.multiply(2).subtract(a):l,a=n(y),l=n(y+2)),r=m;break;case"q":for(var y=0;y<v;y+=4)this.quadraticCurveTo(a=n(y),l=n(y+2));break;case"t":for(var y=0;y<v;y+=2)this.quadraticCurveTo(a=/[qt]/.test(r)?l.multiply(2).subtract(a):l,l=n(y)),r=m;break;case"a":for(var y=0;y<v;y+=7)this.arcTo(l=n(y+5),new d((+i[y]),(+i[y+1])),+i[y+2],+i[y+4],+i[y+3]);break;case"z":this.closePath(1e-12),l=u}r=m}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!("evenodd"===this.getFillRule()?1&t.windingL||1&t.windingR:t.winding)},getIntersections:function(e,t,n,i){var r=this===e||!e,a=this._matrix._orNullIfIdentity(),o=r?a:(n||e._matrix)._orNullIfIdentity();return r||this.getBounds(a).intersects(e.getBounds(o),1e-12)?C.getIntersections(this.getCurves(),!r&&e.getCurves(),t,a,o,i):[]},getCrossings:function(e){return this.getIntersections(e,function(e){return e.hasOverlap()||e.isCrossing()})},getNearestLocation:function(){for(var e=h.read(arguments),t=this.getCurves(),n=1/0,i=null,r=0,a=t.length;r<a;r++){var o=t[r].getNearestLocation(e);o._distance<n&&(n=o._distance,i=o)}return i},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e?e.getPoint():e},interpolate:function(e,t,n){var i=!this._children,r=i?"_segments":"_children",a=e[r],o=t[r],s=this[r];if(!a||!o||a.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var l=s.length,u=o.length;if(l<u)for(var c=i?A:L,h=l;h<u;h++)this.add(new c);else l>u&&this[i?"removeSegments":"removeChildren"](u,l);for(var h=0;h<u;h++)s[h].interpolate(a[h],o[h],n);i&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],i=e._children?e._children.slice():[e],r=n.length,a=i.length,o=[],s=0;t=!0;for(var l=r-1;l>=0&&t;l--){var u=n[l];t=!1;for(var c=a-1;c>=0&&!t;c--)u.compare(i[c])&&(o[c]||(o[c]=!0,s++),t=!0)}t=t&&s===a}return t}}),L=O.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var n=Array.isArray(e)?"object"==typeof e[0]?e:arguments:!e||e.size!==t||e.x===t&&e.point===t?null:arguments;n&&n.length>0?this.setSegments(n):(this._curves=t,this._segmentSelection=0,n||"string"!=typeof e||(this.setPathData(e),e=null)),this._initialize(!n&&e)},_equals:function(e){return this._closed===e._closed&&r.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(n){if(e.base.call(this,n),8&n){if(this._length=this._area=t,16&n)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;i<r;i++)this._curves[i]._changed()}else 32&n&&(this._bounds=t)},getStyle:function(){var e=this._parent;return(e instanceof N?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var n=this.isFullySelected(),i=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=t,i){var r=e[i-1];"boolean"==typeof r&&(this.setClosed(r),i--),this._add(A.readList(e,0,{},i))}n&&this.setFullySelected(!0);
},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var i=0;i<n;i++)e[i]=new C(this,t[i],t[i+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new C(this,this._segments[t-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(e,t){function n(t,n){if(t._transformCoordinates(e,g),i=g[0],r=g[1],m)v.push("M"+p.pair(i,r)),m=!1;else if(s=g[2],u=g[3],s===i&&u===r&&c===a&&h===o){if(!n){var l=i-a,f=r-o;v.push(0===l?"v"+p.number(f):0===f?"h"+p.number(l):"l"+p.pair(l,f))}}else v.push("c"+p.pair(c-a,h-o)+" "+p.pair(s-a,u-o)+" "+p.pair(i-a,r-o));a=i,o=r,c=g[4],h=g[5]}var i,r,a,o,s,u,c,h,f=this._segments,d=f.length,p=new l(t),g=new Array(6),m=!0,v=[];if(!d)return"";for(var _=0;_<d;_++)n(f[_]);return this._closed&&d>0&&(n(f[0],!0),v.push("z")),v.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),i=0,r=t.length;i<r;i++)t[i]._transformCoordinates(e,n,!0);return!0},_add:function(e,t){for(var n=this._segments,i=this._curves,r=e.length,a=null==t,t=a?n.length:t,o=0;o<r;o++){var s=e[o];s._path&&(s=e[o]=s.clone()),s._path=this,s._index=t+o,s._selection&&this._updateSelection(s,0,s._selection)}if(a)n.push.apply(n,e);else{n.splice.apply(n,[t,0].concat(e));for(var o=t+r,l=n.length;o<l;o++)n[o]._index=o}if(i){var u=this._countCurves(),c=t>0&&t+r-1===u?t-1:t,h=c,f=Math.min(c+r,u);e._curves&&(i.splice.apply(i,[c,0].concat(e._curves)),h+=e._curves.length);for(var o=h;o<f;o++)i.splice(o,0,new C(this,null,null));this._adjustCurves(c,f)}return this._changed(25),e},_adjustCurves:function(e,t){for(var n,i=this._segments,r=this._curves,a=e;a<t;a++)n=r[a],n._path=this,n._segment1=i[a],n._segment2=i[a+1]||i[0],n._changed();(n=r[this._closed&&!e?i.length-1:e-1])&&(n._segment2=i[e]||i[0],n._changed()),(n=r[t])&&(n._segment1=i[t],n._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){return arguments.length>1&&"number"!=typeof e?this._add(A.readList(arguments)):this._add([A.read(arguments)])[0]},insert:function(e,t){return arguments.length>2&&"number"!=typeof t?this._add(A.readList(arguments,1),e):this._add([A.read(arguments,1)],e)[0]},addSegment:function(){return this._add([A.read(arguments)])[0]},insertSegment:function(e){return this._add([A.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(A.readList(e))},insertSegments:function(e,t){return this._add(A.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=r.pick(t,this._segments.length);var i=this._segments,a=this._curves,o=i.length,s=i.splice(e,t-e),l=s.length;if(!l)return s;for(var u=0;u<l;u++){var c=s[u];c._selection&&this._updateSelection(c,c._selection,0),c._index=c._path=null}for(var u=e,h=i.length;u<h;u++)i[u]._index=u;if(a){for(var f=e>0&&t===o+(this._closed?1:0)?e-1:e,a=a.splice(f,l),u=a.length-1;u>=0;u--)a[u]._path=null;n&&(s._curves=a.slice(1)),this._adjustCurves(f,f)}return this._changed(25),s},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(null==this._length){for(var e=this.getCurves(),t=0,n=0,i=e.length;n<i;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(null==e){var t=this._segments,n=this._closed;e=0;for(var i=0,r=t.length;i<r;i++){var a=i+1===r;e+=C.getArea(C.getValues(t[i],t[a?0:i+1],null,a&&!n))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===7*e},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){1&t||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,i=e?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)t[r]._selection=i},_updateSelection:function(e,t,n){e._selection=n;var i=this._segmentSelection+=n-t;i>0&&this.setSelected(!0)},divideAt:function(e){var t,n=this.getLocationAt(e);return n&&(t=n.getCurve().divideAt(n.getCurveOffset()))?t._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,i=t&&t.time,r=1e-8,a=1-r;i>a&&(n++,i=0);var o=this.getCurves();if(n>=0&&n<o.length){i>=r&&o[n++].divideAtTime(i);var s,l=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):(s=new L(b.NO_INSERT),s.insertAbove(this),s.copyAttributes(this)),s._add(l,0),this.addSegment(l[0]),s}return null},split:function(e,n){var i,r=n===t?e:(i=this.getCurves()[e])&&i.getLocationAtTime(n);return null!=r?this.splitAt(r):null},join:function(e,t){var n=t||0;if(e&&e!==this){var i=e._segments,r=this.getLastSegment(),a=e.getLastSegment();if(!a)return this;r&&r._point.isClose(a._point,n)&&e.reverse();var o=e.getFirstSegment();if(r&&r._point.isClose(o._point,n))r.setHandleOut(o._handleOut),this._add(i.slice(1));else{var s=this.getFirstSegment();s&&s._point.isClose(o._point,n)&&e.reverse(),a=e.getLastSegment(),s&&s._point.isClose(a._point,n)?(s.setHandleIn(a._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}e._closed&&this._add([i[0]]),e.remove()}var l=this.getFirstSegment(),u=this.getLastSegment();return l!==u&&l._point.isClose(u._point,n)&&(l.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,i=n?1e-7:0,r=t.length-1;r>=0;r--){var a=t[r];!a.hasHandles()&&(!a.hasLength(i)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new F(this,e||.25,256,(!0)),n=t.parts,i=n.length,r=[],a=0;a<i;a++)r.push(new A(n[a].curve.slice(0,2)));!this._closed&&i>0&&r.push(new A(n[i-1].curve.slice(6))),this.setSegments(r)},simplify:function(e){var t=new D(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){function n(e,t){var n=e&&e.index;if(null!=n){var r=e.path;if(r&&r!==i)throw new Error(e._class+" "+n+" of "+r+" is not part of "+i);t&&e instanceof C&&n++}else n="number"==typeof e?e:t;return Math.min(n<0&&l?n%s:n<0?n+s:n,s-1)}var i=this,r=e||{},a=r.type||"asymmetric",o=this._segments,s=o.length,l=this._closed,u=l&&r.from===t&&r.to===t,c=n(r.from,0),h=n(r.to,s-1);if(c>h)if(l)c-=s;else{var f=c;c=h,h=f}if(/^(?:asymmetric|continuous)$/.test(a)){var d="asymmetric"===a,p=Math.min,g=h-c+1,m=g-1,v=u?p(g,4):1,_=v,y=v,b=[];if(l||(_=p(1,c),y=p(1,s-h-1)),m+=_+y,m<=1)return;for(var w=0,x=c-_;w<=m;w++,x++)b[w]=o[(x<0?x+s:x)%s]._point;for(var E=b[0]._x+2*b[1]._x,k=b[0]._y+2*b[1]._y,M=2,T=m-1,S=[E],A=[k],R=[M],P=[],O=[],w=1;w<m;w++){var L=w<T,N=L?1:d?1:2,F=L?4:d?2:7,D=L?4:d?3:8,I=L?2:d?0:1,U=N/M;M=R[w]=F-U,E=S[w]=D*b[w]._x+I*b[w+1]._x-U*E,k=A[w]=D*b[w]._y+I*b[w+1]._y-U*k}P[T]=S[T]/R[T],O[T]=A[T]/R[T];for(var w=m-2;w>=0;w--)P[w]=(S[w]-P[w+1])/R[w],O[w]=(A[w]-O[w+1])/R[w];P[m]=(3*b[m]._x-P[T])/2,O[m]=(3*b[m]._y-O[T])/2;for(var w=_,H=m-y,x=c;w<=H;w++,x++){var z=o[x<0?x+s:x],B=z._point,j=P[w]-B._x,V=O[w]-B._y;(u||w<H)&&z.setHandleOut(j,V),(u||w>_)&&z.setHandleIn(-j,-V)}}else for(var w=c;w<=h;w++)o[w<0?w+s:w].smooth(r,!u&&w===c,!u&&w===h)},toShape:function(e){function n(e,t){var n=h[e],i=n.getNext(),r=h[t],a=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&a._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(a._point.subtract(r._point))}function i(e){var t=h[e],n=t.getPrevious(),i=t.getNext();return n._handleOut.isZero()&&t._handleIn.isZero()&&t._handleOut.isZero()&&i._handleIn.isZero()&&t._point.subtract(n._point).isOrthogonal(i._point.subtract(t._point))}function r(e){var t=h[e],n=t.getNext(),i=t._handleOut,r=n._handleIn,a=.5522847498307936;if(i.isOrthogonal(r)){var o=t._point,s=n._point,l=new _(o,i,(!0)).intersect(new _(s,r,(!0)),!0);return l&&u.isZero(i.getLength()/l.subtract(o).getLength()-a)&&u.isZero(r.getLength()/l.subtract(s).getLength()-a)}return!1}function a(e,t){return h[e]._point.getDistance(h[t]._point)}if(!this._closed)return null;var o,s,l,c,h=this._segments;if(!this.hasHandles()&&4===h.length&&n(0,2)&&n(1,3)&&i(1)?(o=E.Rectangle,s=new d(a(0,3),a(0,1)),c=h[1]._point.add(h[2]._point).divide(2)):8===h.length&&r(0)&&r(2)&&r(4)&&r(6)&&n(1,5)&&n(3,7)?(o=E.Rectangle,s=new d(a(1,6),a(0,3)),l=s.subtract(new d(a(0,7),a(1,2))).divide(2),c=h[3]._point.add(h[4]._point).divide(2)):4===h.length&&r(0)&&r(1)&&r(2)&&r(3)&&(u.isZero(a(0,2)-a(1,3))?(o=E.Circle,l=a(0,2)/2):(o=E.Ellipse,l=new d(a(2,0)/2,a(3,1)/2)),c=h[1]._point),o){var f=this.getPosition(!0),p=new o({center:f,size:s,radius:l,insert:!1});return p.copyAttributes(this,!0),p._matrix.prepend(this._matrix),p.rotate(c.subtract(f).getAngle()+90),(e===t||e)&&p.insertAbove(this),p}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof N)return e.base.call(this,t);var n=this.getCurves(),i=t.getCurves(),r=n.length,a=i.length;if(!r||!a)return r==a;for(var o,s,l=n[0].getValues(),u=[],c=0,h=0,f=0;f<a;f++){var d=i[f].getValues();u.push(d);var p=C.getOverlaps(l,d);if(p){o=!f&&p[0][0]>0?a-1:f,s=p[0][1];break}}for(var g,m=Math.abs,v=1e-8,d=u[o];l&&d;){var p=C.getOverlaps(l,d);if(p){var _=p[0][0];if(m(_-h)<v){h=p[1][0],1===h&&(l=++c<r?n[c].getValues():null,h=0);var y=p[0][1];if(m(y-s)<v){if(g||(g=[o,y]),s=p[1][1],1===s&&(++o>=a&&(o=0),d=u[o]||i[o].getValues(),s=0),!l)return g[0]===o&&g[1]===s;continue}}}break}return!1},_hitTestSelf:function(e,t,n,i){function r(t,n){return e.subtract(t).divide(n).length<=1}function a(e,n,i){if(!t.selected||n.isSelected()){var a=e._point;if(n!==a&&(n=n.add(a)),r(n,w))return new S(i,g,{segment:e,point:n})}}function o(e,n){return(n||t.segments)&&a(e,e._point,"segment")||!n&&t.handles&&(a(e,e._handleIn,"handle-in")||a(e,e._handleOut,"handle-out"))}function s(e){f.add(e)}function l(t){var n=y||t._index>0&&t._index<_-1;if("round"===(n?u:c))return r(t._point,w);if(f=new L({internal:!0,closed:!0}),n?t.isSmooth()||L._addBevelJoin(t,u,M,h,null,i,s,!0):"square"===c&&L._addSquareCap(t,c,M,null,i,s,!0),!f.isEmpty()){var a;return f.contains(e)||(a=f.getNearestLocation(e))&&r(a.getPoint(),b)}}var u,c,h,f,d,p,g=this,m=this.getStyle(),v=this._segments,_=v.length,y=this._closed,b=t._tolerancePadding,w=b,x=t.stroke&&m.hasStroke(),E=t.fill&&m.hasFill(),k=t.curves,M=x?m.getStrokeWidth()/2:E&&t.tolerance>0||k?0:null;if(null!==M&&(M>0?(u=m.getStrokeJoin(),c=m.getStrokeCap(),h=m.getMiterLimit(),w=w.add(L._getStrokePadding(M,i))):u=c="round"),!t.ends||t.segments||y){if(t.segments||t.handles)for(var T=0;T<_;T++)if(p=o(v[T]))return p}else if(p=o(v[0],!0)||o(v[_-1],!0))return p;if(null!==M){if(d=this.getNearestLocation(e)){var A=d.getTime();0===A||1===A&&_>1?l(d.getSegment())||(d=null):r(d.getPoint(),w)||(d=null)}if(!d&&"miter"===u&&_>1)for(var T=0;T<_;T++){var R=v[T];if(e.getDistance(R._point)<=h*M&&l(R)){d=R.getLocation();break}}}return!d&&E&&this._contains(e)||d&&!x&&!k?new S("fill",this):d?new S(x?"stroke":"curve",this,{location:d,point:d.getPoint()}):null}},r.each(C._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}},{beans:!1,getLocationOf:function(){for(var e=h.read(arguments),t=this.getCurves(),n=0,i=t.length;n<i;n++){var r=t[n].getLocationOf(e);if(r)return r}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if("number"==typeof e){for(var t=this.getCurves(),n=0,i=0,r=t.length;i<r;i++){var a=n,o=t[i];if(n+=o.getLength(),n>e)return o.getLocationAt(e-a)}if(t.length>0&&e<=this.getLength())return new P(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null}}),new function(){function e(e,t,n,i){function r(t){var n=l[t],i=l[t+1];a==n&&o==i||(e.beginPath(),e.moveTo(a,o),e.lineTo(n,i),e.stroke(),e.beginPath(),e.arc(n,i,s,0,2*Math.PI,!0),e.fill())}for(var a,o,s=i/2,l=new Array(6),u=0,c=t.length;u<c;u++){var h=t[u],f=h._selection;if(h._transformCoordinates(n,l),a=l[0],o=l[1],2&f&&r(2),4&f&&r(4),e.fillRect(a-s,o-s,i,i),!(1&f)){var d=e.fillStyle;e.fillStyle="#ffffff",e.fillRect(a-s+1,o-s+1,i-2,i-2),e.fillStyle=d}}}function t(e,t,n){function i(t){if(n)t._transformCoordinates(n,p),r=p[0],a=p[1];else{var i=t._point;r=i._x,a=i._y}if(g)e.moveTo(r,a),g=!1;else{if(n)l=p[2],u=p[3];else{var f=t._handleIn;l=r+f._x,u=a+f._y}l===r&&u===a&&c===o&&h===s?e.lineTo(r,a):e.bezierCurveTo(c,h,l,u,r,a)}if(o=r,s=a,n)c=p[4],h=p[5];else{var f=t._handleOut;c=o+f._x,h=s+f._y}}for(var r,a,o,s,l,u,c,h,f=t._segments,d=f.length,p=new Array(6),g=!0,m=0;m<d;m++)i(f[m]);t._closed&&d>0&&i(f[0])}return{_draw:function(e,n,i,r){function a(e){return h[(e%f+f)%f]}var o=n.dontStart,s=n.dontFinish||n.clip,l=this.getStyle(),u=l.hasFill(),c=l.hasStroke(),h=l.getDashArray(),f=!paper.support.nativeDash&&c&&h&&h.length;if(o||e.beginPath(),(u||c&&!f||s)&&(t(e,this,r),this._closed&&e.closePath()),!s&&(u||c)&&(this._setStyles(e,n,i),u&&(e.fill(l.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),c)){if(f){o||e.beginPath();var d,p=new F(this,.25,32,(!1),r),g=p.length,m=-l.getDashOffset(),v=0;for(m%=g;m>0;)m-=a(v--)+a(v--);for(;m<g;)d=m+a(v++),(m>0||d>0)&&p.drawPart(e,Math.max(m,0),Math.max(d,0)),m=d+a(v++)}e.stroke()}},_drawSelected:function(n,i){n.beginPath(),t(n,this,i),n.stroke(),e(n,this._segments,i,paper.settings.handleSize)}}},new function(){function e(e){var t=e._segments;if(!t.length)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(){var e=this._segments;1===e.length&&this.removeSegment(0),e.length||this._add([new A(h.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new A(h.read(arguments))])},cubicCurveTo:function(){var t=h.read(arguments),n=h.read(arguments),i=h.read(arguments),r=e(this);r.setHandleOut(t.subtract(r._point)),this._add([new A(i,n.subtract(i))])},quadraticCurveTo:function(){var t=h.read(arguments),n=h.read(arguments),i=e(this)._point;this.cubicCurveTo(t.add(i.subtract(t).multiply(1/3)),t.add(n.subtract(t).multiply(1/3)),n)},curveTo:function(){var t=h.read(arguments),n=h.read(arguments),i=r.pick(r.read(arguments),.5),a=1-i,o=e(this)._point,s=t.subtract(o.multiply(a*a)).subtract(n.multiply(i*i)).divide(2*i*a);if(s.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(s,n)},arcTo:function(){var t,n,i,a,o,s=Math.abs,l=Math.sqrt,c=e(this),f=c._point,p=h.read(arguments),g=r.peek(arguments),m=r.pick(g,!0);if("boolean"==typeof m)var y=f.add(p).divide(2),t=y.add(y.subtract(f).rotate(m?-90:90));else if(r.remain(arguments)<=2)t=p,p=h.read(arguments);else{var b=d.read(arguments),w=u.isZero;if(w(b.width)||w(b.height))return this.lineTo(p);var x=r.read(arguments),m=!!r.read(arguments),E=!!r.read(arguments),y=f.add(p).divide(2),k=f.subtract(y).rotate(-x),M=k.x,T=k.y,S=s(b.width),R=s(b.height),C=S*S,P=R*R,O=M*M,L=T*T,N=l(O/C+L/P);if(N>1&&(S*=N,R*=N,C=S*S,P=R*R),N=(C*P-C*L-P*O)/(C*L+P*O),s(N)<1e-12&&(N=0),N<0)throw new Error("Cannot create an arc with the given arguments");n=new h(S*T/R,-R*M/S).multiply((E===m?-1:1)*l(N)).rotate(x).add(y),o=(new v).translate(n).rotate(x).scale(S,R),a=o._inverseTransform(f),i=a.getDirectedAngle(o._inverseTransform(p)),!m&&i>0?i-=360:m&&i<0&&(i+=360)}if(t){var F=new _(f.add(t).divide(2),t.subtract(f).rotate(90),(!0)),D=new _(t.add(p).divide(2),p.subtract(t).rotate(90),(!0)),I=new _(f,p),U=I.getSide(t);if(n=F.intersect(D,!0),!n){if(!U)return this.lineTo(p);throw new Error("Cannot create an arc with the given arguments")}a=f.subtract(n),i=a.getDirectedAngle(p.subtract(n));var H=I.getSide(n);0===H?i=U*s(i):U===H&&(i+=i<0?360:-360)}for(var z=1e-7,B=s(i),j=B>=360?4:Math.ceil((B-z)/90),V=i/j,G=V*Math.PI/360,W=4/3*Math.sin(G)/(1+Math.cos(G)),X=[],Y=0;Y<=j;Y++){var k=p,q=null;if(Y<j&&(q=a.rotate(90).multiply(W),o?(k=o._transformPoint(a),q=o._transformPoint(a.add(q)).subtract(k)):k=n.add(a)),Y){var Z=a.rotate(-90).multiply(W);o&&(Z=o._transformPoint(a.add(Z)).subtract(k)),X.push(new A(k,Z,q))}else c.setHandleOut(q);a=a.rotate(V)}this._add(X)},lineBy:function(){var t=h.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=h.read(arguments),n=h.read(arguments),i=r.read(arguments),a=e(this)._point;this.curveTo(a.add(t),a.add(n),i)},cubicCurveBy:function(){var t=h.read(arguments),n=h.read(arguments),i=h.read(arguments),r=e(this)._point;this.cubicCurveTo(r.add(t),r.add(n),r.add(i))},quadraticCurveBy:function(){var t=h.read(arguments),n=h.read(arguments),i=e(this)._point;this.quadraticCurveTo(i.add(t),i.add(n))},arcBy:function(){var t=e(this)._point,n=t.add(h.read(arguments)),i=r.pick(r.peek(arguments),!0);"boolean"==typeof i?this.arcTo(n,i):this.arcTo(n,t.add(h.read(arguments)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return L[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,i,r,a){function o(e){e._transformCoordinates(i,l);for(var t=0;t<2;t++)C._addBounds(u[t],u[t+4],l[t+2],l[t],t,a?a[t]:0,c,h,f);var n=u;u=l,l=n}var s=e[0];if(!s)return new g;for(var l=new Array(6),u=s._transformCoordinates(i,new Array(6)),c=u.slice(0,2),h=c.slice(),f=new Array(2),d=1,p=e.length;d<p;d++)o(e[d]);return t&&o(s),new g(c[0],c[1],h[0]-c[0],h[1]-c[1])},getStrokeBounds:function(e,t,n,i,r){function a(e){m=m.include(e)}function o(e){m=m.unite(w.setCenter(e._point.transform(i)))}function s(e,t){"round"===t||e.isSmooth()?o(e):L._addBevelJoin(e,t,v,b,i,f,a)}function l(e,t){"round"===t?o(e):L._addSquareCap(e,t,v,i,f,a)}var u=n.getStyle(),c=u.hasStroke(),h=u.getStrokeWidth(),f=c&&n._getStrokeMatrix(i,r),p=c&&L._getStrokePadding(h,f),m=L.getBounds(e,t,n,i,r,p);if(!c)return m;for(var v=h/2,_=u.getStrokeJoin(),y=u.getStrokeCap(),b=u.getMiterLimit(),w=new g(new d(p)),x=e.length-(t?0:1),E=1;E<x;E++)s(e[E],_);return t?s(e[0],_):x>0&&(l(e[0],y),l(e[e.length-1],y)),m},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new h(e,0).transform(t),i=new h(0,e).transform(t),r=n.getAngleInRadians(),a=n.getLength(),o=i.getLength(),s=Math.sin(r),l=Math.cos(r),u=Math.tan(r),c=Math.atan2(o*u,a),f=Math.atan2(o,u*a);return[Math.abs(a*Math.cos(c)*l+o*Math.sin(c)*s),Math.abs(o*Math.sin(f)*l+a*Math.cos(f)*s)]},_addBevelJoin:function(e,t,n,i,r,a,o,s){var l=e.getCurve(),u=l.getPrevious(),c=l.getPoint1().transform(r),f=u.getNormalAtTime(1).multiply(n).transform(a),d=l.getNormalAtTime(0).multiply(n).transform(a);if(f.getDirectedAngle(d)<0&&(f=f.negate(),d=d.negate()),s&&o(c),o(c.add(f)),"miter"===t){var p=new _(c.add(f),new h((-f.y),f.x),(!0)).intersect(new _(c.add(d),new h((-d.y),d.x),(!0)),!0);p&&c.getDistance(p)<=i*n&&o(p)}o(c.add(d))},_addSquareCap:function(e,t,n,i,r,a,o){var s=e._point.transform(i),l=e.getLocation(),u=l.getNormal().multiply(0===l.getTime()?n:-n).transform(r);"square"===t&&(o&&(a(s.subtract(u)),a(s.add(u))),s=s.add(u.rotate(-90))),a(s.add(u)),a(s.subtract(u))},getHandleBounds:function(e,t,n,i,r){var a,o,s=n.getStyle(),l=r.stroke&&s.hasStroke();if(l){var u=n._getStrokeMatrix(i,r),c=s.getStrokeWidth()/2,h=c;"miter"===s.getStrokeJoin()&&(h=c*s.getMiterLimit()),"square"===s.getStrokeCap()&&(h=Math.max(h,c*Math.SQRT2)),a=L._getStrokePadding(c,u),o=L._getStrokePadding(h,u)}for(var f=new Array(6),d=1/0,p=-d,m=d,v=p,_=0,y=e.length;_<y;_++){var b=e[_];b._transformCoordinates(i,f);for(var w=0;w<6;w+=2){var x=w?a:o,E=x?x[0]:0,k=x?x[1]:0,M=f[w],T=f[w+1],S=M-E,A=M+E,R=T-k,C=T+k;S<d&&(d=S),A>p&&(p=A),R<m&&(m=R),C>v&&(v=C)}}return new g(d,m,p-d,v-m)}}});L.inject({statics:new function(){function e(e,t,n){var i=r.getNamed(n),a=new L(i&&0==i.insert&&b.NO_INSERT);return a._add(e),a._closed=t,a.set(i,{insert:!0})}function t(t,n,r){for(var a=new Array(4),o=0;o<4;o++){var s=i[o];a[o]=new A(s._point.multiply(n).add(t),s._handleIn.multiply(n),s._handleOut.multiply(n))}return e(a,!0,r)}var n=.5522847498307936,i=[new A([-1,0],[0,n],[0,-n]),new A([0,-1],[-n,0],[n,0]),new A([1,0],[0,-n],[0,n]),new A([0,1],[n,0],[-n,0])];return{Line:function(){return e([new A(h.readNamed(arguments,"from")),new A(h.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var e=h.readNamed(arguments,"center"),n=r.readNamed(arguments,"radius");return t(e,new d(n),arguments)},Rectangle:function(){var t,i=g.readNamed(arguments,"rectangle"),r=d.readNamed(arguments,"radius",0,{readNull:!0}),a=i.getBottomLeft(!0),o=i.getTopLeft(!0),s=i.getTopRight(!0),l=i.getBottomRight(!0);if(!r||r.isZero())t=[new A(a),new A(o),new A(s),new A(l)];else{r=d.min(r,i.getSize(!0).divide(2));var u=r.width,c=r.height,h=u*n,f=c*n;t=[new A(a.add(u,0),null,[-h,0]),new A(a.subtract(0,c),[0,f]),new A(o.add(0,c),null,[0,-f]),new A(o.add(u,0),[-h,0],null),new A(s.subtract(u,0),null,[h,0]),new A(s.add(0,c),[0,-f],null),new A(l.subtract(0,c),null,[0,f]),new A(l.subtract(u,0),[h,0])]}return e(t,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var e=E._readEllipse(arguments);return t(e.center,e.radius,arguments)},Oval:"#Ellipse",Arc:function(){var e=h.readNamed(arguments,"from"),t=h.readNamed(arguments,"through"),n=h.readNamed(arguments,"to"),i=r.getNamed(arguments),a=new L(i&&0==i.insert&&b.NO_INSERT);return a.moveTo(e),a.arcTo(t,n),a.set(i)},RegularPolygon:function(){for(var t=h.readNamed(arguments,"center"),n=r.readNamed(arguments,"sides"),i=r.readNamed(arguments,"radius"),a=360/n,o=n%3===0,s=new h(0,o?-i:i),l=o?-1:.5,u=new Array(n),c=0;c<n;c++)u[c]=new A(t.add(s.rotate((c+l)*a)));return e(u,!0,arguments)},Star:function(){for(var t=h.readNamed(arguments,"center"),n=2*r.readNamed(arguments,"points"),i=r.readNamed(arguments,"radius1"),a=r.readNamed(arguments,"radius2"),o=360/n,s=new h(0,(-1)),l=new Array(n),u=0;u<n;u++)l[u]=new A(t.add(s.rotate(o*u).multiply(u%2?a:i)));return e(l,!0,arguments)}}}});var N=O.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||("string"==typeof e?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function e(t,n){var i=n,a=i[0];a&&"number"==typeof a[0]&&(i=[i]);for(var o=n.length-1;o>=0;o--){var s=i[o];i!==n||s instanceof L||(i=r.slice(i)),Array.isArray(s)?i[o]=new L({segments:s,insert:!1}):s instanceof N&&(i.splice.apply(i,[o,1].concat(s.removeChildren())),s.remove())}return e.base.call(this,t,i)},reduce:function e(t){for(var n=this._children,i=n.length-1;i>=0;i--){var r=n[i].reduce(t);r.isEmpty()&&r.remove()}if(!n.length){var r=new L(b.NO_INSERT);return r.copyAttributes(this),r.insertAbove(this),this.remove(),r}return e.base.call(this)},isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,i=t.length;n<i;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,i=e.length;n<i;n++)t.push.apply(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,i=e.length;n<i;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,i=e.length;n<i;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,i=[],r=0,a=n.length;r<a;r++){var o=n[r],s=o._matrix;i.push(o.getPathData(e&&!s.isIdentity()?e.appended(s):e,t))}return i.join("")},_hitTestChildren:function e(t,n,i){return e.base.call(this,t,n.class===L||"path"===n.type?n:r.set({},n,{fill:!1}),i)},_draw:function(e,t,n,i){var r=this._children;if(r.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var a=0,o=r.length;a<o;a++)r[a].draw(e,t,i);if(!t.clip){this._setStyles(e,t,n);var s=this._style;s.hasFill()&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),s.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var i=this._children,r=0,a=i.length;r<a;r++){var o=i[r],s=o._matrix;n[o._id]||o._drawSelected(e,s.isIdentity()?t:t.appended(s))}}},new function(){function e(e,t){var n=e._children;if(t&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return r.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}},{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new L(b.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),i=h.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(t){e(this,!0).closePath(t)}})},r.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var n,i=this._children,r=0,a=i.length;r<a;r++)n=i[r][e](t)||n;return n}},{}));O.inject(new function(){function e(e,t){var n=e.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return t?n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0):n}function n(e,t,n,i,r){var a=new N(b.NO_INSERT);return a.addChildren(e,!0),a=a.reduce({simplify:t}),r&&0==r.insert||a.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),a.copyAttributes(n,!0),a}function i(t,i,r,o){function s(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];b.push.apply(b,i._segments),w.push.apply(w,i.getCurves()),i._overlapsOnly=!0}}if(o&&(0==o.trace||o.stroke)&&/^(subtract|intersect)$/.test(r))return a(t,i,r);var u=e(t,!0),h=i&&t!==i&&e(i,!0),p=v[r];p[r]=!0,h&&(p.subtract||p.exclude)^(h.isClockwise()^u.isClockwise())&&h.reverse();var g,m=c(P.expand(u.getCrossings(h))),_=u._children||[u],y=h&&(h._children||[h]),b=[],w=[];if(m.length){s(_),y&&s(y);for(var x=0,E=m.length;x<E;x++)f(m[x]._segment,u,h,w,p);for(var x=0,E=b.length;x<E;x++){var k=b[x],M=k._intersection;k._winding||f(k,u,h,w,p),M&&M._overlap||(k._path._overlapsOnly=!1)}g=d(b,p)}else g=l(y?_.concat(y):_.slice(),function(e){return!!p[e]});return n(g,!0,t,i,o)}function a(t,i,r){function a(e){if(!h[e._id]&&(c||s.contains(e.getPointAt(e.getLength()/2))^u))return f.unshift(e),h[e._id]=!0}for(var o=e(t),s=e(i),l=o.getCrossings(s),u="subtract"===r,c="divide"===r,h={},f=[],d=l.length-1;d>=0;d--){var p=l[d].split();p&&(a(p)&&p.getFirstSegment().setHandleIn(0,0),o.getLastSegment().setHandleOut(0,0))}return a(o),n(f,!1,t,i)}function o(e,t){for(var n=e;n;){if(n===t)return;n=n._previous}for(;e._next&&e._next!==t;)e=e._next;if(!e._next){for(;t._previous;)t=t._previous;e._next=t,t._previous=e}}function s(e){for(var t=e.length-1;t>=0;t--)e[t].clearHandles()}function l(e,t,n){var i=e&&e.length;if(i){var a=r.each(e,function(e,t){this[e._id]={container:null,winding:e.isClockwise()?1:-1,index:t}},{}),o=e.slice().sort(function(e,t){return m(t.getArea())-m(e.getArea())}),s=o[0];null==n&&(n=s.isClockwise());for(var l=0;l<i;l++){for(var u=o[l],c=a[u._id],h=u.getInteriorPoint(),f=0,d=l-1;d>=0;d--){var p=o[d];if(p.contains(h)){var g=a[p._id];f=g.winding,c.winding+=f,c.container=g.exclude?g.container:p;break}}if(t(c.winding)===t(f))c.exclude=!0,e[c.index]=null;else{var v=c.container;u.setClockwise(v?!v.isClockwise():n)}}}return e}function c(e,t,n){function i(e){return e._path._id+"."+e._segment1._index}for(var r,a,l,u=t&&[],c=1e-8,h=1-c,f=!1,d=n||[],p=n&&{},g=(n&&n.length)-1;g>=0;g--){var m=n[g];m._path&&(p[i(m)]=!0)}for(var g=e.length-1;g>=0;g--){var v,_=e[g],y=_._time,b=y,w=t&&!t(_),m=_._curve;if(m&&(m!==a?(f=!m.hasHandles()||p&&p[i(m)],r=[],l=null,a=m):l>=c&&(y/=l)),w)r&&r.push(_);else{if(t&&u.unshift(_),l=b,y<c)v=m._segment1;else if(y>h)v=m._segment2;else{var x=m.divideAtTime(y,!0);f&&d.push(m,x),v=x._segment1;for(var E=r.length-1;E>=0;E--){var k=r[E];k._time=(k._time-y)/(1-y)}}_._setSegment(v);var M=v._intersection,T=_._intersection;if(M){o(M,T);for(var S=M;S;)o(S._intersection,M),S=S._next}else v._intersection=T}}return n||s(d),u||e}function h(e,t,n,i,r){function a(a){var o=a[c+0],l=a[c+6];if(!(v<p(o,l)||v>g(o,l))){var f=a[u+0],m=a[u+2],_=a[u+4],x=a[u+6];if(o===l)return void((f<w&&x>b||x<w&&f>b)&&(T=!0));var E=v===o?0:v===l?1:b>g(f,m,_,x)||w<p(f,m,_,x)?1:C.solveCubic(a,c,v,R,0,1)>0?R[0]:1,S=0===E?f:1===E?x:C.getPoint(a,E)[n?"y":"x"],P=o>l?1:-1,O=s[c]>s[c+6]?1:-1,L=s[u+6];return v!==o?(S<b?k+=P:S>w?M+=P:T=!0,S>d-y&&S<d+y&&(A/=2)):(P!==O?f<b?k+=P:f>w&&(M+=P):f!=L&&(L<w&&S>w?(M+=P,T=!0):L>b&&S<b&&(k+=P,T=!0)),A=0),s=a,!r&&S>b&&S<w&&0===C.getTangent(a,E)[n?"x":"y"]&&h(e,t,!n,i,!0)}}function o(e){var t=e[c+0],i=e[c+2],r=e[c+4],o=e[c+6];if(v<=g(t,i,r,o)&&v>=p(t,i,r,o))for(var s,l=e[u+0],h=e[u+2],f=e[u+4],d=e[u+6],m=b>g(l,h,f,d)||w<p(l,h,f,d)?[e]:C.getMonoCurves(e,n),_=0,y=m.length;_<y;_++)if(s=a(m[_]))return s}for(var s,l,u=n?1:0,c=1^u,f=[e.x,e.y],d=f[u],v=f[c],_=1e-9,y=1e-6,b=d-_,w=d+_,x=0,E=0,k=0,M=0,T=!1,S=!1,A=1,R=[],P=0,O=t.length;P<O;P++){var L,N=t[P],F=N._path,D=N.getValues();if(!(P&&t[P-1]._path===F||(s=null,F._closed||(l=C.getValues(F.getLastCurve().getSegment2(),N.getSegment1(),null,!i),l[c]!==l[c+6]&&(s=l)),s))){s=D;for(var I=F.getLastCurve();I&&I!==N;){var U=I.getValues();if(U[c]!==U[c+6]){s=U;break}I=I.getPrevious()}}if(L=o(D))return L;if(P+1===O||t[P+1]._path!==F){if(l&&(L=o(l)))return L;!T||k||M||(k=M=F.isClockwise(i)^n?1:-1),x+=k,E+=M,k=M=0,T&&(S=!0,T=!1),l=null}}return x=m(x),E=m(E),{winding:g(x,E),windingL:x,windingR:E,quality:A,onPath:S}}function f(e,t,n,i,r){var a,o=[],s=e,l=0;do{var c=e.getCurve(),f=c.getLength();o.push({segment:e,curve:c,length:f}),l+=f,e=e.getNext()}while(e&&!e._intersection&&e!==s);for(var d=[.5,.25,.75],a={winding:0,quality:-1},p=1e-8,g=1-p,v=0;v<d.length&&a.quality<.5;v++)for(var f=l*d[v],_=0,y=o.length;_<y;_++){var b=o[_],w=b.length;if(f<=w){var c=b.curve,x=c._path,E=x._parent,k=E instanceof N?E:x,M=u.clamp(c.getTimeAt(f),p,g),T=c.getPointAtTime(M),S=m(c.getTangentAtTime(M).y)<Math.SQRT1_2,A=r.subtract&&n&&(k===t&&n._getWinding(T,S,!0).winding||k===n&&!t._getWinding(T,S,!0).winding)?{winding:0,quality:1}:h(T,i,S,!0);A.quality>a.quality&&(a=A);break}f-=w}for(var _=o.length-1;_>=0;_--)o[_].segment._winding=a}function d(e,t){function n(e){var n;return!(!e||e._visited||t&&(!t[(n=e._winding||{}).winding]||t.unite&&2===n.winding&&n.windingL&&n.windingR))}function i(e){if(e)for(var t=0,n=o.length;t<n;t++)if(e===o[t])return!0;return!1}function r(e){for(var t=e._segments,n=0,i=t.length;n<i;n++)t[n]._visited=!0}function a(e,t){function r(r,a){for(;r&&r!==a;){var s=r._segment,u=s&&s._path;if(u){var c=s.getNext()||u.getFirstSegment(),h=c._intersection;s!==e&&(i(s)||i(c)||c&&n(s)&&(n(c)||h&&n(h._segment)))&&l.push(s),t&&o.push(s)}r=r._next}}var a=e._intersection,s=a,l=[];if(t&&(o=[e]),a){for(r(a);a&&a._prev;)a=a._prev;r(a,s)}return l}var o,s=[];e.sort(function(e,t){var n=e._intersection,i=t._intersection,r=!(!n||!n._overlap),a=!(!i||!i._overlap),o=e._path,s=t._path;return r^a?r?1:-1:!n^!i?n?1:-1:o!==s?o._id-s._id:e._index-t._index});for(var l=0,u=e.length;l<u;l++){var c,h,f,d=e[l],p=n(d),g=null,m=!1,v=!0,_=[];if(p&&d._path._overlapsOnly){var y=d._path,w=d._intersection._segment._path;y.compare(w)&&(y.getArea()&&s.push(y.clone(!1)),r(y),r(w),p=!1)}for(;p;){var x=!g,E=a(d,x),k=E.shift(),m=!x&&(i(d)||i(k)),M=!m&&k;
if(x&&(g=new L(b.NO_INSERT),c=null),m){(d.isFirst()||d.isLast())&&(v=d._path._closed),d._visited=!0;break}if(M&&c&&(_.push(c),c=null),c||(M&&E.push(d),c={start:g._segments.length,crossings:E,visited:h=[],handleIn:f}),M&&(d=k),!n(d)){g.removeSegments(c.start);for(var T=0,S=h.length;T<S;T++)h[T]._visited=!1;h.length=0;do d=c&&c.crossings.shift(),d&&d._path||(d=null,c=_.pop(),c&&(h=c.visited,f=c.handleIn));while(c&&!n(d));if(!d)break}var R=d.getNext();g.add(new A(d._point,f,R&&d._handleOut)),d._visited=!0,h.push(d),d=R||d._path.getFirstSegment(),f=R&&R._handleIn}m&&(v&&(g.getFirstSegment().setHandleIn(f),g.setClosed(v)),0!==g.getArea()&&s.push(g))}return s}var p=Math.min,g=Math.max,m=Math.abs,v={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(e,t,n){return h(e,this.getCurves(),t,n)},unite:function(e,t){return i(this,e,"unite",t)},intersect:function(e,t){return i(this,e,"intersect",t)},subtract:function(e,t){return i(this,e,"subtract",t)},exclude:function(e,t){return i(this,e,"exclude",t)},divide:function(e,t){return t&&(0==t.trace||t.stroke)?a(this,e,"divide"):n([this.subtract(e,t),this.intersect(e,t)],!0,this,e,t)},resolveCrossings:function(){function e(e,t){var n=e&&e._intersection;return n&&n._overlap&&n._path===t}var t=this._children,n=t||[this],i=!1,a=!1,o=this.getIntersections(null,function(e){return e.hasOverlap()&&(i=!0)||e.isCrossing()&&(a=!0)}),l=i&&a&&[];if(o=P.expand(o),i)for(var u=c(o,function(e){return e.hasOverlap()},l),h=u.length-1;h>=0;h--){var f=u[h],p=f._path,g=f._segment,m=g.getPrevious(),v=g.getNext();e(m,p)&&e(v,p)&&(g.remove(),m._handleOut._set(0,0),v._handleIn._set(0,0),m===g||m.getCurve().hasLength()||(v._handleIn.set(m._handleIn),m.remove()))}a&&(c(o,i&&function(e){var t=e.getCurve(),n=e.getSegment(),i=e._intersection,r=i._curve,a=i._segment;return!!(t&&r&&t._path&&r._path)||(n&&(n._intersection=null),void(a&&(a._intersection=null)))},l),l&&s(l),n=d(r.each(n,function(e){this.push.apply(this,e._segments)},[])));var _,y=n.length;return y>1&&t?(n!==t&&this.setChildren(n),_=this):1!==y||t||(n[0]!==this&&this.setSegments(n[0].removeSegments()),_=this),_||(_=new N(b.NO_INSERT),_.addChildren(n),_=_.reduce(),_.copyAttributes(this),this.replaceWith(_)),_},reorient:function(e,n){var i=this._children;return i&&i.length?this.setChildren(l(this.removeChildren(),function(t){return!!(e?t:1&t)},n)):n!==t&&this.setClockwise(n),this},getInteriorPoint:function(){var e=this.getBounds(),t=e.getCenter(!0);if(!this.contains(t)){for(var n=this.getCurves(),i=t.y,r=[],a=[],o=0,s=n.length;o<s;o++){var l=n[o].getValues(),u=l[1],c=l[3],h=l[5],f=l[7];if(i>=p(u,c,h,f)&&i<=g(u,c,h,f))for(var d=C.getMonoCurves(l),m=0,v=d.length;m<v;m++){var _=d[m],y=_[1],b=_[7];if(y!==b&&(i>=y&&i<=b||i>=b&&i<=y)){var w=i===y?_[0]:i===b?_[6]:1===C.solveCubic(_,1,i,a,0,1)?C.getPoint(_,a[0]).x:(_[0]+_[6])/2;r.push(w)}}}r.length>1&&(r.sort(function(e,t){return e-t}),t.x=(r[0]+r[1])/2)}return t}}});var F=r.extend({_class:"PathFlattener",initialize:function(e,t,n,i,r){function a(e,t){var n=C.getValues(e,t,r);l.push(n),o(n,e._index,0,1)}function o(e,n,r,a){if(!(a-r>h)||i&&C.isStraight(e)||C.isFlatEnough(e,t||.25)){var s=e[6]-e[0],l=e[7]-e[1],f=Math.sqrt(s*s+l*l);f>0&&(c+=f,u.push({offset:c,curve:e,index:n,time:a}))}else{var d=C.subdivide(e,.5),p=(r+a)/2;o(d[0],n,r,p),o(d[1],n,p,a)}}for(var s,l=[],u=[],c=0,h=1/(n||32),f=e._segments,d=f[0],p=1,g=f.length;p<g;p++)s=f[p],a(d,s),d=s;e._closed&&a(s,f[0]),this.curves=l,this.parts=u,this.length=c,this.index=0},_get:function(e){for(var t,n=this.parts,i=n.length,r=this.index;t=r,r&&!(n[--r].offset<e););for(;t<i;t++){var a=n[t];if(a.offset>=e){this.index=t;var o=n[t-1],s=o&&o.index===a.index?o.time:0,l=o?o.offset:0;return{index:a.index,time:s+(a.time-s)*(e-l)/(a.offset-l)}}}return{index:n[i-1].index,time:1}},drawPart:function(e,t,n){for(var i=this._get(t),r=this._get(n),a=i.index,o=r.index;a<=o;a++){var s=C.getPart(this.curves[a],a===i.index?i.time:0,a===r.index?r.time:1);a===i.index&&e.moveTo(s[0],s[1]),e.bezierCurveTo.apply(e,s.slice(2))}}},r.each(C._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this._get(t);return C[e](this.curves[n.index],n.time)}},{})),D=r.extend({initialize:function(e){for(var t,n=this.points=[],i=e._segments,r=e._closed,a=0,o=i.length;a<o;a++){var s=i[a].point;t&&t.equals(s)||n.push(t=s.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(e){var t=this.points,n=t.length,i=null;return n>0&&(i=[new A(t[0])],n>1&&(this.fitCubic(i,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(e,t,n,i,r,a){var o=this.points;if(i-n===1){var s=o[n],l=o[i],u=s.getDistance(l)/3;return void this.addCurve(e,[s,s.add(r.normalize(u)),l.add(a.normalize(u)),l])}for(var c,h=this.chordLengthParameterize(n,i),f=Math.max(t,t*t),d=!0,p=0;p<=4;p++){var g=this.generateBezier(n,i,h,r,a),m=this.findMaxError(n,i,g,h);if(m.error<t&&d)return void this.addCurve(e,g);if(c=m.index,m.error>=f)break;d=this.reparameterize(n,i,h,g),f=m.error}var v=o[c-1].subtract(o[c+1]);this.fitCubic(e,t,n,c,r,v),this.fitCubic(e,t,c,i,v.negate(),a)},addCurve:function(e,t){var n=e[e.length-1];n.setHandleOut(t[1].subtract(t[0])),e.push(new A(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,i,r){for(var a=1e-12,o=Math.abs,s=this.points,l=s[e],u=s[t],c=[[0,0],[0,0]],h=[0,0],f=0,d=t-e+1;f<d;f++){var p=n[f],g=1-p,m=3*p*g,v=g*g*g,_=m*g,y=m*p,b=p*p*p,w=i.normalize(_),x=r.normalize(y),E=s[e+f].subtract(l.multiply(v+_)).subtract(u.multiply(y+b));c[0][0]+=w.dot(w),c[0][1]+=w.dot(x),c[1][0]=c[0][1],c[1][1]+=x.dot(x),h[0]+=w.dot(E),h[1]+=x.dot(E)}var k,M,T=c[0][0]*c[1][1]-c[1][0]*c[0][1];if(o(T)>a){var S=c[0][0]*h[1]-c[1][0]*h[0],A=h[0]*c[1][1]-h[1]*c[0][1];k=A/T,M=S/T}else{var R=c[0][0]+c[0][1],C=c[1][0]+c[1][1];k=M=o(R)>a?h[0]/R:o(C)>a?h[1]/C:0}var P,O,L=u.getDistance(l),N=a*L;if(k<N||M<N)k=M=L/3;else{var F=u.subtract(l);P=i.normalize(k),O=r.normalize(M),P.dot(F)-O.dot(F)>L*L&&(k=M=L/3,P=O=null)}return[l,l.add(P||i.normalize(k)),u.add(O||r.normalize(M)),u]},reparameterize:function(e,t,n,i){for(var r=e;r<=t;r++)n[r-e]=this.findRoot(i,this.points[r],n[r-e]);for(var r=1,a=n.length;r<a;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(e,t,n){for(var i=[],r=[],a=0;a<=2;a++)i[a]=e[a+1].subtract(e[a]).multiply(3);for(var a=0;a<=1;a++)r[a]=i[a+1].subtract(i[a]).multiply(2);var o=this.evaluate(3,e,n),s=this.evaluate(2,i,n),l=this.evaluate(1,r,n),c=o.subtract(t),h=s.dot(s)+c.dot(l);return u.isZero(h)?n:n-c.dot(s)/h},evaluate:function(e,t,n){for(var i=t.slice(),r=1;r<=e;r++)for(var a=0;a<=e-r;a++)i[a]=i[a].multiply(1-n).add(i[a+1].multiply(n));return i[0]},chordLengthParameterize:function(e,t){for(var n=[0],i=e+1;i<=t;i++)n[i-e]=n[i-e-1]+this.points[i].getDistance(this.points[i-1]);for(var i=1,r=t-e;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(e,t,n,i){for(var r=Math.floor((t-e+1)/2),a=0,o=e+1;o<t;o++){var s=this.evaluate(3,n,i[o-e]),l=s.subtract(this.points[o]),u=l.x*l.x+l.y*l.y;u>=a&&(a=u,r=o)}return{error:a,index:r}}}),I=b.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var n=e&&r.isPlainObject(e)&&e.x===t&&e.y===t;this._initialize(n&&e,!n&&h.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),U=I.extend({_class:"PointText",initialize:function(){I.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new f(e.x,e.y,this,"setPoint")},setPoint:function(){var e=h.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var i=this._lines,r=this._style,a=r.hasFill(),o=r.hasStroke(),s=r.getLeading(),l=e.shadowColor;e.font=r.getFontStyle(),e.textAlign=r.getJustification();for(var u=0,c=i.length;u<c;u++){e.shadowColor=l;var h=i[u];a&&(e.fillText(h,0,0),e.shadowColor="rgba(0,0,0,0)"),o&&e.strokeText(h,0,0),e.translate(0,s)}}},_getBounds:function(e,t){var n=this._style,i=this._lines,r=i.length,a=n.getJustification(),o=n.getLeading(),s=this.getView().getTextWidth(n.getFontStyle(),i),l=0;"left"!==a&&(l-=s/("center"===a?2:1));var u=new g(l,r?-.75*o:0,s,r*o);return e?e._transformBounds(u,u):u}}),H=r.extend(new function(){function e(e){var i,r=e.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(r){i=[0,0,0];for(var a=0;a<3;a++){var s=r[a+1];i[a]=parseInt(1==s.length?s+s:s,16)/255}}else if(r=e.match(/^rgba?\((.*)\)$/)){i=r[1].split(",");for(var a=0,l=i.length;a<l;a++){var s=+i[a];i[a]=a<3?s/255:s}}else if(n){var u=o[e];if(!u){t||(t=ee.getContext(1,1),t.globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var c=t.getImageData(0,0,1,1).data;u=o[e]=[c[0]/255,c[1]/255,c[2]/255]}i=u.slice()}else i=[0,0,0];return i}var t,i={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},a={},o={},s=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],u={"rgb-hsb":function(e,t,n){var i=Math.max(e,t,n),r=Math.min(e,t,n),a=i-r,o=0===a?0:60*(i==e?(t-n)/a+(t<n?6:0):i==t?(n-e)/a+2:(e-t)/a+4);return[o,0===i?0:a/i,i]},"hsb-rgb":function(e,t,n){e=(e/60%6+6)%6;var i=Math.floor(e),r=e-i,i=s[i],a=[n,n*(1-t),n*(1-t*r),n*(1-t*(1-r))];return[a[i[0]],a[i[1]],a[i[2]]]},"rgb-hsl":function(e,t,n){var i=Math.max(e,t,n),r=Math.min(e,t,n),a=i-r,o=0===a,s=o?0:60*(i==e?(t-n)/a+(t<n?6:0):i==t?(n-e)/a+2:(e-t)/a+4),l=(i+r)/2,u=o?0:l<.5?a/(i+r):a/(2-i-r);return[s,u,l]},"hsl-rgb":function(e,t,n){if(e=(e/360%1+1)%1,0===t)return[n,n,n];for(var i=[e+1/3,e,e-1/3],r=n<.5?n*(1+t):n+t-n*t,a=2*n-r,o=[],s=0;s<3;s++){var l=i[s];l<0&&(l+=1),l>1&&(l-=1),o[s]=6*l<1?a+6*(r-a)*l:2*l<1?r:3*l<2?a+(r-a)*(2/3-l)*6:a}return o},"rgb-gray":function(e,t,n){return[.2989*e+.587*t+.114*n]},"gray-rgb":function(e){return[e,e,e]},"gray-hsb":function(e){return[0,0,e]},"gray-hsl":function(e){return[0,0,e]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return r.each(i,function(e,t){a[t]=[],r.each(e,function(e,n){var o=r.capitalize(e),s=/^(hue|saturation)$/.test(e),l=a[t][n]="gradient"===e?function(e){var t=this._components[0];return e=z.read(Array.isArray(e)?e:arguments,0,{readNull:!0}),t!==e&&(t&&t._removeOwner(this),e&&e._addOwner(this)),e}:"gradient"===t?function(){return h.read(arguments,0,{readNull:"highlight"===e,clone:!0})}:function(e){return null==e||isNaN(e)?0:e};this["get"+o]=function(){return this._type===t||s&&/^hs[bl]$/.test(this._type)?this._components[n]:this._convert(t)[n]},this["set"+o]=function(e){this._type===t||s&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(t),this._properties=i[t],this._type=t),this._components[n]=l.call(this,e),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function t(n){var o,s,l,u,c=arguments,h=this.__read,f=0;Array.isArray(n)&&(c=n,n=c[0]);var d=null!=n&&typeof n;if("string"===d&&n in i&&(o=n,n=c[1],Array.isArray(n)?(s=n,l=c[2]):(h&&(f=1),c=r.slice(c,1),d=typeof n)),!s){if(u="number"===d?c:"object"===d&&null!=n.length?n:null){o||(o=u.length>=3?"rgb":"gray");var p=i[o].length;l=u[p],h&&(f+=u===arguments?p+(null!=l?1:0):1),u.length>p&&(u=r.slice(u,0,p))}else if("string"===d)o="rgb",s=e(n),4===s.length&&(l=s[3],s.length--);else if("object"===d)if(n.constructor===t){if(o=n._type,s=n._components.slice(),l=n._alpha,"gradient"===o)for(var g=1,m=s.length;g<m;g++){var v=s[g];v&&(s[g]=v.clone())}}else if(n.constructor===z)o="gradient",u=c;else{o="hue"in n?"lightness"in n?"hsl":"hsb":"gradient"in n||"stops"in n||"radial"in n?"gradient":"gray"in n?"gray":"rgb";var _=i[o],y=a[o];this._components=s=[];for(var g=0,m=_.length;g<m;g++){var b=n[_[g]];null==b&&!g&&"gradient"===o&&"stops"in n&&(b={stops:n.stops,radial:n.radial}),b=y[g].call(this,b),null!=b&&(s[g]=b)}l=n.alpha}h&&o&&(f=1)}if(this._type=o||"rgb",!s){this._components=s=[];for(var y=a[this._type],g=0,m=y.length;g<m;g++){var b=y[g].call(this,u&&u[g]);null!=b&&(s[g]=b)}}return this._components=s,this._properties=i[this._type],this._alpha=l,h&&(this.__read=f),this},set:"#initialize",_serialize:function(e,t){var n=this.getComponents();return r.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),e,!0,t)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(e){var t;return this._type===e?this._components.slice():(t=u[this._type+"-"+e])?t.apply(this,this._components):u["rgb-"+e].apply(this,u[this._type+"-rgb"].apply(this,this._components))},convert:function(e){return new H(e,this._convert(e),this._alpha)},getType:function(){return this._type},setType:function(e){this._components=this._convert(e),this._properties=i[e],this._type=e},getComponents:function(){var e=this._components.slice();return null!=this._alpha&&e.push(this._alpha),e},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(e){this._alpha=null==e?null:Math.min(Math.max(e,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(e){var t=r.isPlainValue(e,!0)?H.read(arguments):e;return t===this||t&&this._class===t._class&&this._type===t._type&&this.getAlpha()===t.getAlpha()&&r.equals(this._components,t._components)||!1},toString:function(){for(var e=this._properties,t=[],n="gradient"===this._type,i=l.instance,r=0,a=e.length;r<a;r++){var o=this._components[r];null!=o&&t.push(e[r]+": "+(n?o:i.number(o)))}return null!=this._alpha&&t.push("alpha: "+i.number(this._alpha)),"{ "+t.join(", ")+" }"},toCSS:function(e){function t(e){return Math.round(255*(e<0?0:e>1?1:e))}var n=this._convert("rgb"),i=e||null==this._alpha?1:this._alpha;return n=[t(n[0]),t(n[1]),t(n[2])],i<1&&n.push(i<0?0:i),e?"#"+((1<<24)+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).slice(1):(4==n.length?"rgba(":"rgb(")+n.join(",")+")"},toCanvasStyle:function(e,t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,i=this._components,r=i[0],a=r._stops,o=i[1],s=i[2],l=i[3],u=t&&t.inverted();if(u&&(o=u._transformPoint(o),s=u._transformPoint(s),l&&(l=u._transformPoint(l))),r._radial){var c=s.getDistance(o);if(l){var h=l.subtract(o);h.getLength()>c&&(l=o.add(h.normalize(c-.1)))}var f=l||o;n=e.createRadialGradient(f.x,f.y,0,o.x,o.y,c)}else n=e.createLinearGradient(o.x,o.y,s.x,s.y);for(var d=0,p=a.length;d<p;d++){var g=a[d],m=g._offset;n.addColorStop(null==m?d/(p-1):m,g._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(e){if("gradient"===this._type){for(var t=this._components,n=1,i=t.length;n<i;n++){var r=t[n];e._transformPoint(r,r,!0)}this._changed()}},statics:{_types:i,random:function(){var e=Math.random;return new H(e(),e(),e())}}})},new function(){var e={add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t}};return r.each(e,function(e,t){this[t]=function(t){t=H.read(arguments);for(var n=this._type,i=this._components,r=t._convert(n),a=0,o=i.length;a<o;a++)r[a]=e(i[a],r[a]);return new H(n,r,null!=this._alpha?e(this._alpha,t.getAlpha()):null)}},{})}),z=r.extend({_class:"Gradient",initialize:function(e,t){this._id=c.get(),e&&r.isPlainObject(e)&&(this.set(e),e=t=null),null==this._stops&&this.setStops(e||["white","black"]),null==this._radial&&this.setRadial("string"==typeof t&&"radial"===t||t||!1)},_serialize:function(e,t){return t.add(this,function(){return r.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var n=this._owners?this._owners.indexOf(e):-1;n!=-1&&(this._owners.splice(n,1),this._owners.length||(this._owners=t))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new z(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var n=this._stops;if(n)for(var i=0,r=n.length;i<r;i++)n[i]._owner=t;n=this._stops=B.readList(e,0,{clone:!0});for(var i=0,r=n.length;i<r;i++)n[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,i=t.length;if(i===n.length){for(var r=0;r<i;r++)if(!t[r].equals(n[r]))return!1;return!0}}return!1}}),B=r.extend({_class:"GradientStop",initialize:function(e,n){var i=e,r=n;"object"==typeof e&&n===t&&(Array.isArray(e)&&"number"!=typeof e[0]?(i=e[0],r=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(i=e.color,r=e.offset||e.rampPoint||0)),this.setColor(i),this.setOffset(r)},clone:function(){return new B(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,i=this._offset;return r.serialize(null==i?[n]:[n,i],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var e=H.read(arguments,0,{clone:!0});e&&(e._owner=this),this._color=e,this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),j=r.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new h,selectedColor:null},n=r.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=r.set({},n,{fillColor:new H}),a={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},o={beans:!0},s={_class:"Style",beans:!0,initialize:function(t,r,a){this._values={},this._owner=r,this._project=r&&r._project||a||paper.project,this._defaults=!r||r instanceof w?n:r instanceof I?i:e,t&&this.set(t)}};return r.each(n,function(e,n){var i=/Color$/.test(n),l="shadowOffset"===n,u=r.capitalize(n),c=a[n],f="set"+u,d="get"+u;s[f]=function(e){var r=this._owner,a=r&&r._children;if(a&&a.length>0&&!(r instanceof N))for(var o=0,s=a.length;o<s;o++)a[o]._style[f](e);else if(n in this._defaults){var l=this._values[n];l!==e&&(i&&(l&&l._owner!==t&&(l._owner=t),e&&e.constructor===H&&(e._owner&&(e=e.clone()),e._owner=r)),this._values[n]=e,r&&r._changed(c||65))}},s[d]=function(e){var a,o=this._owner,s=o&&o._children;if(n in this._defaults&&(!s||!s.length||e||o instanceof N)){var a=this._values[n];if(a===t)a=this._defaults[n],a&&a.clone&&(a=a.clone());else{var u=i?H:l?h:null;!u||a&&a.constructor===u||(this._values[n]=a=u.read([a],0,{readNull:!0,clone:!0}),a&&i&&(a._owner=o))}}else if(s)for(var c=0,f=s.length;c<f;c++){var p=s[c]._style[d]();if(c){if(!r.equals(a,p))return t}else a=p}return a},o[d]=function(e){return this._style[d](e)},o[f]=function(e){this._style[f](e)}}),r.each({Font:"FontFamily",WindingRule:"FillRule"},function(e,t){var n="get"+t,i="set"+t;s[n]=o[n]="#get"+e,s[i]=o[i]="#set"+e}),b.inject(o),s},{set:function(e){var t=e instanceof j,n=t?e._values:e;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&t&&r.clone?r.clone():r}},equals:function(e){function n(e,n,i){var a=e._values,o=n._values,s=n._defaults;for(var l in a){var u=a[l],c=o[l];if(!(i&&l in o||r.equals(u,c===t?s[l]:c)))return!1}return!0}return e===this||e&&this._class===e._class&&n(this,e)&&n(e,this,!0)||!1},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=t?t:1.2*n}}),V=new function(){function e(e,t,n,i){for(var r=["","webkit","moz","Moz","ms","o"],a=t[0].toUpperCase()+t.substring(1),o=0;o<6;o++){var s=r[o],l=s?s+a:t;if(l in e){if(!n)return e[l];e[l]=i;break}}}return{getStyles:function(e){var t=e&&9!==e.nodeType?e.ownerDocument:e,n=t&&t.defaultView;return n&&n.getComputedStyle(e,"")},getBounds:function(e,t){var n,i=e.ownerDocument,r=i.body,a=i.documentElement;try{n=e.getBoundingClientRect()}catch(e){n={left:0,top:0,width:0,height:0}}var o=n.left-(a.clientLeft||r.clientLeft||0),s=n.top-(a.clientTop||r.clientTop||0);if(!t){var l=i.defaultView;o+=l.pageXOffset||a.scrollLeft||r.scrollLeft,s+=l.pageYOffset||a.scrollTop||r.scrollTop}return new g(o,s,n.width,n.height)},getViewportBounds:function(e){var t=e.ownerDocument,n=t.defaultView,i=t.documentElement;return new g(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(e,t){return V.getBounds(e,t).getPoint()},getSize:function(e){return V.getBounds(e,!0).getSize()},isInvisible:function(e){return V.getSize(e).equals(new d(0,0))},isInView:function(e){return!V.isInvisible(e)&&V.getViewportBounds(e).intersects(V.getBounds(e,!0))},isInserted:function(e){return i.body.contains(e)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,i){if("object"==typeof n)for(var r in n)e(t,r,!0,n[r]);else e(t,n,!0,i)}}},G={add:function(e,t){if(e)for(var n in t)for(var i=t[n],r=n.split(/[\s,]+/g),a=0,o=r.length;a<o;a++)e.addEventListener(r[a],i,!1)},remove:function(e,t){if(e)for(var n in t)for(var i=t[n],r=n.split(/[\s,]+/g),a=0,o=r.length;a<o;a++)e.removeEventListener(r[a],i,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new h(t.pageX||t.clientX+i.documentElement.scrollLeft,t.pageY||t.clientY+i.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return G.getPoint(e).subtract(V.getOffset(t||G.getTarget(e)))}};G.requestAnimationFrame=new function(){function e(){var t=a;a=[];for(var n=0,o=t.length;n<o;n++)t[n]();r=i&&a.length,r&&i(e)}var t,i=V.getPrefixed(n,"requestAnimationFrame"),r=!1,a=[];return function(n){a.push(n),i?r||(i(e),r=!0):t||(t=setInterval(e,1e3/60))}};var W=r.extend(a,{_class:"View",initialize:function e(t,r){function a(e){return r[e]||parseInt(r.getAttribute(e),10)}function s(){var e=V.getSize(r);return e.isNaN()||e.isZero()?new d(a("width"),a("height")):e}var l;if(n&&r){this._id=r.getAttribute("id"),null==this._id&&r.setAttribute("id",this._id="view-"+e._id++),G.add(r,this._viewEvents);var u="none";if(V.setPrefixed(r.style,{userDrag:u,userSelect:u,touchCallout:u,contentZooming:u,tapHighlightColor:"rgba(0,0,0,0)"}),o.hasAttribute(r,"resize")){var c=this;G.add(n,this._windowEvents={resize:function(){c.setViewSize(s())}})}if(l=s(),o.hasAttribute(r,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var h=this._stats.domElement,f=h.style,p=V.getOffset(r);f.position="absolute",f.left=p.x+"px",f.top=p.y+"px",i.body.appendChild(h)}}else l=new d(r),r=null;this._project=t,this._scope=t._scope,this._element=r,this._pixelRatio||(this._pixelRatio=n&&n.devicePixelRatio||1),this._setElementSize(l.width,l.height),this._viewSize=l,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new v)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!paper.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;W._focused===this&&(W._focused=null),W._views.splice(W._views.indexOf(this),1),delete W._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),G.remove(this._element,this._viewEvents),G.remove(n,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:r.each(b._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;G.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;V.getPrefixed(i,"hidden")&&"true"!==o.getAttribute(t,"keepalive")||!V.isInView(t)||e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){paper=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new r({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[e._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new r(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=t},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var e=this._viewSize;return new p(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=d.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new g(new h,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return V.isInView(this._element)},isInserted:function(){return V.isInserted(this._element)},getPixelSize:function(e){var t,n=this._element;if(n){var r=n.parentNode,a=i.createElement("div");a.style.fontSize=e,r.appendChild(a),t=parseFloat(V.getStyles(a).fontSize),r.removeChild(a)}else t=parseFloat(t);return t},getTextWidth:function(e,t){return 0}},r.each(["rotate","scale","shear","skew"],function(e){var t="rotate"===e;this[e]=function(){var n=(t?r:h).read(arguments),i=h.read(arguments,0,{readNull:!0});return this.transform((new v)[e](n,i||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new v;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=h.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose(),t=e&&e.scaling;return t?(t.x+t.y)/2:0},setZoom:function(e){this.transform((new v).scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){var e=this._decompose();return e&&e.rotation},setRotation:function(e){var t=this.getRotation();null!=t&&null!=e&&this.rotate(e-t)},getScaling:function(){var e=this._decompose(),n=e&&e.scaling;return n?new f(n.x,n.y,this,"setScaling"):t},setScaling:function(){var e=this.getScaling(),t=h.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.initialize.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(h.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(h.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(h.read(arguments))},getEventPoint:function(e){return this.viewToProject(G.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){i&&"string"==typeof t&&(t=i.getElementById(t));var r=n?X:W;return new r(e,t)}}},new function(){function e(e){var t=G.getTarget(e);return t.getAttribute&&W._viewsById[t.getAttribute("id")]}function t(){var e=W._focused;if(!e||!e.isVisible())for(var t=0,n=W._views.length;t<n;t++)if((e=W._views[t]).isVisible()){W._focused=l=e;break}}function r(e,t,n){e._handleMouseEvent("mousemove",t,n)}function a(e,t,n,i,r,a,o){function s(e,n){if(e.responds(n)){if(l||(l=new Q(n,i,r,t||e,a?r.subtract(a):null)),e.emit(n,l)&&(T=!0,l.prevented&&(S=!0),l.stopped))return u=!0}else{var o=A[n];if(o)return s(e,o)}}for(var l,u=!1;e&&e!==o&&!s(e,n);)e=e._parent;return u}function o(e,t,n,i,r,o){return e._project.removeOn(n),S=T=!1,x&&a(x,null,n,i,r,o)||t&&t!==x&&!t.isDescendant(x)&&a(t,null,n,i,r,o,x)||a(e,x||t||e,n,i,r,o)}if(n){var s,l,u,c,h,f=!1,d=!1,p=n.navigator;p.pointerEnabled||p.msPointerEnabled?(u="pointerdown MSPointerDown",c="pointermove MSPointerMove",h="pointerup pointercancel MSPointerUp MSPointerCancel"):(u="touchstart",c="touchmove",h="touchend touchcancel","ontouchstart"in n&&p.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(u+=" mousedown",c+=" mousemove",h+=" mouseup"));var g={},m={mouseout:function(e){var t=W._focused,n=G.getRelatedTarget(e);if(t&&(!n||"HTML"===n.nodeName)){var i=G.getOffset(e,t._element),a=i.x,o=Math.abs,s=o(a),l=1<<25,u=s-l;i.x=o(u)<s?u*(a<0?-1:1):a,r(t,e,t.viewToProject(i))}},scroll:t};g[u]=function(t){var n=W._focused=e(t);f||(f=!0,n._handleMouseEvent("mousedown",t))},m[c]=function(n){var i=W._focused;if(!d){var a=e(n);a?i!==a&&(i&&r(i,n),s||(s=i),i=W._focused=l=a):l&&l===i&&(s&&!s.isInserted()&&(s=null),i=W._focused=s,s=null,t())}i&&r(i,n)},m[u]=function(){d=!0},m[h]=function(e){var t=W._focused;t&&f&&t._handleMouseEvent("mouseup",e),d=f=!1},G.add(i,m),G.add(n,{load:t});var v,_,y,b,w,x,E,k,M,T=!1,S=!1,A={doubleclick:"click",mousedrag:"mousemove"},R=!1,C={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:g,_handleMouseEvent:function(e,t,n){function i(e){return r.virtual[e]||c.responds(e)||u&&u.responds(e)}var r=this._itemEvents,s=r.native[e],l="mousemove"===e,u=this._scope.tool,c=this;l&&f&&i("mousedrag")&&(e="mousedrag"),n||(n=this.getEventPoint(t));var h=this.getBounds().contains(n),d=s&&h&&c._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),p=d&&d.item||null,g=!1,m={};if(m[e.substr(5)]=!0,s&&p!==w&&(w&&a(w,null,"mouseleave",t,n),p&&a(p,null,"mouseenter",t,n),w=p),R^h&&(a(this,null,h?"mouseenter":"mouseleave",t,n),v=h?this:null,g=!0),!h&&!m.drag||n.equals(y)||(o(this,p,l?e:"mousemove",t,n,y),g=!0),R=h,m.down&&h||m.up&&_){if(o(this,p,e,t,n,_),m.down){if(M=p===E&&Date.now()-k<300,b=E=p,!S&&p){for(var A=p;A&&!A.responds("mousedrag");)A=A._parent;A&&(x=p)}_=n}else m.up&&(S||p!==b||(k=Date.now(),o(this,p,M?"doubleclick":"click",t,n,_),M=!1),
b=x=null);R=!1,g=!0}y=n,g&&u&&(T=u._handleMouseEvent(e,t,n,m)||T),(T&&!m.move||m.down&&i("mouseup"))&&t.preventDefault()},_handleKeyEvent:function(e,t,n,i){function r(r){r.responds(e)&&(paper=o,r.emit(e,a=a||new q(e,t,n,i)))}var a,o=this._scope,s=o.tool;this.isVisible()&&(r(this),s&&s.responds(e)&&r(s))},_countItemEvent:function(e,t){var n=this._itemEvents,i=n.native,r=n.virtual;for(var a in C)i[a]=(i[a]||0)+(C[a][e]||0)*t;r[e]=(r[e]||0)+t},statics:{updateFocus:t}}}}),X=W.extend({_class:"CanvasView",initialize:function(e,t){if(!(t instanceof n.HTMLCanvasElement)){var i=d.read(arguments,1);if(i.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+r.slice(arguments,1));t=ee.getCanvas(i)}var a=this._context=t.getContext("2d");if(a.save(),this._pixelRatio=1,!/^off|false$/.test(o.getAttribute(t,"hidpi"))){var s=n.devicePixelRatio||1,l=V.getPrefixed(a,"backingStorePixelRatio")||1;this._pixelRatio=s/l}W.call(this,e,t),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var i=this._pixelRatio;if(e.base.call(this,t*i,n*i),1!==i){var r=this._element,a=this._context;if(!o.hasAttribute(r,"resize")){var s=r.style;s.width=t+"px",s.height=n+"px"}a.restore(),a.save(),a.scale(i,i)}},getPixelSize:function e(t){var n,i=paper.agent;if(i&&i.firefox)n=e.base.call(this,t);else{var r=this._context,a=r.font;r.font=t+" serif",n=parseFloat(r.font),r.font=a}return n},getTextWidth:function(e,t){var n=this._context,i=n.font,r=0;n.font=e;for(var a=0,o=t.length;a<o;a++)r=Math.max(r,n.measureText(t[a]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Y=r.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Z.modifiers}}),q=Y.extend({_class:"KeyEvent",initialize:function(e,t,n,i){this.type=e,this.event=t,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Z=new function(){function e(e){var n=e.key||e.keyIdentifier;return n=/^U\+/.test(n)?String.fromCharCode(parseInt(n.substr(2),16)):/^Arrow[A-Z]/.test(n)?n.substr(5):"Unidentified"===n||n===t?String.fromCharCode(e.keyCode):n,l[n]||(n.length>1?r.hyphenate(n):n.toLowerCase())}function a(e,t,n,i){var s,l=W._focused;if(c[t]=e,e?h[t]=n:delete h[t],t.length>1&&(s=r.camelize(t))in f){f[s]=e;var u=paper&&paper.agent;if("meta"===s&&u&&u.mac)if(e)o={};else{for(var d in o)d in h&&a(!1,d,o[d],i);o=null}}else e&&o&&(o[t]=n);l&&l._handleKeyEvent(e?"keydown":"keyup",i,t,n)}var o,s,l={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},u={tab:"\t",space:" ",enter:"\r"},c={},h={},f=new r({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var e=paper&&paper.agent;return e&&e.mac?this.meta:this.control}}});return G.add(i,{keydown:function(t){var n=e(t),i=paper&&paper.agent;n.length>1||i&&i.chrome&&(t.altKey||i.mac&&t.metaKey||!i.mac&&t.ctrlKey)?a(!0,n,u[n]||(n.length>1?"":n),t):s=n},keypress:function(t){if(s){var n=e(t),i=t.charCode,r=i>=32?String.fromCharCode(i):n.length>1?"":n;n!==s&&(n=r.toLowerCase()),a(!0,n,r,t),s=null}},keyup:function(t){var n=e(t);n in h&&a(!1,n,h[n],t)}}),G.add(n,{blur:function(e){for(var t in h)a(!1,t,h[t],e)}}),{modifiers:f,isDown:function(e){return!!c[e]}}},Q=Y.extend({_class:"MouseEvent",initialize:function(e,t,n,i,r){this.type=e,this.event=t,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),$=Y.extend({_class:"ToolEvent",_item:null,initialize:function(e,t,n){this.tool=e,this.type=t,this.event=n},_choosePoint:function(e,t){return e?e:t?t.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),J=s.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){s.call(this),this._moveCount=-1,this._downCount=-1,this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,null!=e&&null!=this._maxDistance&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,null!=this._minDistance&&null!=e&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,i){function r(e,t){var r=n,a=o?h._point:h._downPoint||r;if(o){if(h._moveCount&&r.equals(a))return!1;if(a&&(null!=e||null!=t)){var s=r.subtract(a),l=s.getLength();if(l<(e||0))return!1;t&&(r=a.add(s.normalize(Math.min(l,t))))}h._moveCount++}return h._point=r,h._lastPoint=a||r,i.down&&(h._moveCount=-1,h._downPoint=r,h._downCount++),!0}function a(){s&&(c=h.emit(e,new $(h,e,t))||c)}paper=this._scope,i.drag&&!this.responds(e)&&(e="mousemove");var o=i.move||i.drag,s=this.responds(e),l=this.minDistance,u=this.maxDistance,c=!1,h=this;if(i.down)r(),a();else if(i.up)r(null,u),a();else if(s)for(;r(l,u);)a();return c}}),K={request:function(t){var n=new e.XMLHttpRequest;return n.open((t.method||"get").toUpperCase(),t.url,r.pick(t.async,!0)),t.mimeType&&n.overrideMimeType(t.mimeType),n.onload=function(){var e=n.status;0===e||200===e?t.onLoad&&t.onLoad.call(n,n.responseText):n.onerror()},n.onerror=function(){var e=n.status,i='Could not load "'+t.url+'" (Status: '+e+")";if(!t.onError)throw new Error(i);t.onError(i,e)},n.send(null)}},ee={canvases:[],getCanvas:function(e,t){if(!n)return null;var r,a=!0;"object"==typeof e&&(t=e.height,e=e.width),this.canvases.length?r=this.canvases.pop():(r=i.createElement("canvas"),a=!1);var o=r.getContext("2d");if(!o)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===e&&r.height===t?a&&o.clearRect(0,0,e+1,t+1):(r.width=e,r.height=t),o.save(),r},getContext:function(e,t){var n=this.getCanvas(e,t);return n?n.getContext("2d"):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},te=new function(){function e(e,t,n){return.2989*e+.587*t+.114*n}function t(t,n,i,r){var a=r-e(t,n,i);d=t+a,p=n+a,g=i+a;var r=e(d,p,g),o=m(d,p,g),s=v(d,p,g);if(o<0){var l=r-o;d=r+(d-r)*r/l,p=r+(p-r)*r/l,g=r+(g-r)*r/l}if(s>255){var u=255-r,c=s-r;d=r+(d-r)*u/c,p=r+(p-r)*u/c,g=r+(g-r)*u/c}}function n(e,t,n){return v(e,t,n)-m(e,t,n)}function i(e,t,n,i){var r,a=[e,t,n],o=v(e,t,n),s=m(e,t,n);s=s===e?0:s===t?1:2,o=o===e?0:o===t?1:2,r=0===m(s,o)?1===v(s,o)?2:1:0,a[o]>a[s]?(a[r]=(a[r]-a[s])*i/(a[o]-a[s]),a[o]=i):a[r]=a[o]=0,a[s]=0,d=a[0],p=a[1],g=a[2]}var a,o,s,l,u,c,h,f,d,p,g,m=Math.min,v=Math.max,_=Math.abs,y={multiply:function(){d=u*a/255,p=c*o/255,g=h*s/255},screen:function(){d=u+a-u*a/255,p=c+o-c*o/255,g=h+s-h*s/255},overlay:function(){d=u<128?2*u*a/255:255-2*(255-u)*(255-a)/255,p=c<128?2*c*o/255:255-2*(255-c)*(255-o)/255,g=h<128?2*h*s/255:255-2*(255-h)*(255-s)/255},"soft-light":function(){var e=a*u/255;d=e+u*(255-(255-u)*(255-a)/255-e)/255,e=o*c/255,p=e+c*(255-(255-c)*(255-o)/255-e)/255,e=s*h/255,g=e+h*(255-(255-h)*(255-s)/255-e)/255},"hard-light":function(){d=a<128?2*a*u/255:255-2*(255-a)*(255-u)/255,p=o<128?2*o*c/255:255-2*(255-o)*(255-c)/255,g=s<128?2*s*h/255:255-2*(255-s)*(255-h)/255},"color-dodge":function(){d=0===u?0:255===a?255:m(255,255*u/(255-a)),p=0===c?0:255===o?255:m(255,255*c/(255-o)),g=0===h?0:255===s?255:m(255,255*h/(255-s))},"color-burn":function(){d=255===u?255:0===a?0:v(0,255-255*(255-u)/a),p=255===c?255:0===o?0:v(0,255-255*(255-c)/o),g=255===h?255:0===s?0:v(0,255-255*(255-h)/s)},darken:function(){d=u<a?u:a,p=c<o?c:o,g=h<s?h:s},lighten:function(){d=u>a?u:a,p=c>o?c:o,g=h>s?h:s},difference:function(){d=u-a,d<0&&(d=-d),p=c-o,p<0&&(p=-p),g=h-s,g<0&&(g=-g)},exclusion:function(){d=u+a*(255-u-u)/255,p=c+o*(255-c-c)/255,g=h+s*(255-h-h)/255},hue:function(){i(a,o,s,n(u,c,h)),t(d,p,g,e(u,c,h))},saturation:function(){i(u,c,h,n(a,o,s)),t(d,p,g,e(u,c,h))},luminosity:function(){t(u,c,h,e(a,o,s))},color:function(){t(a,o,s,e(u,c,h))},add:function(){d=m(u+a,255),p=m(c+o,255),g=m(h+s,255)},subtract:function(){d=v(u-a,0),p=v(c-o,0),g=v(h-s,0)},average:function(){d=(u+a)/2,p=(c+o)/2,g=(h+s)/2},negation:function(){d=255-_(255-a-u),p=255-_(255-o-c),g=255-_(255-s-h)}},b=this.nativeModes=r.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(e){this[e]=!0},{}),w=ee.getContext(1,1);w&&(r.each(y,function(e,t){var n="darken"===t,i=!1;w.save();try{w.fillStyle=n?"#300":"#a00",w.fillRect(0,0,1,1),w.globalCompositeOperation=t,w.globalCompositeOperation===t&&(w.fillStyle=n?"#a00":"#300",w.fillRect(0,0,1,1),i=w.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(e){}w.restore(),b[t]=i}),ee.release(w)),this.process=function(e,t,n,i,r){var m=t.canvas,v="normal"===e;if(v||b[e])n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=i,v||(n.globalCompositeOperation=e),n.drawImage(m,r.x,r.y),n.restore();else{var _=y[e];if(!_)return;for(var w=n.getImageData(r.x,r.y,m.width,m.height),x=w.data,E=t.getImageData(0,0,m.width,m.height).data,k=0,M=x.length;k<M;k+=4){a=E[k],u=x[k],o=E[k+1],c=x[k+1],s=E[k+2],h=x[k+2],l=E[k+3],f=x[k+3],_();var T=l*i/255,S=1-T;x[k]=T*d+S*u,x[k+1]=T*p+S*c,x[k+2]=T*g+S*h,x[k+3]=l*i+S*f}n.putImageData(w,r.x,r.y)}}},ne=new function(){function e(e,t,a){return n(i.createElementNS(r,e),t,a)}function t(e,t){var n=s[t],i=n?e.getAttributeNS(n,t):e.getAttribute(t);return"null"===i?null:i}function n(e,t,n){for(var i in t){var r=t[i],a=s[i];"number"==typeof r&&n&&(r=n.number(r)),a?e.setAttributeNS(a,i,r):e.setAttribute(i,r)}return e}var r="http://www.w3.org/2000/svg",a="http://www.w3.org/2000/xmlns",o="http://www.w3.org/1999/xlink",s={href:o,xlink:a,xmlns:a+"/","xmlns:xlink":a+"/"};return{svg:r,xmlns:a,xlink:o,create:e,get:t,set:n}},ie=r.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof O||e instanceof E||e instanceof I)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var n=r.capitalize(t),i=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:i,fromSVG:i&&r.each(i,function(e,t){this[e]=t},{}),exportFilter:e[3],get:"get"+n,set:"set"+n}},{});return new function(){function t(e,t,n){var i=new r,a=e.getTranslation();if(t){e=e._shiftless();var o=e._inverseTransform(a);i[n?"cx":"x"]=o.x,i[n?"cy":"y"]=o.y,a=null}if(!e.isIdentity()){var s=e.decompose();if(s){var l=[],c=s.rotation,h=s.scaling,f=s.skewing;a&&!a.isZero()&&l.push("translate("+k.point(a)+")"),c&&l.push("rotate("+k.number(c)+")"),u.isZero(h.x-1)&&u.isZero(h.y-1)||l.push("scale("+k.point(h)+")"),f.x&&l.push("skewX("+k.number(f.x)+")"),f.y&&l.push("skewY("+k.number(f.y)+")"),i.transform=l.join(" ")}else i.transform="matrix("+e.getValues().join(",")+")"}return i}function n(e,n){for(var i=t(e._matrix),r=e._children,a=ne.create("g",i,k),o=0,s=r.length;o<s;o++){var l=r[o],u=x(l,n);if(u)if(l.isClipMask()){var c=ne.create("clipPath");c.appendChild(u),_(l,c,"clip"),ne.set(a,{"clip-path":"url(#"+c.id+")"})}else a.appendChild(u)}return a}function i(e,n){var i=t(e._matrix,!0),r=e.getSize(),a=e.getImage();return i.x-=r.width/2,i.y-=r.height/2,i.width=r.width,i.height=r.height,i.href=0==n.embedImages&&a&&a.src||e.toDataURL(),ne.create("image",i,k)}function a(e,n){var i=n.matchShapes;if(i){var r=e.toShape(!1);if(r)return o(r,n)}var a,s=e._segments,l=s.length,u=t(e._matrix);if(i&&l>=2&&!e.hasHandles())if(l>2){a=e._closed?"polygon":"polyline";for(var c=[],h=0;h<l;h++)c.push(k.point(s[h]._point));u.points=c.join(" ")}else{a="line";var f=s[0]._point,d=s[1]._point;u.set({x1:f.x,y1:f.y,x2:d.x,y2:d.y})}else a="path",u.d=e.getPathData(null,n.precision);return ne.create(a,u,k)}function o(e){var n=e._type,i=e._radius,r=t(e._matrix,!0,"rectangle"!==n);if("rectangle"===n){n="rect";var a=e._size,o=a.width,s=a.height;r.x-=o/2,r.y-=s/2,r.width=o,r.height=s,i.isZero()&&(i=null)}return i&&("circle"===n?r.r=i:(r.rx=i.width,r.ry=i.height)),ne.create(n,r,k)}function s(e,n){var i=t(e._matrix),r=e.getPathData(null,n.precision);return r&&(i.d=r),ne.create("path",i,k)}function h(e,n){var i=t(e._matrix,!0),r=e._definition,a=m(r,"symbol"),o=r._item,s=o.getBounds();return a||(a=ne.create("symbol",{viewBox:k.rectangle(s)}),a.appendChild(x(o,n)),_(r,a,"symbol")),i.href="#"+a.id,i.x+=s.x,i.y+=s.y,i.width=s.width,i.height=s.height,i.overflow="visible",ne.create("use",i,k)}function f(e){var t=m(e,"color");if(!t){var n,i=e.getGradient(),r=i._radial,a=e.getOrigin(),o=e.getDestination();if(r){n={cx:a.x,cy:a.y,r:a.getDistance(o)};var s=e.getHighlight();s&&(n.fx=s.x,n.fy=s.y)}else n={x1:a.x,y1:a.y,x2:o.x,y2:o.y};n.gradientUnits="userSpaceOnUse",t=ne.create((r?"radial":"linear")+"Gradient",n,k);for(var l=i._stops,u=0,c=l.length;u<c;u++){var h=l[u],f=h._color,d=f.getAlpha(),p=h._offset;n={offset:null==p?u/(c-1):p},f&&(n["stop-color"]=f.toCSS(!0)),d<1&&(n["stop-opacity"]=d),t.appendChild(ne.create("stop",n,k))}_(e,t,"color")}return"url(#"+t.id+")"}function d(e){var n=ne.create("text",t(e._matrix,!0),k);return n.textContent=e._content,n}function p(e,t,n){var i={},a=!n&&e.getParent(),o=[];return null!=e._name&&(i.id=e._name),r.each(ie,function(t){var n=t.get,s=t.type,l=e[n]();if(t.exportFilter?t.exportFilter(e,l):!a||!r.equals(a[n](),l)){if("color"===s&&null!=l){var u=l.getAlpha();u<1&&(i[t.attribute+"-opacity"]=u)}"style"===s?o.push(t.attribute+": "+l):i[t.attribute]=null==l?"none":"color"===s?l.gradient?f(l,e):l.toCSS(!0):"array"===s?l.join(","):"lookup"===s?t.toSVG[l]:l}}),o.length&&(i.style=o.join(";")),1===i.opacity&&delete i.opacity,e._visible||(i.visibility="hidden"),ne.set(t,i,k)}function m(e,t){return M||(M={ids:{},svgs:{}}),e&&M.svgs[t+"-"+(e._id||e.__id||(e.__id=c.get("svg")))]}function _(e,t,n){M||m();var i=M.ids[n]=(M.ids[n]||0)+1;t.id=n+"-"+i,M.svgs[n+"-"+(e._id||e.__id)]=t}function w(t,n){var i=t,r=null;if(M){i="svg"===t.nodeName.toLowerCase()&&t;for(var a in M.svgs)r||(i||(i=ne.create("svg"),i.appendChild(t)),r=i.insertBefore(ne.create("defs"),i.firstChild)),r.appendChild(M.svgs[a]);M=null}return n.asString?(new e.XMLSerializer).serializeToString(i):i}function x(e,t,n){var i=T[e._class],r=i&&i(e,t);if(r){var a=t.onExport;a&&(r=a(e,r,t)||r);var o=JSON.stringify(e._data);o&&"{}"!==o&&"null"!==o&&r.setAttribute("data-paper-data",o)}return r&&p(e,r,n)}function E(e){return e||(e={}),k=new l(e.precision),e}var k,M,T={Group:n,Layer:n,Raster:i,Path:a,Shape:o,CompoundPath:s,SymbolItem:h,PointText:d};b.inject({exportSVG:function(e){return e=E(e),w(x(this,e,!0),e)}}),y.inject({exportSVG:function(e){e=E(e);var n=this._children,i=this.getView(),a=r.pick(e.bounds,"view"),o=e.matrix||"view"===a&&i._matrix,s=o&&v.read([o]),l="view"===a?new g([0,0],i.getViewSize()):"content"===a?b._getBounds(n,s,{stroke:!0}).rect:g.read([a],0,{readNull:!0}),u={version:"1.1",xmlns:ne.svg,"xmlns:xlink":ne.xlink};l&&(u.width=l.width,u.height=l.height,(l.x||l.y)&&(u.viewBox=k.rectangle(l)));var c=ne.create("svg",u,k),h=c;s&&!s.isIdentity()&&(h=c.appendChild(ne.create("g",t(s),k)));for(var f=0,d=n.length;f<d;f++)h.appendChild(x(n[f],e,!0));return w(c,e)}})},new function(){function a(e,t,n,i,r){var a=ne.get(e,t),o=null==a?i?null:n?"":0:n?a:parseFloat(a);return/%\s*$/.test(a)?o/100*(r?1:C[/x|^width/.test(t)?"width":"height"]):o}function o(e,t,n,i,r){return t=a(e,t||"x",!1,i,r),n=a(e,n||"y",!1,i,r),!i||null!=t&&null!=n?new h(t,n):null}function s(e,t,n,i,r){return t=a(e,t||"width",!1,i,r),n=a(e,n||"height",!1,i,r),!i||null!=t&&null!=n?new d(t,n):null}function l(e,t,n){return"none"===e?null:"number"===t?parseFloat(e):"array"===t?e?e.split(/[\s,]+/g).map(parseFloat):[]:"color"===t?S(e)||e:"lookup"===t?n[e]:e}function u(e,t,n,i){var r=e.childNodes,a="clippath"===t,o="defs"===t,s=new w,l=s._project,u=l._currentStyle,c=[];if(a||o||(s=M(s,e,i),l._currentStyle=s._style.clone()),i)for(var h=e.querySelectorAll("defs"),f=0,d=h.length;f<d;f++)A(h[f],n,!1);for(var f=0,d=r.length;f<d;f++){var p,g=r[f];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(p=A(g,n,!1))||p instanceof T||c.push(p)}return s.addChildren(c),a&&(s=M(s.reduce(),e,i)),l._currentStyle=u,(a||o)&&(s.remove(),s=null),s}function c(e,t){for(var n=e.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,a=n.length;r<a;r+=2)i.push(new h(parseFloat(n[r]),parseFloat(n[r+1])));var o=new L(i);return"polygon"===t&&o.closePath(),o}function f(e){return O.create(e.getAttribute("d"))}function p(e,t){var n,i=(a(e,"href",!0)||"").substring(1),r="radialgradient"===t;if(i)n=P[i].getGradient(),n._radial^r&&(n=n.clone(),n._radial=r);else{for(var s=e.childNodes,l=[],u=0,c=s.length;u<c;u++){var h=s[u];1===h.nodeType&&l.push(M(new B,h))}n=new z(l,r)}var f,d,p,g="userSpaceOnUse"!==a(e,"gradientUnits",!0);r?(f=o(e,"cx","cy",!1,g),d=f.add(a(e,"r",!1,!1,g),0),p=o(e,"fx","fy",!0,g)):(f=o(e,"x1","y1",!1,g),d=o(e,"x2","y2",!1,g));var m=M(new H(n,f,d,p),e);return m._scaleToBounds=g,null}function m(e,t,n,i){if(e.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),a=new v,o=0,s=r.length;o<s;o++){var l=r[o];if(!l)break;for(var u=l.split(/\(\s*/),c=u[0],h=u[1].split(/[\s,]+/g),f=0,d=h.length;f<d;f++)h[f]=parseFloat(h[f]);switch(c){case"matrix":a.append(new v(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":a.rotate(h[0],h[1],h[2]);break;case"translate":a.translate(h[0],h[1]);break;case"scale":a.scale(h);break;case"skewX":a.skew(h[0],0);break;case"skewY":a.skew(0,h[0])}}e.transform(a)}}function _(e,t,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=e[i]&&e[i]();r&&r.setAlpha(parseFloat(t))}function x(e,n,i){var a=e.attributes[n],o=a&&a.value;if(!o){var s=r.camelize(n);o=e.style[s],o||i.node[s]===i.parent[s]||(o=i.node[s])}return o?"none"===o?null:o:t}function M(e,n,i){if(n.style){var a=n.parentNode,o={node:V.getStyles(n)||{},parent:!i&&!/^defs$/i.test(a.tagName)&&V.getStyles(a)||{}};r.each(F,function(i,r){var a=x(n,r,o);e=a!==t&&i(e,a,r,n,o)||e})}return e}function S(e){var t=e&&e.match(/\((?:["'#]*)([^"')]+)/),i=t&&t[1],r=i&&P[n?i.replace(n.location.href.split("#")[0]+"#",""):i];return r&&r._scaleToBounds&&(r=r.clone(),r._scaleToBounds=!0),r}function A(e,t,n){var a,o,l,u=e.nodeName.toLowerCase(),c="#document"!==u,h=i.body;n&&c&&(C=paper.getView().getSize(),C=s(e,null,null,!0)||C,a=ne.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),o=e.parentNode,l=e.nextSibling,a.appendChild(e),h.appendChild(a));var f=paper.settings,d=f.applyMatrix,p=f.insertItems;f.applyMatrix=!1,f.insertItems=!1;var g=N[u],m=g&&g(e,u,t,n)||null;if(f.insertItems=p,f.applyMatrix=d,m){!c||m instanceof w||(m=M(m,e,n));var v=t.onImport,_=c&&e.getAttribute("data-paper-data");v&&(m=v(e,m,t)||m),t.expandShapes&&m instanceof E&&(m.remove(),m=m.toPath()),_&&(m._data=JSON.parse(_))}return a&&(h.removeChild(a),o&&(l?o.insertBefore(e,l):o.appendChild(e))),n&&(P={},m&&r.pick(t.applyMatrix,d)&&m.matrix.apply(!0,!0)),m}function R(n,r,a){function o(i){try{var o="object"==typeof i?i:(new e.DOMParser).parseFromString(i,"image/svg+xml");if(!o.nodeName)throw o=null,new Error("Unsupported SVG source: "+n);paper=l,u=A(o,r,!0),r&&r.insert===!1||a._insertItem(t,u);var c=r.onLoad;c&&c(u,i)}catch(e){s(e)}}function s(e,t){var n=r.onError;if(!n)throw new Error(e);n(e,t)}if(!n)return null;r="function"==typeof r?{onLoad:r}:r||{};var l=paper,u=null;if("string"!=typeof n||/^.*</.test(n)){if("undefined"!=typeof File&&n instanceof File){var c=new FileReader;return c.onload=function(){o(c.result)},c.onerror=function(){s(c.error)},c.readAsText(n)}o(n)}else{var h=i.getElementById(n);h?o(h):K.request({url:n,async:!0,onLoad:o,onError:s})}return u}var C,P={},N={"#document":function(e,t,n,i){for(var r=e.childNodes,a=0,o=r.length;a<o;a++){var s=r[a];if(1===s.nodeType)return A(s,n,i)}},g:u,svg:u,clippath:u,polygon:c,polyline:c,path:f,lineargradient:p,radialgradient:p,image:function(e){var t=new k(a(e,"href",!0));return t.on("load",function(){var t=s(e);this.setSize(t);var n=this._matrix._transformPoint(o(e).add(t.divide(2)));this.translate(n)}),t},symbol:function(e,t,n,i){return new T(u(e,t,n,i),(!0))},defs:u,use:function(e){var t=(a(e,"href",!0)||"").substring(1),n=P[t],i=o(e);return n?n instanceof T?n.place(i):n.clone().translate(i):null},circle:function(e){return new E.Circle(o(e,"cx","cy"),a(e,"r"))},ellipse:function(e){return new E.Ellipse({center:o(e,"cx","cy"),radius:s(e,"rx","ry")})},rect:function(e){return new E.Rectangle(new g(o(e),s(e)),s(e,"rx","ry"))},line:function(e){return new L.Line(o(e,"x1","y1"),o(e,"x2","y2"))},text:function(e){var t=new U(o(e).add(o(e,"dx","dy")));return t.setContent(e.textContent.trim()||""),t}},F=r.set(r.each(ie,function(e){this[e.attribute]=function(t,n){if(t[e.set]&&(t[e.set](l(n,e.type,e.fromSVG)),"color"===e.type)){var i=t[e.get]();if(i&&i._scaleToBounds){var r=t.getBounds();i.transform((new v).translate(r.getPoint()).scale(r.getSize()))}}}},{}),{id:function(e,t){P[t]=e,e.setName&&e.setName(t)},"clip-path":function(e,t){var n=S(t);if(n){if(n=n.clone(),n.setClipMask(!0),!(e instanceof w))return new w(n,e);e.insertChild(0,n)}},gradientTransform:m,transform:m,"fill-opacity":_,"stroke-opacity":_,visibility:function(e,t){e.setVisible&&e.setVisible("visible"===t)},display:function(e,t){e.setVisible&&e.setVisible(null!==t)},"stop-color":function(e,t){e.setColor&&e.setColor(t)},"stop-opacity":function(e,t){e._color&&e._color.setAlpha(parseFloat(t))},offset:function(e,t){if(e.setOffset){var n=t.match(/(.*)%$/);e.setOffset(n?n[1]/100:parseFloat(t))}},viewBox:function(e,t,n,i,r){var a,o,u=new g(l(t,"array")),c=s(i,null,null,!0);if(e instanceof w){var h=c?c.divide(u.getSize()):1,o=(new v).scale(h).translate(u.getPoint().negate());a=e}else e instanceof T&&(c&&u.setSize(c),a=e._item);if(a){if("visible"!==x(i,"overflow",r)){var f=new E.Rectangle(u);f.setClipMask(!0),a.addChild(f)}o&&a.transform(o)}}});b.inject({importSVG:function(e,t){return R(e,t,this)}}),y.inject({importSVG:function(e,t){return this.activate(),R(e,t,this)}})},r.exports.PaperScript=function(){function t(e,t){return(g.acorn||m).parse(e,t)}function a(e,t,n){var i=y[t];if(e&&e[i]){var r=e[i](n);return"!="===t?!r:r}switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"==":return e==n;case"!=":return e!=n}}function s(e,t){var n=b[e];if(t&&t[n])return t[n]();switch(e){case"+":return+t;case"-":return-t}}function l(r,a){function o(e){for(var t=0,n=d.length;t<n;t++){var i=d[t];if(i[0]>=e)break;e+=i[1]}return e}function s(e){return r.substring(o(e.range[0]),o(e.range[1]))}function l(e,t){return r.substring(o(e.range[1]),o(t.range[0]))}function u(e,t){for(var n=o(e.range[0]),i=o(e.range[1]),a=0,s=d.length-1;s>=0;s--)if(n>d[s][0]){a=s+1;break}d.splice(a,0,[n,t.length-i+n]),r=r.substring(0,n)+t+r.substring(i)}function c(e,t){if(e){for(var n in e)if("range"!==n&&"loc"!==n){var i=e[n];if(Array.isArray(i))for(var r=0,a=i.length;r<a;r++)c(i[r],e);else i&&"object"==typeof i&&c(i,e)}switch(e.type){case"UnaryExpression":if(e.operator in b&&"Literal"!==e.argument.type){var o=s(e.argument);u(e,'$__("'+e.operator+'", '+o+")")}break;case"BinaryExpression":if(e.operator in y&&"Literal"!==e.left.type){var h=s(e.left),f=s(e.right),d=l(e.left,e.right),p=e.operator;u(e,"__$__("+h+","+d.replace(new RegExp("\\"+p),'"'+p+'"')+", "+f+")")}break;case"UpdateExpression":case"AssignmentExpression":var g=t&&t.type;if(!("ForStatement"===g||"BinaryExpression"===g&&/^[=!<>]/.test(t.operator)||"MemberExpression"===g&&t.computed))if("UpdateExpression"===e.type){var o=s(e.argument),m="__$__("+o+', "'+e.operator[0]+'", 1)',v=o+" = "+m;e.prefix||"AssignmentExpression"!==g&&"VariableDeclarator"!==g||(s(t.left||t.id)===o&&(v=m),v=o+"; "+v),u(e,v)}else if(/^.=$/.test(e.operator)&&"Literal"!==e.left.type){var h=s(e.left),f=s(e.right),m=h+" = __$__("+h+', "'+e.operator[0]+'", '+f+")";u(e,/^\(.*\)$/.test(s(e))?"("+m+")":m)}}}}function h(e){var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(e=(Math.abs(e)<<1)+(e<0?1:0);e||!t;){var i=31&e;e>>=5,e&&(i|=32),t+=n[i]}return t}if(!r)return"";a=a||{};var f,d=[],p=a.url||"",g=paper.agent,m=g.versionNumber,v=!1,_=a.sourceMaps,w=a.source||r,x=/\r\n|\n|\r/gm,E=a.offset||0;if(_&&(g.chrome&&m>=30||g.webkit&&m>=537.76||g.firefox&&m>=23||g.node)){if(g.node)E-=2;else if(n&&p&&!n.location.href.indexOf(p)){var k=i.getElementsByTagName("html")[0].innerHTML;E=k.substr(0,k.indexOf(r)+1).match(x).length+1}v=E>0&&!(g.chrome&&m>=36||g.safari&&m>=600||g.firefox&&m>=40||g.node);var M=["AA"+h(v?0:E)+"A"];M.length=(r.match(x)||[]).length+1+(v?E:0),f={version:3,file:p,names:[],mappings:M.join(";AACA"),sourceRoot:"",sources:[p],sourcesContent:[w]}}return c(t(r,{ranges:!0,preserveParens:!0})),f&&(v&&(r=new Array(E+1).join("\n")+r),/^(inline|both)$/.test(_)&&(r+="\n//# sourceMappingURL=data:application/json;base64,"+e.btoa(unescape(encodeURIComponent(JSON.stringify(f))))),r+="\n//# sourceURL="+(p||"paperscript")),{url:p,source:w,code:r,map:f}}function u(e,t,n){function o(t,n){for(var i in t)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(e)||(g.push(i),m.push(t[i]))}paper=t;var u,c=t.getView(),f=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(e)&&!/\bnew\s+Tool\b/.test(e)?new J:null,d=f?f._events:[],p=["onFrame","onResize"].concat(d),g=[],m=[],v="object"==typeof e?e:l(e,n);e=v.code,o({__$__:a,$__:s,paper:t,view:c,tool:f},!0),o(t),p=r.each(p,function(t){new RegExp("\\s+"+t+"\\b").test(e)&&(g.push(t),this.push(t+": "+t))},[]).join(", "),p&&(e+="\nreturn { "+p+" };");var _=paper.agent;if(i&&(_.chrome||_.firefox&&_.versionNumber<40)){var y=i.createElement("script"),b=i.head||i.getElementsByTagName("head")[0];_.firefox&&(e="\n"+e),y.appendChild(i.createTextNode("paper._execute = function("+g+") {"+e+"\n}")),b.appendChild(y),u=paper._execute,delete paper._execute,b.removeChild(y)}else u=Function(g,e);var w=u.apply(t,m)||{};return r.each(d,function(e){var t=w[e];t&&(f[e]=t)}),c&&(w.onResize&&c.setOnResize(w.onResize),c.emit("resize",{size:c.size,delta:new h}),w.onFrame&&c.setOnFrame(w.onFrame),c.requestUpdate()),v}function c(e){if(/^text\/(?:x-|)paperscript$/.test(e.type)&&"true"!==o.getAttribute(e,"ignore")){var t=o.getAttribute(e,"canvas"),n=i.getElementById(t),r=e.src||e.getAttribute("data-src"),a=o.hasAttribute(e,"async"),s="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+t+'"');var l=o.get(n.getAttribute(s))||(new o).setup(n);return n.setAttribute(s,l._id),r?K.request({url:r,async:a,mimeType:"text/plain",onLoad:function(e){u(e,l,r)}}):u(e.innerHTML,l,e.baseURI),e.setAttribute("data-paper-ignore","true"),l}}function f(){r.each(i&&i.getElementsByTagName("script"),c)}function p(e){return e?c(e):f()}var g=this,m=g.acorn;if(!m&&"undefined"!=typeof require)try{m=require("acorn")}catch(e){}if(!m){var v,_;m=v=_={},function(e,t){return"object"==typeof v&&"object"==typeof _?t(v):"function"==typeof define&&define.amd?define(["exports"],t):void t(e.acorn||(e.acorn={}))}(this,function(e){"use strict";function t(e){he=e||{};for(var t in ge)Object.prototype.hasOwnProperty.call(he,t)||(he[t]=ge[t]);pe=he.sourceFile||null}function n(e,t){var n=me(fe,e);t+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=ve,i}function i(e){function t(e){if(1==e.length)return n+="return str === "+JSON.stringify(e[0])+";";n+="switch(str){";for(var t=0;t<e.length;++t)n+="case "+JSON.stringify(e[t])+":";n+="return true}return false;"}e=e.split(" ");var n="",i=[];e:for(var r=0;r<e.length;++r){for(var a=0;a<i.length;++a)if(i[a][0].length==e[r].length){i[a].push(e[r]);continue e}i.push([e[r]])}if(i.length>3){i.sort(function(e,t){return t.length-e.length}),n+="switch(str.length){";for(var r=0;r<i.length;++r){var o=i[r];n+="case "+o[0].length+":",t(o)}n+="}"}else t(e);return new Function("str",n)}function r(){this.line=Me,this.column=ve-Te}function a(){Me=1,ve=Te=0,ke=!0,u()}function o(e,t){ye=ve,he.locations&&(we=new r),xe=e,u(),Ee=t,ke=e.beforeExpr}function s(){var e=he.onComment&&he.locations&&new r,t=ve,i=fe.indexOf("*/",ve+=2);if(i===-1&&n(ve-2,"Unterminated comment"),ve=i+2,he.locations){Qt.lastIndex=t;for(var a;(a=Qt.exec(fe))&&a.index<ve;)++Me,Te=a.index+a[0].length}he.onComment&&he.onComment(!0,fe.slice(t+2,i),t,ve,e,he.locations&&new r)}function l(){for(var e=ve,t=he.onComment&&he.locations&&new r,n=fe.charCodeAt(ve+=2);ve<de&&10!==n&&13!==n&&8232!==n&&8233!==n;)++ve,n=fe.charCodeAt(ve);he.onComment&&he.onComment(!1,fe.slice(e+2,ve),e,ve,t,he.locations&&new r)}function u(){for(;ve<de;){var e=fe.charCodeAt(ve);if(32===e)++ve;else if(13===e){++ve;var t=fe.charCodeAt(ve);10===t&&++ve,he.locations&&(++Me,Te=ve)}else if(10===e||8232===e||8233===e)++ve,he.locations&&(++Me,Te=ve);else if(e>8&&e<14)++ve;else if(47===e){var t=fe.charCodeAt(ve+1);if(42===t)s();else{if(47!==t)break;l()}}else if(160===e)++ve;else{if(!(e>=5760&&Gt.test(String.fromCharCode(e))))break;++ve}}}function c(){var e=fe.charCodeAt(ve+1);return e>=48&&e<=57?k(!0):(++ve,o(bt))}function h(){var e=fe.charCodeAt(ve+1);return ke?(++ve,w()):61===e?b(kt,2):b(xt,1)}function f(){var e=fe.charCodeAt(ve+1);return 61===e?b(kt,2):b(Dt,1)}function d(e){var t=fe.charCodeAt(ve+1);return t===e?b(124===e?St:At,2):61===t?b(kt,2):b(124===e?Rt:Pt,1)}function p(){var e=fe.charCodeAt(ve+1);return 61===e?b(kt,2):b(Ct,1)}function g(e){
var t=fe.charCodeAt(ve+1);return t===e?45==t&&62==fe.charCodeAt(ve+2)&&Zt.test(fe.slice(Ae,ve))?(ve+=3,l(),u(),y()):b(Mt,2):61===t?b(kt,2):b(Ft,1)}function m(e){var t=fe.charCodeAt(ve+1),n=1;return t===e?(n=62===e&&62===fe.charCodeAt(ve+2)?3:2,61===fe.charCodeAt(ve+n)?b(kt,n+1):b(Nt,n)):33==t&&60==e&&45==fe.charCodeAt(ve+2)&&45==fe.charCodeAt(ve+3)?(ve+=4,l(),u(),y()):(61===t&&(n=61===fe.charCodeAt(ve+2)?3:2),b(Lt,n))}function v(e){var t=fe.charCodeAt(ve+1);return 61===t?b(Ot,61===fe.charCodeAt(ve+2)?3:2):b(61===e?Et:Tt,1)}function _(e){switch(e){case 46:return c();case 40:return++ve,o(gt);case 41:return++ve,o(mt);case 59:return++ve,o(_t);case 44:return++ve,o(vt);case 91:return++ve,o(ht);case 93:return++ve,o(ft);case 123:return++ve,o(dt);case 125:return++ve,o(pt);case 58:return++ve,o(yt);case 63:return++ve,o(wt);case 48:var t=fe.charCodeAt(ve+1);if(120===t||88===t)return E();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return k(!1);case 34:case 39:return M(e);case 47:return h(e);case 37:case 42:return f();case 124:case 38:return d(e);case 94:return p();case 43:case 45:return g(e);case 60:case 62:return m(e);case 61:case 33:return v(e);case 126:return b(Tt,1)}return!1}function y(e){if(e?ve=_e+1:_e=ve,he.locations&&(be=new r),e)return w();if(ve>=de)return o(Ue);var t=fe.charCodeAt(ve);if($t(t)||92===t)return A();var i=_(t);if(i===!1){var a=String.fromCharCode(t);if("\\"===a||Yt.test(a))return A();n(ve,"Unexpected character '"+a+"'")}return i}function b(e,t){var n=fe.slice(ve,ve+t);ve+=t,o(e,n)}function w(){for(var e,t,i="",r=ve;;){ve>=de&&n(r,"Unterminated regular expression");var a=fe.charAt(ve);if(Zt.test(a)&&n(r,"Unterminated regular expression"),e)e=!1;else{if("["===a)t=!0;else if("]"===a&&t)t=!1;else if("/"===a&&!t)break;e="\\"===a}++ve}var i=fe.slice(r,ve);++ve;var s=S();s&&!/^[gmsiy]*$/.test(s)&&n(r,"Invalid regexp flag");try{var l=new RegExp(i,s)}catch(e){e instanceof SyntaxError&&n(r,e.message),n(e)}return o(Fe,l)}function x(e,t){for(var n=ve,i=0,r=0,a=null==t?1/0:t;r<a;++r){var o,s=fe.charCodeAt(ve);if(o=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0,o>=e)break;++ve,i=i*e+o}return ve===n||null!=t&&ve-n!==t?null:i}function E(){ve+=2;var e=x(16);return null==e&&n(_e+2,"Expected hexadecimal number"),$t(fe.charCodeAt(ve))&&n(ve,"Identifier directly after number"),o(Ne,e)}function k(e){var t=ve,i=!1,r=48===fe.charCodeAt(ve);e||null!==x(10)||n(t,"Invalid number"),46===fe.charCodeAt(ve)&&(++ve,x(10),i=!0);var a=fe.charCodeAt(ve);69!==a&&101!==a||(a=fe.charCodeAt(++ve),43!==a&&45!==a||++ve,null===x(10)&&n(t,"Invalid number"),i=!0),$t(fe.charCodeAt(ve))&&n(ve,"Identifier directly after number");var s,l=fe.slice(t,ve);return i?s=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||Oe?n(t,"Invalid number"):s=parseInt(l,8):s=parseInt(l,10),o(Ne,s)}function M(e){ve++;for(var t="";;){ve>=de&&n(_e,"Unterminated string constant");var i=fe.charCodeAt(ve);if(i===e)return++ve,o(De,t);if(92===i){i=fe.charCodeAt(++ve);var r=/^[0-7]+/.exec(fe.slice(ve,ve+3));for(r&&(r=r[0]);r&&parseInt(r,8)>255;)r=r.slice(0,-1);if("0"===r&&(r=null),++ve,r)Oe&&n(ve-2,"Octal literal in strict mode"),t+=String.fromCharCode(parseInt(r,8)),ve+=r.length-1;else switch(i){case 110:t+="\n";break;case 114:t+="\r";break;case 120:t+=String.fromCharCode(T(2));break;case 117:t+=String.fromCharCode(T(4));break;case 85:t+=String.fromCharCode(T(8));break;case 116:t+="\t";break;case 98:t+="\b";break;case 118:t+="\v";break;case 102:t+="\f";break;case 48:t+="\0";break;case 13:10===fe.charCodeAt(ve)&&++ve;case 10:he.locations&&(Te=ve,++Me);break;default:t+=String.fromCharCode(i)}}else 13!==i&&10!==i&&8232!==i&&8233!==i||n(_e,"Unterminated string constant"),t+=String.fromCharCode(i),++ve}}function T(e){var t=x(16,e);return null===t&&n(_e,"Bad character escape sequence"),t}function S(){Ut=!1;for(var e,t=!0,i=ve;;){var r=fe.charCodeAt(ve);if(Jt(r))Ut&&(e+=fe.charAt(ve)),++ve;else{if(92!==r)break;Ut||(e=fe.slice(i,ve)),Ut=!0,117!=fe.charCodeAt(++ve)&&n(ve,"Expecting Unicode escape sequence \\uXXXX"),++ve;var a=T(4),o=String.fromCharCode(a);o||n(ve-1,"Invalid Unicode escape"),(t?$t(a):Jt(a))||n(ve-4,"Invalid Unicode escape"),e+=o}t=!1}return Ut?e:fe.slice(i,ve)}function A(){var e=S(),t=Ie;return!Ut&&Vt(e)&&(t=ct[e]),o(t,e)}function R(){Se=_e,Ae=ye,Re=we,y()}function C(e){if(Oe=e,ve=_e,he.locations)for(;ve<Te;)Te=fe.lastIndexOf("\n",Te-2)+1,--Me;u(),y()}function P(){this.type=null,this.start=_e,this.end=null}function O(){this.start=be,this.end=null,null!==pe&&(this.source=pe)}function L(){var e=new P;return he.locations&&(e.loc=new O),he.directSourceFile&&(e.sourceFile=he.directSourceFile),he.ranges&&(e.range=[_e,0]),e}function N(e){var t=new P;return t.start=e.start,he.locations&&(t.loc=new O,t.loc.start=e.loc.start),he.ranges&&(t.range=[e.range[0],0]),t}function F(e,t){return e.type=t,e.end=Ae,he.locations&&(e.loc.end=Re),he.ranges&&(e.range[1]=Ae),e}function D(e){return he.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function I(e){if(xe===e)return R(),!0}function U(){return!he.strictSemicolons&&(xe===Ue||xe===pt||Zt.test(fe.slice(Ae,_e)))}function H(){I(_t)||U()||B()}function z(e){xe===e?R():B()}function B(){n(_e,"Unexpected token")}function j(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&n(e.start,"Assigning to rvalue"),Oe&&"Identifier"===e.type&&jt(e.name)&&n(e.start,"Assigning to "+e.name+" in strict mode")}function V(e){Se=Ae=ve,he.locations&&(Re=new r),Ce=Oe=null,Pe=[],y();var t=e||L(),n=!0;for(e||(t.body=[]);xe!==Ue;){var i=G();t.body.push(i),n&&D(i)&&C(!0),n=!1}return F(t,"Program")}function G(){(xe===xt||xe===kt&&"/="==Ee)&&y(!0);var e=xe,t=L();switch(e){case He:case je:R();var i=e===He;I(_t)||U()?t.label=null:xe!==Ie?B():(t.label=ce(),H());for(var r=0;r<Pe.length;++r){var a=Pe[r];if(null==t.label||a.name===t.label.name){if(null!=a.kind&&(i||"loop"===a.kind))break;if(t.label&&i)break}}return r===Pe.length&&n(t.start,"Unsyntactic "+e.keyword),F(t,i?"BreakStatement":"ContinueStatement");case Ve:return R(),H(),F(t,"DebuggerStatement");case We:return R(),Pe.push(Kt),t.body=G(),Pe.pop(),z(nt),t.test=W(),H(),F(t,"DoWhileStatement");case qe:if(R(),Pe.push(Kt),z(gt),xe===_t)return Y(t,null);if(xe===tt){var o=L();return R(),Z(o,!0),F(o,"VariableDeclaration"),1===o.declarations.length&&I(ut)?q(t,o):Y(t,o)}var o=Q(!1,!0);return I(ut)?(j(o),q(t,o)):Y(t,o);case Ze:return R(),le(t,!0);case Qe:return R(),t.test=W(),t.consequent=G(),t.alternate=I(Xe)?G():null,F(t,"IfStatement");case $e:return Ce||he.allowReturnOutsideFunction||n(_e,"'return' outside of function"),R(),I(_t)||U()?t.argument=null:(t.argument=Q(),H()),F(t,"ReturnStatement");case Je:R(),t.discriminant=W(),t.cases=[],z(dt),Pe.push(en);for(var s,l;xe!=pt;)if(xe===ze||xe===Ge){var u=xe===ze;s&&F(s,"SwitchCase"),t.cases.push(s=L()),s.consequent=[],R(),u?s.test=Q():(l&&n(Se,"Multiple default clauses"),l=!0,s.test=null),z(yt)}else s||B(),s.consequent.push(G());return s&&F(s,"SwitchCase"),R(),Pe.pop(),F(t,"SwitchStatement");case Ke:return R(),Zt.test(fe.slice(Ae,_e))&&n(Ae,"Illegal newline after throw"),t.argument=Q(),H(),F(t,"ThrowStatement");case et:if(R(),t.block=X(),t.handler=null,xe===Be){var c=L();R(),z(gt),c.param=ce(),Oe&&jt(c.param.name)&&n(c.param.start,"Binding "+c.param.name+" in strict mode"),z(mt),c.guard=null,c.body=X(),t.handler=F(c,"CatchClause")}return t.guardedHandlers=Le,t.finalizer=I(Ye)?X():null,t.handler||t.finalizer||n(t.start,"Missing catch or finally clause"),F(t,"TryStatement");case tt:return R(),Z(t),H(),F(t,"VariableDeclaration");case nt:return R(),t.test=W(),Pe.push(Kt),t.body=G(),Pe.pop(),F(t,"WhileStatement");case it:return Oe&&n(_e,"'with' in strict mode"),R(),t.object=W(),t.body=G(),F(t,"WithStatement");case dt:return X();case _t:return R(),F(t,"EmptyStatement");default:var h=Ee,f=Q();if(e===Ie&&"Identifier"===f.type&&I(yt)){for(var r=0;r<Pe.length;++r)Pe[r].name===h&&n(f.start,"Label '"+h+"' is already declared");var d=xe.isLoop?"loop":xe===Je?"switch":null;return Pe.push({name:h,kind:d}),t.body=G(),Pe.pop(),t.label=f,F(t,"LabeledStatement")}return t.expression=f,H(),F(t,"ExpressionStatement")}}function W(){z(gt);var e=Q();return z(mt),e}function X(e){var t,n=L(),i=!0,r=!1;for(n.body=[],z(dt);!I(pt);){var a=G();n.body.push(a),i&&e&&D(a)&&(t=r,C(r=!0)),i=!1}return r&&!t&&C(!1),F(n,"BlockStatement")}function Y(e,t){return e.init=t,z(_t),e.test=xe===_t?null:Q(),z(_t),e.update=xe===mt?null:Q(),z(mt),e.body=G(),Pe.pop(),F(e,"ForStatement")}function q(e,t){return e.left=t,e.right=Q(),z(mt),e.body=G(),Pe.pop(),F(e,"ForInStatement")}function Z(e,t){for(e.declarations=[],e.kind="var";;){var i=L();if(i.id=ce(),Oe&&jt(i.id.name)&&n(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=I(Et)?Q(!0,t):null,e.declarations.push(F(i,"VariableDeclarator")),!I(vt))break}return e}function Q(e,t){var n=$(t);if(!e&&xe===vt){var i=N(n);for(i.expressions=[n];I(vt);)i.expressions.push($(t));return F(i,"SequenceExpression")}return n}function $(e){var t=J(e);if(xe.isAssign){var n=N(t);return n.operator=Ee,n.left=t,R(),n.right=$(e),j(t),F(n,"AssignmentExpression")}return t}function J(e){var t=K(e);if(I(wt)){var n=N(t);return n.test=t,n.consequent=Q(!0),z(yt),n.alternate=Q(!0,e),F(n,"ConditionalExpression")}return t}function K(e){return ee(te(),-1,e)}function ee(e,t,n){var i=xe.binop;if(null!=i&&(!n||xe!==ut)&&i>t){var r=N(e);r.left=e,r.operator=Ee;var a=xe;R(),r.right=ee(te(),i,n);var o=F(r,a===St||a===At?"LogicalExpression":"BinaryExpression");return ee(o,t,n)}return e}function te(){if(xe.prefix){var e=L(),t=xe.isUpdate;return e.operator=Ee,e.prefix=!0,ke=!0,R(),e.argument=te(),t?j(e.argument):Oe&&"delete"===e.operator&&"Identifier"===e.argument.type&&n(e.start,"Deleting local variable in strict mode"),F(e,t?"UpdateExpression":"UnaryExpression")}for(var i=ne();xe.postfix&&!U();){var e=N(i);e.operator=Ee,e.prefix=!1,e.argument=i,j(i),R(),i=F(e,"UpdateExpression")}return i}function ne(){return ie(re())}function ie(e,t){if(I(bt)){var n=N(e);return n.object=e,n.property=ce(!0),n.computed=!1,ie(F(n,"MemberExpression"),t)}if(I(ht)){var n=N(e);return n.object=e,n.property=Q(),n.computed=!0,z(ft),ie(F(n,"MemberExpression"),t)}if(!t&&I(gt)){var n=N(e);return n.callee=e,n.arguments=ue(mt,!1),ie(F(n,"CallExpression"),t)}return e}function re(){switch(xe){case at:var e=L();return R(),F(e,"ThisExpression");case Ie:return ce();case Ne:case De:case Fe:var e=L();return e.value=Ee,e.raw=fe.slice(_e,ye),R(),F(e,"Literal");case ot:case st:case lt:var e=L();return e.value=xe.atomValue,e.raw=xe.keyword,R(),F(e,"Literal");case gt:var t=be,n=_e;R();var i=Q();return i.start=n,i.end=ye,he.locations&&(i.loc.start=t,i.loc.end=we),he.ranges&&(i.range=[n,ye]),z(mt),i;case ht:var e=L();return R(),e.elements=ue(ft,!0,!0),F(e,"ArrayExpression");case dt:return oe();case Ze:var e=L();return R(),le(e,!1);case rt:return ae();default:B()}}function ae(){var e=L();return R(),e.callee=ie(re(),!0),I(gt)?e.arguments=ue(mt,!1):e.arguments=Le,F(e,"NewExpression")}function oe(){var e=L(),t=!0,i=!1;for(e.properties=[],R();!I(pt);){if(t)t=!1;else if(z(vt),he.allowTrailingCommas&&I(pt))break;var r,a={key:se()},o=!1;if(I(yt)?(a.value=Q(!0),r=a.kind="init"):he.ecmaVersion>=5&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)?(o=i=!0,r=a.kind=a.key.name,a.key=se(),xe!==gt&&B(),a.value=le(L(),!1)):B(),"Identifier"===a.key.type&&(Oe||i))for(var s=0;s<e.properties.length;++s){var l=e.properties[s];if(l.key.name===a.key.name){var u=r==l.kind||o&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);u&&!Oe&&"init"===r&&"init"===l.kind&&(u=!1),u&&n(a.key.start,"Redefinition of property")}}e.properties.push(a)}return F(e,"ObjectExpression")}function se(){return xe===Ne||xe===De?re():ce(!0)}function le(e,t){xe===Ie?e.id=ce():t?B():e.id=null,e.params=[];var i=!0;for(z(gt);!I(mt);)i?i=!1:z(vt),e.params.push(ce());var r=Ce,a=Pe;if(Ce=!0,Pe=[],e.body=X(!0),Ce=r,Pe=a,Oe||e.body.body.length&&D(e.body.body[0]))for(var o=e.id?-1:0;o<e.params.length;++o){var s=o<0?e.id:e.params[o];if((Bt(s.name)||jt(s.name))&&n(s.start,"Defining '"+s.name+"' in strict mode"),o>=0)for(var l=0;l<o;++l)s.name===e.params[l].name&&n(s.start,"Argument name clash in strict mode")}return F(e,t?"FunctionDeclaration":"FunctionExpression")}function ue(e,t,n){for(var i=[],r=!0;!I(e);){if(r)r=!1;else if(z(vt),t&&he.allowTrailingCommas&&I(e))break;n&&xe===vt?i.push(null):i.push(Q(!0))}return i}function ce(e){var t=L();return e&&"everywhere"==he.forbidReserved&&(e=!1),xe===Ie?(!e&&(he.forbidReserved&&(3===he.ecmaVersion?Ht:zt)(Ee)||Oe&&Bt(Ee))&&fe.slice(_e,ye).indexOf("\\")==-1&&n(_e,"The keyword '"+Ee+"' is reserved"),t.name=Ee):e&&xe.keyword?t.name=xe.keyword:B(),ke=!1,R(),F(t,"Identifier")}e.version="0.5.0";var he,fe,de,pe;e.parse=function(e,n){return fe=String(e),de=fe.length,t(n),a(),V(he.program)};var ge=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},me=e.getLineInfo=function(e,t){for(var n=1,i=0;;){Qt.lastIndex=i;var r=Qt.exec(e);if(!(r&&r.index<t))break;++n,i=r.index+r[0].length}return{line:n,column:t-i}};e.tokenize=function(e,n){function i(e){return Ae=ye,y(e),r.start=_e,r.end=ye,r.startLoc=be,r.endLoc=we,r.type=xe,r.value=Ee,r}fe=String(e),de=fe.length,t(n),a();var r={};return i.jumpTo=function(e,t){if(ve=e,he.locations){Me=1,Te=Qt.lastIndex=0;for(var n;(n=Qt.exec(fe))&&n.index<e;)++Me,Te=n.index+n[0].length}ke=t,u()},i};var ve,_e,ye,be,we,xe,Ee,ke,Me,Te,Se,Ae,Re,Ce,Pe,Oe,Le=[],Ne={type:"num"},Fe={type:"regexp"},De={type:"string"},Ie={type:"name"},Ue={type:"eof"},He={keyword:"break"},ze={keyword:"case",beforeExpr:!0},Be={keyword:"catch"},je={keyword:"continue"},Ve={keyword:"debugger"},Ge={keyword:"default"},We={keyword:"do",isLoop:!0},Xe={keyword:"else",beforeExpr:!0},Ye={keyword:"finally"},qe={keyword:"for",isLoop:!0},Ze={keyword:"function"},Qe={keyword:"if"},$e={keyword:"return",beforeExpr:!0},Je={keyword:"switch"},Ke={keyword:"throw",beforeExpr:!0},et={keyword:"try"},tt={keyword:"var"},nt={keyword:"while",isLoop:!0},it={keyword:"with"},rt={keyword:"new",beforeExpr:!0},at={keyword:"this"},ot={keyword:"null",atomValue:null},st={keyword:"true",atomValue:!0},lt={keyword:"false",atomValue:!1},ut={keyword:"in",binop:7,beforeExpr:!0},ct={break:He,case:ze,catch:Be,continue:je,debugger:Ve,default:Ge,do:We,else:Xe,finally:Ye,for:qe,function:Ze,if:Qe,return:$e,switch:Je,throw:Ke,try:et,var:tt,while:nt,with:it,null:ot,true:st,false:lt,new:rt,in:ut,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:at,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ht={type:"[",beforeExpr:!0},ft={type:"]"},dt={type:"{",beforeExpr:!0},pt={type:"}"},gt={type:"(",beforeExpr:!0},mt={type:")"},vt={type:",",beforeExpr:!0},_t={type:";",beforeExpr:!0},yt={type:":",beforeExpr:!0},bt={type:"."},wt={type:"?",beforeExpr:!0},xt={binop:10,beforeExpr:!0},Et={isAssign:!0,beforeExpr:!0},kt={isAssign:!0,beforeExpr:!0},Mt={postfix:!0,prefix:!0,isUpdate:!0},Tt={prefix:!0,beforeExpr:!0},St={binop:1,beforeExpr:!0},At={binop:2,beforeExpr:!0},Rt={binop:3,beforeExpr:!0},Ct={binop:4,beforeExpr:!0},Pt={binop:5,beforeExpr:!0},Ot={binop:6,beforeExpr:!0},Lt={binop:7,beforeExpr:!0},Nt={binop:8,beforeExpr:!0},Ft={binop:9,prefix:!0,beforeExpr:!0},Dt={binop:10,beforeExpr:!0};e.tokTypes={bracketL:ht,bracketR:ft,braceL:dt,braceR:pt,parenL:gt,parenR:mt,comma:vt,semi:_t,colon:yt,dot:bt,question:wt,slash:xt,eq:Et,name:Ie,eof:Ue,num:Ne,regexp:Fe,string:De};for(var It in ct)e.tokTypes["_"+It]=ct[It];var Ut,Ht=i("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),zt=i("class enum extends super const export import"),Bt=i("implements interface let package private protected public static yield"),jt=i("eval arguments"),Vt=i("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Gt=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Wt="陋碌潞脌-脰脴-枚酶-藖藛-藨藸-摔爽水桶-痛投头秃-徒螁螆-螉螌螏-巍危-系戏-襾見-鸳员-諙諜铡-謬讗-转装-撞貭-賷佼侬俦-蹞蹠邾郐郛郫酆-奂劭軔軖-墀輱-蕙薇邐-擢叽叩吆酄€-酄曕牃酄む牗唷€-唷樴啖�-啖-啶灌そ啷愢-啷∴ケ-啷粪ス-啷苦-唳屶唳愢-唳ㄠΚ-唳班Σ唳�-唳灌唰庎唰澿-唰∴О唰编▍-啜娻◤啜愢〒-啜ㄠí-啜班ú啜赤ǖ啜多ǜ啜灌-喋溹喋�-喋脆獏-嗒嵿獜-嗒戉獡-嗒ㄠ-嗒班嗒赤-嗒灌喃愢珷喃∴瑓-喱屶瑥喱愢瑩-喱ㄠ-喱班喱赤-喱灌喹溹瓭喹�-喹∴喈冟畢-喈娻畮-喈愢畳-喈曕畽喈氞疁喈炧疅喈｀喈�-喈-喈灌瘣喟�-喟屶皫-喟愢皰-喟ㄠ蔼-喟赤暗-喟灌敖啾樴睓啾犩薄嗖�-嗖屶矌-嗖愢矑-嗖ㄠ勃-嗖赤驳-嗖灌步喑炧碃喑∴潮喑侧磪-啻屶磶-啻愢磼-啻亨唇嗟庎禒嗟∴岛-嗟苦秴-喽栢稓-喽编冻-喽秽督喾€-喾嗋竵-喔班覆喔赤箑-喙嗋簛嗪傕簞嗪囙簣嗪娻簫嗪�-嗪椸簷-嗪熰骸-嗪｀亥嗪о邯嗪涵-嗪班翰嗪赤航嗷€-嗷勦粏嗷�-嗷熰紑嘟€-嘟囙綁-嘟緢-嗑屷€€-醼€酷亹-醽曖仛-醽濁仭醽メ仸醽�-醽搬伒-醾佱値醾�-醿呩儑醿嶀儛-醿横兗-釅堘墛-釅嶀墣-釅栣墭釅�-釅濁墵-釆堘妸-釆嶀姁-釆搬姴-釆滇姼-釆踞媭釈�-釈呩媹-釈栣嫎-釋愥寬-釋曖寴-釐氠巰-釒忈帬-釓瘁悂-釞櫙-釞酷殎-釟氠殸-釠洰-釠搬渶-釡屷湈-釡戓湢-釡贬潃-釢戓潬-釢澁-釢搬瀫-釣翅煑釤溼牋-帷丰-幄ㄡⅹ幄�-幔滇-幛溼-幞グ-幞瘁-幡-岌囜█-屺栣-岍斸岈�-岈翅瓍-岘嬦畠-岙犪岙-岑メ皜-岚ａ睄-岜忈睔-岜结畅-岢钞-岢贬车岢夺磤-岫酷竴-峒曖紭-峒濁紶-峤呩綀-峤嶀綈-峤椺綑峤涐綕峤�-峤结線-峋瘁径-峋坚揪峥�-峥勧繂-峥屷繍-峥撫繓-峥涐繝-峥坎-峥瘁慷-峥尖伇鈦库倫-鈧溾剛鈩団剨-鈩撯剷鈩�-鈩濃劋鈩︹劏鈩�-鈩劘-鈩光劶-鈩库厖-鈪夆厧鈪�-鈫堚皜-獍鞍-獗炩睜-獬も倡-獬巢獬斥磤-獯モ揣獯窗-獾р弹舛€-舛栤稜-舛︹定-舛栋-舛垛陡-舛锯穩-夥嗏穲-夥庘窅-夥栤窐-夥炩腐銆�-銆囥€�-銆┿€�-銆点€�-銆笺亖-銈栥倽-銈熴偂-銉恒兗-銉裤剠-銊劚-銌庛啝-銌恒嚢-銍裤悁-涠典竴-榭岅€€-陹岅搻-険疥攢-陿岅槓-陿熽槳陿檧-隀櫩-隁楆殸-隂湕-隃熽湤-隇堦瀷-隇庩瀽-隇撽灎-隇煾-隊侁爟-隊呹爣-隊婈爩-隊㈥-辍酬-辎酬２-辏逢；辘�-辘リぐ-辚嗞-辚缄-軎碴戗€-戗﹢-戛傟﹦-戛嬯-戛蛾┖戟€-戟戟店戟�-戟疥珋戢傟珱-戢濌珷-戢-戢搓瑏-戡嗞瑝-戡庩瑧-戡栮瑺-戡﹃-戡瘈-戬㈥皜-頌ｍ灠-頍嗧煁-頍伙-铹┌-铽欙瑎-铿嗭瑩-铿楋瑵铿�-铿-铿讹-铿硷锃€锃侊瓋锃勶瓎-锂憋瘬-锎斤祼-锒忥稈-锓囷钒-锓伙拱-锕达苟-锘硷肌-锛猴絹-锝氾溅-锞撅總-锟囷繆-锟忥繏-锟楋繗-锟�",Xt="虁-童覂-覈謶-纸挚讈讉讋讌讎貝-貧貭-賶俨-蹞郄-郇刍-奂馨-輮酄€-酄斷牄-酄｀牓-酄о牘-酄-唷椸￥-啵距-啶冟ず-啶监ぞ-啷忇-啷椸ア-啷｀ウ-啷-唳冟唳�-唰勦唰堗唰�-唰犩▉-啜冟啜�-喋傕﹪喋堗-喋嵿喋�-喋编┑嗒�-嗒冟嗒�-喃呧珖-喃夃珛-喃嵿-喃｀-喃瑏-喱冟喱�-喹勦瓏喹堗瓔-喹嵿瓥喹椸瓱-喹犩-喹畟喈�-喁傕瘑-喁堗瘖-喁嵿瘲喁�-喁皝-喟冟眴-啾堗眾-啾嵿睍啾栢雹-啾｀宝-啾矀嗖冟布嗖�-喑勦硢-喑堗硦-喑嵿硶喑栢尝-喑｀肠-喑磦啻冟祮-嗟堗禇嗟�-嗟｀郸-嗟秱喽冟穵喾�-喾斷窎喾�-喾熰凡喾赤复-喔亨箑-喙呧箰-喙權捍-嗪灌粓-嗷嵿粣-嗷權紭嗉權紶-嗉┼嫉嗉粪脊嘟�-嘟囙奖-嗑勦締-嗑囙緧-嗑椸緳-嗑监繂醼€-醼┽亐-醽夅仹-醽伇-醽瘁倐-醾嶀倧-醾濁崫-釐熱湈-釡愥湢-釡搬潃-釢愥澆釢翅瀫-釣册煗釤�-釤┽爧-釥嶀爯-釥欋-幛ぐ-幛会-幞Π-岌€岌�-岌夅-岌欋█-屺曖-岍撫-岍坚┛-岐夅獝-岐欋瓎-岘嬦瓙-岘欋-岘翅-岙贯-岑翅皜-岚⑨眬-岜夅睕-岜结硱-岢掅磤-岫踞竵-峒曗€屸€嶁€库亐鈦斺儛-鈨溾儭鈨�-鈨扳秮-舛栤窢-夥裤€�-銆ㄣ倷銈氷檧-隀櫞-隀疥殶隂�-隂标煾-隊€隊嗞爧隊�-隊ш-辎侁⒋-辏勱-辏欔３-辏逢-辘夑う-辘ぐ-辚呹-軎冴Τ-戋€戗€-戗ш﹢-戛侁-戛嶊-戛欔┗戢�-戢╆-戢酬瘈-戬￡戬-戬癸瑺-铿竴-锔忥笭-锔︼赋锔达箥-锕忥紣-锛欙伎",Yt=new RegExp("["+Wt+"]"),qt=new RegExp("["+Wt+Xt+"]"),Zt=/[\n\r\u2028\u2029]/,Qt=/\r\n|[\n\r\u2028\u2029]/g,$t=e.isIdentifierStart=function(e){return e<65?36===e:e<91||(e<97?95===e:e<123||e>=170&&Yt.test(String.fromCharCode(e)))},Jt=e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&qt.test(String.fromCharCode(e))))},Kt={kind:"loop"},en={kind:"switch"}}),m.version||(m=null)}var y={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},b={"-":"__negate","+":"__self"},w=r.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(e){this["__"+e]="#"+e},{__self:function(){return this}});return h.inject(w),d.inject(w),H.inject(w),n&&("complete"===i.readyState?setTimeout(f):G.add(n,{load:f})),{compile:l,execute:u,load:p,parse:t}}.call(this),paper=new(o.inject(r.exports,{Base:r,Numerical:u,Key:Z,DomEvent:G,DomElement:V,document:i,window:n,Symbol:T,PlacedSymbol:M})),paper.agent.node&&require("./node/extend.js")(paper),"function"==typeof define&&define.amd?define("paper",paper):"object"==typeof module&&module&&(module.exports=paper),paper}.call(this,"object"==typeof self?self:null);!function(){"use strict";function e(){d.forEach(function(e){f[e]=Module[e]});for(var e in Module)e.match(/^AR/)&&(f[e]=Module[e])}function t(e,t,n){var i="/marker_"+p++;l(t,i,function(){var t=Module._addMarker(e,i);n&&n(t)})}function n(e){return String.fromCharCode.apply(String,e)}function i(e){var t=n(e),i=t.split("\n"),r=[],a=0,o=0;return i.forEach(function(e){if(e=e.trim(),e&&!e.startsWith("#"))switch(a){case 0:return o=+e,void(a=1);case 1:e.match(/^\d+$/)||r.push(e);case 2:case 3:case 4:return void a++;case 5:return void(a=1)}}),r}function r(e,t,n){var r="/multi_marker_"+g++;l(t,r,function(a){function o(){var t=Module._addMultiMarker(e,r),i=Module.getMultiMarkerNum(e,t);n&&n(t,i)}var s=i(a);if(!s.length)return o();var l=t.split("/").slice(0,-1).join("/");s=s.map(function(e){return[l+"/"+e,e]}),u(s,o)})}function a(e,t){var n="/camera_param_"+m++,i=function(){var e=Module._loadCamera(n);t&&t(e)};"object"==typeof e?s(n,e,i):e.indexOf("\n")>-1?o(n,e,i):l(e,n,i)}function o(e,t,n){for(var i=new Uint8Array(t.length),r=0;r<i.length;r++)i[r]=255&t.charCodeAt(r);s(e,i,n)}function s(e,t,n){FS.writeFile(e,t,{encoding:"binary"}),n(t)}function l(e,t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(e){var r=i.response,a=new Uint8Array(r);s(t,a,n)},i.send()}function u(e,t){var n=e.pop();n?l(n[0],n[1],function(){u(e,t)}):t()}var c=function(e,t,n){var i=e,r=t;if(this.orientation="landscape",this.listeners={},"number"!=typeof e){var a=e;n=t,i=a.videoWidth||a.width,r=a.videoHeight||a.height,this.image=a}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=i,this.canvas.height=r,this.ctx=this.canvas.getContext("2d"),this.videoWidth=i,this.videoHeight=r,"string"==typeof n){var o=this;this.cameraParam=new h(n,function(){o._initialize()},function(e){console.error("ARController: Failed to load ARCameraParam",e)})}else this.cameraParam=n,this._initialize()};c.prototype.dispose=function(){f.teardown(this.id);for(var e in this)this[e]=null},c.prototype.process=function(e){this.detectMarker(e);var t,n,i=this.getMarkerNum();for(t in this.patternMarkers)n=this.patternMarkers[t],n.inPrevious=n.inCurrent,n.inCurrent=!1;for(t in this.barcodeMarkers)n=this.barcodeMarkers[t],n.inPrevious=n.inCurrent,n.inCurrent=!1;for(var r=0;r<i;r++){var a=this.getMarker(r),o=f.UNKNOWN_MARKER,s=this.trackPatternMarkerId(-1);a.idPatt>-1&&(a.id===a.idPatt||a.idMatrix===-1)?(s=this.trackPatternMarkerId(a.idPatt),o=f.PATTERN_MARKER,a.dir!==a.dirPatt&&this.setMarkerInfoDir(r,a.dirPatt)):a.idMatrix>-1&&(s=this.trackBarcodeMarkerId(a.idMatrix),o=f.BARCODE_MARKER,a.dir!==a.dirMatrix&&this.setMarkerInfoDir(r,a.dirMatrix)),o!==f.UNKNOWN_MARKER&&s.inPrevious?this.getTransMatSquareCont(r,s.markerWidth,s.matrix,s.matrix):this.getTransMatSquare(r,s.markerWidth,s.matrix),s.inCurrent=!0,this.transMatToGLMat(s.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:r,type:o,marker:a,matrix:this.transform_mat}})}for(var l=this.getMultiMarkerCount(),r=0;r<l;r++){var u=this.getMultiMarkerPatternCount(r),s=!1;f.getTransMatMultiSquareRobust(this.id,r),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var c=0;c<u;c++){var h=this.getMultiEachMarker(r,c);if(h.visible>=0){s=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:r,matrix:this.transform_mat}});break}}if(s)for(var c=0;c<u;c++){var h=this.getMultiEachMarker(r,c);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:r,markerIndex:c,marker:h,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},c.prototype.trackPatternMarkerId=function(e,t){var n=this.patternMarkers[e];return n||(this.patternMarkers[e]=n={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(n.markerWidth=t),n},c.prototype.trackBarcodeMarkerId=function(e,t){var n=this.barcodeMarkers[e];return n||(this.barcodeMarkers[e]=n={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(n.markerWidth=t),n},c.prototype.getMultiMarkerCount=function(){return f.getMultiMarkerCount(this.id)},c.prototype.getMultiMarkerPatternCount=function(e){return f.getMultiMarkerNum(this.id,e)},c.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},c.prototype.removeEventListener=function(e,t){if(this.listeners[e]){var n=this.listeners[e].indexOf(t);n>-1&&this.listeners[e].splice(n,1)}},c.prototype.dispatchEvent=function(e){var t=this.listeners[e.name];if(t)for(var n=0;n<t.length;n++)t[n].call(this,e)},c.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},c.prototype.loadMarker=function(e,t,n){return f.addMarker(this.id,e,t,n)},c.prototype.loadMultiMarker=function(e,t,n){return f.addMultiMarker(this.id,e,t,n)},c.prototype.getTransMatSquare=function(e,t,n){return f.getTransMatSquare(this.id,e,t),n.set(this.marker_transform_mat),n},c.prototype.getTransMatSquareCont=function(e,t,n,i){return this.marker_transform_mat.set(n),f.getTransMatSquareCont(this.id,e,t),i.set(this.marker_transform_mat),i},c.prototype.getTransMatMultiSquare=function(e,t){return f.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},c.prototype.getTransMatMultiSquareRobust=function(e,t){return f.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},c.prototype.transMatToGLMat=function(e,t,n){return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=0,t[7]=0,t[11]=0,t[15]=1,void 0!=n&&0!==n&&(t[12]*=n,t[13]*=n,t[14]*=n),t},c.prototype.detectMarker=function(e){return this._copyImageToHeap(e)?f.detectMarker(this.id):-99},c.prototype.getMarkerNum=function(){return f.getMarkerNum(this.id)},c.prototype.getMarker=function(e){if(0===f.getMarker(this.id,e))return f.markerInfo},c.prototype.setMarkerInfoVertex=function(e,t){for(var n=0;n<t.length;n++)this.marker_transform_mat[2*n+0]=t[n][0],this.marker_transform_mat[2*n+1]=t[n][1];return f.setMarkerInfoVertex(this.id,e)},c.prototype.cloneMarkerInfo=function(e){return JSON.parse(JSON.stringify(e))},c.prototype.getMultiEachMarker=function(e,t){if(0===f.getMultiEachMarker(this.id,e,t))return f.multiEachMarkerInfo},c.prototype.getTransformationMatrix=function(){return this.transform_mat},c.prototype.getCameraMatrix=function(){return this.camera_mat},c.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},c.prototype.setDebugMode=function(e){return f.setDebugMode(this.id,e)},c.prototype.getDebugMode=function(){return f.getDebugMode(this.id)},c.prototype.getProcessingImage=function(){return f.getProcessingImage(this.id)},c.prototype.setLogLevel=function(e){return f.setLogLevel(e)},c.prototype.getLogLevel=function(){return f.getLogLevel()},c.prototype.setMarkerInfoDir=function(e,t){return f.setMarkerInfoDir(this.id,e,t)},c.prototype.setProjectionNearPlane=function(e){return f.setProjectionNearPlane(this.id,e)},c.prototype.getProjectionNearPlane=function(){return f.getProjectionNearPlane(this.id)},c.prototype.setProjectionFarPlane=function(e){return f.setProjectionFarPlane(this.id,e)},c.prototype.getProjectionFarPlane=function(){return f.getProjectionFarPlane(this.id)},c.prototype.setThresholdMode=function(e){return f.setThresholdMode(this.id,e)},c.prototype.getThresholdMode=function(){return f.getThresholdMode(this.id)},c.prototype.setThreshold=function(e){return f.setThreshold(this.id,e)},c.prototype.getThreshold=function(){return f.getThreshold(this.id)},c.prototype.setPatternDetectionMode=function(e){return f.setPatternDetectionMode(this.id,e)},c.prototype.getPatternDetectionMode=function(){return f.getPatternDetectionMode(this.id)},c.prototype.setMatrixCodeType=function(e){return f.setMatrixCodeType(this.id,e)},c.prototype.getMatrixCodeType=function(){return f.getMatrixCodeType(this.id)},c.prototype.setLabelingMode=function(e){return f.setLabelingMode(this.id,e)},c.prototype.getLabelingMode=function(){return f.getLabelingMode(this.id)},c.prototype.setPattRatio=function(e){return f.setPattRatio(this.id,e)},c.prototype.getPattRatio=function(){return f.getPattRatio(this.id)},c.prototype.setImageProcMode=function(e){return f.setImageProcMode(this.id,e)},c.prototype.getImageProcMode=function(){return f.getImageProcMode(this.id)},c.prototype.debugDraw=function(){var e=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),t=new ImageData(e,this.canvas.width,this.canvas.height);this.ctx.putImageData(t,0,0);for(var n=this.getMarkerNum(),i=0;i<n;i++)this._debugMarker(this.getMarker(i))},c.prototype._initialize=function(){this.id=f.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var e=f.frameMalloc;this.framepointer=e.framepointer,this.framesize=e.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,e.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,e.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var t=this;setTimeout(function(){t.onload&&t.onload(),t.dispatchEvent({name:"load",target:t})},1)},c.prototype._copyImageToHeap=function(e){e||(e=this.image),this.ctx.save(),"portrait"===this.orientation?(this.ctx.translate(this.canvas.width,0),this.ctx.rotate(Math.PI/2),this.ctx.drawImage(e,0,0,this.canvas.height,this.canvas.width)):this.ctx.drawImage(e,0,0,this.canvas.width,this.canvas.height),this.ctx.restore();var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),n=t.data;return!!this.dataHeap&&(this.dataHeap.set(n),!0)},c.prototype._debugMarker=function(e){var t,n;t=e.vertex;var i=this.ctx;i.strokeStyle="red",i.beginPath(),i.moveTo(t[0][0],t[0][1]),i.lineTo(t[1][0],t[1][1]),i.stroke(),i.beginPath(),i.moveTo(t[2][0],t[2][1]),i.lineTo(t[3][0],t[3][1]),i.stroke(),i.strokeStyle="green",i.beginPath(),i.lineTo(t[1][0],t[1][1]),i.lineTo(t[2][0],t[2][1]),i.stroke(),i.beginPath(),i.moveTo(t[3][0],t[3][1]),i.lineTo(t[0][0],t[0][1]),i.stroke(),n=e.pos,i.beginPath(),i.arc(n[0],n[1],8,0,2*Math.PI),i.fillStyle="red",i.fill()},c.getUserMedia=function(e){var t=e.facingMode||"environment",n=e.onSuccess,i=e.onError||function(e){console.error("ARController.getUserMedia",e)},r=document.createElement("video"),a=function(){0!==this.videoWidth&&n(r)},o=!1,s=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],l=function(e){o&&(r.play(),r.paused||s.forEach(function(e){window.removeEventListener(e,l,!0)}))};s.forEach(function(e){window.addEventListener(e,l,!0)});var u=function(e){r.addEventListener("loadedmetadata",a,!1),r.src=window.URL.createObjectURL(e),o=!0,l()},c={},h={};e.width&&(h.width=e.width,"object"==typeof e.width?(e.width.max&&(c.maxWidth=e.width.max),e.width.min&&(c.minWidth=e.width.max)):c.maxWidth=e.width),e.height&&(h.height=e.height,"object"==typeof e.height?(e.height.max&&(c.maxHeight=e.height.max),e.height.min&&(c.minHeight=e.height.max)):c.maxHeight=e.height),h.facingMode=t,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var f={audio:!1,video:{mandatory:c}};return navigator.getUserMedia?navigator.getUserMedia(f,u,i):i("navigator.getUserMedia is not supported on your browser"),r},c.getUserMediaARController=function(e){var t={};for(var n in e)t[n]=e[n];var i=e.onSuccess,r=e.cameraParam;t.onSuccess=function(){new h(r,function(){var t=this,n=e.maxARVideoSize||Math.max(a.videoWidth,a.videoHeight),r=n/Math.max(a.videoWidth,a.videoHeight),o=r*a.videoWidth,s=r*a.videoHeight;if(a.videoWidth<a.videoHeight){var l=o;o=s,s=l}var u=new c(o,s,t);u.image=a,a.videoWidth<a.videoHeight?(u.orientation="portrait",u.videoWidth=a.videoHeight,u.videoHeight=a.videoWidth):(u.orientation="landscape",u.videoWidth=a.videoWidth,u.videoHeight=a.videoHeight),i(u,t)},function(e){console.error("ARController: Failed to load ARCameraParam",e)})};var a=this.getUserMedia(t);return a};var h=function(e,t,n){this.id=-1,this._src="",this.complete=!1,this.onload=t,this.onerror=n,e&&this.load(e)};h.prototype.load=function(e){if(""!==this._src)throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=e,e){var t=this;f.loadCamera(e,function(e){t.id=e,t.complete=!0,t.onload()},function(e){t.onerror(e)})}},Object.defineProperty(h.prototype,"src",{set:function(e){this.load(e)},get:function(){return this._src}}),h.prototype.dispose=function(){this.id!==-1&&f.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var f={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:a,addMarker:t,addMultiMarker:r},d=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"],p=0,g=0,m=0;
window.artoolkit=f,window.ARController=c,window.ARCameraParam=h,window.Module?e():window.Module={onRuntimeInitialized:function(){e()}}}();var Module;Module||(Module=("undefined"!=typeof Module?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_IS_NODE="object"==typeof process&&"function"==typeof require&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=function(e){process.stdout.write(e+"\n")}),Module.printErr||(Module.printErr=function(e){process.stderr.write(e+"\n")});var nodeFS=require("fs"),nodePath=require("path");Module.read=function(e,t){e=nodePath.normalize(e);var n=nodeFS.readFileSync(e);return n||e==nodePath.resolve(e)||(e=path.join(__dirname,"..","src",e),n=nodeFS.readFileSync(e)),n&&!t&&(n=n.toString()),n},Module.readBinary=function(e){var t=Module.read(e,!0);return t.buffer||(t=new Uint8Array(t)),assert(t.buffer),t},Module.load=function(e){globalEval(read(e))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),"undefined"!=typeof module&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),"undefined"!=typeof printErr&&(Module.printErr=printErr),"undefined"!=typeof read?Module.read=read:Module.read=function(){throw"no read() available (jsc?)"},Module.readBinary=function(e){if("function"==typeof readbuffer)return new Uint8Array(readbuffer(e));var t=read(e,"binary");return assert("object"==typeof t),t},"undefined"!=typeof scriptArgs?Module.arguments=scriptArgs:"undefined"!=typeof arguments&&(Module.arguments=arguments);else{if(!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER)throw"Unknown runtime environment. Where are we?";if(Module.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},"undefined"!=typeof arguments&&(Module.arguments=arguments),"undefined"!=typeof console)Module.print||(Module.print=function(e){console.log(e)}),Module.printErr||(Module.printErr=function(e){console.log(e)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&"undefined"!=typeof dump?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),"undefined"==typeof Module.setWindowTitle&&(Module.setWindowTitle=function(e){document.title=e})}!Module.load&&Module.read&&(Module.load=function(e){globalEval(Module.read(e))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);var Runtime={setTempRet0:function(e){tempRet0=e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:if("*"===e[e.length-1])return Runtime.QUANTUM_SIZE;if("i"===e[0]){var t=parseInt(e.substr(1));return assert(t%8===0),t/8}return 0}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return"double"===t||"i64"===t?7&e&&(assert(4===(7&e)),e+=4):assert(0===(3&e)),e},getAlignSize:function(e,t,n){return n||"i64"!=e&&"double"!=e?e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8):8},dynCall:function(e,t,n){return n&&n.length?(n.splice||(n=Array.prototype.slice.call(n)),n.splice(0,0,t),Module["dynCall_"+e].apply(null,n)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var n=Runtime.funcWrappers[t];return n[e]||(n[e]=function(){return Runtime.dynCall(t,e,arguments)}),n[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=DYNAMICTOP;if(DYNAMICTOP=DYNAMICTOP+e|0,DYNAMICTOP=DYNAMICTOP+15&-16,DYNAMICTOP>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return DYNAMICTOP=t,0}return t},alignMemory:function(e,t){var n=e=Math.ceil(e/(t?t:16))*(t?t:16);return n},makeBigInt:function(e,t,n){var i=n?+(e>>>0)+4294967296*+(t>>>0):+(e>>>0)+4294967296*+(0|t);return i},GLOBAL_BASE:8,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var __THREW__=0,ABORT=!1,EXITSTATUS=0,undef=0,tempValue,tempInt,tempBigInt,tempInt2,tempBigInt2,tempPair,tempBigIntI,tempBigIntR,tempBigIntS,tempBigIntP,tempBigIntD,tempDouble,tempFloat,tempI64,tempI64b,tempRet0,tempRet1,tempRet2,tempRet3,tempRet4,tempRet5,tempRet6,tempRet7,tempRet8,tempRet9,globalScope=this,cwrap,ccall;!function(){function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;return null!==e&&void 0!==e&&0!==e&&(t=Runtime.stackAlloc((e.length<<2)+1),writeStringToMemory(e,t)),t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(e,t,n,i,r){var a=getCFunc(e),o=[],s=0;if(i)for(var l=0;l<i.length;l++){var u=toC[n[l]];u?(0===s&&(s=Runtime.stackSave()),o[l]=u(i[l])):o[l]=i[l]}var c=a.apply(null,o);if("string"===t&&(c=Pointer_stringify(c)),0!==s){if(r&&r.async)return void EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(s)});Runtime.stackRestore(s)}return c};var sourceRegex=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/,JSsource={};for(var fun in JSfuncs)JSfuncs.hasOwnProperty(fun)&&(JSsource[fun]=parseJSFunc(JSfuncs[fun]));cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return"number"===e}),numericRet="string"!==returnType;if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if("number"!==type){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"="+convertCode.returnValue+";"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}}(),Module.ccall=ccall,Module.cwrap=cwrap,Module.setValue=setValue,Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE,Module.allocate=allocate,Module.getMemory=getMemory,Module.Pointer_stringify=Pointer_stringify,Module.AsciiToString=AsciiToString,Module.stringToAscii=stringToAscii,Module.UTF8ArrayToString=UTF8ArrayToString,Module.UTF8ToString=UTF8ToString,Module.stringToUTF8Array=stringToUTF8Array,Module.stringToUTF8=stringToUTF8,Module.lengthBytesUTF8=lengthBytesUTF8,Module.UTF16ToString=UTF16ToString,Module.stringToUTF16=stringToUTF16,Module.lengthBytesUTF16=lengthBytesUTF16,Module.UTF32ToString=UTF32ToString,Module.stringToUTF32=stringToUTF32,Module.lengthBytesUTF32=lengthBytesUTF32,Module.stackTrace=stackTrace;for(var PAGE_SIZE=4096,HEAP,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,STATIC_BASE=0,STATICTOP=0,staticSealed=!1,STACK_BASE=0,STACKTOP=0,STACK_MAX=0,DYNAMIC_BASE=0,DYNAMICTOP=0,TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||268435456,totalMemory=65536;totalMemory<TOTAL_MEMORY||totalMemory<2*TOTAL_STACK;)totalMemory<16777216?totalMemory*=2:totalMemory+=16777216;totalMemory!==TOTAL_MEMORY&&(TOTAL_MEMORY=totalMemory),assert("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set,"JS engine does not provide full typed array support");var buffer;buffer=new ArrayBuffer(TOTAL_MEMORY),HEAP8=new Int8Array(buffer),HEAP16=new Int16Array(buffer),HEAP32=new Int32Array(buffer),HEAPU8=new Uint8Array(buffer),HEAPU16=new Uint16Array(buffer),HEAPU32=new Uint32Array(buffer),HEAPF32=new Float32Array(buffer),HEAPF64=new Float64Array(buffer),HEAP32[0]=255,assert(255===HEAPU8[0]&&0===HEAPU8[3],"Typed arrays 2 must be run on a little-endian system"),Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1;Module.addOnPreRun=addOnPreRun,Module.addOnInit=addOnInit,Module.addOnPreMain=addOnPreMain,Module.addOnExit=addOnExit,Module.addOnPostRun=addOnPostRun,Module.intArrayFromString=intArrayFromString,Module.intArrayToString=intArrayToString,Module.writeStringToMemory=writeStringToMemory,Module.writeArrayToMemory=writeArrayToMemory,Module.writeAsciiToMemory=writeAsciiToMemory,Math.imul&&Math.imul(4294967295,5)===-5||(Math.imul=function(e,t){var n=e>>>16,i=65535&e,r=t>>>16,a=65535&t;return i*a+(n*a+i*r<<16)|0}),Math.imul=Math.imul,Math.clz32||(Math.clz32=function(e){e>>>=0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32;var Math_abs=Math.abs,Math_cos=Math.cos,Math_sin=Math.sin,Math_tan=Math.tan,Math_acos=Math.acos,Math_asin=Math.asin,Math_atan=Math.atan,Math_atan2=Math.atan2,Math_exp=Math.exp,Math_log=Math.log,Math_sqrt=Math.sqrt,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_pow=Math.pow,Math_imul=Math.imul,Math_fround=Math.fround,Math_min=Math.min,Math_clz32=Math.clz32,runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;Module.addRunDependency=addRunDependency,Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null,ASM_CONSTS=[function(e,t,n,i){artoolkit.multiEachMarkerInfo||(artoolkit.multiEachMarkerInfo={});var r=artoolkit.multiEachMarkerInfo;r.visible=e,r.pattId=t,r.pattType=n,r.width=i},function(e,t,n,i,r,a,o,s,l,u,c,h,f,d,p,g,m,v,_,y,b,w,x,E,k,M,T,S,A,R,C,P,O){var L=arguments,N=12;artoolkit.markerInfo||(artoolkit.markerInfo={pos:[0,0],line:[[0,0,0],[0,0,0],[0,0,0],[0,0,0]],vertex:[[0,0],[0,0],[0,0],[0,0]]});var F=artoolkit.markerInfo;F.area=e,F.id=t,F.idPatt=n,F.idMatrix=i,F.dir=r,F.dirPatt=a,F.dirMatrix=o,F.cf=s,F.cfPatt=l,F.cfMatrix=u,F.pos[0]=c,F.pos[1]=h,F.line[0][0]=L[N++],F.line[0][1]=L[N++],F.line[0][2]=L[N++],F.line[1][0]=L[N++],F.line[1][1]=L[N++],F.line[1][2]=L[N++],F.line[2][0]=L[N++],F.line[2][1]=L[N++],F.line[2][2]=L[N++],F.line[3][0]=L[N++],F.line[3][1]=L[N++],F.line[3][2]=L[N++],F.vertex[0][0]=L[N++],F.vertex[0][1]=L[N++],F.vertex[1][0]=L[N++],F.vertex[1][1]=L[N++],F.vertex[2][0]=L[N++],F.vertex[2][1]=L[N++],F.vertex[3][0]=L[N++],F.vertex[3][1]=L[N++],F.errorCorrected=L[N++]},function(e,t,n,i,r){artoolkit.frameMalloc||(artoolkit.frameMalloc={});var a=artoolkit.frameMalloc;a.framepointer=t,a.framesize=n,a.camera=i,a.transform=r}];STATIC_BASE=8,STATICTOP=STATIC_BASE+16496,__ATINIT__.push({func:function(){__GLOBAL__sub_I_ARToolKitJS_cpp()}},{func:function(){__GLOBAL__sub_I_bind_cpp()}}),allocate([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,52,9,0,0,53,42,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,116,42,0,0,52,9,0,0,136,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,52,9,0,0,73,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,54,47,0,0,228,8,0,0,23,47,0,0,228,8,0,0,62,46,0,0,228,8,0,0,31,46,0,0,228,8,0,0,0,46,0,0,228,8,0,0,225,45,0,0,228,8,0,0,194,45,0,0,228,8,0,0,93,46,0,0,228,8,0,0,124,46,0,0,228,8,0,0,155,46,0,0,228,8,0,0,186,46,0,0,228,8,0,0,217,46,0,0,228,8,0,0,248,46,0,0,12,9,0,0,199,47,0,0,48,2,0,0,0,0,0,0,228,8,0,0,212,47,0,0,228,8,0,0,225,47,0,0,12,9,0,0,238,47,0,0,56,2,0,0,0,0,0,0,12,9,0,0,15,48,0,0,64,2,0,0,0,0,0,0,12,9,0,0,49,48,0,0,64,2,0,0,0,0,0,0,200,8,0,0,89,48,0,0,200,8,0,0,91,48,0,0,200,8,0,0,93,48,0,0,200,8,0,0,95,48,0,0,200,8,0,0,97,48,0,0,200,8,0,0,99,48,0,0,200,8,0,0,101,48,0,0,200,8,0,0,103,48,0,0,200,8,0,0,105,48,0,0,200,8,0,0,107,48,0,0,200,8,0,0,109,48,0,0,200,8,0,0,111,48,0,0,200,8,0,0,113,48,0,0,12,9,0,0,115,48,0,0,80,2,0,0,0,0,0,0,12,9,0,0,152,48,0,0,80,2,0,0,0,0,0,0,255,15,0,0,6,16,0,0,18,16,0,0,28,16,0,0,255,255,255,255,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,11,0,0,0,5,0,0,0,10,0,0,0,7,0,0,0,14,0,0,0,15,0,0,0,13,0,0,0,9,0,0,0,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,16,0,0,0,32,0,0,0,64,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,24,0,0,0,48,0,0,0,96,0,0,0,67,0,0,0,5,0,0,0,10,0,0,0,20,0,0,0,40,0,0,0,80,0,0,0,35,0,0,0,70,0,0,0,15,0,0,0,30,0,0,0,60,0,0,0,120,0,0,0,115,0,0,0,101,0,0,0,73,0,0,0,17,0,0,0,34,0,0,0,68,0,0,0,11,0,0,0,22,0,0,0,44,0,0,0,88,0,0,0,51,0,0,0,102,0,0,0,79,0,0,0,29,0,0,0,58,0,0,0,116,0,0,0,107,0,0,0,85,0,0,0,41,0,0,0,82,0,0,0,39,0,0,0,78,0,0,0,31,0,0,0,62,0,0,0,124,0,0,0,123,0,0,0,117,0,0,0,105,0,0,0,81,0,0,0,33,0,0,0,66,0,0,0,7,0,0,0,14,0,0,0,28,0,0,0,56,0,0,0,112,0,0,0,99,0,0,0,69,0,0,0,9,0,0,0,18,0,0,0,36,0,0,0,72,0,0,0,19,0,0,0,38,0,0,0,76,0,0,0,27,0,0,0,54,0,0,0,108,0,0,0,91,0,0,0,53,0,0,0,106,0,0,0,87,0,0,0,45,0,0,0,90,0,0,0,55,0,0,0,110,0,0,0,95,0,0,0,61,0,0,0,122,0,0,0,119,0,0,0,109,0,0,0,89,0,0,0,49,0,0,0,98,0,0,0,71,0,0,0,13,0,0,0,26,0,0,0,52,0,0,0,104,0,0,0,83,0,0,0,37,0,0,0,74,0,0,0,23,0,0,0,46,0,0,0,92,0,0,0,59,0,0,0,118,0,0,0,111,0,0,0,93,0,0,0,57,0,0,0,114,0,0,0,103,0,0,0,77,0,0,0,25,0,0,0,50,0,0,0,100,0,0,0,75,0,0,0,21,0,0,0,42,0,0,0,84,0,0,0,43,0,0,0,86,0,0,0,47,0,0,0,94,0,0,0,63,0,0,0,126,0,0,0,127,0,0,0,125,0,0,0,121,0,0,0,113,0,0,0,97,0,0,0,65,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,4,0,0,0,2,0,0,0,8,0,0,0,5,0,0,0,10,0,0,0,3,0,0,0,14,0,0,0,9,0,0,0,7,0,0,0,6,0,0,0,13,0,0,0,11,0,0,0,12,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,7,0,0,0,2,0,0,0,14,0,0,0,8,0,0,0,56,0,0,0,3,0,0,0,63,0,0,0,15,0,0,0,31,0,0,0,9,0,0,0,90,0,0,0,57,0,0,0,21,0,0,0,4,0,0,0,28,0,0,0,64,0,0,0,67,0,0,0,16,0,0,0,112,0,0,0,32,0,0,0,97,0,0,0,10,0,0,0,108,0,0,0,91,0,0,0,70,0,0,0,58,0,0,0,38,0,0,0,22,0,0,0,47,0,0,0,5,0,0,0,54,0,0,0,29,0,0,0,19,0,0,0,65,0,0,0,95,0,0,0,68,0,0,0,45,0,0,0,17,0,0,0,43,0,0,0,113,0,0,0,115,0,0,0,33,0,0,0,77,0,0,0,98,0,0,0,117,0,0,0,11,0,0,0,87,0,0,0,109,0,0,0,35,0,0,0,92,0,0,0,74,0,0,0,71,0,0,0,79,0,0,0,59,0,0,0,104,0,0,0,39,0,0,0,100,0,0,0,23,0,0,0,82,0,0,0,48,0,0,0,119,0,0,0,6,0,0,0,126,0,0,0,55,0,0,0,13,0,0,0,30,0,0,0,62,0,0,0,20,0,0,0,89,0,0,0,66,0,0,0,27,0,0,0,96,0,0,0,111,0,0,0,69,0,0,0,107,0,0,0,46,0,0,0,37,0,0,0,18,0,0,0,53,0,0,0,44,0,0,0,94,0,0,0,114,0,0,0,42,0,0,0,116,0,0,0,76,0,0,0,34,0,0,0,86,0,0,0,78,0,0,0,73,0,0,0,99,0,0,0,103,0,0,0,118,0,0,0,81,0,0,0,12,0,0,0,125,0,0,0,88,0,0,0,61,0,0,0,110,0,0,0,26,0,0,0,36,0,0,0,106,0,0,0,93,0,0,0,52,0,0,0,75,0,0,0,41,0,0,0,72,0,0,0,85,0,0,0,80,0,0,0,102,0,0,0,60,0,0,0,124,0,0,0,105,0,0,0,25,0,0,0,40,0,0,0,51,0,0,0,101,0,0,0,84,0,0,0,24,0,0,0,123,0,0,0,83,0,0,0,50,0,0,0,49,0,0,0,122,0,0,0,120,0,0,0,121,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,136,0,0,0,5,0,0,0,144,0,0,0,6,0,0,0,152,0,0,0,9,0,0,0,176,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,253,255,255,255,254,255,255,255,0,0,0,0,112,2,0,0,168,2,0,0,200,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,0,0,0,0,32,2,0,0,1,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,96,2,0,0,3,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,1,0,0,0,0,0,0,0,80,2,0,0,3,0,0,0,7,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,216,2,0,0,3,0,0,0,8,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,232,2,0,0,3,0,0,0,9,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,192,3,0,0,192,4,0,0,192,5,0,0,192,6,0,0,192,7,0,0,192,8,0,0,192,9,0,0,192,10,0,0,192,11,0,0,192,12,0,0,192,13,0,0,192,14,0,0,192,15,0,0,192,16,0,0,192,17,0,0,192,18,0,0,192,19,0,0,192,20,0,0,192,21,0,0,192,22,0,0,192,23,0,0,192,24,0,0,192,25,0,0,192,26,0,0,192,27,0,0,192,28,0,0,192,29,0,0,192,30,0,0,192,31,0,0,192,0,0,0,179,1,0,0,195,2,0,0,195,3,0,0,195,4,0,0,195,5,0,0,195,6,0,0,195,7,0,0,195,8,0,0,195,9,0,0,195,10,0,0,195,11,0,0,195,12,0,0,195,13,0,0,211,14,0,0,195,15,0,0,195,0,0,12,187,1,0,12,195,2,0,12,195,3,0,12,195,4,0,12,211,240,10,0,0,96,11,0,0,0,0,0,0,10,0,0,0,100,0,0,0,232,3,0,0,16,39,0,0,160,134,1,0,64,66,15,0,128,150,152,0,0,225,245,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,5,0,0,0,81,62,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,5,0,0,0,73,58,0,0,0,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,0,0,0,5,0,0,0,7,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,211,0,0,0,1,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,121,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,143,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,169,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,187,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,209,0,0,0,69,114,114,111,114,58,32,108,97,98,101,108,105,110,103,32,119,111,114,107,32,111,118,101,114,102,108,111,119,46,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,40,37,100,41,32,114,101,113,117,101,115,116,101,100,46,10,0,85,110,107,110,111,119,110,32,111,114,32,117,110,115,117,112,112,111,114,116,101,100,32,108,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,114,101,113,117,101,115,116,101,100,46,32,83,101,116,32,116,111,32,109,97,110,117,97,108,46,10,0,76,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,46,10,0,77,65,78,85,65,76,0,65,85,84,79,95,77,69,68,73,65,78,0,65,85,84,79,95,79,84,83,85,0,65,85,84,79,95,65,68,65,80,84,73,86,69,65,85,84,79,95,66,82,65,67,75,69,84,73,78,71,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,109,97,114,107,101,114,32,99,111,117,110,116,115,32,45,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,43,46,10,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,109,101,100,105,97,110,0,79,116,115,117,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,37,115,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,63,63,63,32,49,10,0,63,63,63,32,50,10,0,63,63,63,32,51,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,112,97,115,115,101,100,32,116,111,32,97,114,73,109,97,103,101,80,114,111,99,72,105,115,116,40,41,46,10,0,0,0,0,1,0,1,1,1,0,2,4,255,255,5,3,1,0,2,255,6,7,255,3,1,2,2,3,2,3,2,3,3,0,255,4,6,7,5,255,1,4,5,4,4,5,5,4,5,7,6,6,6,7,7,7,6,255,2,4,6,7,5,3,255,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,0,1,1,0,1,1,1,0,1,1,1,1,0,1,1,0,1,1,1,1,0,1,1,1,0,1,1,0,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,0,0,255,255,3,255,5,6,255,255,9,10,255,12,255,255,15,255,17,18,255,20,255,255,23,24,255,255,27,255,29,30,255,255,1,2,255,4,255,255,7,8,255,255,11,255,13,14,255,16,255,255,19,255,21,22,255,255,25,26,255,28,255,255,31,69,114,114,111,114,58,32,117,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,46,10,0,69,114,114,111,114,58,32,78,85,76,76,32,112,97,116,116,72,97,110,100,108,101,46,10,0,69,114,114,111,114,58,32,99,97,110,39,116,32,108,111,97,100,32,112,97,116,116,101,114,110,32,102,114,111,109,32,78,85,76,76,32,98,117,102,102,101,114,46,10,0,69,114,114,111,114,58,32,111,117,116,32,111,102,32,109,101,109,111,114,121,46,10,0,32,9,10,13,0,80,97,116,116,101,114,110,32,68,97,116,97,32,114,101,97,100,32,101,114,114,111,114,33,33,10,0,69,114,114,111,114,32,111,112,101,110,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,114,101,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,46,10,0,114,98,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,115,32,102,105,108,101,32,34,37,115,34,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,102,105,108,101,32,108,101,110,103,116,104,46,0,69,114,114,111,114,58,32,115,117,112,112,108,105,101,100,32,102,105,108,101,32,100,111,101,115,32,110,111,116,32,97,112,112,101,97,114,32,116,111,32,98,101,32,97,110,32,65,82,84,111,111,108,75,105,116,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,114,101,97,100,32,102,114,111,109,32,102,105,108,101,46,0,69,114,114,111,114,58,32,105,99,112,71,101,116,74,95,85,95,88,99,0,69,114,114,111,114,58,32,109,97,108,108,111,99,10,0,69,114,114,111,114,32,49,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,50,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,51,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,52,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,53,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,54,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,55,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,114,0,69,114,114,111,114,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,46,10,0,37,115,37,115,10,0,0,37,100,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,110,117,109,98,101,114,32,111,102,32,109,97,114,107,101,114,32,99,111,110,102,105,103,115,32,116,111,32,114,101,97,100,46,10,0,79,117,116,32,111,102,32,109,101,109,111,114,121,33,33,10,0,37,108,108,117,37,99,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,112,97,116,116,101,114,110,32,39,37,115,39,32,115,112,101,99,105,102,105,101,100,32,105,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,117,114,97,116,105,111,110,32,119,104,105,108,101,32,105,110,32,98,97,114,99,111,100,101,45,111,110,108,121,32,109,111,100,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,100,105,114,101,99,116,111,114,121,32,110,97,109,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,108,111,97,100,32,112,97,116,116,101,114,110,32,39,37,115,39,46,10,0,37,108,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,112,97,116,116,101,114,110,32,119,105,100,116,104,46,10,0,37,108,102,32,37,108,102,32,37,108,102,32,37,108,102,0,37,102,32,37,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,76,105,110,101,115,32,50,32,45,32,52,32,109,117,115,116,32,98,101,32,109,97,114,107,101,114,32,116,114,97,110,115,102,111,114,109,46,10,0,97,114,103,108,67,97,109,101,114,97,70,114,117,115,116,117,109,40,41,58,32,97,114,80,97,114,97,109,68,101,99,111,109,112,77,97,116,40,41,32,105,110,100,105,99,97,116,101,100,32,112,97,114,97,109,101,116,101,114,32,101,114,114,111,114,46,10,0,108,111,97,100,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,32,37,115,32,102,111,114,32,99,97,109,101,114,97,46,10,0,42,42,42,32,67,97,109,101,114,97,32,80,97,114,97,109,101,116,101,114,32,114,101,115,105,122,101,100,32,102,114,111,109,32,37,100,44,32,37,100,46,32,42,42,42,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,114,97,109,76,84,67,114,101,97,116,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,99,114,101,97,116,105,110,103,32,51,68,32,104,97,110,100,108,101,0,108,111,97,100,77,97,114,107,101,114,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,37,115,46,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,97,114,107,101,114,46,10,0,99,111,110,102,105,103,32,100,97,116,97,32,108,111,97,100,32,101,114,114,111,114,32,33,33,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,117,108,116,105,109,97,114,107,101,114,46,10,0,80,97,116,116,101,114,110,32,100,101,116,101,99,116,105,111,110,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,80,97,116,116,101,114,110,32,114,97,116,105,111,32,115,105,122,101,32,115,101,116,32,116,111,32,37,102,46,10,0,76,97,98,101,108,105,110,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,111,110,46,0,111,102,102,46,0,68,101,98,117,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,10,0,73,109,97,103,101,32,112,114,111,99,46,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,118,105,115,105,98,108,101,39,93,32,61,32,36,48,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,73,100,39,93,32,61,32,36,49,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,84,121,112,101,39,93,32,61,32,36,50,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,119,105,100,116,104,39,93,32,61,32,36,51,59,32,125,0,123,32,118,97,114,32,36,97,32,61,32,97,114,103,117,109,101,110,116,115,59,32,118,97,114,32,105,32,61,32,49,50,59,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,32,112,111,115,58,32,91,48,44,48,93,44,32,108,105,110,101,58,32,91,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,93,44,32,118,101,114,116,101,120,58,32,91,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,93,32,125,41,59,32,125,32,118,97,114,32,109,97,114,107,101,114,73,110,102,111,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,97,114,101,97,34,93,32,61,32,36,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,34,93,32,61,32,36,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,80,97,116,116,34,93,32,61,32,36,50,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,77,97,116,114,105,120,34,93,32,61,32,36,51,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,34,93,32,61,32,36,52,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,80,97,116,116,34,93,32,61,32,36,53,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,77,97,116,114,105,120,34,93,32,61,32,36,54,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,34,93,32,61,32,36,55,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,80,97,116,116,34,93,32,61,32,36,56,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,77,97,116,114,105,120,34,93,32,61,32,36,57,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,48,93,32,61,32,36,49,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,49,93,32,61,32,36,49,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,101,114,114,111,114,67,111,114,114,101,99,116,101,100,34,93,32,61,32,36,97,91,105,43,43,93,59,32,125,0,115,101,116,117,112,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,116,116,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,65,108,108,111,99,97,116,101,100,32,118,105,100,101,111,70,114,97,109,101,83,105,122,101,32,37,100,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,102,114,97,109,101,77,97,108,108,111,99,32,61,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,112,111,105,110,116,101,114,34,93,32,61,32,36,49,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,115,105,122,101,34,93,32,61,32,36,50,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,99,97,109,101,114,97,34,93,32,61,32,36,51,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,116,114,97,110,115,102,111,114,109,34,93,32,61,32,36,52,59,32,125,0,115,101,116,117,112,0,116,101,97,114,100,111,119,110,0,95,97,100,100,77,97,114,107,101,114,0,95,97,100,100,77,117,108,116,105,77,97,114,107,101,114,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,67,111,117,110,116,0,95,108,111,97,100,67,97,109,101,114,97,0,115,101,116,77,97,114,107,101,114,73,110,102,111,68,105,114,0,115,101,116,77,97,114,107,101,114,73,110,102,111,86,101,114,116,101,120,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,67,111,110,116,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,82,111,98,117,115,116,0,100,101,116,101,99,116,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,69,97,99,104,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,0,115,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,80,114,111,99,101,115,115,105,110,103,73,109,97,103,101,0,115,101,116,76,111,103,76,101,118,101,108,0,103,101,116,76,111,103,76,101,118,101,108,0,115,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,115,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,115,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,103,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,115,101,116,84,104,114,101,115,104,111,108,100,0,103,101,116,84,104,114,101,115,104,111,108,100,0,115,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,103,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,115,101,116,80,97,116,116,82,97,116,105,111,0,103,101,116,80,97,116,116,82,97,116,105,111,0,115,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,103,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,115,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,103,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,115,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,103,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,69,82,82,79,82,95,65,82,67,79,78,84,82,79,76,76,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,85,76,84,73,77,65,82,75,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,65,82,75,69,82,95,73,78,68,69,88,95,79,85,84,95,79,70,95,66,79,85,78,68,83,0,65,82,95,68,69,66,85,71,95,68,73,83,65,66,76,69,0,65,82,95,68,69,66,85,71,95,69,78,65,66,76,69,0,65,82,95,68,69,70,65,85,76,84,95,68,69,66,85,71,95,77,79,68,69,0,65,82,95,76,65,66,69,76,73,78,71,95,87,72,73,84,69,95,82,69,71,73,79,78,0,65,82,95,76,65,66,69,76,73,78,71,95,66,76,65,67,75,95,82,69,71,73,79,78,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,77,79,68,69,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,82,65,77,69,95,73,77,65,71,69,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,73,69,76,68,95,73,77,65,71,69,0,65,82,95,68,69,70,65,85,76,84,95,73,77,65,71,69,95,80,82,79,67,95,77,79,68,69,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,68,69,84,69,67,84,73,79,78,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,68,69,70,65,85,76,84,95,80,65,84,84,69,82,78,95,68,69,84,69,67,84,73,79,78,95,77,79,68,69,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,78,79,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,95,86,50,0,65,82,95,68,69,70,65,85,76,84,95,77,65,82,75,69,82,95,69,88,84,82,65,67,84,73,79,78,95,77,79,68,69,0,65,82,95,77,65,88,95,76,79,79,80,95,67,79,85,78,84,0,65,82,95,76,79,79,80,95,66,82,69,65,75,95,84,72,82,69,83,72,0,65,82,95,76,79,71,95,76,69,86,69,76,95,68,69,66,85,71,0,65,82,95,76,79,71,95,76,69,86,69,76,95,73,78,70,79,0,65,82,95,76,79,71,95,76,69,86,69,76,95,87,65,82,78,0,65,82,95,76,79,71,95,76,69,86,69,76,95,69,82,82,79,82,0,65,82,95,76,79,71,95,76,69,86,69,76,95,82,69,76,95,73,78,70,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,72,65,77,77,73,78,71,54,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,80,65,82,73,84,89,54,53,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,57,95,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,53,95,53,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,77,65,78,85,65,76,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,77,69,68,73,65,78,0,65,82,95,76,65],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE),
allocate([66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,79,84,83,85,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,65,68,65,80,84,73,86,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,78,79,78,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,65,84,84,69,82,78,95,69,88,84,82,65,67,84,73,79,78,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,71,69,78,69,82,73,67,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,84,82,65,83,84,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,78,79,84,95,70,79,85,78,68,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,69,68,67,95,70,65,73,76,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,70,73,68,69,78,67,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,95,77,85,76,84,73,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,72,69,85,82,73,83,84,73,67,95,84,82,79,85,66,76,69,83,79,77,69,95,77,65,84,82,73,88,95,67,79,68,69,83,0,118,105,105,102,0,118,105,105,105,0,100,105,105,0,118,105,105,100,0,105,105,0,118,105,105,0,105,105,105,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,99,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,99,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,99,69,69,69,69,0,78,83,116,51,95,95,49,50,49,95,95,98,97,115,105,99,95,115,116,114,105,110,103,95,99,111,109,109,111,110,73,76,98,49,69,69,69,0,105,105,105,105,0,105,105,105,105,105,0,118,111,105,100,0,98,111,111,108,0,99,104,97,114,0,115,105,103,110,101,100,32,99,104,97,114,0,117,110,115,105,103,110,101,100,32,99,104,97,114,0,115,104,111,114,116,0,117,110,115,105,103,110,101,100,32,115,104,111,114,116,0,105,110,116,0,117,110,115,105,103,110,101,100,32,105,110,116,0,108,111,110,103,0,117,110,115,105,103,110,101,100,32,108,111,110,103,0,102,108,111,97,116,0,100,111,117,98,108,101,0,115,116,100,58,58,115,116,114,105,110,103,0,115,116,100,58,58,98,97,115,105,99,95,115,116,114,105,110,103,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,115,116,100,58,58,119,115,116,114,105,110,103,0,101,109,115,99,114,105,112,116,101,110,58,58,118,97,108,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,102,108,111,97,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,100,111,117,98,108,101,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,32,100,111,117,98,108,101,62,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,101,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,100,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,102,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,109,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,108,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,106,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,105,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,116,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,115,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,104,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,97,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,99,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,51,118,97,108,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,119,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,119,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,119,69,69,69,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,104,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,104,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,104,69,69,69,69,0,83,116,57,98,97,100,95,97,108,108,111,99,0,83,116,57,101,120,99,101,112,116,105,111,110,0,83,116,57,116,121,112,101,95,105,110,102,111,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,54,95,95,115,104,105,109,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,51,95,95,102,117,110,100,97,109,101,110,116,97,108,95,116,121,112,101,95,105,110,102,111,69,0,118,0,98,0,99,0,104,0,97,0,115,0,116,0,105,0,106,0,108,0,109,0,102,0,100,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,48,95,95,115,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,49,95,95,118,109,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,33,34,118,101,99,116,111,114,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,118,101,99,116,111,114,0,95,95,116,104,114,111,119,95,108,101,110,103,116,104,95,101,114,114,111,114,0,115,116,100,58,58,98,97,100,95,97,108,108,111,99,0,33,34,98,97,115,105,99,95,115,116,114,105,110,103,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,115,116,114,105,110,103,0,84,33,34,25,13,1,2,3,17,75,28,12,16,4,11,29,18,30,39,104,110,111,112,113,98,32,5,6,15,19,20,21,26,8,22,7,40,36,23,24,9,10,14,27,31,37,35,131,130,125,38,42,43,60,61,62,63,67,71,74,77,88,89,90,91,92,93,94,95,96,97,99,100,101,102,103,105,106,107,108,114,115,116,121,122,123,124,0,73,108,108,101,103,97,108,32,98,121,116,101,32,115,101,113,117,101,110,99,101,0,68,111,109,97,105,110,32,101,114,114,111,114,0,82,101,115,117,108,116,32,110,111,116,32,114,101,112,114,101,115,101,110,116,97,98,108,101,0,78,111,116,32,97,32,116,116,121,0,80,101,114,109,105,115,115,105,111,110,32,100,101,110,105,101,100,0,79,112,101,114,97,116,105,111,110,32,110,111,116,32,112,101,114,109,105,116,116,101,100,0,78,111,32,115,117,99,104,32,102,105,108,101,32,111,114,32,100,105,114,101,99,116,111,114,121,0,78,111,32,115,117,99,104,32,112,114,111,99,101,115,115,0,70,105,108,101,32,101,120,105,115,116,115,0,86,97,108,117,101,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,100,97,116,97,32,116,121,112,101,0,78,111,32,115,112,97,99,101,32,108,101,102,116,32,111,110,32,100,101,118,105,99,101,0,79,117,116,32,111,102,32,109,101,109,111,114,121,0,82,101,115,111,117,114,99,101,32,98,117,115,121,0,73,110,116,101,114,114,117,112,116,101,100,32,115,121,115,116,101,109,32,99,97,108,108,0,82,101,115,111,117,114,99,101,32,116,101,109,112,111,114,97,114,105,108,121,32,117,110,97,118,97,105,108,97,98,108,101,0,73,110,118,97,108,105,100,32,115,101,101,107,0,67,114,111,115,115,45,100,101,118,105,99,101,32,108,105,110,107,0,82,101,97,100,45,111,110,108,121,32,102,105,108,101,32,115,121,115,116,101,109,0,68,105,114,101,99,116,111,114,121,32,110,111,116,32,101,109,112,116,121,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,112,101,101,114,0,79,112,101,114,97,116,105,111,110,32,116,105,109,101,100,32,111,117,116,0,67,111,110,110,101,99,116,105,111,110,32,114,101,102,117,115,101,100,0,72,111,115,116,32,105,115,32,100,111,119,110,0,72,111,115,116,32,105,115,32,117,110,114,101,97,99,104,97,98,108,101,0,65,100,100,114,101,115,115,32,105,110,32,117,115,101,0,66,114,111,107,101,110,32,112,105,112,101,0,73,47,79,32,101,114,114,111,114,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,32,111,114,32,97,100,100,114,101,115,115,0,66,108,111,99,107,32,100,101,118,105,99,101,32,114,101,113,117,105,114,101,100,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,0,78,111,116,32,97,32,100,105,114,101,99,116,111,114,121,0,73,115,32,97,32,100,105,114,101,99,116,111,114,121,0,84,101,120,116,32,102,105,108,101,32,98,117,115,121,0,69,120,101,99,32,102,111,114,109,97,116,32,101,114,114,111,114,0,73,110,118,97,108,105,100,32,97,114,103,117,109,101,110,116,0,65,114,103,117,109,101,110,116,32,108,105,115,116,32,116,111,111,32,108,111,110,103,0,83,121,109,98,111,108,105,99,32,108,105,110,107,32,108,111,111,112,0,70,105,108,101,110,97,109,101,32,116,111,111,32,108,111,110,103,0,84,111,111,32,109,97,110,121,32,111,112,101,110,32,102,105,108,101,115,32,105,110,32,115,121,115,116,101,109,0,78,111,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,115,32,97,118,97,105,108,97,98,108,101,0,66,97,100,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,0,78,111,32,99,104,105,108,100,32,112,114,111,99,101,115,115,0,66,97,100,32,97,100,100,114,101,115,115,0,70,105,108,101,32,116,111,111,32,108,97,114,103,101,0,84,111,111,32,109,97,110,121,32,108,105,110,107,115,0,78,111,32,108,111,99,107,115,32,97,118,97,105,108,97,98,108,101,0,82,101,115,111,117,114,99,101,32,100,101,97,100,108,111,99,107,32,119,111,117,108,100,32,111,99,99,117,114,0,83,116,97,116,101,32,110,111,116,32,114,101,99,111,118,101,114,97,98,108,101,0,80,114,101,118,105,111,117,115,32,111,119,110,101,114,32,100,105,101,100,0,79,112,101,114,97,116,105,111,110,32,99,97,110,99,101,108,101,100,0,70,117,110,99,116,105,111,110,32,110,111,116,32,105,109,112,108,101,109,101,110,116,101,100,0,78,111,32,109,101,115,115,97,103,101,32,111,102,32,100,101,115,105,114,101,100,32,116,121,112,101,0,73,100,101,110,116,105,102,105,101,114,32,114,101,109,111,118,101,100,0,68,101,118,105,99,101,32,110,111,116,32,97,32,115,116,114,101,97,109,0,78,111,32,100,97,116,97,32,97,118,97,105,108,97,98,108,101,0,68,101,118,105,99,101,32,116,105,109,101,111,117,116,0,79,117,116,32,111,102,32,115,116,114,101,97,109,115,32,114,101,115,111,117,114,99,101,115,0,76,105,110,107,32,104,97,115,32,98,101,101,110,32,115,101,118,101,114,101,100,0,80,114,111,116,111,99,111,108,32,101,114,114,111,114,0,66,97,100,32,109,101,115,115,97,103,101,0,70,105,108,101,32,100,101,115,99,114,105,112,116,111,114,32,105,110,32,98,97,100,32,115,116,97,116,101,0,78,111,116,32,97,32,115,111,99,107,101,116,0,68,101,115,116,105,110,97,116,105,111,110,32,97,100,100,114,101,115,115,32,114,101,113,117,105,114,101,100,0,77,101,115,115,97,103,101,32,116,111,111,32,108,97,114,103,101,0,80,114,111,116,111,99,111,108,32,119,114,111,110,103,32,116,121,112,101,32,102,111,114,32,115,111,99,107,101,116,0,80,114,111,116,111,99,111,108,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,80,114,111,116,111,99,111,108,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,83,111,99,107,101,116,32,116,121,112,101,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,78,111,116,32,115,117,112,112,111,114,116,101,100,0,80,114,111,116,111,99,111,108,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,65,100,100,114,101,115,115,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,32,98,121,32,112,114,111,116,111,99,111,108,0,65,100,100,114,101,115,115,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,78,101,116,119,111,114,107,32,105,115,32,100,111,119,110,0,78,101,116,119,111,114,107,32,117,110,114,101,97,99,104,97,98,108,101,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,110,101,116,119,111,114,107,0,67,111,110,110,101,99,116,105,111,110,32,97,98,111,114,116,101,100,0,78,111,32,98,117,102,102,101,114,32,115,112,97,99,101,32,97,118,97,105,108,97,98,108,101,0,83,111,99,107,101,116,32,105,115,32,99,111,110,110,101,99,116,101,100,0,83,111,99,107,101,116,32,110,111,116,32,99,111,110,110,101,99,116,101,100,0,67,97,110,110,111,116,32,115,101,110,100,32,97,102,116,101,114,32,115,111,99,107,101,116,32,115,104,117,116,100,111,119,110,0,79,112,101,114,97,116,105,111,110,32,97,108,114,101,97,100,121,32,105,110,32,112,114,111,103,114,101,115,115,0,79,112,101,114,97,116,105,111,110,32,105,110,32,112,114,111,103,114,101,115,115,0,83,116,97,108,101,32,102,105,108,101,32,104,97,110,100,108,101,0,82,101,109,111,116,101,32,73,47,79,32,101,114,114,111,114,0,81,117,111,116,97,32,101,120,99,101,101,100,101,100,0,78,111,32,109,101,100,105,117,109,32,102,111,117,110,100,0,87,114,111,110,103,32,109,101,100,105,117,109,32,116,121,112,101,0,78,111,32,101,114,114,111,114,32,105,110,102,111,114,109,97,116,105,111,110,0,0,105,110,102,105,110,105,116,121,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,7,3,6,5,0,114,119,97],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+10240),allocate([17,0,10,0,17,17,17,0,0,0,0,5,0,0,0,0,0,0,9,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,15,10,17,17,17,3,10,7,0,1,19,9,11,11,0,0,9,6,11,0,0,11,0,6,17,0,0,0,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,10,10,17,17,17,0,10,0,0,2,0,9,11,0,0,0,9,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,13,0,0,0,0,9,14,0,0,0,0,0,14,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,15,0,0,0,0,9,16,0,0,0,0,0,16,0,0,16,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,10,0,0,0,0,9,11,0,0,0,0,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,45,43,32,32,32,48,88,48,120,0,40,110,117,108,108,41,0,45,48,88,43,48,88,32,48,88,45,48,120,43,48,120,32,48,120,0,105,110,102,0,73,78,70,0,110,97,110,0,78,65,78,0,46,0],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+15945);var tempDoublePtr=Runtime.alignMemory(allocate(12,"i8",ALLOC_STATIC),8);assert(tempDoublePtr%8==0),Module._i64Subtract=_i64Subtract;var embind_charCodes=void 0,awaitingDependencies={},registeredTypes={},typeDependencies={},char_0=48,char_9=57,BindingError=void 0,InternalError=void 0,EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var n=EXCEPTIONS.infos[t];if(n.adjusted===e)return t}return e},addRef:function(e){if(e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,0===t.refcount&&(t.destructor&&Runtime.dynCall("vi",t.destructor,[e]),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};Module._memset=_memset;var _BDtoILow=!0;Module._bitshift64Shl=_bitshift64Shl,Module._free=_free,Module._malloc=_malloc;var _emscripten_asm_const_int=!0;Module._i64Add=_i64Add;var _fabs=Math_abs,_sqrt=Math_sqrt,emval_free_list=[],emval_handle_array=[{},{value:void 0},{value:null},{value:!0},{value:!1}],_sin=Math_sin,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};Module._bitshift64Lshr=_bitshift64Lshr;var _llvm_ctlz_i32=!0,_BDtoIHigh=!0,UnboundTypeError=void 0,ERRNO_MESSAGES={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},PATH={splitPath:function(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return e=PATH.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"),e||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=PATH.splitPath(e),n=t[0],i=t[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},basename:function(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},extname:function(e){return PATH.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return PATH.normalize(e.join("/"))},join2:function(e,t){return PATH.normalize(e+"/"+t)},resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var i=n>=0?arguments[n]:FS.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";e=i+"/"+e,t="/"===i.charAt(0)}return e=PATH.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=PATH.resolve(e).substr(1),t=PATH.resolve(t).substr(1);for(var i=n(e.split("/")),r=n(t.split("/")),a=Math.min(i.length,r.length),o=a,s=0;s<a;s++)if(i[s]!==r[s]){o=s;break}for(var l=[],s=o;s<i.length;s++)l.push("..");return l=l.concat(r.slice(o)),l.join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){TTY.ttys[e]={input:[],output:[],ops:t},FS.registerDevice(e,TTY.stream_ops)},stream_ops:{open:function(e){var t=TTY.ttys[e.node.rdev];if(!t)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,i,r){if(!e.tty||!e.tty.ops.get_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var a=0,o=0;o<i;o++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(void 0===s&&0===a)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(null===s||void 0===s)break;a++,t[n+o]=s}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,n,i,r){if(!e.tty||!e.tty.ops.put_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var a=0;a<i;a++)try{e.tty.ops.put_char(e.tty,t[n+a])}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EIO)}return i&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(ENVIRONMENT_IS_NODE){var n=256,i=new Buffer(n),r=0,a=process.stdin.fd,o=!1;try{a=fs.openSync("/dev/stdin","r"),o=!0}catch(e){}r=fs.readSync(a,i,0,n,null),o&&fs.closeSync(a),t=r>0?i.slice(0,r).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?(t=window.prompt("Input: "),null!==t&&(t+="\n")):"function"==typeof readline&&(t=readline(),null!==t&&(t+="\n"));if(!t)return null;e.input=intArrayFromString(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(Module.print(UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(Module.print(UTF8ArrayToString(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(Module.printErr(UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(Module.printErr(UTF8ArrayToString(e.output,0)),e.output=[])}}},MEMFS={ops_table:null,mount:function(e){return MEMFS.createNode(null,"/",16895,0)},createNode:function(e,t,n,i){if(FS.isBlkdev(n)||FS.isFIFO(n))throw new FS.ErrnoError(ERRNO_CODES.EPERM);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var r=FS.createNode(e,t,n,i);return FS.isDir(r.mode)?(r.node_ops=MEMFS.ops_table.dir.node,r.stream_ops=MEMFS.ops_table.dir.stream,r.contents={}):FS.isFile(r.mode)?(r.node_ops=MEMFS.ops_table.file.node,r.stream_ops=MEMFS.ops_table.file.stream,r.usedBytes=0,r.contents=null):FS.isLink(r.mode)?(r.node_ops=MEMFS.ops_table.link.node,r.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(r.mode)&&(r.node_ops=MEMFS.ops_table.chrdev.node,r.stream_ops=MEMFS.ops_table.chrdev.stream),r.timestamp=Date.now(),e&&(e.contents[t]=r),r},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],n=0;n<e.usedBytes;++n)t.push(e.contents[n]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array},expandFileStorage:function(e,t){if(e.contents&&e.contents.subarray&&t>e.contents.length&&(e.contents=MEMFS.getFileDataAsRegularArray(e),e.usedBytes=e.contents.length),!e.contents||e.contents.subarray){var n=e.contents?e.contents.buffer.byteLength:0;if(n>=t)return;var i=1048576;t=Math.max(t,n*(n<i?2:1.125)|0),0!=n&&(t=Math.max(t,256));var r=e.contents;return e.contents=new Uint8Array(t),void(e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0))}for(!e.contents&&t>0&&(e.contents=[]);e.contents.length<t;)e.contents.push(0)},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var n=e.contents;return e.contents=new Uint8Array(new ArrayBuffer(t)),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else for(;e.contents.length<t;)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=FS.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,FS.isDir(e.mode)?t.size=4096:FS.isFile(e.mode)?t.size=e.usedBytes:FS.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&MEMFS.resizeFileStorage(e,t.size)},lookup:function(e,t){throw FS.genericErrors[ERRNO_CODES.ENOENT]},mknod:function(e,t,n,i){return MEMFS.createNode(e,t,n,i)},rename:function(e,t,n){if(FS.isDir(e.mode)){var i;try{i=FS.lookupNode(t,n)}catch(e){}if(i)for(var r in i.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY)}delete e.parent.contents[e.name],e.name=n,t.contents[n]=e,e.parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var n=FS.lookupNode(e,t);for(var i in n.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);delete e.contents[t]},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var i=MEMFS.createNode(e,t,41471,0);return i.link=n,i},readlink:function(e){if(!FS.isLink(e.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return e.link}},stream_ops:{read:function(e,t,n,i,r){var a=e.node.contents;if(r>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-r,i);if(assert(o>=0),o>8&&a.subarray)t.set(a.subarray(r,r+o),n);else for(var s=0;s<o;s++)t[n+s]=a[r+s];return o},write:function(e,t,n,i,r,a){if(!i)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(a)return o.contents=t.subarray(n,n+i),
o.usedBytes=i,i;if(0===o.usedBytes&&0===r)return o.contents=new Uint8Array(t.subarray(n,n+i)),o.usedBytes=i,i;if(r+i<=o.usedBytes)return o.contents.set(t.subarray(n,n+i),r),i}if(MEMFS.expandFileStorage(o,r+i),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(n,n+i),r);else for(var s=0;s<i;s++)o.contents[r+s]=t[n+s];return o.usedBytes=Math.max(o.usedBytes,r+i),i},llseek:function(e,t,n){var i=t;if(1===n?i+=e.position:2===n&&FS.isFile(e.node.mode)&&(i+=e.node.usedBytes),i<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return i},allocate:function(e,t,n){MEMFS.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,i,r,a,o){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);var s,l,u=e.node.contents;if(2&o||u.buffer!==t&&u.buffer!==t.buffer){if((r>0||r+i<e.node.usedBytes)&&(u=u.subarray?u.subarray(r,r+i):Array.prototype.slice.call(u,r,r+i)),l=!0,s=_malloc(i),!s)throw new FS.ErrnoError(ERRNO_CODES.ENOMEM);t.set(u,s)}else l=!1,s=u.byteOffset;return{ptr:s,allocated:l}},msync:function(e,t,n,i,r){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(2&r)return 0;MEMFS.stream_ops.write(e,t,0,i,n,!1);return 0}}},IDBFS={dbs:{},indexedDB:function(){if("undefined"!=typeof indexedDB)return indexedDB;var e=null;return"object"==typeof window&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert(e,"IDBFS used, but indexedDB not supported"),e},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(e){return MEMFS.mount.apply(null,arguments)},syncfs:function(e,t,n){IDBFS.getLocalSet(e,function(i,r){return i?n(i):void IDBFS.getRemoteSet(e,function(e,i){if(e)return n(e);var a=t?i:r,o=t?r:i;IDBFS.reconcile(a,o,n)})})},getDB:function(e,t){var n=IDBFS.dbs[e];if(n)return t(null,n);var i;try{i=IDBFS.indexedDB().open(e,IDBFS.DB_VERSION)}catch(e){return t(e)}i.onupgradeneeded=function(e){var t,n=e.target.result,i=e.target.transaction;t=n.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?i.objectStore(IDBFS.DB_STORE_NAME):n.createObjectStore(IDBFS.DB_STORE_NAME),t.indexNames.contains("timestamp")||t.createIndex("timestamp","timestamp",{unique:!1})},i.onsuccess=function(){n=i.result,IDBFS.dbs[e]=n,t(null,n)},i.onerror=function(e){t(this.error),e.preventDefault()}},getLocalSet:function(e,t){function n(e){return"."!==e&&".."!==e}function i(e){return function(t){return PATH.join2(e,t)}}for(var r={},a=FS.readdir(e.mountpoint).filter(n).map(i(e.mountpoint));a.length;){var o,s=a.pop();try{o=FS.stat(s)}catch(e){return t(e)}FS.isDir(o.mode)&&a.push.apply(a,FS.readdir(s).filter(n).map(i(s))),r[s]={timestamp:o.mtime}}return t(null,{type:"local",entries:r})},getRemoteSet:function(e,t){var n={};IDBFS.getDB(e.mountpoint,function(e,i){if(e)return t(e);var r=i.transaction([IDBFS.DB_STORE_NAME],"readonly");r.onerror=function(e){t(this.error),e.preventDefault()};var a=r.objectStore(IDBFS.DB_STORE_NAME),o=a.index("timestamp");o.openKeyCursor().onsuccess=function(e){var r=e.target.result;return r?(n[r.primaryKey]={timestamp:r.key},void r.continue()):t(null,{type:"remote",db:i,entries:n})}})},loadLocalEntry:function(e,t){var n,i;try{var r=FS.lookupPath(e);i=r.node,n=FS.stat(e)}catch(e){return t(e)}return FS.isDir(n.mode)?t(null,{timestamp:n.mtime,mode:n.mode}):FS.isFile(n.mode)?(i.contents=MEMFS.getFileDataAsTypedArray(i),t(null,{timestamp:n.mtime,mode:n.mode,contents:i.contents})):t(new Error("node type not supported"))},storeLocalEntry:function(e,t,n){try{if(FS.isDir(t.mode))FS.mkdir(e,t.mode);else{if(!FS.isFile(t.mode))return n(new Error("node type not supported"));FS.writeFile(e,t.contents,{encoding:"binary",canOwn:!0})}FS.chmod(e,t.mode),FS.utime(e,t.timestamp,t.timestamp)}catch(e){return n(e)}n(null)},removeLocalEntry:function(e,t){try{var n=(FS.lookupPath(e),FS.stat(e));FS.isDir(n.mode)?FS.rmdir(e):FS.isFile(n.mode)&&FS.unlink(e)}catch(e){return t(e)}t(null)},loadRemoteEntry:function(e,t,n){var i=e.get(t);i.onsuccess=function(e){n(null,e.target.result)},i.onerror=function(e){n(this.error),e.preventDefault()}},storeRemoteEntry:function(e,t,n,i){var r=e.put(n,t);r.onsuccess=function(){i(null)},r.onerror=function(e){i(this.error),e.preventDefault()}},removeRemoteEntry:function(e,t,n){var i=e.delete(t);i.onsuccess=function(){n(null)},i.onerror=function(e){n(this.error),e.preventDefault()}},reconcile:function(e,t,n){function i(e){if(e){if(!i.errored)return i.errored=!0,n(e)}else if(++s>=r)return n(null)}var r=0,a=[];Object.keys(e.entries).forEach(function(n){var i=e.entries[n],o=t.entries[n];(!o||i.timestamp>o.timestamp)&&(a.push(n),r++)});var o=[];if(Object.keys(t.entries).forEach(function(n){var i=(t.entries[n],e.entries[n]);i||(o.push(n),r++)}),!r)return n(null);var s=0,l="remote"===e.type?e.db:t.db,u=l.transaction([IDBFS.DB_STORE_NAME],"readwrite"),c=u.objectStore(IDBFS.DB_STORE_NAME);u.onerror=function(e){i(this.error),e.preventDefault()},a.sort().forEach(function(e){"local"===t.type?IDBFS.loadRemoteEntry(c,e,function(t,n){return t?i(t):void IDBFS.storeLocalEntry(e,n,i)}):IDBFS.loadLocalEntry(e,function(t,n){return t?i(t):void IDBFS.storeRemoteEntry(c,e,n,i)})}),o.sort().reverse().forEach(function(e){"local"===t.type?IDBFS.removeLocalEntry(e,i):IDBFS.removeRemoteEntry(c,e,i)})}},NODEFS={isWindows:!1,staticInit:function(){NODEFS.isWindows=!!process.platform.match(/^win/)},mount:function(e){return assert(ENVIRONMENT_IS_NODE),NODEFS.createNode(null,"/",NODEFS.getMode(e.opts.root),0)},createNode:function(e,t,n,i){if(!FS.isDir(n)&&!FS.isFile(n)&&!FS.isLink(n))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var r=FS.createNode(e,t,n);return r.node_ops=NODEFS.node_ops,r.stream_ops=NODEFS.stream_ops,r},getMode:function(e){var t;try{t=fs.lstatSync(e),NODEFS.isWindows&&(t.mode=t.mode|(146&t.mode)>>1)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}return t.mode},realPath:function(e){for(var t=[];e.parent!==e;)t.push(e.name),e=e.parent;return t.push(e.mount.opts.root),t.reverse(),PATH.join.apply(null,t)},flagsToPermissionStringMap:{0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},flagsToPermissionString:function(e){if(e&=-32769,e in NODEFS.flagsToPermissionStringMap)return NODEFS.flagsToPermissionStringMap[e];throw new FS.ErrnoError(ERRNO_CODES.EINVAL)},node_ops:{getattr:function(e){var t,n=NODEFS.realPath(e);try{t=fs.lstatSync(n)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}return NODEFS.isWindows&&!t.blksize&&(t.blksize=4096),NODEFS.isWindows&&!t.blocks&&(t.blocks=(t.size+t.blksize-1)/t.blksize|0),{dev:t.dev,ino:t.ino,mode:t.mode,nlink:t.nlink,uid:t.uid,gid:t.gid,rdev:t.rdev,size:t.size,atime:t.atime,mtime:t.mtime,ctime:t.ctime,blksize:t.blksize,blocks:t.blocks}},setattr:function(e,t){var n=NODEFS.realPath(e);try{if(void 0!==t.mode&&(fs.chmodSync(n,t.mode),e.mode=t.mode),void 0!==t.timestamp){var i=new Date(t.timestamp);fs.utimesSync(n,i,i)}void 0!==t.size&&fs.truncateSync(n,t.size)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},lookup:function(e,t){var n=PATH.join2(NODEFS.realPath(e),t),i=NODEFS.getMode(n);return NODEFS.createNode(e,t,i)},mknod:function(e,t,n,i){var r=NODEFS.createNode(e,t,n,i),a=NODEFS.realPath(r);try{FS.isDir(r.mode)?fs.mkdirSync(a,r.mode):fs.writeFileSync(a,"",{mode:r.mode})}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}return r},rename:function(e,t,n){var i=NODEFS.realPath(e),r=PATH.join2(NODEFS.realPath(t),n);try{fs.renameSync(i,r)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},unlink:function(e,t){var n=PATH.join2(NODEFS.realPath(e),t);try{fs.unlinkSync(n)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},rmdir:function(e,t){var n=PATH.join2(NODEFS.realPath(e),t);try{fs.rmdirSync(n)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},readdir:function(e){var t=NODEFS.realPath(e);try{return fs.readdirSync(t)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},symlink:function(e,t,n){var i=PATH.join2(NODEFS.realPath(e),t);try{fs.symlinkSync(n,i)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},readlink:function(e){var t=NODEFS.realPath(e);try{return t=fs.readlinkSync(t),t=NODEJS_PATH.relative(NODEJS_PATH.resolve(e.mount.opts.root),t)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}}},stream_ops:{open:function(e){var t=NODEFS.realPath(e.node);try{FS.isFile(e.node.mode)&&(e.nfd=fs.openSync(t,NODEFS.flagsToPermissionString(e.flags)))}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},close:function(e){try{FS.isFile(e.node.mode)&&e.nfd&&fs.closeSync(e.nfd)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},read:function(e,t,n,i,r){if(0===i)return 0;var a,o=new Buffer(i);try{a=fs.readSync(e.nfd,o,0,i,r)}catch(e){throw new FS.ErrnoError(ERRNO_CODES[e.code])}if(a>0)for(var s=0;s<a;s++)t[n+s]=o[s];return a},write:function(e,t,n,i,r){var a,o=new Buffer(t.subarray(n,n+i));try{a=fs.writeSync(e.nfd,o,0,i,r)}catch(e){throw new FS.ErrnoError(ERRNO_CODES[e.code])}return a},llseek:function(e,t,n){var i=t;if(1===n)i+=e.position;else if(2===n&&FS.isFile(e.node.mode))try{var r=fs.fstatSync(e.nfd);i+=r.size}catch(e){throw new FS.ErrnoError(ERRNO_CODES[e.code])}if(i<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return i}}},WORKERFS={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(e){function t(e){for(var t=e.split("/"),n=i,a=0;a<t.length-1;a++){var o=t.slice(0,a+1).join("/");r[o]||(r[o]=WORKERFS.createNode(n,o,WORKERFS.DIR_MODE,0)),n=r[o]}return n}function n(e){var t=e.split("/");return t[t.length-1]}assert(ENVIRONMENT_IS_WORKER),WORKERFS.reader||(WORKERFS.reader=new FileReaderSync);var i=WORKERFS.createNode(null,"/",WORKERFS.DIR_MODE,0),r={};return Array.prototype.forEach.call(e.opts.files||[],function(e){WORKERFS.createNode(t(e.name),n(e.name),WORKERFS.FILE_MODE,0,e,e.lastModifiedDate)}),(e.opts.blobs||[]).forEach(function(e){WORKERFS.createNode(t(e.name),n(e.name),WORKERFS.FILE_MODE,0,e.data)}),(e.opts.packages||[]).forEach(function(e){e.metadata.files.forEach(function(i){var r=i.filename.substr(1);WORKERFS.createNode(t(r),n(r),WORKERFS.FILE_MODE,0,e.blob.slice(i.start,i.end))})}),i},createNode:function(e,t,n,i,r,a){var o=FS.createNode(e,t,n);return o.mode=n,o.node_ops=WORKERFS.node_ops,o.stream_ops=WORKERFS.stream_ops,o.timestamp=(a||new Date).getTime(),assert(WORKERFS.FILE_MODE!==WORKERFS.DIR_MODE),n===WORKERFS.FILE_MODE?(o.size=r.size,o.contents=r):(o.size=4096,o.contents={}),e&&(e.contents[t]=o),o},node_ops:{getattr:function(e){return{dev:1,ino:void 0,mode:e.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:e.size,atime:new Date(e.timestamp),mtime:new Date(e.timestamp),ctime:new Date(e.timestamp),blksize:4096,blocks:Math.ceil(e.size/4096)}},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp)},lookup:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)},mknod:function(e,t,n,i){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rename:function(e,t,n){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},unlink:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rmdir:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readdir:function(e){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},symlink:function(e,t,n){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readlink:function(e){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}},stream_ops:{read:function(e,t,n,i,r){if(r>=e.node.size)return 0;var a=e.node.contents.slice(r,r+i),o=WORKERFS.reader.readAsArrayBuffer(a);return t.set(new Uint8Array(o),n),a.size},write:function(e,t,n,i,r){throw new FS.ErrnoError(ERRNO_CODES.EIO)},llseek:function(e,t,n){var i=t;if(1===n?i+=e.position:2===n&&FS.isFile(e.node.mode)&&(i+=e.node.size),i<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return i}}},_stdin=allocate(1,"i32*",ALLOC_STATIC),_stdout=allocate(1,"i32*",ALLOC_STATIC),_stderr=allocate(1,"i32*",ALLOC_STATIC),FS={root:null,mounts:[],devices:[null],streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,handleFSError:function(e){if(!(e instanceof FS.ErrnoError))throw e+" : "+stackTrace();return ___setErrNo(e.errno)},lookupPath:function(e,t){if(e=PATH.resolve(FS.cwd(),e),t=t||{},!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var i in n)void 0===t[i]&&(t[i]=n[i]);if(t.recurse_count>8)throw new FS.ErrnoError(ERRNO_CODES.ELOOP);for(var r=PATH.normalizeArray(e.split("/").filter(function(e){return!!e}),!1),a=FS.root,o="/",s=0;s<r.length;s++){var l=s===r.length-1;if(l&&t.parent)break;if(a=FS.lookupNode(a,r[s]),o=PATH.join2(o,r[s]),FS.isMountpoint(a)&&(!l||l&&t.follow_mount)&&(a=a.mounted.root),!l||t.follow)for(var u=0;FS.isLink(a.mode);){var c=FS.readlink(o);o=PATH.resolve(PATH.dirname(o),c);var h=FS.lookupPath(o,{recurse_count:t.recurse_count});if(a=h.node,u++>40)throw new FS.ErrnoError(ERRNO_CODES.ELOOP)}}return{path:o,node:a}},getPath:function(e){for(var t;;){if(FS.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var n=0,i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i)|0;return(e+n>>>0)%FS.nameTable.length},hashAddNode:function(e){var t=FS.hashName(e.parent.id,e.name);e.name_next=FS.nameTable[t],FS.nameTable[t]=e},hashRemoveNode:function(e){var t=FS.hashName(e.parent.id,e.name);if(FS.nameTable[t]===e)FS.nameTable[t]=e.name_next;else for(var n=FS.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=FS.mayLookup(e);if(n)throw new FS.ErrnoError(n,e);for(var i=FS.hashName(e.id,t),r=FS.nameTable[i];r;r=r.name_next){var a=r.name;if(r.parent.id===e.id&&a===t)return r}return FS.lookup(e,t)},createNode:function(e,t,n,i){if(!FS.FSNode){FS.FSNode=function(e,t,n,i){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=FS.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=i},FS.FSNode.prototype={};var r=365,a=146;Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return(this.mode&r)===r},set:function(e){e?this.mode|=r:this.mode&=~r}},write:{get:function(){return(this.mode&a)===a},set:function(e){e?this.mode|=a:this.mode&=~a}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}})}var o=new FS.FSNode(e,t,n,i);return FS.hashAddNode(o),o},destroyNode:function(e){FS.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768===(61440&e)},isDir:function(e){return 16384===(61440&e)},isLink:function(e){return 40960===(61440&e)},isChrdev:function(e){return 8192===(61440&e)},isBlkdev:function(e){return 24576===(61440&e)},isFIFO:function(e){return 4096===(61440&e)},isSocket:function(e){return 49152===(49152&e)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var t=FS.flagModes[e];if("undefined"==typeof t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return FS.ignorePermissions?0:(t.indexOf("r")===-1||292&e.mode)&&(t.indexOf("w")===-1||146&e.mode)&&(t.indexOf("x")===-1||73&e.mode)?0:ERRNO_CODES.EACCES},mayLookup:function(e){var t=FS.nodePermissions(e,"x");return t?t:e.node_ops.lookup?0:ERRNO_CODES.EACCES},mayCreate:function(e,t){try{FS.lookupNode(e,t);return ERRNO_CODES.EEXIST}catch(e){}return FS.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var i;try{i=FS.lookupNode(e,t)}catch(e){return e.errno}var r=FS.nodePermissions(e,"wx");if(r)return r;if(n){if(!FS.isDir(i.mode))return ERRNO_CODES.ENOTDIR;if(FS.isRoot(i)||FS.getPath(i)===FS.cwd())return ERRNO_CODES.EBUSY}else if(FS.isDir(i.mode))return ERRNO_CODES.EISDIR;return 0},mayOpen:function(e,t){return e?FS.isLink(e.mode)?ERRNO_CODES.ELOOP:FS.isDir(e.mode)&&(0!==(2097155&t)||512&t)?ERRNO_CODES.EISDIR:FS.nodePermissions(e,FS.flagsToPermissionString(t)):ERRNO_CODES.ENOENT},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||FS.MAX_OPEN_FDS;for(var n=e;n<=t;n++)if(!FS.streams[n])return n;throw new FS.ErrnoError(ERRNO_CODES.EMFILE)},getStream:function(e){return FS.streams[e]},createStream:function(e,t,n){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!==(2097155&this.flags)}},isWrite:{get:function(){return 0!==(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}));var i=new FS.FSStream;for(var r in e)i[r]=e[r];e=i;var a=FS.nextfd(t,n);return e.fd=a,FS.streams[a]=e,e},closeStream:function(e){FS.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=FS.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new FS.ErrnoError(ERRNO_CODES.ESPIPE)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){FS.devices[e]={stream_ops:t}},getDevice:function(e){return FS.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var i=n.pop();t.push(i),n.push.apply(n,i.mounts)}return t},syncfs:function(e,t){function n(e){if(e){if(!n.errored)return n.errored=!0,t(e)}else++r>=i.length&&t(null)}"function"==typeof e&&(t=e,e=!1);var i=FS.getMounts(FS.root.mount),r=0;i.forEach(function(t){return t.type.syncfs?void t.type.syncfs(t,e,n):n(null)})},mount:function(e,t,n){var i,r="/"===n,a=!n;if(r&&FS.root)throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!r&&!a){var o=FS.lookupPath(n,{follow_mount:!1});if(n=o.path,i=o.node,FS.isMountpoint(i))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!FS.isDir(i.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR)}var s={type:e,opts:t,mountpoint:n,mounts:[]},l=e.mount(s);return l.mount=s,s.root=l,r?FS.root=l:i&&(i.mounted=s,i.mount&&i.mount.mounts.push(s)),l},unmount:function(e){var t=FS.lookupPath(e,{follow_mount:!1});if(!FS.isMountpoint(t.node))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var n=t.node,i=n.mounted,r=FS.getMounts(i);Object.keys(FS.nameTable).forEach(function(e){for(var t=FS.nameTable[e];t;){var n=t.name_next;r.indexOf(t.mount)!==-1&&FS.destroyNode(t),t=n}}),n.mounted=null;var a=n.mount.mounts.indexOf(i);assert(a!==-1),n.mount.mounts.splice(a,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var i=FS.lookupPath(e,{parent:!0}),r=i.node,a=PATH.basename(e);if(!a||"."===a||".."===a)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var o=FS.mayCreate(r,a);if(o)throw new FS.ErrnoError(o);if(!r.node_ops.mknod)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return r.node_ops.mknod(r,a,t,n)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,FS.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,FS.mknod(e,t,0)},mkdev:function(e,t,n){return"undefined"==typeof n&&(n=t,t=438),t|=8192,FS.mknod(e,t,n)},symlink:function(e,t){if(!PATH.resolve(e))throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var n=FS.lookupPath(t,{parent:!0}),i=n.node;if(!i)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var r=PATH.basename(t),a=FS.mayCreate(i,r);if(a)throw new FS.ErrnoError(a);if(!i.node_ops.symlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return i.node_ops.symlink(i,r,e)},rename:function(e,t){var n,i,r,a=PATH.dirname(e),o=PATH.dirname(t),s=PATH.basename(e),l=PATH.basename(t);try{n=FS.lookupPath(e,{parent:!0}),i=n.node,n=FS.lookupPath(t,{parent:!0}),r=n.node}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}if(!i||!r)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(i.mount!==r.mount)throw new FS.ErrnoError(ERRNO_CODES.EXDEV);var u=FS.lookupNode(i,s),c=PATH.relative(e,o);if("."!==c.charAt(0))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(c=PATH.relative(t,a),"."!==c.charAt(0))throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);var h;try{h=FS.lookupNode(r,l)}catch(e){}if(u!==h){var f=FS.isDir(u.mode),d=FS.mayDelete(i,s,f);if(d)throw new FS.ErrnoError(d);if(d=h?FS.mayDelete(r,l,f):FS.mayCreate(r,l))throw new FS.ErrnoError(d);if(!i.node_ops.rename)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(u)||h&&FS.isMountpoint(h))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(r!==i&&(d=FS.nodePermissions(i,"w")))throw new FS.ErrnoError(d);try{FS.trackingDelegate.willMovePath&&FS.trackingDelegate.willMovePath(e,t)}catch(n){console.log("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}FS.hashRemoveNode(u);try{i.node_ops.rename(u,r,l)}catch(e){throw e}finally{FS.hashAddNode(u)}try{FS.trackingDelegate.onMovePath&&FS.trackingDelegate.onMovePath(e,t)}catch(n){console.log("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}}},rmdir:function(e){var t=FS.lookupPath(e,{parent:!0}),n=t.node,i=PATH.basename(e),r=FS.lookupNode(n,i),a=FS.mayDelete(n,i,!0);if(a)throw new FS.ErrnoError(a);if(!n.node_ops.rmdir)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(r))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(e)}catch(t){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}n.node_ops.rmdir(n,i),FS.destroyNode(r);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(e)}catch(t){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=FS.lookupPath(e,{follow:!0}),n=t.node;if(!n.node_ops.readdir)throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);return n.node_ops.readdir(n)},unlink:function(e){var t=FS.lookupPath(e,{parent:!0}),n=t.node,i=PATH.basename(e),r=FS.lookupNode(n,i),a=FS.mayDelete(n,i,!1);if(a)throw a===ERRNO_CODES.EISDIR&&(a=ERRNO_CODES.EPERM),new FS.ErrnoError(a);if(!n.node_ops.unlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(r))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(e)}catch(t){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}n.node_ops.unlink(n,i),FS.destroyNode(r);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(e)}catch(t){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=FS.lookupPath(e),n=t.node;if(!n)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!n.node_ops.readlink)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return PATH.resolve(FS.getPath(n.parent),n.node_ops.readlink(n))},stat:function(e,t){var n=FS.lookupPath(e,{follow:!t}),i=n.node;if(!i)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!i.node_ops.getattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return i.node_ops.getattr(i)},lstat:function(e){return FS.stat(e,!0)},chmod:function(e,t,n){var i;if("string"==typeof e){var r=FS.lookupPath(e,{follow:!n});i=r.node}else i=e;if(!i.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);i.node_ops.setattr(i,{mode:4095&t|i.mode&-4096,timestamp:Date.now()})},lchmod:function(e,t){FS.chmod(e,t,!0)},fchmod:function(e,t){var n=FS.getStream(e);if(!n)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chmod(n.node,t)},chown:function(e,t,n,i){var r;if("string"==typeof e){var a=FS.lookupPath(e,{follow:!i});r=a.node}else r=e;if(!r.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);r.node_ops.setattr(r,{timestamp:Date.now()})},lchown:function(e,t,n){FS.chown(e,t,n,!0)},fchown:function(e,t,n){var i=FS.getStream(e);if(!i)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chown(i.node,t,n)},truncate:function(e,t){if(t<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var n;if("string"==typeof e){var i=FS.lookupPath(e,{follow:!0});n=i.node}else n=e;if(!n.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isDir(n.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!FS.isFile(n.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var r=FS.nodePermissions(n,"w");if(r)throw new FS.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var n=FS.getStream(e);if(!n)throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(0===(2097155&n.flags))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);FS.truncate(n.node,t)},utime:function(e,t,n){var i=FS.lookupPath(e,{follow:!0}),r=i.node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:function(e,t,n,i,r){if(""===e)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);t="string"==typeof t?FS.modeStringToFlags(t):t,n="undefined"==typeof n?438:n,n=64&t?4095&n|32768:0;var a;if("object"==typeof e)a=e;else{e=PATH.normalize(e);try{var o=FS.lookupPath(e,{follow:!(131072&t)});a=o.node}catch(e){}}var s=!1;if(64&t)if(a){if(128&t)throw new FS.ErrnoError(ERRNO_CODES.EEXIST)}else a=FS.mknod(e,n,0),s=!0;if(!a)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(FS.isChrdev(a.mode)&&(t&=-513),65536&t&&!FS.isDir(a.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);if(!s){var l=FS.mayOpen(a,t);if(l)throw new FS.ErrnoError(l)}512&t&&FS.truncate(a,0),t&=-641;var u=FS.createStream({node:a,path:FS.getPath(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},i,r);u.stream_ops.open&&u.stream_ops.open(u),!Module.logReadFiles||1&t||(FS.readFiles||(FS.readFiles={}),e in FS.readFiles||(FS.readFiles[e]=1,Module.printErr("read file: "+e)));try{if(FS.trackingDelegate.onOpenFile){var c=0;1!==(2097155&t)&&(c|=FS.tracking.openFlags.READ),0!==(2097155&t)&&(c|=FS.tracking.openFlags.WRITE),FS.trackingDelegate.onOpenFile(e,c)}}catch(t){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return u},close:function(e){e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{FS.closeStream(e.fd)}},llseek:function(e,t,n){if(!e.seekable||!e.stream_ops.llseek)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,i,r){if(i<0||r<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(1===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!e.stream_ops.read)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var a=!0;if("undefined"==typeof r)r=e.position,a=!1;else if(!e.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var o=e.stream_ops.read(e,t,n,i,r);return a||(e.position+=o),o},write:function(e,t,n,i,r,a){if(i<0||r<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(0===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!e.stream_ops.write)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);1024&e.flags&&FS.llseek(e,0,2);var o=!0;if("undefined"==typeof r)r=e.position,o=!1;else if(!e.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var s=e.stream_ops.write(e,t,n,i,r,a);o||(e.position+=s);try{e.path&&FS.trackingDelegate.onWriteToFile&&FS.trackingDelegate.onWriteToFile(e.path)}catch(e){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+e.message)}return s},allocate:function(e,t,n){if(t<0||n<=0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(0===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(!FS.isFile(e.node.mode)&&!FS.isDir(node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(!e.stream_ops.allocate)throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP);e.stream_ops.allocate(e,t,n)},mmap:function(e,t,n,i,r,a,o){if(1===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EACCES);if(!e.stream_ops.mmap)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);return e.stream_ops.mmap(e,t,n,i,r,a,o)},msync:function(e,t,n,i,r){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,i,r):0},munmap:function(e){return 0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new FS.ErrnoError(ERRNO_CODES.ENOTTY);return e.stream_ops.ioctl(e,t,n)},readFile:function(e,t){if(t=t||{},t.flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,i=FS.open(e,t.flags),r=FS.stat(e),a=r.size,o=new Uint8Array(a);return FS.read(i,o,0,a,0),"utf8"===t.encoding?n=UTF8ArrayToString(o,0):"binary"===t.encoding&&(n=o),FS.close(i),n},writeFile:function(e,t,n){if(n=n||{},n.flags=n.flags||"w",n.encoding=n.encoding||"utf8","utf8"!==n.encoding&&"binary"!==n.encoding)throw new Error('Invalid encoding type "'+n.encoding+'"');var i=FS.open(e,n.flags,n.mode);if("utf8"===n.encoding){var r=new Uint8Array(lengthBytesUTF8(t)+1),a=stringToUTF8Array(t,r,0,r.length);FS.write(i,r,0,a,0,n.canOwn)}else"binary"===n.encoding&&FS.write(i,t,0,t.length,0,n.canOwn);FS.close(i)},cwd:function(){return FS.currentPath},chdir:function(e){var t=FS.lookupPath(e,{follow:!0});if(!FS.isDir(t.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);var n=FS.nodePermissions(t.node,"x");if(n)throw new FS.ErrnoError(n);FS.currentPath=t.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(e,t,n,i,r){return i}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0));var e;if("undefined"!=typeof crypto){var t=new Uint8Array(1);e=function(){return crypto.getRandomValues(t),t[0]}}else e=ENVIRONMENT_IS_NODE?function(){return require("crypto").randomBytes(1)[0]}:function(){return 256*Math.random()|0};FS.createDevice("/dev","random",e),FS.createDevice("/dev","urandom",e),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc"),FS.mkdir("/proc/self"),FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var e=FS.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,t){var n=+t,i=FS.getStream(n);if(!i)throw new FS.ErrnoError(ERRNO_CODES.EBADF);var r={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return i.path}}};return r.parent=r,r}},e}},{},"/proc/self/fd")},createStandardStreams:function(){Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin"),Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout"),Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1","/dev/stderr");var e=FS.open("/dev/stdin","r");assert(0===e.fd,"invalid handle for stdin ("+e.fd+")");var t=FS.open("/dev/stdout","w");assert(1===t.fd,"invalid handle for stdout ("+t.fd+")");var n=FS.open("/dev/stderr","w");assert(2===n.fd,"invalid handle for stderr ("+n.fd+")")},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e;for(var t in ERRNO_CODES)if(ERRNO_CODES[t]===e){this.code=t;break}},this.setErrno(e),this.message=ERRNO_MESSAGES[e]},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[ERRNO_CODES.ENOENT].forEach(function(e){FS.genericErrors[e]=new FS.ErrnoError(e),FS.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS:MEMFS,IDBFS:IDBFS,NODEFS:NODEFS,WORKERFS:WORKERFS}},init:function(e,t,n){
assert(!FS.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),FS.init.initialized=!0,FS.ensureErrnoError(),Module.stdin=e||Module.stdin,Module.stdout=t||Module.stdout,Module.stderr=n||Module.stderr,FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var e=Module._fflush;e&&e(0);for(var t=0;t<FS.streams.length;t++){var n=FS.streams[t];n&&FS.close(n)}},getMode:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},joinPath:function(e,t){var n=PATH.join.apply(null,e);return t&&"/"==n[0]&&(n=n.substr(1)),n},absolutePath:function(e,t){return PATH.resolve(t,e)},standardizePath:function(e){return PATH.normalize(e)},findObject:function(e,t){var n=FS.analyzePath(e,t);return n.exists?n.object:(___setErrNo(n.error),null)},analyzePath:function(e,t){try{var n=FS.lookupPath(e,{follow:!t});e=n.path}catch(e){}var i={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=FS.lookupPath(e,{parent:!0});i.parentExists=!0,i.parentPath=n.path,i.parentObject=n.node,i.name=PATH.basename(e),n=FS.lookupPath(e,{follow:!t}),i.exists=!0,i.path=n.path,i.object=n.node,i.name=n.node.name,i.isRoot="/"===n.path}catch(e){i.error=e.errno}return i},createFolder:function(e,t,n,i){var r=PATH.join2("string"==typeof e?e:FS.getPath(e),t),a=FS.getMode(n,i);return FS.mkdir(r,a)},createPath:function(e,t,n,i){e="string"==typeof e?e:FS.getPath(e);for(var r=t.split("/").reverse();r.length;){var a=r.pop();if(a){var o=PATH.join2(e,a);try{FS.mkdir(o)}catch(e){}e=o}}return o},createFile:function(e,t,n,i,r){var a=PATH.join2("string"==typeof e?e:FS.getPath(e),t),o=FS.getMode(i,r);return FS.create(a,o)},createDataFile:function(e,t,n,i,r,a){var o=t?PATH.join2("string"==typeof e?e:FS.getPath(e),t):e,s=FS.getMode(i,r),l=FS.create(o,s);if(n){if("string"==typeof n){for(var u=new Array(n.length),c=0,h=n.length;c<h;++c)u[c]=n.charCodeAt(c);n=u}FS.chmod(l,146|s);var f=FS.open(l,"w");FS.write(f,n,0,n.length,0,a),FS.close(f),FS.chmod(l,s)}return l},createDevice:function(e,t,n,i){var r=PATH.join2("string"==typeof e?e:FS.getPath(e),t),a=FS.getMode(!!n,!!i);FS.createDevice.major||(FS.createDevice.major=64);var o=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(o,{open:function(e){e.seekable=!1},close:function(e){i&&i.buffer&&i.buffer.length&&i(10)},read:function(e,t,i,r,a){for(var o=0,s=0;s<r;s++){var l;try{l=n()}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(void 0===l&&0===o)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(null===l||void 0===l)break;o++,t[i+s]=l}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,r,a){for(var o=0;o<r;o++)try{i(t[n+o])}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EIO)}return r&&(e.node.timestamp=Date.now()),o}}),FS.mkdev(r,a,o)},createLink:function(e,t,n,i,r){var a=PATH.join2("string"==typeof e?e:FS.getPath(e),t);return FS.symlink(n,a)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var t=!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!Module.read)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=intArrayFromString(Module.read(e.url),!0),e.usedBytes=e.contents.length}catch(e){t=!1}return t||___setErrNo(ERRNO_CODES.EIO),t},createLazyFile:function(e,t,n,i,r){function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},a.prototype.setDataGetter=function(e){this.getter=e},a.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,i=Number(e.getResponseHeader("Content-length")),r=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,a=1048576;r||(a=i);var o=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>i-1)throw new Error("only "+i+" bytes available! programmer error!");var r=new XMLHttpRequest;if(r.open("GET",n,!1),i!==a&&r.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(r.responseType="arraybuffer"),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.send(null),!(r.status>=200&&r.status<300||304===r.status))throw new Error("Couldn't load "+n+". Status: "+r.status);return void 0!==r.response?new Uint8Array(r.response||[]):intArrayFromString(r.responseText||"",!0)},s=this;s.setDataGetter(function(e){var t=e*a,n=(e+1)*a-1;if(n=Math.min(n,i-1),"undefined"==typeof s.chunks[e]&&(s.chunks[e]=o(t,n)),"undefined"==typeof s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]}),this._length=i,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new a;Object.defineProperty(o,"length",{get:function(){return this.lengthKnown||this.cacheLength(),this._length}}),Object.defineProperty(o,"chunkSize",{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}});var s={isDevice:!1,contents:o}}else var s={isDevice:!1,url:n};var l=FS.createFile(e,t,s,i,r);s.contents?l.contents=s.contents:s.url&&(l.contents=null,l.url=s.url),Object.defineProperty(l,"usedBytes",{get:function(){return this.contents.length}});var u={},c=Object.keys(l.stream_ops);return c.forEach(function(e){var t=l.stream_ops[e];u[e]=function(){if(!FS.forceLoadFile(l))throw new FS.ErrnoError(ERRNO_CODES.EIO);return t.apply(null,arguments)}}),u.read=function(e,t,n,i,r){if(!FS.forceLoadFile(l))throw new FS.ErrnoError(ERRNO_CODES.EIO);var a=e.node.contents;if(r>=a.length)return 0;var o=Math.min(a.length-r,i);if(assert(o>=0),a.slice)for(var s=0;s<o;s++)t[n+s]=a[r+s];else for(var s=0;s<o;s++)t[n+s]=a.get(r+s);return o},l.stream_ops=u,l},createPreloadedFile:function(e,t,n,i,r,a,o,s,l,u){function c(n){function c(n){u&&u(),s||FS.createDataFile(e,t,n,i,r,l),a&&a(),removeRunDependency(f)}var d=!1;Module.preloadPlugins.forEach(function(e){d||e.canHandle(h)&&(e.handle(n,h,c,function(){o&&o(),removeRunDependency(f)}),d=!0)}),d||c(n)}Browser.init();var h=t?PATH.resolve(PATH.join2(e,t)):e,f=getUniqueRunDependency("cp "+h);addRunDependency(f),"string"==typeof n?Browser.asyncLoad(n,function(e){c(e)},o):c(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,n){t=t||function(){},n=n||function(){};var i=FS.indexedDB();try{var r=i.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return n(e)}r.onupgradeneeded=function(){console.log("creating db");var e=r.result;e.createObjectStore(FS.DB_STORE_NAME)},r.onsuccess=function(){function i(){0==u?t():n()}var a=r.result,o=a.transaction([FS.DB_STORE_NAME],"readwrite"),s=o.objectStore(FS.DB_STORE_NAME),l=0,u=0,c=e.length;e.forEach(function(e){var t=s.put(FS.analyzePath(e).object.contents,e);t.onsuccess=function(){l++,l+u==c&&i()},t.onerror=function(){u++,l+u==c&&i()}}),o.onerror=n},r.onerror=n},loadFilesFromDB:function(e,t,n){t=t||function(){},n=n||function(){};var i=FS.indexedDB();try{var r=i.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return n(e)}r.onupgradeneeded=n,r.onsuccess=function(){function i(){0==u?t():n()}var a=r.result;try{var o=a.transaction([FS.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var s=o.objectStore(FS.DB_STORE_NAME),l=0,u=0,c=e.length;e.forEach(function(e){var t=s.get(e);t.onsuccess=function(){FS.analyzePath(e).exists&&FS.unlink(e),FS.createDataFile(PATH.dirname(e),PATH.basename(e),t.result,!0,!0,!0),l++,l+u==c&&i()},t.onerror=function(){u++,l+u==c&&i()}}),o.onerror=n},r.onerror=n}},SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(e,t){if("/"!==t[0]){var n;if(e===-100)n=FS.cwd();else{var i=FS.getStream(e);if(!i)throw new FS.ErrnoError(ERRNO_CODES.EBADF);n=i.path}t=PATH.join2(n,t)}return t},doStat:function(e,t,n){try{var i=e(t)}catch(e){if(e&&e.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(e.node)))return-ERRNO_CODES.ENOTDIR;throw e}return HEAP32[n>>2]=i.dev,HEAP32[n+4>>2]=0,HEAP32[n+8>>2]=i.ino,HEAP32[n+12>>2]=i.mode,HEAP32[n+16>>2]=i.nlink,HEAP32[n+20>>2]=i.uid,HEAP32[n+24>>2]=i.gid,HEAP32[n+28>>2]=i.rdev,HEAP32[n+32>>2]=0,HEAP32[n+36>>2]=i.size,HEAP32[n+40>>2]=4096,HEAP32[n+44>>2]=i.blocks,HEAP32[n+48>>2]=i.atime.getTime()/1e3|0,HEAP32[n+52>>2]=0,HEAP32[n+56>>2]=i.mtime.getTime()/1e3|0,HEAP32[n+60>>2]=0,HEAP32[n+64>>2]=i.ctime.getTime()/1e3|0,HEAP32[n+68>>2]=0,HEAP32[n+72>>2]=i.ino,0},doMsync:function(e,t,n,i){var r=new Uint8Array(HEAPU8.subarray(e,e+n));FS.msync(t,r,0,n,i)},doMkdir:function(e,t){return e=PATH.normalize(e),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),FS.mkdir(e,t,0),0},doMknod:function(e,t,n){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-ERRNO_CODES.EINVAL}return FS.mknod(e,t,n),0},doReadlink:function(e,t,n){if(n<=0)return-ERRNO_CODES.EINVAL;var i=FS.readlink(e);return i=i.slice(0,Math.max(0,n)),writeStringToMemory(i,t,!0),i.length},doAccess:function(e,t){if(t&-8)return-ERRNO_CODES.EINVAL;var n,i=FS.lookupPath(e,{follow:!0});n=i.node;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&FS.nodePermissions(n,r)?-ERRNO_CODES.EACCES:0},doDup:function(e,t,n){var i=FS.getStream(n);return i&&FS.close(i),FS.open(e,t,0,n,n).fd},doReadv:function(e,t,n,i){for(var r=0,a=0;a<n;a++){var o=HEAP32[t+8*a>>2],s=HEAP32[t+(8*a+4)>>2],l=FS.read(e,HEAP8,o,s,i);if(l<0)return-1;if(r+=l,l<s)break}return r},doWritev:function(e,t,n,i){for(var r=0,a=0;a<n;a++){var o=HEAP32[t+8*a>>2],s=HEAP32[t+(8*a+4)>>2],l=FS.write(e,HEAP8,o,s,i);if(l<0)return-1;r+=l}return r},varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},getStreamFromFD:function(){var e=FS.getStream(SYSCALLS.get());if(!e)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return e},getSocketFromFD:function(){var e=SOCKFS.getSocket(SYSCALLS.get());if(!e)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return e},getSocketAddress:function(e){var t=SYSCALLS.get(),n=SYSCALLS.get();if(e&&0===t)return null;var i=__read_sockaddr(t,n);if(i.errno)throw new FS.ErrnoError(i.errno);return i.addr=DNS.lookup_addr(i.addr)||i.addr,i},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return assert(e>=0?0===t:t===-1),e},getZero:function(){assert(0===SYSCALLS.get())}};Module._memcpy=_memcpy;var _cos=Math_cos,_BItoD=!0,_ceilf=Math_ceil,___dso_handle=allocate(1,"i32*",ALLOC_STATIC);if(embind_init_charCodes(),BindingError=Module.BindingError=extendError(Error,"BindingError"),InternalError=Module.InternalError=extendError(Error,"InternalError"),init_emval(),UnboundTypeError=Module.UnboundTypeError=extendError(Error,"UnboundTypeError"),FS.staticInit(),__ATINIT__.unshift(function(){Module.noFSInit||FS.init.initialized||FS.init()}),__ATMAIN__.push(function(){FS.ignorePermissions=!1}),__ATEXIT__.push(function(){FS.quit()}),Module.FS_createFolder=FS.createFolder,Module.FS_createPath=FS.createPath,Module.FS_createDataFile=FS.createDataFile,Module.FS_createPreloadedFile=FS.createPreloadedFile,Module.FS_createLazyFile=FS.createLazyFile,Module.FS_createLink=FS.createLink,Module.FS_createDevice=FS.createDevice,Module.FS_unlink=FS.unlink,__ATINIT__.unshift(function(){TTY.init()}),__ATEXIT__.push(function(){TTY.shutdown()}),ENVIRONMENT_IS_NODE){var fs=require("fs"),NODEJS_PATH=require("path");NODEFS.staticInit()}STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),staticSealed=!0,STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=DYNAMICTOP=Runtime.alignMemory(STACK_MAX),assert(DYNAMIC_BASE<TOTAL_MEMORY,"TOTAL_MEMORY not big enough for stack");var cttz_i8=allocate([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",ALLOC_DYNAMIC);Module.asmGlobalArg={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},Module.asmLibraryArg={abort:abort,assert:assert,invoke_iiii:invoke_iiii,invoke_viiiii:invoke_viiiii,invoke_dii:invoke_dii,invoke_vid:invoke_vid,invoke_di:invoke_di,invoke_i:invoke_i,invoke_vi:invoke_vi,invoke_vii:invoke_vii,invoke_ii:invoke_ii,invoke_viii:invoke_viii,invoke_v:invoke_v,invoke_viid:invoke_viid,invoke_iiiii:invoke_iiiii,invoke_viiiiii:invoke_viiiiii,invoke_iii:invoke_iii,invoke_viiii:invoke_viiii,_fabs:_fabs,___syscall221:___syscall221,_sin:_sin,floatReadValueFromPointer:floatReadValueFromPointer,simpleReadValueFromPointer:simpleReadValueFromPointer,integerReadValueFromPointer:integerReadValueFromPointer,__embind_register_memory_view:__embind_register_memory_view,throwInternalError:throwInternalError,get_first_emval:get_first_emval,_abort:_abort,count_emval_handles:count_emval_handles,_pthread_cleanup_push:_pthread_cleanup_push,__embind_register_integer:__embind_register_integer,extendError:extendError,___assert_fail:___assert_fail,init_emval:init_emval,__embind_register_void:__embind_register_void,___cxa_find_matching_catch:___cxa_find_matching_catch,_ceilf:_ceilf,getShiftFromSize:getShiftFromSize,__embind_register_function:__embind_register_function,embind_init_charCodes:embind_init_charCodes,_emscripten_asm_const_33:_emscripten_asm_const_33,throwBindingError:throwBindingError,___setErrNo:___setErrNo,__emval_register:__emval_register,_sbrk:_sbrk,readLatin1String:readLatin1String,___cxa_allocate_exception:___cxa_allocate_exception,_emscripten_memcpy_big:_emscripten_memcpy_big,__embind_register_bool:__embind_register_bool,___resumeException:___resumeException,__ZSt18uncaught_exceptionv:__ZSt18uncaught_exceptionv,_sysconf:_sysconf,_embind_repr:_embind_repr,__embind_register_std_wstring:__embind_register_std_wstring,createNamedFunction:createNamedFunction,__embind_register_emval:__embind_register_emval,_cos:_cos,throwUnboundTypeError:throwUnboundTypeError,_pthread_self:_pthread_self,craftInvokerFunction:craftInvokerFunction,__emval_decref:__emval_decref,_sqrt:_sqrt,__embind_register_float:__embind_register_float,makeLegalFunctionName:makeLegalFunctionName,___syscall54:___syscall54,___unlock:___unlock,heap32VectorToArray:heap32VectorToArray,_pthread_cleanup_pop:_pthread_cleanup_pop,whenDependentTypesAreResolved:whenDependentTypesAreResolved,_exit:_exit,__embind_register_std_string:__embind_register_std_string,new_:new_,___cxa_atexit:___cxa_atexit,registerType:registerType,___cxa_throw:___cxa_throw,__exit:__exit,___lock:___lock,___syscall6:___syscall6,___syscall5:___syscall5,ensureOverloadTable:ensureOverloadTable,__embind_register_constant:__embind_register_constant,_time:_time,requireFunction:requireFunction,runDestructors:runDestructors,getTypeName:getTypeName,_atexit:_atexit,___syscall140:___syscall140,exposePublicSymbol:exposePublicSymbol,_emscripten_asm_const_5:_emscripten_asm_const_5,_emscripten_asm_const_4:_emscripten_asm_const_4,replacePublicSymbol:replacePublicSymbol,___syscall145:___syscall145,___syscall146:___syscall146,STACKTOP:STACKTOP,STACK_MAX:STACK_MAX,tempDoublePtr:tempDoublePtr,ABORT:ABORT,cttz_i8:cttz_i8,___dso_handle:___dso_handle};var asm=function(e,t,n){"use asm";var i=new e.Int8Array(n);var r=new e.Int16Array(n);var a=new e.Int32Array(n);var o=new e.Uint8Array(n);var s=new e.Uint16Array(n);var l=new e.Uint32Array(n);var u=new e.Float32Array(n);var c=new e.Float64Array(n);var h=t.STACKTOP|0;var f=t.STACK_MAX|0;var d=t.tempDoublePtr|0;var p=t.ABORT|0;var g=t.cttz_i8|0;var m=t.___dso_handle|0;var v=0;var _=0;var y=0;var b=0;var w=e.NaN,x=e.Infinity;var E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;var O=0;var L=0;var N=0;var F=0;var D=0;var I=0;var U=0;var H=0;var z=0;var B=0;var j=e.Math.floor;var V=e.Math.abs;var G=e.Math.sqrt;var W=e.Math.pow;var X=e.Math.cos;var Y=e.Math.sin;var q=e.Math.tan;var Z=e.Math.acos;var Q=e.Math.asin;var $=e.Math.atan;var J=e.Math.atan2;var K=e.Math.exp;var ee=e.Math.log;var te=e.Math.ceil;var ne=e.Math.imul;var ie=e.Math.min;var re=e.Math.clz32;var ae=t.abort;var oe=t.assert;var se=t.invoke_iiii;var le=t.invoke_viiiii;var ue=t.invoke_dii;var ce=t.invoke_vid;var he=t.invoke_di;var fe=t.invoke_i;var de=t.invoke_vi;var pe=t.invoke_vii;var ge=t.invoke_ii;var me=t.invoke_viii;var ve=t.invoke_v;var _e=t.invoke_viid;var ye=t.invoke_iiiii;var be=t.invoke_viiiiii;var we=t.invoke_iii;var xe=t.invoke_viiii;var Ee=t._fabs;var ke=t.___syscall221;var Me=t._sin;var Te=t.floatReadValueFromPointer;var Se=t.simpleReadValueFromPointer;var Ae=t.integerReadValueFromPointer;var Re=t.__embind_register_memory_view;var Ce=t.throwInternalError;var Pe=t.get_first_emval;var Oe=t._abort;var Le=t.count_emval_handles;var Ne=t._pthread_cleanup_push;var Fe=t.__embind_register_integer;var De=t.extendError;var Ie=t.___assert_fail;var Ue=t.init_emval;var He=t.__embind_register_void;var ze=t.___cxa_find_matching_catch;var Be=t._ceilf;var je=t.getShiftFromSize;var Ve=t.__embind_register_function;var Ge=t.embind_init_charCodes;var We=t._emscripten_asm_const_33;var Xe=t.throwBindingError;var Ye=t.___setErrNo;var qe=t.__emval_register;var Ze=t._sbrk;var Qe=t.readLatin1String;var $e=t.___cxa_allocate_exception;var Je=t._emscripten_memcpy_big;var Ke=t.__embind_register_bool;var et=t.___resumeException;var tt=t.__ZSt18uncaught_exceptionv;var nt=t._sysconf;var it=t._embind_repr;var rt=t.__embind_register_std_wstring;var at=t.createNamedFunction;var ot=t.__embind_register_emval;var st=t._cos;var lt=t.throwUnboundTypeError;var ut=t._pthread_self;var ct=t.craftInvokerFunction;var ht=t.__emval_decref;var ft=t._sqrt;var dt=t.__embind_register_float;var pt=t.makeLegalFunctionName;var gt=t.___syscall54;var mt=t.___unlock;var vt=t.heap32VectorToArray;var _t=t._pthread_cleanup_pop;var yt=t.whenDependentTypesAreResolved;var bt=t._exit;var wt=t.__embind_register_std_string;var xt=t.new_;var Et=t.___cxa_atexit;var kt=t.registerType;var Mt=t.___cxa_throw;var Tt=t.__exit;var St=t.___lock;var At=t.___syscall6;var Rt=t.___syscall5;var Ct=t.ensureOverloadTable;var Pt=t.__embind_register_constant;var Ot=t._time;var Lt=t.requireFunction;var Nt=t.runDestructors;var Ft=t.getTypeName;var Dt=t._atexit;var It=t.___syscall140;var Ut=t.exposePublicSymbol;var Ht=t._emscripten_asm_const_5;var zt=t._emscripten_asm_const_4;var Bt=t.replacePublicSymbol;var jt=t.___syscall145;var Vt=t.___syscall146;var Gt=0;function Wt(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}M=R+-1|0;if((n|0)>1){u=0;f=p;d=p+(M<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{f=f+(R<<1)|0;d=d+(R<<1)|0}}}d=l+1179664|0;f=R+1|0;x=0-R|0;b=1-R|0;w=~R;y=t+4|0;e:do if((T|0)>1){E=(M|0)>1;u=(a[l+4>>2]|0)+f|0;k=1;n=e+((t<<1)+2)|0;e=p+(f<<1)|0;f=0;t:while(1){if(E){_=1;v=n;m=f;while(1){do if((o[v>>0]|0|0)>(s|0)){r[e>>1]=0;i[u>>0]=0;f=m}else{i[u>>0]=-1;f=r[e+(x<<1)>>1]|0;if(f<<16>>16>0){r[e>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}t=r[e+(b<<1)>>1]|0;p=t<<16>>16;f=r[e+(w<<1)>>1]|0;g=f<<16>>16;n=f<<16>>16>0;if(t<<16>>16<=0){if(n){r[e>>1]=f;f=g*7|0;n=l+1310736+(f+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=l+1310736+(f+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+_;n=l+1310736+(f+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+k;n=l+1310736+(f+-3<<2)|0;if((a[n>>2]|0)<(_|0))a[n>>2]=_;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}f=r[e+-2>>1]|0;if(f<<16>>16>0){r[e>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(_|0)){f=m;break}a[f>>2]=_;f=m;break}else{f=m+1|0;if((m|0)>32767)break t;r[e>>1]=f;a[l+1179664+(m<<2)>>2]=f<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=_;a[l+1310736+(m+2<<2)>>2]=k;a[l+1310736+(m+3<<2)>>2]=_;a[l+1310736+(m+4<<2)>>2]=_;a[l+1310736+(m+5<<2)>>2]=k;a[l+1310736+(m+6<<2)>>2]=k;break}}if(n){f=a[l+1179664+(p+-1<<2)>>2]|0;p=a[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(p|0)){r[e>>1]=p;if((m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(f|0))a[t>>2]=p;n=n+1|0;if((n|0)>=(m|0)){f=p;break}else t=t+4|0}}else f=p}else{r[e>>1]=f;if((f|0)<(p|0)&(m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=f;n=n+1|0;if((n|0)>=(m|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}n=r[e+-2>>1]|0;if(n<<16>>16<=0){r[e>>1]=t;f=p*7|0;n=l+1310736+(f+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=l+1310736+(f+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+_;n=l+1310736+(f+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+k;n=l+1310736+(f+-4<<2)|0;if((a[n>>2]|0)>(_|0))a[n>>2]=_;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}f=a[l+1179664+(p+-1<<2)>>2]|0;p=a[l+1179664+((n<<16>>16)+-1<<2)>>2]|0;if((f|0)>(p|0)){r[e>>1]=p;if((m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(f|0))a[t>>2]=p;n=n+1|0;if((n|0)>=(m|0)){f=p;break}else t=t+4|0}}else f=p}else{r[e>>1]=f;if((f|0)<(p|0)&(m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=f;n=n+1|0;if((n|0)>=(m|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+k;f=m}while(0);_=_+1|0;n=v+2|0;e=e+2|0;u=u+1|0;if((_|0)>=(M|0))break;else{v=n;m=f}}}k=k+1|0;if((k|0)>=(T|0)){p=f;A=52;break e}else{u=u+2|0;n=n+y|0;e=e+4|0}}to(3,3904,S);u=-1}else{p=0;A=52}while(0);if((A|0)==52){e=l+12|0;if((p|0)<1)f=1;else{n=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(n|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((n|0)<(p|0)){n=n+1|0;d=d+4|0}else break}}t=l+8|0;u=f+-1|0;a[t>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[t>>2]|0))}if((p|0)>0){e=0;do{d=(a[l+1179664+(e<<2)>>2]|0)+-1|0;n=e*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(n<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(n+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(n+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(n+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(n+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(n+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(n+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;e=e+1|0}while((e|0)<(p|0))}if((a[t>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[t>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function Xt(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}M=R+-1|0;if((n|0)>1){u=0;f=p;d=p+(M<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{f=f+(R<<1)|0;d=d+(R<<1)|0}}}d=l+1179664|0;f=R+1|0;x=0-R|0;b=1-R|0;w=~R;y=(t<<1)+8|0;e:do if((T|0)>1){E=(M|0)>1;u=(a[l+4>>2]|0)+f|0;k=1;n=e+((t<<2)+4)|0;e=p+(f<<1)|0;f=0;t:while(1){if(E){_=1;v=n;m=f;while(1){do if((o[v+1>>0]|0|0)>(s|0)){r[e>>1]=0;i[u>>0]=0;f=m}else{i[u>>0]=-1;f=r[e+(x<<1)>>1]|0;if(f<<16>>16>0){r[e>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}t=r[e+(b<<1)>>1]|0;p=t<<16>>16;f=r[e+(w<<1)>>1]|0;g=f<<16>>16;n=f<<16>>16>0;if(t<<16>>16<=0){if(n){r[e>>1]=f;f=g*7|0;n=l+1310736+(f+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=l+1310736+(f+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+_;n=l+1310736+(f+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+k;n=l+1310736+(f+-3<<2)|0;if((a[n>>2]|0)<(_|0))a[n>>2]=_;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}f=r[e+-2>>1]|0;if(f<<16>>16>0){r[e>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(_|0)){f=m;break}a[f>>2]=_;f=m;break}else{f=m+1|0;if((m|0)>32767)break t;r[e>>1]=f;a[l+1179664+(m<<2)>>2]=f<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=_;a[l+1310736+(m+2<<2)>>2]=k;a[l+1310736+(m+3<<2)>>2]=_;a[l+1310736+(m+4<<2)>>2]=_;a[l+1310736+(m+5<<2)>>2]=k;a[l+1310736+(m+6<<2)>>2]=k;break}}if(n){f=a[l+1179664+(p+-1<<2)>>2]|0;p=a[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(p|0)){r[e>>1]=p;if((m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(f|0))a[t>>2]=p;n=n+1|0;if((n|0)>=(m|0)){f=p;break}else t=t+4|0}}else f=p}else{r[e>>1]=f;if((f|0)<(p|0)&(m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=f;n=n+1|0;if((n|0)>=(m|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}n=r[e+-2>>1]|0;if(n<<16>>16<=0){r[e>>1]=t;f=p*7|0;n=l+1310736+(f+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=l+1310736+(f+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+_;n=l+1310736+(f+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+k;n=l+1310736+(f+-4<<2)|0;if((a[n>>2]|0)>(_|0))a[n>>2]=_;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}f=a[l+1179664+(p+-1<<2)>>2]|0;p=a[l+1179664+((n<<16>>16)+-1<<2)>>2]|0;if((f|0)>(p|0)){r[e>>1]=p;if((m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(f|0))a[t>>2]=p;n=n+1|0;if((n|0)>=(m|0)){f=p;break}else t=t+4|0}}else f=p}else{r[e>>1]=f;if((f|0)<(p|0)&(m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=f;n=n+1|0;if((n|0)>=(m|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+k;f=m}while(0);_=_+1|0;n=v+4|0;e=e+2|0;u=u+1|0;if((_|0)>=(M|0))break;else{v=n;m=f}}}k=k+1|0;if((k|0)>=(T|0)){p=f;A=52;break e}else{u=u+2|0;n=n+y|0;e=e+4|0}}to(3,3904,S);u=-1}else{p=0;A=52}while(0);if((A|0)==52){e=l+12|0;if((p|0)<1)f=1;else{n=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(n|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((n|0)<(p|0)){n=n+1|0;d=d+4|0}else break}}t=l+8|0;u=f+-1|0;a[t>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[t>>2]|0))}if((p|0)>0){e=0;do{d=(a[l+1179664+(e<<2)>>2]|0)+-1|0;n=e*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(n<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(n+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(n+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(n+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(n+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(n+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(n+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;e=e+1|0}while((e|0)<(p|0))}if((a[t>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[t>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function Yt(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}M=R+-1|0;if((n|0)>1){u=0;f=p;d=p+(M<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{f=f+(R<<1)|0;d=d+(R<<1)|0}}}d=l+1179664|0;f=R+1|0;x=0-R|0;b=1-R|0;w=~R;y=(t<<1)+8|0;e:do if((T|0)>1){E=(M|0)>1;u=(a[l+4>>2]|0)+f|0;k=1;n=e+((t<<2)+4)|0;e=p+(f<<1)|0;f=0;t:while(1){if(E){_=1;v=n;m=f;while(1){do if((o[v>>0]|0|0)>(s|0)){r[e>>1]=0;i[u>>0]=0;f=m}else{i[u>>0]=-1;f=r[e+(x<<1)>>1]|0;if(f<<16>>16>0){r[e>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}t=r[e+(b<<1)>>1]|0;p=t<<16>>16;f=r[e+(w<<1)>>1]|0;g=f<<16>>16;n=f<<16>>16>0;if(t<<16>>16<=0){if(n){r[e>>1]=f;f=g*7|0;n=l+1310736+(f+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=l+1310736+(f+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+_;n=l+1310736+(f+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+k;n=l+1310736+(f+-3<<2)|0;if((a[n>>2]|0)<(_|0))a[n>>2]=_;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}f=r[e+-2>>1]|0;if(f<<16>>16>0){r[e>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(_|0)){f=m;break}a[f>>2]=_;f=m;break}else{f=m+1|0;if((m|0)>32767)break t;r[e>>1]=f;a[l+1179664+(m<<2)>>2]=f<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=_;a[l+1310736+(m+2<<2)>>2]=k;a[l+1310736+(m+3<<2)>>2]=_;a[l+1310736+(m+4<<2)>>2]=_;a[l+1310736+(m+5<<2)>>2]=k;a[l+1310736+(m+6<<2)>>2]=k;break}}if(n){f=a[l+1179664+(p+-1<<2)>>2]|0;p=a[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(p|0)){r[e>>1]=p;if((m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(f|0))a[t>>2]=p;n=n+1|0;if((n|0)>=(m|0)){f=p;break}else t=t+4|0}}else f=p}else{r[e>>1]=f;if((f|0)<(p|0)&(m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=f;n=n+1|0;if((n|0)>=(m|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}n=r[e+-2>>1]|0;if(n<<16>>16<=0){r[e>>1]=t;f=p*7|0;n=l+1310736+(f+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=l+1310736+(f+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+_;n=l+1310736+(f+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+k;n=l+1310736+(f+-4<<2)|0;if((a[n>>2]|0)>(_|0))a[n>>2]=_;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}f=a[l+1179664+(p+-1<<2)>>2]|0;p=a[l+1179664+((n<<16>>16)+-1<<2)>>2]|0;if((f|0)>(p|0)){r[e>>1]=p;if((m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(f|0))a[t>>2]=p;n=n+1|0;if((n|0)>=(m|0)){f=p;break}else t=t+4|0}}else f=p}else{r[e>>1]=f;if((f|0)<(p|0)&(m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=f;n=n+1|0;if((n|0)>=(m|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+k;f=m}while(0);_=_+1|0;n=v+4|0;e=e+2|0;u=u+1|0;if((_|0)>=(M|0))break;else{v=n;m=f}}}k=k+1|0;if((k|0)>=(T|0)){p=f;A=52;break e}else{u=u+2|0;n=n+y|0;e=e+4|0}}to(3,3904,S);u=-1}else{p=0;A=52}while(0);if((A|0)==52){e=l+12|0;if((p|0)<1)f=1;else{
n=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(n|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((n|0)<(p|0)){n=n+1|0;d=d+4|0}else break}}t=l+8|0;u=f+-1|0;a[t>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[t>>2]|0))}if((p|0)>0){e=0;do{d=(a[l+1179664+(e<<2)>>2]|0)+-1|0;n=e*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(n<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(n+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(n+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(n+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(n+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(n+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(n+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;e=e+1|0}while((e|0)<(p|0))}if((a[t>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[t>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function qt(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;g=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=g;d=g+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=s*3|0;M=t+-1|0;if((n|0)>0){u=0;s=g;f=g+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{s=s+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;x=0-t|0;b=1-t|0;w=~t;e:do if((S|0)>1){E=(M|0)>1;p=(a[l+4>>2]|0)+u|0;k=1;d=e+(u*3|0)|0;e=g+(u<<1)|0;s=0;t:while(1){if(E){u=p;y=1;_=d;v=s;while(1){do if(((o[_+1>>0]|0)+(o[_>>0]|0)+(o[_+2>>0]|0)|0)>(T|0)){r[e>>1]=0;i[u>>0]=0;s=v}else{i[u>>0]=-1;s=r[e+(x<<1)>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}p=r[e+(b<<1)>>1]|0;g=p<<16>>16;s=r[e+(w<<1)>>1]|0;m=s<<16>>16;d=s<<16>>16>0;if(p<<16>>16<=0){if(d){r[e>>1]=s;s=m*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=r[e+-2>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(y|0)){s=v;break}a[s>>2]=y;s=v;break}else{s=v+1|0;if((v|0)>32767)break t;r[e>>1]=s;a[l+1179664+(v<<2)>>2]=s<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=y;a[l+1310736+(v+2<<2)>>2]=k;a[l+1310736+(v+3<<2)>>2]=y;a[l+1310736+(v+4<<2)>>2]=y;a[l+1310736+(v+5<<2)>>2]=k;a[l+1310736+(v+6<<2)>>2]=k;break}}if(d){s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+(m+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}d=r[e+-2>>1]|0;if(d<<16>>16<=0){r[e>>1]=p;s=g*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+k;s=v}while(0);y=y+1|0;d=_+3|0;e=e+2|0;u=u+1|0;if((y|0)>=(M|0))break;else{_=d;v=s}}}else u=p;k=k+1|0;if((k|0)>=(S|0)){g=s;R=52;break e}else{p=u+2|0;d=d+6|0;e=e+4|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){e=l+12|0;if((g|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(g|0)){d=d+1|0;f=f+4|0}else break}}p=l+8|0;u=s+-1|0;a[p>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[p>>2]|0))}if((g|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;d=e*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;e=e+1|0}while((e|0)<(g|0))}if((a[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[p>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function Zt(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;g=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=g;d=g+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=s*3|0;M=t+-1|0;if((n|0)>0){u=0;s=g;f=g+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{s=s+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;x=0-t|0;b=1-t|0;w=~t;e:do if((S|0)>1){E=(M|0)>1;p=(a[l+4>>2]|0)+u|0;k=1;d=e+(u<<1)|0;e=g+(u<<1)|0;s=0;t:while(1){if(E){u=p;y=1;_=d;v=s;while(1){g=o[_>>0]|0;m=o[_+1>>0]|0;do if(((g&248)+10+(g<<5&224)+(m>>>3&28)+(m<<3&248)|0)>(T|0)){r[e>>1]=0;i[u>>0]=0;s=v}else{i[u>>0]=-1;s=r[e+(x<<1)>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}p=r[e+(b<<1)>>1]|0;g=p<<16>>16;s=r[e+(w<<1)>>1]|0;m=s<<16>>16;d=s<<16>>16>0;if(p<<16>>16<=0){if(d){r[e>>1]=s;s=m*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=r[e+-2>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(y|0)){s=v;break}a[s>>2]=y;s=v;break}else{s=v+1|0;if((v|0)>32767)break t;r[e>>1]=s;a[l+1179664+(v<<2)>>2]=s<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=y;a[l+1310736+(v+2<<2)>>2]=k;a[l+1310736+(v+3<<2)>>2]=y;a[l+1310736+(v+4<<2)>>2]=y;a[l+1310736+(v+5<<2)>>2]=k;a[l+1310736+(v+6<<2)>>2]=k;break}}if(d){s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+(m+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}d=r[e+-2>>1]|0;if(d<<16>>16<=0){r[e>>1]=p;s=g*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+k;s=v}while(0);y=y+1|0;d=_+2|0;e=e+2|0;u=u+1|0;if((y|0)>=(M|0))break;else{_=d;v=s}}}else u=p;k=k+1|0;if((k|0)>=(S|0)){g=s;R=52;break e}else{p=u+2|0;d=d+4|0;e=e+4|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){e=l+12|0;if((g|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(g|0)){d=d+1|0;f=f+4|0}else break}}p=l+8|0;u=s+-1|0;a[p>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[p>>2]|0))}if((g|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;d=e*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;e=e+1|0}while((e|0)<(g|0))}if((a[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[p>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function Qt(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;g=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=g;d=g+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=s*3|0;M=t+-1|0;if((n|0)>0){u=0;s=g;f=g+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{s=s+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;x=0-t|0;b=1-t|0;w=~t;e:do if((S|0)>1){E=(M|0)>1;p=(a[l+4>>2]|0)+u|0;k=1;d=e+(u<<2)|0;e=g+(u<<1)|0;s=0;t:while(1){if(E){u=p;y=1;_=d;v=s;while(1){do if(((o[_+1>>0]|0)+(o[_>>0]|0)+(o[_+2>>0]|0)|0)>(T|0)){r[e>>1]=0;i[u>>0]=0;s=v}else{i[u>>0]=-1;s=r[e+(x<<1)>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}p=r[e+(b<<1)>>1]|0;g=p<<16>>16;s=r[e+(w<<1)>>1]|0;m=s<<16>>16;d=s<<16>>16>0;if(p<<16>>16<=0){if(d){r[e>>1]=s;s=m*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=r[e+-2>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(y|0)){s=v;break}a[s>>2]=y;s=v;break}else{s=v+1|0;if((v|0)>32767)break t;r[e>>1]=s;a[l+1179664+(v<<2)>>2]=s<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=y;a[l+1310736+(v+2<<2)>>2]=k;a[l+1310736+(v+3<<2)>>2]=y;a[l+1310736+(v+4<<2)>>2]=y;a[l+1310736+(v+5<<2)>>2]=k;a[l+1310736+(v+6<<2)>>2]=k;break}}if(d){s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+(m+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}d=r[e+-2>>1]|0;if(d<<16>>16<=0){r[e>>1]=p;s=g*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+k;s=v}while(0);y=y+1|0;d=_+4|0;e=e+2|0;u=u+1|0;if((y|0)>=(M|0))break;else{_=d;v=s}}}else u=p;k=k+1|0;if((k|0)>=(S|0)){g=s;R=52;break e}else{p=u+2|0;d=d+8|0;e=e+4|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){e=l+12|0;if((g|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(g|0)){d=d+1|0;f=f+4|0}else break}}p=l+8|0;u=s+-1|0;a[p>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[p>>2]|0))}if((g|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;d=e*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;e=e+1|0}while((e|0)<(g|0))}if((a[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[p>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function $t(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;g=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=g;d=g+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=s*3|0;M=t+-1|0;if((n|0)>0){u=0;s=g;f=g+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{s=s+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;x=0-t|0;b=1-t|0;w=~t;e:do if((S|0)>1){E=(M|0)>1;p=(a[l+4>>2]|0)+u|0;k=1;d=e+(u<<1)|0;e=g+(u<<1)|0;s=0;t:while(1){if(E){u=p;y=1;_=d;v=s;while(1){m=o[_>>0]|0;do if(((m&240)+24+(m<<4&240)+((o[_+1>>0]|0)&240)|0)>(T|0)){r[e>>1]=0;i[u>>0]=0;s=v}else{i[u>>0]=-1;s=r[e+(x<<1)>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}p=r[e+(b<<1)>>1]|0;g=p<<16>>16;s=r[e+(w<<1)>>1]|0;m=s<<16>>16;d=s<<16>>16>0;if(p<<16>>16<=0){if(d){r[e>>1]=s;s=m*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=r[e+-2>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(y|0)){s=v;break}a[s>>2]=y;s=v;break}else{s=v+1|0;if((v|0)>32767)break t;r[e>>1]=s;a[l+1179664+(v<<2)>>2]=s<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=y;a[l+1310736+(v+2<<2)>>2]=k;a[l+1310736+(v+3<<2)>>2]=y;a[l+1310736+(v+4<<2)>>2]=y;a[l+1310736+(v+5<<2)>>2]=k;a[l+1310736+(v+6<<2)>>2]=k;break}}if(d){s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+(m+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}d=r[e+-2>>1]|0;if(d<<16>>16<=0){r[e>>1]=p;s=g*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+k;s=v}while(0);y=y+1|0;d=_+2|0;e=e+2|0;u=u+1|0;if((y|0)>=(M|0))break;else{_=d;v=s}}}else u=p;k=k+1|0;if((k|0)>=(S|0)){g=s;R=52;break e}else{p=u+2|0;d=d+4|0;e=e+4|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){e=l+12|0;if((g|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(g|0)){d=d+1|0;f=f+4|0}else break}}p=l+8|0;u=s+-1|0;a[p>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[p>>2]|0))}if((g|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;d=e*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;e=e+1|0}while((e|0)<(g|0))}if((a[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[p>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function Jt(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;g=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=g;d=g+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=s*3|0;M=t+-1|0;if((n|0)>0){u=0;s=g;f=g+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{s=s+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;x=0-t|0;b=1-t|0;w=~t;e:do if((S|0)>1){E=(M|0)>1;p=(a[l+4>>2]|0)+u|0;k=1;d=e+(u<<1)|0;e=g+(u<<1)|0;s=0;t:while(1){if(E){u=p;y=1;_=d;v=s;while(1){g=o[_>>0]|0;m=o[_+1>>0]|0;do if(((g&248)+12+(g<<5&224)+(m>>>3&24)+(m<<2&248)|0)>(T|0)){r[e>>1]=0;i[u>>0]=0;s=v}else{i[u>>0]=-1;s=r[e+(x<<1)>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}p=r[e+(b<<1)>>1]|0;g=p<<16>>16;s=r[e+(w<<1)>>1]|0;m=s<<16>>16;d=s<<16>>16>0;if(p<<16>>16<=0){if(d){r[e>>1]=s;s=m*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=r[e+-2>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(y|0)){s=v;break}a[s>>2]=y;s=v;break}else{s=v+1|0;if((v|0)>32767)break t;r[e>>1]=s;a[l+1179664+(v<<2)>>2]=s<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=y;a[l+1310736+(v+2<<2)>>2]=k;a[l+1310736+(v+3<<2)>>2]=y;a[l+1310736+(v+4<<2)>>2]=y;a[l+1310736+(v+5<<2)>>2]=k;a[l+1310736+(v+6<<2)>>2]=k;break}}if(d){s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+(m+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}d=r[e+-2>>1]|0;if(d<<16>>16<=0){r[e>>1]=p;s=g*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+k;s=v}while(0);y=y+1|0;d=_+2|0;e=e+2|0;u=u+1|0;if((y|0)>=(M|0))break;else{_=d;v=s}}}else u=p;k=k+1|0;if((k|0)>=(S|0)){g=s;R=52;break e}else{p=u+2|0;d=d+4|0;e=e+4|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){e=l+12|0;if((g|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(g|0)){d=d+1|0;f=f+4|0}else break}}p=l+8|0;u=s+-1|0;a[p>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[p>>2]|0))}if((g|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;d=e*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;e=e+1|0}while((e|0)<(g|0))}if((a[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[p>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function Kt(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;g=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=g;d=g+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=s*3|0;M=t+-1|0;if((n|0)>0){u=0;s=g;f=g+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{s=s+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;x=0-t|0;b=1-t|0;w=~t;e:do if((S|0)>1){E=(M|0)>1;p=(a[l+4>>2]|0)+u|0;k=1;d=e+(u<<2)|0;e=g+(u<<1)|0;s=0;t:while(1){if(E){u=p;y=1;_=d;v=s;while(1){do if(((o[_+2>>0]|0)+(o[_+1>>0]|0)+(o[_+3>>0]|0)|0)>(T|0)){r[e>>1]=0;i[u>>0]=0;s=v}else{i[u>>0]=-1;s=r[e+(x<<1)>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}p=r[e+(b<<1)>>1]|0;g=p<<16>>16;s=r[e+(w<<1)>>1]|0;m=s<<16>>16;d=s<<16>>16>0;if(p<<16>>16<=0){if(d){r[e>>1]=s;s=m*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=r[e+-2>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(y|0)){s=v;break}a[s>>2]=y;s=v;break}else{s=v+1|0;if((v|0)>32767)break t;r[e>>1]=s;a[l+1179664+(v<<2)>>2]=s<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=y;a[l+1310736+(v+2<<2)>>2]=k;a[l+1310736+(v+3<<2)>>2]=y;a[l+1310736+(v+4<<2)>>2]=y;a[l+1310736+(v+5<<2)>>2]=k;a[l+1310736+(v+6<<2)>>2]=k;break}}if(d){s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+(m+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}d=r[e+-2>>1]|0;if(d<<16>>16<=0){r[e>>1]=p;s=g*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+k;s=v}while(0);y=y+1|0;d=_+4|0;e=e+2|0;u=u+1|0;if((y|0)>=(M|0))break;else{_=d;v=s}}}else u=p;k=k+1|0;if((k|0)>=(S|0)){g=s;R=52;break e}else{p=u+2|0;d=d+8|0;e=e+4|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){e=l+12|0;if((g|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(g|0)){d=d+1|0;f=f+4|0}else break}}p=l+8|0;u=s+-1|0;a[p>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[p>>2]|0))}if((g|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;d=e*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;e=e+1|0}while((e|0)<(g|0))}if((a[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[p>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function en(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;p=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=p;d=p+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=t+-1|0;if((n|0)>0){u=0;f=p;d=p+(T<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{f=f+(t<<1)|0;d=d+(t<<1)|0}}}d=l+1179664|0;u=t+1|0;E=0-t|0;w=1-t|0;x=~t;e:do if((S|0)>1){k=(T|0)>1;g=(a[l+4>>2]|0)+u|0;M=1;e=e+u|0;p=p+(u<<1)|0;f=0;t:while(1){if(k){u=g;b=1;y=e;_=f;while(1){do if((o[y>>0]|0|0)>(s|0)){r[p>>1]=0;i[u>>0]=0;f=_}else{i[u>>0]=-1;f=r[p+(E<<1)>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}g=r[p+(w<<1)>>1]|0;m=g<<16>>16;f=r[p+(x<<1)>>1]|0;v=f<<16>>16;e=f<<16>>16>0;if(g<<16>>16<=0){if(e){r[p>>1]=f;f=v*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-3<<2)|0;if((a[e>>2]|0)<(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=r[p+-2>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(b|0)){f=_;break}a[f>>2]=b;f=_;break}else{f=_+1|0;if((_|0)>32767)break t;r[p>>1]=f;a[l+1179664+(_<<2)>>2]=f<<16>>16;_=_*7|0;a[l+1310736+(_<<2)>>2]=1;a[l+1310736+(_+1<<2)>>2]=b;a[l+1310736+(_+2<<2)>>2]=M;a[l+1310736+(_+3<<2)>>2]=b;a[l+1310736+(_+4<<2)>>2]=b;a[l+1310736+(_+5<<2)>>2]=M;a[l+1310736+(_+6<<2)>>2]=M;break}}if(e){f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(v+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}e=r[p+-2>>1]|0;if(e<<16>>16<=0){r[p>>1]=g;f=m*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-4<<2)|0;if((a[e>>2]|0)>(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;
if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+M;f=_}while(0);b=b+1|0;e=y+1|0;p=p+2|0;u=u+1|0;if((b|0)>=(T|0))break;else{y=e;_=f}}}else u=g;M=M+1|0;if((M|0)>=(S|0)){m=f;R=52;break e}else{g=u+2|0;e=e+2|0;p=p+4|0}}to(3,3904,A);u=-1}else{m=0;R=52}while(0);if((R|0)==52){p=l+12|0;if((m|0)<1)f=1;else{e=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((e|0)<(m|0)){e=e+1|0;d=d+4|0}else break}}g=l+8|0;u=f+-1|0;a[g>>2]=u;if(u){Xu(p|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[g>>2]|0))}if((m|0)>0){p=0;do{d=(a[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(e+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(e+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(e+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(e+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;p=p+1|0}while((p|0)<(m|0))}if((a[g>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[g>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function tn(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;p=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=p;d=p+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=t+-1|0;if((n|0)>0){u=0;f=p;d=p+(T<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{f=f+(t<<1)|0;d=d+(t<<1)|0}}}d=l+1179664|0;u=t+1|0;E=0-t|0;w=1-t|0;x=~t;e:do if((S|0)>1){k=(T|0)>1;g=(a[l+4>>2]|0)+u|0;M=1;e=e+(u<<1)|0;p=p+(u<<1)|0;f=0;t:while(1){if(k){u=g;b=1;y=e;_=f;while(1){do if((o[y+1>>0]|0|0)>(s|0)){r[p>>1]=0;i[u>>0]=0;f=_}else{i[u>>0]=-1;f=r[p+(E<<1)>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}g=r[p+(w<<1)>>1]|0;m=g<<16>>16;f=r[p+(x<<1)>>1]|0;v=f<<16>>16;e=f<<16>>16>0;if(g<<16>>16<=0){if(e){r[p>>1]=f;f=v*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-3<<2)|0;if((a[e>>2]|0)<(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=r[p+-2>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(b|0)){f=_;break}a[f>>2]=b;f=_;break}else{f=_+1|0;if((_|0)>32767)break t;r[p>>1]=f;a[l+1179664+(_<<2)>>2]=f<<16>>16;_=_*7|0;a[l+1310736+(_<<2)>>2]=1;a[l+1310736+(_+1<<2)>>2]=b;a[l+1310736+(_+2<<2)>>2]=M;a[l+1310736+(_+3<<2)>>2]=b;a[l+1310736+(_+4<<2)>>2]=b;a[l+1310736+(_+5<<2)>>2]=M;a[l+1310736+(_+6<<2)>>2]=M;break}}if(e){f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(v+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}e=r[p+-2>>1]|0;if(e<<16>>16<=0){r[p>>1]=g;f=m*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-4<<2)|0;if((a[e>>2]|0)>(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+M;f=_}while(0);b=b+1|0;e=y+2|0;p=p+2|0;u=u+1|0;if((b|0)>=(T|0))break;else{y=e;_=f}}}else u=g;M=M+1|0;if((M|0)>=(S|0)){m=f;R=52;break e}else{g=u+2|0;e=e+4|0;p=p+4|0}}to(3,3904,A);u=-1}else{m=0;R=52}while(0);if((R|0)==52){p=l+12|0;if((m|0)<1)f=1;else{e=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((e|0)<(m|0)){e=e+1|0;d=d+4|0}else break}}g=l+8|0;u=f+-1|0;a[g>>2]=u;if(u){Xu(p|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[g>>2]|0))}if((m|0)>0){p=0;do{d=(a[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(e+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(e+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(e+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(e+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;p=p+1|0}while((p|0)<(m|0))}if((a[g>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[g>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function nn(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;p=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=p;d=p+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=t+-1|0;if((n|0)>0){u=0;f=p;d=p+(T<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{f=f+(t<<1)|0;d=d+(t<<1)|0}}}d=l+1179664|0;u=t+1|0;E=0-t|0;w=1-t|0;x=~t;e:do if((S|0)>1){k=(T|0)>1;g=(a[l+4>>2]|0)+u|0;M=1;e=e+(u<<1)|0;p=p+(u<<1)|0;f=0;t:while(1){if(k){u=g;b=1;y=e;_=f;while(1){do if((o[y>>0]|0|0)>(s|0)){r[p>>1]=0;i[u>>0]=0;f=_}else{i[u>>0]=-1;f=r[p+(E<<1)>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}g=r[p+(w<<1)>>1]|0;m=g<<16>>16;f=r[p+(x<<1)>>1]|0;v=f<<16>>16;e=f<<16>>16>0;if(g<<16>>16<=0){if(e){r[p>>1]=f;f=v*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-3<<2)|0;if((a[e>>2]|0)<(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=r[p+-2>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(b|0)){f=_;break}a[f>>2]=b;f=_;break}else{f=_+1|0;if((_|0)>32767)break t;r[p>>1]=f;a[l+1179664+(_<<2)>>2]=f<<16>>16;_=_*7|0;a[l+1310736+(_<<2)>>2]=1;a[l+1310736+(_+1<<2)>>2]=b;a[l+1310736+(_+2<<2)>>2]=M;a[l+1310736+(_+3<<2)>>2]=b;a[l+1310736+(_+4<<2)>>2]=b;a[l+1310736+(_+5<<2)>>2]=M;a[l+1310736+(_+6<<2)>>2]=M;break}}if(e){f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(v+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}e=r[p+-2>>1]|0;if(e<<16>>16<=0){r[p>>1]=g;f=m*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-4<<2)|0;if((a[e>>2]|0)>(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+M;f=_}while(0);b=b+1|0;e=y+2|0;p=p+2|0;u=u+1|0;if((b|0)>=(T|0))break;else{y=e;_=f}}}else u=g;M=M+1|0;if((M|0)>=(S|0)){m=f;R=52;break e}else{g=u+2|0;e=e+4|0;p=p+4|0}}to(3,3904,A);u=-1}else{m=0;R=52}while(0);if((R|0)==52){p=l+12|0;if((m|0)<1)f=1;else{e=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((e|0)<(m|0)){e=e+1|0;d=d+4|0}else break}}g=l+8|0;u=f+-1|0;a[g>>2]=u;if(u){Xu(p|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[g>>2]|0))}if((m|0)>0){p=0;do{d=(a[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(e+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(e+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(e+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(e+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;p=p+1|0}while((p|0)<(m|0))}if((a[g>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[g>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function rn(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;p=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=p;d=p+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=t+-1|0;if((n|0)>0){u=0;f=p;d=p+(T<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{f=f+(t<<1)|0;d=d+(t<<1)|0}}}d=l+1179664|0;f=t+1|0;E=0-t|0;w=1-t|0;x=~t;e:do if((S|0)>1){k=(T|0)>1;u=(a[l+4>>2]|0)+f|0;M=1;e=e+f|0;p=p+(f<<1)|0;s=s+f|0;f=0;t:while(1){if(k){b=1;y=e;_=f;while(1){do if((o[y>>0]|0)>(o[s>>0]|0)){r[p>>1]=0;i[u>>0]=0;f=_}else{i[u>>0]=-1;f=r[p+(E<<1)>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}g=r[p+(w<<1)>>1]|0;m=g<<16>>16;f=r[p+(x<<1)>>1]|0;v=f<<16>>16;e=f<<16>>16>0;if(g<<16>>16<=0){if(e){r[p>>1]=f;f=v*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-3<<2)|0;if((a[e>>2]|0)<(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=r[p+-2>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(b|0)){f=_;break}a[f>>2]=b;f=_;break}else{f=_+1|0;if((_|0)>32767)break t;r[p>>1]=f;a[l+1179664+(_<<2)>>2]=f<<16>>16;_=_*7|0;a[l+1310736+(_<<2)>>2]=1;a[l+1310736+(_+1<<2)>>2]=b;a[l+1310736+(_+2<<2)>>2]=M;a[l+1310736+(_+3<<2)>>2]=b;a[l+1310736+(_+4<<2)>>2]=b;a[l+1310736+(_+5<<2)>>2]=M;a[l+1310736+(_+6<<2)>>2]=M;break}}if(e){f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(v+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}e=r[p+-2>>1]|0;if(e<<16>>16<=0){r[p>>1]=g;f=m*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-4<<2)|0;if((a[e>>2]|0)>(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+M;f=_}while(0);b=b+1|0;e=y+1|0;s=s+1|0;p=p+2|0;u=u+1|0;if((b|0)>=(T|0))break;else{y=e;_=f}}}M=M+1|0;if((M|0)>=(S|0)){g=f;R=52;break e}else{u=u+2|0;e=e+2|0;p=p+4|0;s=s+2|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){p=l+12|0;if((g|0)<1)f=1;else{e=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((e|0)<(g|0)){e=e+1|0;d=d+4|0}else break}}s=l+8|0;u=f+-1|0;a[s>>2]=u;if(u){Xu(p|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[s>>2]|0))}if((g|0)>0){p=0;do{d=(a[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(e+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(e+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(e+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(e+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;p=p+1|0}while((p|0)<(g|0))}if((a[s>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[s>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function an(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}k=s*3|0;M=R+-1|0;if((n|0)>1){u=0;s=p;f=p+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{s=s+(R<<1)|0;f=f+(R<<1)|0}}}f=l+1179664|0;s=R+1|0;w=0-R|0;y=1-R|0;b=~R;_=(t*3|0)+12|0;e:do if((T|0)>1){x=(M|0)>1;u=(a[l+4>>2]|0)+s|0;E=1;d=e+((t*6|0)+6)|0;n=p+(s<<1)|0;s=0;t:while(1){if(x){v=1;m=d;g=s;while(1){do if(((o[m+1>>0]|0)+(o[m>>0]|0)+(o[m+2>>0]|0)|0)>(k|0)){i[u>>0]=-1;s=r[n+(w<<1)>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}e=r[n+(y<<1)>>1]|0;t=e<<16>>16;s=r[n+(b<<1)>>1]|0;p=s<<16>>16;d=s<<16>>16>0;if(e<<16>>16<=0){if(d){r[n>>1]=s;s=p*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=r[n+-2>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(v|0)){s=g;break}a[s>>2]=v;s=g;break}else{s=g+1|0;if((g|0)>32767)break t;r[n>>1]=s;a[l+1179664+(g<<2)>>2]=s<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=v;a[l+1310736+(g+2<<2)>>2]=E;a[l+1310736+(g+3<<2)>>2]=v;a[l+1310736+(g+4<<2)>>2]=v;a[l+1310736+(g+5<<2)>>2]=E;a[l+1310736+(g+6<<2)>>2]=E;break}}if(d){s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(p+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}d=r[n+-2>>1]|0;if(d<<16>>16<=0){r[n>>1]=e;s=t*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+E;s=g}else{r[n>>1]=0;i[u>>0]=0;s=g}while(0);v=v+1|0;d=m+6|0;n=n+2|0;u=u+1|0;if((v|0)>=(M|0))break;else{m=d;g=s}}}E=E+1|0;if((E|0)>=(T|0)){t=s;A=52;break e}else{u=u+2|0;d=d+_|0;n=n+4|0}}to(3,3904,S);u=-1}else{t=0;A=52}while(0);if((A|0)==52){n=l+12|0;if((t|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(t|0)){d=d+1|0;f=f+4|0}else break}}e=l+8|0;u=s+-1|0;a[e>>2]=u;if(u){Xu(n|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{f=(a[l+1179664+(n<<2)>>2]|0)+-1|0;d=n*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[e>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function on(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}k=s*3|0;M=R+-1|0;if((n|0)>1){u=0;s=p;f=p+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{s=s+(R<<1)|0;f=f+(R<<1)|0}}}f=l+1179664|0;s=R+1|0;w=0-R|0;y=1-R|0;b=~R;_=(t<<1)+8|0;e:do if((T|0)>1){x=(M|0)>1;u=(a[l+4>>2]|0)+s|0;E=1;d=e+((t<<2)+4)|0;n=p+(s<<1)|0;s=0;t:while(1){if(x){v=1;m=d;g=s;while(1){t=o[m>>0]|0;p=o[m+1>>0]|0;do if(((t&248)+10+(t<<5&224)+(p>>>3&28)+(p<<3&248)|0)>(k|0)){i[u>>0]=-1;s=r[n+(w<<1)>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}e=r[n+(y<<1)>>1]|0;t=e<<16>>16;s=r[n+(b<<1)>>1]|0;p=s<<16>>16;d=s<<16>>16>0;if(e<<16>>16<=0){if(d){r[n>>1]=s;s=p*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=r[n+-2>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(v|0)){s=g;break}a[s>>2]=v;s=g;break}else{s=g+1|0;if((g|0)>32767)break t;r[n>>1]=s;a[l+1179664+(g<<2)>>2]=s<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=v;a[l+1310736+(g+2<<2)>>2]=E;a[l+1310736+(g+3<<2)>>2]=v;a[l+1310736+(g+4<<2)>>2]=v;a[l+1310736+(g+5<<2)>>2]=E;a[l+1310736+(g+6<<2)>>2]=E;break}}if(d){s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(p+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}d=r[n+-2>>1]|0;if(d<<16>>16<=0){r[n>>1]=e;s=t*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+E;s=g}else{r[n>>1]=0;i[u>>0]=0;s=g}while(0);v=v+1|0;d=m+4|0;n=n+2|0;u=u+1|0;if((v|0)>=(M|0))break;else{m=d;g=s}}}E=E+1|0;if((E|0)>=(T|0)){t=s;A=52;break e}else{u=u+2|0;d=d+_|0;n=n+4|0}}to(3,3904,S);u=-1}else{t=0;A=52}while(0);if((A|0)==52){n=l+12|0;if((t|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(t|0)){d=d+1|0;f=f+4|0}else break}}e=l+8|0;u=s+-1|0;a[e>>2]=u;if(u){Xu(n|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{f=(a[l+1179664+(n<<2)>>2]|0)+-1|0;d=n*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[e>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function sn(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}k=s*3|0;M=R+-1|0;if((n|0)>1){u=0;s=p;f=p+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{s=s+(R<<1)|0;f=f+(R<<1)|0}}}f=l+1179664|0;s=R+1|0;w=0-R|0;y=1-R|0;b=~R;_=(t<<2)+16|0;e:do if((T|0)>1){x=(M|0)>1;u=(a[l+4>>2]|0)+s|0;E=1;d=e+((t<<3)+8)|0;n=p+(s<<1)|0;s=0;t:while(1){if(x){v=1;m=d;g=s;while(1){do if(((o[m+1>>0]|0)+(o[m>>0]|0)+(o[m+2>>0]|0)|0)>(k|0)){i[u>>0]=-1;s=r[n+(w<<1)>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}e=r[n+(y<<1)>>1]|0;t=e<<16>>16;s=r[n+(b<<1)>>1]|0;p=s<<16>>16;d=s<<16>>16>0;if(e<<16>>16<=0){if(d){r[n>>1]=s;s=p*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=r[n+-2>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(v|0)){s=g;break}a[s>>2]=v;s=g;break}else{s=g+1|0;if((g|0)>32767)break t;r[n>>1]=s;a[l+1179664+(g<<2)>>2]=s<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=v;a[l+1310736+(g+2<<2)>>2]=E;a[l+1310736+(g+3<<2)>>2]=v;a[l+1310736+(g+4<<2)>>2]=v;a[l+1310736+(g+5<<2)>>2]=E;a[l+1310736+(g+6<<2)>>2]=E;break}}if(d){s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(p+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}d=r[n+-2>>1]|0;if(d<<16>>16<=0){r[n>>1]=e;s=t*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+E;s=g}else{r[n>>1]=0;i[u>>0]=0;s=g}while(0);v=v+1|0;d=m+8|0;n=n+2|0;u=u+1|0;if((v|0)>=(M|0))break;else{m=d;g=s}}}E=E+1|0;if((E|0)>=(T|0)){t=s;A=52;break e}else{u=u+2|0;d=d+_|0;n=n+4|0}}to(3,3904,S);u=-1}else{t=0;A=52}while(0);if((A|0)==52){n=l+12|0;if((t|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(t|0)){d=d+1|0;f=f+4|0}else break}}e=l+8|0;u=s+-1|0;a[e>>2]=u;if(u){Xu(n|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{f=(a[l+1179664+(n<<2)>>2]|0)+-1|0;d=n*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[e>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function ln(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}k=s*3|0;M=R+-1|0;if((n|0)>1){u=0;s=p;f=p+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{s=s+(R<<1)|0;f=f+(R<<1)|0}}}f=l+1179664|0;s=R+1|0;w=0-R|0;y=1-R|0;b=~R;_=(t<<1)+8|0;e:do if((T|0)>1){x=(M|0)>1;u=(a[l+4>>2]|0)+s|0;E=1;d=e+((t<<2)+4)|0;n=p+(s<<1)|0;s=0;t:while(1){if(x){v=1;m=d;g=s;while(1){p=o[m>>0]|0;do if(((p&240)+24+(p<<4&240)+((o[m+1>>0]|0)&240)|0)>(k|0)){i[u>>0]=-1;s=r[n+(w<<1)>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}e=r[n+(y<<1)>>1]|0;t=e<<16>>16;s=r[n+(b<<1)>>1]|0;p=s<<16>>16;d=s<<16>>16>0;if(e<<16>>16<=0){if(d){r[n>>1]=s;s=p*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=r[n+-2>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(v|0)){s=g;break}a[s>>2]=v;s=g;break}else{s=g+1|0;if((g|0)>32767)break t;r[n>>1]=s;a[l+1179664+(g<<2)>>2]=s<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=v;a[l+1310736+(g+2<<2)>>2]=E;a[l+1310736+(g+3<<2)>>2]=v;a[l+1310736+(g+4<<2)>>2]=v;a[l+1310736+(g+5<<2)>>2]=E;a[l+1310736+(g+6<<2)>>2]=E;break}}if(d){s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(p+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;
if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}d=r[n+-2>>1]|0;if(d<<16>>16<=0){r[n>>1]=e;s=t*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+E;s=g}else{r[n>>1]=0;i[u>>0]=0;s=g}while(0);v=v+1|0;d=m+4|0;n=n+2|0;u=u+1|0;if((v|0)>=(M|0))break;else{m=d;g=s}}}E=E+1|0;if((E|0)>=(T|0)){t=s;A=52;break e}else{u=u+2|0;d=d+_|0;n=n+4|0}}to(3,3904,S);u=-1}else{t=0;A=52}while(0);if((A|0)==52){n=l+12|0;if((t|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(t|0)){d=d+1|0;f=f+4|0}else break}}e=l+8|0;u=s+-1|0;a[e>>2]=u;if(u){Xu(n|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{f=(a[l+1179664+(n<<2)>>2]|0)+-1|0;d=n*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[e>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function un(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}k=s*3|0;M=R+-1|0;if((n|0)>1){u=0;s=p;f=p+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{s=s+(R<<1)|0;f=f+(R<<1)|0}}}f=l+1179664|0;s=R+1|0;w=0-R|0;y=1-R|0;b=~R;_=(t<<1)+8|0;e:do if((T|0)>1){x=(M|0)>1;u=(a[l+4>>2]|0)+s|0;E=1;d=e+((t<<2)+4)|0;n=p+(s<<1)|0;s=0;t:while(1){if(x){v=1;m=d;g=s;while(1){t=o[m>>0]|0;p=o[m+1>>0]|0;do if(((t&248)+12+(t<<5&224)+(p>>>3&24)+(p<<2&248)|0)>(k|0)){i[u>>0]=-1;s=r[n+(w<<1)>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}e=r[n+(y<<1)>>1]|0;t=e<<16>>16;s=r[n+(b<<1)>>1]|0;p=s<<16>>16;d=s<<16>>16>0;if(e<<16>>16<=0){if(d){r[n>>1]=s;s=p*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=r[n+-2>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(v|0)){s=g;break}a[s>>2]=v;s=g;break}else{s=g+1|0;if((g|0)>32767)break t;r[n>>1]=s;a[l+1179664+(g<<2)>>2]=s<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=v;a[l+1310736+(g+2<<2)>>2]=E;a[l+1310736+(g+3<<2)>>2]=v;a[l+1310736+(g+4<<2)>>2]=v;a[l+1310736+(g+5<<2)>>2]=E;a[l+1310736+(g+6<<2)>>2]=E;break}}if(d){s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(p+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}d=r[n+-2>>1]|0;if(d<<16>>16<=0){r[n>>1]=e;s=t*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+E;s=g}else{r[n>>1]=0;i[u>>0]=0;s=g}while(0);v=v+1|0;d=m+4|0;n=n+2|0;u=u+1|0;if((v|0)>=(M|0))break;else{m=d;g=s}}}E=E+1|0;if((E|0)>=(T|0)){t=s;A=52;break e}else{u=u+2|0;d=d+_|0;n=n+4|0}}to(3,3904,S);u=-1}else{t=0;A=52}while(0);if((A|0)==52){n=l+12|0;if((t|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(t|0)){d=d+1|0;f=f+4|0}else break}}e=l+8|0;u=s+-1|0;a[e>>2]=u;if(u){Xu(n|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{f=(a[l+1179664+(n<<2)>>2]|0)+-1|0;d=n*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[e>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function cn(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}k=s*3|0;M=R+-1|0;if((n|0)>1){u=0;s=p;f=p+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{s=s+(R<<1)|0;f=f+(R<<1)|0}}}f=l+1179664|0;s=R+1|0;w=0-R|0;y=1-R|0;b=~R;_=(t<<2)+16|0;e:do if((T|0)>1){x=(M|0)>1;u=(a[l+4>>2]|0)+s|0;E=1;d=e+((t<<3)+8)|0;n=p+(s<<1)|0;s=0;t:while(1){if(x){v=1;m=d;g=s;while(1){do if(((o[m+2>>0]|0)+(o[m+1>>0]|0)+(o[m+3>>0]|0)|0)>(k|0)){i[u>>0]=-1;s=r[n+(w<<1)>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}e=r[n+(y<<1)>>1]|0;t=e<<16>>16;s=r[n+(b<<1)>>1]|0;p=s<<16>>16;d=s<<16>>16>0;if(e<<16>>16<=0){if(d){r[n>>1]=s;s=p*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=r[n+-2>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(v|0)){s=g;break}a[s>>2]=v;s=g;break}else{s=g+1|0;if((g|0)>32767)break t;r[n>>1]=s;a[l+1179664+(g<<2)>>2]=s<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=v;a[l+1310736+(g+2<<2)>>2]=E;a[l+1310736+(g+3<<2)>>2]=v;a[l+1310736+(g+4<<2)>>2]=v;a[l+1310736+(g+5<<2)>>2]=E;a[l+1310736+(g+6<<2)>>2]=E;break}}if(d){s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(p+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}d=r[n+-2>>1]|0;if(d<<16>>16<=0){r[n>>1]=e;s=t*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+E;s=g}else{r[n>>1]=0;i[u>>0]=0;s=g}while(0);v=v+1|0;d=m+8|0;n=n+2|0;u=u+1|0;if((v|0)>=(M|0))break;else{m=d;g=s}}}E=E+1|0;if((E|0)>=(T|0)){t=s;A=52;break e}else{u=u+2|0;d=d+_|0;n=n+4|0}}to(3,3904,S);u=-1}else{t=0;A=52}while(0);if((A|0)==52){n=l+12|0;if((t|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(t|0)){d=d+1|0;f=f+4|0}else break}}e=l+8|0;u=s+-1|0;a[e>>2]=u;if(u){Xu(n|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{f=(a[l+1179664+(n<<2)>>2]|0)+-1|0;d=n*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[e>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function hn(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}M=R+-1|0;if((n|0)>1){u=0;f=p;d=p+(M<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{f=f+(R<<1)|0;d=d+(R<<1)|0}}}d=l+1179664|0;f=R+1|0;x=0-R|0;b=1-R|0;w=~R;y=t+4|0;e:do if((T|0)>1){E=(M|0)>1;u=(a[l+4>>2]|0)+f|0;k=1;n=e+((t<<1)+2)|0;e=p+(f<<1)|0;f=0;t:while(1){if(E){_=1;v=n;m=f;while(1){do if((o[v>>0]|0|0)>(s|0)){i[u>>0]=-1;f=r[e+(x<<1)>>1]|0;if(f<<16>>16>0){r[e>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}t=r[e+(b<<1)>>1]|0;p=t<<16>>16;f=r[e+(w<<1)>>1]|0;g=f<<16>>16;n=f<<16>>16>0;if(t<<16>>16<=0){if(n){r[e>>1]=f;f=g*7|0;n=l+1310736+(f+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=l+1310736+(f+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+_;n=l+1310736+(f+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+k;n=l+1310736+(f+-3<<2)|0;if((a[n>>2]|0)<(_|0))a[n>>2]=_;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}f=r[e+-2>>1]|0;if(f<<16>>16>0){r[e>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(_|0)){f=m;break}a[f>>2]=_;f=m;break}else{f=m+1|0;if((m|0)>32767)break t;r[e>>1]=f;a[l+1179664+(m<<2)>>2]=f<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=_;a[l+1310736+(m+2<<2)>>2]=k;a[l+1310736+(m+3<<2)>>2]=_;a[l+1310736+(m+4<<2)>>2]=_;a[l+1310736+(m+5<<2)>>2]=k;a[l+1310736+(m+6<<2)>>2]=k;break}}if(n){f=a[l+1179664+(p+-1<<2)>>2]|0;p=a[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(p|0)){r[e>>1]=p;if((m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(f|0))a[t>>2]=p;n=n+1|0;if((n|0)>=(m|0)){f=p;break}else t=t+4|0}}else f=p}else{r[e>>1]=f;if((f|0)<(p|0)&(m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=f;n=n+1|0;if((n|0)>=(m|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}n=r[e+-2>>1]|0;if(n<<16>>16<=0){r[e>>1]=t;f=p*7|0;n=l+1310736+(f+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=l+1310736+(f+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+_;n=l+1310736+(f+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+k;n=l+1310736+(f+-4<<2)|0;if((a[n>>2]|0)>(_|0))a[n>>2]=_;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}f=a[l+1179664+(p+-1<<2)>>2]|0;p=a[l+1179664+((n<<16>>16)+-1<<2)>>2]|0;if((f|0)>(p|0)){r[e>>1]=p;if((m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(f|0))a[t>>2]=p;n=n+1|0;if((n|0)>=(m|0)){f=p;break}else t=t+4|0}}else f=p}else{r[e>>1]=f;if((f|0)<(p|0)&(m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=f;n=n+1|0;if((n|0)>=(m|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+k;f=m}else{r[e>>1]=0;i[u>>0]=0;f=m}while(0);_=_+1|0;n=v+2|0;e=e+2|0;u=u+1|0;if((_|0)>=(M|0))break;else{v=n;m=f}}}k=k+1|0;if((k|0)>=(T|0)){p=f;A=52;break e}else{u=u+2|0;n=n+y|0;e=e+4|0}}to(3,3904,S);u=-1}else{p=0;A=52}while(0);if((A|0)==52){e=l+12|0;if((p|0)<1)f=1;else{n=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(n|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((n|0)<(p|0)){n=n+1|0;d=d+4|0}else break}}t=l+8|0;u=f+-1|0;a[t>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[t>>2]|0))}if((p|0)>0){e=0;do{d=(a[l+1179664+(e<<2)>>2]|0)+-1|0;n=e*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(n<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(n+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(n+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(n+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(n+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(n+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(n+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;e=e+1|0}while((e|0)<(p|0))}if((a[t>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[t>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function fn(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}M=R+-1|0;if((n|0)>1){u=0;f=p;d=p+(M<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{f=f+(R<<1)|0;d=d+(R<<1)|0}}}d=l+1179664|0;f=R+1|0;x=0-R|0;b=1-R|0;w=~R;y=(t<<1)+8|0;e:do if((T|0)>1){E=(M|0)>1;u=(a[l+4>>2]|0)+f|0;k=1;n=e+((t<<2)+4)|0;e=p+(f<<1)|0;f=0;t:while(1){if(E){_=1;v=n;m=f;while(1){do if((o[v+1>>0]|0|0)>(s|0)){i[u>>0]=-1;f=r[e+(x<<1)>>1]|0;if(f<<16>>16>0){r[e>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}t=r[e+(b<<1)>>1]|0;p=t<<16>>16;f=r[e+(w<<1)>>1]|0;g=f<<16>>16;n=f<<16>>16>0;if(t<<16>>16<=0){if(n){r[e>>1]=f;f=g*7|0;n=l+1310736+(f+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=l+1310736+(f+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+_;n=l+1310736+(f+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+k;n=l+1310736+(f+-3<<2)|0;if((a[n>>2]|0)<(_|0))a[n>>2]=_;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}f=r[e+-2>>1]|0;if(f<<16>>16>0){r[e>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(_|0)){f=m;break}a[f>>2]=_;f=m;break}else{f=m+1|0;if((m|0)>32767)break t;r[e>>1]=f;a[l+1179664+(m<<2)>>2]=f<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=_;a[l+1310736+(m+2<<2)>>2]=k;a[l+1310736+(m+3<<2)>>2]=_;a[l+1310736+(m+4<<2)>>2]=_;a[l+1310736+(m+5<<2)>>2]=k;a[l+1310736+(m+6<<2)>>2]=k;break}}if(n){f=a[l+1179664+(p+-1<<2)>>2]|0;p=a[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(p|0)){r[e>>1]=p;if((m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(f|0))a[t>>2]=p;n=n+1|0;if((n|0)>=(m|0)){f=p;break}else t=t+4|0}}else f=p}else{r[e>>1]=f;if((f|0)<(p|0)&(m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=f;n=n+1|0;if((n|0)>=(m|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}n=r[e+-2>>1]|0;if(n<<16>>16<=0){r[e>>1]=t;f=p*7|0;n=l+1310736+(f+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=l+1310736+(f+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+_;n=l+1310736+(f+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+k;n=l+1310736+(f+-4<<2)|0;if((a[n>>2]|0)>(_|0))a[n>>2]=_;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}f=a[l+1179664+(p+-1<<2)>>2]|0;p=a[l+1179664+((n<<16>>16)+-1<<2)>>2]|0;if((f|0)>(p|0)){r[e>>1]=p;if((m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(f|0))a[t>>2]=p;n=n+1|0;if((n|0)>=(m|0)){f=p;break}else t=t+4|0}}else f=p}else{r[e>>1]=f;if((f|0)<(p|0)&(m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=f;n=n+1|0;if((n|0)>=(m|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+k;f=m}else{r[e>>1]=0;i[u>>0]=0;f=m}while(0);_=_+1|0;n=v+4|0;e=e+2|0;u=u+1|0;if((_|0)>=(M|0))break;else{v=n;m=f}}}k=k+1|0;if((k|0)>=(T|0)){p=f;A=52;break e}else{u=u+2|0;n=n+y|0;e=e+4|0}}to(3,3904,S);u=-1}else{p=0;A=52}while(0);if((A|0)==52){e=l+12|0;if((p|0)<1)f=1;else{n=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(n|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((n|0)<(p|0)){n=n+1|0;d=d+4|0}else break}}t=l+8|0;u=f+-1|0;a[t>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[t>>2]|0))}if((p|0)>0){e=0;do{d=(a[l+1179664+(e<<2)>>2]|0)+-1|0;n=e*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(n<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(n+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(n+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(n+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(n+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(n+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(n+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;e=e+1|0}while((e|0)<(p|0))}if((a[t>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[t>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function dn(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}M=R+-1|0;if((n|0)>1){u=0;f=p;d=p+(M<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{f=f+(R<<1)|0;d=d+(R<<1)|0}}}d=l+1179664|0;f=R+1|0;x=0-R|0;b=1-R|0;w=~R;y=(t<<1)+8|0;e:do if((T|0)>1){E=(M|0)>1;u=(a[l+4>>2]|0)+f|0;k=1;n=e+((t<<2)+4)|0;e=p+(f<<1)|0;f=0;t:while(1){if(E){_=1;v=n;m=f;while(1){do if((o[v>>0]|0|0)>(s|0)){i[u>>0]=-1;f=r[e+(x<<1)>>1]|0;if(f<<16>>16>0){r[e>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}t=r[e+(b<<1)>>1]|0;p=t<<16>>16;f=r[e+(w<<1)>>1]|0;g=f<<16>>16;n=f<<16>>16>0;if(t<<16>>16<=0){if(n){r[e>>1]=f;f=g*7|0;n=l+1310736+(f+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=l+1310736+(f+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+_;n=l+1310736+(f+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+k;n=l+1310736+(f+-3<<2)|0;if((a[n>>2]|0)<(_|0))a[n>>2]=_;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}f=r[e+-2>>1]|0;if(f<<16>>16>0){r[e>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(_|0)){f=m;break}a[f>>2]=_;f=m;break}else{f=m+1|0;if((m|0)>32767)break t;r[e>>1]=f;a[l+1179664+(m<<2)>>2]=f<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=_;a[l+1310736+(m+2<<2)>>2]=k;a[l+1310736+(m+3<<2)>>2]=_;a[l+1310736+(m+4<<2)>>2]=_;a[l+1310736+(m+5<<2)>>2]=k;a[l+1310736+(m+6<<2)>>2]=k;break}}if(n){f=a[l+1179664+(p+-1<<2)>>2]|0;p=a[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(p|0)){r[e>>1]=p;if((m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(f|0))a[t>>2]=p;n=n+1|0;if((n|0)>=(m|0)){f=p;break}else t=t+4|0}}else f=p}else{r[e>>1]=f;if((f|0)<(p|0)&(m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=f;n=n+1|0;if((n|0)>=(m|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=l+1310736+(f+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+k;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}n=r[e+-2>>1]|0;if(n<<16>>16<=0){r[e>>1]=t;f=p*7|0;n=l+1310736+(f+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=l+1310736+(f+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+_;n=l+1310736+(f+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+k;n=l+1310736+(f+-4<<2)|0;if((a[n>>2]|0)>(_|0))a[n>>2]=_;a[l+1310736+(f+-1<<2)>>2]=k;f=m;break}f=a[l+1179664+(p+-1<<2)>>2]|0;p=a[l+1179664+((n<<16>>16)+-1<<2)>>2]|0;if((f|0)>(p|0)){r[e>>1]=p;if((m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(f|0))a[t>>2]=p;n=n+1|0;if((n|0)>=(m|0)){f=p;break}else t=t+4|0}}else f=p}else{r[e>>1]=f;if((f|0)<(p|0)&(m|0)>0){n=0;t=d;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=f;n=n+1|0;if((n|0)>=(m|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+k;f=m}else{r[e>>1]=0;i[u>>0]=0;f=m}while(0);_=_+1|0;n=v+4|0;e=e+2|0;u=u+1|0;if((_|0)>=(M|0))break;else{v=n;m=f}}}k=k+1|0;if((k|0)>=(T|0)){p=f;A=52;break e}else{u=u+2|0;n=n+y|0;e=e+4|0}}to(3,3904,S);u=-1}else{p=0;A=52}while(0);if((A|0)==52){e=l+12|0;if((p|0)<1)f=1;else{n=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(n|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((n|0)<(p|0)){n=n+1|0;d=d+4|0}else break}}t=l+8|0;u=f+-1|0;a[t>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[t>>2]|0))}if((p|0)>0){e=0;do{d=(a[l+1179664+(e<<2)>>2]|0)+-1|0;n=e*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(n<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(n+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(n+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(n+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(n+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(n+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(n+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;e=e+1|0}while((e|0)<(p|0))}if((a[t>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[t>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function pn(e){e=e|0;var t=0;t=h;h=h+e|0;h=h+15&-16;return t|0}function gn(){return h|0}function mn(e){e=e|0;h=e}function vn(e,t){e=e|0;t=t|0;h=e;f=t}function _n(e,t){e=e|0;t=t|0;if(!v){v=e;_=t}}function yn(e){e=e|0;i[d>>0]=i[e>>0];i[d+1>>0]=i[e+1>>0];i[d+2>>0]=i[e+2>>0];i[d+3>>0]=i[e+3>>0]}function bn(e){e=e|0;i[d>>0]=i[e>>0];i[d+1>>0]=i[e+1>>0];i[d+2>>0]=i[e+2>>0];i[d+3>>0]=i[e+3>>0];i[d+4>>0]=i[e+4>>0];i[d+5>>0]=i[e+5>>0];i[d+6>>0]=i[e+6>>0];i[d+7>>0]=i[e+7>>0]}function wn(e){e=e|0;O=e}function xn(){return O|0}function En(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}x=i*3|0;E=S+-1|0;if((n|0)>1){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{i=i+(S<<1)|0;u=u+(S<<1)|0}}}u=s+1179664|0;y=0-S|0;v=1-S|0;_=~S;m=(t*3|0)+12|0;e:do if((k|0)>1){b=(E|0)>1;w=1;i=e+((t*6|0)+6)|0;f=d+(S+1<<1)|0;l=0;t:while(1){if(b){g=1;p=f;d=l;while(1){do if(((o[i+1>>0]|0)+(o[i>>0]|0)+(o[i+2>>0]|0)|0)>(x|0)){r[p>>1]=0;l=d}else{l=r[p+(y<<1)>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}n=r[p+(v<<1)>>1]|0;e=n<<16>>16;l=r[p+(_<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(n<<16>>16<=0){if(f){r[p>>1]=l;l=t*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=r[p+-2>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=d;break}a[l>>2]=g;l=d;break}else{l=d+1|0;if((d|0)>32767)break t;r[p>>1]=l;a[s+1179664+(d<<2)>>2]=l<<16>>16;d=d*7|0;a[s+1310736+(d<<2)>>2]=1;a[s+1310736+(d+1<<2)>>2]=g;a[s+1310736+(d+2<<2)>>2]=w;a[s+1310736+(d+3<<2)>>2]=g;a[s+1310736+(d+4<<2)>>2]=g;a[s+1310736+(d+5<<2)>>2]=w;a[s+1310736+(d+6<<2)>>2]=w;break}}if(f){l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}f=r[p+-2>>1]|0;if(f<<16>>16<=0){r[p>>1]=n;l=e*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+w;l=d}while(0);g=g+1|0;i=i+6|0;f=p+2|0;if((g|0)>=(E|0))break;else{p=f;d=l}}}w=w+1|0;if((w|0)>=(k|0)){t=l;T=52;break e}else{i=i+m|0;f=f+4|0}}to(3,3904,M);l=-1}else{t=0;T=52}while(0);if((T|0)==52){n=s+12|0;if((t|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=s+8|0;l=i+-1|0;a[e>>2]=l;if(l){Xu(n|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{u=(a[s+1179664+(n<<2)>>2]|0)+-1|0;f=n*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function kn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}x=i*3|0;E=S+-1|0;if((n|0)>1){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{i=i+(S<<1)|0;u=u+(S<<1)|0}}}u=s+1179664|0;y=0-S|0;v=1-S|0;_=~S;m=(t<<1)+8|0;e:do if((k|0)>1){b=(E|0)>1;w=1;i=e+((t<<2)+4)|0;f=d+(S+1<<1)|0;l=0;t:while(1){if(b){g=1;p=f;d=l;while(1){e=o[i>>0]|0;t=o[i+1>>0]|0;do if(((e&248)+10+(e<<5&224)+(t>>>3&28)+(t<<3&248)|0)>(x|0)){r[p>>1]=0;l=d}else{l=r[p+(y<<1)>>1]|0;if(l<<16>>16>0){
r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}n=r[p+(v<<1)>>1]|0;e=n<<16>>16;l=r[p+(_<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(n<<16>>16<=0){if(f){r[p>>1]=l;l=t*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=r[p+-2>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=d;break}a[l>>2]=g;l=d;break}else{l=d+1|0;if((d|0)>32767)break t;r[p>>1]=l;a[s+1179664+(d<<2)>>2]=l<<16>>16;d=d*7|0;a[s+1310736+(d<<2)>>2]=1;a[s+1310736+(d+1<<2)>>2]=g;a[s+1310736+(d+2<<2)>>2]=w;a[s+1310736+(d+3<<2)>>2]=g;a[s+1310736+(d+4<<2)>>2]=g;a[s+1310736+(d+5<<2)>>2]=w;a[s+1310736+(d+6<<2)>>2]=w;break}}if(f){l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}f=r[p+-2>>1]|0;if(f<<16>>16<=0){r[p>>1]=n;l=e*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+w;l=d}while(0);g=g+1|0;i=i+4|0;f=p+2|0;if((g|0)>=(E|0))break;else{p=f;d=l}}}w=w+1|0;if((w|0)>=(k|0)){t=l;T=52;break e}else{i=i+m|0;f=f+4|0}}to(3,3904,M);l=-1}else{t=0;T=52}while(0);if((T|0)==52){n=s+12|0;if((t|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=s+8|0;l=i+-1|0;a[e>>2]=l;if(l){Xu(n|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{u=(a[s+1179664+(n<<2)>>2]|0)+-1|0;f=n*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function Mn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}x=i*3|0;E=S+-1|0;if((n|0)>1){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{i=i+(S<<1)|0;u=u+(S<<1)|0}}}u=s+1179664|0;y=0-S|0;v=1-S|0;_=~S;m=(t<<2)+16|0;e:do if((k|0)>1){b=(E|0)>1;w=1;i=e+((t<<3)+8)|0;f=d+(S+1<<1)|0;l=0;t:while(1){if(b){g=1;p=f;d=l;while(1){do if(((o[i+1>>0]|0)+(o[i>>0]|0)+(o[i+2>>0]|0)|0)>(x|0)){r[p>>1]=0;l=d}else{l=r[p+(y<<1)>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}n=r[p+(v<<1)>>1]|0;e=n<<16>>16;l=r[p+(_<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(n<<16>>16<=0){if(f){r[p>>1]=l;l=t*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=r[p+-2>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=d;break}a[l>>2]=g;l=d;break}else{l=d+1|0;if((d|0)>32767)break t;r[p>>1]=l;a[s+1179664+(d<<2)>>2]=l<<16>>16;d=d*7|0;a[s+1310736+(d<<2)>>2]=1;a[s+1310736+(d+1<<2)>>2]=g;a[s+1310736+(d+2<<2)>>2]=w;a[s+1310736+(d+3<<2)>>2]=g;a[s+1310736+(d+4<<2)>>2]=g;a[s+1310736+(d+5<<2)>>2]=w;a[s+1310736+(d+6<<2)>>2]=w;break}}if(f){l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}f=r[p+-2>>1]|0;if(f<<16>>16<=0){r[p>>1]=n;l=e*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+w;l=d}while(0);g=g+1|0;i=i+8|0;f=p+2|0;if((g|0)>=(E|0))break;else{p=f;d=l}}}w=w+1|0;if((w|0)>=(k|0)){t=l;T=52;break e}else{i=i+m|0;f=f+4|0}}to(3,3904,M);l=-1}else{t=0;T=52}while(0);if((T|0)==52){n=s+12|0;if((t|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=s+8|0;l=i+-1|0;a[e>>2]=l;if(l){Xu(n|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{u=(a[s+1179664+(n<<2)>>2]|0)+-1|0;f=n*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function Tn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}x=i*3|0;E=S+-1|0;if((n|0)>1){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{i=i+(S<<1)|0;u=u+(S<<1)|0}}}u=s+1179664|0;y=0-S|0;v=1-S|0;_=~S;m=(t<<1)+8|0;e:do if((k|0)>1){b=(E|0)>1;w=1;i=e+((t<<2)+4)|0;f=d+(S+1<<1)|0;l=0;t:while(1){if(b){g=1;p=f;d=l;while(1){t=o[i>>0]|0;do if(((t&240)+24+(t<<4&240)+((o[i+1>>0]|0)&240)|0)>(x|0)){r[p>>1]=0;l=d}else{l=r[p+(y<<1)>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}n=r[p+(v<<1)>>1]|0;e=n<<16>>16;l=r[p+(_<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(n<<16>>16<=0){if(f){r[p>>1]=l;l=t*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=r[p+-2>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=d;break}a[l>>2]=g;l=d;break}else{l=d+1|0;if((d|0)>32767)break t;r[p>>1]=l;a[s+1179664+(d<<2)>>2]=l<<16>>16;d=d*7|0;a[s+1310736+(d<<2)>>2]=1;a[s+1310736+(d+1<<2)>>2]=g;a[s+1310736+(d+2<<2)>>2]=w;a[s+1310736+(d+3<<2)>>2]=g;a[s+1310736+(d+4<<2)>>2]=g;a[s+1310736+(d+5<<2)>>2]=w;a[s+1310736+(d+6<<2)>>2]=w;break}}if(f){l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}f=r[p+-2>>1]|0;if(f<<16>>16<=0){r[p>>1]=n;l=e*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+w;l=d}while(0);g=g+1|0;i=i+4|0;f=p+2|0;if((g|0)>=(E|0))break;else{p=f;d=l}}}w=w+1|0;if((w|0)>=(k|0)){t=l;T=52;break e}else{i=i+m|0;f=f+4|0}}to(3,3904,M);l=-1}else{t=0;T=52}while(0);if((T|0)==52){n=s+12|0;if((t|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=s+8|0;l=i+-1|0;a[e>>2]=l;if(l){Xu(n|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{u=(a[s+1179664+(n<<2)>>2]|0)+-1|0;f=n*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function Sn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}x=i*3|0;E=S+-1|0;if((n|0)>1){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{i=i+(S<<1)|0;u=u+(S<<1)|0}}}u=s+1179664|0;y=0-S|0;v=1-S|0;_=~S;m=(t<<1)+8|0;e:do if((k|0)>1){b=(E|0)>1;w=1;i=e+((t<<2)+4)|0;f=d+(S+1<<1)|0;l=0;t:while(1){if(b){g=1;p=f;d=l;while(1){e=o[i>>0]|0;t=o[i+1>>0]|0;do if(((e&248)+12+(e<<5&224)+(t>>>3&24)+(t<<2&248)|0)>(x|0)){r[p>>1]=0;l=d}else{l=r[p+(y<<1)>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}n=r[p+(v<<1)>>1]|0;e=n<<16>>16;l=r[p+(_<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(n<<16>>16<=0){if(f){r[p>>1]=l;l=t*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=r[p+-2>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=d;break}a[l>>2]=g;l=d;break}else{l=d+1|0;if((d|0)>32767)break t;r[p>>1]=l;a[s+1179664+(d<<2)>>2]=l<<16>>16;d=d*7|0;a[s+1310736+(d<<2)>>2]=1;a[s+1310736+(d+1<<2)>>2]=g;a[s+1310736+(d+2<<2)>>2]=w;a[s+1310736+(d+3<<2)>>2]=g;a[s+1310736+(d+4<<2)>>2]=g;a[s+1310736+(d+5<<2)>>2]=w;a[s+1310736+(d+6<<2)>>2]=w;break}}if(f){l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}f=r[p+-2>>1]|0;if(f<<16>>16<=0){r[p>>1]=n;l=e*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+w;l=d}while(0);g=g+1|0;i=i+4|0;f=p+2|0;if((g|0)>=(E|0))break;else{p=f;d=l}}}w=w+1|0;if((w|0)>=(k|0)){t=l;T=52;break e}else{i=i+m|0;f=f+4|0}}to(3,3904,M);l=-1}else{t=0;T=52}while(0);if((T|0)==52){n=s+12|0;if((t|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=s+8|0;l=i+-1|0;a[e>>2]=l;if(l){Xu(n|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{u=(a[s+1179664+(n<<2)>>2]|0)+-1|0;f=n*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function An(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}x=i*3|0;E=S+-1|0;if((n|0)>1){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{i=i+(S<<1)|0;u=u+(S<<1)|0}}}u=s+1179664|0;y=0-S|0;v=1-S|0;_=~S;m=(t<<2)+16|0;e:do if((k|0)>1){b=(E|0)>1;w=1;i=e+((t<<3)+8)|0;f=d+(S+1<<1)|0;l=0;t:while(1){if(b){g=1;p=f;d=l;while(1){do if(((o[i+2>>0]|0)+(o[i+1>>0]|0)+(o[i+3>>0]|0)|0)>(x|0)){r[p>>1]=0;l=d}else{l=r[p+(y<<1)>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}n=r[p+(v<<1)>>1]|0;e=n<<16>>16;l=r[p+(_<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(n<<16>>16<=0){if(f){r[p>>1]=l;l=t*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=r[p+-2>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=d;break}a[l>>2]=g;l=d;break}else{l=d+1|0;if((d|0)>32767)break t;r[p>>1]=l;a[s+1179664+(d<<2)>>2]=l<<16>>16;d=d*7|0;a[s+1310736+(d<<2)>>2]=1;a[s+1310736+(d+1<<2)>>2]=g;a[s+1310736+(d+2<<2)>>2]=w;a[s+1310736+(d+3<<2)>>2]=g;a[s+1310736+(d+4<<2)>>2]=g;a[s+1310736+(d+5<<2)>>2]=w;a[s+1310736+(d+6<<2)>>2]=w;break}}if(f){l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}f=r[p+-2>>1]|0;if(f<<16>>16<=0){r[p>>1]=n;l=e*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+w;l=d}while(0);g=g+1|0;i=i+8|0;f=p+2|0;if((g|0)>=(E|0))break;else{p=f;d=l}}}w=w+1|0;if((w|0)>=(k|0)){t=l;T=52;break e}else{i=i+m|0;f=f+4|0}}to(3,3904,M);l=-1}else{t=0;T=52}while(0);if((T|0)==52){n=s+12|0;if((t|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=s+8|0;l=i+-1|0;a[e>>2]=l;if(l){Xu(n|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{u=(a[s+1179664+(n<<2)>>2]|0)+-1|0;f=n*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function Rn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}E=S+-1|0;if((n|0)>1){l=0;u=d;f=d+(E<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{u=u+(S<<1)|0;f=f+(S<<1)|0}}}f=s+1179664|0;b=0-S|0;_=1-S|0;y=~S;v=t+4|0;e:do if((k|0)>1){w=(E|0)>1;x=1;u=e+((t<<1)+2)|0;n=d+(S+1<<1)|0;l=0;t:while(1){if(w){m=1;g=n;p=l;while(1){do if((o[u>>0]|0|0)>(i|0)){r[g>>1]=0;l=p}else{l=r[g+(b<<1)>>1]|0;if(l<<16>>16>0){r[g>>1]=l;l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}e=r[g+(_<<1)>>1]|0;t=e<<16>>16;l=r[g+(y<<1)>>1]|0;d=l<<16>>16;n=l<<16>>16>0;if(e<<16>>16<=0){if(n){r[g>>1]=l;l=d*7|0;n=s+1310736+(l+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=s+1310736+(l+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+m;n=s+1310736+(l+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+x;n=s+1310736+(l+-3<<2)|0;if((a[n>>2]|0)<(m|0))a[n>>2]=m;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}l=r[g+-2>>1]|0;if(l<<16>>16>0){r[g>>1]=l;l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=p;break}a[l>>2]=m;l=p;break}else{l=p+1|0;if((p|0)>32767)break t;r[g>>1]=l;a[s+1179664+(p<<2)>>2]=l<<16>>16;p=p*7|0;a[s+1310736+(p<<2)>>2]=1;a[s+1310736+(p+1<<2)>>2]=m;a[s+1310736+(p+2<<2)>>2]=x;a[s+1310736+(p+3<<2)>>2]=m;a[s+1310736+(p+4<<2)>>2]=m;a[s+1310736+(p+5<<2)>>2]=x;a[s+1310736+(p+6<<2)>>2]=x;break}}if(n){l=a[s+1179664+(t+-1<<2)>>2]|0;t=a[s+1179664+(d+-1<<2)>>2]|0;if((l|0)>(t|0)){r[g>>1]=t;if((p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;n=n+1|0;if((n|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{r[g>>1]=l;if((l|0)<(t|0)&(p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;n=n+1|0;if((n|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}n=r[g+-2>>1]|0;if(n<<16>>16<=0){r[g>>1]=e;l=t*7|0;n=s+1310736+(l+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=s+1310736+(l+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+m;n=s+1310736+(l+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+x;n=s+1310736+(l+-4<<2)|0;if((a[n>>2]|0)>(m|0))a[n>>2]=m;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}l=a[s+1179664+(t+-1<<2)>>2]|0;t=a[s+1179664+((n<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){r[g>>1]=t;if((p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;n=n+1|0;if((n|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{r[g>>1]=l;if((l|0)<(t|0)&(p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;n=n+1|0;if((n|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=p}while(0);m=m+1|0;u=u+2|0;n=g+2|0;if((m|0)>=(E|0))break;else{g=n;p=l}}}x=x+1|0;if((x|0)>=(k|0)){d=l;T=52;break e}else{u=u+v|0;n=n+4|0}}to(3,3904,M);l=-1}else{d=0;T=52}while(0);if((T|0)==52){e=s+12|0;if((d|0)<1)u=1;else{n=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(n|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((n|0)<(d|0)){n=n+1|0;f=f+4|0}else break}}t=s+8|0;l=u+-1|0;a[t>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[t>>2]|0))}if((d|0)>0){e=0;do{f=(a[s+1179664+(e<<2)>>2]|0)+-1|0;n=e*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(n<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(n+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(n+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(n+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(n+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(n+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(n+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;e=e+1|0}while((e|0)<(d|0))}if((a[t>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[t>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function Cn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}E=S+-1|0;if((n|0)>1){l=0;u=d;f=d+(E<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{u=u+(S<<1)|0;f=f+(S<<1)|0}}}f=s+1179664|0;b=0-S|0;_=1-S|0;y=~S;v=(t<<1)+8|0;e:do if((k|0)>1){w=(E|0)>1;x=1;u=e+((t<<2)+4)|0;n=d+(S+1<<1)|0;l=0;t:while(1){if(w){m=1;g=n;p=l;while(1){do if((o[u+1>>0]|0|0)>(i|0)){r[g>>1]=0;l=p}else{l=r[g+(b<<1)>>1]|0;if(l<<16>>16>0){r[g>>1]=l;l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}e=r[g+(_<<1)>>1]|0;t=e<<16>>16;l=r[g+(y<<1)>>1]|0;d=l<<16>>16;n=l<<16>>16>0;if(e<<16>>16<=0){if(n){r[g>>1]=l;l=d*7|0;n=s+1310736+(l+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=s+1310736+(l+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+m;n=s+1310736+(l+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+x;n=s+1310736+(l+-3<<2)|0;if((a[n>>2]|0)<(m|0))a[n>>2]=m;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}l=r[g+-2>>1]|0;if(l<<16>>16>0){r[g>>1]=l;l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=p;break}a[l>>2]=m;l=p;break}else{l=p+1|0;if((p|0)>32767)break t;r[g>>1]=l;a[s+1179664+(p<<2)>>2]=l<<16>>16;p=p*7|0;a[s+1310736+(p<<2)>>2]=1;a[s+1310736+(p+1<<2)>>2]=m;a[s+1310736+(p+2<<2)>>2]=x;a[s+1310736+(p+3<<2)>>2]=m;a[s+1310736+(p+4<<2)>>2]=m;a[s+1310736+(p+5<<2)>>2]=x;a[s+1310736+(p+6<<2)>>2]=x;break}}if(n){l=a[s+1179664+(t+-1<<2)>>2]|0;t=a[s+1179664+(d+-1<<2)>>2]|0;if((l|0)>(t|0)){r[g>>1]=t;if((p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;n=n+1|0;if((n|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{r[g>>1]=l;if((l|0)<(t|0)&(p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;n=n+1|0;if((n|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}n=r[g+-2>>1]|0;if(n<<16>>16<=0){r[g>>1]=e;l=t*7|0;n=s+1310736+(l+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=s+1310736+(l+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+m;n=s+1310736+(l+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+x;n=s+1310736+(l+-4<<2)|0;if((a[n>>2]|0)>(m|0))a[n>>2]=m;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}l=a[s+1179664+(t+-1<<2)>>2]|0;t=a[s+1179664+((n<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){r[g>>1]=t;if((p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;n=n+1|0;if((n|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{r[g>>1]=l;if((l|0)<(t|0)&(p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;n=n+1|0;if((n|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=p}while(0);m=m+1|0;u=u+4|0;n=g+2|0;if((m|0)>=(E|0))break;else{g=n;p=l}}}x=x+1|0;if((x|0)>=(k|0)){d=l;T=52;break e}else{u=u+v|0;n=n+4|0}}to(3,3904,M);l=-1}else{d=0;T=52}while(0);if((T|0)==52){e=s+12|0;if((d|0)<1)u=1;else{n=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(n|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((n|0)<(d|0)){n=n+1|0;f=f+4|0}else break}}t=s+8|0;l=u+-1|0;a[t>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[t>>2]|0))}if((d|0)>0){e=0;do{f=(a[s+1179664+(e<<2)>>2]|0)+-1|0;n=e*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(n<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(n+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(n+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(n+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(n+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(n+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(n+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;e=e+1|0}while((e|0)<(d|0))}if((a[t>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[t>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function Pn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}E=S+-1|0;
if((n|0)>1){l=0;u=d;f=d+(E<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{u=u+(S<<1)|0;f=f+(S<<1)|0}}}f=s+1179664|0;b=0-S|0;_=1-S|0;y=~S;v=(t<<1)+8|0;e:do if((k|0)>1){w=(E|0)>1;x=1;u=e+((t<<2)+4)|0;n=d+(S+1<<1)|0;l=0;t:while(1){if(w){m=1;g=n;p=l;while(1){do if((o[u>>0]|0|0)>(i|0)){r[g>>1]=0;l=p}else{l=r[g+(b<<1)>>1]|0;if(l<<16>>16>0){r[g>>1]=l;l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}e=r[g+(_<<1)>>1]|0;t=e<<16>>16;l=r[g+(y<<1)>>1]|0;d=l<<16>>16;n=l<<16>>16>0;if(e<<16>>16<=0){if(n){r[g>>1]=l;l=d*7|0;n=s+1310736+(l+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=s+1310736+(l+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+m;n=s+1310736+(l+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+x;n=s+1310736+(l+-3<<2)|0;if((a[n>>2]|0)<(m|0))a[n>>2]=m;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}l=r[g+-2>>1]|0;if(l<<16>>16>0){r[g>>1]=l;l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=p;break}a[l>>2]=m;l=p;break}else{l=p+1|0;if((p|0)>32767)break t;r[g>>1]=l;a[s+1179664+(p<<2)>>2]=l<<16>>16;p=p*7|0;a[s+1310736+(p<<2)>>2]=1;a[s+1310736+(p+1<<2)>>2]=m;a[s+1310736+(p+2<<2)>>2]=x;a[s+1310736+(p+3<<2)>>2]=m;a[s+1310736+(p+4<<2)>>2]=m;a[s+1310736+(p+5<<2)>>2]=x;a[s+1310736+(p+6<<2)>>2]=x;break}}if(n){l=a[s+1179664+(t+-1<<2)>>2]|0;t=a[s+1179664+(d+-1<<2)>>2]|0;if((l|0)>(t|0)){r[g>>1]=t;if((p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;n=n+1|0;if((n|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{r[g>>1]=l;if((l|0)<(t|0)&(p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;n=n+1|0;if((n|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}n=r[g+-2>>1]|0;if(n<<16>>16<=0){r[g>>1]=e;l=t*7|0;n=s+1310736+(l+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=s+1310736+(l+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+m;n=s+1310736+(l+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+x;n=s+1310736+(l+-4<<2)|0;if((a[n>>2]|0)>(m|0))a[n>>2]=m;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}l=a[s+1179664+(t+-1<<2)>>2]|0;t=a[s+1179664+((n<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){r[g>>1]=t;if((p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;n=n+1|0;if((n|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{r[g>>1]=l;if((l|0)<(t|0)&(p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;n=n+1|0;if((n|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=p}while(0);m=m+1|0;u=u+4|0;n=g+2|0;if((m|0)>=(E|0))break;else{g=n;p=l}}}x=x+1|0;if((x|0)>=(k|0)){d=l;T=52;break e}else{u=u+v|0;n=n+4|0}}to(3,3904,M);l=-1}else{d=0;T=52}while(0);if((T|0)==52){e=s+12|0;if((d|0)<1)u=1;else{n=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(n|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((n|0)<(d|0)){n=n+1|0;f=f+4|0}else break}}t=s+8|0;l=u+-1|0;a[t>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[t>>2]|0))}if((d|0)>0){e=0;do{f=(a[s+1179664+(e<<2)>>2]|0)+-1|0;n=e*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(n<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(n+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(n+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(n+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(n+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(n+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(n+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;e=e+1|0}while((e|0)<(d|0))}if((a[t>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[t>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function On(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=i*3|0;E=t+-1|0;if((n|0)>0){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{i=i+(t<<1)|0;u=u+(t<<1)|0}}}u=s+1179664|0;l=t+1|0;b=0-t|0;_=1-t|0;y=~t;e:do if((M|0)>1){w=(E|0)>1;x=1;i=e+(l*3|0)|0;f=d+(l<<1)|0;l=0;t:while(1){if(w){v=1;m=f;g=l;while(1){do if(((o[i+1>>0]|0)+(o[i>>0]|0)+(o[i+2>>0]|0)|0)>(k|0)){r[m>>1]=0;l=g}else{l=r[m+(b<<1)>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}e=r[m+(_<<1)>>1]|0;d=e<<16>>16;l=r[m+(y<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){r[m>>1]=l;l=p*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=r[m+-2>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=g;break}a[l>>2]=v;l=g;break}else{l=g+1|0;if((g|0)>32767)break t;r[m>>1]=l;a[s+1179664+(g<<2)>>2]=l<<16>>16;g=g*7|0;a[s+1310736+(g<<2)>>2]=1;a[s+1310736+(g+1<<2)>>2]=v;a[s+1310736+(g+2<<2)>>2]=x;a[s+1310736+(g+3<<2)>>2]=v;a[s+1310736+(g+4<<2)>>2]=v;a[s+1310736+(g+5<<2)>>2]=x;a[s+1310736+(g+6<<2)>>2]=x;break}}if(f){l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+(p+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}f=r[m+-2>>1]|0;if(f<<16>>16<=0){r[m>>1]=e;l=d*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=g}while(0);v=v+1|0;i=i+3|0;f=m+2|0;if((v|0)>=(E|0))break;else{m=f;g=l}}}x=x+1|0;if((x|0)>=(M|0)){p=l;S=52;break e}else{i=i+6|0;f=f+4|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){e=s+12|0;if((p|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}d=s+8|0;l=i+-1|0;a[d>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[d>>2]|0))}if((p|0)>0){e=0;do{u=(a[s+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((a[d>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[d>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function Ln(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=i*3|0;E=t+-1|0;if((n|0)>0){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{i=i+(t<<1)|0;u=u+(t<<1)|0}}}u=s+1179664|0;l=t+1|0;b=0-t|0;_=1-t|0;y=~t;e:do if((M|0)>1){w=(E|0)>1;x=1;i=e+(l<<1)|0;f=d+(l<<1)|0;l=0;t:while(1){if(w){v=1;m=f;g=l;while(1){d=o[i>>0]|0;p=o[i+1>>0]|0;do if(((d&248)+10+(d<<5&224)+(p>>>3&28)+(p<<3&248)|0)>(k|0)){r[m>>1]=0;l=g}else{l=r[m+(b<<1)>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}e=r[m+(_<<1)>>1]|0;d=e<<16>>16;l=r[m+(y<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){r[m>>1]=l;l=p*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=r[m+-2>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=g;break}a[l>>2]=v;l=g;break}else{l=g+1|0;if((g|0)>32767)break t;r[m>>1]=l;a[s+1179664+(g<<2)>>2]=l<<16>>16;g=g*7|0;a[s+1310736+(g<<2)>>2]=1;a[s+1310736+(g+1<<2)>>2]=v;a[s+1310736+(g+2<<2)>>2]=x;a[s+1310736+(g+3<<2)>>2]=v;a[s+1310736+(g+4<<2)>>2]=v;a[s+1310736+(g+5<<2)>>2]=x;a[s+1310736+(g+6<<2)>>2]=x;break}}if(f){l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+(p+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}f=r[m+-2>>1]|0;if(f<<16>>16<=0){r[m>>1]=e;l=d*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=g}while(0);v=v+1|0;i=i+2|0;f=m+2|0;if((v|0)>=(E|0))break;else{m=f;g=l}}}x=x+1|0;if((x|0)>=(M|0)){p=l;S=52;break e}else{i=i+4|0;f=f+4|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){e=s+12|0;if((p|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}d=s+8|0;l=i+-1|0;a[d>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[d>>2]|0))}if((p|0)>0){e=0;do{u=(a[s+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((a[d>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[d>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function Nn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=i*3|0;E=t+-1|0;if((n|0)>0){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{i=i+(t<<1)|0;u=u+(t<<1)|0}}}u=s+1179664|0;l=t+1|0;b=0-t|0;_=1-t|0;y=~t;e:do if((M|0)>1){w=(E|0)>1;x=1;i=e+(l<<2)|0;f=d+(l<<1)|0;l=0;t:while(1){if(w){v=1;m=f;g=l;while(1){do if(((o[i+1>>0]|0)+(o[i>>0]|0)+(o[i+2>>0]|0)|0)>(k|0)){r[m>>1]=0;l=g}else{l=r[m+(b<<1)>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}e=r[m+(_<<1)>>1]|0;d=e<<16>>16;l=r[m+(y<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){r[m>>1]=l;l=p*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=r[m+-2>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=g;break}a[l>>2]=v;l=g;break}else{l=g+1|0;if((g|0)>32767)break t;r[m>>1]=l;a[s+1179664+(g<<2)>>2]=l<<16>>16;g=g*7|0;a[s+1310736+(g<<2)>>2]=1;a[s+1310736+(g+1<<2)>>2]=v;a[s+1310736+(g+2<<2)>>2]=x;a[s+1310736+(g+3<<2)>>2]=v;a[s+1310736+(g+4<<2)>>2]=v;a[s+1310736+(g+5<<2)>>2]=x;a[s+1310736+(g+6<<2)>>2]=x;break}}if(f){l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+(p+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}f=r[m+-2>>1]|0;if(f<<16>>16<=0){r[m>>1]=e;l=d*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=g}while(0);v=v+1|0;i=i+4|0;f=m+2|0;if((v|0)>=(E|0))break;else{m=f;g=l}}}x=x+1|0;if((x|0)>=(M|0)){p=l;S=52;break e}else{i=i+8|0;f=f+4|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){e=s+12|0;if((p|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}d=s+8|0;l=i+-1|0;a[d>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[d>>2]|0))}if((p|0)>0){e=0;do{u=(a[s+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((a[d>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[d>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function Fn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=i*3|0;E=t+-1|0;if((n|0)>0){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{i=i+(t<<1)|0;u=u+(t<<1)|0}}}u=s+1179664|0;l=t+1|0;b=0-t|0;_=1-t|0;y=~t;e:do if((M|0)>1){w=(E|0)>1;x=1;i=e+(l<<1)|0;f=d+(l<<1)|0;l=0;t:while(1){if(w){v=1;m=f;g=l;while(1){p=o[i>>0]|0;do if(((p&240)+24+(p<<4&240)+((o[i+1>>0]|0)&240)|0)>(k|0)){r[m>>1]=0;l=g}else{l=r[m+(b<<1)>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}e=r[m+(_<<1)>>1]|0;d=e<<16>>16;l=r[m+(y<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){r[m>>1]=l;l=p*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=r[m+-2>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=g;break}a[l>>2]=v;l=g;break}else{l=g+1|0;if((g|0)>32767)break t;r[m>>1]=l;a[s+1179664+(g<<2)>>2]=l<<16>>16;g=g*7|0;a[s+1310736+(g<<2)>>2]=1;a[s+1310736+(g+1<<2)>>2]=v;a[s+1310736+(g+2<<2)>>2]=x;a[s+1310736+(g+3<<2)>>2]=v;a[s+1310736+(g+4<<2)>>2]=v;a[s+1310736+(g+5<<2)>>2]=x;a[s+1310736+(g+6<<2)>>2]=x;break}}if(f){l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+(p+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}f=r[m+-2>>1]|0;if(f<<16>>16<=0){r[m>>1]=e;l=d*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=g}while(0);v=v+1|0;i=i+2|0;f=m+2|0;if((v|0)>=(E|0))break;else{m=f;g=l}}}x=x+1|0;if((x|0)>=(M|0)){p=l;S=52;break e}else{i=i+4|0;f=f+4|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){e=s+12|0;if((p|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}d=s+8|0;l=i+-1|0;a[d>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[d>>2]|0))}if((p|0)>0){e=0;do{u=(a[s+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((a[d>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[d>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function Dn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=i*3|0;E=t+-1|0;if((n|0)>0){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{i=i+(t<<1)|0;u=u+(t<<1)|0}}}u=s+1179664|0;l=t+1|0;b=0-t|0;_=1-t|0;y=~t;e:do if((M|0)>1){w=(E|0)>1;x=1;i=e+(l<<1)|0;f=d+(l<<1)|0;l=0;t:while(1){if(w){v=1;m=f;g=l;while(1){d=o[i>>0]|0;p=o[i+1>>0]|0;do if(((d&248)+12+(d<<5&224)+(p>>>3&24)+(p<<2&248)|0)>(k|0)){r[m>>1]=0;l=g}else{l=r[m+(b<<1)>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}e=r[m+(_<<1)>>1]|0;d=e<<16>>16;l=r[m+(y<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){r[m>>1]=l;l=p*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=r[m+-2>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=g;break}a[l>>2]=v;l=g;break}else{l=g+1|0;if((g|0)>32767)break t;r[m>>1]=l;a[s+1179664+(g<<2)>>2]=l<<16>>16;g=g*7|0;a[s+1310736+(g<<2)>>2]=1;a[s+1310736+(g+1<<2)>>2]=v;a[s+1310736+(g+2<<2)>>2]=x;a[s+1310736+(g+3<<2)>>2]=v;a[s+1310736+(g+4<<2)>>2]=v;a[s+1310736+(g+5<<2)>>2]=x;a[s+1310736+(g+6<<2)>>2]=x;break}}if(f){l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+(p+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}f=r[m+-2>>1]|0;if(f<<16>>16<=0){r[m>>1]=e;l=d*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=g}while(0);v=v+1|0;i=i+2|0;f=m+2|0;if((v|0)>=(E|0))break;else{m=f;g=l}}}x=x+1|0;if((x|0)>=(M|0)){p=l;S=52;break e}else{i=i+4|0;f=f+4|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){e=s+12|0;if((p|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}d=s+8|0;l=i+-1|0;a[d>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[d>>2]|0))}if((p|0)>0){e=0;do{u=(a[s+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((a[d>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[d>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function In(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=i*3|0;E=t+-1|0;if((n|0)>0){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{i=i+(t<<1)|0;u=u+(t<<1)|0}}}u=s+1179664|0;l=t+1|0;b=0-t|0;_=1-t|0;y=~t;e:do if((M|0)>1){w=(E|0)>1;x=1;i=e+(l<<2)|0;f=d+(l<<1)|0;l=0;t:while(1){if(w){v=1;m=f;g=l;while(1){do if(((o[i+2>>0]|0)+(o[i+1>>0]|0)+(o[i+3>>0]|0)|0)>(k|0)){r[m>>1]=0;l=g}else{l=r[m+(b<<1)>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}e=r[m+(_<<1)>>1]|0;d=e<<16>>16;l=r[m+(y<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){r[m>>1]=l;l=p*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=r[m+-2>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=g;break}a[l>>2]=v;l=g;break}else{l=g+1|0;if((g|0)>32767)break t;r[m>>1]=l;a[s+1179664+(g<<2)>>2]=l<<16>>16;g=g*7|0;a[s+1310736+(g<<2)>>2]=1;a[s+1310736+(g+1<<2)>>2]=v;a[s+1310736+(g+2<<2)>>2]=x;a[s+1310736+(g+3<<2)>>2]=v;a[s+1310736+(g+4<<2)>>2]=v;a[s+1310736+(g+5<<2)>>2]=x;a[s+1310736+(g+6<<2)>>2]=x;break}}if(f){l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+(p+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}f=r[m+-2>>1]|0;if(f<<16>>16<=0){r[m>>1]=e;l=d*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=g}while(0);v=v+1|0;i=i+4|0;f=m+2|0;if((v|0)>=(E|0))break;else{m=f;g=l}}}x=x+1|0;if((x|0)>=(M|0)){p=l;S=52;break e}else{i=i+8|0;f=f+4|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){e=s+12|0;if((p|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}d=s+8|0;l=i+-1|0;a[d>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[d>>2]|0))}if((p|0)>0){e=0;do{u=(a[s+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((a[d>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[d>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function Un(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;
A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=t+-1|0;if((n|0)>0){l=0;u=d;f=d+(k<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=s+1179664|0;l=t+1|0;w=0-t|0;y=1-t|0;b=~t;e:do if((M|0)>1){x=(k|0)>1;E=1;u=e+l|0;e=d+(l<<1)|0;l=0;t:while(1){if(x){_=1;v=e;m=l;while(1){do if((o[u>>0]|0|0)>(i|0)){r[v>>1]=0;l=m}else{l=r[v+(w<<1)>>1]|0;if(l<<16>>16>0){r[v>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}d=r[v+(y<<1)>>1]|0;p=d<<16>>16;l=r[v+(b<<1)>>1]|0;g=l<<16>>16;e=l<<16>>16>0;if(d<<16>>16<=0){if(e){r[v>>1]=l;l=g*7|0;e=s+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=s+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+_;e=s+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+E;e=s+1310736+(l+-3<<2)|0;if((a[e>>2]|0)<(_|0))a[e>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[v+-2>>1]|0;if(l<<16>>16>0){r[v>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(_|0)){l=m;break}a[l>>2]=_;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;r[v>>1]=l;a[s+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[s+1310736+(m<<2)>>2]=1;a[s+1310736+(m+1<<2)>>2]=_;a[s+1310736+(m+2<<2)>>2]=E;a[s+1310736+(m+3<<2)>>2]=_;a[s+1310736+(m+4<<2)>>2]=_;a[s+1310736+(m+5<<2)>>2]=E;a[s+1310736+(m+6<<2)>>2]=E;break}}if(e){l=a[s+1179664+(p+-1<<2)>>2]|0;p=a[s+1179664+(g+-1<<2)>>2]|0;if((l|0)>(p|0)){r[v>>1]=p;if((m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(l|0))a[d>>2]=p;e=e+1|0;if((e|0)>=(m|0)){l=p;break}else d=d+4|0}}else l=p}else{r[v>>1]=l;if((l|0)<(p|0)&(m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(p|0))a[d>>2]=l;e=e+1|0;if((e|0)>=(m|0))break;else d=d+4|0}}}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[v+-2>>1]|0;if(l<<16>>16<=0){r[v>>1]=d;l=p*7|0;e=s+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=s+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+_;e=s+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+E;e=s+1310736+(l+-4<<2)|0;if((a[e>>2]|0)>(_|0))a[e>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}p=a[s+1179664+(p+-1<<2)>>2]|0;l=a[s+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((p|0)>(l|0)){r[v>>1]=l;if((m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(p|0))a[d>>2]=l;e=e+1|0;if((e|0)>=(m|0))break;else d=d+4|0}}}else{r[v>>1]=p;if((p|0)<(l|0)&(m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(l|0))a[d>>2]=p;e=e+1|0;if((e|0)>=(m|0)){l=p;break}else d=d+4|0}}else l=p}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+E;l=m}while(0);_=_+1|0;u=u+1|0;e=v+2|0;if((_|0)>=(k|0))break;else{v=e;m=l}}}E=E+1|0;if((E|0)>=(M|0)){g=l;S=52;break e}else{u=u+2|0;e=e+4|0}}to(3,3904,T);l=-1}else{g=0;S=52}while(0);if((S|0)==52){d=s+12|0;if((g|0)<1)u=1;else{e=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((e|0)<(g|0)){e=e+1|0;f=f+4|0}else break}}p=s+8|0;l=u+-1|0;a[p>>2]=l;if(l){Xu(d|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[p>>2]|0))}if((g|0)>0){d=0;do{f=(a[s+1179664+(d<<2)>>2]|0)+-1|0;e=d*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(e<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(e+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(e+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(e+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;d=d+1|0}while((d|0)<(g|0))}if((a[p>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[p>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function Hn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=t+-1|0;if((n|0)>0){l=0;u=d;f=d+(k<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=s+1179664|0;l=t+1|0;w=0-t|0;y=1-t|0;b=~t;e:do if((M|0)>1){x=(k|0)>1;E=1;u=e+(l<<1)|0;e=d+(l<<1)|0;l=0;t:while(1){if(x){_=1;v=e;m=l;while(1){do if((o[u+1>>0]|0|0)>(i|0)){r[v>>1]=0;l=m}else{l=r[v+(w<<1)>>1]|0;if(l<<16>>16>0){r[v>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}d=r[v+(y<<1)>>1]|0;p=d<<16>>16;l=r[v+(b<<1)>>1]|0;g=l<<16>>16;e=l<<16>>16>0;if(d<<16>>16<=0){if(e){r[v>>1]=l;l=g*7|0;e=s+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=s+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+_;e=s+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+E;e=s+1310736+(l+-3<<2)|0;if((a[e>>2]|0)<(_|0))a[e>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[v+-2>>1]|0;if(l<<16>>16>0){r[v>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(_|0)){l=m;break}a[l>>2]=_;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;r[v>>1]=l;a[s+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[s+1310736+(m<<2)>>2]=1;a[s+1310736+(m+1<<2)>>2]=_;a[s+1310736+(m+2<<2)>>2]=E;a[s+1310736+(m+3<<2)>>2]=_;a[s+1310736+(m+4<<2)>>2]=_;a[s+1310736+(m+5<<2)>>2]=E;a[s+1310736+(m+6<<2)>>2]=E;break}}if(e){l=a[s+1179664+(p+-1<<2)>>2]|0;p=a[s+1179664+(g+-1<<2)>>2]|0;if((l|0)>(p|0)){r[v>>1]=p;if((m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(l|0))a[d>>2]=p;e=e+1|0;if((e|0)>=(m|0)){l=p;break}else d=d+4|0}}else l=p}else{r[v>>1]=l;if((l|0)<(p|0)&(m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(p|0))a[d>>2]=l;e=e+1|0;if((e|0)>=(m|0))break;else d=d+4|0}}}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}e=r[v+-2>>1]|0;if(e<<16>>16<=0){r[v>>1]=d;l=p*7|0;e=s+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=s+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+_;e=s+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+E;e=s+1310736+(l+-4<<2)|0;if((a[e>>2]|0)>(_|0))a[e>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=a[s+1179664+(p+-1<<2)>>2]|0;p=a[s+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((l|0)>(p|0)){r[v>>1]=p;if((m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(l|0))a[d>>2]=p;e=e+1|0;if((e|0)>=(m|0)){l=p;break}else d=d+4|0}}else l=p}else{r[v>>1]=l;if((l|0)<(p|0)&(m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(p|0))a[d>>2]=l;e=e+1|0;if((e|0)>=(m|0))break;else d=d+4|0}}}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+E;l=m}while(0);_=_+1|0;u=u+2|0;e=v+2|0;if((_|0)>=(k|0))break;else{v=e;m=l}}}E=E+1|0;if((E|0)>=(M|0)){g=l;S=52;break e}else{u=u+4|0;e=e+4|0}}to(3,3904,T);l=-1}else{g=0;S=52}while(0);if((S|0)==52){d=s+12|0;if((g|0)<1)u=1;else{e=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((e|0)<(g|0)){e=e+1|0;f=f+4|0}else break}}p=s+8|0;l=u+-1|0;a[p>>2]=l;if(l){Xu(d|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[p>>2]|0))}if((g|0)>0){d=0;do{f=(a[s+1179664+(d<<2)>>2]|0)+-1|0;e=d*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(e<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(e+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(e+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(e+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;d=d+1|0}while((d|0)<(g|0))}if((a[p>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[p>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function zn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=t+-1|0;if((n|0)>0){l=0;u=d;f=d+(k<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=s+1179664|0;l=t+1|0;w=0-t|0;y=1-t|0;b=~t;e:do if((M|0)>1){x=(k|0)>1;E=1;u=e+(l<<1)|0;e=d+(l<<1)|0;l=0;t:while(1){if(x){_=1;v=e;m=l;while(1){do if((o[u>>0]|0|0)>(i|0)){r[v>>1]=0;l=m}else{l=r[v+(w<<1)>>1]|0;if(l<<16>>16>0){r[v>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}d=r[v+(y<<1)>>1]|0;p=d<<16>>16;l=r[v+(b<<1)>>1]|0;g=l<<16>>16;e=l<<16>>16>0;if(d<<16>>16<=0){if(e){r[v>>1]=l;l=g*7|0;e=s+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=s+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+_;e=s+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+E;e=s+1310736+(l+-3<<2)|0;if((a[e>>2]|0)<(_|0))a[e>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[v+-2>>1]|0;if(l<<16>>16>0){r[v>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(_|0)){l=m;break}a[l>>2]=_;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;r[v>>1]=l;a[s+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[s+1310736+(m<<2)>>2]=1;a[s+1310736+(m+1<<2)>>2]=_;a[s+1310736+(m+2<<2)>>2]=E;a[s+1310736+(m+3<<2)>>2]=_;a[s+1310736+(m+4<<2)>>2]=_;a[s+1310736+(m+5<<2)>>2]=E;a[s+1310736+(m+6<<2)>>2]=E;break}}if(e){l=a[s+1179664+(p+-1<<2)>>2]|0;p=a[s+1179664+(g+-1<<2)>>2]|0;if((l|0)>(p|0)){r[v>>1]=p;if((m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(l|0))a[d>>2]=p;e=e+1|0;if((e|0)>=(m|0)){l=p;break}else d=d+4|0}}else l=p}else{r[v>>1]=l;if((l|0)<(p|0)&(m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(p|0))a[d>>2]=l;e=e+1|0;if((e|0)>=(m|0))break;else d=d+4|0}}}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[v+-2>>1]|0;if(l<<16>>16<=0){r[v>>1]=d;l=p*7|0;e=s+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=s+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+_;e=s+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+E;e=s+1310736+(l+-4<<2)|0;if((a[e>>2]|0)>(_|0))a[e>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}p=a[s+1179664+(p+-1<<2)>>2]|0;l=a[s+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((p|0)>(l|0)){r[v>>1]=l;if((m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(p|0))a[d>>2]=l;e=e+1|0;if((e|0)>=(m|0))break;else d=d+4|0}}}else{r[v>>1]=p;if((p|0)<(l|0)&(m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(l|0))a[d>>2]=p;e=e+1|0;if((e|0)>=(m|0)){l=p;break}else d=d+4|0}}else l=p}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+E;l=m}while(0);_=_+1|0;u=u+2|0;e=v+2|0;if((_|0)>=(k|0))break;else{v=e;m=l}}}E=E+1|0;if((E|0)>=(M|0)){g=l;S=52;break e}else{u=u+4|0;e=e+4|0}}to(3,3904,T);l=-1}else{g=0;S=52}while(0);if((S|0)==52){d=s+12|0;if((g|0)<1)u=1;else{e=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((e|0)<(g|0)){e=e+1|0;f=f+4|0}else break}}p=s+8|0;l=u+-1|0;a[p>>2]=l;if(l){Xu(d|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[p>>2]|0))}if((g|0)>0){d=0;do{f=(a[s+1179664+(d<<2)>>2]|0)+-1|0;e=d*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(e<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(e+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(e+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(e+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;d=d+1|0}while((d|0)<(g|0))}if((a[p>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[p>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function Bn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=t+-1|0;if((n|0)>0){l=0;u=d;f=d+(k<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=s+1179664|0;l=t+1|0;w=0-t|0;y=1-t|0;b=~t;e:do if((M|0)>1){x=(k|0)>1;E=1;u=e+l|0;e=d+(l<<1)|0;d=i+l|0;l=0;t:while(1){if(x){_=1;v=u;m=l;while(1){do if((o[v>>0]|0)>(o[d>>0]|0)){r[e>>1]=0;l=m}else{l=r[e+(w<<1)>>1]|0;if(l<<16>>16>0){r[e>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}i=r[e+(y<<1)>>1]|0;p=i<<16>>16;l=r[e+(b<<1)>>1]|0;g=l<<16>>16;u=l<<16>>16>0;if(i<<16>>16<=0){if(u){r[e>>1]=l;l=g*7|0;u=s+1310736+(l+-7<<2)|0;a[u>>2]=(a[u>>2]|0)+1;u=s+1310736+(l+-6<<2)|0;a[u>>2]=(a[u>>2]|0)+_;u=s+1310736+(l+-5<<2)|0;a[u>>2]=(a[u>>2]|0)+E;u=s+1310736+(l+-3<<2)|0;if((a[u>>2]|0)<(_|0))a[u>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[e+-2>>1]|0;if(l<<16>>16>0){r[e>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(_|0)){l=m;break}a[l>>2]=_;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;r[e>>1]=l;a[s+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[s+1310736+(m<<2)>>2]=1;a[s+1310736+(m+1<<2)>>2]=_;a[s+1310736+(m+2<<2)>>2]=E;a[s+1310736+(m+3<<2)>>2]=_;a[s+1310736+(m+4<<2)>>2]=_;a[s+1310736+(m+5<<2)>>2]=E;a[s+1310736+(m+6<<2)>>2]=E;break}}if(u){l=a[s+1179664+(p+-1<<2)>>2]|0;p=a[s+1179664+(g+-1<<2)>>2]|0;if((l|0)>(p|0)){r[e>>1]=p;if((m|0)>0){u=0;i=f;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=p;u=u+1|0;if((u|0)>=(m|0)){l=p;break}else i=i+4|0}}else l=p}else{r[e>>1]=l;if((l|0)<(p|0)&(m|0)>0){u=0;i=f;while(1){if((a[i>>2]|0)==(p|0))a[i>>2]=l;u=u+1|0;if((u|0)>=(m|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[e+-2>>1]|0;if(l<<16>>16<=0){r[e>>1]=i;l=p*7|0;u=s+1310736+(l+-7<<2)|0;a[u>>2]=(a[u>>2]|0)+1;u=s+1310736+(l+-6<<2)|0;a[u>>2]=(a[u>>2]|0)+_;u=s+1310736+(l+-5<<2)|0;a[u>>2]=(a[u>>2]|0)+E;u=s+1310736+(l+-4<<2)|0;if((a[u>>2]|0)>(_|0))a[u>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}p=a[s+1179664+(p+-1<<2)>>2]|0;l=a[s+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((p|0)>(l|0)){r[e>>1]=l;if((m|0)>0){u=0;i=f;while(1){if((a[i>>2]|0)==(p|0))a[i>>2]=l;u=u+1|0;if((u|0)>=(m|0))break;else i=i+4|0}}}else{r[e>>1]=p;if((p|0)<(l|0)&(m|0)>0){u=0;i=f;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=p;u=u+1|0;if((u|0)>=(m|0)){l=p;break}else i=i+4|0}}else l=p}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+E;l=m}while(0);_=_+1|0;u=v+1|0;d=d+1|0;e=e+2|0;if((_|0)>=(k|0))break;else{v=u;m=l}}}E=E+1|0;if((E|0)>=(M|0)){p=l;S=52;break e}else{u=u+2|0;e=e+4|0;d=d+2|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){d=s+12|0;if((p|0)<1)u=1;else{e=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((e|0)<(p|0)){e=e+1|0;f=f+4|0}else break}}i=s+8|0;l=u+-1|0;a[i>>2]=l;if(l){Xu(d|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[i>>2]|0))}if((p|0)>0){d=0;do{f=(a[s+1179664+(d<<2)>>2]|0)+-1|0;e=d*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(e<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(e+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(e+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(e+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;d=d+1|0}while((d|0)<(p|0))}if((a[i>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[i>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function jn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}x=i*3|0;E=S+-1|0;if((n|0)>1){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{i=i+(S<<1)|0;u=u+(S<<1)|0}}}u=s+1179664|0;y=0-S|0;v=1-S|0;_=~S;m=(t*3|0)+12|0;e:do if((k|0)>1){b=(E|0)>1;w=1;i=e+((t*6|0)+6)|0;f=d+(S+1<<1)|0;l=0;t:while(1){if(b){g=1;p=f;d=l;while(1){do if(((o[i+1>>0]|0)+(o[i>>0]|0)+(o[i+2>>0]|0)|0)>(x|0)){l=r[p+(y<<1)>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}n=r[p+(v<<1)>>1]|0;e=n<<16>>16;l=r[p+(_<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(n<<16>>16<=0){if(f){r[p>>1]=l;l=t*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=r[p+-2>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=d;break}a[l>>2]=g;l=d;break}else{l=d+1|0;if((d|0)>32767)break t;r[p>>1]=l;a[s+1179664+(d<<2)>>2]=l<<16>>16;d=d*7|0;a[s+1310736+(d<<2)>>2]=1;a[s+1310736+(d+1<<2)>>2]=g;a[s+1310736+(d+2<<2)>>2]=w;a[s+1310736+(d+3<<2)>>2]=g;a[s+1310736+(d+4<<2)>>2]=g;a[s+1310736+(d+5<<2)>>2]=w;a[s+1310736+(d+6<<2)>>2]=w;break}}if(f){l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}f=r[p+-2>>1]|0;if(f<<16>>16<=0){r[p>>1]=n;l=e*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+w;l=d}else{r[p>>1]=0;l=d}while(0);g=g+1|0;i=i+6|0;f=p+2|0;if((g|0)>=(E|0))break;else{p=f;d=l}}}w=w+1|0;if((w|0)>=(k|0)){t=l;T=52;break e}else{i=i+m|0;f=f+4|0}}to(3,3904,M);l=-1}else{t=0;T=52}while(0);if((T|0)==52){n=s+12|0;if((t|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=s+8|0;l=i+-1|0;a[e>>2]=l;if(l){Xu(n|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{u=(a[s+1179664+(n<<2)>>2]|0)+-1|0;f=n*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function Vn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}x=i*3|0;E=S+-1|0;if((n|0)>1){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{i=i+(S<<1)|0;u=u+(S<<1)|0}}}u=s+1179664|0;y=0-S|0;v=1-S|0;_=~S;m=(t<<1)+8|0;e:do if((k|0)>1){b=(E|0)>1;w=1;i=e+((t<<2)+4)|0;f=d+(S+1<<1)|0;l=0;t:while(1){if(b){g=1;p=f;d=l;while(1){e=o[i>>0]|0;t=o[i+1>>0]|0;do if(((e&248)+10+(e<<5&224)+(t>>>3&28)+(t<<3&248)|0)>(x|0)){l=r[p+(y<<1)>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}n=r[p+(v<<1)>>1]|0;e=n<<16>>16;l=r[p+(_<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(n<<16>>16<=0){if(f){r[p>>1]=l;l=t*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=r[p+-2>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=d;break}a[l>>2]=g;l=d;break}else{l=d+1|0;if((d|0)>32767)break t;r[p>>1]=l;a[s+1179664+(d<<2)>>2]=l<<16>>16;d=d*7|0;a[s+1310736+(d<<2)>>2]=1;a[s+1310736+(d+1<<2)>>2]=g;a[s+1310736+(d+2<<2)>>2]=w;a[s+1310736+(d+3<<2)>>2]=g;a[s+1310736+(d+4<<2)>>2]=g;a[s+1310736+(d+5<<2)>>2]=w;a[s+1310736+(d+6<<2)>>2]=w;break}}if(f){l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}f=r[p+-2>>1]|0;if(f<<16>>16<=0){r[p>>1]=n;l=e*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+w;l=d}else{r[p>>1]=0;l=d}while(0);g=g+1|0;i=i+4|0;f=p+2|0;if((g|0)>=(E|0))break;else{p=f;d=l}}}w=w+1|0;if((w|0)>=(k|0)){t=l;T=52;break e}else{i=i+m|0;f=f+4|0}}to(3,3904,M);l=-1}else{t=0;T=52}while(0);if((T|0)==52){n=s+12|0;if((t|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=s+8|0;l=i+-1|0;a[e>>2]=l;if(l){Xu(n|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{u=(a[s+1179664+(n<<2)>>2]|0)+-1|0;f=n*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function Gn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}x=i*3|0;E=S+-1|0;if((n|0)>1){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{i=i+(S<<1)|0;u=u+(S<<1)|0}}}u=s+1179664|0;y=0-S|0;v=1-S|0;_=~S;m=(t<<2)+16|0;e:do if((k|0)>1){b=(E|0)>1;w=1;i=e+((t<<3)+8)|0;f=d+(S+1<<1)|0;l=0;t:while(1){if(b){g=1;p=f;d=l;while(1){do if(((o[i+1>>0]|0)+(o[i>>0]|0)+(o[i+2>>0]|0)|0)>(x|0)){l=r[p+(y<<1)>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}n=r[p+(v<<1)>>1]|0;e=n<<16>>16;l=r[p+(_<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(n<<16>>16<=0){if(f){r[p>>1]=l;l=t*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=r[p+-2>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=d;break}a[l>>2]=g;l=d;break}else{l=d+1|0;if((d|0)>32767)break t;r[p>>1]=l;a[s+1179664+(d<<2)>>2]=l<<16>>16;d=d*7|0;a[s+1310736+(d<<2)>>2]=1;a[s+1310736+(d+1<<2)>>2]=g;a[s+1310736+(d+2<<2)>>2]=w;a[s+1310736+(d+3<<2)>>2]=g;a[s+1310736+(d+4<<2)>>2]=g;a[s+1310736+(d+5<<2)>>2]=w;a[s+1310736+(d+6<<2)>>2]=w;break}}if(f){l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}f=r[p+-2>>1]|0;if(f<<16>>16<=0){r[p>>1]=n;l=e*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+w;l=d}else{r[p>>1]=0;l=d}while(0);g=g+1|0;i=i+8|0;f=p+2|0;if((g|0)>=(E|0))break;else{p=f;d=l}}}w=w+1|0;if((w|0)>=(k|0)){t=l;T=52;break e}else{i=i+m|0;f=f+4|0}}to(3,3904,M);l=-1}else{t=0;T=52}while(0);if((T|0)==52){n=s+12|0;if((t|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=s+8|0;l=i+-1|0;a[e>>2]=l;if(l){Xu(n|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{u=(a[s+1179664+(n<<2)>>2]|0)+-1|0;f=n*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));
l=0}else l=0}else l=0}h=R;return l|0}function Wn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}x=i*3|0;E=S+-1|0;if((n|0)>1){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{i=i+(S<<1)|0;u=u+(S<<1)|0}}}u=s+1179664|0;y=0-S|0;v=1-S|0;_=~S;m=(t<<1)+8|0;e:do if((k|0)>1){b=(E|0)>1;w=1;i=e+((t<<2)+4)|0;f=d+(S+1<<1)|0;l=0;t:while(1){if(b){g=1;p=f;d=l;while(1){t=o[i>>0]|0;do if(((t&240)+24+(t<<4&240)+((o[i+1>>0]|0)&240)|0)>(x|0)){l=r[p+(y<<1)>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}n=r[p+(v<<1)>>1]|0;e=n<<16>>16;l=r[p+(_<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(n<<16>>16<=0){if(f){r[p>>1]=l;l=t*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=r[p+-2>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=d;break}a[l>>2]=g;l=d;break}else{l=d+1|0;if((d|0)>32767)break t;r[p>>1]=l;a[s+1179664+(d<<2)>>2]=l<<16>>16;d=d*7|0;a[s+1310736+(d<<2)>>2]=1;a[s+1310736+(d+1<<2)>>2]=g;a[s+1310736+(d+2<<2)>>2]=w;a[s+1310736+(d+3<<2)>>2]=g;a[s+1310736+(d+4<<2)>>2]=g;a[s+1310736+(d+5<<2)>>2]=w;a[s+1310736+(d+6<<2)>>2]=w;break}}if(f){l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}f=r[p+-2>>1]|0;if(f<<16>>16<=0){r[p>>1]=n;l=e*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+w;l=d}else{r[p>>1]=0;l=d}while(0);g=g+1|0;i=i+4|0;f=p+2|0;if((g|0)>=(E|0))break;else{p=f;d=l}}}w=w+1|0;if((w|0)>=(k|0)){t=l;T=52;break e}else{i=i+m|0;f=f+4|0}}to(3,3904,M);l=-1}else{t=0;T=52}while(0);if((T|0)==52){n=s+12|0;if((t|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=s+8|0;l=i+-1|0;a[e>>2]=l;if(l){Xu(n|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{u=(a[s+1179664+(n<<2)>>2]|0)+-1|0;f=n*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function Xn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}x=i*3|0;E=S+-1|0;if((n|0)>1){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{i=i+(S<<1)|0;u=u+(S<<1)|0}}}u=s+1179664|0;y=0-S|0;v=1-S|0;_=~S;m=(t<<1)+8|0;e:do if((k|0)>1){b=(E|0)>1;w=1;i=e+((t<<2)+4)|0;f=d+(S+1<<1)|0;l=0;t:while(1){if(b){g=1;p=f;d=l;while(1){e=o[i>>0]|0;t=o[i+1>>0]|0;do if(((e&248)+12+(e<<5&224)+(t>>>3&24)+(t<<2&248)|0)>(x|0)){l=r[p+(y<<1)>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}n=r[p+(v<<1)>>1]|0;e=n<<16>>16;l=r[p+(_<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(n<<16>>16<=0){if(f){r[p>>1]=l;l=t*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=r[p+-2>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=d;break}a[l>>2]=g;l=d;break}else{l=d+1|0;if((d|0)>32767)break t;r[p>>1]=l;a[s+1179664+(d<<2)>>2]=l<<16>>16;d=d*7|0;a[s+1310736+(d<<2)>>2]=1;a[s+1310736+(d+1<<2)>>2]=g;a[s+1310736+(d+2<<2)>>2]=w;a[s+1310736+(d+3<<2)>>2]=g;a[s+1310736+(d+4<<2)>>2]=g;a[s+1310736+(d+5<<2)>>2]=w;a[s+1310736+(d+6<<2)>>2]=w;break}}if(f){l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}f=r[p+-2>>1]|0;if(f<<16>>16<=0){r[p>>1]=n;l=e*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+w;l=d}else{r[p>>1]=0;l=d}while(0);g=g+1|0;i=i+4|0;f=p+2|0;if((g|0)>=(E|0))break;else{p=f;d=l}}}w=w+1|0;if((w|0)>=(k|0)){t=l;T=52;break e}else{i=i+m|0;f=f+4|0}}to(3,3904,M);l=-1}else{t=0;T=52}while(0);if((T|0)==52){n=s+12|0;if((t|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=s+8|0;l=i+-1|0;a[e>>2]=l;if(l){Xu(n|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{u=(a[s+1179664+(n<<2)>>2]|0)+-1|0;f=n*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function Yn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}x=i*3|0;E=S+-1|0;if((n|0)>1){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{i=i+(S<<1)|0;u=u+(S<<1)|0}}}u=s+1179664|0;y=0-S|0;v=1-S|0;_=~S;m=(t<<2)+16|0;e:do if((k|0)>1){b=(E|0)>1;w=1;i=e+((t<<3)+8)|0;f=d+(S+1<<1)|0;l=0;t:while(1){if(b){g=1;p=f;d=l;while(1){do if(((o[i+2>>0]|0)+(o[i+1>>0]|0)+(o[i+3>>0]|0)|0)>(x|0)){l=r[p+(y<<1)>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}n=r[p+(v<<1)>>1]|0;e=n<<16>>16;l=r[p+(_<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(n<<16>>16<=0){if(f){r[p>>1]=l;l=t*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=r[p+-2>>1]|0;if(l<<16>>16>0){r[p>>1]=l;l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=d;break}a[l>>2]=g;l=d;break}else{l=d+1|0;if((d|0)>32767)break t;r[p>>1]=l;a[s+1179664+(d<<2)>>2]=l<<16>>16;d=d*7|0;a[s+1310736+(d<<2)>>2]=1;a[s+1310736+(d+1<<2)>>2]=g;a[s+1310736+(d+2<<2)>>2]=w;a[s+1310736+(d+3<<2)>>2]=g;a[s+1310736+(d+4<<2)>>2]=g;a[s+1310736+(d+5<<2)>>2]=w;a[s+1310736+(d+6<<2)>>2]=w;break}}if(f){l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;t=s+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+w;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}f=r[p+-2>>1]|0;if(f<<16>>16<=0){r[p>>1]=n;l=e*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[s+1310736+(l+-1<<2)>>2]=w;l=d;break}l=a[s+1179664+(e+-1<<2)>>2]|0;e=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){r[p>>1]=e;if((d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(l|0))a[n>>2]=e;f=f+1|0;if((f|0)>=(d|0)){l=e;break}else n=n+4|0}}else l=e}else{r[p>>1]=l;if((l|0)<(e|0)&(d|0)>0){f=0;n=u;while(1){if((a[n>>2]|0)==(e|0))a[n>>2]=l;f=f+1|0;if((f|0)>=(d|0))break;else n=n+4|0}}}l=(l<<16>>16)*7|0;t=s+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=s+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+g;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+w;l=d}else{r[p>>1]=0;l=d}while(0);g=g+1|0;i=i+8|0;f=p+2|0;if((g|0)>=(E|0))break;else{p=f;d=l}}}w=w+1|0;if((w|0)>=(k|0)){t=l;T=52;break e}else{i=i+m|0;f=f+4|0}}to(3,3904,M);l=-1}else{t=0;T=52}while(0);if((T|0)==52){n=s+12|0;if((t|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=s+8|0;l=i+-1|0;a[e>>2]=l;if(l){Xu(n|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{u=(a[s+1179664+(n<<2)>>2]|0)+-1|0;f=n*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function qn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}E=S+-1|0;if((n|0)>1){l=0;u=d;f=d+(E<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{u=u+(S<<1)|0;f=f+(S<<1)|0}}}f=s+1179664|0;b=0-S|0;_=1-S|0;y=~S;v=t+4|0;e:do if((k|0)>1){w=(E|0)>1;x=1;u=e+((t<<1)+2)|0;n=d+(S+1<<1)|0;l=0;t:while(1){if(w){m=1;g=n;p=l;while(1){do if((o[u>>0]|0|0)>(i|0)){l=r[g+(b<<1)>>1]|0;if(l<<16>>16>0){r[g>>1]=l;l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}e=r[g+(_<<1)>>1]|0;t=e<<16>>16;l=r[g+(y<<1)>>1]|0;d=l<<16>>16;n=l<<16>>16>0;if(e<<16>>16<=0){if(n){r[g>>1]=l;l=d*7|0;n=s+1310736+(l+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=s+1310736+(l+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+m;n=s+1310736+(l+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+x;n=s+1310736+(l+-3<<2)|0;if((a[n>>2]|0)<(m|0))a[n>>2]=m;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}l=r[g+-2>>1]|0;if(l<<16>>16>0){r[g>>1]=l;l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=p;break}a[l>>2]=m;l=p;break}else{l=p+1|0;if((p|0)>32767)break t;r[g>>1]=l;a[s+1179664+(p<<2)>>2]=l<<16>>16;p=p*7|0;a[s+1310736+(p<<2)>>2]=1;a[s+1310736+(p+1<<2)>>2]=m;a[s+1310736+(p+2<<2)>>2]=x;a[s+1310736+(p+3<<2)>>2]=m;a[s+1310736+(p+4<<2)>>2]=m;a[s+1310736+(p+5<<2)>>2]=x;a[s+1310736+(p+6<<2)>>2]=x;break}}if(n){l=a[s+1179664+(t+-1<<2)>>2]|0;t=a[s+1179664+(d+-1<<2)>>2]|0;if((l|0)>(t|0)){r[g>>1]=t;if((p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;n=n+1|0;if((n|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{r[g>>1]=l;if((l|0)<(t|0)&(p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;n=n+1|0;if((n|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}n=r[g+-2>>1]|0;if(n<<16>>16<=0){r[g>>1]=e;l=t*7|0;n=s+1310736+(l+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=s+1310736+(l+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+m;n=s+1310736+(l+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+x;n=s+1310736+(l+-4<<2)|0;if((a[n>>2]|0)>(m|0))a[n>>2]=m;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}l=a[s+1179664+(t+-1<<2)>>2]|0;t=a[s+1179664+((n<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){r[g>>1]=t;if((p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;n=n+1|0;if((n|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{r[g>>1]=l;if((l|0)<(t|0)&(p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;n=n+1|0;if((n|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=p}else{r[g>>1]=0;l=p}while(0);m=m+1|0;u=u+2|0;n=g+2|0;if((m|0)>=(E|0))break;else{g=n;p=l}}}x=x+1|0;if((x|0)>=(k|0)){d=l;T=52;break e}else{u=u+v|0;n=n+4|0}}to(3,3904,M);l=-1}else{d=0;T=52}while(0);if((T|0)==52){e=s+12|0;if((d|0)<1)u=1;else{n=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(n|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((n|0)<(d|0)){n=n+1|0;f=f+4|0}else break}}t=s+8|0;l=u+-1|0;a[t>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[t>>2]|0))}if((d|0)>0){e=0;do{f=(a[s+1179664+(e<<2)>>2]|0)+-1|0;n=e*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(n<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(n+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(n+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(n+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(n+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(n+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(n+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;e=e+1|0}while((e|0)<(d|0))}if((a[t>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[t>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function Zn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}E=S+-1|0;if((n|0)>1){l=0;u=d;f=d+(E<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{u=u+(S<<1)|0;f=f+(S<<1)|0}}}f=s+1179664|0;b=0-S|0;_=1-S|0;y=~S;v=(t<<1)+8|0;e:do if((k|0)>1){w=(E|0)>1;x=1;u=e+((t<<2)+4)|0;n=d+(S+1<<1)|0;l=0;t:while(1){if(w){m=1;g=n;p=l;while(1){do if((o[u+1>>0]|0|0)>(i|0)){l=r[g+(b<<1)>>1]|0;if(l<<16>>16>0){r[g>>1]=l;l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}e=r[g+(_<<1)>>1]|0;t=e<<16>>16;l=r[g+(y<<1)>>1]|0;d=l<<16>>16;n=l<<16>>16>0;if(e<<16>>16<=0){if(n){r[g>>1]=l;l=d*7|0;n=s+1310736+(l+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=s+1310736+(l+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+m;n=s+1310736+(l+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+x;n=s+1310736+(l+-3<<2)|0;if((a[n>>2]|0)<(m|0))a[n>>2]=m;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}l=r[g+-2>>1]|0;if(l<<16>>16>0){r[g>>1]=l;l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=p;break}a[l>>2]=m;l=p;break}else{l=p+1|0;if((p|0)>32767)break t;r[g>>1]=l;a[s+1179664+(p<<2)>>2]=l<<16>>16;p=p*7|0;a[s+1310736+(p<<2)>>2]=1;a[s+1310736+(p+1<<2)>>2]=m;a[s+1310736+(p+2<<2)>>2]=x;a[s+1310736+(p+3<<2)>>2]=m;a[s+1310736+(p+4<<2)>>2]=m;a[s+1310736+(p+5<<2)>>2]=x;a[s+1310736+(p+6<<2)>>2]=x;break}}if(n){l=a[s+1179664+(t+-1<<2)>>2]|0;t=a[s+1179664+(d+-1<<2)>>2]|0;if((l|0)>(t|0)){r[g>>1]=t;if((p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;n=n+1|0;if((n|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{r[g>>1]=l;if((l|0)<(t|0)&(p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;n=n+1|0;if((n|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}n=r[g+-2>>1]|0;if(n<<16>>16<=0){r[g>>1]=e;l=t*7|0;n=s+1310736+(l+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=s+1310736+(l+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+m;n=s+1310736+(l+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+x;n=s+1310736+(l+-4<<2)|0;if((a[n>>2]|0)>(m|0))a[n>>2]=m;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}l=a[s+1179664+(t+-1<<2)>>2]|0;t=a[s+1179664+((n<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){r[g>>1]=t;if((p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;n=n+1|0;if((n|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{r[g>>1]=l;if((l|0)<(t|0)&(p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;n=n+1|0;if((n|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=p}else{r[g>>1]=0;l=p}while(0);m=m+1|0;u=u+4|0;n=g+2|0;if((m|0)>=(E|0))break;else{g=n;p=l}}}x=x+1|0;if((x|0)>=(k|0)){d=l;T=52;break e}else{u=u+v|0;n=n+4|0}}to(3,3904,M);l=-1}else{d=0;T=52}while(0);if((T|0)==52){e=s+12|0;if((d|0)<1)u=1;else{n=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(n|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((n|0)<(d|0)){n=n+1|0;f=f+4|0}else break}}t=s+8|0;l=u+-1|0;a[t>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[t>>2]|0))}if((d|0)>0){e=0;do{f=(a[s+1179664+(e<<2)>>2]|0)+-1|0;n=e*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(n<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(n+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(n+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(n+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(n+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(n+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(n+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;e=e+1|0}while((e|0)<(d|0))}if((a[t>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[t>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function Qn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;R=h;h=h+16|0;M=R;S=(t|0)/2|0;A=(n|0)/2|0;d=a[s>>2]|0;k=A+-1|0;if((t|0)>1){l=0;u=d;f=d+((ne(k,S)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(S|0))break;else{u=u+2|0;f=f+2|0}}}E=S+-1|0;if((n|0)>1){l=0;u=d;f=d+(E<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(A|0))break;else{u=u+(S<<1)|0;f=f+(S<<1)|0}}}f=s+1179664|0;b=0-S|0;_=1-S|0;y=~S;v=(t<<1)+8|0;e:do if((k|0)>1){w=(E|0)>1;x=1;u=e+((t<<2)+4)|0;n=d+(S+1<<1)|0;l=0;t:while(1){if(w){m=1;g=n;p=l;while(1){do if((o[u>>0]|0|0)>(i|0)){l=r[g+(b<<1)>>1]|0;if(l<<16>>16>0){r[g>>1]=l;l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}e=r[g+(_<<1)>>1]|0;t=e<<16>>16;l=r[g+(y<<1)>>1]|0;d=l<<16>>16;n=l<<16>>16>0;if(e<<16>>16<=0){if(n){r[g>>1]=l;l=d*7|0;n=s+1310736+(l+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=s+1310736+(l+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+m;n=s+1310736+(l+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+x;n=s+1310736+(l+-3<<2)|0;if((a[n>>2]|0)<(m|0))a[n>>2]=m;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}l=r[g+-2>>1]|0;if(l<<16>>16>0){r[g>>1]=l;l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=p;break}a[l>>2]=m;l=p;break}else{l=p+1|0;if((p|0)>32767)break t;r[g>>1]=l;a[s+1179664+(p<<2)>>2]=l<<16>>16;p=p*7|0;a[s+1310736+(p<<2)>>2]=1;a[s+1310736+(p+1<<2)>>2]=m;a[s+1310736+(p+2<<2)>>2]=x;a[s+1310736+(p+3<<2)>>2]=m;a[s+1310736+(p+4<<2)>>2]=m;a[s+1310736+(p+5<<2)>>2]=x;a[s+1310736+(p+6<<2)>>2]=x;break}}if(n){l=a[s+1179664+(t+-1<<2)>>2]|0;t=a[s+1179664+(d+-1<<2)>>2]|0;if((l|0)>(t|0)){r[g>>1]=t;if((p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;n=n+1|0;if((n|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{r[g>>1]=l;if((l|0)<(t|0)&(p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;n=n+1|0;if((n|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;d=s+1310736+(l+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}n=r[g+-2>>1]|0;if(n<<16>>16<=0){r[g>>1]=e;l=t*7|0;n=s+1310736+(l+-7<<2)|0;a[n>>2]=(a[n>>2]|0)+1;n=s+1310736+(l+-6<<2)|0;a[n>>2]=(a[n>>2]|0)+m;n=s+1310736+(l+-5<<2)|0;a[n>>2]=(a[n>>2]|0)+x;n=s+1310736+(l+-4<<2)|0;if((a[n>>2]|0)>(m|0))a[n>>2]=m;a[s+1310736+(l+-1<<2)>>2]=x;l=p;break}l=a[s+1179664+(t+-1<<2)>>2]|0;t=a[s+1179664+((n<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){r[g>>1]=t;if((p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;n=n+1|0;if((n|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{r[g>>1]=l;if((l|0)<(t|0)&(p|0)>0){n=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;n=n+1|0;if((n|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;d=s+1310736+(l+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=s+1310736+(l+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+m;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=p}else{r[g>>1]=0;l=p}while(0);m=m+1|0;u=u+4|0;n=g+2|0;if((m|0)>=(E|0))break;else{g=n;p=l}}}x=x+1|0;if((x|0)>=(k|0)){d=l;T=52;break e}else{u=u+v|0;n=n+4|0}}to(3,3904,M);l=-1}else{d=0;T=52}while(0);if((T|0)==52){e=s+12|0;if((d|0)<1)u=1;else{n=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(n|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((n|0)<(d|0)){n=n+1|0;f=f+4|0}else break}}t=s+8|0;l=u+-1|0;a[t>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{T=l<<2;a[s+131084+(T<<2)>>2]=S;a[s+131084+((T|1)<<2)>>2]=0;a[s+131084+((T|2)<<2)>>2]=A;a[s+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[t>>2]|0))}if((d|0)>0){e=0;do{f=(a[s+1179664+(e<<2)>>2]|0)+-1|0;n=e*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(n<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(n+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(n+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(n+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(n+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(n+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(n+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;e=e+1|0}while((e|0)<(d|0))}if((a[t>>2]|0)>0){l=0;do{S=s+12+(l<<2)|0;A=l<<1;T=s+655376+(A<<3)|0;c[T>>3]=+c[T>>3]/+(a[S>>2]|0);A=s+655376+((A|1)<<3)|0;c[A>>3]=+c[A>>3]/+(a[S>>2]|0);l=l+1|0}while((l|0)<(a[t>>2]|0));l=0}else l=0}else l=0}h=R;return l|0}function $n(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=i*3|0;E=t+-1|0;if((n|0)>0){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{i=i+(t<<1)|0;u=u+(t<<1)|0}}}u=s+1179664|0;l=t+1|0;b=0-t|0;_=1-t|0;y=~t;e:do if((M|0)>1){w=(E|0)>1;x=1;i=e+(l*3|0)|0;f=d+(l<<1)|0;l=0;t:while(1){if(w){v=1;m=f;g=l;while(1){do if(((o[i+1>>0]|0)+(o[i>>0]|0)+(o[i+2>>0]|0)|0)>(k|0)){l=r[m+(b<<1)>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}e=r[m+(_<<1)>>1]|0;d=e<<16>>16;l=r[m+(y<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){r[m>>1]=l;l=p*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=r[m+-2>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=g;break}a[l>>2]=v;l=g;break}else{l=g+1|0;if((g|0)>32767)break t;r[m>>1]=l;a[s+1179664+(g<<2)>>2]=l<<16>>16;g=g*7|0;a[s+1310736+(g<<2)>>2]=1;a[s+1310736+(g+1<<2)>>2]=v;a[s+1310736+(g+2<<2)>>2]=x;a[s+1310736+(g+3<<2)>>2]=v;a[s+1310736+(g+4<<2)>>2]=v;a[s+1310736+(g+5<<2)>>2]=x;a[s+1310736+(g+6<<2)>>2]=x;break}}if(f){l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+(p+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}f=r[m+-2>>1]|0;if(f<<16>>16<=0){r[m>>1]=e;l=d*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=g}else{r[m>>1]=0;l=g}while(0);v=v+1|0;i=i+3|0;f=m+2|0;if((v|0)>=(E|0))break;else{m=f;g=l}}}x=x+1|0;if((x|0)>=(M|0)){p=l;S=52;break e}else{i=i+6|0;f=f+4|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){e=s+12|0;if((p|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}d=s+8|0;l=i+-1|0;a[d>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[d>>2]|0))}if((p|0)>0){e=0;do{u=(a[s+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;
i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((a[d>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[d>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function Jn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=i*3|0;E=t+-1|0;if((n|0)>0){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{i=i+(t<<1)|0;u=u+(t<<1)|0}}}u=s+1179664|0;l=t+1|0;b=0-t|0;_=1-t|0;y=~t;e:do if((M|0)>1){w=(E|0)>1;x=1;i=e+(l<<1)|0;f=d+(l<<1)|0;l=0;t:while(1){if(w){v=1;m=f;g=l;while(1){d=o[i>>0]|0;p=o[i+1>>0]|0;do if(((d&248)+10+(d<<5&224)+(p>>>3&28)+(p<<3&248)|0)>(k|0)){l=r[m+(b<<1)>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}e=r[m+(_<<1)>>1]|0;d=e<<16>>16;l=r[m+(y<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){r[m>>1]=l;l=p*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=r[m+-2>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=g;break}a[l>>2]=v;l=g;break}else{l=g+1|0;if((g|0)>32767)break t;r[m>>1]=l;a[s+1179664+(g<<2)>>2]=l<<16>>16;g=g*7|0;a[s+1310736+(g<<2)>>2]=1;a[s+1310736+(g+1<<2)>>2]=v;a[s+1310736+(g+2<<2)>>2]=x;a[s+1310736+(g+3<<2)>>2]=v;a[s+1310736+(g+4<<2)>>2]=v;a[s+1310736+(g+5<<2)>>2]=x;a[s+1310736+(g+6<<2)>>2]=x;break}}if(f){l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+(p+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}f=r[m+-2>>1]|0;if(f<<16>>16<=0){r[m>>1]=e;l=d*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=g}else{r[m>>1]=0;l=g}while(0);v=v+1|0;i=i+2|0;f=m+2|0;if((v|0)>=(E|0))break;else{m=f;g=l}}}x=x+1|0;if((x|0)>=(M|0)){p=l;S=52;break e}else{i=i+4|0;f=f+4|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){e=s+12|0;if((p|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}d=s+8|0;l=i+-1|0;a[d>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[d>>2]|0))}if((p|0)>0){e=0;do{u=(a[s+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((a[d>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[d>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function Kn(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=i*3|0;E=t+-1|0;if((n|0)>0){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{i=i+(t<<1)|0;u=u+(t<<1)|0}}}u=s+1179664|0;l=t+1|0;b=0-t|0;_=1-t|0;y=~t;e:do if((M|0)>1){w=(E|0)>1;x=1;i=e+(l<<2)|0;f=d+(l<<1)|0;l=0;t:while(1){if(w){v=1;m=f;g=l;while(1){do if(((o[i+1>>0]|0)+(o[i>>0]|0)+(o[i+2>>0]|0)|0)>(k|0)){l=r[m+(b<<1)>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}e=r[m+(_<<1)>>1]|0;d=e<<16>>16;l=r[m+(y<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){r[m>>1]=l;l=p*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=r[m+-2>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=g;break}a[l>>2]=v;l=g;break}else{l=g+1|0;if((g|0)>32767)break t;r[m>>1]=l;a[s+1179664+(g<<2)>>2]=l<<16>>16;g=g*7|0;a[s+1310736+(g<<2)>>2]=1;a[s+1310736+(g+1<<2)>>2]=v;a[s+1310736+(g+2<<2)>>2]=x;a[s+1310736+(g+3<<2)>>2]=v;a[s+1310736+(g+4<<2)>>2]=v;a[s+1310736+(g+5<<2)>>2]=x;a[s+1310736+(g+6<<2)>>2]=x;break}}if(f){l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+(p+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}f=r[m+-2>>1]|0;if(f<<16>>16<=0){r[m>>1]=e;l=d*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=g}else{r[m>>1]=0;l=g}while(0);v=v+1|0;i=i+4|0;f=m+2|0;if((v|0)>=(E|0))break;else{m=f;g=l}}}x=x+1|0;if((x|0)>=(M|0)){p=l;S=52;break e}else{i=i+8|0;f=f+4|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){e=s+12|0;if((p|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}d=s+8|0;l=i+-1|0;a[d>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[d>>2]|0))}if((p|0)>0){e=0;do{u=(a[s+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((a[d>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[d>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function ei(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=i*3|0;E=t+-1|0;if((n|0)>0){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{i=i+(t<<1)|0;u=u+(t<<1)|0}}}u=s+1179664|0;l=t+1|0;b=0-t|0;_=1-t|0;y=~t;e:do if((M|0)>1){w=(E|0)>1;x=1;i=e+(l<<1)|0;f=d+(l<<1)|0;l=0;t:while(1){if(w){v=1;m=f;g=l;while(1){p=o[i>>0]|0;do if(((p&240)+24+(p<<4&240)+((o[i+1>>0]|0)&240)|0)>(k|0)){l=r[m+(b<<1)>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}e=r[m+(_<<1)>>1]|0;d=e<<16>>16;l=r[m+(y<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){r[m>>1]=l;l=p*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=r[m+-2>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=g;break}a[l>>2]=v;l=g;break}else{l=g+1|0;if((g|0)>32767)break t;r[m>>1]=l;a[s+1179664+(g<<2)>>2]=l<<16>>16;g=g*7|0;a[s+1310736+(g<<2)>>2]=1;a[s+1310736+(g+1<<2)>>2]=v;a[s+1310736+(g+2<<2)>>2]=x;a[s+1310736+(g+3<<2)>>2]=v;a[s+1310736+(g+4<<2)>>2]=v;a[s+1310736+(g+5<<2)>>2]=x;a[s+1310736+(g+6<<2)>>2]=x;break}}if(f){l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+(p+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}f=r[m+-2>>1]|0;if(f<<16>>16<=0){r[m>>1]=e;l=d*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=g}else{r[m>>1]=0;l=g}while(0);v=v+1|0;i=i+2|0;f=m+2|0;if((v|0)>=(E|0))break;else{m=f;g=l}}}x=x+1|0;if((x|0)>=(M|0)){p=l;S=52;break e}else{i=i+4|0;f=f+4|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){e=s+12|0;if((p|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}d=s+8|0;l=i+-1|0;a[d>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[d>>2]|0))}if((p|0)>0){e=0;do{u=(a[s+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((a[d>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[d>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function ti(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=i*3|0;E=t+-1|0;if((n|0)>0){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{i=i+(t<<1)|0;u=u+(t<<1)|0}}}u=s+1179664|0;l=t+1|0;b=0-t|0;_=1-t|0;y=~t;e:do if((M|0)>1){w=(E|0)>1;x=1;i=e+(l<<1)|0;f=d+(l<<1)|0;l=0;t:while(1){if(w){v=1;m=f;g=l;while(1){d=o[i>>0]|0;p=o[i+1>>0]|0;do if(((d&248)+12+(d<<5&224)+(p>>>3&24)+(p<<2&248)|0)>(k|0)){l=r[m+(b<<1)>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}e=r[m+(_<<1)>>1]|0;d=e<<16>>16;l=r[m+(y<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){r[m>>1]=l;l=p*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=r[m+-2>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=g;break}a[l>>2]=v;l=g;break}else{l=g+1|0;if((g|0)>32767)break t;r[m>>1]=l;a[s+1179664+(g<<2)>>2]=l<<16>>16;g=g*7|0;a[s+1310736+(g<<2)>>2]=1;a[s+1310736+(g+1<<2)>>2]=v;a[s+1310736+(g+2<<2)>>2]=x;a[s+1310736+(g+3<<2)>>2]=v;a[s+1310736+(g+4<<2)>>2]=v;a[s+1310736+(g+5<<2)>>2]=x;a[s+1310736+(g+6<<2)>>2]=x;break}}if(f){l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+(p+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}f=r[m+-2>>1]|0;if(f<<16>>16<=0){r[m>>1]=e;l=d*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=g}else{r[m>>1]=0;l=g}while(0);v=v+1|0;i=i+2|0;f=m+2|0;if((v|0)>=(E|0))break;else{m=f;g=l}}}x=x+1|0;if((x|0)>=(M|0)){p=l;S=52;break e}else{i=i+4|0;f=f+4|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){e=s+12|0;if((p|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}d=s+8|0;l=i+-1|0;a[d>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[d>>2]|0))}if((p|0)>0){e=0;do{u=(a[s+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((a[d>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[d>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function ni(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=i*3|0;E=t+-1|0;if((n|0)>0){l=0;i=d;u=d+(E<<1)|0;while(1){r[u>>1]=0;r[i>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{i=i+(t<<1)|0;u=u+(t<<1)|0}}}u=s+1179664|0;l=t+1|0;b=0-t|0;_=1-t|0;y=~t;e:do if((M|0)>1){w=(E|0)>1;x=1;i=e+(l<<2)|0;f=d+(l<<1)|0;l=0;t:while(1){if(w){v=1;m=f;g=l;while(1){do if(((o[i+2>>0]|0)+(o[i+1>>0]|0)+(o[i+3>>0]|0)|0)>(k|0)){l=r[m+(b<<1)>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}e=r[m+(_<<1)>>1]|0;d=e<<16>>16;l=r[m+(y<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){r[m>>1]=l;l=p*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-3<<2)|0;if((a[f>>2]|0)<(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=r[m+-2>>1]|0;if(l<<16>>16>0){r[m>>1]=l;l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=g;break}a[l>>2]=v;l=g;break}else{l=g+1|0;if((g|0)>32767)break t;r[m>>1]=l;a[s+1179664+(g<<2)>>2]=l<<16>>16;g=g*7|0;a[s+1310736+(g<<2)>>2]=1;a[s+1310736+(g+1<<2)>>2]=v;a[s+1310736+(g+2<<2)>>2]=x;a[s+1310736+(g+3<<2)>>2]=v;a[s+1310736+(g+4<<2)>>2]=v;a[s+1310736+(g+5<<2)>>2]=x;a[s+1310736+(g+6<<2)>>2]=x;break}}if(f){l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+(p+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=s+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}f=r[m+-2>>1]|0;if(f<<16>>16<=0){r[m>>1]=e;l=d*7|0;f=s+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=s+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+v;f=s+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=s+1310736+(l+-4<<2)|0;if((a[f>>2]|0)>(v|0))a[f>>2]=v;a[s+1310736+(l+-1<<2)>>2]=x;l=g;break}l=a[s+1179664+(d+-1<<2)>>2]|0;d=a[s+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(d|0)){r[m>>1]=d;if((g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=d;f=f+1|0;if((f|0)>=(g|0)){l=d;break}else e=e+4|0}}else l=d}else{r[m>>1]=l;if((l|0)<(d|0)&(g|0)>0){f=0;e=u;while(1){if((a[e>>2]|0)==(d|0))a[e>>2]=l;f=f+1|0;if((f|0)>=(g|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=s+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=s+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+x;l=g}else{r[m>>1]=0;l=g}while(0);v=v+1|0;i=i+4|0;f=m+2|0;if((v|0)>=(E|0))break;else{m=f;g=l}}}x=x+1|0;if((x|0)>=(M|0)){p=l;S=52;break e}else{i=i+8|0;f=f+4|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){e=s+12|0;if((p|0)<1)i=1;else{f=1;i=1;while(1){l=a[u>>2]|0;if((l|0)==(f|0)){l=i;i=i+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}d=s+8|0;l=i+-1|0;a[d>>2]=l;if(l){Xu(e|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((i|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[d>>2]|0))}if((p|0)>0){e=0;do{u=(a[s+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=s+12+(u<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(f<<2)>>2]|0);l=u<<1;i=s+655376+(l<<3)|0;c[i>>3]=+c[i>>3]+ +(a[s+1310736+(f+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(f+2<<2)>>2]|0);u=u<<2;l=s+131084+(u<<2)|0;i=a[s+1310736+(f+3<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;l=s+131084+((u|1)<<2)|0;i=a[s+1310736+(f+4<<2)>>2]|0;if((a[l>>2]|0)<(i|0))a[l>>2]=i;l=s+131084+((u|2)<<2)|0;i=a[s+1310736+(f+5<<2)>>2]|0;if((a[l>>2]|0)>(i|0))a[l>>2]=i;i=s+131084+((u|3)<<2)|0;l=a[s+1310736+(f+6<<2)>>2]|0;if((a[i>>2]|0)<(l|0))a[i>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((a[d>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[d>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function ii(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=t+-1|0;if((n|0)>0){l=0;u=d;f=d+(k<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=s+1179664|0;l=t+1|0;w=0-t|0;y=1-t|0;b=~t;e:do if((M|0)>1){x=(k|0)>1;E=1;u=e+l|0;e=d+(l<<1)|0;l=0;t:while(1){if(x){_=1;v=e;m=l;while(1){do if((o[u>>0]|0|0)>(i|0)){l=r[v+(w<<1)>>1]|0;if(l<<16>>16>0){r[v>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}d=r[v+(y<<1)>>1]|0;p=d<<16>>16;l=r[v+(b<<1)>>1]|0;g=l<<16>>16;e=l<<16>>16>0;if(d<<16>>16<=0){if(e){r[v>>1]=l;l=g*7|0;e=s+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=s+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+_;e=s+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+E;e=s+1310736+(l+-3<<2)|0;if((a[e>>2]|0)<(_|0))a[e>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[v+-2>>1]|0;if(l<<16>>16>0){r[v>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(_|0)){l=m;break}a[l>>2]=_;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;r[v>>1]=l;a[s+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[s+1310736+(m<<2)>>2]=1;a[s+1310736+(m+1<<2)>>2]=_;a[s+1310736+(m+2<<2)>>2]=E;a[s+1310736+(m+3<<2)>>2]=_;a[s+1310736+(m+4<<2)>>2]=_;a[s+1310736+(m+5<<2)>>2]=E;a[s+1310736+(m+6<<2)>>2]=E;break}}if(e){l=a[s+1179664+(p+-1<<2)>>2]|0;p=a[s+1179664+(g+-1<<2)>>2]|0;if((l|0)>(p|0)){r[v>>1]=p;if((m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(l|0))a[d>>2]=p;e=e+1|0;if((e|0)>=(m|0)){l=p;break}else d=d+4|0}}else l=p}else{r[v>>1]=l;if((l|0)<(p|0)&(m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(p|0))a[d>>2]=l;e=e+1|0;if((e|0)>=(m|0))break;else d=d+4|0}}}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[v+-2>>1]|0;if(l<<16>>16<=0){r[v>>1]=d;l=p*7|0;e=s+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=s+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+_;e=s+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+E;e=s+1310736+(l+-4<<2)|0;if((a[e>>2]|0)>(_|0))a[e>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}p=a[s+1179664+(p+-1<<2)>>2]|0;l=a[s+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((p|0)>(l|0)){r[v>>1]=l;if((m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(p|0))a[d>>2]=l;e=e+1|0;if((e|0)>=(m|0))break;else d=d+4|0}}}else{r[v>>1]=p;if((p|0)<(l|0)&(m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(l|0))a[d>>2]=p;e=e+1|0;if((e|0)>=(m|0)){l=p;break}else d=d+4|0}}else l=p}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+E;l=m}else{r[v>>1]=0;l=m}while(0);_=_+1|0;u=u+1|0;e=v+2|0;if((_|0)>=(k|0))break;else{v=e;m=l}}}E=E+1|0;if((E|0)>=(M|0)){g=l;S=52;break e}else{u=u+2|0;e=e+4|0}}to(3,3904,T);l=-1}else{g=0;S=52}while(0);if((S|0)==52){d=s+12|0;if((g|0)<1)u=1;else{e=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((e|0)<(g|0)){e=e+1|0;f=f+4|0}else break}}p=s+8|0;l=u+-1|0;a[p>>2]=l;if(l){Xu(d|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[p>>2]|0))}if((g|0)>0){d=0;do{f=(a[s+1179664+(d<<2)>>2]|0)+-1|0;e=d*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(e<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(e+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(e+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(e+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;d=d+1|0}while((d|0)<(g|0))}if((a[p>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[p>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function ri(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=t+-1|0;if((n|0)>0){l=0;u=d;f=d+(k<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=s+1179664|0;l=t+1|0;w=0-t|0;y=1-t|0;b=~t;e:do if((M|0)>1){x=(k|0)>1;E=1;u=e+(l<<1)|0;e=d+(l<<1)|0;l=0;t:while(1){if(x){_=1;v=e;m=l;while(1){do if((o[u+1>>0]|0|0)>(i|0)){l=r[v+(w<<1)>>1]|0;if(l<<16>>16>0){r[v>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}d=r[v+(y<<1)>>1]|0;p=d<<16>>16;l=r[v+(b<<1)>>1]|0;g=l<<16>>16;e=l<<16>>16>0;if(d<<16>>16<=0){if(e){r[v>>1]=l;l=g*7|0;e=s+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=s+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+_;e=s+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+E;e=s+1310736+(l+-3<<2)|0;if((a[e>>2]|0)<(_|0))a[e>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[v+-2>>1]|0;if(l<<16>>16>0){r[v>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(_|0)){l=m;break}a[l>>2]=_;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;r[v>>1]=l;a[s+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[s+1310736+(m<<2)>>2]=1;a[s+1310736+(m+1<<2)>>2]=_;a[s+1310736+(m+2<<2)>>2]=E;a[s+1310736+(m+3<<2)>>2]=_;a[s+1310736+(m+4<<2)>>2]=_;a[s+1310736+(m+5<<2)>>2]=E;a[s+1310736+(m+6<<2)>>2]=E;break}}if(e){l=a[s+1179664+(p+-1<<2)>>2]|0;p=a[s+1179664+(g+-1<<2)>>2]|0;if((l|0)>(p|0)){r[v>>1]=p;if((m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(l|0))a[d>>2]=p;e=e+1|0;if((e|0)>=(m|0)){l=p;break}else d=d+4|0}}else l=p}else{r[v>>1]=l;if((l|0)<(p|0)&(m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(p|0))a[d>>2]=l;e=e+1|0;if((e|0)>=(m|0))break;else d=d+4|0}}}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}e=r[v+-2>>1]|0;if(e<<16>>16<=0){r[v>>1]=d;l=p*7|0;e=s+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=s+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+_;e=s+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+E;e=s+1310736+(l+-4<<2)|0;if((a[e>>2]|0)>(_|0))a[e>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=a[s+1179664+(p+-1<<2)>>2]|0;p=a[s+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((l|0)>(p|0)){r[v>>1]=p;if((m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(l|0))a[d>>2]=p;e=e+1|0;if((e|0)>=(m|0)){l=p;break}else d=d+4|0}}else l=p}else{r[v>>1]=l;if((l|0)<(p|0)&(m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(p|0))a[d>>2]=l;e=e+1|0;if((e|0)>=(m|0))break;else d=d+4|0}}}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+E;l=m}else{r[v>>1]=0;l=m}while(0);_=_+1|0;u=u+2|0;e=v+2|0;if((_|0)>=(k|0))break;else{v=e;m=l}}}E=E+1|0;if((E|0)>=(M|0)){g=l;S=52;break e}else{u=u+4|0;e=e+4|0}}to(3,3904,T);l=-1}else{g=0;S=52}while(0);if((S|0)==52){d=s+12|0;if((g|0)<1)u=1;else{e=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((e|0)<(g|0)){e=e+1|0;f=f+4|0}else break}}p=s+8|0;l=u+-1|0;a[p>>2]=l;if(l){Xu(d|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[p>>2]|0))}if((g|0)>0){d=0;do{f=(a[s+1179664+(d<<2)>>2]|0)+-1|0;e=d*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(e<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(e+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(e+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;
u=a[s+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(e+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;d=d+1|0}while((d|0)<(g|0))}if((a[p>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[p>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function ai(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=t+-1|0;if((n|0)>0){l=0;u=d;f=d+(k<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=s+1179664|0;l=t+1|0;w=0-t|0;y=1-t|0;b=~t;e:do if((M|0)>1){x=(k|0)>1;E=1;u=e+(l<<1)|0;e=d+(l<<1)|0;l=0;t:while(1){if(x){_=1;v=e;m=l;while(1){do if((o[u>>0]|0|0)>(i|0)){l=r[v+(w<<1)>>1]|0;if(l<<16>>16>0){r[v>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}d=r[v+(y<<1)>>1]|0;p=d<<16>>16;l=r[v+(b<<1)>>1]|0;g=l<<16>>16;e=l<<16>>16>0;if(d<<16>>16<=0){if(e){r[v>>1]=l;l=g*7|0;e=s+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=s+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+_;e=s+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+E;e=s+1310736+(l+-3<<2)|0;if((a[e>>2]|0)<(_|0))a[e>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[v+-2>>1]|0;if(l<<16>>16>0){r[v>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(_|0)){l=m;break}a[l>>2]=_;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;r[v>>1]=l;a[s+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[s+1310736+(m<<2)>>2]=1;a[s+1310736+(m+1<<2)>>2]=_;a[s+1310736+(m+2<<2)>>2]=E;a[s+1310736+(m+3<<2)>>2]=_;a[s+1310736+(m+4<<2)>>2]=_;a[s+1310736+(m+5<<2)>>2]=E;a[s+1310736+(m+6<<2)>>2]=E;break}}if(e){l=a[s+1179664+(p+-1<<2)>>2]|0;p=a[s+1179664+(g+-1<<2)>>2]|0;if((l|0)>(p|0)){r[v>>1]=p;if((m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(l|0))a[d>>2]=p;e=e+1|0;if((e|0)>=(m|0)){l=p;break}else d=d+4|0}}else l=p}else{r[v>>1]=l;if((l|0)<(p|0)&(m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(p|0))a[d>>2]=l;e=e+1|0;if((e|0)>=(m|0))break;else d=d+4|0}}}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[v+-2>>1]|0;if(l<<16>>16<=0){r[v>>1]=d;l=p*7|0;e=s+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=s+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+_;e=s+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+E;e=s+1310736+(l+-4<<2)|0;if((a[e>>2]|0)>(_|0))a[e>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}p=a[s+1179664+(p+-1<<2)>>2]|0;l=a[s+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((p|0)>(l|0)){r[v>>1]=l;if((m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(p|0))a[d>>2]=l;e=e+1|0;if((e|0)>=(m|0))break;else d=d+4|0}}}else{r[v>>1]=p;if((p|0)<(l|0)&(m|0)>0){e=0;d=f;while(1){if((a[d>>2]|0)==(l|0))a[d>>2]=p;e=e+1|0;if((e|0)>=(m|0)){l=p;break}else d=d+4|0}}else l=p}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+E;l=m}else{r[v>>1]=0;l=m}while(0);_=_+1|0;u=u+2|0;e=v+2|0;if((_|0)>=(k|0))break;else{v=e;m=l}}}E=E+1|0;if((E|0)>=(M|0)){g=l;S=52;break e}else{u=u+4|0;e=e+4|0}}to(3,3904,T);l=-1}else{g=0;S=52}while(0);if((S|0)==52){d=s+12|0;if((g|0)<1)u=1;else{e=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((e|0)<(g|0)){e=e+1|0;f=f+4|0}else break}}p=s+8|0;l=u+-1|0;a[p>>2]=l;if(l){Xu(d|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[p>>2]|0))}if((g|0)>0){d=0;do{f=(a[s+1179664+(d<<2)>>2]|0)+-1|0;e=d*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(e<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(e+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(e+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(e+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;d=d+1|0}while((d|0)<(g|0))}if((a[p>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[p>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function oi(e,t,n,i,s){e=e|0;t=t|0;n=n|0;i=i|0;s=s|0;var l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;A=h;h=h+16|0;T=A;d=a[s>>2]|0;M=n+-1|0;if((t|0)>0){l=0;u=d;f=d+((ne(M,t)|0)<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}k=t+-1|0;if((n|0)>0){l=0;u=d;f=d+(k<<1)|0;while(1){r[f>>1]=0;r[u>>1]=0;l=l+1|0;if((l|0)>=(n|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=s+1179664|0;l=t+1|0;w=0-t|0;y=1-t|0;b=~t;e:do if((M|0)>1){x=(k|0)>1;E=1;u=e+l|0;e=d+(l<<1)|0;d=i+l|0;l=0;t:while(1){if(x){_=1;v=u;m=l;while(1){do if((o[v>>0]|0)>(o[d>>0]|0)){l=r[e+(w<<1)>>1]|0;if(l<<16>>16>0){r[e>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}i=r[e+(y<<1)>>1]|0;p=i<<16>>16;l=r[e+(b<<1)>>1]|0;g=l<<16>>16;u=l<<16>>16>0;if(i<<16>>16<=0){if(u){r[e>>1]=l;l=g*7|0;u=s+1310736+(l+-7<<2)|0;a[u>>2]=(a[u>>2]|0)+1;u=s+1310736+(l+-6<<2)|0;a[u>>2]=(a[u>>2]|0)+_;u=s+1310736+(l+-5<<2)|0;a[u>>2]=(a[u>>2]|0)+E;u=s+1310736+(l+-3<<2)|0;if((a[u>>2]|0)<(_|0))a[u>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[e+-2>>1]|0;if(l<<16>>16>0){r[e>>1]=l;l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;l=s+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(_|0)){l=m;break}a[l>>2]=_;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;r[e>>1]=l;a[s+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[s+1310736+(m<<2)>>2]=1;a[s+1310736+(m+1<<2)>>2]=_;a[s+1310736+(m+2<<2)>>2]=E;a[s+1310736+(m+3<<2)>>2]=_;a[s+1310736+(m+4<<2)>>2]=_;a[s+1310736+(m+5<<2)>>2]=E;a[s+1310736+(m+6<<2)>>2]=E;break}}if(u){l=a[s+1179664+(p+-1<<2)>>2]|0;p=a[s+1179664+(g+-1<<2)>>2]|0;if((l|0)>(p|0)){r[e>>1]=p;if((m|0)>0){u=0;i=f;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=p;u=u+1|0;if((u|0)>=(m|0)){l=p;break}else i=i+4|0}}else l=p}else{r[e>>1]=l;if((l|0)<(p|0)&(m|0)>0){u=0;i=f;while(1){if((a[i>>2]|0)==(p|0))a[i>>2]=l;u=u+1|0;if((u|0)>=(m|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;g=s+1310736+(l+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+E;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}l=r[e+-2>>1]|0;if(l<<16>>16<=0){r[e>>1]=i;l=p*7|0;u=s+1310736+(l+-7<<2)|0;a[u>>2]=(a[u>>2]|0)+1;u=s+1310736+(l+-6<<2)|0;a[u>>2]=(a[u>>2]|0)+_;u=s+1310736+(l+-5<<2)|0;a[u>>2]=(a[u>>2]|0)+E;u=s+1310736+(l+-4<<2)|0;if((a[u>>2]|0)>(_|0))a[u>>2]=_;a[s+1310736+(l+-1<<2)>>2]=E;l=m;break}p=a[s+1179664+(p+-1<<2)>>2]|0;l=a[s+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((p|0)>(l|0)){r[e>>1]=l;if((m|0)>0){u=0;i=f;while(1){if((a[i>>2]|0)==(p|0))a[i>>2]=l;u=u+1|0;if((u|0)>=(m|0))break;else i=i+4|0}}}else{r[e>>1]=p;if((p|0)<(l|0)&(m|0)>0){u=0;i=f;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=p;u=u+1|0;if((u|0)>=(m|0)){l=p;break}else i=i+4|0}}else l=p}l=(l<<16>>16)*7|0;g=s+1310736+(l+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=s+1310736+(l+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+_;l=s+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+E;l=m}else{r[e>>1]=0;l=m}while(0);_=_+1|0;u=v+1|0;d=d+1|0;e=e+2|0;if((_|0)>=(k|0))break;else{v=u;m=l}}}E=E+1|0;if((E|0)>=(M|0)){p=l;S=52;break e}else{u=u+2|0;e=e+4|0;d=d+2|0}}to(3,3904,T);l=-1}else{p=0;S=52}while(0);if((S|0)==52){d=s+12|0;if((p|0)<1)u=1;else{e=1;u=1;while(1){l=a[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=a[s+1179664+(l+-1<<2)>>2]|0;a[f>>2]=l;if((e|0)<(p|0)){e=e+1|0;f=f+4|0}else break}}i=s+8|0;l=u+-1|0;a[i>>2]=l;if(l){Xu(d|0,0,l<<2|0)|0;Xu(s+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{S=l<<2;a[s+131084+(S<<2)>>2]=t;a[s+131084+((S|1)<<2)>>2]=0;a[s+131084+((S|2)<<2)>>2]=n;a[s+131084+((S|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[i>>2]|0))}if((p|0)>0){d=0;do{f=(a[s+1179664+(d<<2)>>2]|0)+-1|0;e=d*7|0;l=s+12+(f<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[s+1310736+(e<<2)>>2]|0);l=f<<1;u=s+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(a[s+1310736+(e+1<<2)>>2]|0);l=s+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(a[s+1310736+(e+2<<2)>>2]|0);f=f<<2;l=s+131084+(f<<2)|0;u=a[s+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;l=s+131084+((f|1)<<2)|0;u=a[s+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(u|0))a[l>>2]=u;l=s+131084+((f|2)<<2)|0;u=a[s+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(u|0))a[l>>2]=u;u=s+131084+((f|3)<<2)|0;l=a[s+1310736+(e+6<<2)>>2]|0;if((a[u>>2]|0)<(l|0))a[u>>2]=l;d=d+1|0}while((d|0)<(p|0))}if((a[i>>2]|0)>0){l=0;do{t=s+12+(l<<2)|0;n=l<<1;S=s+655376+(n<<3)|0;c[S>>3]=+c[S>>3]/+(a[t>>2]|0);n=s+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[i>>2]|0));l=0}else l=0}else l=0}h=A;return l|0}function si(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}k=s*3|0;M=R+-1|0;if((n|0)>1){u=0;s=p;f=p+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{s=s+(R<<1)|0;f=f+(R<<1)|0}}}f=l+1179664|0;s=R+1|0;w=0-R|0;y=1-R|0;b=~R;_=(t*3|0)+12|0;e:do if((T|0)>1){x=(M|0)>1;u=(a[l+4>>2]|0)+s|0;E=1;d=e+((t*6|0)+6)|0;n=p+(s<<1)|0;s=0;t:while(1){if(x){v=1;m=d;g=s;while(1){do if(((o[m+1>>0]|0)+(o[m>>0]|0)+(o[m+2>>0]|0)|0)>(k|0)){r[n>>1]=0;i[u>>0]=0;s=g}else{i[u>>0]=-1;s=r[n+(w<<1)>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}e=r[n+(y<<1)>>1]|0;t=e<<16>>16;s=r[n+(b<<1)>>1]|0;p=s<<16>>16;d=s<<16>>16>0;if(e<<16>>16<=0){if(d){r[n>>1]=s;s=p*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=r[n+-2>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(v|0)){s=g;break}a[s>>2]=v;s=g;break}else{s=g+1|0;if((g|0)>32767)break t;r[n>>1]=s;a[l+1179664+(g<<2)>>2]=s<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=v;a[l+1310736+(g+2<<2)>>2]=E;a[l+1310736+(g+3<<2)>>2]=v;a[l+1310736+(g+4<<2)>>2]=v;a[l+1310736+(g+5<<2)>>2]=E;a[l+1310736+(g+6<<2)>>2]=E;break}}if(d){s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(p+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}d=r[n+-2>>1]|0;if(d<<16>>16<=0){r[n>>1]=e;s=t*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+E;s=g}while(0);v=v+1|0;d=m+6|0;n=n+2|0;u=u+1|0;if((v|0)>=(M|0))break;else{m=d;g=s}}}E=E+1|0;if((E|0)>=(T|0)){t=s;A=52;break e}else{u=u+2|0;d=d+_|0;n=n+4|0}}to(3,3904,S);u=-1}else{t=0;A=52}while(0);if((A|0)==52){n=l+12|0;if((t|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(t|0)){d=d+1|0;f=f+4|0}else break}}e=l+8|0;u=s+-1|0;a[e>>2]=u;if(u){Xu(n|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{f=(a[l+1179664+(n<<2)>>2]|0)+-1|0;d=n*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[e>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function li(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}k=s*3|0;M=R+-1|0;if((n|0)>1){u=0;s=p;f=p+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{s=s+(R<<1)|0;f=f+(R<<1)|0}}}f=l+1179664|0;s=R+1|0;w=0-R|0;y=1-R|0;b=~R;_=(t<<1)+8|0;e:do if((T|0)>1){x=(M|0)>1;u=(a[l+4>>2]|0)+s|0;E=1;d=e+((t<<2)+4)|0;n=p+(s<<1)|0;s=0;t:while(1){if(x){v=1;m=d;g=s;while(1){t=o[m>>0]|0;p=o[m+1>>0]|0;do if(((t&248)+10+(t<<5&224)+(p>>>3&28)+(p<<3&248)|0)>(k|0)){r[n>>1]=0;i[u>>0]=0;s=g}else{i[u>>0]=-1;s=r[n+(w<<1)>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}e=r[n+(y<<1)>>1]|0;t=e<<16>>16;s=r[n+(b<<1)>>1]|0;p=s<<16>>16;d=s<<16>>16>0;if(e<<16>>16<=0){if(d){r[n>>1]=s;s=p*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=r[n+-2>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(v|0)){s=g;break}a[s>>2]=v;s=g;break}else{s=g+1|0;if((g|0)>32767)break t;r[n>>1]=s;a[l+1179664+(g<<2)>>2]=s<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=v;a[l+1310736+(g+2<<2)>>2]=E;a[l+1310736+(g+3<<2)>>2]=v;a[l+1310736+(g+4<<2)>>2]=v;a[l+1310736+(g+5<<2)>>2]=E;a[l+1310736+(g+6<<2)>>2]=E;break}}if(d){s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(p+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}d=r[n+-2>>1]|0;if(d<<16>>16<=0){r[n>>1]=e;s=t*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+E;s=g}while(0);v=v+1|0;d=m+4|0;n=n+2|0;u=u+1|0;if((v|0)>=(M|0))break;else{m=d;g=s}}}E=E+1|0;if((E|0)>=(T|0)){t=s;A=52;break e}else{u=u+2|0;d=d+_|0;n=n+4|0}}to(3,3904,S);u=-1}else{t=0;A=52}while(0);if((A|0)==52){n=l+12|0;if((t|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(t|0)){d=d+1|0;f=f+4|0}else break}}e=l+8|0;u=s+-1|0;a[e>>2]=u;if(u){Xu(n|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{f=(a[l+1179664+(n<<2)>>2]|0)+-1|0;d=n*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[e>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function ui(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}k=s*3|0;M=R+-1|0;if((n|0)>1){u=0;s=p;f=p+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{s=s+(R<<1)|0;f=f+(R<<1)|0}}}f=l+1179664|0;s=R+1|0;w=0-R|0;y=1-R|0;b=~R;_=(t<<2)+16|0;e:do if((T|0)>1){x=(M|0)>1;u=(a[l+4>>2]|0)+s|0;E=1;d=e+((t<<3)+8)|0;n=p+(s<<1)|0;s=0;t:while(1){if(x){v=1;m=d;g=s;while(1){do if(((o[m+1>>0]|0)+(o[m>>0]|0)+(o[m+2>>0]|0)|0)>(k|0)){r[n>>1]=0;i[u>>0]=0;s=g}else{i[u>>0]=-1;s=r[n+(w<<1)>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}e=r[n+(y<<1)>>1]|0;t=e<<16>>16;s=r[n+(b<<1)>>1]|0;p=s<<16>>16;d=s<<16>>16>0;if(e<<16>>16<=0){if(d){r[n>>1]=s;s=p*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=r[n+-2>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(v|0)){s=g;break}a[s>>2]=v;s=g;break}else{s=g+1|0;if((g|0)>32767)break t;r[n>>1]=s;a[l+1179664+(g<<2)>>2]=s<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=v;a[l+1310736+(g+2<<2)>>2]=E;a[l+1310736+(g+3<<2)>>2]=v;a[l+1310736+(g+4<<2)>>2]=v;a[l+1310736+(g+5<<2)>>2]=E;a[l+1310736+(g+6<<2)>>2]=E;break}}if(d){s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(p+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}d=r[n+-2>>1]|0;if(d<<16>>16<=0){r[n>>1]=e;s=t*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+E;s=g}while(0);v=v+1|0;d=m+8|0;n=n+2|0;u=u+1|0;if((v|0)>=(M|0))break;else{m=d;g=s}}}E=E+1|0;if((E|0)>=(T|0)){t=s;A=52;break e}else{u=u+2|0;d=d+_|0;n=n+4|0}}to(3,3904,S);u=-1}else{t=0;A=52}while(0);if((A|0)==52){n=l+12|0;if((t|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(t|0)){d=d+1|0;f=f+4|0}else break}}e=l+8|0;u=s+-1|0;a[e>>2]=u;if(u){Xu(n|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{f=(a[l+1179664+(n<<2)>>2]|0)+-1|0;d=n*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[e>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function ci(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}k=s*3|0;M=R+-1|0;if((n|0)>1){u=0;s=p;f=p+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{s=s+(R<<1)|0;f=f+(R<<1)|0}}}f=l+1179664|0;s=R+1|0;w=0-R|0;y=1-R|0;b=~R;_=(t<<1)+8|0;e:do if((T|0)>1){x=(M|0)>1;u=(a[l+4>>2]|0)+s|0;E=1;d=e+((t<<2)+4)|0;n=p+(s<<1)|0;s=0;t:while(1){if(x){v=1;m=d;g=s;while(1){p=o[m>>0]|0;do if(((p&240)+24+(p<<4&240)+((o[m+1>>0]|0)&240)|0)>(k|0)){r[n>>1]=0;i[u>>0]=0;s=g}else{i[u>>0]=-1;s=r[n+(w<<1)>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}e=r[n+(y<<1)>>1]|0;t=e<<16>>16;s=r[n+(b<<1)>>1]|0;p=s<<16>>16;d=s<<16>>16>0;if(e<<16>>16<=0){if(d){r[n>>1]=s;s=p*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=r[n+-2>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(v|0)){s=g;break}a[s>>2]=v;s=g;break}else{s=g+1|0;if((g|0)>32767)break t;r[n>>1]=s;a[l+1179664+(g<<2)>>2]=s<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=v;a[l+1310736+(g+2<<2)>>2]=E;a[l+1310736+(g+3<<2)>>2]=v;a[l+1310736+(g+4<<2)>>2]=v;a[l+1310736+(g+5<<2)>>2]=E;a[l+1310736+(g+6<<2)>>2]=E;break}}if(d){s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(p+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}d=r[n+-2>>1]|0;if(d<<16>>16<=0){r[n>>1]=e;s=t*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+E;s=g}while(0);v=v+1|0;d=m+4|0;n=n+2|0;u=u+1|0;if((v|0)>=(M|0))break;else{m=d;g=s}}}E=E+1|0;if((E|0)>=(T|0)){t=s;A=52;break e}else{u=u+2|0;d=d+_|0;n=n+4|0}}to(3,3904,S);u=-1}else{t=0;A=52}while(0);if((A|0)==52){n=l+12|0;if((t|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(t|0)){d=d+1|0;f=f+4|0}else break}}e=l+8|0;u=s+-1|0;a[e>>2]=u;if(u){Xu(n|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{f=(a[l+1179664+(n<<2)>>2]|0)+-1|0;d=n*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[e>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function hi(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}k=s*3|0;M=R+-1|0;if((n|0)>1){u=0;s=p;f=p+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{s=s+(R<<1)|0;f=f+(R<<1)|0}}}f=l+1179664|0;s=R+1|0;w=0-R|0;y=1-R|0;b=~R;_=(t<<1)+8|0;e:do if((T|0)>1){x=(M|0)>1;u=(a[l+4>>2]|0)+s|0;E=1;d=e+((t<<2)+4)|0;n=p+(s<<1)|0;s=0;t:while(1){if(x){v=1;m=d;g=s;while(1){t=o[m>>0]|0;p=o[m+1>>0]|0;do if(((t&248)+12+(t<<5&224)+(p>>>3&24)+(p<<2&248)|0)>(k|0)){r[n>>1]=0;i[u>>0]=0;s=g}else{i[u>>0]=-1;s=r[n+(w<<1)>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}e=r[n+(y<<1)>>1]|0;t=e<<16>>16;s=r[n+(b<<1)>>1]|0;p=s<<16>>16;d=s<<16>>16>0;if(e<<16>>16<=0){if(d){r[n>>1]=s;s=p*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=r[n+-2>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(v|0)){s=g;break}a[s>>2]=v;s=g;break}else{s=g+1|0;if((g|0)>32767)break t;r[n>>1]=s;a[l+1179664+(g<<2)>>2]=s<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=v;a[l+1310736+(g+2<<2)>>2]=E;a[l+1310736+(g+3<<2)>>2]=v;a[l+1310736+(g+4<<2)>>2]=v;a[l+1310736+(g+5<<2)>>2]=E;a[l+1310736+(g+6<<2)>>2]=E;break}}if(d){s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(p+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}d=r[n+-2>>1]|0;if(d<<16>>16<=0){r[n>>1]=e;s=t*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+E;s=g}while(0);v=v+1|0;d=m+4|0;n=n+2|0;u=u+1|0;if((v|0)>=(M|0))break;else{m=d;g=s}}}E=E+1|0;if((E|0)>=(T|0)){t=s;A=52;break e}else{u=u+2|0;d=d+_|0;n=n+4|0}}to(3,3904,S);u=-1}else{t=0;A=52}while(0);if((A|0)==52){n=l+12|0;if((t|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;
a[f>>2]=u;if((d|0)<(t|0)){d=d+1|0;f=f+4|0}else break}}e=l+8|0;u=s+-1|0;a[e>>2]=u;if(u){Xu(n|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{f=(a[l+1179664+(n<<2)>>2]|0)+-1|0;d=n*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[e>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function fi(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;S=P;R=(t|0)/2|0;C=(n|0)/2|0;p=a[l>>2]|0;T=C+-1|0;if((t|0)>1){u=0;f=p;d=p+((ne(T,R)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(R|0))break;else{f=f+2|0;d=d+2|0}}}k=s*3|0;M=R+-1|0;if((n|0)>1){u=0;s=p;f=p+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(C|0))break;else{s=s+(R<<1)|0;f=f+(R<<1)|0}}}f=l+1179664|0;s=R+1|0;w=0-R|0;y=1-R|0;b=~R;_=(t<<2)+16|0;e:do if((T|0)>1){x=(M|0)>1;u=(a[l+4>>2]|0)+s|0;E=1;d=e+((t<<3)+8)|0;n=p+(s<<1)|0;s=0;t:while(1){if(x){v=1;m=d;g=s;while(1){do if(((o[m+2>>0]|0)+(o[m+1>>0]|0)+(o[m+3>>0]|0)|0)>(k|0)){r[n>>1]=0;i[u>>0]=0;s=g}else{i[u>>0]=-1;s=r[n+(w<<1)>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}e=r[n+(y<<1)>>1]|0;t=e<<16>>16;s=r[n+(b<<1)>>1]|0;p=s<<16>>16;d=s<<16>>16>0;if(e<<16>>16<=0){if(d){r[n>>1]=s;s=p*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=r[n+-2>>1]|0;if(s<<16>>16>0){r[n>>1]=s;s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(v|0)){s=g;break}a[s>>2]=v;s=g;break}else{s=g+1|0;if((g|0)>32767)break t;r[n>>1]=s;a[l+1179664+(g<<2)>>2]=s<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=v;a[l+1310736+(g+2<<2)>>2]=E;a[l+1310736+(g+3<<2)>>2]=v;a[l+1310736+(g+4<<2)>>2]=v;a[l+1310736+(g+5<<2)>>2]=E;a[l+1310736+(g+6<<2)>>2]=E;break}}if(d){s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(p+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;p=l+1310736+(s+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+E;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}d=r[n+-2>>1]|0;if(d<<16>>16<=0){r[n>>1]=e;s=t*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+v;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+E;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(v|0))a[d>>2]=v;a[l+1310736+(s+-1<<2)>>2]=E;s=g;break}s=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(t|0)){r[n>>1]=t;if((g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(s|0))a[e>>2]=t;d=d+1|0;if((d|0)>=(g|0)){s=t;break}else e=e+4|0}}else s=t}else{r[n>>1]=s;if((s|0)<(t|0)&(g|0)>0){d=0;e=f;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=s;d=d+1|0;if((d|0)>=(g|0))break;else e=e+4|0}}}s=(s<<16>>16)*7|0;p=l+1310736+(s+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=l+1310736+(s+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+v;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+E;s=g}while(0);v=v+1|0;d=m+8|0;n=n+2|0;u=u+1|0;if((v|0)>=(M|0))break;else{m=d;g=s}}}E=E+1|0;if((E|0)>=(T|0)){t=s;A=52;break e}else{u=u+2|0;d=d+_|0;n=n+4|0}}to(3,3904,S);u=-1}else{t=0;A=52}while(0);if((A|0)==52){n=l+12|0;if((t|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(t|0)){d=d+1|0;f=f+4|0}else break}}e=l+8|0;u=s+-1|0;a[e>>2]=u;if(u){Xu(n|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{A=u<<2;a[l+131084+(A<<2)>>2]=R;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=C;a[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[e>>2]|0))}if((t|0)>0){n=0;do{f=(a[l+1179664+(n<<2)>>2]|0)+-1|0;d=n*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;n=n+1|0}while((n|0)<(t|0))}if((a[e>>2]|0)>0){u=0;do{R=l+12+(u<<2)|0;C=u<<1;A=l+655376+(C<<3)|0;c[A>>3]=+c[A>>3]/+(a[R>>2]|0);C=l+655376+((C|1)<<3)|0;c[C>>3]=+c[C>>3]/+(a[R>>2]|0);u=u+1|0}while((u|0)<(a[e>>2]|0));u=0}else u=0}else u=0}h=P;return u|0}function di(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;if((t|0)!=1){if(t+-1&t)t=zu(t)|0}else t=2;r=a[e+4>>2]|0;if(t>>>0<=r>>>0){if(t>>>0<r>>>0){if(r>>>0>2)i=(r+-1&r|0)==0;else i=0;n=~~+te(+(+((a[e+12>>2]|0)>>>0)/+u[e+16>>2]))>>>0;if(i)n=1<<32-(re(n+-1|0)|0);else n=zu(n)|0;t=t>>>0<n>>>0?n:t;if(t>>>0<r>>>0)pi(e,t)}}else pi(e,t);return}function pi(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,u=0,c=0,h=0,f=0;i=e+4|0;e:do if(t){f=Pi(t<<2)|0;n=a[e>>2]|0;a[e>>2]=f;if(n)Oi(n);a[i>>2]=t;if(t){n=0;do{a[(a[e>>2]|0)+(n<<2)>>2]=0;n=n+1|0}while((n|0)!=(t|0))}i=e+8|0;r=a[i>>2]|0;if(r){n=a[r+4>>2]|0;h=t+-1|0;f=(h&t|0)==0;if(f)s=n&h;else s=(n>>>0)%(t>>>0)|0;a[(a[e>>2]|0)+(s<<2)>>2]=i;n=a[r>>2]|0;if(n){o=r;i=r;while(1){c=i;t:while(1){while(1){i=a[n+4>>2]|0;if(f)u=i&h;else u=(i>>>0)%(t>>>0)|0;if((u|0)==(s|0)){i=n;break}i=(a[e>>2]|0)+(u<<2)|0;if(!(a[i>>2]|0)){s=u;r=n;break t}l=n+8|0;i=n;while(1){r=a[i>>2]|0;if(!r)break;if((a[l>>2]|0)==(a[r+8>>2]|0))i=r;else break}a[o>>2]=r;a[i>>2]=a[a[(a[e>>2]|0)+(u<<2)>>2]>>2];a[a[(a[e>>2]|0)+(u<<2)>>2]>>2]=n;n=a[c>>2]|0;if(!n)break e}n=a[i>>2]|0;if(!n)break e;else{o=i;c=i}}a[i>>2]=o;n=a[r>>2]|0;if(!n)break;else{o=r;i=r}}}}}else{n=a[e>>2]|0;a[e>>2]=0;if(n)Oi(n);a[i>>2]=0}while(0);return}function gi(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,s=0,l=0;o=h;h=h+32|0;s=o+16|0;r=o+4|0;l=o;t=a[t>>2]|0;n=a[t>>2]|0;a[l>>2]=t;a[s>>2]=a[l>>2];mi(r,e,s);t=a[r>>2]|0;a[r>>2]=0;if(t){if(i[r+8>>0]|0)qs(t+264|0);Oi(t)}h=o;return n|0}function mi(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,s=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0;p=a[n>>2]|0;h=a[t+4>>2]|0;n=a[p+4>>2]|0;f=h+-1|0;d=(f&h|0)==0;if(d)c=f&n;else c=(n>>>0)%(h>>>0)|0;o=(a[t>>2]|0)+(c<<2)|0;r=a[o>>2]|0;while(1){n=a[r>>2]|0;if((n|0)==(p|0)){u=r;break}else r=n}l=t+8|0;if((u|0)!=(l|0)){n=a[u+4>>2]|0;if(d)n=n&f;else n=(n>>>0)%(h>>>0)|0;if((n|0)==(c|0))o=p;else s=12}else s=12;do if((s|0)==12){n=a[p>>2]|0;if(n){n=a[n+4>>2]|0;if(d)n=n&f;else n=(n>>>0)%(h>>>0)|0;if((n|0)==(c|0)){o=p;break}}a[o>>2]=0;o=p}while(0);r=a[o>>2]|0;n=r;if(r){r=a[r+4>>2]|0;if(d)r=r&f;else r=(r>>>0)%(h>>>0)|0;if((r|0)!=(c|0)){a[(a[t>>2]|0)+(r<<2)>>2]=u;n=a[p>>2]|0}}a[u>>2]=n;a[o>>2]=0;t=t+12|0;a[t>>2]=(a[t>>2]|0)+-1;a[e>>2]=p;a[e+4>>2]=l;i[e+8>>0]=1;return}function vi(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=Pi(408)|0;a[i+8>>2]=a[n>>2];Xu(i+16|0,0,392)|0;c[i+248>>3]=1e-4;c[i+256>>3]=1e3;n=i+264|0;a[n>>2]=0;a[n+4>>2]=0;a[n+8>>2]=0;a[n+12>>2]=0;a[e>>2]=i;e=e+4|0;a[e>>2]=t+8;a[e+4>>2]=257;return}function _i(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,s=0,l=0,c=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0;f=a[n+8>>2]|0;_=n+4|0;a[_>>2]=f;v=t+4|0;h=a[v>>2]|0;m=(h|0)==0;e:do if(!m){d=h+-1|0;p=(d&h|0)==0;if(p)o=d&f;else o=(f>>>0)%(h>>>0)|0;r=a[(a[t>>2]|0)+(o<<2)>>2]|0;if(!r)g=12;else while(1){s=a[r>>2]|0;if(!s){g=12;break e}r=a[s+4>>2]|0;if(p)r=r&d;else r=(r>>>0)%(h>>>0)|0;if((r|0)!=(o|0)){g=12;break e}if((a[s+8>>2]|0)==(f|0)){r=0;n=s;break}else r=s}}else{o=0;g=12}while(0);if((g|0)==12){f=t+12|0;l=+(((a[f>>2]|0)+1|0)>>>0);c=+u[t+16>>2];do if(m|l>+(h>>>0)*c){if(h>>>0>2)r=(h+-1&h|0)==0;else r=0;s=(r&1|h<<1)^1;r=~~+te(+(l/c))>>>0;yi(t,s>>>0<r>>>0?r:s);s=a[v>>2]|0;r=a[_>>2]|0;o=s+-1|0;if(!(o&s)){h=s;o=o&r;break}else{h=s;o=(r>>>0)%(s>>>0)|0;break}}while(0);r=a[(a[t>>2]|0)+(o<<2)>>2]|0;if(!r){r=t+8|0;a[n>>2]=a[r>>2];a[r>>2]=n;a[(a[t>>2]|0)+(o<<2)>>2]=r;r=a[n>>2]|0;if(r){r=a[r+4>>2]|0;o=h+-1|0;if(!(o&h))r=r&o;else r=(r>>>0)%(h>>>0)|0;a[(a[t>>2]|0)+(r<<2)>>2]=n}}else{a[n>>2]=a[r>>2];a[r>>2]=n}a[f>>2]=(a[f>>2]|0)+1;r=1}a[e>>2]=n;i[e+4>>0]=r;return}function yi(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;if((t|0)!=1){if(t+-1&t)t=zu(t)|0}else t=2;r=a[e+4>>2]|0;if(t>>>0<=r>>>0){if(t>>>0<r>>>0){if(r>>>0>2)i=(r+-1&r|0)==0;else i=0;n=~~+te(+(+((a[e+12>>2]|0)>>>0)/+u[e+16>>2]))>>>0;if(i)n=1<<32-(re(n+-1|0)|0);else n=zu(n)|0;t=t>>>0<n>>>0?n:t;if(t>>>0<r>>>0)bi(e,t)}}else bi(e,t);return}function bi(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,u=0,c=0,h=0,f=0;i=e+4|0;e:do if(t){f=Pi(t<<2)|0;n=a[e>>2]|0;a[e>>2]=f;if(n)Oi(n);a[i>>2]=t;if(t){n=0;do{a[(a[e>>2]|0)+(n<<2)>>2]=0;n=n+1|0}while((n|0)!=(t|0))}i=e+8|0;r=a[i>>2]|0;if(r){n=a[r+4>>2]|0;h=t+-1|0;f=(h&t|0)==0;if(f)s=n&h;else s=(n>>>0)%(t>>>0)|0;a[(a[e>>2]|0)+(s<<2)>>2]=i;n=a[r>>2]|0;if(n){o=r;i=r;while(1){c=i;t:while(1){while(1){i=a[n+4>>2]|0;if(f)u=i&h;else u=(i>>>0)%(t>>>0)|0;if((u|0)==(s|0)){i=n;break}i=(a[e>>2]|0)+(u<<2)|0;if(!(a[i>>2]|0)){s=u;r=n;break t}l=n+8|0;i=n;while(1){r=a[i>>2]|0;if(!r)break;if((a[l>>2]|0)==(a[r+8>>2]|0))i=r;else break}a[o>>2]=r;a[i>>2]=a[a[(a[e>>2]|0)+(u<<2)>>2]>>2];a[a[(a[e>>2]|0)+(u<<2)>>2]>>2]=n;n=a[c>>2]|0;if(!n)break e}n=a[i>>2]|0;if(!n)break e;else{o=i;c=i}}a[i>>2]=o;n=a[r>>2]|0;if(!n)break;else{o=r;i=r}}}}}else{n=a[e>>2]|0;a[e>>2]=0;if(n)Oi(n);a[i>>2]=0}while(0);return}function wi(e){e=e|0;return wa(a[e+4>>2]|0)|0}function xi(e){e=e|0;He(624,10917);Ke(632,10922,1,1,0);Fe(640,10927,1,-128,127);Fe(656,10932,1,-128,127);Fe(648,10944,1,0,255);Fe(664,10958,2,-32768,32767);Fe(672,10964,2,0,65535);Fe(680,10979,4,-2147483648,2147483647);Fe(688,10983,4,0,-1);Fe(696,10996,4,-2147483648,2147483647);Fe(704,11001,4,0,-1);dt(712,11015,4);dt(720,11021,8);wt(360,11028);wt(392,11040);rt(416,4,11073);ot(440,11086);Re(448,0,11102);ki(11132);Mi(11169);Ti(11208);Si(11239);Ai(11279);Ri(11308);Re(456,4,11346);Re(464,5,11376);ki(11415);Mi(11447);Ti(11480);Si(11513);Ai(11547);Ri(11580);Re(472,6,11614);Re(480,7,11645);Re(488,7,11677);return}function Ei(){xi(0);return}function ki(e){e=e|0;Re(536,0,e|0);return}function Mi(e){e=e|0;Re(528,1,e|0);return}function Ti(e){e=e|0;Re(520,2,e|0);return}function Si(e){e=e|0;Re(512,3,e|0);return}function Ai(e){e=e|0;Re(504,4,e|0);return}function Ri(e){e=e|0;Re(496,5,e|0);return}function Ci(e){e=e|0;Ie(12478,12501,303,12589)}function Pi(e){e=e|0;var t=0;t=(e|0)==0?1:e;e=Ba(t)|0;e:do if(!e){while(1){e=Di()|0;if(!e)break;qc[e&0]();e=Ba(t)|0;if(e)break e}t=$e(4)|0;a[t>>2]=2224;Mt(t|0,544,1)}while(0);return e|0}function Oi(e){e=e|0;ja(e);return}function Li(e){e=e|0;return}function Ni(e){e=e|0;Oi(e);return}function Fi(e){e=e|0;return 12610}function Di(){var e=0;e=a[559]|0;a[559]=e+0;return e|0}function Ii(e){e=e|0;return}function Ui(e){e=e|0;return}function Hi(e){e=e|0;return}function zi(e){e=e|0;return}function Bi(e){e=e|0;return}function ji(e){e=e|0;Oi(e);return}function Vi(e){e=e|0;Oi(e);return}function Gi(e){e=e|0;Oi(e);return}function Wi(e){e=e|0;Oi(e);return}function Xi(e,t,n){e=e|0;t=t|0;n=n|0;return(e|0)==(t|0)|0}function Yi(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,s=0;s=h;h=h+64|0;o=s;if((e|0)!=(t|0))if((t|0)!=0?(r=Ki(t,576,592,0)|0,(r|0)!=0):0){t=o;i=t+56|0;do{a[t>>2]=0;t=t+4|0}while((t|0)<(i|0));a[o>>2]=r;a[o+8>>2]=e;a[o+12>>2]=-1;a[o+48>>2]=1;Kc[a[(a[r>>2]|0)+28>>2]&3](r,o,a[n>>2]|0,1);if((a[o+24>>2]|0)==1){a[n>>2]=a[o+16>>2];t=1}else t=0}else t=0;else t=1;h=s;return t|0}function qi(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0;e=t+16|0;o=a[e>>2]|0;do if(o){if((o|0)!=(n|0)){r=t+36|0;a[r>>2]=(a[r>>2]|0)+1;a[t+24>>2]=2;i[t+54>>0]=1;break}e=t+24|0;if((a[e>>2]|0)==2)a[e>>2]=r}else{a[e>>2]=n;a[t+24>>2]=r;a[t+36>>2]=1}while(0);return}function Zi(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;if((e|0)==(a[t+8>>2]|0))qi(0,t,n,i);return}function Qi(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;if((e|0)==(a[t+8>>2]|0))qi(0,t,n,i);else{e=a[e+8>>2]|0;Kc[a[(a[e>>2]|0)+28>>2]&3](e,t,n,i)}return}function $i(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0;o=a[e+4>>2]|0;r=o>>8;if(o&1)r=a[(a[n>>2]|0)+r>>2]|0;e=a[e>>2]|0;Kc[a[(a[e>>2]|0)+28>>2]&3](e,t,n+r|0,(o&2|0)!=0?i:2);return}function Ji(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,s=0;e:do if((e|0)!=(a[t+8>>2]|0)){s=a[e+12>>2]|0;o=e+16+(s<<3)|0;$i(e+16|0,t,n,r);if((s|0)>1){s=t+54|0;e=e+24|0;do{$i(e,t,n,r);if(i[s>>0]|0)break e;e=e+8|0}while(e>>>0<o>>>0)}}else qi(0,t,n,r);while(0);return}function Ki(e,t,n,o){e=e|0;t=t|0;n=n|0;o=o|0;var s=0,l=0,u=0,c=0,f=0,d=0,p=0,g=0,m=0,v=0;v=h;h=h+64|0;m=v;g=a[e>>2]|0;p=e+(a[g+-8>>2]|0)|0;g=a[g+-4>>2]|0;a[m>>2]=n;a[m+4>>2]=e;a[m+8>>2]=t;a[m+12>>2]=o;o=m+16|0;e=m+20|0;t=m+24|0;s=m+28|0;l=m+32|0;u=m+40|0;c=(g|0)==(n|0);f=o;d=f+36|0;do{a[f>>2]=0;f=f+4|0}while((f|0)<(d|0));r[o+36>>1]=0;i[o+38>>0]=0;e:do if(c){a[m+48>>2]=1;$c[a[(a[n>>2]|0)+20>>2]&3](n,m,p,p,1,0);o=(a[t>>2]|0)==1?p:0}else{Hc[a[(a[g>>2]|0)+24>>2]&3](g,m,p,1,0);switch(a[m+36>>2]|0){case 0:{o=(a[u>>2]|0)==1&(a[s>>2]|0)==1&(a[l>>2]|0)==1?a[e>>2]|0:0;break e}case 1:break;default:{o=0;break e}}if((a[t>>2]|0)!=1?!((a[u>>2]|0)==0&(a[s>>2]|0)==1&(a[l>>2]|0)==1):0){o=0;break}o=a[o>>2]|0}while(0);h=v;return o|0}function er(e,t,n,r,o){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;i[t+53>>0]=1;do if((a[t+4>>2]|0)==(r|0)){i[t+52>>0]=1;r=t+16|0;e=a[r>>2]|0;if(!e){a[r>>2]=n;a[t+24>>2]=o;a[t+36>>2]=1;if(!((o|0)==1?(a[t+48>>2]|0)==1:0))break;i[t+54>>0]=1;break}if((e|0)!=(n|0)){o=t+36|0;a[o>>2]=(a[o>>2]|0)+1;i[t+54>>0]=1;break}e=t+24|0;r=a[e>>2]|0;if((r|0)==2){a[e>>2]=o;r=o}if((r|0)==1?(a[t+48>>2]|0)==1:0)i[t+54>>0]=1}while(0);return}function tr(e,t,n,r,o){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;var s=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0,m=0;e:do if((e|0)==(a[t+8>>2]|0)){if((a[t+4>>2]|0)==(n|0)?(s=t+28|0,(a[s>>2]|0)!=1):0)a[s>>2]=r}else{if((e|0)!=(a[t>>2]|0)){m=a[e+12>>2]|0;u=e+16+(m<<3)|0;ir(e+16|0,t,n,r,o);s=e+24|0;if((m|0)<=1)break;l=a[e+8>>2]|0;if((l&2|0)==0?(c=t+36|0,(a[c>>2]|0)!=1):0){if(!(l&1)){l=t+54|0;while(1){if(i[l>>0]|0)break e;if((a[c>>2]|0)==1)break e;ir(s,t,n,r,o);s=s+8|0;if(s>>>0>=u>>>0)break e}}l=t+24|0;e=t+54|0;while(1){if(i[e>>0]|0)break e;if((a[c>>2]|0)==1?(a[l>>2]|0)==1:0)break e;ir(s,t,n,r,o);s=s+8|0;if(s>>>0>=u>>>0)break e}}l=t+54|0;while(1){if(i[l>>0]|0)break e;ir(s,t,n,r,o);s=s+8|0;if(s>>>0>=u>>>0)break e}}if((a[t+16>>2]|0)!=(n|0)?(g=t+20|0,(a[g>>2]|0)!=(n|0)):0){a[t+32>>2]=r;f=t+44|0;if((a[f>>2]|0)==4)break;l=a[e+12>>2]|0;u=e+16+(l<<3)|0;c=t+52|0;r=t+53|0;d=t+54|0;h=e+8|0;p=t+24|0;t:do if((l|0)>0){l=0;s=0;e=e+16|0;while(1){i[c>>0]=0;i[r>>0]=0;nr(e,t,n,n,1,o);if(i[d>>0]|0){m=20;break t}do if(i[r>>0]|0){if(!(i[c>>0]|0))if(!(a[h>>2]&1)){s=1;m=20;break t}else{s=1;break}if((a[p>>2]|0)==1)break t;if(!(a[h>>2]&2))break t;else{l=1;s=1}}while(0);e=e+8|0;if(e>>>0>=u>>>0){m=20;break}}}else{l=0;s=0;m=20}while(0);do if((m|0)==20){if((!l?(a[g>>2]=n,n=t+40|0,a[n>>2]=(a[n>>2]|0)+1,(a[t+36>>2]|0)==1):0)?(a[p>>2]|0)==2:0){i[d>>0]=1;if(s)break}else m=24;if((m|0)==24?s:0)break;a[f>>2]=4;break e}while(0);a[f>>2]=3;break}if((r|0)==1)a[t+32>>2]=1}while(0);return}function nr(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;var s=0,l=0;l=a[e+4>>2]|0;s=l>>8;if(l&1)s=a[(a[i>>2]|0)+s>>2]|0;e=a[e>>2]|0;$c[a[(a[e>>2]|0)+20>>2]&3](e,t,n,i+s|0,(l&2|0)!=0?r:2,o);return}function ir(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,s=0;s=a[e+4>>2]|0;o=s>>8;if(s&1)o=a[(a[n>>2]|0)+o>>2]|0;e=a[e>>2]|0;Hc[a[(a[e>>2]|0)+24>>2]&3](e,t,n+o|0,(s&2|0)!=0?i:2,r);return}function rr(e,t,n,r,o){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;var s=0,l=0,u=0,c=0;e:do if((e|0)==(a[t+8>>2]|0)){if((a[t+4>>2]|0)==(n|0)?(s=t+28|0,(a[s>>2]|0)!=1):0)a[s>>2]=r}else{if((e|0)!=(a[t>>2]|0)){u=a[e+8>>2]|0;Hc[a[(a[u>>2]|0)+24>>2]&3](u,t,n,r,o);break}if((a[t+16>>2]|0)!=(n|0)?(l=t+20|0,(a[l>>2]|0)!=(n|0)):0){a[t+32>>2]=r;r=t+44|0;if((a[r>>2]|0)==4)break;s=t+52|0;i[s>>0]=0;c=t+53|0;i[c>>0]=0;e=a[e+8>>2]|0;$c[a[(a[e>>2]|0)+20>>2]&3](e,t,n,n,1,o);if(i[c>>0]|0){if(!(i[s>>0]|0)){s=1;u=13}}else{s=0;u=13}do if((u|0)==13){a[l>>2]=n;c=t+40|0;a[c>>2]=(a[c>>2]|0)+1;if((a[t+36>>2]|0)==1?(a[t+24>>2]|0)==2:0){i[t+54>>0]=1;if(s)break}else u=16;if((u|0)==16?s:0)break;a[r>>2]=4;break e}while(0);a[r>>2]=3;break}if((r|0)==1)a[t+32>>2]=1}while(0);return}function ar(e,t,n,r,o){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;var s=0,l=0;do if((e|0)==(a[t+8>>2]|0)){if((a[t+4>>2]|0)==(n|0)?(l=t+28|0,(a[l>>2]|0)!=1):0)a[l>>2]=r}else if((e|0)==(a[t>>2]|0)){if((a[t+16>>2]|0)!=(n|0)?(s=t+20|0,(a[s>>2]|0)!=(n|0)):0){a[t+32>>2]=r;a[s>>2]=n;o=t+40|0;a[o>>2]=(a[o>>2]|0)+1;if((a[t+36>>2]|0)==1?(a[t+24>>2]|0)==2:0)i[t+54>>0]=1;a[t+44>>2]=4;break}if((r|0)==1)a[t+32>>2]=1}while(0);return}function or(e,t,n,r,o,s){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;s=s|0;var l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0;if((e|0)==(a[t+8>>2]|0))er(0,t,n,r,o);else{f=t+52|0;d=i[f>>0]|0;p=t+53|0;g=i[p>>0]|0;h=a[e+12>>2]|0;l=e+16+(h<<3)|0;i[f>>0]=0;i[p>>0]=0;nr(e+16|0,t,n,r,o,s);e:do if((h|0)>1){u=t+24|0;c=e+8|0;h=t+54|0;e=e+24|0;do{if(i[h>>0]|0)break e;if(!(i[f>>0]|0)){if((i[p>>0]|0)!=0?(a[c>>2]&1|0)==0:0)break e}else{if((a[u>>2]|0)==1)break e;if(!(a[c>>2]&2))break e}i[f>>0]=0;i[p>>0]=0;nr(e,t,n,r,o,s);e=e+8|0}while(e>>>0<l>>>0)}while(0);i[f>>0]=d;i[p>>0]=g}return}function sr(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;if((e|0)==(a[t+8>>2]|0))er(0,t,n,i,r);else{e=a[e+8>>2]|0;$c[a[(a[e>>2]|0)+20>>2]&3](e,t,n,i,r,o)}return}function lr(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;if((e|0)==(a[t+8>>2]|0))er(0,t,n,i,r);return}function ur(e){e=e|0;Ie(12625,12654,1164,12589)}function cr(e){e=e|0;return((e|0)==32|(e+-9|0)>>>0<5)&1|0}function hr(){var e=0;if(!(a[597]|0))e=2644;else e=a[(ut()|0)+60>>2]|0;return e|0}function fr(e){e=e|0;var t=0,n=0;t=0;while(1){if((o[12742+t>>0]|0)==(e|0)){n=2;break}t=t+1|0;if((t|0)==87){t=87;e=12830;n=5;break}}if((n|0)==2)if(!t)e=12830;else{e=12830;n=5}if((n|0)==5)while(1){n=e;while(1){e=n+1|0;if(!(i[n>>0]|0))break;else n=e}t=t+-1|0;if(!t)break;else n=5}return e|0}function dr(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,s=0,l=0,u=0,c=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,L=0,N=0,F=0,D=0,I=0,U=0;I=h;h=h+512|0;L=I;switch(t|0){case 0:{D=24;F=-149;T=4;break}case 1:{D=53;F=-1074;T=4;break}case 2:{D=53;F=-1074;T=4;break}default:r=0}e:do if((T|0)==4){R=e+4|0;A=e+100|0;do{t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;t=o[t>>0]|0}else t=mr(e)|0}while((cr(t)|0)!=0);t:do switch(t|0){case 43:case 45:{s=1-(((t|0)==45&1)<<1)|0;t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;t=o[t>>0]|0;N=s;break t}else{t=mr(e)|0;N=s;break t}}default:N=1}while(0);s=t;t=0;do{if((s|32|0)!=(i[14634+t>>0]|0))break;do if(t>>>0<7){s=a[R>>2]|0;if(s>>>0<(a[A>>2]|0)>>>0){a[R>>2]=s+1;s=o[s>>0]|0;break}else{s=mr(e)|0;break}}while(0);t=t+1|0}while(t>>>0<8);t:do switch(t|0){case 8:break;case 3:{T=23;break}default:{u=(n|0)!=0;if(u&t>>>0>3)if((t|0)==8)break t;else{T=23;break t}n:do if(!t){t=0;do{if((s|32|0)!=(i[16477+t>>0]|0))break n;do if(t>>>0<2){s=a[R>>2]|0;if(s>>>0<(a[A>>2]|0)>>>0){a[R>>2]=s+1;s=o[s>>0]|0;break}else{s=mr(e)|0;break}}while(0);t=t+1|0}while(t>>>0<3)}while(0);switch(t|0){case 3:{t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;t=o[t>>0]|0}else t=mr(e)|0;if((t|0)==40)t=1;else{if(!(a[A>>2]|0)){r=w;break e}a[R>>2]=(a[R>>2]|0)+-1;r=w;break e}while(1){s=a[R>>2]|0;if(s>>>0<(a[A>>2]|0)>>>0){a[R>>2]=s+1;s=o[s>>0]|0}else s=mr(e)|0;if(!((s+-48|0)>>>0<10|(s+-65|0)>>>0<26)?!((s|0)==95|(s+-97|0)>>>0<26):0)break;t=t+1|0}if((s|0)==41){r=w;break e}s=(a[A>>2]|0)==0;if(!s)a[R>>2]=(a[R>>2]|0)+-1;if(!u){a[(hr()|0)>>2]=22;gr(e,0);r=0;break e}if(!t){r=w;break e}while(1){t=t+-1|0;if(!s)a[R>>2]=(a[R>>2]|0)+-1;if(!t){r=w;break e}}}case 0:{do if((s|0)==48){t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;t=o[t>>0]|0}else t=mr(e)|0;if((t|32|0)!=120){if(!(a[A>>2]|0)){t=48;break}a[R>>2]=(a[R>>2]|0)+-1;t=48;break}t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;t=o[t>>0]|0;u=0}else{t=mr(e)|0;u=0}n:while(1){switch(t|0){case 46:{T=74;break n}case 48:break;default:{k=0;c=0;E=0;s=0;d=u;p=0;b=0;f=1;u=0;r=0;break n}}t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;t=o[t>>0]|0;u=1;continue}else{t=mr(e)|0;u=1;continue}}if((T|0)==74){t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;t=o[t>>0]|0}else t=mr(e)|0;if((t|0)==48){u=0;s=0;do{t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;t=o[t>>0]|0}else t=mr(e)|0;u=qu(u|0,s|0,-1,-1)|0;s=O}while((t|0)==48);k=0;c=0;E=u;d=1;p=1;b=0;f=1;u=0;r=0}else{k=0;c=0;E=0;s=0;d=u;p=1;b=0;f=1;u=0;r=0}}while(1){_=t+-48|0;g=t|32;if(_>>>0>=10){y=(t|0)==46;if(!(y|(g+-97|0)>>>0<6)){g=E;_=k;break}if(y)if(!p){y=c;s=k;_=k;p=1;g=b;l=f}else{g=E;_=k;t=46;break}else T=86}else T=86;if((T|0)==86){T=0;t=(t|0)>57?g+-87|0:_;do if(!((k|0)<0|(k|0)==0&c>>>0<8)){if((k|0)<0|(k|0)==0&c>>>0<14){v=f*.0625;g=b;l=v;r=r+v*+(t|0);break}if((b|0)!=0|(t|0)==0){g=b;l=f}else{g=1;l=f;r=r+f*.5}}else{g=b;l=f;u=t+(u<<4)|0}while(0);c=qu(c|0,k|0,1,0)|0;y=E;_=O;d=1}t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;k=_;E=y;t=o[t>>0]|0;b=g;f=l;continue}else{k=_;E=y;t=mr(e)|0;b=g;f=l;continue}}if(!d){t=(a[A>>2]|0)==0;if(!t)a[R>>2]=(a[R>>2]|0)+-1;if(n){if(!t?(M=a[R>>2]|0,a[R>>2]=M+-1,(p|0)!=0):0)a[R>>2]=M+-2}else gr(e,0);r=+(N|0)*0;break e}d=(p|0)==0;p=d?c:g;d=d?_:s;if((_|0)<0|(_|0)==0&c>>>0<8){s=_;do{u=u<<4;c=qu(c|0,s|0,1,0)|0;s=O}while((s|0)<0|(s|0)==0&c>>>0<8)}if((t|32|0)==112){s=Aa(e,n)|0;t=O;if((s|0)==0&(t|0)==-2147483648){if(!n){gr(e,0);r=0;break e}if(!(a[A>>2]|0)){s=0;t=0}else{a[R>>2]=(a[R>>2]|0)+-1;s=0;t=0}}}else if(!(a[A>>2]|0)){s=0;t=0}else{a[R>>2]=(a[R>>2]|0)+-1;s=0;t=0}L=Yu(p|0,d|0,2)|0;L=qu(L|0,O|0,-32,-1)|0;t=qu(L|0,O|0,s|0,t|0)|0;s=O;if(!u){r=+(N|0)*0;break e}if((s|0)>0|(s|0)==0&t>>>0>(0-F|0)>>>0){a[(hr()|0)>>2]=34;r=+(N|0)*1.7976931348623157e308*1.7976931348623157e308;break e}L=F+-106|0;P=((L|0)<0)<<31>>31;if((s|0)<(P|0)|(s|0)==(P|0)&t>>>0<L>>>0){a[(hr()|0)>>2]=34;r=+(N|0)*2.2250738585072014e-308*2.2250738585072014e-308;break e}if((u|0)>-1){do{P=!(r>=.5);L=P&1|u<<1;u=L^1;r=r+(P?r:r+-1);t=qu(t|0,s|0,-1,-1)|0;s=O}while((L|0)>-1);c=t;f=r}else{c=t;f=r}t=Wu(32,0,F|0,((F|0)<0)<<31>>31|0)|0;t=qu(c|0,s|0,t|0,O|0)|0;F=O;if(0>(F|0)|0==(F|0)&D>>>0>t>>>0)if((t|0)<0){t=0;T=127}else T=125;else{t=D;T=125}if((T|0)==125)if((t|0)<53)T=127;else{s=t;l=+(N|0);r=0}if((T|0)==127){r=+(N|0);s=t;l=r;r=+yr(+kr(1,84-t|0),r)}D=(u&1|0)==0&(f!=0&(s|0)<32);r=l*(D?0:f)+(r+l*+(((D&1)+u|0)>>>0))-r;if(!(r!=0))a[(hr()|0)>>2]=34;r=+Mr(r,c);break e}else t=s;while(0);C=F+D|0;P=0-C|0;u=0;n:while(1){switch(t|0){case 46:{T=138;break n}case 48:break;default:{s=0;g=0;p=0;break n}}t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;t=o[t>>0]|0;u=1;continue}else{t=mr(e)|0;u=1;continue}}if((T|0)==138){t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;t=o[t>>0]|0}else t=mr(e)|0;if((t|0)==48){s=0;t=0;while(1){s=qu(s|0,t|0,-1,-1)|0;u=O;t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;t=o[t>>0]|0}else t=mr(e)|0;if((t|0)==48)t=u;else{g=u;u=1;p=1;break}}}else{s=0;g=0;p=1}}a[L>>2]=0;d=t+-48|0;c=(t|0)==46;n:do if(c|d>>>0<10){S=L+496|0;k=0;y=0;b=c;T=g;_=u;M=p;u=0;c=0;p=0;i:while(1){do if(b)if(!M){s=k;g=y;M=1}else{g=T;t=k;d=y;break i}else{b=qu(k|0,y|0,1,0)|0;y=O;E=(t|0)!=48;if((c|0)>=125){if(!E){g=T;k=b;break}a[S>>2]=a[S>>2]|1;g=T;k=b;break}g=L+(c<<2)|0;if(u)d=t+-48+((a[g>>2]|0)*10|0)|0;a[g>>2]=d;u=u+1|0;d=(u|0)==9;g=T;k=b;_=1;u=d?0:u;c=(d&1)+c|0;p=E?b:p}while(0);t=a[R>>2]|0;if(t>>>0<(a[A>>2]|0)>>>0){a[R>>2]=t+1;t=o[t>>0]|0}else t=mr(e)|0;d=t+-48|0;b=(t|0)==46;if(!(b|d>>>0<10)){d=M;T=161;break n}else T=g}_=(_|0)!=0;T=169}else{k=0;y=0;_=u;d=p;u=0;c=0;p=0;T=161}while(0);do if((T|0)==161){S=(d|0)==0;s=S?k:s;g=S?y:g;_=(_|0)!=0;if(!((t|32|0)==101&_))if((t|0)>-1){t=k;d=y;T=169;break}else{t=k;d=y;T=171;break}d=Aa(e,n)|0;t=O;if((d|0)==0&(t|0)==-2147483648){if(!n){gr(e,0);r=0;break}if(!(a[A>>2]|0)){d=0;t=0}else{a[R>>2]=(a[R>>2]|0)+-1;d=0;t=0}}s=qu(d|0,t|0,s|0,g|0)|0;_=k;g=O;d=y;T=173}while(0);if((T|0)==169)if(a[A>>2]|0){a[R>>2]=(a[R>>2]|0)+-1;if(_){_=t;T=173}else T=172}else T=171;if((T|0)==171)if(_){_=t;T=173}else T=172;do if((T|0)==172){a[(hr()|0)>>2]=22;gr(e,0);r=0}else if((T|0)==173){t=a[L>>2]|0;if(!t){r=+(N|0)*0;break}if(((d|0)<0|(d|0)==0&_>>>0<10)&((s|0)==(_|0)&(g|0)==(d|0))?D>>>0>30|(t>>>D|0)==0:0){r=+(N|0)*+(t>>>0);break}e=(F|0)/-2|0;R=((e|0)<0)<<31>>31;if((g|0)>(R|0)|(g|0)==(R|0)&s>>>0>e>>>0){a[(hr()|0)>>2]=34;r=+(N|0)*1.7976931348623157e308*1.7976931348623157e308;break}e=F+-106|0;R=((e|0)<0)<<31>>31;if((g|0)<(R|0)|(g|0)==(R|0)&s>>>0<e>>>0){a[(hr()|0)>>2]=34;r=+(N|0)*2.2250738585072014e-308*2.2250738585072014e-308;break}if(u){if((u|0)<9){d=L+(c<<2)|0;t=a[d>>2]|0;do{t=t*10|0;u=u+1|0}while((u|0)!=9);a[d>>2]=t}c=c+1|0}if((p|0)<9?(p|0)<=(s|0)&(s|0)<18:0){if((s|0)==9){r=+(N|0)*+((a[L>>2]|0)>>>0);break}if((s|0)<9){r=+(N|0)*+((a[L>>2]|0)>>>0)/+(a[2648+(8-s<<2)>>2]|0);break}e=D+27+(ne(s,-3)|0)|0;t=a[L>>2]|0;if((e|0)>30|(t>>>e|0)==0){r=+(N|0)*+(t>>>0)*+(a[2648+(s+-10<<2)>>2]|0);break}}t=(s|0)%9|0;if(!t){u=0;t=0}else{_=(s|0)>-1?t:t+9|0;d=a[2648+(8-_<<2)>>2]|0;if(c){p=1e9/(d|0)|0;u=0;t=0;g=0;do{A=L+(g<<2)|0;R=a[A>>2]|0;e=((R>>>0)/(d>>>0)|0)+t|0;a[A>>2]=e;t=ne((R>>>0)%(d>>>0)|0,p)|0;e=(g|0)==(u|0)&(e|0)==0;g=g+1|0;s=e?s+-9|0:s;u=e?g&127:u}while((g|0)!=(c|0));if(t){a[L+(c<<2)>>2]=t;c=c+1|0}}else{u=0;c=0}t=0;s=9-_+s|0}n:while(1){y=(s|0)<18;b=(s|0)==18;E=L+(u<<2)|0;do{if(!y){if(!b)break n;if((a[E>>2]|0)>>>0>=9007199){s=18;break n}}d=0;p=c+127|0;while(1){_=p&127;g=L+(_<<2)|0;p=Yu(a[g>>2]|0,0,29)|0;p=qu(p|0,O|0,d|0,0)|0;d=O;if(d>>>0>0|(d|0)==0&p>>>0>1e9){e=ic(p|0,d|0,1e9,0)|0;p=rc(p|0,d|0,1e9,0)|0;d=e}else d=0;a[g>>2]=p;e=(_|0)==(u|0);c=(_|0)!=(c+127&127|0)|e?c:(p|0)==0?_:c;if(e)break;else p=_+-1|0}t=t+-29|0}while((d|0)==0);u=u+127&127;if((u|0)==(c|0)){e=c+127&127;c=L+((c+126&127)<<2)|0;a[c>>2]=a[c>>2]|a[L+(e<<2)>>2];c=e}a[L+(u<<2)>>2]=d;s=s+9|0}n:while(1){k=c+1&127;E=L+((c+127&127)<<2)|0;while(1){y=(s|0)==18;b=(s|0)>27?9:1;_=y^1;while(1){p=u&127;g=(p|0)==(c|0);do if(!g){d=a[L+(p<<2)>>2]|0;if(d>>>0<9007199){T=219;break}if(d>>>0>9007199)break;d=u+1&127;if((d|0)==(c|0)){T=219;break}d=a[L+(d<<2)>>2]|0;if(d>>>0<254740991){T=219;break}if(!(d>>>0>254740991|_)){s=p;break n}}else T=219;while(0);if((T|0)==219?(T=0,y):0){T=220;break n}t=t+b|0;if((u|0)==(c|0))u=c;else break}_=(1<<b)+-1|0;y=1e9>>>b;p=u;d=0;g=u;while(1){R=L+(g<<2)|0;e=a[R>>2]|0;u=(e>>>b)+d|0;a[R>>2]=u;d=ne(e&_,y)|0;u=(g|0)==(p|0)&(u|0)==0;g=g+1&127;s=u?s+-9|0:s;u=u?g:p;if((g|0)==(c|0))break;else p=u}if(!d)continue;if((k|0)!=(u|0))break;a[E>>2]=a[E>>2]|1}a[L+(c<<2)>>2]=d;c=k}if((T|0)==220)if(g){a[L+(k+-1<<2)>>2]=0;s=c;c=k}else s=p;r=+((a[L+(s<<2)>>2]|0)>>>0);s=u+1&127;if((s|0)==(c|0)){c=u+2&127;a[L+(c+-1<<2)>>2]=0}v=+(N|0);l=v*(r*1e9+ +((a[L+(s<<2)>>2]|0)>>>0));y=t+53|0;g=y-F|0;_=(g|0)<(D|0);s=_&1;p=_?(g|0)<0?0:g:D;if((p|0)<53){U=+yr(+kr(1,105-p|0),l);f=+wr(l,+kr(1,53-p|0));m=U;r=f;f=U+(l-f)}else{m=0;r=0;f=l}d=u+2&127;do if((d|0)==(c|0))l=r;else{d=a[L+(d<<2)>>2]|0;do if(d>>>0>=5e8){if(d>>>0>5e8){r=v*.75+r;break}if((u+3&127|0)==(c|0)){r=v*.5+r;break}else{r=v*.75+r;break}}else{if((d|0)==0?(u+3&127|0)==(c|0):0)break;r=v*.25+r}while(0);if((53-p|0)<=1){l=r;break}if(+wr(r,1)!=0){l=r;break}l=r+1}while(0);r=f+l-m;do if((y&2147483647|0)>(-2-C|0)){if(+V(+r)>=9007199254740992){s=_&(p|0)==(g|0)?0:s;t=t+1|0;r=r*.5}if((t+50|0)<=(P|0)?!(l!=0&(s|0)!=0):0)break;a[(hr()|0)>>2]=34}while(0);r=+Mr(r,t)}while(0);break e}default:{if(a[A>>2]|0)a[R>>2]=(a[R>>2]|0)+-1;a[(hr()|0)>>2]=22;gr(e,0);r=0;break e}}}}while(0);if((T|0)==23){s=(a[A>>2]|0)==0;if(!s)a[R>>2]=(a[R>>2]|0)+-1;if((n|0)!=0&t>>>0>3)do{if(!s)a[R>>2]=(a[R>>2]|0)+-1;t=t+-1|0}while(t>>>0>3)}r=+(N|0)*x}while(0);h=I;return+r}function pr(e,t,n,r,s){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;var l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0;e:do if(t>>>0>36){a[(hr()|0)>>2]=22;s=0;r=0}else{v=e+4|0;m=e+100|0;do{l=a[v>>2]|0;if(l>>>0<(a[m>>2]|0)>>>0){a[v>>2]=l+1;l=o[l>>0]|0}else l=mr(e)|0}while((cr(l)|0)!=0);t:do switch(l|0){case 43:case 45:{u=((l|0)==45)<<31>>31;l=a[v>>2]|0;if(l>>>0<(a[m>>2]|0)>>>0){a[v>>2]=l+1;l=o[l>>0]|0;g=u;break t}else{l=mr(e)|0;g=u;break t}}default:g=0}while(0);u=(t|0)==0;do if((t&-17|0)==0&(l|0)==48){l=a[v>>2]|0;if(l>>>0<(a[m>>2]|0)>>>0){a[v>>2]=l+1;l=o[l>>0]|0}else l=mr(e)|0;if((l|32|0)!=120)if(u){t=8;d=46;break}else{d=32;break}t=a[v>>2]|0;if(t>>>0<(a[m>>2]|0)>>>0){a[v>>2]=t+1;l=o[t>>0]|0}else l=mr(e)|0;if((o[14643+(l+1)>>0]|0)>15){r=(a[m>>2]|0)==0;if(!r)a[v>>2]=(a[v>>2]|0)+-1;if(!n){gr(e,0);s=0;r=0;break e}if(r){s=0;r=0;break e}a[v>>2]=(a[v>>2]|0)+-1;s=0;r=0;break e}else{t=16;d=46}}else{t=u?10:t;if((o[14643+(l+1)>>0]|0)>>>0<t>>>0)d=32;else{if(a[m>>2]|0)a[v>>2]=(a[v>>2]|0)+-1;gr(e,0);a[(hr()|0)>>2]=22;s=0;r=0;break e}}while(0);if((d|0)==32)if((t|0)==10){t=l+-48|0;if(t>>>0<10){l=0;while(1){u=(l*10|0)+t|0;t=a[v>>2]|0;if(t>>>0<(a[m>>2]|0)>>>0){a[v>>2]=t+1;l=o[t>>0]|0}else l=mr(e)|0;t=l+-48|0;if(!(t>>>0<10&u>>>0<429496729)){t=u;break}else l=u}u=0}else{t=0;u=0}n=l+-48|0;if(n>>>0<10){while(1){c=nc(t|0,u|0,10,0)|0;h=O;f=((n|0)<0)<<31>>31;p=~f;if(h>>>0>p>>>0|(h|0)==(p|0)&c>>>0>~n>>>0){c=t;break}t=qu(c|0,h|0,n|0,f|0)|0;u=O;l=a[v>>2]|0;if(l>>>0<(a[m>>2]|0)>>>0){a[v>>2]=l+1;l=o[l>>0]|0}else l=mr(e)|0;n=l+-48|0;if(!(n>>>0<10&(u>>>0<429496729|(u|0)==429496729&t>>>0<2576980378))){c=t;break}}if(n>>>0>9){l=c;t=g}else{t=10;d=72}}else{l=t;t=g}}else d=46;t:do if((d|0)==46){if(!(t+-1&t)){d=i[14900+((t*23|0)>>>5&7)>>0]|0;u=i[14643+(l+1)>>0]|0;n=u&255;if(n>>>0<t>>>0){l=0;while(1){c=n|l<<d;l=a[v>>2]|0;if(l>>>0<(a[m>>2]|0)>>>0){a[v>>2]=l+1;l=o[l>>0]|0}else l=mr(e)|0;u=i[14643+(l+1)>>0]|0;n=u&255;if(!(c>>>0<134217728&n>>>0<t>>>0))break;else l=c}n=0}else{n=0;c=0}h=Zu(-1,-1,d|0)|0;f=O;if((u&255)>>>0>=t>>>0|(n>>>0>f>>>0|(n|0)==(f|0)&c>>>0>h>>>0)){u=n;d=72;break}else l=n;while(1){c=Yu(c|0,l|0,d|0)|0;n=O;c=u&255|c;l=a[v>>2]|0;if(l>>>0<(a[m>>2]|0)>>>0){a[v>>2]=l+1;l=o[l>>0]|0}else l=mr(e)|0;u=i[14643+(l+1)>>0]|0;if((u&255)>>>0>=t>>>0|(n>>>0>f>>>0|(n|0)==(f|0)&c>>>0>h>>>0)){u=n;d=72;break t}else l=n}}u=i[14643+(l+1)>>0]|0;n=u&255;if(n>>>0<t>>>0){l=0;while(1){c=n+(ne(l,t)|0)|0;l=a[v>>2]|0;if(l>>>0<(a[m>>2]|0)>>>0){a[v>>2]=l+1;l=o[l>>0]|0}else l=mr(e)|0;u=i[14643+(l+1)>>0]|0;n=u&255;if(!(c>>>0<119304647&n>>>0<t>>>0))break;else l=c}n=0}else{c=0;n=0}if((u&255)>>>0<t>>>0){d=ic(-1,-1,t|0,0)|0;p=O;f=n;while(1){if(f>>>0>p>>>0|(f|0)==(p|0)&c>>>0>d>>>0){u=f;d=72;break t}n=nc(c|0,f|0,t|0,0)|0;h=O;u=u&255;if(h>>>0>4294967295|(h|0)==-1&n>>>0>~u>>>0){u=f;d=72;break t}c=qu(u|0,0,n|0,h|0)|0;n=O;l=a[v>>2]|0;if(l>>>0<(a[m>>2]|0)>>>0){a[v>>2]=l+1;l=o[l>>0]|0}else l=mr(e)|0;u=i[14643+(l+1)>>0]|0;if((u&255)>>>0>=t>>>0){u=n;d=72;break}else f=n}}else{u=n;d=72}}while(0);if((d|0)==72)if((o[14643+(l+1)>>0]|0)>>>0<t>>>0){do{l=a[v>>2]|0;if(l>>>0<(a[m>>2]|0)>>>0){a[v>>2]=l+1;l=o[l>>0]|0}else l=mr(e)|0}while((o[14643+(l+1)>>0]|0)>>>0<t>>>0);a[(hr()|0)>>2]=34;u=s;l=r;t=(r&1|0)==0&0==0?g:0}else{l=c;t=g}if(a[m>>2]|0)a[v>>2]=(a[v>>2]|0)+-1;if(!(u>>>0<s>>>0|(u|0)==(s|0)&l>>>0<r>>>0)){if(!((r&1|0)!=0|0!=0|(t|0)!=0)){a[(hr()|0)>>2]=34;r=qu(r|0,s|0,-1,-1)|0;s=O;break}if(u>>>0>s>>>0|(u|0)==(s|0)&l>>>0>r>>>0){a[(hr()|0)>>2]=34;break}}r=((t|0)<0)<<31>>31;r=Wu(l^t|0,u^r|0,t|0,r|0)|0;s=O}while(0);O=s;return r|0}function gr(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;a[e+104>>2]=t;n=a[e+4>>2]|0;
i=a[e+8>>2]|0;r=i-n|0;a[e+108>>2]=r;if((t|0)!=0&(r|0)>(t|0))a[e+100>>2]=n+t;else a[e+100>>2]=i;return}function mr(e){e=e|0;var t=0,n=0,r=0,s=0,l=0,u=0;n=e+104|0;l=a[n>>2]|0;if((l|0)!=0?(a[e+108>>2]|0)>=(l|0):0)u=4;else{t=jr(e)|0;if((t|0)>=0){s=a[n>>2]|0;n=e+8|0;if(s){r=a[n>>2]|0;l=a[e+4>>2]|0;n=r;s=s-(a[e+108>>2]|0)+-1|0;if((n-l|0)>(s|0))a[e+100>>2]=l+s;else u=9}else{r=a[n>>2]|0;n=r;u=9}if((u|0)==9)a[e+100>>2]=n;n=a[e+4>>2]|0;if(r){e=e+108|0;a[e>>2]=r+1-n+(a[e>>2]|0)}n=n+-1|0;if((o[n>>0]|0|0)!=(t|0))i[n>>0]=t}else u=4}if((u|0)==4){a[e+100>>2]=0;t=-1}return t|0}function vr(e){e=e|0;if(e>>>0>4294963200){a[(hr()|0)>>2]=0-e;e=-1}return e|0}function _r(e,t){e=+e;t=+t;var n=0,i=0;c[d>>3]=e;i=a[d>>2]|0;n=a[d+4>>2]|0;c[d>>3]=t;n=a[d+4>>2]&-2147483648|n&2147483647;a[d>>2]=i;a[d+4>>2]=n;return+ +c[d>>3]}function yr(e,t){e=+e;t=+t;return+ +_r(e,t)}function br(e,t){e=+e;t=+t;var n=0,i=0,r=0,o=0,s=0,l=0,u=0,h=0,f=0,p=0,g=0,m=0;c[d>>3]=e;n=a[d>>2]|0;h=a[d+4>>2]|0;c[d>>3]=t;f=a[d>>2]|0;p=a[d+4>>2]|0;i=Zu(n|0,h|0,52)|0;i=i&2047;l=Zu(f|0,p|0,52)|0;l=l&2047;g=h&-2147483648;s=Yu(f|0,p|0,1)|0;u=O;e:do if(!((s|0)==0&(u|0)==0)?(o=p&2147483647,!(o>>>0>2146435072|(o|0)==2146435072&f>>>0>0|(i|0)==2047)):0){r=Yu(n|0,h|0,1)|0;o=O;if(!(o>>>0>u>>>0|(o|0)==(u|0)&r>>>0>s>>>0))return+((r|0)==(s|0)&(o|0)==(u|0)?e*0:e);if(!i){i=Yu(n|0,h|0,12)|0;r=O;if((r|0)>-1|(r|0)==-1&i>>>0>4294967295){o=i;i=0;do{i=i+-1|0;o=Yu(o|0,r|0,1)|0;r=O}while((r|0)>-1|(r|0)==-1&o>>>0>4294967295)}else i=0;n=Yu(n|0,h|0,1-i|0)|0;r=O}else r=h&1048575|1048576;if(!l){o=Yu(f|0,p|0,12)|0;s=O;if((s|0)>-1|(s|0)==-1&o>>>0>4294967295){l=0;do{l=l+-1|0;o=Yu(o|0,s|0,1)|0;s=O}while((s|0)>-1|(s|0)==-1&o>>>0>4294967295)}else l=0;f=Yu(f|0,p|0,1-l|0)|0;h=O}else h=p&1048575|1048576;u=Wu(n|0,r|0,f|0,h|0)|0;s=O;o=(s|0)>-1|(s|0)==-1&u>>>0>4294967295;t:do if((i|0)>(l|0)){while(1){if(o)if((n|0)==(f|0)&(r|0)==(h|0))break;else{n=u;r=s}n=Yu(n|0,r|0,1)|0;r=O;i=i+-1|0;u=Wu(n|0,r|0,f|0,h|0)|0;s=O;o=(s|0)>-1|(s|0)==-1&u>>>0>4294967295;if((i|0)<=(l|0))break t}t=e*0;break e}while(0);if(o)if((n|0)==(f|0)&(r|0)==(h|0)){t=e*0;break}else{r=s;n=u}if(r>>>0<1048576|(r|0)==1048576&n>>>0<0)do{n=Yu(n|0,r|0,1)|0;r=O;i=i+-1|0}while(r>>>0<1048576|(r|0)==1048576&n>>>0<0);if((i|0)>0){p=qu(n|0,r|0,0,-1048576)|0;n=O;i=Yu(i|0,0,52)|0;n=n|O;i=p|i}else{i=Zu(n|0,r|0,1-i|0)|0;n=O}a[d>>2]=i;a[d+4>>2]=n|g;t=+c[d>>3]}else m=3;while(0);if((m|0)==3){t=e*t;t=t/t}return+t}function wr(e,t){e=+e;t=+t;return+ +br(e,t)}function xr(e,t){e=+e;t=t|0;var n=0,i=0,r=0;c[d>>3]=e;n=a[d>>2]|0;i=a[d+4>>2]|0;r=Zu(n|0,i|0,52)|0;r=r&2047;switch(r|0){case 0:{if(e!=0){e=+xr(e*0x10000000000000000,t);n=(a[t>>2]|0)+-64|0}else n=0;a[t>>2]=n;break}case 2047:break;default:{a[t>>2]=r+-1022;a[d>>2]=n;a[d+4>>2]=i&-2146435073|1071644672;e=+c[d>>3]}}return+e}function Er(e,t){e=+e;t=t|0;return+ +xr(e,t)}function kr(e,t){e=+e;t=t|0;var n=0;if((t|0)>1023){e=e*8.98846567431158e307;n=t+-1023|0;if((n|0)>1023){n=t+-2046|0;n=(n|0)>1023?1023:n;e=e*8.98846567431158e307}}else if((t|0)<-1022){e=e*2.2250738585072014e-308;n=t+1022|0;if((n|0)<-1022){n=t+2044|0;n=(n|0)<-1022?-1022:n;e=e*2.2250738585072014e-308}}else n=t;n=Yu(n+1023|0,0,52)|0;t=O;a[d>>2]=n;a[d+4>>2]=t;return+(e*+c[d>>3])}function Mr(e,t){e=+e;t=t|0;return+ +kr(e,t)}function Tr(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,s=0,l=0,u=0,c=0,f=0;c=h;h=h+16|0;o=c;l=(r|0)==0?2680:r;r=a[l>>2]|0;e:do if(!t)if(!r)r=0;else u=15;else{s=(e|0)==0?o:e;if(!n)r=-2;else{if(!r){r=i[t>>0]|0;o=r&255;if(r<<24>>24>-1){a[s>>2]=o;r=r<<24>>24!=0&1;break}r=o+-194|0;if(r>>>0>50){u=15;break}r=a[2432+(r<<2)>>2]|0;o=n+-1|0;if(o){t=t+1|0;u=9}}else{o=n;u=9}t:do if((u|0)==9){e=i[t>>0]|0;f=(e&255)>>>3;if((f+-16|f+(r>>26))>>>0>7){u=15;break e}while(1){t=t+1|0;r=(e&255)+-128|r<<6;o=o+-1|0;if((r|0)>=0)break;if(!o)break t;e=i[t>>0]|0;if((e&-64)<<24>>24!=-128){u=15;break e}}a[l>>2]=0;a[s>>2]=r;r=n-o|0;break e}while(0);a[l>>2]=r;r=-2}}while(0);if((u|0)==15){a[l>>2]=0;a[(hr()|0)>>2]=84;r=-1}h=c;return r|0}function Sr(e){e=e|0;if(!e)e=1;else e=(a[e>>2]|0)==0;return e&1|0}function Ar(e,t,n){e=e|0;t=t|0;n=n|0;do if(e){if(t>>>0<128){i[e>>0]=t;e=1;break}if(t>>>0<2048){i[e>>0]=t>>>6|192;i[e+1>>0]=t&63|128;e=2;break}if(t>>>0<55296|(t&-8192|0)==57344){i[e>>0]=t>>>12|224;i[e+1>>0]=t>>>6&63|128;i[e+2>>0]=t&63|128;e=3;break}if((t+-65536|0)>>>0<1048576){i[e>>0]=t>>>18|240;i[e+1>>0]=t>>>12&63|128;i[e+2>>0]=t>>>6&63|128;i[e+3>>0]=t&63|128;e=4;break}else{a[(hr()|0)>>2]=84;e=-1;break}}else e=1;while(0);return e|0}function Rr(e,t){e=e|0;t=t|0;if(!e)e=0;else e=Ar(e,t,0)|0;return e|0}function Cr(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,s=0,l=0,u=0,c=0,f=0,d=0,p=0;p=h;h=h+112|0;d=p+40|0;c=p+24|0;u=p+16|0;o=p;f=p+52|0;r=i[t>>0]|0;if(da(14909,r<<24>>24,4)|0){n=Ba(1144)|0;if(!n)n=0;else{s=n;l=s+112|0;do{a[s>>2]=0;s=s+4|0}while((s|0)<(l|0));if(!(va(t,43)|0))a[n>>2]=r<<24>>24==114?8:4;if(va(t,101)|0){a[o>>2]=e;a[o+4>>2]=2;a[o+8>>2]=1;ke(221,o|0)|0;r=i[t>>0]|0}if(r<<24>>24==97){a[u>>2]=e;a[u+4>>2]=3;r=ke(221,u|0)|0;if(!(r&1024)){a[c>>2]=e;a[c+4>>2]=4;a[c+8>>2]=r|1024;ke(221,c|0)|0}t=a[n>>2]|128;a[n>>2]=t}else t=a[n>>2]|0;a[n+60>>2]=e;a[n+44>>2]=n+120;a[n+48>>2]=1024;r=n+75|0;i[r>>0]=-1;if((t&8|0)==0?(a[d>>2]=e,a[d+4>>2]=21505,a[d+8>>2]=f,(gt(54,d|0)|0)==0):0)i[r>>0]=10;a[n+32>>2]=14;a[n+36>>2]=4;a[n+40>>2]=5;a[n+12>>2]=2;if(!(a[598]|0))a[n+76>>2]=-1;St(2416);r=a[603]|0;a[n+56>>2]=r;if(r)a[r+52>>2]=n;a[603]=n;mt(2416)}}else{a[(hr()|0)>>2]=22;n=0}h=p;return n|0}function Pr(e){e=e|0;var t=0,n=0,r=0;n=(va(e,43)|0)==0;t=i[e>>0]|0;n=n?t<<24>>24!=114&1:2;r=(va(e,120)|0)==0;n=r?n:n|128;e=(va(e,101)|0)==0;e=e?n:n|524288;e=t<<24>>24==114?e:e|64;e=t<<24>>24==119?e|512:e;return(t<<24>>24==97?e|1024:e)|0}function Or(e){e=e|0;return 0}function Lr(e){e=e|0;return}function Nr(e){e=e|0;var t=0,n=0;t=h;h=h+16|0;n=t;a[n>>2]=a[e+60>>2];e=vr(At(6,n|0)|0)|0;h=t;return e|0}function Fr(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,s=0,l=0,u=0,c=0,f=0,d=0;f=h;h=h+48|0;s=f+16|0;o=f;r=f+32|0;a[r>>2]=t;l=r+4|0;c=e+48|0;d=a[c>>2]|0;a[l>>2]=n-((d|0)!=0&1);u=e+44|0;a[r+8>>2]=a[u>>2];a[r+12>>2]=d;if(!(a[597]|0)){a[s>>2]=a[e+60>>2];a[s+4>>2]=r;a[s+8>>2]=2;r=vr(jt(145,s|0)|0)|0}else{Ne(13,e|0);a[o>>2]=a[e+60>>2];a[o+4>>2]=r;a[o+8>>2]=2;r=vr(jt(145,o|0)|0)|0;_t(0)}if((r|0)>=1){l=a[l>>2]|0;if(r>>>0>l>>>0){s=a[u>>2]|0;o=e+4|0;a[o>>2]=s;a[e+8>>2]=s+(r-l);if(!(a[c>>2]|0))r=n;else{a[o>>2]=s+1;i[t+(n+-1)>>0]=i[s>>0]|0;r=n}}}else{a[e>>2]=a[e>>2]|r&48^16;a[e+8>>2]=0;a[e+4>>2]=0}h=f;return r|0}function Dr(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0;r=h;h=h+32|0;o=r;i=r+20|0;a[o>>2]=a[e+60>>2];a[o+4>>2]=0;a[o+8>>2]=t;a[o+12>>2]=i;a[o+16>>2]=n;if((vr(It(140,o|0)|0)|0)<0){a[i>>2]=-1;e=-1}else e=a[i>>2]|0;h=r;return e|0}function Ir(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,s=0,l=0,u=0,c=0,f=0,d=0,p=0,g=0,m=0;m=h;h=h+48|0;d=m+16|0;f=m;i=m+32|0;p=e+28|0;r=a[p>>2]|0;a[i>>2]=r;g=e+20|0;r=(a[g>>2]|0)-r|0;a[i+4>>2]=r;a[i+8>>2]=t;a[i+12>>2]=n;u=e+60|0;c=e+44|0;t=2;r=r+n|0;while(1){if(!(a[597]|0)){a[d>>2]=a[u>>2];a[d+4>>2]=i;a[d+8>>2]=t;s=vr(Vt(146,d|0)|0)|0}else{Ne(14,e|0);a[f>>2]=a[u>>2];a[f+4>>2]=i;a[f+8>>2]=t;s=vr(Vt(146,f|0)|0)|0;_t(0)}if((r|0)==(s|0)){r=6;break}if((s|0)<0){r=8;break}r=r-s|0;o=a[i+4>>2]|0;if(s>>>0<=o>>>0)if((t|0)==2){a[p>>2]=(a[p>>2]|0)+s;l=o;t=2}else l=o;else{l=a[c>>2]|0;a[p>>2]=l;a[g>>2]=l;l=a[i+12>>2]|0;s=s-o|0;i=i+8|0;t=t+-1|0}a[i>>2]=(a[i>>2]|0)+s;a[i+4>>2]=l-s}if((r|0)==6){d=a[c>>2]|0;a[e+16>>2]=d+(a[e+48>>2]|0);e=d;a[p>>2]=e;a[g>>2]=e}else if((r|0)==8){a[e+16>>2]=0;a[p>>2]=0;a[g>>2]=0;a[e>>2]=a[e>>2]|32;if((t|0)==2)n=0;else n=n-(a[i+4>>2]|0)|0}h=m;return n|0}function Ur(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0;o=h;h=h+80|0;r=o;a[e+36>>2]=4;if((a[e>>2]&64|0)==0?(a[r>>2]=a[e+60>>2],a[r+4>>2]=21505,a[r+8>>2]=o+12,(gt(54,r|0)|0)!=0):0)i[e+75>>0]=-1;r=Ir(e,t,n)|0;h=o;return r|0}function Hr(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,s=0;i=e+84|0;o=a[i>>2]|0;s=n+256|0;r=da(o,0,s)|0;r=(r|0)==0?s:r-o|0;n=r>>>0<n>>>0?r:n;Qu(t|0,o|0,n|0)|0;a[e+4>>2]=o+n;t=o+r|0;a[e+8>>2]=t;a[i>>2]=t;return n|0}function zr(e){e=e|0;var t=0,n=0;t=e+74|0;n=i[t>>0]|0;i[t>>0]=n+255|n;t=e+20|0;n=e+44|0;if((a[t>>2]|0)>>>0>(a[n>>2]|0)>>>0)Uc[a[e+36>>2]&15](e,0,0)|0;a[e+16>>2]=0;a[e+28>>2]=0;a[t>>2]=0;t=a[e>>2]|0;if(t&20)if(!(t&4))t=-1;else{a[e>>2]=t|32;t=-1}else{t=a[n>>2]|0;a[e+8>>2]=t;a[e+4>>2]=t;t=0}return t|0}function Br(e){e=e|0;var t=0,n=0;t=e+74|0;n=i[t>>0]|0;i[t>>0]=n+255|n;t=a[e>>2]|0;if(!(t&8)){a[e+8>>2]=0;a[e+4>>2]=0;t=a[e+44>>2]|0;a[e+28>>2]=t;a[e+20>>2]=t;a[e+16>>2]=t+(a[e+48>>2]|0);t=0}else{a[e>>2]=t|32;t=-1}return t|0}function jr(e){e=e|0;var t=0,n=0;n=h;h=h+16|0;t=n;if((a[e+8>>2]|0)==0?(zr(e)|0)!=0:0)t=-1;else if((Uc[a[e+32>>2]&15](e,t,1)|0)==1)t=o[t>>0]|0;else t=-1;h=n;return t|0}function Vr(e){e=e|0;var t=0,n=0,i=0;i=(a[e>>2]&1|0)!=0;if(!i){St(2416);n=a[e+52>>2]|0;t=e+56|0;if(n)a[n+56>>2]=a[t>>2];t=a[t>>2]|0;if(t)a[t+52>>2]=n;if((a[603]|0)==(e|0))a[603]=t;mt(2416)}t=Wr(e)|0;t=Xc[a[e+12>>2]&31](e)|0|t;n=a[e+92>>2]|0;if(n)ja(n);if(!i)ja(e);return t|0}function Gr(e){e=e|0;var t=0;if((a[e+76>>2]|0)>-1){t=(Or(e)|0)==0;e=(a[e>>2]|0)>>>5&1}else e=(a[e>>2]|0)>>>5&1;return e|0}function Wr(e){e=e|0;var t=0,n=0;do if(e){if((a[e+76>>2]|0)<=-1){t=Pa(e)|0;break}n=(Or(e)|0)==0;t=Pa(e)|0;if(!n)Lr(e)}else{if(!(a[660]|0))t=0;else t=Wr(a[660]|0)|0;St(2416);e=a[603]|0;if(e)do{if((a[e+76>>2]|0)>-1)n=Or(e)|0;else n=0;if((a[e+20>>2]|0)>>>0>(a[e+28>>2]|0)>>>0)t=Pa(e)|0|t;if(n)Lr(e);e=a[e+56>>2]|0}while((e|0)!=0);mt(2416)}while(0);return t|0}function Xr(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,s=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0;if((a[n+76>>2]|0)>-1)p=Or(n)|0;else p=0;r=t+-1|0;if((t|0)<2){g=n+74|0;d=i[g>>0]|0;i[g>>0]=d+255|d;if(p)Lr(n);if(!r)i[e>>0]=0;else e=0}else{e:do if(r){f=n+4|0;d=n+8|0;s=e;while(1){l=a[f>>2]|0;m=l;c=(a[d>>2]|0)-m|0;u=da(l,10,c)|0;v=(u|0)==0;u=v?c:1-m+u|0;m=u>>>0<r>>>0;u=m?u:r;Qu(s|0,l|0,u|0)|0;l=a[f>>2]|0;c=l+u|0;a[f>>2]=c;t=s+u|0;h=r-u|0;if(!(v&m)){g=18;break e}if(c>>>0<(a[d>>2]|0)>>>0){u=u+1|0;a[f>>2]=l+u;l=o[c>>0]|0}else{r=jr(n)|0;if((r|0)<0)break;u=u+1|0;l=r}r=h+-1|0;s=s+u|0;i[t>>0]=l;if(!((r|0)!=0&(l&255|0)!=10)){t=s;g=18;break e}}if((t|0)!=(e|0)?(a[n>>2]&16|0)!=0:0)g=18;else e=0}else{t=e;g=18}while(0);if((g|0)==18)if(!e)e=0;else i[t>>0]=0;if(p)Lr(n)}return e|0}function Yr(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,s=0;o=h;h=h+32|0;r=o+16|0;n=o;if(da(14909,i[t>>0]|0,4)|0){s=Pr(t)|0|32768;a[n>>2]=e;a[n+4>>2]=s;a[n+8>>2]=438;n=vr(Rt(5,n|0)|0)|0;if((n|0)>=0){e=Cr(n,t)|0;if(!e){a[r>>2]=n;At(6,r|0)|0;e=0}}else e=0}else{a[(hr()|0)>>2]=22;e=0}h=o;return e|0}function qr(e,t){e=e|0;t=t|0;return(ia(e,xa(e)|0,1,t)|0)+-1|0}function Zr(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,s=0,l=0,u=0,c=0,h=0;u=ne(n,t)|0;if((a[r+76>>2]|0)>-1)c=Or(r)|0;else c=0;o=r+74|0;s=i[o>>0]|0;i[o>>0]=s+255|s;o=r+4|0;s=a[o>>2]|0;l=(a[r+8>>2]|0)-s|0;if((l|0)>0){l=l>>>0<u>>>0?l:u;Qu(e|0,s|0,l|0)|0;a[o>>2]=s+l;e=e+l|0;o=u-l|0}else o=u;e:do if(!o)h=13;else{l=r+32|0;s=o;while(1){if(zr(r)|0){n=s;break}o=Uc[a[l>>2]&15](r,e,s)|0;if((o+1|0)>>>0<2){n=s;break}if((s|0)==(o|0)){h=13;break e}else{e=e+o|0;s=s-o|0}}if(c)Lr(r);n=((u-n|0)>>>0)/(t>>>0)|0}while(0);if((h|0)==13)if(c)Lr(r);return n|0}function Qr(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;if((n|0)==1)t=t-(a[e+8>>2]|0)+(a[e+4>>2]|0)|0;r=e+20|0;i=e+28|0;if((a[r>>2]|0)>>>0>(a[i>>2]|0)>>>0?(Uc[a[e+36>>2]&15](e,0,0)|0,(a[r>>2]|0)==0):0)t=-1;else{a[e+16>>2]=0;a[i>>2]=0;a[r>>2]=0;if((Uc[a[e+40>>2]&15](e,t,n)|0)<0)t=-1;else{a[e+8>>2]=0;a[e+4>>2]=0;a[e>>2]=a[e>>2]&-17;t=0}}return t|0}function $r(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;if((a[e+76>>2]|0)>-1){i=(Or(e)|0)==0;t=Qr(e,t,n)|0;if(!i)Lr(e)}else t=Qr(e,t,n)|0;return t|0}function Jr(e,t,n){e=e|0;t=t|0;n=n|0;return $r(e,t,n)|0}function Kr(e){e=e|0;var t=0;if(!(a[e>>2]&128))t=1;else t=(a[e+20>>2]|0)>>>0>(a[e+28>>2]|0)>>>0?2:1;t=Uc[a[e+40>>2]&15](e,0,t)|0;if((t|0)>=0)t=t-(a[e+8>>2]|0)+(a[e+4>>2]|0)+(a[e+20>>2]|0)-(a[e+28>>2]|0)|0;return t|0}function ea(e){e=e|0;var t=0;if((a[e+76>>2]|0)>-1){t=(Or(e)|0)==0;e=Kr(e)|0}else e=Kr(e)|0;return e|0}function ta(e){e=e|0;return ea(e)|0}function na(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,s=0,l=0;r=n+16|0;o=a[r>>2]|0;if(!o)if(!(Br(n)|0)){o=a[r>>2]|0;s=4}else r=0;else s=4;e:do if((s|0)==4){l=n+20|0;s=a[l>>2]|0;if((o-s|0)>>>0<t>>>0){r=Uc[a[n+36>>2]&15](n,e,t)|0;break}t:do if((i[n+75>>0]|0)>-1){r=t;while(1){if(!r){o=s;r=0;break t}o=r+-1|0;if((i[e+o>>0]|0)==10)break;else r=o}if((Uc[a[n+36>>2]&15](n,e,r)|0)>>>0<r>>>0)break e;t=t-r|0;e=e+r|0;o=a[l>>2]|0}else{o=s;r=0}while(0);Qu(o|0,e|0,t|0)|0;a[l>>2]=(a[l>>2]|0)+t;r=r+t|0}while(0);return r|0}function ia(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0;r=ne(n,t)|0;if((a[i+76>>2]|0)>-1){o=(Or(i)|0)==0;e=na(e,r,i)|0;if(!o)Lr(i)}else e=na(e,r,i)|0;if((e|0)!=(r|0))n=(e>>>0)/(t>>>0)|0;return n|0}function ra(e){e=e|0;var t=0;if((a[e+76>>2]|0)>-1){t=(Or(e)|0)==0;Qr(e,0,0)|0;a[e>>2]=a[e>>2]&-33;if(!t)Lr(e)}else{Qr(e,0,0)|0;a[e>>2]=a[e>>2]&-33}return}function aa(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;i=h;h=h+16|0;r=i;a[r>>2]=n;n=ca(e,t,r)|0;h=i;return n|0}function oa(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,s=0,l=0;l=h;h=h+16|0;i=l;r=Ba(240)|0;do if(r){a[i>>2]=a[n>>2];i=ua(r,240,t,i)|0;if(i>>>0<240){t=Ga(r,i+1|0)|0;a[e>>2]=(t|0)!=0?t:r;break}ja(r);if((i|0)>=0?(s=i+1|0,o=Ba(s)|0,a[e>>2]=o,(o|0)!=0):0)i=ua(o,s,t,n)|0;else i=-1}else i=-1;while(0);h=l;return i|0}function sa(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,s=0,l=0,u=0,c=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0;_=h;h=h+224|0;p=_+80|0;v=_+96|0;m=_;g=_+136|0;r=v;o=r+40|0;do{a[r>>2]=0;r=r+4|0}while((r|0)<(o|0));a[p>>2]=a[n>>2];if((Oa(0,t,p,m,v)|0)<0)n=-1;else{if((a[e+76>>2]|0)>-1)f=Or(e)|0;else f=0;n=a[e>>2]|0;d=n&32;if((i[e+74>>0]|0)<1)a[e>>2]=n&-33;n=e+48|0;if(!(a[n>>2]|0)){o=e+44|0;s=a[o>>2]|0;a[o>>2]=g;l=e+28|0;a[l>>2]=g;u=e+20|0;a[u>>2]=g;a[n>>2]=80;c=e+16|0;a[c>>2]=g+80;r=Oa(e,t,p,m,v)|0;if(s){Uc[a[e+36>>2]&15](e,0,0)|0;r=(a[u>>2]|0)==0?-1:r;a[o>>2]=s;a[n>>2]=0;a[c>>2]=0;a[l>>2]=0;a[u>>2]=0}}else r=Oa(e,t,p,m,v)|0;n=a[e>>2]|0;a[e>>2]=n|d;if(f)Lr(e);n=(n&32|0)==0?r:-1}h=_;return n|0}function la(e,t,n){e=e|0;t=t|0;n=n|0;var s=0,l=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,L=0,N=0,F=0,D=0,I=0,U=0,H=0,z=0,B=0,j=0;B=h;h=h+304|0;L=B+16|0;F=B+8|0;N=B+33|0;D=B;k=B+32|0;if((a[e+76>>2]|0)>-1)z=Or(e)|0;else z=0;s=i[t>>0]|0;e:do if(s<<24>>24){I=e+4|0;U=e+100|0;P=e+108|0;M=e+8|0;T=N+10|0;S=N+33|0;A=F+4|0;R=N+46|0;C=N+94|0;f=s;s=0;d=t;_=0;l=0;t=0;t:while(1){n:do if(!(cr(f&255)|0)){f=(i[d>>0]|0)==37;i:do if(f){m=d+1|0;p=i[m>>0]|0;r:do switch(p<<24>>24){case 37:break i;case 42:{E=0;p=d+2|0;break}default:{p=(p&255)+-48|0;if(p>>>0<10?(i[d+2>>0]|0)==36:0){a[L>>2]=a[n>>2];while(1){E=(a[L>>2]|0)+(4-1)&~(4-1);f=a[E>>2]|0;a[L>>2]=E+4;if(p>>>0>1)p=p+-1|0;else break}E=f;p=d+3|0;break r}p=(a[n>>2]|0)+(4-1)&~(4-1);E=a[p>>2]|0;a[n>>2]=p+4;p=m}}while(0);f=i[p>>0]|0;d=f&255;if((d+-48|0)>>>0<10){f=0;while(1){m=(f*10|0)+-48+d|0;p=p+1|0;f=i[p>>0]|0;d=f&255;if((d+-48|0)>>>0>=10)break;else f=m}}else m=0;if(f<<24>>24==109){p=p+1|0;v=i[p>>0]|0;f=(E|0)!=0&1;l=0;t=0}else{v=f;f=0}d=p+1|0;switch(v&255|0){case 104:{x=(i[d>>0]|0)==104;d=x?p+2|0:d;p=x?-2:-1;break}case 108:{x=(i[d>>0]|0)==108;d=x?p+2|0:d;p=x?3:1;break}case 106:{p=3;break}case 116:case 122:{p=1;break}case 76:{p=2;break}case 110:case 112:case 67:case 83:case 91:case 99:case 115:case 88:case 71:case 70:case 69:case 65:case 103:case 102:case 101:case 97:case 120:case 117:case 111:case 105:case 100:{d=p;p=0;break}default:{H=152;break t}}v=o[d>>0]|0;y=(v&47|0)==3;v=y?v|32:v;y=y?1:p;switch(v|0){case 99:{x=_;w=(m|0)<1?1:m;break}case 91:{x=_;w=m;break}case 110:{if(!E){p=_;break n}switch(y|0){case-2:{i[E>>0]=_;p=_;break n}case-1:{r[E>>1]=_;p=_;break n}case 0:{a[E>>2]=_;p=_;break n}case 1:{a[E>>2]=_;p=_;break n}case 3:{p=E;a[p>>2]=_;a[p+4>>2]=((_|0)<0)<<31>>31;p=_;break n}default:{p=_;break n}}}default:{gr(e,0);do{p=a[I>>2]|0;if(p>>>0<(a[U>>2]|0)>>>0){a[I>>2]=p+1;p=o[p>>0]|0}else p=mr(e)|0}while((cr(p)|0)!=0);p=a[I>>2]|0;if(a[U>>2]|0){p=p+-1|0;a[I>>2]=p}x=(a[P>>2]|0)+_+p-(a[M>>2]|0)|0;w=m}}gr(e,w);p=a[I>>2]|0;m=a[U>>2]|0;if(p>>>0<m>>>0)a[I>>2]=p+1;else{if((mr(e)|0)<0){H=152;break t}m=a[U>>2]|0}if(m)a[I>>2]=(a[I>>2]|0)+-1;r:do switch(v|0){case 91:case 99:case 115:{b=(v|0)==99;a:do if((v&239|0)==99){Xu(N|0,-1,257)|0;i[N>>0]=0;if((v|0)==115){i[S>>0]=0;i[T>>0]=0;i[T+1>>0]=0;i[T+2>>0]=0;i[T+3>>0]=0;i[T+4>>0]=0}}else{j=d+1|0;_=(i[j>>0]|0)==94;p=_&1;v=_?j:d;d=_?d+2|0:j;Xu(N|0,_&1|0,257)|0;i[N>>0]=0;switch(i[d>>0]|0){case 45:{_=(p^1)&255;i[R>>0]=_;d=v+2|0;break}case 93:{_=(p^1)&255;i[C>>0]=_;d=v+2|0;break}default:_=(p^1)&255}while(1){p=i[d>>0]|0;o:do switch(p<<24>>24){case 0:{H=152;break t}case 93:break a;case 45:{v=d+1|0;p=i[v>>0]|0;switch(p<<24>>24){case 93:case 0:{p=45;break o}default:{}}d=i[d+-1>>0]|0;if((d&255)<(p&255)){d=d&255;do{d=d+1|0;i[N+d>>0]=_;p=i[v>>0]|0}while((d|0)<(p&255|0));d=v}else d=v;break}default:{}}while(0);i[N+((p&255)+1)>>0]=_;d=d+1|0}}while(0);v=b?w+1|0:31;_=(y|0)==1;y=(f|0)!=0;a:do if(_){if(y){t=Ba(v<<2)|0;if(!t){l=0;H=152;break t}}else t=E;a[F>>2]=0;a[A>>2]=0;l=0;o:while(1){m=(t|0)==0;do{s:while(1){p=a[I>>2]|0;if(p>>>0<(a[U>>2]|0)>>>0){a[I>>2]=p+1;p=o[p>>0]|0}else p=mr(e)|0;if(!(i[N+(p+1)>>0]|0))break o;i[k>>0]=p;switch(Tr(D,k,1,F)|0){case-1:{l=0;H=152;break t}case-2:break;default:break s}}if(!m){a[t+(l<<2)>>2]=a[D>>2];l=l+1|0}}while(!(y&(l|0)==(v|0)));l=v<<1|1;p=Ga(t,l<<2)|0;if(!p){l=0;H=152;break t}j=v;v=l;t=p;l=j}if(!(Sr(F)|0)){l=0;H=152;break t}else{m=l;l=0}}else{if(y){l=Ba(v)|0;if(!l){l=0;t=0;H=152;break t}else p=0;while(1){do{t=a[I>>2]|0;if(t>>>0<(a[U>>2]|0)>>>0){a[I>>2]=t+1;t=o[t>>0]|0}else t=mr(e)|0;if(!(i[N+(t+1)>>0]|0)){m=p;t=0;break a}i[l+p>>0]=t;p=p+1|0}while((p|0)!=(v|0));t=v<<1|1;p=Ga(l,t)|0;if(!p){t=0;H=152;break t}else{j=v;v=t;l=p;p=j}}}if(!E){l=m;while(1){t=a[I>>2]|0;if(t>>>0<l>>>0){a[I>>2]=t+1;t=o[t>>0]|0}else t=mr(e)|0;if(!(i[N+(t+1)>>0]|0)){m=0;l=0;t=0;break a}l=a[U>>2]|0}}else{l=0;while(1){t=a[I>>2]|0;if(t>>>0<m>>>0){a[I>>2]=t+1;t=o[t>>0]|0}else t=mr(e)|0;if(!(i[N+(t+1)>>0]|0)){m=l;l=E;t=0;break a}i[E+l>>0]=t;m=a[U>>2]|0;l=l+1|0}}}while(0);p=a[I>>2]|0;if(a[U>>2]|0){p=p+-1|0;a[I>>2]=p}p=p-(a[M>>2]|0)+(a[P>>2]|0)|0;if(!p)break t;if(!((p|0)==(w|0)|b^1))break t;do if(y)if(_){a[E>>2]=t;break}else{a[E>>2]=l;break}while(0);if(!b){if(t)a[t+(m<<2)>>2]=0;if(!l){l=0;break r}i[l+m>>0]=0}break}case 120:case 88:case 112:{p=16;H=134;break}case 111:{p=8;H=134;break}case 117:case 100:{p=10;H=134;break}case 105:{p=0;H=134;break}case 71:case 103:case 70:case 102:case 69:case 101:case 65:case 97:{g=+dr(e,y,0);if((a[P>>2]|0)==((a[M>>2]|0)-(a[I>>2]|0)|0))break t;if(E)switch(y|0){case 0:{u[E>>2]=g;break r}case 1:{c[E>>3]=g;break r}case 2:{c[E>>3]=g;break r}default:break r}break}default:{}}while(0);r:do if((H|0)==134){H=0;p=pr(e,p,0,-1,-1)|0;if((a[P>>2]|0)==((a[M>>2]|0)-(a[I>>2]|0)|0))break t;if((E|0)!=0&(v|0)==112){a[E>>2]=p;break}if(E)switch(y|0){case-2:{i[E>>0]=p;break r}case-1:{r[E>>1]=p;break r}case 0:{a[E>>2]=p;break r}case 1:{a[E>>2]=p;break r}case 3:{j=E;a[j>>2]=p;a[j+4>>2]=O;break r}default:break r}}while(0);s=((E|0)!=0&1)+s|0;p=(a[P>>2]|0)+x+(a[I>>2]|0)-(a[M>>2]|0)|0;break n}while(0);d=d+(f&1)|0;gr(e,0);f=a[I>>2]|0;if(f>>>0<(a[U>>2]|0)>>>0){a[I>>2]=f+1;f=o[f>>0]|0}else f=mr(e)|0;if((f|0)!=(o[d>>0]|0)){H=21;break t}p=_+1|0}else{while(1){f=d+1|0;if(!(cr(o[f>>0]|0)|0))break;else d=f}gr(e,0);do{f=a[I>>2]|0;if(f>>>0<(a[U>>2]|0)>>>0){a[I>>2]=f+1;f=o[f>>0]|0}else f=mr(e)|0}while((cr(f)|0)!=0);f=a[I>>2]|0;if(a[U>>2]|0){f=f+-1|0;a[I>>2]=f}p=(a[P>>2]|0)+_+f-(a[M>>2]|0)|0}while(0);d=d+1|0;f=i[d>>0]|0;if(!(f<<24>>24))break e;else _=p}if((H|0)==21){if(a[U>>2]|0)a[I>>2]=(a[I>>2]|0)+-1;if((s|0)!=0|(f|0)>-1)break;else{s=0;H=153}}else if((H|0)==152)if(!s){s=f;H=153}if((H|0)==153){f=s;s=-1}if(f){ja(l);ja(t)}}else s=0;while(0);if(z)Lr(e);h=B;return s|0}function ua(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,s=0,l=0,u=0,c=0,f=0,d=0;d=h;h=h+128|0;o=d+112|0;f=d;s=f;l=2684;u=s+112|0;do{a[s>>2]=a[l>>2];s=s+4|0;l=l+4|0}while((s|0)<(u|0));if((t+-1|0)>>>0>2147483646)if(!t){t=1;c=4}else{a[(hr()|0)>>2]=75;t=-1}else{o=e;c=4}if((c|0)==4){c=-2-o|0;c=t>>>0>c>>>0?c:t;a[f+48>>2]=c;e=f+20|0;a[e>>2]=o;a[f+44>>2]=o;t=o+c|0;o=f+16|0;a[o>>2]=t;a[f+28>>2]=t;t=sa(f,n,r)|0;if(c){n=a[e>>2]|0;i[n+(((n|0)==(a[o>>2]|0))<<31>>31)>>0]=0}}h=d;return t|0}function ca(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,s=0;o=h;h=h+112|0;i=o;r=i;s=r+112|0;do{a[r>>2]=0;r=r+4|0}while((r|0)<(s|0));a[i+32>>2]=15;a[i+44>>2]=e;a[i+76>>2]=-1;a[i+84>>2]=e;s=la(i,t,n)|0;h=o;return s|0}function ha(e){e=e|0;var t=0,n=0,r=0,a=0;while(1){t=e+1|0;if(!(cr(i[e>>0]|0)|0))break;else e=t}n=i[e>>0]|0;switch(n<<24>>24|0){case 45:{r=1;a=5;break}case 43:{r=0;a=5;break}default:r=0}if((a|0)==5){e=t;n=i[t>>0]|0}t=(n<<24>>24)+-48|0;if(t>>>0<10){n=e;e=0;do{n=n+1|0;e=(e*10|0)-t|0;t=(i[n>>0]|0)+-48|0}while(t>>>0<10)}else e=0;return((r|0)!=0?e:0-e|0)|0}function fa(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,s=0,l=0,u=0,c=0,f=0,d=0,p=0,g=0,m=0,v=0;v=h;h=h+208|0;p=v+8|0;g=v;r=ne(n,t)|0;d=g;a[d>>2]=1;a[d+4>>2]=0;if(r){l=r-n|0;a[p+4>>2]=n;a[p>>2]=n;o=n;t=n;s=2;while(1){t=t+n+o|0;a[p+(s<<2)>>2]=t;if(t>>>0<r>>>0){d=o;o=t;s=s+1|0;t=d}else break}d=0-n|0;u=e+l|0;f=g+4|0;if((l|0)>0){l=u;r=1;s=1;while(1){do if((r&3|0)==3){Na(e,n,i,s,p);c=a[f>>2]|0;t=c<<30|(a[g>>2]|0)>>>2;a[g>>2]=t;a[f>>2]=c>>>2;s=s+2|0}else{t=s+-1|0;if((a[p+(t<<2)>>2]|0)>>>0<(l-e|0)>>>0)Na(e,n,i,s,p);else Fa(e,n,i,g,s,0,p);if((s|0)==1){t=a[g>>2]|0;a[f>>2]=t>>>31|a[f>>2]<<1;t=t<<1;a[g>>2]=t;s=0;break}if(t>>>0>31){r=a[g>>2]|0;a[f>>2]=r;a[g>>2]=0;t=s+-33|0;o=0}else{r=a[f>>2]|0;o=a[g>>2]|0}a[f>>2]=o>>>(32-t|0)|r<<t;t=o<<t;a[g>>2]=t;s=1}while(0);r=t|1;a[g>>2]=r;t=e+n|0;if(t>>>0>=u>>>0){r=t;break}else e=t}}else{r=e;s=1}Fa(r,n,i,g,s,0,p);c=g+4|0;t=a[g>>2]|0;if(!((s|0)==1&(t|0)==1&(a[c>>2]|0)==0)){o=r;while(1){if((s|0)<2){r=t+-1|0;do if(r){if(!(r&1)){l=r;r=0;do{r=r+1|0;l=l>>>1}while((l&1|0)==0);if(!r)m=24}else m=24;if((m|0)==24){m=0;u=a[f>>2]|0;if(!u){r=64;m=30;break}if(!(u&1)){l=u;r=0}else{e=0;l=u;r=0;break}while(1){e=r+1|0;l=l>>>1;if(l&1){l=e;break}else r=e}if(!l){e=0;l=u;r=0;break}else r=r+33|0}if(r>>>0>31)m=30;else{e=r;l=a[f>>2]|0}}else{r=32;m=30}while(0);if((m|0)==30){m=0;t=a[f>>2]|0;a[g>>2]=t;a[f>>2]=0;e=r+-32|0;l=0}a[g>>2]=l<<32-e|t>>>e;a[f>>2]=l>>>e;o=o+d|0;r=r+s|0}else{e=t>>>30;u=e|a[f>>2]<<2;r=s+-2|0;a[g>>2]=(t<<1&2147483646|e<<31)^3;a[f>>2]=u>>>1;Fa(o+(0-((a[p+(r<<2)>>2]|0)+n))|0,n,i,g,s+-1|0,1,p);u=a[g>>2]|0;a[f>>2]=u>>>31|a[f>>2]<<1;a[g>>2]=u<<1|1;o=o+d|0;Fa(o,n,i,g,r,1,p)}t=a[g>>2]|0;if((r|0)==1&(t|0)==1&(a[c>>2]|0)==0)break;else s=r}}}h=v;return}function da(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,s=0,l=0;s=t&255;r=(n|0)!=0;e:do if(r&(e&3|0)!=0){o=t&255;while(1){if((i[e>>0]|0)==o<<24>>24){l=6;break e}e=e+1|0;n=n+-1|0;r=(n|0)!=0;if(!(r&(e&3|0)!=0)){l=5;break}}}else l=5;while(0);if((l|0)==5)if(r)l=6;else n=0;e:do if((l|0)==6){o=t&255;if((i[e>>0]|0)!=o<<24>>24){r=ne(s,16843009)|0;t:do if(n>>>0>3)while(1){s=a[e>>2]^r;if((s&-2139062144^-2139062144)&s+-16843009)break;e=e+4|0;n=n+-4|0;if(n>>>0<=3){l=11;break t}}else l=11;while(0);if((l|0)==11)if(!n){n=0;break}while(1){if((i[e>>0]|0)==o<<24>>24)break e;e=e+1|0;n=n+-1|0;if(!n){n=0;break}}}}while(0);return((n|0)!=0?e:0)|0}function pa(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=t&255;do{if(!n){t=0;break}n=n+-1|0;t=e+n|0}while((i[t>>0]|0)!=r<<24>>24);return t|0}function ga(e,t){e=e|0;t=t|0;var n=0,r=0;n=t;e:do if(!((n^e)&3)){if(n&3)do{n=i[t>>0]|0;i[e>>0]=n;if(!(n<<24>>24))break e;t=t+1|0;e=e+1|0}while((t&3|0)!=0);n=a[t>>2]|0;if(!((n&-2139062144^-2139062144)&n+-16843009)){r=e;while(1){t=t+4|0;e=r+4|0;a[r>>2]=n;n=a[t>>2]|0;if((n&-2139062144^-2139062144)&n+-16843009)break;else r=e}}r=8}else r=8;while(0);if((r|0)==8){r=i[t>>0]|0;i[e>>0]=r;if(r<<24>>24)do{t=t+1|0;e=e+1|0;r=i[t>>0]|0;i[e>>0]=r}while(r<<24>>24!=0)}return e|0}function ma(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,s=0;o=t;do if(!((o^e)&3)){r=(n|0)!=0;e:do if(r&(o&3|0)!=0)while(1){o=i[t>>0]|0;i[e>>0]=o;if(!(o<<24>>24))break e;n=n+-1|0;t=t+1|0;e=e+1|0;r=(n|0)!=0;if(!(r&(t&3|0)!=0)){s=5;break}}else s=5;while(0);if((s|0)==5)if(!r){n=0;break}if(i[t>>0]|0){e:do if(n>>>0>3)do{r=a[t>>2]|0;if((r&-2139062144^-2139062144)&r+-16843009)break e;a[e>>2]=r;n=n+-4|0;t=t+4|0;e=e+4|0}while(n>>>0>3);while(0);s=11}}else s=11;while(0);e:do if((s|0)==11)if(!n)n=0;else while(1){s=i[t>>0]|0;i[e>>0]=s;if(!(s<<24>>24))break e;n=n+-1|0;e=e+1|0;if(!n){n=0;break}else t=t+1|0}while(0);Xu(e|0,0,n|0)|0;return e|0}function va(e,t){e=e|0;t=t|0;e=_a(e,t)|0;return((i[e>>0]|0)==(t&255)<<24>>24?e:0)|0}function _a(e,t){e=e|0;t=t|0;var n=0,r=0,o=0;r=t&255;e:do if(!r)e=e+(xa(e)|0)|0;else{if(e&3){n=t&255;do{o=i[e>>0]|0;if(o<<24>>24==0?1:o<<24>>24==n<<24>>24)break e;e=e+1|0}while((e&3|0)!=0)}r=ne(r,16843009)|0;n=a[e>>2]|0;t:do if(!((n&-2139062144^-2139062144)&n+-16843009))do{o=n^r;if((o&-2139062144^-2139062144)&o+-16843009)break t;e=e+4|0;n=a[e>>2]|0}while(((n&-2139062144^-2139062144)&n+-16843009|0)==0);while(0);n=t&255;while(1){o=i[e>>0]|0;if(o<<24>>24==0?1:o<<24>>24==n<<24>>24)break;else e=e+1|0}}while(0);return e|0}function ya(e,t){e=e|0;t=t|0;ga(e,t)|0;return e|0}function ba(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,s=0;o=h;h=h+32|0;r=o;n=i[t>>0]|0;if(n<<24>>24!=0?(i[t+1>>0]|0)!=0:0){a[r>>2]=0;a[r+4>>2]=0;a[r+8>>2]=0;a[r+12>>2]=0;a[r+16>>2]=0;a[r+20>>2]=0;a[r+24>>2]=0;a[r+28>>2]=0;do{s=r+(((n&255)>>>5&255)<<2)|0;a[s>>2]=a[s>>2]|1<<(n&31);t=t+1|0;n=i[t>>0]|0}while(n<<24>>24!=0);t=i[e>>0]|0;e:do if(!(t<<24>>24))n=e;else{n=e;do{if(a[r+(((t&255)>>>5&255)<<2)>>2]&1<<(t&31))break e;n=n+1|0;t=i[n>>0]|0}while(t<<24>>24!=0)}while(0);n=n-e|0}else n=(_a(e,n<<24>>24)|0)-e|0;h=o;return n|0}function wa(e){e=e|0;var t=0,n=0;n=(xa(e)|0)+1|0;t=Ba(n)|0;if(!t)t=0;else Qu(t|0,e|0,n|0)|0;return t|0}function xa(e){e=e|0;var t=0,n=0,r=0;r=e;e:do if(!(r&3))n=4;else{t=e;e=r;while(1){if(!(i[t>>0]|0))break e;t=t+1|0;e=t;if(!(e&3)){e=t;n=4;break}}}while(0);if((n|0)==4){while(1){t=a[e>>2]|0;if(!((t&-2139062144^-2139062144)&t+-16843009))e=e+4|0;else break}if((t&255)<<24>>24)do e=e+1|0;while((i[e>>0]|0)!=0)}return e-r|0}function Ea(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,a=0,o=0;r=e+(xa(e)|0)|0;e:do if(n)while(1){a=i[t>>0]|0;if(!(a<<24>>24))break e;n=n+-1|0;o=r+1|0;i[r>>0]=a;if(!n){r=o;break}else{t=t+1|0;r=o}}while(0);i[r>>0]=0;return e|0}function ka(e,t,n){e=e|0;t=t|0;n=n|0;ma(e,t,n)|0;return e|0}function Ma(e,t){e=e|0;t=t|0;return pa(e,t,(xa(e)|0)+1|0)|0}function Ta(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,s=0;s=h;h=h+32|0;o=s;a[o>>2]=0;a[o+4>>2]=0;a[o+8>>2]=0;a[o+12>>2]=0;a[o+16>>2]=0;a[o+20>>2]=0;a[o+24>>2]=0;a[o+28>>2]=0;r=i[t>>0]|0;do if(!(r<<24>>24))t=0;else{if(!(i[t+1>>0]|0)){t=e;while(1)if((i[t>>0]|0)==r<<24>>24)t=t+1|0;else break;t=t-e|0;break}else{n=t;t=r}do{r=o+(((t&255)>>>5&255)<<2)|0;a[r>>2]=a[r>>2]|1<<(t&31);n=n+1|0;t=i[n>>0]|0}while(t<<24>>24!=0);n=i[e>>0]|0;e:do if(!(n<<24>>24))t=e;else{t=e;do{if(!(a[o+(((n&255)>>>5&255)<<2)>>2]&1<<(n&31)))break e;t=t+1|0;n=i[t>>0]|0}while(n<<24>>24!=0)}while(0);t=t-e|0}while(0);h=s;return t|0}function Sa(e,t){e=e|0;t=t|0;var n=0,r=0;if(!e){e=a[699]|0;if(!e)e=0;else{r=e;n=3}}else{r=e;n=3}do if((n|0)==3){n=Ta(r,t)|0;e=r+n|0;if(!(i[e>>0]|0)){a[699]=0;e=0;break}n=(ba(e,t)|0)+n|0;t=r+n|0;a[699]=t;if(!(i[t>>0]|0)){a[699]=0;break}else{a[699]=r+(n+1);i[t>>0]=0;break}}while(0);return e|0}function Aa(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,s=0,l=0,u=0;l=e+4|0;n=a[l>>2]|0;u=e+100|0;if(n>>>0<(a[u>>2]|0)>>>0){a[l>>2]=n+1;n=o[n>>0]|0}else n=mr(e)|0;switch(n|0){case 43:case 45:{i=(n|0)==45&1;n=a[l>>2]|0;if(n>>>0<(a[u>>2]|0)>>>0){a[l>>2]=n+1;n=o[n>>0]|0}else n=mr(e)|0;if((t|0)!=0&(n+-48|0)>>>0>9?(a[u>>2]|0)!=0:0){a[l>>2]=(a[l>>2]|0)+-1;s=i}else s=i;break}default:s=0}if((n+-48|0)>>>0>9)if(!(a[u>>2]|0)){i=-2147483648;n=0}else{a[l>>2]=(a[l>>2]|0)+-1;i=-2147483648;n=0}else{i=0;do{i=n+-48+(i*10|0)|0;n=a[l>>2]|0;if(n>>>0<(a[u>>2]|0)>>>0){a[l>>2]=n+1;n=o[n>>0]|0}else n=mr(e)|0}while((n+-48|0)>>>0<10&(i|0)<214748364);t=((i|0)<0)<<31>>31;if((n+-48|0)>>>0<10){do{t=nc(i|0,t|0,10,0)|0;i=O;n=qu(n|0,((n|0)<0)<<31>>31|0,-48,-1)|0;i=qu(n|0,O|0,t|0,i|0)|0;t=O;n=a[l>>2]|0;if(n>>>0<(a[u>>2]|0)>>>0){a[l>>2]=n+1;n=o[n>>0]|0}else n=mr(e)|0}while((n+-48|0)>>>0<10&((t|0)<21474836|(t|0)==21474836&i>>>0<2061584302));r=i}else r=i;if((n+-48|0)>>>0<10)do{n=a[l>>2]|0;if(n>>>0<(a[u>>2]|0)>>>0){a[l>>2]=n+1;n=o[n>>0]|0}else n=mr(e)|0}while((n+-48|0)>>>0<10);if(a[u>>2]|0)a[l>>2]=(a[l>>2]|0)+-1;e=(s|0)!=0;n=Wu(0,0,r|0,t|0)|0;i=e?O:t;n=e?n:r}O=i;return n|0}function Ra(e){e=e|0;if(!(a[e+68>>2]|0))Lr(e);return}function Ca(e){e=e|0;if(!(a[e+68>>2]|0))Lr(e);return}function Pa(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,s=0;t=e+20|0;o=e+28|0;if((a[t>>2]|0)>>>0>(a[o>>2]|0)>>>0?(Uc[a[e+36>>2]&15](e,0,0)|0,(a[t>>2]|0)==0):0)t=-1;else{s=e+4|0;n=a[s>>2]|0;i=e+8|0;r=a[i>>2]|0;if(n>>>0<r>>>0)Uc[a[e+40>>2]&15](e,n-r|0,1)|0;a[e+16>>2]=0;a[o>>2]=0;a[t>>2]=0;a[i>>2]=0;a[s>>2]=0;t=0}return t|0}function Oa(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,L=0,N=0,F=0,D=0,I=0,U=0,H=0,z=0,B=0,j=0,V=0,G=0,W=0,X=0,Y=0,q=0,Z=0,Q=0,$=0,J=0,K=0,ee=0,te=0,ie=0,re=0,ae=0,oe=0,se=0;se=h;h=h+624|0;te=se+24|0;re=se+16|0;ie=se+588|0;Q=se+576|0;ee=se;Y=se+536|0;oe=se+8|0;ae=se+528|0;U=(e|0)!=0;H=Y+40|0;X=H;Y=Y+39|0;q=oe+4|0;Z=Q+12|0;Q=Q+11|0;$=ie;J=Z;K=J-$|0;z=-2-$|0;B=J+2|0;j=te+288|0;V=ie+9|0;G=V;W=ie+8|0;u=0;x=t;f=0;t=0;e:while(1){do if((u|0)>-1)if((f|0)>(2147483647-u|0)){a[(hr()|0)>>2]=75;u=-1;break}else{u=f+u|0;break}while(0);f=i[x>>0]|0;if(!(f<<24>>24)){I=245;break}else p=x;t:while(1){switch(f<<24>>24){case 37:{f=p;I=9;break t}case 0:{f=p;break t}default:{}}D=p+1|0;f=i[D>>0]|0;p=D}t:do if((I|0)==9)while(1){I=0;if((i[f+1>>0]|0)!=37)break t;p=p+1|0;f=f+2|0;if((i[f>>0]|0)==37)I=9;else break}while(0);k=p-x|0;if(U?(a[e>>2]&32|0)==0:0)na(x,k,e)|0;if((p|0)!=(x|0)){x=f;f=k;continue}v=f+1|0;p=i[v>>0]|0;g=(p<<24>>24)+-48|0;if(g>>>0<10){D=(i[f+2>>0]|0)==36;v=D?f+3|0:v;p=i[v>>0]|0;b=D?g:-1;t=D?1:t}else b=-1;f=p<<24>>24;t:do if((f&-32|0)==32){g=0;while(1){if(!(1<<f+-32&75913)){_=g;f=v;break t}g=1<<(p<<24>>24)+-32|g;v=v+1|0;p=i[v>>0]|0;f=p<<24>>24;if((f&-32|0)!=32){_=g;f=v;break}}}else{_=0;f=v}while(0);do if(p<<24>>24==42){g=f+1|0;p=(i[g>>0]|0)+-48|0;if(p>>>0<10?(i[f+2>>0]|0)==36:0){a[l+(p<<2)>>2]=10;t=1;f=f+3|0;p=a[s+((i[g>>0]|0)+-48<<3)>>2]|0}else{if(t){u=-1;break e}if(!U){E=_;f=g;t=0;D=0;break}t=(a[n>>2]|0)+(4-1)&~(4-1);p=a[t>>2]|0;a[n>>2]=t+4;t=0;f=g}if((p|0)<0){E=_|8192;D=0-p|0}else{E=_;D=p}}else{g=(p<<24>>24)+-48|0;if(g>>>0<10){p=0;do{p=(p*10|0)+g|0;f=f+1|0;g=(i[f>>0]|0)+-48|0}while(g>>>0<10);if((p|0)<0){u=-1;break e}else{E=_;D=p}}else{E=_;D=0}}while(0);t:do if((i[f>>0]|0)==46){g=f+1|0;p=i[g>>0]|0;if(p<<24>>24!=42){v=(p<<24>>24)+-48|0;if(v>>>0<10){f=g;p=0}else{f=g;v=0;break}while(1){p=(p*10|0)+v|0;f=f+1|0;v=(i[f>>0]|0)+-48|0;if(v>>>0>=10){v=p;break t}}}g=f+2|0;p=(i[g>>0]|0)+-48|0;if(p>>>0<10?(i[f+3>>0]|0)==36:0){a[l+(p<<2)>>2]=10;f=f+4|0;v=a[s+((i[g>>0]|0)+-48<<3)>>2]|0;break}if(t){u=-1;break e}if(U){f=(a[n>>2]|0)+(4-1)&~(4-1);v=a[f>>2]|0;a[n>>2]=f+4;f=g}else{f=g;v=0}}else v=-1;while(0);y=0;while(1){p=(i[f>>0]|0)+-65|0;if(p>>>0>57){u=-1;break e}g=f+1|0;p=i[15953+(y*58|0)+p>>0]|0;_=p&255;if((_+-1|0)>>>0<8){f=g;y=_}else{F=g;break}}if(!(p<<24>>24)){u=-1;break}g=(b|0)>-1;do if(p<<24>>24==19)if(g){u=-1;break e}else I=52;else{if(g){a[l+(b<<2)>>2]=_;L=s+(b<<3)|0;N=a[L+4>>2]|0;I=ee;a[I>>2]=a[L>>2];a[I+4>>2]=N;I=52;break}if(!U){u=0;break e}Ua(ee,_,n)}while(0);if((I|0)==52?(I=0,!U):0){x=F;f=k;continue}b=i[f>>0]|0;b=(y|0)!=0&(b&15|0)==3?b&-33:b;g=E&-65537;N=(E&8192|0)==0?E:g;t:do switch(b|0){case 110:switch(y|0){case 0:{a[a[ee>>2]>>2]=u;x=F;f=k;continue e}case 1:{a[a[ee>>2]>>2]=u;x=F;f=k;continue e}case 2:{x=a[ee>>2]|0;a[x>>2]=u;a[x+4>>2]=((u|0)<0)<<31>>31;x=F;f=k;continue e}case 3:{r[a[ee>>2]>>1]=u;x=F;f=k;continue e}case 4:{i[a[ee>>2]>>0]=u;x=F;f=k;continue e}case 6:{a[a[ee>>2]>>2]=u;x=F;f=k;continue e}case 7:{x=a[ee>>2]|0;a[x>>2]=u;a[x+4>>2]=((u|0)<0)<<31>>31;x=F;f=k;continue e}default:{x=F;f=k;continue e}}case 112:{y=N|8;v=v>>>0>8?v:8;b=120;I=64;break}case 88:case 120:{y=N;I=64;break}case 111:{g=ee;p=a[g>>2]|0;g=a[g+4>>2]|0;if((p|0)==0&(g|0)==0)f=H;else{f=H;do{f=f+-1|0;i[f>>0]=p&7|48;p=Zu(p|0,g|0,3)|0;g=O}while(!((p|0)==0&(g|0)==0))}if(!(N&8)){p=N;y=0;_=16433;I=77}else{y=X-f+1|0;p=N;v=(v|0)<(y|0)?y:v;y=0;_=16433;I=77}break}case 105:case 100:{p=ee;
f=a[p>>2]|0;p=a[p+4>>2]|0;if((p|0)<0){f=Wu(0,0,f|0,p|0)|0;p=O;g=ee;a[g>>2]=f;a[g+4>>2]=p;g=1;_=16433;I=76;break t}if(!(N&2048)){_=N&1;g=_;_=(_|0)==0?16433:16435;I=76}else{g=1;_=16434;I=76}break}case 117:{p=ee;f=a[p>>2]|0;p=a[p+4>>2]|0;g=0;_=16433;I=76;break}case 99:{i[Y>>0]=a[ee>>2];x=Y;p=1;y=0;b=16433;f=H;break}case 109:{f=fr(a[(hr()|0)>>2]|0)|0;I=82;break}case 115:{f=a[ee>>2]|0;f=(f|0)!=0?f:16443;I=82;break}case 67:{a[oe>>2]=a[ee>>2];a[q>>2]=0;a[ee>>2]=oe;v=-1;I=86;break}case 83:{if(!v){za(e,32,D,0,N);f=0;I=98}else I=86;break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{m=+c[ee>>3];a[re>>2]=0;c[d>>3]=m;if((a[d+4>>2]|0)>=0)if(!(N&2048)){L=N&1;P=L;L=(L|0)==0?16451:16456}else{P=1;L=16453}else{m=-m;P=1;L=16450}c[d>>3]=m;C=a[d+4>>2]&2146435072;do if(C>>>0<2146435072|(C|0)==2146435072&0<0){w=+Er(m,re)*2;p=w!=0;if(p)a[re>>2]=(a[re>>2]|0)+-1;A=b|32;if((A|0)==97){x=b&32;k=(x|0)==0?L:L+9|0;E=P|2;f=12-v|0;do if(!(v>>>0>11|(f|0)==0)){m=8;do{f=f+-1|0;m=m*16}while((f|0)!=0);if((i[k>>0]|0)==45){m=-(m+(-w-m));break}else{m=w+m-m;break}}else m=w;while(0);p=a[re>>2]|0;f=(p|0)<0?0-p|0:p;f=Ha(f,((f|0)<0)<<31>>31,Z)|0;if((f|0)==(Z|0)){i[Q>>0]=48;f=Q}i[f+-1>>0]=(p>>31&2)+43;y=f+-2|0;i[y>>0]=b+15;_=(v|0)<1;g=(N&8|0)==0;p=ie;while(1){L=~~m;f=p+1|0;i[p>>0]=o[16417+L>>0]|x;m=(m-+(L|0))*16;do if((f-$|0)==1){if(g&(_&m==0))break;i[f>>0]=46;f=p+2|0}while(0);if(!(m!=0))break;else p=f}v=(v|0)!=0&(z+f|0)<(v|0)?B+v-y|0:K-y+f|0;g=v+E|0;za(e,32,D,g,N);if(!(a[e>>2]&32))na(k,E,e)|0;za(e,48,D,g,N^65536);f=f-$|0;if(!(a[e>>2]&32))na(ie,f,e)|0;p=J-y|0;za(e,48,v-(f+p)|0,0,0);if(!(a[e>>2]&32))na(y,p,e)|0;za(e,32,D,g,N^8192);f=(g|0)<(D|0)?D:g;break}f=(v|0)<0?6:v;if(p){p=(a[re>>2]|0)+-28|0;a[re>>2]=p;m=w*268435456}else{m=w;p=a[re>>2]|0}C=(p|0)<0?te:j;R=C;p=C;do{S=~~m>>>0;a[p>>2]=S;p=p+4|0;m=(m-+(S>>>0))*1e9}while(m!=0);g=p;p=a[re>>2]|0;if((p|0)>0){_=C;while(1){y=(p|0)>29?29:p;v=g+-4|0;do if(v>>>0<_>>>0)v=_;else{p=0;do{S=Yu(a[v>>2]|0,0,y|0)|0;S=qu(S|0,O|0,p|0,0)|0;p=O;T=rc(S|0,p|0,1e9,0)|0;a[v>>2]=T;p=ic(S|0,p|0,1e9,0)|0;v=v+-4|0}while(v>>>0>=_>>>0);if(!p){v=_;break}v=_+-4|0;a[v>>2]=p}while(0);while(1){if(g>>>0<=v>>>0)break;p=g+-4|0;if(!(a[p>>2]|0))g=p;else break}p=(a[re>>2]|0)-y|0;a[re>>2]=p;if((p|0)>0)_=v;else break}}else v=C;if((p|0)<0){k=((f+25|0)/9|0)+1|0;M=(A|0)==102;x=v;while(1){E=0-p|0;E=(E|0)>9?9:E;do if(x>>>0<g>>>0){p=(1<<E)+-1|0;_=1e9>>>E;v=0;y=x;do{S=a[y>>2]|0;a[y>>2]=(S>>>E)+v;v=ne(S&p,_)|0;y=y+4|0}while(y>>>0<g>>>0);p=(a[x>>2]|0)==0?x+4|0:x;if(!v){v=p;break}a[g>>2]=v;v=p;g=g+4|0}else v=(a[x>>2]|0)==0?x+4|0:x;while(0);p=M?C:v;g=(g-p>>2|0)>(k|0)?p+(k<<2)|0:g;p=(a[re>>2]|0)+E|0;a[re>>2]=p;if((p|0)>=0){x=v;break}else x=v}}else x=v;do if(x>>>0<g>>>0){p=(R-x>>2)*9|0;_=a[x>>2]|0;if(_>>>0<10)break;else v=10;do{v=v*10|0;p=p+1|0}while(_>>>0>=v>>>0)}else p=0;while(0);T=(A|0)==103;S=(f|0)!=0;v=f-((A|0)!=102?p:0)+((S&T)<<31>>31)|0;if((v|0)<(((g-R>>2)*9|0)+-9|0)){y=v+9216|0;M=(y|0)/9|0;v=C+(M+-1023<<2)|0;y=((y|0)%9|0)+1|0;if((y|0)<9){_=10;do{_=_*10|0;y=y+1|0}while((y|0)!=9)}else _=10;E=a[v>>2]|0;k=(E>>>0)%(_>>>0)|0;if((k|0)==0?(C+(M+-1022<<2)|0)==(g|0):0)_=x;else I=163;do if((I|0)==163){I=0;w=(((E>>>0)/(_>>>0)|0)&1|0)==0?9007199254740992:9007199254740994;y=(_|0)/2|0;do if(k>>>0<y>>>0)m=.5;else{if((k|0)==(y|0)?(C+(M+-1022<<2)|0)==(g|0):0){m=1;break}m=1.5}while(0);do if(P){if((i[L>>0]|0)!=45)break;w=-w;m=-m}while(0);y=E-k|0;a[v>>2]=y;if(!(w+m!=w)){_=x;break}A=y+_|0;a[v>>2]=A;if(A>>>0>999999999){p=x;while(1){_=v+-4|0;a[v>>2]=0;if(_>>>0<p>>>0){p=p+-4|0;a[p>>2]=0}A=(a[_>>2]|0)+1|0;a[_>>2]=A;if(A>>>0>999999999)v=_;else{x=p;v=_;break}}}p=(R-x>>2)*9|0;y=a[x>>2]|0;if(y>>>0<10){_=x;break}else _=10;do{_=_*10|0;p=p+1|0}while(y>>>0>=_>>>0);_=x}while(0);A=v+4|0;x=_;g=g>>>0>A>>>0?A:g}k=0-p|0;while(1){if(g>>>0<=x>>>0){M=0;A=g;break}v=g+-4|0;if(!(a[v>>2]|0))g=v;else{M=1;A=g;break}}do if(T){f=(S&1^1)+f|0;if((f|0)>(p|0)&(p|0)>-5){b=b+-1|0;f=f+-1-p|0}else{b=b+-2|0;f=f+-1|0}g=N&8;if(g)break;do if(M){g=a[A+-4>>2]|0;if(!g){v=9;break}if(!((g>>>0)%10|0)){_=10;v=0}else{v=0;break}do{_=_*10|0;v=v+1|0}while(((g>>>0)%(_>>>0)|0|0)==0)}else v=9;while(0);g=((A-R>>2)*9|0)+-9|0;if((b|32|0)==102){g=g-v|0;g=(g|0)<0?0:g;f=(f|0)<(g|0)?f:g;g=0;break}else{g=g+p-v|0;g=(g|0)<0?0:g;f=(f|0)<(g|0)?f:g;g=0;break}}else g=N&8;while(0);E=f|g;_=(E|0)!=0&1;y=(b|32|0)==102;if(y){p=(p|0)>0?p:0;b=0}else{v=(p|0)<0?k:p;v=Ha(v,((v|0)<0)<<31>>31,Z)|0;if((J-v|0)<2)do{v=v+-1|0;i[v>>0]=48}while((J-v|0)<2);i[v+-1>>0]=(p>>31&2)+43;R=v+-2|0;i[R>>0]=b;p=J-R|0;b=R}k=P+1+f+_+p|0;za(e,32,D,k,N);if(!(a[e>>2]&32))na(L,P,e)|0;za(e,48,D,k,N^65536);do if(y){v=x>>>0>C>>>0?C:x;p=v;do{g=Ha(a[p>>2]|0,0,V)|0;do if((p|0)==(v|0)){if((g|0)!=(V|0))break;i[W>>0]=48;g=W}else{if(g>>>0<=ie>>>0)break;do{g=g+-1|0;i[g>>0]=48}while(g>>>0>ie>>>0)}while(0);if(!(a[e>>2]&32))na(g,G-g|0,e)|0;p=p+4|0}while(p>>>0<=C>>>0);do if(E){if(a[e>>2]&32)break;na(16485,1,e)|0}while(0);if((f|0)>0&p>>>0<A>>>0){g=p;while(1){p=Ha(a[g>>2]|0,0,V)|0;if(p>>>0>ie>>>0)do{p=p+-1|0;i[p>>0]=48}while(p>>>0>ie>>>0);if(!(a[e>>2]&32))na(p,(f|0)>9?9:f,e)|0;g=g+4|0;p=f+-9|0;if(!((f|0)>9&g>>>0<A>>>0)){f=p;break}else f=p}}za(e,48,f+9|0,9,0)}else{y=M?A:x+4|0;if((f|0)>-1){_=(g|0)==0;v=x;do{p=Ha(a[v>>2]|0,0,V)|0;if((p|0)==(V|0)){i[W>>0]=48;p=W}do if((v|0)==(x|0)){g=p+1|0;if(!(a[e>>2]&32))na(p,1,e)|0;if(_&(f|0)<1){p=g;break}if(a[e>>2]&32){p=g;break}na(16485,1,e)|0;p=g}else{if(p>>>0<=ie>>>0)break;do{p=p+-1|0;i[p>>0]=48}while(p>>>0>ie>>>0)}while(0);g=G-p|0;if(!(a[e>>2]&32))na(p,(f|0)>(g|0)?g:f,e)|0;f=f-g|0;v=v+4|0}while(v>>>0<y>>>0&(f|0)>-1)}za(e,48,f+18|0,18,0);if(a[e>>2]&32)break;na(b,J-b|0,e)|0}while(0);za(e,32,D,k,N^8192);f=(k|0)<(D|0)?D:k}else{y=(b&32|0)!=0;_=m!=m|0!=0;p=_?0:P;v=p+3|0;za(e,32,D,v,g);f=a[e>>2]|0;if(!(f&32)){na(L,p,e)|0;f=a[e>>2]|0}if(!(f&32))na(_?y?16477:16481:y?16469:16473,3,e)|0;za(e,32,D,v,N^8192);f=(v|0)<(D|0)?D:v}while(0);x=F;continue e}default:{g=N;p=v;y=0;b=16433;f=H}}while(0);t:do if((I|0)==64){g=ee;p=a[g>>2]|0;g=a[g+4>>2]|0;_=b&32;if(!((p|0)==0&(g|0)==0)){f=H;do{f=f+-1|0;i[f>>0]=o[16417+(p&15)>>0]|_;p=Zu(p|0,g|0,4)|0;g=O}while(!((p|0)==0&(g|0)==0));I=ee;if((y&8|0)==0|(a[I>>2]|0)==0&(a[I+4>>2]|0)==0){p=y;y=0;_=16433;I=77}else{p=y;y=2;_=16433+(b>>4)|0;I=77}}else{f=H;p=y;y=0;_=16433;I=77}}else if((I|0)==76){f=Ha(f,p,H)|0;p=N;y=g;I=77}else if((I|0)==82){I=0;N=da(f,0,v)|0;L=(N|0)==0;x=f;p=L?v:N-f|0;y=0;b=16433;f=L?f+v|0:N}else if((I|0)==86){I=0;p=0;f=0;_=a[ee>>2]|0;while(1){g=a[_>>2]|0;if(!g)break;f=Rr(ae,g)|0;if((f|0)<0|f>>>0>(v-p|0)>>>0)break;p=f+p|0;if(v>>>0>p>>>0)_=_+4|0;else break}if((f|0)<0){u=-1;break e}za(e,32,D,p,N);if(!p){f=0;I=98}else{g=0;v=a[ee>>2]|0;while(1){f=a[v>>2]|0;if(!f){f=p;I=98;break t}f=Rr(ae,f)|0;g=f+g|0;if((g|0)>(p|0)){f=p;I=98;break t}if(!(a[e>>2]&32))na(ae,f,e)|0;if(g>>>0>=p>>>0){f=p;I=98;break}else v=v+4|0}}}while(0);if((I|0)==98){I=0;za(e,32,D,f,N^8192);x=F;f=(D|0)>(f|0)?D:f;continue}if((I|0)==77){I=0;g=(v|0)>-1?p&-65537:p;p=ee;p=(a[p>>2]|0)!=0|(a[p+4>>2]|0)!=0;if((v|0)!=0|p){p=(p&1^1)+(X-f)|0;x=f;p=(v|0)>(p|0)?v:p;b=_;f=H}else{x=H;p=0;b=_;f=H}}_=f-x|0;p=(p|0)<(_|0)?_:p;v=y+p|0;f=(D|0)<(v|0)?v:D;za(e,32,f,v,g);if(!(a[e>>2]&32))na(b,y,e)|0;za(e,48,f,v,g^65536);za(e,48,p,_,0);if(!(a[e>>2]&32))na(x,_,e)|0;za(e,32,f,v,g^8192);x=F}e:do if((I|0)==245)if(!e)if(t){u=1;while(1){t=a[l+(u<<2)>>2]|0;if(!t)break;Ua(s+(u<<3)|0,t,n);u=u+1|0;if((u|0)>=10){u=1;break e}}if((u|0)<10)while(1){if(a[l+(u<<2)>>2]|0){u=-1;break e}u=u+1|0;if((u|0)>=10){u=1;break}}else u=1}else u=0;while(0);h=se;return u|0}function La(e,t,n){e=e|0;t=t|0;n=n|0;return Hr(e,t,n)|0}function Na(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,s=0,l=0,u=0,c=0,f=0,d=0,p=0,g=0;g=h;h=h+240|0;p=g;a[p>>2]=e;e:do if((i|0)>1){d=0-t|0;o=i;s=e;u=e;c=1;while(1){e=s+d|0;f=o+-2|0;l=s+(0-((a[r+(f<<2)>>2]|0)+t))|0;if((Jc[n&15](u,l)|0)>-1?(Jc[n&15](u,e)|0)>-1:0){i=c;break e}i=c+1|0;s=p+(c<<2)|0;if((Jc[n&15](l,e)|0)>-1){a[s>>2]=l;e=l;o=o+-1|0}else{a[s>>2]=e;o=f}if((o|0)<=1)break e;s=e;u=a[p>>2]|0;c=i}}else i=1;while(0);Da(t,p,i);h=g;return}function Fa(e,t,n,i,r,o,s){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;s=s|0;var l=0,u=0,c=0,f=0,d=0,p=0,g=0,m=0,v=0;v=h;h=h+240|0;g=v;u=a[i>>2]|0;i=a[i+4>>2]|0;a[g>>2]=e;p=0-t|0;e:do if((i|0)!=0|(u|0)!=1?(l=e+(0-(a[s+(r<<2)>>2]|0))|0,(Jc[n&15](l,e)|0)>=1):0){o=(o|0)==0;d=l;c=u;f=i;l=1;while(1){if(o&(r|0)>1){i=a[s+(r+-2<<2)>>2]|0;if((Jc[n&15](e+p|0,d)|0)>-1){o=r;i=l;m=20;break e}if((Jc[n&15](e+(0-(i+t))|0,d)|0)>-1){o=r;i=l;m=20;break e}}i=l+1|0;a[g+(l<<2)>>2]=d;o=c+-1|0;do if(o){if(!(o&1)){e=o;o=0;do{o=o+1|0;e=e>>>1}while((e&1|0)==0);if(!o)m=11}else m=11;if((m|0)==11){m=0;if(!f){o=64;m=16;break}if(!(f&1)){e=f;o=0}else{u=0;e=c;l=f;o=0;break}while(1){l=o+1|0;e=e>>>1;if(e&1){e=l;break}else o=l}if(!e){u=0;e=c;l=f;o=0;break}else o=o+33|0}if(o>>>0>31)m=16;else{u=o;e=c;l=f}}else{o=32;m=16}while(0);if((m|0)==16){m=0;u=o+-32|0;e=f;l=0}c=l<<32-u|e>>>u;f=l>>>u;o=o+r|0;if(!((f|0)!=0|(c|0)!=1)){e=d;m=20;break e}e=d+(0-(a[s+(o<<2)>>2]|0))|0;if((Jc[n&15](e,a[g>>2]|0)|0)<1){e=d;r=o;o=0;m=19;break}else{u=d;r=o;o=1;d=e;l=i;e=u}}}else{i=1;m=19}while(0);if((m|0)==19?(o|0)==0:0){o=r;m=20}if((m|0)==20){Da(t,g,i);Na(e,t,n,o,s)}h=v;return}function Da(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,s=0,l=0;s=h;h=h+256|0;i=s;e:do if((n|0)>=2?(o=t+(n<<2)|0,a[o>>2]=i,(e|0)!=0):0)while(1){r=e>>>0>256?256:e;Qu(i|0,a[t>>2]|0,r|0)|0;i=0;do{l=t+(i<<2)|0;i=i+1|0;Qu(a[l>>2]|0,a[t+(i<<2)>>2]|0,r|0)|0;a[l>>2]=(a[l>>2]|0)+r}while((i|0)!=(n|0));if((e|0)==(r|0))break e;e=e-r|0;i=a[o>>2]|0}while(0);h=s;return}function Ia(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;i=e+20|0;r=a[i>>2]|0;e=(a[e+16>>2]|0)-r|0;e=e>>>0>n>>>0?n:e;Qu(r|0,t|0,e|0)|0;a[i>>2]=(a[i>>2]|0)+e;return n|0}function Ua(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0;e:do if(t>>>0<=20)do switch(t|0){case 9:{i=(a[n>>2]|0)+(4-1)&~(4-1);t=a[i>>2]|0;a[n>>2]=i+4;a[e>>2]=t;break e}case 10:{i=(a[n>>2]|0)+(4-1)&~(4-1);t=a[i>>2]|0;a[n>>2]=i+4;i=e;a[i>>2]=t;a[i+4>>2]=((t|0)<0)<<31>>31;break e}case 11:{i=(a[n>>2]|0)+(4-1)&~(4-1);t=a[i>>2]|0;a[n>>2]=i+4;i=e;a[i>>2]=t;a[i+4>>2]=0;break e}case 12:{i=(a[n>>2]|0)+(8-1)&~(8-1);t=i;r=a[t>>2]|0;t=a[t+4>>2]|0;a[n>>2]=i+8;i=e;a[i>>2]=r;a[i+4>>2]=t;break e}case 13:{r=(a[n>>2]|0)+(4-1)&~(4-1);i=a[r>>2]|0;a[n>>2]=r+4;i=(i&65535)<<16>>16;r=e;a[r>>2]=i;a[r+4>>2]=((i|0)<0)<<31>>31;break e}case 14:{r=(a[n>>2]|0)+(4-1)&~(4-1);i=a[r>>2]|0;a[n>>2]=r+4;r=e;a[r>>2]=i&65535;a[r+4>>2]=0;break e}case 15:{r=(a[n>>2]|0)+(4-1)&~(4-1);i=a[r>>2]|0;a[n>>2]=r+4;i=(i&255)<<24>>24;r=e;a[r>>2]=i;a[r+4>>2]=((i|0)<0)<<31>>31;break e}case 16:{r=(a[n>>2]|0)+(4-1)&~(4-1);i=a[r>>2]|0;a[n>>2]=r+4;r=e;a[r>>2]=i&255;a[r+4>>2]=0;break e}case 17:{r=(a[n>>2]|0)+(8-1)&~(8-1);o=+c[r>>3];a[n>>2]=r+8;c[e>>3]=o;break e}case 18:{r=(a[n>>2]|0)+(8-1)&~(8-1);o=+c[r>>3];a[n>>2]=r+8;c[e>>3]=o;break e}default:break e}while(0);while(0);return}function Ha(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;if(t>>>0>0|(t|0)==0&e>>>0>4294967295)while(1){r=rc(e|0,t|0,10,0)|0;n=n+-1|0;i[n>>0]=r|48;r=ic(e|0,t|0,10,0)|0;if(t>>>0>9|(t|0)==9&e>>>0>4294967295){e=r;t=O}else{e=r;break}}if(e)while(1){n=n+-1|0;i[n>>0]=(e>>>0)%10|0|48;if(e>>>0<10)break;else e=(e>>>0)/10|0}return n|0}function za(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,s=0,l=0;l=h;h=h+256|0;s=l;do if((n|0)>(i|0)&(r&73728|0)==0){r=n-i|0;Xu(s|0,t|0,(r>>>0>256?256:r)|0)|0;t=a[e>>2]|0;o=(t&32|0)==0;if(r>>>0>255){i=n-i|0;do{if(o){na(s,256,e)|0;t=a[e>>2]|0}r=r+-256|0;o=(t&32|0)==0}while(r>>>0>255);if(o)r=i&255;else break}else if(!o)break;na(s,r,e)|0}while(0);h=l;return}function Ba(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,s=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,O=0,L=0,N=0,F=0,D=0,I=0,U=0;do if(e>>>0<245){p=e>>>0<11?16:e+11&-8;e=p>>>3;l=a[756]|0;n=l>>>e;if(n&3){e=(n&1^1)+e|0;i=e<<1;n=3064+(i<<2)|0;i=3064+(i+2<<2)|0;r=a[i>>2]|0;o=r+8|0;s=a[o>>2]|0;do if((n|0)!=(s|0)){if(s>>>0<(a[760]|0)>>>0)Oe();t=s+12|0;if((a[t>>2]|0)==(r|0)){a[t>>2]=n;a[i>>2]=s;break}else Oe()}else a[756]=l&~(1<<e);while(0);U=e<<3;a[r+4>>2]=U|3;U=r+(U|4)|0;a[U>>2]=a[U>>2]|1;U=o;return U|0}s=a[758]|0;if(p>>>0>s>>>0){if(n){i=2<<e;i=n<<e&(i|0-i);i=(i&0-i)+-1|0;u=i>>>12&16;i=i>>>u;r=i>>>5&8;i=i>>>r;o=i>>>2&4;i=i>>>o;n=i>>>1&2;i=i>>>n;e=i>>>1&1;e=(r|u|o|n|e)+(i>>>e)|0;i=e<<1;n=3064+(i<<2)|0;i=3064+(i+2<<2)|0;o=a[i>>2]|0;u=o+8|0;r=a[u>>2]|0;do if((n|0)!=(r|0)){if(r>>>0<(a[760]|0)>>>0)Oe();t=r+12|0;if((a[t>>2]|0)==(o|0)){a[t>>2]=n;a[i>>2]=r;c=a[758]|0;break}else Oe()}else{a[756]=l&~(1<<e);c=s}while(0);U=e<<3;s=U-p|0;a[o+4>>2]=p|3;l=o+p|0;a[o+(p|4)>>2]=s|1;a[o+U>>2]=s;if(c){r=a[761]|0;n=c>>>3;t=n<<1;i=3064+(t<<2)|0;e=a[756]|0;n=1<<n;if(e&n){e=3064+(t+2<<2)|0;t=a[e>>2]|0;if(t>>>0<(a[760]|0)>>>0)Oe();else{h=e;f=t}}else{a[756]=e|n;h=3064+(t+2<<2)|0;f=i}a[h>>2]=r;a[f+12>>2]=r;a[r+8>>2]=f;a[r+12>>2]=i}a[758]=s;a[761]=l;U=u;return U|0}e=a[757]|0;if(e){n=(e&0-e)+-1|0;I=n>>>12&16;n=n>>>I;D=n>>>5&8;n=n>>>D;U=n>>>2&4;n=n>>>U;e=n>>>1&2;n=n>>>e;i=n>>>1&1;i=a[3328+((D|I|U|e|i)+(n>>>i)<<2)>>2]|0;n=(a[i+4>>2]&-8)-p|0;e=i;while(1){t=a[e+16>>2]|0;if(!t){t=a[e+20>>2]|0;if(!t){u=n;break}}e=(a[t+4>>2]&-8)-p|0;U=e>>>0<n>>>0;n=U?e:n;e=t;i=U?t:i}o=a[760]|0;if(i>>>0<o>>>0)Oe();l=i+p|0;if(i>>>0>=l>>>0)Oe();s=a[i+24>>2]|0;n=a[i+12>>2]|0;do if((n|0)==(i|0)){e=i+20|0;t=a[e>>2]|0;if(!t){e=i+16|0;t=a[e>>2]|0;if(!t){d=0;break}}while(1){n=t+20|0;r=a[n>>2]|0;if(r){t=r;e=n;continue}n=t+16|0;r=a[n>>2]|0;if(!r)break;else{t=r;e=n}}if(e>>>0<o>>>0)Oe();else{a[e>>2]=0;d=t;break}}else{r=a[i+8>>2]|0;if(r>>>0<o>>>0)Oe();t=r+12|0;if((a[t>>2]|0)!=(i|0))Oe();e=n+8|0;if((a[e>>2]|0)==(i|0)){a[t>>2]=n;a[e>>2]=r;d=n;break}else Oe()}while(0);do if(s){t=a[i+28>>2]|0;e=3328+(t<<2)|0;if((i|0)==(a[e>>2]|0)){a[e>>2]=d;if(!d){a[757]=a[757]&~(1<<t);break}}else{if(s>>>0<(a[760]|0)>>>0)Oe();t=s+16|0;if((a[t>>2]|0)==(i|0))a[t>>2]=d;else a[s+20>>2]=d;if(!d)break}e=a[760]|0;if(d>>>0<e>>>0)Oe();a[d+24>>2]=s;t=a[i+16>>2]|0;do if(t)if(t>>>0<e>>>0)Oe();else{a[d+16>>2]=t;a[t+24>>2]=d;break}while(0);t=a[i+20>>2]|0;if(t)if(t>>>0<(a[760]|0)>>>0)Oe();else{a[d+20>>2]=t;a[t+24>>2]=d;break}}while(0);if(u>>>0<16){U=u+p|0;a[i+4>>2]=U|3;U=i+(U+4)|0;a[U>>2]=a[U>>2]|1}else{a[i+4>>2]=p|3;a[i+(p|4)>>2]=u|1;a[i+(u+p)>>2]=u;t=a[758]|0;if(t){o=a[761]|0;n=t>>>3;t=n<<1;r=3064+(t<<2)|0;e=a[756]|0;n=1<<n;if(e&n){t=3064+(t+2<<2)|0;e=a[t>>2]|0;if(e>>>0<(a[760]|0)>>>0)Oe();else{g=t;m=e}}else{a[756]=e|n;g=3064+(t+2<<2)|0;m=r}a[g>>2]=o;a[m+12>>2]=o;a[o+8>>2]=m;a[o+12>>2]=r}a[758]=u;a[761]=l}U=i+8|0;return U|0}else m=p}else m=p}else if(e>>>0<=4294967231){e=e+11|0;f=e&-8;h=a[757]|0;if(h){n=0-f|0;e=e>>>8;if(e)if(f>>>0>16777215)c=31;else{m=(e+1048320|0)>>>16&8;w=e<<m;g=(w+520192|0)>>>16&4;w=w<<g;c=(w+245760|0)>>>16&2;c=14-(g|m|c)+(w<<c>>>15)|0;c=f>>>(c+7|0)&1|c<<1}else c=0;e=a[3328+(c<<2)>>2]|0;e:do if(!e){r=0;e=0;w=86}else{s=n;r=0;l=f<<((c|0)==31?0:25-(c>>>1)|0);u=e;e=0;while(1){o=a[u+4>>2]&-8;n=o-f|0;if(n>>>0<s>>>0)if((o|0)==(f|0)){o=u;e=u;w=90;break e}else e=u;else n=s;w=a[u+20>>2]|0;u=a[u+16+(l>>>31<<2)>>2]|0;r=(w|0)==0|(w|0)==(u|0)?r:w;if(!u){w=86;break}else{s=n;l=l<<1}}}while(0);if((w|0)==86){if((r|0)==0&(e|0)==0){e=2<<c;e=h&(e|0-e);if(!e){m=f;break}e=(e&0-e)+-1|0;d=e>>>12&16;e=e>>>d;h=e>>>5&8;e=e>>>h;g=e>>>2&4;e=e>>>g;m=e>>>1&2;e=e>>>m;r=e>>>1&1;r=a[3328+((h|d|g|m|r)+(e>>>r)<<2)>>2]|0;e=0}if(!r){l=n;u=e}else{o=r;w=90}}if((w|0)==90)while(1){w=0;m=(a[o+4>>2]&-8)-f|0;r=m>>>0<n>>>0;n=r?m:n;e=r?o:e;r=a[o+16>>2]|0;if(r){o=r;w=90;continue}o=a[o+20>>2]|0;if(!o){l=n;u=e;break}else w=90}if((u|0)!=0?l>>>0<((a[758]|0)-f|0)>>>0:0){r=a[760]|0;if(u>>>0<r>>>0)Oe();s=u+f|0;if(u>>>0>=s>>>0)Oe();o=a[u+24>>2]|0;n=a[u+12>>2]|0;do if((n|0)==(u|0)){e=u+20|0;t=a[e>>2]|0;if(!t){e=u+16|0;t=a[e>>2]|0;if(!t){p=0;break}}while(1){n=t+20|0;i=a[n>>2]|0;if(i){t=i;e=n;continue}n=t+16|0;i=a[n>>2]|0;if(!i)break;else{t=i;e=n}}if(e>>>0<r>>>0)Oe();else{a[e>>2]=0;p=t;break}}else{i=a[u+8>>2]|0;if(i>>>0<r>>>0)Oe();t=i+12|0;if((a[t>>2]|0)!=(u|0))Oe();e=n+8|0;if((a[e>>2]|0)==(u|0)){a[t>>2]=n;a[e>>2]=i;p=n;break}else Oe()}while(0);do if(o){t=a[u+28>>2]|0;e=3328+(t<<2)|0;if((u|0)==(a[e>>2]|0)){a[e>>2]=p;if(!p){a[757]=a[757]&~(1<<t);break}}else{if(o>>>0<(a[760]|0)>>>0)Oe();t=o+16|0;if((a[t>>2]|0)==(u|0))a[t>>2]=p;else a[o+20>>2]=p;if(!p)break}e=a[760]|0;if(p>>>0<e>>>0)Oe();a[p+24>>2]=o;t=a[u+16>>2]|0;do if(t)if(t>>>0<e>>>0)Oe();else{a[p+16>>2]=t;a[t+24>>2]=p;break}while(0);t=a[u+20>>2]|0;if(t)if(t>>>0<(a[760]|0)>>>0)Oe();else{a[p+20>>2]=t;a[t+24>>2]=p;break}}while(0);e:do if(l>>>0>=16){a[u+4>>2]=f|3;a[u+(f|4)>>2]=l|1;a[u+(l+f)>>2]=l;t=l>>>3;if(l>>>0<256){e=t<<1;i=3064+(e<<2)|0;n=a[756]|0;t=1<<t;if(n&t){t=3064+(e+2<<2)|0;e=a[t>>2]|0;if(e>>>0<(a[760]|0)>>>0)Oe();else{_=t;y=e}}else{a[756]=n|t;_=3064+(e+2<<2)|0;y=i}a[_>>2]=s;a[y+12>>2]=s;a[u+(f+8)>>2]=y;a[u+(f+12)>>2]=i;break}t=l>>>8;if(t)if(l>>>0>16777215)i=31;else{I=(t+1048320|0)>>>16&8;U=t<<I;D=(U+520192|0)>>>16&4;U=U<<D;i=(U+245760|0)>>>16&2;i=14-(D|I|i)+(U<<i>>>15)|0;i=l>>>(i+7|0)&1|i<<1}else i=0;t=3328+(i<<2)|0;a[u+(f+28)>>2]=i;a[u+(f+20)>>2]=0;a[u+(f+16)>>2]=0;e=a[757]|0;n=1<<i;if(!(e&n)){a[757]=e|n;a[t>>2]=s;a[u+(f+24)>>2]=t;a[u+(f+12)>>2]=s;a[u+(f+8)>>2]=s;break}t=a[t>>2]|0;t:do if((a[t+4>>2]&-8|0)!=(l|0)){i=l<<((i|0)==31?0:25-(i>>>1)|0);while(1){e=t+16+(i>>>31<<2)|0;n=a[e>>2]|0;if(!n)break;if((a[n+4>>2]&-8|0)==(l|0)){k=n;break t}else{i=i<<1;t=n}}if(e>>>0<(a[760]|0)>>>0)Oe();else{a[e>>2]=s;a[u+(f+24)>>2]=t;a[u+(f+12)>>2]=s;a[u+(f+8)>>2]=s;break e}}else k=t;while(0);t=k+8|0;e=a[t>>2]|0;U=a[760]|0;if(e>>>0>=U>>>0&k>>>0>=U>>>0){a[e+12>>2]=s;a[t>>2]=s;a[u+(f+8)>>2]=e;a[u+(f+12)>>2]=k;a[u+(f+24)>>2]=0;break}else Oe()}else{U=l+f|0;a[u+4>>2]=U|3;U=u+(U+4)|0;a[U>>2]=a[U>>2]|1}while(0);U=u+8|0;return U|0}else m=f}else m=f}else m=-1;while(0);n=a[758]|0;if(n>>>0>=m>>>0){t=n-m|0;e=a[761]|0;if(t>>>0>15){a[761]=e+m;a[758]=t;a[e+(m+4)>>2]=t|1;a[e+n>>2]=t;a[e+4>>2]=m|3}else{a[758]=0;a[761]=0;a[e+4>>2]=n|3;U=e+(n+4)|0;a[U>>2]=a[U>>2]|1}U=e+8|0;return U|0}e=a[759]|0;if(e>>>0>m>>>0){I=e-m|0;a[759]=I;U=a[762]|0;a[762]=U+m;a[U+(m+4)>>2]=I|1;a[U+4>>2]=m|3;U=U+8|0;return U|0}do if(!(a[874]|0)){e=nt(30)|0;if(!(e+-1&e)){a[876]=e;a[875]=e;a[877]=-1;a[878]=-1;a[879]=0;a[867]=0;a[874]=(Ot(0)|0)&-16^1431655768;break}else Oe()}while(0);u=m+48|0;l=a[876]|0;c=m+47|0;s=l+c|0;l=0-l|0;h=s&l;if(h>>>0<=m>>>0){U=0;return U|0}e=a[866]|0;if((e|0)!=0?(y=a[864]|0,k=y+h|0,k>>>0<=y>>>0|k>>>0>e>>>0):0){U=0;return U|0}e:do if(!(a[867]&4)){e=a[762]|0;t:do if(e){r=3472;while(1){n=a[r>>2]|0;if(n>>>0<=e>>>0?(v=r+4|0,(n+(a[v>>2]|0)|0)>>>0>e>>>0):0){o=r;e=v;break}r=a[r+8>>2]|0;if(!r){w=174;break t}}n=s-(a[759]|0)&l;if(n>>>0<2147483647){r=Ze(n|0)|0;k=(r|0)==((a[o>>2]|0)+(a[e>>2]|0)|0);e=k?n:0;if(k){if((r|0)!=(-1|0)){x=r;g=e;w=194;break e}}else w=184}else e=0}else w=174;while(0);do if((w|0)==174){o=Ze(0)|0;if((o|0)!=(-1|0)){e=o;n=a[875]|0;r=n+-1|0;if(!(r&e))n=h;else n=h-e+(r+e&0-n)|0;e=a[864]|0;r=e+n|0;if(n>>>0>m>>>0&n>>>0<2147483647){k=a[866]|0;if((k|0)!=0?r>>>0<=e>>>0|r>>>0>k>>>0:0){e=0;break}r=Ze(n|0)|0;k=(r|0)==(o|0);e=k?n:0;if(k){x=o;g=e;w=194;break e}else w=184}else e=0}else e=0}while(0);t:do if((w|0)==184){o=0-n|0;do if(u>>>0>n>>>0&(n>>>0<2147483647&(r|0)!=(-1|0))?(b=a[876]|0,b=c-n+b&0-b,b>>>0<2147483647):0)if((Ze(b|0)|0)==(-1|0)){Ze(o|0)|0;break t}else{n=b+n|0;break}while(0);if((r|0)!=(-1|0)){x=r;g=n;w=194;break e}}while(0);a[867]=a[867]|4;w=191}else{e=0;w=191}while(0);if((((w|0)==191?h>>>0<2147483647:0)?(x=Ze(h|0)|0,E=Ze(0)|0,x>>>0<E>>>0&((x|0)!=(-1|0)&(E|0)!=(-1|0))):0)?(M=E-x|0,T=M>>>0>(m+40|0)>>>0,T):0){g=T?M:e;w=194}if((w|0)==194){e=(a[864]|0)+g|0;a[864]=e;if(e>>>0>(a[865]|0)>>>0)a[865]=e;s=a[762]|0;e:do if(s){o=3472;do{e=a[o>>2]|0;n=o+4|0;r=a[n>>2]|0;if((x|0)==(e+r|0)){S=e;A=n;R=r;C=o;w=204;break}o=a[o+8>>2]|0}while((o|0)!=0);if(((w|0)==204?(a[C+12>>2]&8|0)==0:0)?s>>>0<x>>>0&s>>>0>=S>>>0:0){a[A>>2]=R+g;U=(a[759]|0)+g|0;I=s+8|0;I=(I&7|0)==0?0:0-I&7;D=U-I|0;a[762]=s+I;a[759]=D;a[s+(I+4)>>2]=D|1;a[s+(U+4)>>2]=40;a[763]=a[878];break}e=a[760]|0;if(x>>>0<e>>>0){a[760]=x;e=x}n=x+g|0;o=3472;while(1){if((a[o>>2]|0)==(n|0)){r=o;n=o;w=212;break}o=a[o+8>>2]|0;if(!o){n=3472;break}}if((w|0)==212)if(!(a[n+12>>2]&8)){a[r>>2]=x;d=n+4|0;a[d>>2]=(a[d>>2]|0)+g;d=x+8|0;d=(d&7|0)==0?0:0-d&7;c=x+(g+8)|0;c=(c&7|0)==0?0:0-c&7;t=x+(c+g)|0;f=d+m|0;p=x+f|0;h=t-(x+d)-m|0;a[x+(d+4)>>2]=m|3;t:do if((t|0)!=(s|0)){if((t|0)==(a[761]|0)){U=(a[758]|0)+h|0;a[758]=U;a[761]=p;a[x+(f+4)>>2]=U|1;a[x+(U+f)>>2]=U;break}l=g+4|0;n=a[x+(l+c)>>2]|0;if((n&3|0)==1){u=n&-8;o=n>>>3;n:do if(n>>>0>=256){s=a[x+((c|24)+g)>>2]|0;i=a[x+(g+12+c)>>2]|0;do if((i|0)==(t|0)){r=c|16;i=x+(l+r)|0;n=a[i>>2]|0;if(!n){i=x+(r+g)|0;n=a[i>>2]|0;if(!n){F=0;break}}while(1){r=n+20|0;o=a[r>>2]|0;if(o){n=o;i=r;continue}r=n+16|0;o=a[r>>2]|0;if(!o)break;else{n=o;i=r}}if(i>>>0<e>>>0)Oe();else{a[i>>2]=0;F=n;break}}else{r=a[x+((c|8)+g)>>2]|0;if(r>>>0<e>>>0)Oe();e=r+12|0;if((a[e>>2]|0)!=(t|0))Oe();n=i+8|0;if((a[n>>2]|0)==(t|0)){a[e>>2]=i;a[n>>2]=r;F=i;break}else Oe()}while(0);if(!s)break;e=a[x+(g+28+c)>>2]|0;n=3328+(e<<2)|0;do if((t|0)!=(a[n>>2]|0)){if(s>>>0<(a[760]|0)>>>0)Oe();e=s+16|0;if((a[e>>2]|0)==(t|0))a[e>>2]=F;else a[s+20>>2]=F;if(!F)break n}else{a[n>>2]=F;if(F)break;a[757]=a[757]&~(1<<e);break n}while(0);n=a[760]|0;if(F>>>0<n>>>0)Oe();a[F+24>>2]=s;t=c|16;e=a[x+(t+g)>>2]|0;do if(e)if(e>>>0<n>>>0)Oe();else{a[F+16>>2]=e;a[e+24>>2]=F;break}while(0);t=a[x+(l+t)>>2]|0;if(!t)break;if(t>>>0<(a[760]|0)>>>0)Oe();else{a[F+20>>2]=t;a[t+24>>2]=F;break}}else{i=a[x+((c|8)+g)>>2]|0;r=a[x+(g+12+c)>>2]|0;n=3064+(o<<1<<2)|0;do if((i|0)!=(n|0)){if(i>>>0<e>>>0)Oe();if((a[i+12>>2]|0)==(t|0))break;Oe()}while(0);if((r|0)==(i|0)){a[756]=a[756]&~(1<<o);break}do if((r|0)==(n|0))P=r+8|0;else{if(r>>>0<e>>>0)Oe();e=r+8|0;if((a[e>>2]|0)==(t|0)){P=e;break}Oe()}while(0);a[i+12>>2]=r;a[P>>2]=i}while(0);t=x+((u|c)+g)|0;r=u+h|0}else r=h;t=t+4|0;a[t>>2]=a[t>>2]&-2;a[x+(f+4)>>2]=r|1;a[x+(r+f)>>2]=r;t=r>>>3;if(r>>>0<256){e=t<<1;i=3064+(e<<2)|0;n=a[756]|0;t=1<<t;do if(!(n&t)){a[756]=n|t;D=3064+(e+2<<2)|0;I=i}else{t=3064+(e+2<<2)|0;e=a[t>>2]|0;if(e>>>0>=(a[760]|0)>>>0){D=t;I=e;break}Oe()}while(0);a[D>>2]=p;a[I+12>>2]=p;a[x+(f+8)>>2]=I;a[x+(f+12)>>2]=i;break}t=r>>>8;do if(!t)i=0;else{if(r>>>0>16777215){i=31;break}D=(t+1048320|0)>>>16&8;I=t<<D;F=(I+520192|0)>>>16&4;I=I<<F;i=(I+245760|0)>>>16&2;i=14-(F|D|i)+(I<<i>>>15)|0;i=r>>>(i+7|0)&1|i<<1}while(0);t=3328+(i<<2)|0;a[x+(f+28)>>2]=i;a[x+(f+20)>>2]=0;a[x+(f+16)>>2]=0;e=a[757]|0;n=1<<i;if(!(e&n)){a[757]=e|n;a[t>>2]=p;a[x+(f+24)>>2]=t;a[x+(f+12)>>2]=p;a[x+(f+8)>>2]=p;break}t=a[t>>2]|0;n:do if((a[t+4>>2]&-8|0)!=(r|0)){i=r<<((i|0)==31?0:25-(i>>>1)|0);while(1){e=t+16+(i>>>31<<2)|0;n=a[e>>2]|0;if(!n)break;if((a[n+4>>2]&-8|0)==(r|0)){U=n;break n}else{i=i<<1;t=n}}if(e>>>0<(a[760]|0)>>>0)Oe();else{a[e>>2]=p;a[x+(f+24)>>2]=t;a[x+(f+12)>>2]=p;a[x+(f+8)>>2]=p;break t}}else U=t;while(0);t=U+8|0;e=a[t>>2]|0;I=a[760]|0;if(e>>>0>=I>>>0&U>>>0>=I>>>0){a[e+12>>2]=p;a[t>>2]=p;a[x+(f+8)>>2]=e;a[x+(f+12)>>2]=U;a[x+(f+24)>>2]=0;break}else Oe()}else{U=(a[759]|0)+h|0;a[759]=U;a[762]=p;a[x+(f+4)>>2]=U|1}while(0);U=x+(d|8)|0;return U|0}else n=3472;while(1){e=a[n>>2]|0;if(e>>>0<=s>>>0?(t=a[n+4>>2]|0,i=e+t|0,i>>>0>s>>>0):0)break;n=a[n+8>>2]|0}r=e+(t+-39)|0;e=e+(t+-47+((r&7|0)==0?0:0-r&7))|0;r=s+16|0;e=e>>>0<r>>>0?s:e;t=e+8|0;n=x+8|0;n=(n&7|0)==0?0:0-n&7;U=g+-40-n|0;a[762]=x+n;a[759]=U;a[x+(n+4)>>2]=U|1;a[x+(g+-36)>>2]=40;a[763]=a[878];n=e+4|0;a[n>>2]=27;a[t>>2]=a[868];a[t+4>>2]=a[869];a[t+8>>2]=a[870];a[t+12>>2]=a[871];a[868]=x;a[869]=g;a[871]=0;a[870]=t;t=e+28|0;a[t>>2]=7;if((e+32|0)>>>0<i>>>0)do{U=t;t=t+4|0;a[t>>2]=7}while((U+8|0)>>>0<i>>>0);if((e|0)!=(s|0)){o=e-s|0;a[n>>2]=a[n>>2]&-2;a[s+4>>2]=o|1;a[e>>2]=o;t=o>>>3;if(o>>>0<256){e=t<<1;i=3064+(e<<2)|0;n=a[756]|0;t=1<<t;if(n&t){t=3064+(e+2<<2)|0;e=a[t>>2]|0;if(e>>>0<(a[760]|0)>>>0)Oe();else{O=t;L=e}}else{a[756]=n|t;O=3064+(e+2<<2)|0;L=i}a[O>>2]=s;a[L+12>>2]=s;a[s+8>>2]=L;a[s+12>>2]=i;break}t=o>>>8;if(t)if(o>>>0>16777215)i=31;else{I=(t+1048320|0)>>>16&8;U=t<<I;D=(U+520192|0)>>>16&4;U=U<<D;i=(U+245760|0)>>>16&2;i=14-(D|I|i)+(U<<i>>>15)|0;i=o>>>(i+7|0)&1|i<<1}else i=0;n=3328+(i<<2)|0;a[s+28>>2]=i;a[s+20>>2]=0;a[r>>2]=0;t=a[757]|0;e=1<<i;if(!(t&e)){a[757]=t|e;a[n>>2]=s;a[s+24>>2]=n;a[s+12>>2]=s;a[s+8>>2]=s;break}t=a[n>>2]|0;t:do if((a[t+4>>2]&-8|0)!=(o|0)){i=o<<((i|0)==31?0:25-(i>>>1)|0);while(1){e=t+16+(i>>>31<<2)|0;n=a[e>>2]|0;if(!n)break;if((a[n+4>>2]&-8|0)==(o|0)){N=n;break t}else{i=i<<1;t=n}}if(e>>>0<(a[760]|0)>>>0)Oe();else{a[e>>2]=s;a[s+24>>2]=t;a[s+12>>2]=s;a[s+8>>2]=s;break e}}else N=t;while(0);t=N+8|0;e=a[t>>2]|0;U=a[760]|0;if(e>>>0>=U>>>0&N>>>0>=U>>>0){a[e+12>>2]=s;a[t>>2]=s;a[s+8>>2]=e;a[s+12>>2]=N;a[s+24>>2]=0;break}else Oe()}}else{U=a[760]|0;if((U|0)==0|x>>>0<U>>>0)a[760]=x;a[868]=x;a[869]=g;a[871]=0;a[765]=a[874];a[764]=-1;t=0;do{U=t<<1;I=3064+(U<<2)|0;a[3064+(U+3<<2)>>2]=I;a[3064+(U+2<<2)>>2]=I;t=t+1|0}while((t|0)!=32);U=x+8|0;U=(U&7|0)==0?0:0-U&7;I=g+-40-U|0;a[762]=x+U;a[759]=I;a[x+(U+4)>>2]=I|1;a[x+(g+-36)>>2]=40;a[763]=a[878]}while(0);t=a[759]|0;if(t>>>0>m>>>0){I=t-m|0;a[759]=I;U=a[762]|0;a[762]=U+m;a[U+(m+4)>>2]=I|1;a[U+4>>2]=m|3;U=U+8|0;return U|0}}a[(hr()|0)>>2]=12;U=0;return U|0}function ja(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,s=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0;if(!e)return;t=e+-8|0;l=a[760]|0;if(t>>>0<l>>>0)Oe();n=a[e+-4>>2]|0;i=n&3;if((i|0)==1)Oe();p=n&-8;m=e+(p+-8)|0;do if(!(n&1)){t=a[t>>2]|0;if(!i)return;u=-8-t|0;h=e+u|0;f=t+p|0;if(h>>>0<l>>>0)Oe();if((h|0)==(a[761]|0)){t=e+(p+-4)|0;n=a[t>>2]|0;if((n&3|0)!=3){b=h;o=f;break}a[758]=f;a[t>>2]=n&-2;a[e+(u+4)>>2]=f|1;a[m>>2]=f;return}r=t>>>3;if(t>>>0<256){i=a[e+(u+8)>>2]|0;n=a[e+(u+12)>>2]|0;t=3064+(r<<1<<2)|0;if((i|0)!=(t|0)){if(i>>>0<l>>>0)Oe();if((a[i+12>>2]|0)!=(h|0))Oe()}if((n|0)==(i|0)){a[756]=a[756]&~(1<<r);b=h;o=f;break}if((n|0)!=(t|0)){if(n>>>0<l>>>0)Oe();t=n+8|0;if((a[t>>2]|0)==(h|0))s=t;else Oe()}else s=n+8|0;a[i+12>>2]=n;a[s>>2]=i;b=h;o=f;break}s=a[e+(u+24)>>2]|0;i=a[e+(u+12)>>2]|0;do if((i|0)==(h|0)){n=e+(u+20)|0;t=a[n>>2]|0;if(!t){n=e+(u+16)|0;t=a[n>>2]|0;if(!t){c=0;break}}while(1){i=t+20|0;r=a[i>>2]|0;if(r){t=r;n=i;continue}i=t+16|0;r=a[i>>2]|0;if(!r)break;else{t=r;n=i}}if(n>>>0<l>>>0)Oe();else{a[n>>2]=0;c=t;break}}else{r=a[e+(u+8)>>2]|0;if(r>>>0<l>>>0)Oe();t=r+12|0;if((a[t>>2]|0)!=(h|0))Oe();n=i+8|0;if((a[n>>2]|0)==(h|0)){a[t>>2]=i;a[n>>2]=r;c=i;break}else Oe()}while(0);if(s){t=a[e+(u+28)>>2]|0;n=3328+(t<<2)|0;if((h|0)==(a[n>>2]|0)){a[n>>2]=c;if(!c){a[757]=a[757]&~(1<<t);b=h;o=f;break}}else{if(s>>>0<(a[760]|0)>>>0)Oe();t=s+16|0;if((a[t>>2]|0)==(h|0))a[t>>2]=c;else a[s+20>>2]=c;if(!c){b=h;o=f;break}}n=a[760]|0;if(c>>>0<n>>>0)Oe();a[c+24>>2]=s;t=a[e+(u+16)>>2]|0;do if(t)if(t>>>0<n>>>0)Oe();else{a[c+16>>2]=t;a[t+24>>2]=c;break}while(0);t=a[e+(u+20)>>2]|0;if(t)if(t>>>0<(a[760]|0)>>>0)Oe();else{a[c+20>>2]=t;a[t+24>>2]=c;b=h;o=f;break}else{b=h;o=f}}else{b=h;o=f}}else{b=t;o=p}while(0);if(b>>>0>=m>>>0)Oe();t=e+(p+-4)|0;n=a[t>>2]|0;if(!(n&1))Oe();if(!(n&2)){if((m|0)==(a[762]|0)){y=(a[759]|0)+o|0;a[759]=y;a[762]=b;a[b+4>>2]=y|1;if((b|0)!=(a[761]|0))return;a[761]=0;a[758]=0;return}if((m|0)==(a[761]|0)){y=(a[758]|0)+o|0;a[758]=y;a[761]=b;a[b+4>>2]=y|1;a[b+y>>2]=y;return}o=(n&-8)+o|0;r=n>>>3;do if(n>>>0>=256){s=a[e+(p+16)>>2]|0;t=a[e+(p|4)>>2]|0;do if((t|0)==(m|0)){n=e+(p+12)|0;t=a[n>>2]|0;if(!t){n=e+(p+8)|0;t=a[n>>2]|0;if(!t){g=0;break}}while(1){i=t+20|0;r=a[i>>2]|0;if(r){t=r;n=i;continue}i=t+16|0;r=a[i>>2]|0;if(!r)break;else{t=r;n=i}}if(n>>>0<(a[760]|0)>>>0)Oe();else{a[n>>2]=0;g=t;break}}else{n=a[e+p>>2]|0;if(n>>>0<(a[760]|0)>>>0)Oe();i=n+12|0;if((a[i>>2]|0)!=(m|0))Oe();r=t+8|0;if((a[r>>2]|0)==(m|0)){a[i>>2]=t;a[r>>2]=n;g=t;break}else Oe()}while(0);if(s){t=a[e+(p+20)>>2]|0;n=3328+(t<<2)|0;if((m|0)==(a[n>>2]|0)){a[n>>2]=g;if(!g){a[757]=a[757]&~(1<<t);break}}else{if(s>>>0<(a[760]|0)>>>0)Oe();t=s+16|0;if((a[t>>2]|0)==(m|0))a[t>>2]=g;else a[s+20>>2]=g;if(!g)break}n=a[760]|0;if(g>>>0<n>>>0)Oe();a[g+24>>2]=s;t=a[e+(p+8)>>2]|0;do if(t)if(t>>>0<n>>>0)Oe();else{a[g+16>>2]=t;a[t+24>>2]=g;break}while(0);t=a[e+(p+12)>>2]|0;if(t)if(t>>>0<(a[760]|0)>>>0)Oe();else{a[g+20>>2]=t;a[t+24>>2]=g;break}}}else{i=a[e+p>>2]|0;n=a[e+(p|4)>>2]|0;t=3064+(r<<1<<2)|0;if((i|0)!=(t|0)){if(i>>>0<(a[760]|0)>>>0)Oe();if((a[i+12>>2]|0)!=(m|0))Oe()}if((n|0)==(i|0)){a[756]=a[756]&~(1<<r);break}if((n|0)!=(t|0)){if(n>>>0<(a[760]|0)>>>0)Oe();t=n+8|0;if((a[t>>2]|0)==(m|0))d=t;else Oe()}else d=n+8|0;a[i+12>>2]=n;a[d>>2]=i}while(0);a[b+4>>2]=o|1;a[b+o>>2]=o;if((b|0)==(a[761]|0)){a[758]=o;return}}else{a[t>>2]=n&-2;a[b+4>>2]=o|1;a[b+o>>2]=o}t=o>>>3;if(o>>>0<256){n=t<<1;r=3064+(n<<2)|0;i=a[756]|0;t=1<<t;if(i&t){t=3064+(n+2<<2)|0;n=a[t>>2]|0;if(n>>>0<(a[760]|0)>>>0)Oe();else{v=t;_=n}}else{a[756]=i|t;v=3064+(n+2<<2)|0;_=r}a[v>>2]=b;a[_+12>>2]=b;a[b+8>>2]=_;a[b+12>>2]=r;return}t=o>>>8;if(t)if(o>>>0>16777215)r=31;else{v=(t+1048320|0)>>>16&8;_=t<<v;m=(_+520192|0)>>>16&4;_=_<<m;r=(_+245760|0)>>>16&2;r=14-(m|v|r)+(_<<r>>>15)|0;r=o>>>(r+7|0)&1|r<<1}else r=0;t=3328+(r<<2)|0;a[b+28>>2]=r;a[b+20>>2]=0;a[b+16>>2]=0;n=a[757]|0;i=1<<r;e:do if(n&i){t=a[t>>2]|0;t:do if((a[t+4>>2]&-8|0)!=(o|0)){r=o<<((r|0)==31?0:25-(r>>>1)|0);while(1){n=t+16+(r>>>31<<2)|0;i=a[n>>2]|0;if(!i)break;if((a[i+4>>2]&-8|0)==(o|0)){y=i;break t}else{r=r<<1;t=i}}if(n>>>0<(a[760]|0)>>>0)Oe();else{a[n>>2]=b;a[b+24>>2]=t;a[b+12>>2]=b;a[b+8>>2]=b;break e}}else y=t;while(0);t=y+8|0;n=a[t>>2]|0;_=a[760]|0;if(n>>>0>=_>>>0&y>>>0>=_>>>0){a[n+12>>2]=b;a[t>>2]=b;a[b+8>>2]=n;a[b+12>>2]=y;a[b+24>>2]=0;break}else Oe()}else{a[757]=n|i;a[t>>2]=b;a[b+24>>2]=t;a[b+12>>2]=b;a[b+8>>2]=b}while(0);b=(a[764]|0)+-1|0;a[764]=b;if(!b)t=3480;else return;while(1){t=a[t>>2]|0;if(!t)break;else t=t+8|0}a[764]=-1;return}function Va(e,t){e=e|0;t=t|0;var n=0;if(e){n=ne(t,e)|0;if((t|e)>>>0>65535)n=((n>>>0)/(e>>>0)|0|0)==(t|0)?n:-1}else n=0;t=Ba(n)|0;if(!t)return t|0;if(!(a[t+-4>>2]&3))return t|0;Xu(t|0,0,n|0)|0;return t|0}function Ga(e,t){e=e|0;t=t|0;var n=0,i=0;if(!e){e=Ba(t)|0;return e|0}if(t>>>0>4294967231){a[(hr()|0)>>2]=12;e=0;return e|0}n=Wa(e+-8|0,t>>>0<11?16:t+11&-8)|0;if(n){e=n+8|0;return e|0}n=Ba(t)|0;if(!n){e=0;return e|0}i=a[e+-4>>2]|0;i=(i&-8)-((i&3|0)==0?8:4)|0;Qu(n|0,e|0,(i>>>0<t>>>0?i:t)|0)|0;ja(e);e=n;return e|0}function Wa(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0;p=e+4|0;g=a[p>>2]|0;u=g&-8;h=e+u|0;l=a[760]|0;n=g&3;if(!((n|0)!=1&e>>>0>=l>>>0&e>>>0<h>>>0))Oe();i=e+(u|4)|0;r=a[i>>2]|0;if(!(r&1))Oe();if(!n){if(t>>>0<256){e=0;return e|0}if(u>>>0>=(t+4|0)>>>0?(u-t|0)>>>0<=a[876]<<1>>>0:0)return e|0;e=0;return e|0}if(u>>>0>=t>>>0){n=u-t|0;if(n>>>0<=15)return e|0;a[p>>2]=g&1|t|2;a[e+(t+4)>>2]=n|3;a[i>>2]=a[i>>2]|1;Xa(e+t|0,n);return e|0}if((h|0)==(a[762]|0)){n=(a[759]|0)+u|0;if(n>>>0<=t>>>0){e=0;return e|0}d=n-t|0;a[p>>2]=g&1|t|2;a[e+(t+4)>>2]=d|1;a[762]=e+t;a[759]=d;return e|0}if((h|0)==(a[761]|0)){i=(a[758]|0)+u|0;if(i>>>0<t>>>0){e=0;return e|0}n=i-t|0;if(n>>>0>15){a[p>>2]=g&1|t|2;a[e+(t+4)>>2]=n|1;a[e+i>>2]=n;i=e+(i+4)|0;a[i>>2]=a[i>>2]&-2;i=e+t|0}else{a[p>>2]=g&1|i|2;i=e+(i+4)|0;a[i>>2]=a[i>>2]|1;i=0;n=0}a[758]=n;a[761]=i;return e|0}if(r&2){e=0;return e|0}f=(r&-8)+u|0;if(f>>>0<t>>>0){e=0;return e|0}d=f-t|0;o=r>>>3;do if(r>>>0>=256){s=a[e+(u+24)>>2]|0;o=a[e+(u+12)>>2]|0;do if((o|0)==(h|0)){i=e+(u+20)|0;n=a[i>>2]|0;if(!n){i=e+(u+16)|0;n=a[i>>2]|0;if(!n){c=0;break}}while(1){r=n+20|0;o=a[r>>2]|0;if(o){n=o;i=r;continue}r=n+16|0;o=a[r>>2]|0;if(!o)break;else{n=o;i=r}}if(i>>>0<l>>>0)Oe();else{a[i>>2]=0;c=n;break}}else{r=a[e+(u+8)>>2]|0;if(r>>>0<l>>>0)Oe();n=r+12|0;if((a[n>>2]|0)!=(h|0))Oe();i=o+8|0;if((a[i>>2]|0)==(h|0)){a[n>>2]=o;a[i>>2]=r;c=o;break}else Oe()}while(0);if(s){n=a[e+(u+28)>>2]|0;i=3328+(n<<2)|0;if((h|0)==(a[i>>2]|0)){a[i>>2]=c;if(!c){a[757]=a[757]&~(1<<n);break}}else{if(s>>>0<(a[760]|0)>>>0)Oe();n=s+16|0;if((a[n>>2]|0)==(h|0))a[n>>2]=c;else a[s+20>>2]=c;if(!c)break}i=a[760]|0;if(c>>>0<i>>>0)Oe();a[c+24>>2]=s;n=a[e+(u+16)>>2]|0;do if(n)if(n>>>0<i>>>0)Oe();else{a[c+16>>2]=n;a[n+24>>2]=c;break}while(0);n=a[e+(u+20)>>2]|0;if(n)if(n>>>0<(a[760]|0)>>>0)Oe();else{a[c+20>>2]=n;a[n+24>>2]=c;break}}}else{r=a[e+(u+8)>>2]|0;i=a[e+(u+12)>>2]|0;n=3064+(o<<1<<2)|0;if((r|0)!=(n|0)){if(r>>>0<l>>>0)Oe();if((a[r+12>>2]|0)!=(h|0))Oe()}if((i|0)==(r|0)){a[756]=a[756]&~(1<<o);break}if((i|0)!=(n|0)){if(i>>>0<l>>>0)Oe();n=i+8|0;if((a[n>>2]|0)==(h|0))s=n;else Oe()}else s=i+8|0;a[r+12>>2]=i;a[s>>2]=r}while(0);if(d>>>0<16){a[p>>2]=f|g&1|2;t=e+(f|4)|0;a[t>>2]=a[t>>2]|1;
return e|0}else{a[p>>2]=g&1|t|2;a[e+(t+4)>>2]=d|3;g=e+(f|4)|0;a[g>>2]=a[g>>2]|1;Xa(e+t|0,d);return e|0}return 0}function Xa(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0;m=e+t|0;n=a[e+4>>2]|0;do if(!(n&1)){c=a[e>>2]|0;if(!(n&3))return;d=e+(0-c)|0;f=c+t|0;u=a[760]|0;if(d>>>0<u>>>0)Oe();if((d|0)==(a[761]|0)){i=e+(t+4)|0;n=a[i>>2]|0;if((n&3|0)!=3){y=d;s=f;break}a[758]=f;a[i>>2]=n&-2;a[e+(4-c)>>2]=f|1;a[m>>2]=f;return}o=c>>>3;if(c>>>0<256){r=a[e+(8-c)>>2]|0;i=a[e+(12-c)>>2]|0;n=3064+(o<<1<<2)|0;if((r|0)!=(n|0)){if(r>>>0<u>>>0)Oe();if((a[r+12>>2]|0)!=(d|0))Oe()}if((i|0)==(r|0)){a[756]=a[756]&~(1<<o);y=d;s=f;break}if((i|0)!=(n|0)){if(i>>>0<u>>>0)Oe();n=i+8|0;if((a[n>>2]|0)==(d|0))l=n;else Oe()}else l=i+8|0;a[r+12>>2]=i;a[l>>2]=r;y=d;s=f;break}l=a[e+(24-c)>>2]|0;r=a[e+(12-c)>>2]|0;do if((r|0)==(d|0)){r=16-c|0;i=e+(r+4)|0;n=a[i>>2]|0;if(!n){i=e+r|0;n=a[i>>2]|0;if(!n){h=0;break}}while(1){r=n+20|0;o=a[r>>2]|0;if(o){n=o;i=r;continue}r=n+16|0;o=a[r>>2]|0;if(!o)break;else{n=o;i=r}}if(i>>>0<u>>>0)Oe();else{a[i>>2]=0;h=n;break}}else{o=a[e+(8-c)>>2]|0;if(o>>>0<u>>>0)Oe();n=o+12|0;if((a[n>>2]|0)!=(d|0))Oe();i=r+8|0;if((a[i>>2]|0)==(d|0)){a[n>>2]=r;a[i>>2]=o;h=r;break}else Oe()}while(0);if(l){n=a[e+(28-c)>>2]|0;i=3328+(n<<2)|0;if((d|0)==(a[i>>2]|0)){a[i>>2]=h;if(!h){a[757]=a[757]&~(1<<n);y=d;s=f;break}}else{if(l>>>0<(a[760]|0)>>>0)Oe();n=l+16|0;if((a[n>>2]|0)==(d|0))a[n>>2]=h;else a[l+20>>2]=h;if(!h){y=d;s=f;break}}r=a[760]|0;if(h>>>0<r>>>0)Oe();a[h+24>>2]=l;n=16-c|0;i=a[e+n>>2]|0;do if(i)if(i>>>0<r>>>0)Oe();else{a[h+16>>2]=i;a[i+24>>2]=h;break}while(0);n=a[e+(n+4)>>2]|0;if(n)if(n>>>0<(a[760]|0)>>>0)Oe();else{a[h+20>>2]=n;a[n+24>>2]=h;y=d;s=f;break}else{y=d;s=f}}else{y=d;s=f}}else{y=e;s=t}while(0);u=a[760]|0;if(m>>>0<u>>>0)Oe();n=e+(t+4)|0;i=a[n>>2]|0;if(!(i&2)){if((m|0)==(a[762]|0)){_=(a[759]|0)+s|0;a[759]=_;a[762]=y;a[y+4>>2]=_|1;if((y|0)!=(a[761]|0))return;a[761]=0;a[758]=0;return}if((m|0)==(a[761]|0)){_=(a[758]|0)+s|0;a[758]=_;a[761]=y;a[y+4>>2]=_|1;a[y+_>>2]=_;return}s=(i&-8)+s|0;o=i>>>3;do if(i>>>0>=256){l=a[e+(t+24)>>2]|0;r=a[e+(t+12)>>2]|0;do if((r|0)==(m|0)){i=e+(t+20)|0;n=a[i>>2]|0;if(!n){i=e+(t+16)|0;n=a[i>>2]|0;if(!n){g=0;break}}while(1){r=n+20|0;o=a[r>>2]|0;if(o){n=o;i=r;continue}r=n+16|0;o=a[r>>2]|0;if(!o)break;else{n=o;i=r}}if(i>>>0<u>>>0)Oe();else{a[i>>2]=0;g=n;break}}else{o=a[e+(t+8)>>2]|0;if(o>>>0<u>>>0)Oe();n=o+12|0;if((a[n>>2]|0)!=(m|0))Oe();i=r+8|0;if((a[i>>2]|0)==(m|0)){a[n>>2]=r;a[i>>2]=o;g=r;break}else Oe()}while(0);if(l){n=a[e+(t+28)>>2]|0;i=3328+(n<<2)|0;if((m|0)==(a[i>>2]|0)){a[i>>2]=g;if(!g){a[757]=a[757]&~(1<<n);break}}else{if(l>>>0<(a[760]|0)>>>0)Oe();n=l+16|0;if((a[n>>2]|0)==(m|0))a[n>>2]=g;else a[l+20>>2]=g;if(!g)break}i=a[760]|0;if(g>>>0<i>>>0)Oe();a[g+24>>2]=l;n=a[e+(t+16)>>2]|0;do if(n)if(n>>>0<i>>>0)Oe();else{a[g+16>>2]=n;a[n+24>>2]=g;break}while(0);n=a[e+(t+20)>>2]|0;if(n)if(n>>>0<(a[760]|0)>>>0)Oe();else{a[g+20>>2]=n;a[n+24>>2]=g;break}}}else{r=a[e+(t+8)>>2]|0;i=a[e+(t+12)>>2]|0;n=3064+(o<<1<<2)|0;if((r|0)!=(n|0)){if(r>>>0<u>>>0)Oe();if((a[r+12>>2]|0)!=(m|0))Oe()}if((i|0)==(r|0)){a[756]=a[756]&~(1<<o);break}if((i|0)!=(n|0)){if(i>>>0<u>>>0)Oe();n=i+8|0;if((a[n>>2]|0)==(m|0))p=n;else Oe()}else p=i+8|0;a[r+12>>2]=i;a[p>>2]=r}while(0);a[y+4>>2]=s|1;a[y+s>>2]=s;if((y|0)==(a[761]|0)){a[758]=s;return}}else{a[n>>2]=i&-2;a[y+4>>2]=s|1;a[y+s>>2]=s}n=s>>>3;if(s>>>0<256){i=n<<1;o=3064+(i<<2)|0;r=a[756]|0;n=1<<n;if(r&n){n=3064+(i+2<<2)|0;i=a[n>>2]|0;if(i>>>0<(a[760]|0)>>>0)Oe();else{v=n;_=i}}else{a[756]=r|n;v=3064+(i+2<<2)|0;_=o}a[v>>2]=y;a[_+12>>2]=y;a[y+8>>2]=_;a[y+12>>2]=o;return}n=s>>>8;if(n)if(s>>>0>16777215)o=31;else{v=(n+1048320|0)>>>16&8;_=n<<v;m=(_+520192|0)>>>16&4;_=_<<m;o=(_+245760|0)>>>16&2;o=14-(m|v|o)+(_<<o>>>15)|0;o=s>>>(o+7|0)&1|o<<1}else o=0;n=3328+(o<<2)|0;a[y+28>>2]=o;a[y+20>>2]=0;a[y+16>>2]=0;i=a[757]|0;r=1<<o;if(!(i&r)){a[757]=i|r;a[n>>2]=y;a[y+24>>2]=n;a[y+12>>2]=y;a[y+8>>2]=y;return}n=a[n>>2]|0;e:do if((a[n+4>>2]&-8|0)!=(s|0)){o=s<<((o|0)==31?0:25-(o>>>1)|0);while(1){i=n+16+(o>>>31<<2)|0;r=a[i>>2]|0;if(!r)break;if((a[r+4>>2]&-8|0)==(s|0)){n=r;break e}else{o=o<<1;n=r}}if(i>>>0<(a[760]|0)>>>0)Oe();a[i>>2]=y;a[y+24>>2]=n;a[y+12>>2]=y;a[y+8>>2]=y;return}while(0);i=n+8|0;r=a[i>>2]|0;_=a[760]|0;if(!(r>>>0>=_>>>0&n>>>0>=_>>>0))Oe();a[r+12>>2]=y;a[i>>2]=y;a[y+8>>2]=r;a[y+12>>2]=n;a[y+24>>2]=0;return}function Ya(e,t,n,r,s,l,f,d,p,g,m,v){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;l=l|0;f=f|0;d=d|0;p=p|0;g=g|0;m=+m;v=v|0;var _=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,O=0,L=0,N=0,F=0,D=0,I=0,U=0,H=0,z=0,B=0,j=0,V=0,G=0,W=0,X=0,Y=0,q=0,Z=0,Q=0,$=0;W=h;h=h+240|0;E=W+224|0;x=W+216|0;A=W+208|0;S=W+200|0;_=W+136|0;H=W+72|0;B=W;j=W+232|0;V=W+228|0;c[_>>3]=100;c[_+8>>3]=100;c[_+16>>3]=110;c[_+24>>3]=100;c[_+32>>3]=110;c[_+40>>3]=110;c[_+48>>3]=100;c[_+56>>3]=110;c[H>>3]=+c[g>>3];c[H+8>>3]=+c[g+8>>3];c[H+16>>3]=+c[g+16>>3];c[H+24>>3]=+c[g+24>>3];c[H+32>>3]=+c[g+32>>3];c[H+40>>3]=+c[g+40>>3];c[H+48>>3]=+c[g+48>>3];c[H+56>>3]=+c[g+56>>3];Qa(_,H,B);T=+c[H>>3];Y=+c[H+16>>3];k=T-Y;F=+c[H+8>>3];X=+c[H+24>>3];b=F-X;_=~~(k*k+b*b);b=+c[H+32>>3];k=+c[H+48>>3];Z=b-k;w=+c[H+40>>3];M=+c[H+56>>3];q=w-M;H=~~(Z*Z+q*q);b=Y-b;w=X-w;y=~~(b*b+w*w);T=k-T;F=M-F;z=~~(T*T+F*F);_=~~(+(((H|0)>(_|0)?H:_)|0)*m*m);y=~~(+(((z|0)>(y|0)?z:y)|0)*m*m);if(!e){g=n;while(1)if((g|0)<(r|0)&(ne(g,g)|0)<(_|0))g=g<<1;else break;_=n;while(1)if((_|0)<(r|0)&(ne(_,_)|0)<(y|0))_=_<<1;else break}else{g=n;while(1)if((g|0)<(r|0)&(ne(g<<2,g)|0)<(_|0))g=g<<1;else break;_=n;while(1)if((_|0)<(r|0)&(ne(_<<2,_)|0)<(y|0))_=_<<1;else break}z=(g|0)>(r|0)?r:g;U=(_|0)>(r|0)?r:_;I=(z|0)/(n|0)|0;D=(U|0)/(n|0)|0;b=(1-m)*.5*10;F=m*10;H=ne(n,n)|0;e:do if(!t){N=H*3|0;g=Va(N,4)|0;if(!g){to(3,5472,S);bt(1)}do switch(d|0){case 0:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){y=((ne(y,l)|0)+_|0)*3|0;e=((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)|0)*3|0;_=g+(e<<2)|0;a[_>>2]=(a[_>>2]|0)+(o[s+(y+2)>>0]|0);_=g+(e+1<<2)|0;a[_>>2]=(a[_>>2]|0)+(o[s+(y+1)>>0]|0);e=g+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+(o[s+y>>0]|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}break}case 1:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){y=((ne(y,l)|0)+_|0)*3|0;e=((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)|0)*3|0;_=g+(e<<2)|0;a[_>>2]=(a[_>>2]|0)+(o[s+y>>0]|0);_=g+(e+1<<2)|0;a[_>>2]=(a[_>>2]|0)+(o[s+(y+1)>>0]|0);e=g+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+(o[s+(y+2)>>0]|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}break}case 2:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){y=(ne(y,l)|0)+_<<2;e=((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)|0)*3|0;_=g+(e<<2)|0;a[_>>2]=(a[_>>2]|0)+(o[s+(y|2)>>0]|0);_=g+(e+1<<2)|0;a[_>>2]=(a[_>>2]|0)+(o[s+(y|1)>>0]|0);e=g+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+(o[s+y>>0]|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}break}case 3:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){y=(ne(y,l)|0)+_<<2;e=((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)|0)*3|0;_=g+(e<<2)|0;a[_>>2]=(a[_>>2]|0)+(o[s+y>>0]|0);_=g+(e+1<<2)|0;a[_>>2]=(a[_>>2]|0)+(o[s+(y|1)>>0]|0);e=g+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+(o[s+(y|2)>>0]|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}break}case 4:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){y=(ne(y,l)|0)+_<<2;e=((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)|0)*3|0;_=g+(e<<2)|0;a[_>>2]=(a[_>>2]|0)+(o[s+(y|1)>>0]|0);_=g+(e+1<<2)|0;a[_>>2]=(a[_>>2]|0)+(o[s+(y|2)>>0]|0);e=g+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+(o[s+(y|3)>>0]|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}break}case 5:case 12:case 13:case 14:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){y=o[s+((ne(y,l)|0)+_)>>0]|0;e=((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)|0)*3|0;_=g+(e<<2)|0;a[_>>2]=(a[_>>2]|0)+y;_=g+(e+1<<2)|0;a[_>>2]=(a[_>>2]|0)+y;e=g+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+y}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}break}case 6:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){y=(ne(y,l)|0)+_<<2;e=((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)|0)*3|0;_=g+(e<<2)|0;a[_>>2]=(a[_>>2]|0)+(o[s+(y|3)>>0]|0);_=g+(e+1<<2)|0;a[_>>2]=(a[_>>2]|0)+(o[s+(y|2)>>0]|0);e=g+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+(o[s+(y|1)>>0]|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}break}case 7:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){$=ne(y,l)|0;Q=(_&65534)+$<<1;Y=+((o[s+Q>>0]|0)+-128|0);Z=+((o[s+(Q+2)>>0]|0)+-128|0);q=+((o[s+($+_<<1|1)>>0]|0)+-16|0)*298.0820007324219;$=~~(Y*516.4110107421875+q)>>8;Q=~~(q-Y*100.29100036621094-Z*208.1199951171875)>>8;y=~~(q+Z*408.5830078125)>>8;$=($|0)>0?$:0;e=((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)|0)*3|0;_=g+(e<<2)|0;a[_>>2]=(($|0)<255?$:255)+(a[_>>2]|0);Q=(Q|0)>0?Q:0;_=g+(e+1<<2)|0;a[_>>2]=((Q|0)<255?Q:255)+(a[_>>2]|0);y=(y|0)>0?y:0;e=g+(e+2<<2)|0;a[e>>2]=((y|0)<255?y:255)+(a[e>>2]|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}break}case 8:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){y=ne(y,l)|0;Q=(_&65534)+y<<1;Y=+((o[s+(Q|1)>>0]|0)+-128|0);Z=+((o[s+(Q+3)>>0]|0)+-128|0);q=+((o[s+(y+_<<1)>>0]|0)+-16|0)*298.0820007324219;_=~~(q+Y*516.4110107421875)>>8;y=~~(q-Y*100.29100036621094-Z*208.1199951171875)>>8;Q=~~(q+Z*408.5830078125)>>8;_=(_|0)>0?_:0;$=((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)|0)*3|0;e=g+($<<2)|0;a[e>>2]=((_|0)<255?_:255)+(a[e>>2]|0);y=(y|0)>0?y:0;e=g+($+1<<2)|0;a[e>>2]=((y|0)<255?y:255)+(a[e>>2]|0);Q=(Q|0)>0?Q:0;$=g+($+2<<2)|0;a[$>>2]=((Q|0)<255?Q:255)+(a[$>>2]|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}break}case 9:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){Q=(ne(y,l)|0)+_<<1;y=o[s+(Q|1)>>0]|0;$=((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)|0)*3|0;e=g+($<<2)|0;a[e>>2]=(y<<3&248|4)+(a[e>>2]|0);Q=o[s+Q>>0]|0;e=g+($+1<<2)|0;a[e>>2]=(Q<<5&224|y>>>3&28|2)+(a[e>>2]|0);$=g+($+2<<2)|0;a[$>>2]=(Q&248|4)+(a[$>>2]|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}break}case 10:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){Q=(ne(y,l)|0)+_<<1;y=o[s+(Q|1)>>0]|0;$=((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)|0)*3|0;e=g+($<<2)|0;a[e>>2]=(y<<2&248|4)+(a[e>>2]|0);Q=o[s+Q>>0]|0;e=g+($+1<<2)|0;a[e>>2]=(Q<<5&224|y>>>3&24|4)+(a[e>>2]|0);$=g+($+2<<2)|0;a[$>>2]=(Q&248|4)+(a[$>>2]|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}break}case 11:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){Q=(ne(y,l)|0)+_<<1;$=((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)|0)*3|0;e=g+($<<2)|0;a[e>>2]=(a[e>>2]|0)+((o[s+(Q|1)>>0]|0)&240|8);Q=o[s+Q>>0]|0;e=g+($+1<<2)|0;a[e>>2]=(Q<<4&240|8)+(a[e>>2]|0);$=g+($+2<<2)|0;a[$>>2]=(Q&240|8)+(a[$>>2]|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}break}default:{to(3,4615,A);G=278;break e}}while(0);y=ne(D,I)|0;if(H){_=0;do{i[v+_>>0]=((a[g+(_<<2)>>2]|0)>>>0)/(y>>>0)|0;_=_+1|0}while((_|0)<(N|0))}ja(g);g=0}else{g=Va(H,4)|0;if(!g){to(3,5472,x);bt(1)}t:do if(d>>>0<2){k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)>0){t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){Q=((ne(y,l)|0)+_|0)*3|0;$=g+((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)<<2)|0;a[$>>2]=(a[$>>2]|0)+((((o[s+(Q+1)>>0]|0)+(o[s+Q>>0]|0)+(o[s+(Q+2)>>0]|0)|0)>>>0)/3|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0))}}else{if((d&-2|0)==2){k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)<=0)break;t=(z|0)>0;E=0;while(1){w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){Q=(ne(y,l)|0)+_<<2;$=g+((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)<<2)|0;a[$>>2]=(a[$>>2]|0)+((((o[s+(Q|1)>>0]|0)+(o[s+Q>>0]|0)+(o[s+(Q|2)>>0]|0)|0)>>>0)/3|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0;if((E|0)>=(U|0))break t}}if((d&-3|0)==4){k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)<=0)break;t=(z|0)>0;E=0;while(1){w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){Q=(ne(y,l)|0)+_<<2;$=g+((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)<<2)|0;a[$>>2]=(a[$>>2]|0)+((((o[s+(Q|2)>>0]|0)+(o[s+(Q|1)>>0]|0)+(o[s+(Q|3)>>0]|0)|0)>>>0)/3|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0;if((E|0)>=(U|0))break t}}switch(d|0){case 5:case 12:case 13:case 14:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)<=0)break t;t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){Q=o[s+((ne(y,l)|0)+_)>>0]|0;$=g+((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)<<2)|0;a[$>>2]=(a[$>>2]|0)+Q}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0));break}case 7:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)<=0)break t;t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){Q=o[s+((ne(y,l)|0)+_<<1|1)>>0]|0;$=g+((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)<<2)|0;a[$>>2]=(a[$>>2]|0)+Q}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0));break}case 8:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)<=0)break t;t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){Q=o[s+((ne(y,l)|0)+_<<1)>>0]|0;$=g+((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)<<2)|0;a[$>>2]=(a[$>>2]|0)+Q}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0));break}case 9:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)<=0)break t;t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){Q=(ne(y,l)|0)+_<<1;N=o[s+Q>>0]|0;Q=o[s+(Q|1)>>0]|0;$=g+((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)<<2)|0;a[$>>2]=(a[$>>2]|0)+((((Q<<3&248|4)+(N&248|4)+(N<<5&224|Q>>>3&28|2)|0)>>>0)/3|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0));break}case 10:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)<=0)break t;t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){Q=(ne(y,l)|0)+_<<1;N=o[s+Q>>0]|0;Q=o[s+(Q|1)>>0]|0;$=g+((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)<<2)|0;a[$>>2]=(a[$>>2]|0)+((((Q<<2&248|4)+(N&248|4)+(N<<5&224|Q>>>3&24|4)|0)>>>0)/3|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0));break}case 11:{k=b+100;M=+(U|0);T=+(z|0);S=B+48|0;A=B+56|0;d=B+64|0;R=B+8|0;C=B+16|0;P=B+24|0;O=B+32|0;L=B+40|0;r=(e|0)==1;if((U|0)<=0)break t;t=(z|0)>0;E=0;do{w=k+F*(+(E|0)+.5)/M;if(t){x=0;do{b=k+F*(+(x|0)+.5)/T;m=+c[d>>3]+(+c[S>>3]*b+w*+c[A>>3]);if(m==0){G=278;break e}Z=(+c[C>>3]+(b*+c[B>>3]+w*+c[R>>3]))/m;u[j>>2]=Z;b=(+c[L>>3]+(b*+c[P>>3]+w*+c[O>>3]))/m;u[V>>2]=b;Ao(p,Z,b,j,V)|0;b=+u[j>>2];if(r){_=((~~(b+1)|0)/2|0)<<1;y=((~~(+u[V>>2]+1)|0)/2|0)<<1}else{_=~~(b+.5);y=~~(+u[V>>2]+.5)}if((_|0)>-1?(y|0)<(f|0)&((y|0)>-1&(_|0)<(l|0)):0){Q=(ne(y,l)|0)+_<<1;N=o[s+Q>>0]|0;$=g+((ne((E|0)/(D|0)|0,n)|0)+((x|0)/(I|0)|0)<<2)|0;a[$>>2]=(a[$>>2]|0)+((((N<<4&240|8)+(N&240|8)+((o[s+(Q|1)>>0]|0)&240|8)|0)>>>0)/3|0)}x=x+1|0}while((x|0)<(z|0))}E=E+1|0}while((E|0)<(U|0));break}default:{to(3,4615,E);G=278;break e}}}while(0);_=ne(D,I)|0;if(H){y=0;do{i[v+y>>0]=((a[g+(y<<2)>>2]|0)>>>0)/(_>>>0)|0;y=y+1|0}while((y|0)<(H|0))}ja(g);g=0}while(0);if((G|0)==278){ja(g);g=-1}h=W;return g|0}function qa(e,t,n,r,s,l,u){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;l=l|0;u=u|0;var f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0;w=h;h=h+32|0;g=w+24|0;p=w+8|0;b=w;e:do if((t+-3|0)>>>0>5){a[n>>2]=-1;a[r>>2]=0;c[s>>3]=-1;f=-1}else{a[p>>2]=0;y=t+-1|0;a[p+4>>2]=ne(y,t)|0;v=ne(t,t)|0;a[p+8>>2]=v+-1;a[p+12>>2]=y;d=i[e+(a[p>>2]|0)>>0]|0;f=(d&255)>0?d:0;d=(d&255)<255?d:-1;_=i[e+(a[p+4>>2]|0)>>0]|0;f=(_&255)>(f&255)?_:f;d=(_&255)<(d&255)?_:d;_=i[e+(a[p+8>>2]|0)>>0]|0;f=(_&255)>(f&255)?_:f;d=(_&255)<(d&255)?_:d;_=i[e+(a[p+12>>2]|0)>>0]|0;f=((_&255)>(f&255)?_:f)&255;d=((_&255)<(d&255)?_:d)&255;if((f-d|0)<30){a[n>>2]=-1;a[r>>2]=0;c[s>>3]=-1;f=-2;break}m=(f+d|0)>>>1;i[g>>0]=(o[e+(a[p>>2]|0)>>0]|0)>>>0<m>>>0&1;i[g+1>>0]=(o[e+(a[p+4>>2]|0)>>0]|0)>>>0<m>>>0&1;i[g+2>>0]=(o[e+(a[p+8>>2]|0)>>0]|0)>>>0<m>>>0&1;i[g+3>>0]=(o[e+(a[p+12>>2]|0)>>0]|0)>>>0<m>>>0&1;d=0;while(1){f=d+1|0;if(((i[g+d>>0]|0)==1?(i[g+((f|0)%4|0)>>0]|0)==1:0)?(i[g+((d+2|0)%4|0)>>0]|0)==0:0){f=d;d=10;break}if((f|0)<4)d=f;else{d=12;break}}if((d|0)==10)a[r>>2]=f;else if((d|0)==12?(f|0)==4:0){a[n>>2]=-1;a[r>>2]=0;c[s>>3]=-1;f=-3;break}if(!v)_=255;else{f=255;d=0;do{_=e+d|0;g=o[_>>0]|0;p=g-m|0;p=(p|0)<0?0-p|0:p;f=(p|0)<(f|0)?p:f;i[_>>0]=g>>>0<m>>>0&1;d=d+1|0}while((d|0)<(v|0));_=f}switch(a[r>>2]|0){case 0:{if((t|0)>0){v=(t|0)==0;d=0;f=0;r=0;do{g=(r|0)==(y|0);m=ne(r,t)|0;if(!v){p=0;do{if((p|r|0)!=0?!(g&((p|0)==0|(p|0)==(y|0))):0){d=Yu(d|0,f|0,1)|0;d=(i[e+(p+m)>>0]|0)!=0|d;f=O}p=p+1|0}while((p|0)!=(t|0))}r=r+1|0}while((r|0)<(t|0))}else{d=0;f=0}break}case 1:{if((t|0)>0){v=(t|0)>0;d=0;f=0;r=0;do{g=(r|0)==0;m=(r|0)==(y|0);if(v){p=y;while(1){x=(p|0)==(y|0);if(!(g&x)?!(m&(x|(p|0)==0)):0){d=Yu(d|0,f|0,1)|0;d=(i[e+((ne(p,t)|0)+r)>>0]|0)!=0|d;f=O}if((p|0)>0)p=p+-1|0;else break}}r=r+1|0}while((r|0)<(t|0))}else{d=0;f=0}break}case 2:{if((t|0)>0){v=(t|0)>0;d=0;f=0;r=y;while(1){m=(r|0)==(y|0)|(r|0)==0;g=ne(r,t)|0;if(v){p=y;while(1){if(!(m&(p|0)==(y|0)|(p|r|0)==0)){d=Yu(d|0,f|0,1)|0;d=(i[e+(p+g)>>0]|0)!=0|d;f=O}if((p|0)>0)p=p+-1|0;else break}}if((r|0)>0)r=r+-1|0;else break}}else{d=0;f=0}break}case 3:{if((t|0)>0){v=(t|0)>0;d=0;f=0;r=y;while(1){g=(r|0)==(y|0);m=(r|0)==0;if(v){p=0;do{if(!(g&(p|0)==0|(p|r|0)==0|m&(p|0)==(y|0))){d=Yu(d|0,f|0,1)|0;d=(i[e+((ne(p,t)|0)+r)>>0]|0)!=0|d;f=O}p=p+1|0}while((p|0)<(t|0))}if((r|0)>0)r=r+-1|0;else break}}else{d=0;f=0}break}default:{d=0;f=0}}c[s>>3]=(_|0)>30?1:+(_|0)/30;switch(l|0){case 259:{x=i[4551+d>>0]|0;l=x<<24>>24;u=b;a[u>>2]=l;a[u+4>>2]=((l|0)<0)<<31>>31;if(x<<24>>24<0){a[n>>2]=-1;c[s>>3]=-1;f=-4;break e}break}case 515:{f=i[4423+d>>0]|0;l=f<<24>>24;x=b;a[x>>2]=l;a[x+4>>2]=((l|0)<0)<<31>>31;if(u)a[u>>2]=o[4487+d>>0];if(f<<24>>24<0){a[n>>2]=-1;c[s>>3]=-1;f=-4;break e}break}case 772:case 1028:{f=$a(l,d,f,0,b)|0;if((f|0)<0){a[n>>2]=-1;c[s>>3]=-1;f=-4;break e}if((u|0)!=0&(f|0)>0)a[u>>2]=f;break}default:{x=b;a[x>>2]=d;a[x+4>>2]=f}}a[n>>2]=a[b>>2];f=0}while(0);h=w;return f|0}function Za(e,t,n,i,r,s,l){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0;A=h;h=h+16|0;u=A+8|0;d=A;e:do if(!e){a[r>>2]=0;a[s>>2]=0;c[l>>3]=-1;t=-1}else switch(t|0){case 0:{p=ne(i,i)|0;M=p*3|0;T=Ba(p*12|0)|0;if(!T){to(3,5472,d);bt(1)}if(!p)t=0;else{t=0;u=0;do{t=((o[n+u>>0]|0)^255)+t|0;u=u+1|0}while((u|0)<(M|0))}u=(t|0)/(M|0)|0;if(!p)f=0;else{d=0;t=0;do{E=((o[n+d>>0]|0)^255)-u|0;a[T+(d<<2)>>2]=E;t=(ne(E,E)|0)+t|0;d=d+1|0}while((d|0)<(M|0));f=+(t|0)}k=+G(+f);if(k/(+(i|0)*1.7320508)<15){a[r>>2]=0;a[s>>2]=0;c[l>>3]=-1;ja(T);t=-2;break e}w=a[e>>2]|0;x=e+12|0;E=e+16|0;if((w|0)>0){b=a[e+8>>2]|0;_=(p|0)==0;d=-1;y=0;f=0;u=-1;t=-1;do{t:while(1){d=d+1|0;switch(a[b+(d<<2)>>2]|0){case 0:break;case 2:break t;default:{S=17;break t}}}if((S|0)==17){S=0;g=d<<2;m=a[E>>2]|0;v=0;do{e=v+g|0;if(_)p=0;else{n=a[(a[x>>2]|0)+(e<<2)>>2]|0;i=0;p=0;do{p=(ne(a[n+(i<<2)>>2]|0,a[T+(i<<2)>>2]|0)|0)+p|0;i=i+1|0}while((i|0)<(M|0))}R=+(p|0)/+c[m+(e<<3)>>3]/k;e=R>f;u=e?v:u;t=e?d:t;f=e?R:f;v=v+1|0}while((v|0)!=4)}y=y+1|0}while((y|0)<(w|0))}else{f=0;u=-1;t=-1}a[s>>2]=u;a[r>>2]=t;c[l>>3]=f;ja(T);t=0;break e}case 1:{M=ne(i,i)|0;T=Ba(M<<2)|0;if(!T){to(3,5472,u);bt(1)}if(!M)t=0;else{t=0;u=0;do{t=((o[n+u>>0]|0)^255)+t|0;u=u+1|0}while((u|0)<(M|0))}u=(t|0)/(M|0)|0;if(!M)f=0;else{d=0;t=0;do{E=((o[n+d>>0]|0)^255)-u|0;a[T+(d<<2)>>2]=E;t=(ne(E,E)|0)+t|0;d=d+1|0}while((d|0)<(M|0));f=+(t|0)}k=+G(+f);if(k/+(i|0)<15){a[r>>2]=0;a[s>>2]=0;c[l>>3]=-1;ja(T);t=-2;break e}w=a[e>>2]|0;x=e+20|0;E=e+24|0;if((w|0)>0){_=a[e+8>>2]|0;y=(M|0)==0;d=-1;b=0;f=0;u=-1;t=-1;do{t:while(1){d=d+1|0;switch(a[_+(d<<2)>>2]|0){case 0:break;case 2:break t;default:{S=37;break t}}}if((S|0)==37){S=0;g=d<<2;m=a[E>>2]|0;v=0;do{e=v+g|0;if(y)p=0;else{n=a[(a[x>>2]|0)+(e<<2)>>2]|0;i=0;p=0;do{p=(ne(a[n+(i<<2)>>2]|0,a[T+(i<<2)>>2]|0)|0)+p|0;i=i+1|0}while((i|0)<(M|0))}R=+(p|0)/+c[m+(e<<3)>>3]/k;e=R>f;u=e?v:u;t=e?d:t;f=e?R:f;v=v+1|0}while((v|0)!=4)}b=b+1|0}while((b|0)<(w|0))}else{f=0;u=-1;t=-1}a[s>>2]=u;a[r>>2]=t;c[l>>3]=f;ja(T);t=0;break e}default:{t=-1;break e}}while(0);h=A;return t|0}function Qa(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,s=0,l=0,u=0,h=0,f=0,d=0,p=0,g=0;i=oo(8,8)|0;r=oo(8,1)|0;o=oo(8,1)|0;s=a[i>>2]|0;l=a[r>>2]|0;u=0;do{g=e+(u<<4)|0;h=u<<4;c[s+(h<<3)>>3]=+c[g>>3];p=e+(u<<4)+8|0;c[s+((h|1)<<3)>>3]=+c[p>>3];c[s+((h|2)<<3)>>3]=1;c[s+((h|3)<<3)>>3]=0;c[s+((h|4)<<3)>>3]=0;c[s+((h|5)<<3)>>3]=0;d=t+(u<<4)|0;c[s+((h|6)<<3)>>3]=-(+c[g>>3]*+c[d>>3]);c[s+((h|7)<<3)>>3]=-(+c[p>>3]*+c[d>>3]);c[s+((h|8)<<3)>>3]=0;c[s+((h|9)<<3)>>3]=0;c[s+((h|10)<<3)>>3]=0;c[s+((h|11)<<3)>>3]=+c[g>>3];c[s+((h|12)<<3)>>3]=+c[p>>3];c[s+((h|13)<<3)>>3]=1;f=t+(u<<4)+8|0;c[s+((h|14)<<3)>>3]=-(+c[g>>3]*+c[f>>3]);c[s+((h|15)<<3)>>3]=-(+c[p>>3]*+c[f>>3]);h=u<<1;c[l+(h<<3)>>3]=+c[d>>3];c[l+((h|1)<<3)>>3]=+c[f>>3];u=u+1|0}while((u|0)!=4);mo(i)|0;fo(o,i,r)|0;g=a[o>>2]|0;c[n>>3]=+c[g>>3];c[n+8>>3]=+c[g+8>>3];c[n+16>>3]=+c[g+16>>3];g=a[o>>2]|0;c[n+24>>3]=+c[g+24>>3];c[n+32>>3]=+c[g+32>>3];c[n+40>>3]=+c[g+40>>3];g=a[o>>2]|0;c[n+48>>3]=+c[g+48>>3];c[n+56>>3]=+c[g+56>>3];c[n+64>>3]=1;ho(i)|0;ho(r)|0;ho(o)|0;return}function $a(e,t,n,r,s){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;var l=0,u=0,c=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,L=0,N=0;N=h;h=h+2320|0;u=N+2304|0;k=N+864|0;b=N+784|0;L=N+704|0;x=N+624|0;w=N+548|0;P=N+40|0;R=N;switch(e|0){case 772:{r=9;l=1;c=3;break}case 1028:{r=5;l=2;c=3;break}case 2830:{T=900;_=1472;A=64;C=120;M=127;S=r;l=9;c=6;break}default:n=-1}if((c|0)==3){e=0;while(1){i[u+e>>0]=t&1;t=Zu(t|0,n|0,1)|0;e=e+1|0;if((e|0)==13)break;else n=O}T=840;_=1408;A=r;C=13;M=15;S=u;c=6}do if((c|0)==6){v=l<<1;u=1;n=0;while(1){r=w+(u<<2)|0;a[r>>2]=0;e=0;t=0;do{if(i[S+t>>0]|0){e=e^a[T+(((ne(t,u)|0)%(M|0)|0)<<2)>>2];a[r>>2]=e}t=t+1|0}while((t|0)<(C|0));n=(e|0)==0?n:1;a[r>>2]=a[_+(e<<2)>>2];if((u|0)<(v|0))u=u+1|0;else break}E=(n|0)!=0;if(E){a[b>>2]=0;n=a[w+4>>2]|0;a[b+4>>2]=n;a[k>>2]=0;a[k+72>>2]=1;if((v|0)>1){e=1;do{a[k+(e<<2)>>2]=-1;a[k+72+(e<<2)>>2]=0;e=e+1|0}while((e|0)<(v|0))}a[L>>2]=0;a[L+4>>2]=0;a[x>>2]=-1;a[x+4>>2]=0;g=0;m=0;while(1){r=m;m=m+1|0;p=b+(m<<2)|0;if((n|0)==-1){u=r+2|0;a[L+(u<<2)>>2]=g;if((g|0)<0)d=g;else{n=0;while(1){p=k+(m*72|0)+(n<<2)|0;d=a[p>>2]|0;a[k+(u*72|0)+(n<<2)>>2]=d;a[p>>2]=a[_+(d<<2)>>2];if((n|0)<(g|0))n=n+1|0;else{d=g;break}}}}else{e=r;while(1){n=(e|0)>0;if(n&(a[b+(e<<2)>>2]|0)==-1)e=e+-1|0;else break}if(n){t=e;do{n=t;t=t+-1|0;if((a[b+(t<<2)>>2]|0)!=-1)e=(a[x+(e<<2)>>2]|0)<(a[x+(t<<2)>>2]|0)?t:e}while((n|0)>1)}t=L+(e<<2)|0;f=m-e|0;d=f+(a[t>>2]|0)|0;u=r+2|0;d=(g|0)>(d|0)?g:d;a[L+(u<<2)>>2]=d;n=0;do{a[k+(u*72|0)+(n<<2)>>2]=0;n=n+1|0}while((n|0)<(v|0));n=a[t>>2]|0;t=b+(e<<2)|0;if((n|0)>=0){c=0;while(1){r=a[k+(e*72|0)+(c<<2)>>2]|0;if((r|0)!=-1)a[k+(u*72|0)+(f+c<<2)>>2]=a[T+(((r+M+(a[p>>2]|0)-(a[t>>2]|0)|0)%(M|0)|0)<<2)>>2];if((c|0)<(n|0))c=c+1|0;else break}}if((g|0)>=0){n=0;while(1){p=k+(m*72|0)+(n<<2)|0;f=a[p>>2]|0;c=k+(u*72|0)+(n<<2)|0;a[c>>2]=a[c>>2]^f;a[p>>2]=a[_+(f<<2)>>2];if((n|0)<(g|0))n=n+1|0;else break}}}a[x+(u<<2)>>2]=m-d;if((m|0)>=(v|0))break;n=a[w+(u<<2)>>2]|0;if((n|0)==-1)n=0;else n=a[T+(n<<2)>>2]|0;r=b+(u<<2)|0;a[r>>2]=n;if((d|0)>=1){t=1;while(1){e=a[w+(u-t<<2)>>2]|0;if((e|0)!=-1?(y=a[k+(u*72|0)+(t<<2)>>2]|0,(y|0)!=0):0){n=n^a[T+((((a[_+(y<<2)>>2]|0)+e|0)%(M|0)|0)<<2)>>2];a[r>>2]=n}if((t|0)<(d|0))t=t+1|0;else break}}n=a[_+(n<<2)>>2]|0;a[r>>2]=n;if((d|0)>(l|0))break;else g=d}if((d|0)>(l|0)){n=-1;break}if((d|0)>=0){n=0;while(1){x=k+(u*72|0)+(n<<2)|0;a[x>>2]=a[_+(a[x>>2]<<2)>>2];if((n|0)<(d|0))n=n+1|0;else break}}if((d|0)>=1){n=1;while(1){a[R+(n<<2)>>2]=a[k+(u*72|0)+(n<<2)>>2];if((n|0)<(d|0))n=n+1|0;else break}}c=(d|0)<1;n=0;f=1;do{if(c)e=1;else{l=1;e=1;while(1){t=R+(l<<2)|0;r=a[t>>2]|0;if((r|0)!=-1){k=(r+l|0)%(M|0)|0;a[t>>2]=k;e=a[T+(k<<2)>>2]^e}if((l|0)<(d|0))l=l+1|0;else break}}if(!e){a[P+(n<<2)>>2]=M-f;n=n+1|0}f=f+1|0}while((M|0)>=(f|0));if((n|0)!=(d|0)){n=-1;break}if((d|0)>0){n=0;do{R=S+(a[P+(n<<2)>>2]|0)|0;i[R>>0]=o[R>>0]^1;n=n+1|0}while((n|0)<(d|0))}}else u=0;e=s;a[e>>2]=0;
a[e+4>>2]=0;e=1;t=0;r=0;l=0;n=C-A|0;while(1){P=nc(o[S+n>>0]|0,0,e|0,t|0)|0;r=qu(P|0,O|0,r|0,l|0)|0;l=O;P=s;a[P>>2]=r;a[P+4>>2]=l;e=Yu(e|0,t|0,1)|0;n=n+1|0;if((n|0)>=(C|0))break;else t=O}if(E)n=a[L+(u<<2)>>2]|0;else n=0}while(0);h=N;return n|0}function Ja(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0;T=h;h=h+32|0;M=T+24|0;o=T+16|0;n=T+8|0;do if(e){if(!t){to(3,4674,n);n=-1;break}k=e+8|0;r=a[e+4>>2]|0;e:do if((r|0)>0){i=a[k>>2]|0;n=0;do{if(!(a[i+(n<<2)>>2]|0))break e;n=n+1|0}while((n|0)<(r|0))}else n=0;while(0);if((n|0)!=(r|0)){E=wa(t)|0;if(!E){to(3,4719,o);n=-1;break}v=e+28|0;_=n<<2;y=e+12|0;b=e+20|0;w=e+16|0;x=e+24|0;r=Sa(E,4742)|0;i=0;e:while(1){m=i+_|0;g=0;t=0;do{d=(g|0)==0;p=(g|0)==2;o=a[v>>2]|0;if((o|0)>0){f=0;do{if((o|0)>0){u=0;do{if(!r){i=17;break e}o=ha(r)|0;r=Sa(0,4742)|0;o=255-o|0;l=(((ne(a[v>>2]|0,f)|0)+u|0)*3|0)+g|0;a[(a[(a[y>>2]|0)+(m<<2)>>2]|0)+(l<<2)>>2]=o;l=(ne(a[v>>2]|0,f)|0)+u|0;s=a[(a[b>>2]|0)+(m<<2)>>2]|0;l=s+(l<<2)|0;if(!d){a[l>>2]=(a[l>>2]|0)+o;if(p){l=s+((ne(a[v>>2]|0,f)|0)+u<<2)|0;a[l>>2]=(a[l>>2]|0)/3|0}}else a[l>>2]=o;t=o+t|0;u=u+1|0;o=a[v>>2]|0}while((u|0)<(o|0))}f=f+1|0}while((f|0)<(o|0))}g=g+1|0}while((g|0)<3);o=a[v>>2]|0;u=(t|0)/(ne(o*3|0,o)|0)|0;if((ne(o*3|0,o)|0)>0){s=a[(a[y>>2]|0)+(m<<2)>>2]|0;l=0;t=0;do{g=s+(l<<2)|0;o=(a[g>>2]|0)-u|0;a[g>>2]=o;t=(ne(o,o)|0)+t|0;l=l+1|0;o=a[v>>2]|0}while((l|0)<(ne(o*3|0,o)|0))}else t=0;S=+G(+ +(t|0));c[(a[w>>2]|0)+(m<<3)>>3]=S==0?1e-7:S;if(!(ne(o,o)|0))t=0;else{o=a[(a[b>>2]|0)+(m<<2)>>2]|0;s=0;t=0;do{p=o+(s<<2)|0;g=(a[p>>2]|0)-u|0;a[p>>2]=g;t=(ne(g,g)|0)+t|0;s=s+1|0;g=a[v>>2]|0}while((s|0)<(ne(g,g)|0))}S=+G(+ +(t|0));c[(a[x>>2]|0)+(m<<3)>>3]=S==0?1e-7:S;i=i+1|0;if((i|0)>=4){i=32;break}}if((i|0)==17){to(3,4747,M);ja(E);n=-1;break}else if((i|0)==32){ja(E);a[(a[k>>2]|0)+(n<<2)>>2]=1;a[e>>2]=(a[e>>2]|0)+1;break}}else n=-1}else{to(3,4649,T);n=-1}while(0);h=T;return n|0}function Ka(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,s=0,l=0,u=0;u=h;h=h+32|0;l=u+16|0;s=u+8|0;n=u;o=Yr(t,4854)|0;do if(o){Jr(o,0,2)|0;n=ta(o)|0;Jr(o,0,0)|0;r=Ba(n+1|0)|0;if(!r){to(3,5472,s);Vr(o)|0;n=-1;break}s=Zr(r,n,1,o)|0;Vr(o)|0;if(!s){a[l>>2]=t;to(3,4820,l);ja(r);n=-1;break}else{i[r+n>>0]=0;n=Ja(e,r)|0;ja(r);break}}else{a[n>>2]=t;to(3,4774,n);n=-1}while(0);h=u;return n|0}function eo(e,t){e=e|0;t=t|0;t=(a[e+8>>2]|0)+(t<<2)|0;if(!(a[t>>2]|0))t=-1;else{a[t>>2]=0;a[e>>2]=(a[e>>2]|0)+-1;t=1}return t|0}function to(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,s=0,l=0;l=h;h=h+32|0;s=l+16|0;r=l;a[s>>2]=0;if(((t|0)!=0&(a[496]|0)<=(e|0)?(i[t>>0]|0)!=0:0)?(a[r>>2]=n,o=oa(s,t,r)|0,(o|0)>-1):0){r=a[497]|0;do if(r){if(!(a[498]|0)){Gc[r&15](a[s>>2]|0);break}n=ut()|0;e=a[500]|0;if((n|0)==(a[499]|0)){if((e|0)>0){Gc[r&15](a[502]|0);a[500]=0;r=a[497]|0}Gc[r&15](a[s>>2]|0);break}r=a[501]|0;if((e|0)<(r|0)){t=(a[502]|0)+e|0;if((o|0)<(-3-e+r|0)){ya(t,a[s>>2]|0)|0;a[500]=(a[500]|0)+o;break}else{i[t>>0]=46;i[t+1>>0]=46;i[t+2>>0]=46;i[t+3>>0]=0;a[500]=a[501];break}}}else qr(a[s>>2]|0,a[659]|0)|0;while(0);ja(a[s>>2]|0)}h=l;return}function no(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,a=0,o=0,s=0;s=0;do{i=e+(s<<5)|0;r=e+(s<<5)+8|0;a=e+(s<<5)+16|0;o=0;do{c[n+(s<<5)+(o<<3)>>3]=+c[i>>3]*+c[t+(o<<3)>>3]+ +c[r>>3]*+c[t+32+(o<<3)>>3]+ +c[a>>3]*+c[t+64+(o<<3)>>3];o=o+1|0}while((o|0)!=4);o=n+(s<<5)+24|0;c[o>>3]=+c[e+(s<<5)+24>>3]+ +c[o>>3];s=s+1|0}while((s|0)!=3);return 0}function io(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,u=0;l=oo(4,4)|0;n=a[l>>2]|0;i=a[l>>2]|0;r=a[l>>2]|0;o=a[l>>2]|0;s=0;do{u=s<<2;c[n+(u<<3)>>3]=+c[e+(s<<5)>>3];c[i+(1+u<<3)>>3]=+c[e+(s<<5)+8>>3];c[r+(2+u<<3)>>3]=+c[e+(s<<5)+16>>3];c[o+(3+u<<3)>>3]=+c[e+(s<<5)+24>>3];s=s+1|0}while((s|0)!=3);n=a[l>>2]|0;i=n+96|0;a[i>>2]=0;a[i+4>>2]=0;a[i+8>>2]=0;a[i+12>>2]=0;a[i+16>>2]=0;a[i+20>>2]=0;c[n+120>>3]=1;mo(l)|0;n=a[l>>2]|0;i=a[l>>2]|0;r=a[l>>2]|0;o=a[l>>2]|0;s=0;do{u=s<<2;c[t+(s<<5)>>3]=+c[n+(u<<3)>>3];c[t+(s<<5)+8>>3]=+c[i+(1+u<<3)>>3];c[t+(s<<5)+16>>3]=+c[r+(2+u<<3)>>3];c[t+(s<<5)+24>>3]=+c[o+(3+u<<3)>>3];s=s+1|0}while((s|0)!=3);ho(l)|0;return 0}function ro(e){e=e|0;switch(e|0){case 1:case 0:{e=3;break}case 6:case 4:case 3:case 2:{e=4;break}case 14:case 13:case 12:case 5:{e=1;break}case 11:case 10:case 9:case 8:case 7:{e=2;break}default:e=0}return e|0}function ao(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var a=0;do if((e|0)!=0&(t|0)!=0&(n|0)!=0){a=Ma(t,47)|0;if(!a){i[e>>0]=0;break}a=a+((r|0)!=0&1)-t|0;if((a+1|0)>>>0<=n>>>0){ka(e,t,a)|0;i[e+a>>0]=0}else e=0}else e=0;while(0);return e|0}function oo(e,t){e=e|0;t=t|0;var n=0,i=0;n=Ba(12)|0;do if(n){i=Ba(ne(e<<3,t)|0)|0;a[n>>2]=i;if(!i){ja(n);n=0;break}else{a[n+4>>2]=e;a[n+8>>2]=t;break}}else n=0;while(0);return n|0}function so(e){e=e|0;var t=0;t=oo(a[e+4>>2]|0,a[e+8>>2]|0)|0;if(t){if((co(t,e)|0)<0){ho(t)|0;t=0}}else t=0;return t|0}function lo(e,t){e=e|0;t=t|0;var n=0;n=oo(a[e+4>>2]|0,a[t+8>>2]|0)|0;if(n){if((fo(n,e,t)|0)<0){ho(n)|0;n=0}}else n=0;return n|0}function uo(e){e=e|0;var t=0;t=oo(a[e+8>>2]|0,a[e+4>>2]|0)|0;if(t){if((vo(t,e)|0)<0){ho(t)|0;t=0}}else t=0;return t|0}function co(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,u=0,h=0,f=0;n=a[e+4>>2]|0;if((n|0)==(a[t+4>>2]|0)?(l=a[e+8>>2]|0,(l|0)==(a[t+8>>2]|0)):0)if((n|0)>0){i=(l|0)>0;h=0;do{r=ne(l,h)|0;if(i){o=a[t>>2]|0;s=a[e>>2]|0;u=0;do{f=r+u|0;c[s+(f<<3)>>3]=+c[o+(f<<3)>>3];u=u+1|0}while((u|0)<(l|0))}h=h+1|0}while((h|0)<(n|0));n=0}else n=0;else n=-1;return n|0}function ho(e){e=e|0;if(e){ja(a[e>>2]|0);ja(e)}return 0}function fo(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,s=0,l=0,u=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0;d=a[t+8>>2]|0;if(((d|0)==(a[n+4>>2]|0)?(v=a[e+4>>2]|0,(v|0)==(a[t+4>>2]|0)):0)?(p=a[e+8>>2]|0,(p|0)==(a[n+8>>2]|0)):0){_=(p|0)>0?p:0;if((v|0)>0){g=(p|0)>0;m=(d|0)>0;u=a[e>>2]|0;f=0;while(1){e=ne(d,f)|0;if(g){r=0;h=u;while(1){c[h>>3]=0;if(m){i=0;o=0;s=(a[t>>2]|0)+(e<<3)|0;l=(a[n>>2]|0)+(r<<3)|0;while(1){i=i+ +c[s>>3]*+c[l>>3];c[h>>3]=i;o=o+1|0;if((o|0)>=(d|0))break;else{s=s+8|0;l=l+(p<<3)|0}}}r=r+1|0;if((r|0)>=(p|0))break;else h=h+8|0}}f=f+1|0;if((f|0)>=(v|0)){e=0;break}else u=u+(_<<3)|0}}else e=0}else e=-1;return e|0}function po(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,s=0,l=0,u=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0;m=a[e+4>>2]|0;_=a[e+8>>2]|0;r=(m|0)<(_|0)?m:_;e:do if(((((!((m|0)<2|(_|0)<2)?(a[t+8>>2]|0)==(_|0):0)?(a[t+4>>2]|0)==(r|0):0)?(y=n+4|0,(a[y>>2]|0)==(r|0)):0)?(o=i+4|0,(a[o>>2]|0)==(_|0)):0)?(b=so(e)|0,(b|0)!=0):0){v=+G(+ +(m|0));p=a[b+4>>2]|0;g=a[b+8>>2]|0;if(!((p|0)<1|(g|0)<1)?(a[o>>2]|0)==(g|0):0){if(g){r=a[i>>2]|0;e=0;do{c[r+(e<<3)>>3]=0;e=e+1|0}while((e|0)!=(g|0))}d=a[b>>2]|0;if(p){r=(g|0)==0;e=0;l=d;while(1){if(!r){o=0;u=l;h=a[i>>2]|0;while(1){c[h>>3]=+c[u>>3]+ +c[h>>3];o=o+1|0;if((o|0)==(g|0))break;else{u=u+8|0;h=h+8|0}}}e=e+1|0;if((e|0)==(p|0))break;else l=l+(g<<3)|0}}s=+(p|0);if(g){r=a[i>>2]|0;e=0;do{f=r+(e<<3)|0;c[f>>3]=+c[f>>3]/s;e=e+1|0}while((e|0)!=(g|0))}h=(g|0)>0?g:0;if((p|0)>0){r=(g|0)>0;e=0;l=d;while(1){if(r){o=0;u=l;f=a[i>>2]|0;while(1){c[u>>3]=+c[u>>3]-+c[f>>3];o=o+1|0;if((o|0)>=(g|0))break;else{u=u+8|0;f=f+8|0}}}e=e+1|0;if((e|0)>=(p|0))break;else l=l+(h<<3)|0}}r=ne(_,m)|0;if((r|0)>0){e=0;do{i=d+(e<<3)|0;c[i>>3]=+c[i>>3]/v;e=e+1|0}while((e|0)<(r|0))}r=go(b,t,n)|0;ho(b)|0;l=a[y>>2]|0;if((l|0)>0){e=a[n>>2]|0;o=0;s=0;do{s=s+ +c[e+(o<<3)>>3];o=o+1|0}while((o|0)<(l|0))}else s=0;if((l|0)<=0)break;e=a[n>>2]|0;o=0;while(1){n=e+(o<<3)|0;c[n>>3]=+c[n>>3]/s;o=o+1|0;if((o|0)>=(l|0))break e}}ho(b)|0;r=-1}else r=-1;while(0);return r|0}function go(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,O=0,L=0,N=0,F=0,D=0,I=0,U=0,H=0,z=0,B=0,j=0,W=0,X=0,Y=0,q=0,Z=0,Q=0,$=0;X=h;h=h+16|0;x=X;P=e+4|0;N=a[P>>2]|0;F=e+8|0;D=a[F>>2]|0;j=(D|0)<(N|0)?D:N;e:do if(((!((N|0)<2|(D|0)<2)?(B=t+8|0,(a[B>>2]|0)==(D|0)):0)?(I=t+4|0,(a[I>>2]|0)==(j|0)):0)?(U=n+4|0,(a[U>>2]|0)==(j|0)):0){W=oo(j,j)|0;H=W+4|0;if((a[H>>2]|0)==(j|0)?(z=W+8|0,(a[z>>2]|0)==(j|0)):0){O=(N|0)<(D|0);_=a[P>>2]|0;y=a[F>>2]|0;if(O){if((j|0)!=(_|0)){ho(W)|0;i=-1;break}o=a[W>>2]|0;if((j|0)>0){f=(j|0)==0;s=(y|0)>0;d=0;v=o;while(1){u=ne(d,y)|0;if(!f){g=0;_=v;while(1){if((g|0)>=(d|0)){i=a[e>>2]|0;c[_>>3]=0;if(s){l=0;p=i+(u<<3)|0;i=i+((ne(g,y)|0)<<3)|0;r=0;while(1){l=l+ +c[p>>3]*+c[i>>3];c[_>>3]=l;r=r+1|0;if((r|0)>=(y|0))break;else{p=p+8|0;i=i+8|0}}}}else c[_>>3]=+c[o+((ne(g,j)|0)+d<<3)>>3];g=g+1|0;if((g|0)==(j|0))break;else _=_+8|0}}d=d+1|0;if((d|0)>=(j|0))break;else v=v+(j<<3)|0}}}else{if((j|0)!=(y|0)){ho(W)|0;i=-1;break}o=a[W>>2]|0;if((j|0)>0){u=(j|0)==0;s=(_|0)>0;f=0;g=o;while(1){if(!u){p=0;v=g;while(1){if((p|0)>=(f|0)){i=a[e>>2]|0;c[v>>3]=0;if(s){l=0;d=i+(f<<3)|0;i=i+(p<<3)|0;r=0;while(1){l=l+ +c[d>>3]*+c[i>>3];c[v>>3]=l;r=r+1|0;if((r|0)>=(_|0))break;else{d=d+(j<<3)|0;i=i+(j<<3)|0}}}}else c[v>>3]=+c[o+((ne(p,j)|0)+f<<3)>>3];p=p+1|0;if((p|0)==(j|0))break;else v=v+8|0}}f=f+1|0;if((f|0)>=(j|0))break;else g=g+(j<<3)|0}}}do if(((j|0)>=2?(a[U>>2]|0)==(j|0):0)?(L=Co(j)|0,(L|0)!=0):0){C=j+-1|0;a[x+4>>2]=C;a[x>>2]=(a[L>>2]|0)+8;if((No(W,n,x)|0)<0){Po(L)|0;break}S=a[L>>2]|0;c[S>>3]=0;if((C|0)>0){A=(j|0)==0;R=C;do{r=R;while(1){if((r|0)<=0)break;w=+V(+ +c[S+(r<<3)>>3]);i=r+-1|0;T=a[n>>2]|0;E=+V(+ +c[T+(i<<3)>>3]);if(w>(E+ +V(+ +c[T+(r<<3)>>3]))*1e-6)r=i;else break}k=R;R=R+-1|0;t:do if((r|0)!=(k|0)){p=S+(k<<3)|0;g=S+(r+1<<3)|0;v=(r|0)<(k|0);M=0;do{if((M|0)>99)break t;M=M+1|0;_=a[n>>2]|0;y=_+(R<<3)|0;x=_+(k<<3)|0;l=+c[x>>3];m=(+c[y>>3]-l)*.5;b=+c[p>>3];b=b*b;w=+G(+(b+m*m));if(v){T=r;m=+c[_+(r<<3)>>3]-l+b/(m+(m<0?-w:w));b=+c[g>>3];while(1){l=+V(+m);do if(!(l>=+V(+b))){w=-m/b;E=1/+G(+(w*w+1));w=w*E}else{if(!(l>1e-16)){w=1;E=0;break}l=-b/m;E=1/+G(+(l*l+1));w=E;E=l*E}while(0);s=_+(T<<3)|0;Z=+c[s>>3];d=T;T=T+1|0;u=_+(T<<3)|0;q=+c[u>>3];l=Z-q;f=S+(T<<3)|0;Y=E*(E*l+w*2*+c[f>>3]);c[s>>3]=Z-Y;c[u>>3]=q+Y;if((d|0)>(r|0)){u=S+(d<<3)|0;c[u>>3]=w*+c[u>>3]-b*E}Z=+c[f>>3];c[f>>3]=Z+E*(w*l-E*2*Z);s=ne(d,j)|0;u=ne(T,j)|0;if(A)l=b;else{i=a[W>>2]|0;o=0;do{$=i+(o+s<<3)|0;m=+c[$>>3];Q=i+(o+u<<3)|0;l=+c[Q>>3];c[$>>3]=w*m-E*l;c[Q>>3]=E*m+w*l;o=o+1|0}while((o|0)!=(j|0))}if((d|0)<(R|0)){m=+c[f>>3];$=S+(d+2<<3)|0;l=+c[$>>3];c[$>>3]=w*l;l=-(E*l)}if((T|0)>=(k|0))break;else b=l}}q=+V(+ +c[p>>3]);Z=+V(+ +c[y>>3])}while(q>(Z+ +V(+ +c[x>>3]))*1e-6)}while(0)}while((k|0)>1)}if(C){u=a[n>>2]|0;f=a[W>>2]|0;d=(j|0)==0;p=0;do{o=u+(p<<3)|0;m=+c[o>>3];s=p;p=p+1|0;if((p|0)<(j|0)){i=s;r=p;l=m;do{Z=+c[u+(r<<3)>>3];$=Z>l;l=$?Z:l;i=$?r:i;r=r+1|0}while((r|0)<(j|0))}else{i=s;l=m}c[u+(i<<3)>>3]=m;c[o>>3]=l;if(!d){o=0;r=f+((ne(i,j)|0)<<3)|0;i=f+((ne(s,j)|0)<<3)|0;while(1){Z=+c[r>>3];c[r>>3]=+c[i>>3];c[i>>3]=Z;o=o+1|0;if((o|0)==(j|0))break;else{r=r+8|0;i=i+8|0}}}}while((p|0)!=(C|0))}Po(L)|0;t:do if(!O){o=a[t>>2]|0;g=(N|0)>(D|0)?D:N;n:do if((j|0)>0){f=a[n>>2]|0;d=(g|0)==0;i=0;p=a[W>>2]|0;do{if(+c[f+(i<<3)>>3]<1e-16)break n;if(!d){r=0;s=p;u=o;while(1){c[u>>3]=+c[s>>3];r=r+1|0;if((r|0)==(g|0))break;else{s=s+8|0;u=u+8|0}}}p=p+(g<<3)|0;o=o+(g<<3)|0;i=i+1|0}while((i|0)<(j|0))}else i=0;while(0);d=(g|0)>0?g:0;if((i|0)<(j|0)){u=a[n>>2]|0;f=(j|0)>0;while(1){c[u+(i<<3)>>3]=0;if(f){r=0;s=o;while(1){c[s>>3]=0;r=r+1|0;if((r|0)>=(j|0))break;else s=s+8|0}}i=i+1|0;if((i|0)>=(j|0))break;else o=o+(d<<3)|0}}}else{x=a[P>>2]|0;y=a[F>>2]|0;do if(!((x|0)<1|(y|0)<1)){if((a[H>>2]|0)!=(x|0))break;if((a[z>>2]|0)!=(x|0))break;if((a[I>>2]|0)!=(x|0))break;if((a[B>>2]|0)!=(y|0))break;if((a[U>>2]|0)!=(x|0))break;r=a[t>>2]|0;n:do if((x|0)>0){g=a[n>>2]|0;_=(y|0)==0;v=(x|0)==0;i=0;do{l=+c[g+(i<<3)>>3];if(l<1e-16)break n;m=1/+G(+ +V(+l));f=ne(i,x)|0;if(!_){d=0;p=r;while(1){if(v)l=0;else{o=0;s=(a[W>>2]|0)+(f<<3)|0;u=(a[e>>2]|0)+(d<<3)|0;l=0;while(1){l=l+ +c[s>>3]*+c[u>>3];o=o+1|0;if((o|0)==(x|0))break;else{s=s+8|0;u=u+(y<<3)|0}}}c[p>>3]=m*l;d=d+1|0;if((d|0)==(y|0))break;else p=p+8|0}}r=r+(y<<3)|0;i=i+1|0}while((i|0)<(x|0))}else i=0;while(0);d=(y|0)>0?y:0;if((i|0)>=(x|0))break t;u=a[n>>2]|0;f=(y|0)>0;o=r;while(1){c[u+(i<<3)>>3]=0;if(f){r=0;s=o;while(1){c[s>>3]=0;r=r+1|0;if((r|0)>=(y|0))break;else s=s+8|0}}i=i+1|0;if((i|0)>=(x|0))break t;else o=o+(d<<3)|0}}while(0);ho(W)|0;i=-1;break e}while(0);ho(W)|0;i=0;break e}while(0);ho(W)|0;i=-1;break}ho(W)|0;i=-1}else i=-1;while(0);h=X;return i|0}function mo(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0;w=h;h=h+2e3|0;b=w;t=a[e>>2]|0;y=a[e+4>>2]|0;e:do if((y|0)<=500){switch(y|0){case 0:{t=0;break e}case 1:{c[t>>3]=1/+c[t>>3];break e}default:{}}if((y|0)>0){e=0;do{a[b+(e<<2)>>2]=e;e=e+1|0}while((e|0)<(y|0))}_=t+(y+-1<<3)|0;if((y|0)>0){f=(y|0)==0;g=(y|0)==1;p=(y|0)==0;d=(y|0)==1;m=_;e=0;v=0;while(1){u=t+((ne(v,y)|0)<<3)|0;if((v|0)<(y|0)){i=v;r=0;n=u;while(1){x=+V(+ +c[n>>3]);l=r<x;e=l?i:e;r=l?x:r;i=i+1|0;if((i|0)>=(y|0))break;else n=n+(y<<3)|0}}else r=0;if(r<=1e-10){t=0;break e}o=b+(e<<2)|0;s=a[o>>2]|0;l=b+(v<<2)|0;a[o>>2]=a[l>>2];a[l>>2]=s;if(!f){n=0;i=t+((ne(e,y)|0)<<3)|0;o=u;while(1){x=+c[i>>3];c[i>>3]=+c[o>>3];c[o>>3]=x;n=n+1|0;if((n|0)==(y|0))break;else{i=i+8|0;o=o+8|0}}}r=+c[u>>3];if(!g){n=1;i=u;do{l=i;i=i+8|0;c[l>>3]=+c[i>>3]/r;n=n+1|0}while((n|0)!=(y|0))}c[m>>3]=1/r;if(!p){o=0;s=_;while(1){if((o|0)!=(v|0)){n=t+((ne(o,y)|0)<<3)|0;r=+c[n>>3];if(!d){l=1;i=u;while(1){E=n;n=n+8|0;c[E>>3]=+c[n>>3]-r*+c[i>>3];l=l+1|0;if((l|0)==(y|0))break;else i=i+8|0}}c[s>>3]=-(r*+c[m>>3])}o=o+1|0;if((o|0)==(y|0))break;else s=s+(y<<3)|0}}v=v+1|0;if((v|0)>=(y|0))break;else m=m+(y<<3)|0}}if((y|0)>0){o=(y|0)>0;s=0;do{e=b+(s<<2)|0;t:do if((s|0)<(y|0)){n=s;do{if((a[e>>2]|0)==(s|0))break t;n=n+1|0;e=b+(n<<2)|0}while((n|0)<(y|0))}else n=s;while(0);a[e>>2]=a[b+(s<<2)>>2];if(o){i=0;e=t+(n<<3)|0;n=t+(s<<3)|0;while(1){x=+c[e>>3];c[e>>3]=+c[n>>3];c[n>>3]=x;i=i+1|0;if((i|0)>=(y|0))break;else{e=e+(y<<3)|0;n=n+(y<<3)|0}}}s=s+1|0}while((s|0)<(y|0))}}else t=0;while(0);h=w;return((t|0)==0)<<31>>31|0}function vo(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,u=0,h=0;s=a[e+4>>2]|0;if((s|0)==(a[t+8>>2]|0)?(u=a[e+8>>2]|0,(u|0)==(a[t+4>>2]|0)):0){h=(u|0)>0?u:0;if((s|0)>0){l=(u|0)>0;i=a[e>>2]|0;o=0;while(1){if(l){e=0;n=(a[t>>2]|0)+(o<<3)|0;r=i;while(1){c[r>>3]=+c[n>>3];e=e+1|0;if((e|0)>=(u|0))break;else{n=n+(s<<3)|0;r=r+8|0}}}o=o+1|0;if((o|0)>=(s|0)){e=0;break}else i=i+(h<<3)|0}}else e=0}else e=-1;return e|0}function _o(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,s=0;r=+(t|0)/+(a[e>>2]|0);o=+(n|0)/+(a[e+4>>2]|0);a[i>>2]=t;a[i+4>>2]=n;t=0;do{c[i+8+(t<<3)>>3]=r*+c[e+8+(t<<3)>>3];c[i+40+(t<<3)>>3]=o*+c[e+40+(t<<3)>>3];c[i+72+(t<<3)>>3]=+c[e+72+(t<<3)>>3];t=t+1|0}while((t|0)!=4);t=a[e+176>>2]|0;switch(t|0){case 4:{c[i+104>>3]=+c[e+104>>3];c[i+112>>3]=+c[e+112>>3];c[i+120>>3]=+c[e+120>>3];c[i+128>>3]=+c[e+128>>3];c[i+136>>3]=r*+c[e+136>>3];c[i+144>>3]=o*+c[e+144>>3];c[i+152>>3]=r*+c[e+152>>3];c[i+160>>3]=o*+c[e+160>>3];c[i+168>>3]=+c[e+168>>3];s=8;break}case 3:{c[i+104>>3]=r*+c[e+104>>3];c[i+112>>3]=o*+c[e+112>>3];c[i+120>>3]=+c[e+120>>3];c[i+128>>3]=+c[e+128>>3];c[i+136>>3]=+c[e+136>>3]/(r*o);c[i+144>>3]=+c[e+144>>3]/(o*(r*r*o));s=8;break}case 2:{c[i+104>>3]=r*+c[e+104>>3];c[i+112>>3]=o*+c[e+112>>3];c[i+120>>3]=+c[e+120>>3];c[i+128>>3]=+c[e+128>>3]/(r*o);c[i+136>>3]=+c[e+136>>3]/(o*(r*r*o));s=8;break}case 1:{c[i+104>>3]=r*+c[e+104>>3];c[i+112>>3]=o*+c[e+112>>3];c[i+120>>3]=+c[e+120>>3];c[i+128>>3]=+c[e+128>>3]/(r*o);s=8;break}default:t=-1}if((s|0)==8){a[i+176>>2]=t;t=0}return t|0}function yo(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,a=0,o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0;a=h;h=h+96|0;r=a;if(!(+c[e+88>>3]>=0)){i=0;do{c[r+(i<<5)>>3]=-+c[e+(i<<5)>>3];c[r+(i<<5)+8>>3]=-+c[e+(i<<5)+8>>3];c[r+(i<<5)+16>>3]=-+c[e+(i<<5)+16>>3];c[r+(i<<5)+24>>3]=-+c[e+(i<<5)+24>>3];i=i+1|0}while((i|0)!=3)}else{i=0;do{c[r+(i<<5)>>3]=+c[e+(i<<5)>>3];c[r+(i<<5)+8>>3]=+c[e+(i<<5)+8>>3];c[r+(i<<5)+16>>3]=+c[e+(i<<5)+16>>3];c[r+(i<<5)+24>>3]=+c[e+(i<<5)+24>>3];i=i+1|0}while((i|0)!=3)}c[t>>3]=0;c[t+8>>3]=0;c[t+16>>3]=0;c[t+24>>3]=0;c[t+32>>3]=0;c[t+40>>3]=0;c[t+48>>3]=0;c[t+56>>3]=0;c[t+64>>3]=0;c[t+72>>3]=0;c[t+80>>3]=0;c[t+88>>3]=0;o=+c[r+64>>3];p=+c[r+72>>3];g=+c[r+80>>3];E=+G(+(o*o+p*p+g*g));e=t+80|0;c[e>>3]=E;E=o/E;w=n+64|0;c[w>>3]=E;p=p/+c[e>>3];y=n+72|0;c[y>>3]=p;g=g/+c[e>>3];m=n+80|0;c[m>>3]=g;d=n+88|0;c[d>>3]=+c[r+88>>3]/+c[e>>3];o=+c[r+32>>3];l=+c[r+40>>3];_=+c[r+48>>3];g=E*o+p*l+g*_;f=t+48|0;c[f>>3]=g;o=o-g*+c[w>>3];l=l-g*+c[y>>3];g=_-g*+c[m>>3];_=+G(+(o*o+l*l+g*g));u=t+40|0;c[u>>3]=_;x=n+32|0;c[x>>3]=o/_;b=n+40|0;c[b>>3]=l/+c[u>>3];v=n+48|0;c[v>>3]=g/+c[u>>3];g=+c[r>>3];l=+c[r+8>>3];_=+c[r+16>>3];o=+c[w>>3]*g+ +c[y>>3]*l+ +c[m>>3]*_;i=t+16|0;c[i>>3]=o;p=+c[x>>3]*g+ +c[b>>3]*l+ +c[v>>3]*_;s=t+8|0;c[s>>3]=p;g=g-p*+c[x>>3]-o*+c[w>>3];l=l-p*+c[b>>3]-o*+c[y>>3];o=_-p*+c[v>>3]-o*+c[m>>3];p=+G(+(g*g+l*l+o*o));c[t>>3]=p;c[n>>3]=g/p;c[n+8>>3]=l/+c[t>>3];c[n+16>>3]=o/+c[t>>3];o=+c[d>>3];l=(+c[r+56>>3]-+c[f>>3]*o)/+c[u>>3];c[n+56>>3]=l;c[n+24>>3]=(+c[r+24>>3]-l*+c[s>>3]-+c[i>>3]*o)/+c[t>>3];i=0;do{x=t+(i<<5)|0;c[x>>3]=+c[x>>3]/+c[e>>3];x=t+(i<<5)+8|0;c[x>>3]=+c[x>>3]/+c[e>>3];x=t+(i<<5)+16|0;c[x>>3]=+c[x>>3]/+c[e>>3];i=i+1|0}while((i|0)!=3);h=a;return 0}function bo(e,t,n,i,r,a){e=e|0;t=+t;n=+n;i=i|0;r=r|0;a=a|0;var o=0,s=0,l=0,u=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0;switch(a|0){case 4:{m=+c[e>>3];v=+c[e+8>>3];_=+c[e+16>>3];y=+c[e+24>>3];k=+c[e+32>>3];w=+c[e+40>>3];x=+c[e+48>>3];E=+c[e+56>>3];b=+c[e+64>>3];g=(t-x)/k;l=(n-E)/w;n=g*g;s=l*l;u=_*2;h=y*6;f=y*2;d=_*6;e:do if(s!=0|n!=0){a=1;o=g;t=l;while(1){A=s+n;S=m*A+1+A*(v*A);M=n*3;T=s*M;o=o-(y*(A+n*2)+(t*(u*o)+o*S)-g)/(h*o+(u*t+(m*(s+M)+1+v*(s*s+(n*(n*5)+T)))));M=f*o;t=t-(_*(s*2+A)+t*S+t*M-l)/(d*t+(m*(n+s*3)+1+v*(s*(s*5)+(n*n+T)))+M);if((a|0)==4)break e;n=o*o;s=t*t;if(!(s!=0|n!=0)){o=0;t=0;break}else a=a+1|0}}else{o=0;t=0}while(0);c[i>>3]=x+k*o/b;c[r>>3]=E+w*t/b;a=0;break}case 3:{g=+c[e>>3];o=(t-g)/+c[e+24>>3];p=e+8|0;t=n-+c[p>>3];l=+c[e+32>>3]/1e8;u=+c[e+40>>3]/1e8/1e5;n=o*o+t*t;h=+G(+n);f=l*3;d=u*5;e:do if(h!=0){a=1;s=h;while(1){A=s-(s*(1-l*n-n*(u*n))-h)/(1-f*n-n*(d*n));o=o*A/s;t=t*A/s;if((a|0)==3)break e;n=o*o+t*t;s=+G(+n);if(!(s!=0)){o=0;t=0;break}else a=a+1|0}}else{o=0;t=0}while(0);a=e+16|0;c[i>>3]=o/+c[a>>3]+g;c[r>>3]=t/+c[a>>3]+ +c[p>>3];a=0;break}case 2:{g=+c[e>>3];o=t-g;p=e+8|0;t=n-+c[p>>3];l=+c[e+24>>3]/1e8;u=+c[e+32>>3]/1e8/1e5;n=o*o+t*t;h=+G(+n);f=l*3;d=u*5;e:do if(h!=0){a=1;s=h;while(1){A=s-(s*(1-l*n-n*(u*n))-h)/(1-f*n-n*(d*n));o=o*A/s;t=t*A/s;if((a|0)==3)break e;n=o*o+t*t;s=+G(+n);if(!(s!=0)){o=0;t=0;break}else a=a+1|0}}else{o=0;t=0}while(0);a=e+16|0;c[i>>3]=o/+c[a>>3]+g;c[r>>3]=t/+c[a>>3]+ +c[p>>3];a=0;break}case 1:{f=+c[e>>3];o=t-f;p=e+8|0;t=n-+c[p>>3];l=+c[e+24>>3]/1e8;n=o*o+t*t;u=+G(+n);h=l*3;e:do if(u!=0){a=1;s=u;while(1){A=s-(s*(1-l*n)-u)/(1-h*n);o=o*A/s;t=t*A/s;if((a|0)==3)break e;n=o*o+t*t;s=+G(+n);if(!(s!=0)){o=0;t=0;break}else a=a+1|0}}else{o=0;t=0}while(0);a=e+16|0;c[i>>3]=o/+c[a>>3]+f;c[r>>3]=t/+c[a>>3]+ +c[p>>3];a=0;break}default:a=-1}return a|0}function wo(e,t,n,i,r,a){e=e|0;t=+t;n=+n;i=i|0;r=r|0;a=a|0;var o=0,s=0,l=0,u=0,h=0,f=0,d=0,p=0;switch(a|0){case 4:{l=+c[e+16>>3];u=+c[e+24>>3];d=+c[e+32>>3];h=+c[e+40>>3];p=+c[e+48>>3];f=+c[e+56>>3];s=+c[e+64>>3];t=(t-p)*s/d;s=(n-f)*s/h;o=t*t+s*s;n=+c[e>>3]*o+1+o*(+c[e+8>>3]*o);c[i>>3]=p+d*(u*(t*(t*2)+o)+(l*2*t*s+t*n));c[r>>3]=f+h*(u*2*t*s+(l*(o+s*(s*2))+s*n));a=0;break}case 3:{s=+c[e>>3];p=+c[e+16>>3];o=(t-s)*p;a=e+8|0;t=p*(n-+c[a>>3]);if(o==0&t==0){c[i>>3]=s;t=+c[a>>3]}else{p=o*o+t*t;p=1-p*(+c[e+32>>3]/1e8)-p*(p*(+c[e+40>>3]/1e8/1e5));c[i>>3]=s+ +c[e+24>>3]*(o*p);t=+c[a>>3]+t*p}c[r>>3]=t;a=0;break}case 2:{s=+c[e>>3];p=+c[e+16>>3];o=(t-s)*p;a=e+8|0;t=p*(n-+c[a>>3]);if(o==0&t==0){c[i>>3]=s;t=+c[a>>3]}else{p=o*o+t*t;p=1-p*(+c[e+24>>3]/1e8)-p*(p*(+c[e+32>>3]/1e8/1e5));c[i>>3]=s+o*p;t=+c[a>>3]+t*p}c[r>>3]=t;a=0;break}case 1:{s=+c[e>>3];p=+c[e+16>>3];o=(t-s)*p;a=e+8|0;t=p*(n-+c[a>>3]);if(o==0&t==0){c[i>>3]=s;t=+c[a>>3]}else{p=1-(o*o+t*t)*(+c[e+24>>3]/1e8);c[i>>3]=s+o*p;t=+c[a>>3]+t*p}c[r>>3]=t;a=0;break}default:a=-1}return a|0}function xo(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0;_=h;h=h+256|0;d=_+232|0;f=_+224|0;u=_+216|0;l=_+208|0;s=_+200|0;o=_+192|0;r=_+184|0;g=_+240|0;m=_;do if((e|0)!=0&(t|0)>0&(n|0)!=0){v=Yr(e,4854)|0;if(!v){v=hr()|0;a[r>>2]=a[v>>2];a[r+4>>2]=e;to(3,4857,r);e=fr(a[v>>2]|0)|0;a[o>>2]=5367;a[o+4>>2]=e;to(3,5361,o);e=-1;break}Jr(v,0,2)|0;e:do if(!(Gr(v)|0)){o=ta(v)|0;ra(v);e=0;do{if((e|0)>=4){p=9;break}r=a[2012+(e<<3)+4>>2]|0;e=e+1|0}while(((o|0)%(r|0)|0|0)!=0);do if((p|0)==9)if((e|0)==4){to(3,4971,u);e=-1;break e}else{r=a[2012+(0<<3)+4>>2]|0;e=0;break}while(0);if((Zr(m,r,1,v)|0)!=1){e=hr()|0;a[f>>2]=a[e>>2];to(3,5051,f);e=fr(a[e>>2]|0)|0;a[d>>2]=5367;a[d+4>>2]=e;to(3,5361,d);e=-1;break}u=m+176|0;a[u>>2]=e;Eo(m);f=(e|0)==1;d=m+120|0;if(f){y=+c[d>>3];l=m+128|0;c[d>>3]=+c[l>>3];c[l>>3]=y}else l=m+128|0;Qu(n|0,m|0,184)|0;a[g>>2]=i;r=n+176|0;if((t|0)>1){s=1;while(1){i=(a[g>>2]|0)+(4-1)&~(4-1);o=a[i>>2]|0;a[g>>2]=i+4;a[o+176>>2]=a[r>>2];if((Zr(m,a[2012+((a[r>>2]|0)+-1<<3)+4>>2]|0,1,v)|0)!=1){e=-1;break e}a[u>>2]=e;Eo(m);if(f){y=+c[d>>3];c[d>>3]=+c[l>>3];c[l>>3]=y}Qu(o|0,m|0,184)|0;s=s+1|0;if((s|0)>=(t|0)){e=0;break}}}else e=0}else{e=hr()|0;a[s>>2]=a[e>>2];to(3,4926,s);e=fr(a[e>>2]|0)|0;a[l>>2]=5367;a[l+4>>2]=e;to(3,5361,l);e=-1}while(0);Vr(v)|0}else e=-1;while(0);h=_;return e|0}function Eo(e){e=e|0;var t=0,n=0,i=0,r=0,o=0;o=h;h=h+192|0;r=o;Mo(e,r);Mo(e+4|0,r+4|0);t=0;do{ko(e+8+(t<<5)|0,r+8+(t<<5)|0);ko(e+8+(t<<5)+8|0,r+8+(t<<5)+8|0);ko(e+8+(t<<5)+16|0,r+8+(t<<5)+16|0);ko(e+8+(t<<5)+24|0,r+8+(t<<5)+24|0);t=t+1|0}while((t|0)!=3);n=e+176|0;i=0;do{ko(e+104+(i<<3)|0,r+104+(i<<3)|0);i=i+1|0;t=a[n>>2]|0}while((i|0)<(a[2012+(t+-1<<3)>>2]|0));a[r+176>>2]=t;Qu(e|0,r|0,184)|0;h=o;return}function ko(e,t){e=e|0;t=t|0;i[t>>0]=i[e+7>>0]|0;i[t+1>>0]=i[e+6>>0]|0;i[t+2>>0]=i[e+5>>0]|0;i[t+3>>0]=i[e+4>>0]|0;i[t+4>>0]=i[e+3>>0]|0;i[t+5>>0]=i[e+2>>0]|0;i[t+6>>0]=i[e+1>>0]|0;i[t+7>>0]=i[e>>0]|0;return}function Mo(e,t){e=e|0;t=t|0;i[t>>0]=i[e+3>>0]|0;i[t+1>>0]=i[e+2>>0]|0;i[t+2>>0]=i[e+1>>0]|0;i[t+3>>0]=i[e>>0]|0;return}function To(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0;E=h;h=h+64|0;y=E+24|0;b=E+16|0;w=E+8|0;x=E;m=Ba(208)|0;if(!m){to(3,5472,E+32|0);bt(1)}Qu(m|0,e|0,184)|0;_=t<<1;v=(a[e>>2]|0)+_|0;a[m+192>>2]=v;_=(a[e+4>>2]|0)+_|0;a[m+196>>2]=_;a[m+200>>2]=t;a[m+204>>2]=t;n=ne(v<<3,_)|0;i=Ba(n)|0;a[m+184>>2]=i;if(!i){to(3,5472,E+40|0);bt(1)}n=Ba(n)|0;a[m+188>>2]=n;if(!n){to(3,5472,E+48|0);bt(1)}g=e+104|0;f=a[e+176>>2]|0;d=(v|0)>0?v<<1:0;if((_|0)>0){p=(v|0)>0;l=0;while(1){r=+(l-t|0);if(p){e=0;o=i;s=n;while(1){k=+(e-t|0);wo(g,k,r,w,x,f)|0;u[o>>2]=+c[w>>3];u[o+4>>2]=+c[x>>3];bo(g,k,r,y,b,f)|0;u[s>>2]=+c[y>>3];u[s+4>>2]=+c[b>>3];e=e+1|0;if((e|0)>=(v|0))break;else{o=o+8|0;s=s+8|0}}}n=n+(d<<2)|0;l=l+1|0;if((l|0)>=(_|0))break;else i=i+(d<<2)|0}}h=E;return m|0}function So(e){e=e|0;var t=0;if((e|0)!=0?(t=a[e>>2]|0,(t|0)!=0):0){ja(a[t+184>>2]|0);ja(a[(a[e>>2]|0)+188>>2]|0);ja(a[e>>2]|0);a[e>>2]=0;t=0}else t=-1;return t|0}function Ao(e,t,n,i,r){e=e|0;t=+t;n=+n;i=i|0;r=r|0;var o=0,s=0,l=0;s=(a[e+16>>2]|0)+~~(t+.5)|0;o=(a[e+20>>2]|0)+~~(n+.5)|0;if(((s|0)>=0?(l=a[e+8>>2]|0,!((o|0)<0|(s|0)>=(l|0))):0)?(o|0)<(a[e+12>>2]|0):0){e=a[e>>2]|0;o=(ne(l,o)|0)+s<<1;a[i>>2]=a[e+(o<<2)>>2];a[r>>2]=a[e+((o|1)<<2)>>2];o=0}else o=-1;return o|0}function Ro(e,t,n,i,r){e=e|0;t=+t;n=+n;i=i|0;r=r|0;var o=0,s=0,l=0;s=(a[e+16>>2]|0)+~~(t+.5)|0;o=(a[e+20>>2]|0)+~~(n+.5)|0;if(((s|0)>=0?(l=a[e+8>>2]|0,!((o|0)<0|(s|0)>=(l|0))):0)?(o|0)<(a[e+12>>2]|0):0){e=a[e+4>>2]|0;o=(ne(l,o)|0)+s<<1;a[i>>2]=a[e+(o<<2)>>2];a[r>>2]=a[e+((o|1)<<2)>>2];o=0}else o=-1;return o|0}function Co(e){e=e|0;var t=0,n=0;t=Ba(8)|0;do if(t){n=Ba(e<<3)|0;a[t>>2]=n;if(!n){ja(t);t=0;break}else{a[t+4>>2]=e;break}}else t=0;while(0);return t|0}function Po(e){e=e|0;ja(a[e>>2]|0);ja(e);return 0}function Oo(e){e=e|0;var t=0,n=0,i=0,r=0,o=0;t=+G(+ +Lo(e,e));if(t!=0){r=a[e>>2]|0;i=+c[r>>3];t=i<0?-t:t;i=i+t;c[r>>3]=i;i=1/+G(+(i*t));e=a[e+4>>2]|0;if((e|0)>0){n=0;do{o=r+(n<<3)|0;c[o>>3]=i*+c[o>>3];n=n+1|0}while((n|0)<(e|0))}}return+-t}function Lo(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;r=a[e+4>>2]|0;if((r|0)!=(a[t+4>>2]|0))bt(0);if((r|0)>0){i=a[e>>2]|0;e=a[t>>2]|0;t=0;n=0;do{n=n+ +c[i+(t<<3)>>3]*+c[e+(t<<3)>>3];t=t+1|0}while((t|0)<(r|0))}else n=0;return+n}function No(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C+8|0;R=C;x=a[e+8>>2]|0;if(((x|0)==(a[e+4>>2]|0)?(x|0)==(a[t+4>>2]|0):0)?(x|0)==((a[n+4>>2]|0)+1|0):0){M=x+-2|0;T=A+4|0;S=R+4|0;if((x|0)>2){_=x+-1|0;y=0;do{p=ne(y,x)|0;g=a[e>>2]|0;c[(a[t>>2]|0)+(y<<3)>>3]=+c[g+(p+y<<3)>>3];l=x-y+-1|0;a[T>>2]=l;b=y;y=y+1|0;u=g+(p+y<<3)|0;a[A>>2]=u;v=+Oo(A);c[(a[n>>2]|0)+(b<<3)>>3]=v;if(!(v==0)){if((y|0)<(x|0)){f=a[t>>2]|0;d=y;do{if((y|0)<(d|0)){i=a[e>>2]|0;r=y;s=0;do{v=+c[i+((ne(r,x)|0)+d<<3)>>3];s=s+v*+c[g+(r+p<<3)>>3];r=r+1|0}while((r|0)<(d|0))}else s=0;i=ne(d,x)|0;if((d|0)<(x|0)){r=a[e>>2]|0;o=d;do{s=s+ +c[r+(o+i<<3)>>3]*+c[g+(o+p<<3)>>3];o=o+1|0}while((o|0)<(x|0))}c[f+(d<<3)>>3]=s;d=d+1|0}while((d|0)<(x|0))}a[S>>2]=l;a[T>>2]=l;a[A>>2]=u;a[R>>2]=(a[t>>2]|0)+(y<<3);s=+Lo(A,R)*.5;if((_|0)>(b|0)){i=a[t>>2]|0;l=_;do{m=+c[g+(l+p<<3)>>3];r=i+(l<<3)|0;v=+c[r>>3]-s*m;c[r>>3]=v;r=ne(l,x)|0;if((l|0)<(x|0)){o=a[e>>2]|0;u=l;do{d=o+(u+r<<3)|0;c[d>>3]=+c[d>>3]-(m*+c[i+(u<<3)>>3]+v*+c[g+(u+p<<3)>>3]);u=u+1|0}while((u|0)<(x|0))}l=l+-1|0}while((l|0)>(b|0))}}}while((y|0)<(M|0))}if((x|0)<=1){if((x|0)>0){r=0;o=a[e>>2]|0;i=a[t>>2]|0;w=27}}else{w=ne(M,x)|0;o=a[e>>2]|0;i=a[t>>2]|0;c[i+(M<<3)>>3]=+c[o+(w+M<<3)>>3];r=x+-1|0;c[(a[n>>2]|0)+(M<<3)>>3]=+c[o+(r+w<<3)>>3];w=27}if((w|0)==27)c[i+(r<<3)>>3]=+c[o+((ne(r,x)|0)+r<<3)>>3];if((x|0)>0){f=(x|0)>0;g=x;do{n=g;g=g+-1|0;d=ne(g,x)|0;p=a[e>>2]|0;if((n|0)<=(M|0)?(E=x-g+-1|0,k=p+(d+n<<3)|0,(n|0)<(x|0)):0){i=(n|0)<(x|0);l=n;do{a[S>>2]=E;a[T>>2]=E;a[A>>2]=k;r=ne(l,x)|0;a[R>>2]=(a[e>>2]|0)+(r+n<<3);s=+Lo(A,R);if(i){o=a[e>>2]|0;u=n;do{w=o+(u+r<<3)|0;c[w>>3]=+c[w>>3]-s*+c[p+(u+d<<3)>>3];u=u+1|0}while((u|0)<(x|0))}l=l+1|0}while((l|0)<(x|0))}if(f){i=0;do{c[p+(i+d<<3)>>3]=0;i=i+1|0}while((i|0)<(x|0))}c[p+(d+g<<3)>>3]=1}while((n|0)>1);i=0}else i=0}else i=-1;h=C;return i|0}function Fo(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,a=0,o=0,s=0;a=+c[n>>3];o=+c[n+8>>3];r=+c[n+16>>3];i=+c[t+88>>3]+(a*+c[t+64>>3]+o*+c[t+72>>3]+r*+c[t+80>>3]);if(i==0)n=-1;else{s=+c[t+56>>3]+(a*+c[t+32>>3]+o*+c[t+40>>3]+r*+c[t+48>>3]);c[e>>3]=(+c[t+24>>3]+(a*+c[t>>3]+o*+c[t+8>>3]+r*+c[t+16>>3]))/i;c[e+8>>3]=s/i;n=0}return n|0}function Do(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,O=0,L=0,N=0,F=0,D=0;S=h;h=h+1072|0;k=S+1056|0;E=S+768|0;x=S+192|0;T=S+48|0;M=S;D=+c[n>>3];P=+c[i>>3];_=D*P;F=+c[n+8>>3];y=i+8|0;C=+c[y>>3];w=F*C;s=+c[n+16>>3];O=+c[i+16>>3];u=s*O;f=+c[n+24>>3];N=+c[n+32>>3];L=+c[n+40>>3];d=C*L;l=+c[n+48>>3];p=O*l;g=+c[n+56>>3];R=+c[n+64>>3];A=+c[n+72>>3];m=C*A;r=+c[n+80>>3];v=O*r;o=+c[n+88>>3];c[E>>3]=_;c[E+8>>3]=D*C;c[E+16>>3]=D*O;c[E+24>>3]=P*F;c[E+32>>3]=w;c[E+40>>3]=O*F;c[E+48>>3]=P*s;c[E+56>>3]=C*s;c[E+64>>3]=u;c[E+72>>3]=D;c[E+80>>3]=F;c[E+88>>3]=s;s=P*N;c[E+96>>3]=s;c[E+104>>3]=C*N;c[E+112>>3]=O*N;c[E+120>>3]=P*L;c[E+128>>3]=d;c[E+136>>3]=O*L;c[E+144>>3]=P*l;c[E+152>>3]=C*l;c[E+160>>3]=p;c[E+168>>3]=N;c[E+176>>3]=L;c[E+184>>3]=l;l=R*P;c[E+192>>3]=l;c[E+200>>3]=C*R;c[E+208>>3]=O*R;c[E+216>>3]=P*A;C=+c[y>>3];c[E+224>>3]=A*C;c[E+232>>3]=O*A;c[E+240>>3]=P*r;c[E+248>>3]=C*r;c[E+256>>3]=v;c[E+264>>3]=R;c[E+272>>3]=A;c[E+280>>3]=r;i=x+64|0;n=x;y=n+64|0;do{a[n>>2]=0;n=n+4|0}while((n|0)<(y|0));c[i>>3]=-1;i=x+72|0;a[i>>2]=0;a[i+4>>2]=0;a[i+8>>2]=0;a[i+12>>2]=0;a[i+16>>2]=0;a[i+20>>2]=0;a[i+24>>2]=0;a[i+28>>2]=0;c[x+104>>3]=1;i=x+160|0;n=x+112|0;y=n+48|0;do{a[n>>2]=0;n=n+4|0}while((n|0)<(y|0));c[i>>3]=1;i=x+240|0;n=x+168|0;y=n+72|0;do{a[n>>2]=0;n=n+4|0}while((n|0)<(y|0));c[i>>3]=-1;i=x+296|0;n=x+248|0;y=n+48|0;do{a[n>>2]=0;n=n+4|0}while((n|0)<(y|0));c[i>>3]=-1;i=x+304|0;a[i>>2]=0;a[i+4>>2]=0;a[i+8>>2]=0;a[i+12>>2]=0;a[i+16>>2]=0;a[i+20>>2]=0;a[i+24>>2]=0;a[i+28>>2]=0;c[x+336>>3]=1;i=x+456|0;n=x+344|0;y=n+112|0;do{a[n>>2]=0;n=n+4|0}while((n|0)<(y|0));c[i>>3]=1;i=x+512|0;n=x+464|0;y=n+48|0;do{a[n>>2]=0;n=n+4|0}while((n|0)<(y|0));c[i>>3]=1;i=x+568|0;n=x+520|0;y=n+48|0;do{a[n>>2]=0;n=n+4|0}while((n|0)<(y|0));c[i>>3]=1;b=0;do{y=0;do{n=T+(b*48|0)+(y<<3)|0;c[n>>3]=0;r=0;i=0;do{r=r+ +c[E+(b*96|0)+(i<<3)>>3]*+c[x+(i*48|0)+(y<<3)>>3];i=i+1|0}while((i|0)!=12);c[n>>3]=r;y=y+1|0}while((y|0)!=6);b=b+1|0}while((b|0)!=3);F=f+(_+w+u);D=g+(s+d+p);r=o+(l+m+v);o=+c[t>>3];s=+c[t+8>>3];l=+c[t+16>>3];u=+c[t+24>>3]+(F*o+D*s+r*l);f=+c[t+32>>3];d=+c[t+40>>3];p=+c[t+48>>3];g=+c[t+56>>3]+(F*f+D*d+r*p);m=+c[t+64>>3];v=+c[t+72>>3];_=+c[t+80>>3];r=+c[t+88>>3]+(F*m+D*v+r*_);if(r==0){to(3,5089,k);i=-1}else{D=r*r;c[M>>3]=(o*r-u*m)/D;c[M+8>>3]=(r*s-u*v)/D;c[M+16>>3]=(r*l-u*_)/D;c[M+24>>3]=(r*f-g*m)/D;c[M+32>>3]=(r*d-g*v)/D;c[M+40>>3]=(r*p-g*_)/D;n=0;do{r=+c[M+(n*24|0)>>3];o=+c[M+(n*24|0)+8>>3];s=+c[M+(n*24|0)+16>>3];i=0;do{k=e+(n*48|0)+(i<<3)|0;c[k>>3]=0;D=r*+c[T+(i<<3)>>3]+0;c[k>>3]=D;D=D+o*+c[T+48+(i<<3)>>3];c[k>>3]=D;c[k>>3]=D+s*+c[T+96+(i<<3)>>3];i=i+1|0}while((i|0)!=6);n=n+1|0}while((n|0)!=2);i=0}h=S;return i|0}function Io(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,s=0,l=0;l=h;h=h+48|0;s=l+24|0;o=l+12|0;r=l;a[s+4>>2]=6;a[s+8>>2]=1;a[s>>2]=e;a[o+4>>2]=i;a[o+8>>2]=1;a[o>>2]=t;a[r+4>>2]=i;a[r+8>>2]=6;a[r>>2]=n;t=uo(r)|0;do if(t){e=lo(t,r)|0;if(!e){ho(t)|0;n=-1;break}n=lo(t,o)|0;if(!n){ho(t)|0;ho(e)|0;n=-1;break}if((mo(e)|0)<0){ho(t)|0;ho(e)|0;ho(n)|0;n=-1;break}else{fo(s,e,n)|0;ho(t)|0;ho(e)|0;ho(n)|0;n=0;break}}else n=-1;while(0);h=l;return n|0}function Uo(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0;d=h;h=h+192|0;u=d+96|0;f=d;o=+c[t>>3];l=+c[t+8>>3];i=+c[t+16>>3];n=o*o+l*l+i*i;if(n==0){s=0;r=0;i=1;n=0}else{n=+G(+n);s=n;r=i/n;i=o/n;n=l/n}b=+c[t+24>>3];v=+c[t+32>>3];l=+c[t+40>>3];p=+X(+s);o=1-p;s=+Y(+s);c[u>>3]=p+i*i*o;y=n*i*o;_=r*s;c[u+8>>3]=y-_;m=i*r*o;g=n*s;c[u+16>>3]=m+g;c[u+24>>3]=b;c[u+32>>3]=y+_;c[u+40>>3]=p+n*n*o;n=n*r*o;s=i*s;c[u+48>>3]=n-s;c[u+56>>3]=v;c[u+64>>3]=m-g;c[u+72>>3]=n+s;c[u+80>>3]=p+r*r*o;c[u+88>>3]=l;a=0;do{n=+c[e+(a<<5)>>3];i=+c[e+(a<<5)+8>>3];r=+c[e+(a<<5)+16>>3];t=0;do{c[f+(a<<5)+(t<<3)>>3]=n*+c[u+(t<<3)>>3]+i*+c[u+32+(t<<3)>>3]+r*+c[u+64+(t<<3)>>3];t=t+1|0}while((t|0)!=4);t=f+(a<<5)+24|0;c[t>>3]=+c[e+(a<<5)+24>>3]+ +c[t>>3];a=a+1|0}while((a|0)!=3);t=0;do{c[e+(t<<5)>>3]=+c[f+(t<<5)>>3];c[e+(t<<5)+8>>3]=+c[f+(t<<5)+8>>3];c[e+(t<<5)+16>>3]=+c[f+(t<<5)+16>>3];c[e+(t<<5)+24>>3]=+c[f+(t<<5)+24>>3];t=t+1|0}while((t|0)!=3);h=d;return 0}function Ho(e){e=e|0;var t=0,n=0;t=Ba(136)|0;if(!t)t=0;else{n=0;do{c[t+(n<<5)>>3]=+c[e+(n<<5)>>3];c[t+(n<<5)+8>>3]=+c[e+(n<<5)+8>>3];c[t+(n<<5)+16>>3]=+c[e+(n<<5)+16>>3];c[t+(n<<5)+24>>3]=+c[e+(n<<5)+24>>3];n=n+1|0}while((n|0)!=3);a[t+96>>2]=10;c[t+104>>3]=.10000000149011612;c[t+112>>3]=.9900000095367432;c[t+120>>3]=4;c[t+128>>3]=.5}return t|0}function zo(e){e=e|0;var t=0;t=a[e>>2]|0;if(!t)t=-1;else{ja(t);a[e>>2]=0;t=0}return t|0}function Bo(e,t){e=e|0;t=+t;if(!e)e=-1;else{c[e+128>>3]=t;e=0}return e|0}function jo(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0;k=h;h=h+176|0;u=k+168|0;l=k+160|0;b=k+48|0;x=k+64|0;w=k;_=t+8|0;o=a[_>>2]|0;do if((o|0)>=3){E=Ba(o*96|0)|0;if(!E){to(3,5109,l);o=-1;break}y=Ba(o<<4)|0;if(!y){to(3,5109,u);ja(E);o=-1;break}else o=0;do{c[i+(o<<5)>>3]=+c[n+(o<<5)>>3];c[i+(o<<5)+8>>3]=+c[n+(o<<5)+8>>3];c[i+(o<<5)+16>>3]=+c[n+(o<<5)+16>>3];c[i+(o<<5)+24>>3]=+c[n+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3);m=t+4|0;u=b+8|0;n=e+104|0;d=e+120|0;p=e+112|0;g=e+96|0;f=0;v=0;e:while(1){no(e,i,x)|0;o=a[_>>2]|0;if((o|0)>0){s=0;l=0;do{if((Fo(b,x,(a[m>>2]|0)+(l*24|0)|0)|0)<0){l=10;break e}o=a[t>>2]|0;T=+c[o+(l<<4)>>3]-+c[b>>3];M=+c[o+(l<<4)+8>>3]-+c[u>>3];s=s+(T*T+M*M);o=l<<1;c[y+(o<<3)>>3]=T;c[y+((o|1)<<3)>>3]=M;l=l+1|0;o=a[_>>2]|0}while((l|0)<(o|0))}else s=0;s=s/+(o|0);if(s<+c[n>>3]){l=24;break}if(((v|0)>0?s<+c[d>>3]:0)?s/f>+c[p>>3]:0){l=24;break}if((v|0)==(a[g>>2]|0)){l=24;break}if((o|0)>0){l=0;do{if((Do(E+(l*12<<3)|0,e,i,(a[m>>2]|0)+(l*24|0)|0)|0)<0){l=20;break e}l=l+1|0;o=a[_>>2]|0}while((l|0)<(o|0));
}if((Io(w,y,E,o<<1)|0)<0){l=22;break}Uo(i,w)|0;f=s;v=v+1|0}if((l|0)==10){Vo(E,y);o=-1;break}else if((l|0)==20){Vo(E,y);o=-1;break}else if((l|0)==22){Vo(E,y);o=-1;break}else if((l|0)==24){c[r>>3]=s;ja(E);ja(y);o=0;break}}else o=-1;while(0);h=k;return o|0}function Vo(e,t){e=e|0;t=t|0;ja(e);ja(t);return}function Go(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,O=0;O=h;h=h+192|0;d=O+184|0;f=O+176|0;u=O+168|0;o=O+160|0;S=O+48|0;R=O+64|0;A=O;T=t+8|0;l=a[T>>2]|0;do if((l|0)>=4){p=~~(+(l|0)*+c[e+128>>3])+-1|0;p=(p|0)<3?3:p;P=Ba(l*96|0)|0;if(!P){to(3,5109,o);o=-1;break}C=Ba(l<<4)|0;if(!C){to(3,5109,u);ja(P);o=-1;break}o=l<<3;M=Ba(o)|0;if(!M){to(3,5109,f);ja(P);ja(C);o=-1;break}k=Ba(o)|0;if(!k){to(3,5109,d);ja(P);ja(C);ja(M);o=-1;break}else o=0;do{c[i+(o<<5)>>3]=+c[n+(o<<5)>>3];c[i+(o<<5)+8>>3]=+c[n+(o<<5)+8>>3];c[i+(o<<5)+16>>3]=+c[n+(o<<5)+16>>3];c[i+(o<<5)+24>>3]=+c[n+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3);x=t+4|0;E=S+8|0;d=k+(p<<3)|0;n=e+104|0;p=e+120|0;y=e+112|0;b=e+96|0;v=0;w=0;e:while(1){no(e,i,R)|0;o=a[T>>2]|0;if((o|0)>0){l=0;do{if((Fo(S,R,(a[x>>2]|0)+(l*24|0)|0)|0)<0){l=14;break e}o=a[t>>2]|0;m=+c[o+(l<<4)>>3]-+c[S>>3];_=+c[o+(l<<4)+8>>3]-+c[E>>3];o=l<<1;c[C+(o<<3)>>3]=m;c[C+((o|1)<<3)>>3]=_;_=m*m+_*_;c[k+(l<<3)>>3]=_;c[M+(l<<3)>>3]=_;l=l+1|0;o=a[T>>2]|0}while((l|0)<(o|0))}fa(k,o,8,1);_=+c[d>>3]*4;_=_<16?16:_;l=a[T>>2]|0;m=_/6;if((l|0)>0){s=0;o=0;do{g=+c[k+(o<<3)>>3];if(g>_)g=m;else{g=1-g/_;g=m*(1-g*(g*g))}s=s+g;o=o+1|0}while((o|0)<(l|0))}else s=0;s=s/+(l|0);if(s<+c[n>>3]){l=36;break}if(((w|0)>0?s<+c[p>>3]:0)?s/v>+c[y>>3]:0){l=36;break}if((w|0)==(a[b>>2]|0)){l=36;break}if((l|0)>0){f=0;o=0;do{g=+c[M+(f<<3)>>3];if(g<=_){l=o*6|0;u=P+(l<<3)|0;if((Do(u,e,i,(a[x>>2]|0)+(f*24|0)|0)|0)<0){l=28;break e}v=1-g/_;v=v*v;c[u>>3]=+c[u>>3]*v;u=P+((l|1)<<3)|0;c[u>>3]=+c[u>>3]*v;u=P+(l+2<<3)|0;c[u>>3]=v*+c[u>>3];u=P+(l+3<<3)|0;c[u>>3]=v*+c[u>>3];u=P+(l+4<<3)|0;c[u>>3]=v*+c[u>>3];u=P+(l+5<<3)|0;c[u>>3]=v*+c[u>>3];u=P+(l+6<<3)|0;c[u>>3]=v*+c[u>>3];u=P+(l+7<<3)|0;c[u>>3]=v*+c[u>>3];u=P+(l+8<<3)|0;c[u>>3]=v*+c[u>>3];u=P+(l+9<<3)|0;c[u>>3]=v*+c[u>>3];u=P+(l+10<<3)|0;c[u>>3]=v*+c[u>>3];l=P+(l+11<<3)|0;c[l>>3]=v*+c[l>>3];l=f<<1;c[C+(o<<3)>>3]=v*+c[C+(l<<3)>>3];c[C+(o+1<<3)>>3]=v*+c[C+((l|1)<<3)>>3];l=a[T>>2]|0;o=o+2|0}f=f+1|0}while((f|0)<(l|0))}else o=0;if((o|0)<6){l=32;break}if((Io(A,C,P,o)|0)<0){l=34;break}Uo(i,A)|0;v=s;w=w+1|0}if((l|0)==14){Wo(P,C,M,k);o=-1;break}else if((l|0)==28){Wo(P,C,M,k);o=-1;break}else if((l|0)==32){Wo(P,C,M,k);o=-1;break}else if((l|0)==34){Wo(P,C,M,k);o=-1;break}else if((l|0)==36){c[r>>3]=s;ja(P);ja(C);ja(M);ja(k);o=0;break}}else o=-1;while(0);h=O;return o|0}function Wo(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;ja(e);ja(t);ja(n);ja(i);return}function Xo(e,t){e=e|0;t=t|0;var n=0;n=+c[e>>3]-+c[t>>3];return(n<0?-1:n>0&1)|0}function Yo(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,O=0,L=0,N=0,F=0,D=0,I=0,U=0,H=0,z=0,B=0,j=0,V=0,W=0,X=0,Y=0,q=0,Z=0,Q=0,$=0;X=h;h=h+64|0;R=X+48|0;M=X+40|0;k=X+32|0;E=X+24|0;b=X+16|0;p=X+8|0;u=X;e:do if((i|0)>=4){o=0;while(1){if((o|0)>=(i|0))break;if(+c[n+(o*24|0)+16>>3]!=0){o=-1;break e}else o=o+1|0}if((((((((!(+c[e>>3]==0)?!(+c[e+32>>3]!=0):0)?(S=e+40|0,!(+c[S>>3]==0)):0)?!(+c[e+64>>3]!=0):0)?!(+c[e+72>>3]!=0):0)?!(+c[e+80>>3]!=1):0)?!(+c[e+24>>3]!=0):0)?!(+c[e+56>>3]!=0):0)?!(+c[e+88>>3]!=0):0){o=i<<1;A=oo(o,8)|0;if(!A){to(3,5124,u);o=-1;break}x=oo(o,1)|0;if(!x){ho(A)|0;to(3,5150,p);o=-1;break}if(i){o=a[A>>2]|0;u=a[x>>2]|0;p=0;do{$=n+(p*24|0)|0;Y=p<<4;c[o+(Y<<3)>>3]=+c[$>>3];Q=n+(p*24|0)+8|0;c[o+((Y|1)<<3)>>3]=+c[Q>>3];c[o+((Y|2)<<3)>>3]=1;c[o+((Y|3)<<3)>>3]=0;c[o+((Y|4)<<3)>>3]=0;c[o+((Y|5)<<3)>>3]=0;Z=t+(p<<4)|0;c[o+((Y|6)<<3)>>3]=-(+c[$>>3]*+c[Z>>3]);c[o+((Y|7)<<3)>>3]=-(+c[Q>>3]*+c[Z>>3]);c[o+((Y|8)<<3)>>3]=0;c[o+((Y|9)<<3)>>3]=0;c[o+((Y|10)<<3)>>3]=0;c[o+((Y|11)<<3)>>3]=+c[$>>3];c[o+((Y|12)<<3)>>3]=+c[Q>>3];c[o+((Y|13)<<3)>>3]=1;q=t+(p<<4)+8|0;c[o+((Y|14)<<3)>>3]=-(+c[$>>3]*+c[q>>3]);c[o+((Y|15)<<3)>>3]=-(+c[Q>>3]*+c[q>>3]);Y=p<<1;c[u+(Y<<3)>>3]=+c[Z>>3];c[u+((Y|1)<<3)>>3]=+c[q>>3];p=p+1|0}while((p|0)!=(i|0))}i=uo(A)|0;if(!i){ho(A)|0;ho(x)|0;to(3,5176,b);o=-1;break}p=lo(i,A)|0;if(!p){ho(A)|0;ho(x)|0;ho(i)|0;to(3,5202,E);o=-1;break}u=lo(i,x)|0;if(!u){ho(A)|0;ho(x)|0;ho(i)|0;ho(p)|0;to(3,5228,k);o=-1;break}if((mo(p)|0)<0){ho(A)|0;ho(x)|0;ho(i)|0;ho(p)|0;ho(u)|0;to(3,5254,M);o=-1;break}o=lo(p,u)|0;if(!o){ho(A)|0;ho(x)|0;ho(i)|0;ho(p)|0;ho(u)|0;to(3,5280,R);o=-1;break}$=a[o>>2]|0;g=+c[$+48>>3];V=+c[e+48>>3];y=+c[S>>3];s=(+c[$+24>>3]-g*V)/y;_=+c[e+16>>3];W=+c[e+8>>3];v=+c[e>>3];m=(+c[$>>3]-g*_-s*W)/v;l=+c[$+56>>3];f=(+c[$+32>>3]-V*l)/y;d=(+c[$+8>>3]-_*l-W*f)/v;y=(+c[$+40>>3]-V)/y;v=(+c[$+16>>3]-_-W*y)/v;ho(A)|0;ho(x)|0;ho(i)|0;ho(p)|0;ho(u)|0;ho(o)|0;W=+G(+(g*g+(s*s+m*m)));_=+G(+(l*l+(f*f+d*d)));m=m/W;s=s/W;g=g/W;d=d/_;f=f/_;l=l/_;_=(W+_)*.5;v=v/_;W=1/_;if(W<0){z=-s;l=-l;f=-f;g=-g;d=-d;B=-m;V=-v;j=-W}else{z=s;B=m;V=v;j=y/_}s=l*z-f*g;m=d*g-l*B;v=f*B-d*z;_=+G(+(v*v+(s*s+m*m)));do if(!(_==0)){y=s/_;m=m/_;s=v/_;H=l*g+(f*z+d*B);H=H<0?-H:H;H=(+G(+(H+1))+ +G(+(1-H)))*.5;if(B*m-z*y!=0){o=0;C=B;w=z;P=g;N=y;L=m}else{$=B*s-g*y!=0;o=$?1:2;C=$?B:g;w=$?g:z;P=$?z:B;N=$?y:s;L=$?s:m;s=$?m:y}v=C*L;_=w*N;m=v-_;if(m==0){m=z;s=B;break}O=(w*s-P*L)/m;T=H*L/m;v=_-v;m=(C*s-P*N)/v;v=H*N/v;_=O*O+m*m+1;y=O*T+m*v;w=y*y-_*(T*T+v*v+-1);if(w<0){m=z;s=B;break}U=+G(+w);I=(U-y)/_;P=T+O*I;D=v+m*I;U=(-y-U)/_;O=T+O*U;v=v+m*U;$=(o|0)==1;m=$?L:s;_=$?s:L;F=$?I:D;I=$?D:I;D=$?U:v;L=$?v:U;$=(o|0)==2&($^1);v=$?N:m;m=$?m:N;U=$?I:P;I=$?P:I;s=$?L:O;N=$?O:L;if(d*_-f*m!=0){o=0;C=d;w=f;P=l;L=m;T=_}else{$=d*v-l*m!=0;o=$?1:2;C=$?d:l;w=$?l:f;P=$?f:d;L=$?m:v;T=$?v:_;v=$?_:m}_=C*T;y=w*L;m=_-y;if(m==0){m=z;s=B;break}O=(w*v-P*T)/m;T=H*T/m;m=y-_;w=(C*v-P*L)/m;m=H*L/m;v=O*O+w*w+1;_=O*T+w*m;y=_*_-v*(T*T+m*m+-1);if(y<0){m=z;s=B;break}y=+G(+y);l=(y-_)/v;B=T+O*l;z=m+w*l;y=(-_-y)/v;g=T+O*y;d=m+w*y;$=(o|0)==1;f=$?l:z;l=$?z:l;w=$?y:d;y=$?d:y;$=(o|0)==2&($^1);d=$?l:B;l=$?B:l;T=$?y:g;y=$?g:y;g=I*l+(F*f+U*d);g=g<0?-g:g;m=I*y+(F*w+U*T);m=m<0?-m:m;v=N*l+(D*f+s*d);v=v<0?-v:v;_=N*y+(D*w+s*T);_=_<0?-_:_;if(g<m)if(g<v){if(g<_){m=F;g=I;s=U;break}m=D;l=y;f=w;g=N;d=T;break}else{if(v<_){m=D;g=N;break}m=D;l=y;f=w;g=N;d=T;break}else if(m<v){if(m<_){m=F;l=y;f=w;g=I;d=T;s=U;break}m=D;l=y;f=w;g=N;d=T;break}else{if(v<_){m=D;g=N;break}m=D;l=y;f=w;g=N;d=T;break}}else{m=z;s=B}while(0);U=l*m-f*g;H=d*g-l*s;z=f*s-d*m;B=+G(+(z*z+(U*U+H*H)));c[r>>3]=s;c[r+32>>3]=m;c[r+64>>3]=g;c[r+8>>3]=d;c[r+40>>3]=f;c[r+72>>3]=l;c[r+16>>3]=U/B;c[r+48>>3]=H/B;c[r+80>>3]=z/B;c[r+24>>3]=V;c[r+56>>3]=j;c[r+88>>3]=W;o=0}else o=-1}else o=-1;while(0);h=X;return o|0}function qo(e){e=e|0;ja(a[e>>2]|0);ja(e);return 0}function Zo(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;return+ +$o(e,t,n,i,0)}function Qo(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;return+ +$o(e,t,n,i,1)}function $o(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+208|0;M=P+200|0;k=P+192|0;T=P+96|0;S=P;A=i+4|0;g=a[A>>2]|0;m=i+112|0;v=i+120|0;if((g|0)>0){b=a[i>>2]|0;w=(n|0)>0;x=(n|0)>0;E=0;do{if(!(a[b+(E*320|0)+4>>2]|0)){if(w){l=a[b+(E*320|0)>>2]|0;u=0;s=-1;do{if((a[t+(u<<8)+8>>2]|0)==(l|0)?(d=+c[t+(u<<8)+40>>3],!(d<+c[m>>3])):0)if(!((s|0)!=-1?!(+c[t+(s<<8)+40>>3]<d):0))s=u;u=u+1|0}while((u|0)<(n|0))}else s=-1;a[b+(E*320|0)+304>>2]=s;if((s|0)>-1)a[t+(s<<8)+16>>2]=a[t+(s<<8)+20>>2]}else{u=b+(E*320|0)+312|0;f=b+(E*320|0)|0;if(x){p=0;s=-1;do{l=a[t+(p<<8)+12>>2]|0;if((l|0)==0?(y=t+(p<<8)+248|0,_=a[y>>2]|0,y=a[y+4>>2]|0,!((_|0)==0&(y|0)==0)):0){l=u;if((_|0)==(a[l>>2]|0)?(y|0)==(a[l+4>>2]|0):0)C=20}else if((l|0)==(a[f>>2]|0))C=20;if((C|0)==20){C=0;o=+c[t+(p<<8)+48>>3];if(!(o<+c[v>>3]))if(!((s|0)!=-1?!(+c[t+(s<<8)+48>>3]<o):0))s=p}p=p+1|0}while((p|0)<(n|0))}else s=-1;a[b+(E*320|0)+304>>2]=s;if((s|0)>-1)a[t+(s<<8)+16>>2]=a[t+(s<<8)+24>>2]}E=E+1|0}while((E|0)<(g|0))}if((g|0)>0){m=0;s=0;g=0;l=0;while(1){u=a[i>>2]|0;f=a[u+(m*320|0)+304>>2]|0;do if((f|0)<0)u=g;else{p=t+(f<<8)|0;if(+bu(e,p,+c[u+(m*320|0)+8>>3],S)>4){a[(a[i>>2]|0)+(m*320|0)+304>>2]=-1;u=t+(f<<8)+236|0;if(a[u>>2]|0){u=g;break}a[u>>2]=7;u=g;break}u=a[p>>2]|0;if((l|0)==0|(g|0)<(u|0)){s=0;do{c[T+(s<<5)>>3]=+c[S+(s<<5)>>3];c[T+(s<<5)+8>>3]=+c[S+(s<<5)+8>>3];c[T+(s<<5)+16>>3]=+c[S+(s<<5)+16>>3];c[T+(s<<5)+24>>3]=+c[S+(s<<5)+24>>3];s=s+1|0}while((s|0)!=3);s=m}else u=g;l=l+1|0}while(0);m=m+1|0;if((m|0)>=(a[A>>2]|0))break;else g=u}}else{s=0;l=0}do if((l|0)!=0?(l|0)>=(a[i+128>>2]|0):0){no(T,(a[i>>2]|0)+(s*320|0)+112|0,S)|0;g=l<<2;v=Ba(l<<6)|0;if(!v){to(3,5472,k);bt(1)}m=Ba(l*96|0)|0;if(!m){to(3,5472,M);bt(1)}u=a[A>>2]|0;if((u|0)>0){f=a[i>>2]|0;p=0;s=0;do{l=a[f+(p*320|0)+304>>2]|0;if((l|0)>=0){k=a[t+(l<<8)+16>>2]|0;n=(4-k|0)%4|0;M=s<<3;c[v+(M<<3)>>3]=+c[t+(l<<8)+168+(n<<4)>>3];c[v+((M|1)<<3)>>3]=+c[t+(l<<8)+168+(n<<4)+8>>3];n=(5-k|0)%4|0;c[v+((M|2)<<3)>>3]=+c[t+(l<<8)+168+(n<<4)>>3];c[v+((M|3)<<3)>>3]=+c[t+(l<<8)+168+(n<<4)+8>>3];n=(6-k|0)%4|0;c[v+((M|4)<<3)>>3]=+c[t+(l<<8)+168+(n<<4)>>3];c[v+((M|5)<<3)>>3]=+c[t+(l<<8)+168+(n<<4)+8>>3];k=(7-k|0)%4|0;c[v+((M|6)<<3)>>3]=+c[t+(l<<8)+168+(k<<4)>>3];c[v+((M|7)<<3)>>3]=+c[t+(l<<8)+168+(k<<4)+8>>3];M=s*12|0;c[m+(M<<3)>>3]=+c[f+(p*320|0)+208>>3];c[m+((M|1)<<3)>>3]=+c[f+(p*320|0)+216>>3];c[m+((M|2)<<3)>>3]=+c[f+(p*320|0)+224>>3];c[m+((M|3)<<3)>>3]=+c[f+(p*320|0)+232>>3];c[m+(M+4<<3)>>3]=+c[f+(p*320|0)+240>>3];c[m+(M+5<<3)>>3]=+c[f+(p*320|0)+248>>3];c[m+(M+6<<3)>>3]=+c[f+(p*320|0)+256>>3];c[m+(M+7<<3)>>3]=+c[f+(p*320|0)+264>>3];c[m+(M+8<<3)>>3]=+c[f+(p*320|0)+272>>3];c[m+(M+9<<3)>>3]=+c[f+(p*320|0)+280>>3];k=a[i>>2]|0;c[m+(M+10<<3)>>3]=+c[k+(p*320|0)+288>>3];c[m+(M+11<<3)>>3]=+c[k+(p*320|0)+296>>3];s=s+1|0}p=p+1|0}while((p|0)<(u|0))}f=i+104|0;l=(r|0)!=0;if(!(a[f>>2]|0)){s=i+8|0;o=+xu(e,S,v,m,g,s);if(l&o>=20){Bo(a[e>>2]|0,.8)|0;o=+Eu(e,S,v,m,g,s);if(o>=20){Bo(a[e>>2]|0,.6)|0;o=+Eu(e,S,v,m,g,s);if(o>=20){Bo(a[e>>2]|0,.4)|0;o=+Eu(e,S,v,m,g,s);if(o>=20){Bo(a[e>>2]|0,0)|0;o=+Eu(e,S,v,m,g,s)}}}}ja(m);ja(v)}else{o=+xu(e,S,v,m,g,T);u=i+8|0;d=+xu(e,u,v,m,g,u);s=o<d;do if(l){if(s){s=0;do{c[i+8+(s<<5)>>3]=+c[T+(s<<5)>>3];c[i+8+(s<<5)+8>>3]=+c[T+(s<<5)+8>>3];c[i+8+(s<<5)+16>>3]=+c[T+(s<<5)+16>>3];c[i+8+(s<<5)+24>>3]=+c[T+(s<<5)+24>>3];s=s+1|0}while((s|0)!=3)}else o=d;if(o>=20){Bo(a[e>>2]|0,.8)|0;o=+Eu(e,S,v,m,g,T);d=+Eu(e,u,v,m,g,u);if(o<d){s=0;do{c[i+8+(s<<5)>>3]=+c[T+(s<<5)>>3];c[i+8+(s<<5)+8>>3]=+c[T+(s<<5)+8>>3];c[i+8+(s<<5)+16>>3]=+c[T+(s<<5)+16>>3];c[i+8+(s<<5)+24>>3]=+c[T+(s<<5)+24>>3];s=s+1|0}while((s|0)!=3)}else o=d;if(o>=20){Bo(a[e>>2]|0,.6)|0;o=+Eu(e,S,v,m,g,T);d=+Eu(e,u,v,m,g,u);if(o<d){s=0;do{c[i+8+(s<<5)>>3]=+c[T+(s<<5)>>3];c[i+8+(s<<5)+8>>3]=+c[T+(s<<5)+8>>3];c[i+8+(s<<5)+16>>3]=+c[T+(s<<5)+16>>3];c[i+8+(s<<5)+24>>3]=+c[T+(s<<5)+24>>3];s=s+1|0}while((s|0)!=3)}else o=d;if(o>=20){Bo(a[e>>2]|0,.4)|0;o=+Eu(e,S,v,m,g,T);d=+Eu(e,u,v,m,g,u);if(o<d){s=0;do{c[i+8+(s<<5)>>3]=+c[T+(s<<5)>>3];c[i+8+(s<<5)+8>>3]=+c[T+(s<<5)+8>>3];c[i+8+(s<<5)+16>>3]=+c[T+(s<<5)+16>>3];c[i+8+(s<<5)+24>>3]=+c[T+(s<<5)+24>>3];s=s+1|0}while((s|0)!=3)}else o=d;if(o>=20){Bo(a[e>>2]|0,0)|0;o=+Eu(e,S,v,m,g,T);d=+Eu(e,u,v,m,g,u);if(o<d)s=0;else{o=d;break}do{c[i+8+(s<<5)>>3]=+c[T+(s<<5)>>3];c[i+8+(s<<5)+8>>3]=+c[T+(s<<5)+8>>3];c[i+8+(s<<5)+16>>3]=+c[T+(s<<5)+16>>3];c[i+8+(s<<5)+24>>3]=+c[T+(s<<5)+24>>3];s=s+1|0}while((s|0)!=3)}}}}}else if(s){s=0;do{c[i+8+(s<<5)>>3]=+c[T+(s<<5)>>3];c[i+8+(s<<5)+8>>3]=+c[T+(s<<5)+8>>3];c[i+8+(s<<5)+16>>3]=+c[T+(s<<5)+16>>3];c[i+8+(s<<5)+24>>3]=+c[T+(s<<5)+24>>3];s=s+1|0}while((s|0)!=3)}else o=d;while(0);ja(m);ja(v)}if(o<20){a[f>>2]=1;break}a[f>>2]=0;f=a[A>>2]|0;if((f|0)>0){s=a[i>>2]|0;u=0;do{l=a[s+(u*320|0)+304>>2]|0;if((l|0)>=0?(R=t+(l<<8)+236|0,(a[R>>2]|0)==0):0)a[R>>2]=8;u=u+1|0}while((u|0)<(f|0))}}else C=38;while(0);if((C|0)==38){a[i+104>>2]=0;o=-1}h=P;return+o}function Jo(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,O=0,L=0,N=0,F=0,D=0,I=0,U=0,H=0,z=0,B=0,j=0,V=0,G=0,W=0,X=0,Y=0,q=0;X=h;h=h+2544|0;G=X+208|0;V=X+200|0;O=X+184|0;j=X+176|0;P=X+168|0;C=X+152|0;B=X+144|0;R=X+136|0;U=X+128|0;I=X+120|0;D=X+112|0;A=X+104|0;s=X+96|0;o=X+88|0;r=X+80|0;i=X+72|0;n=X+64|0;L=X;N=X+2280|0;F=X+232|0;M=X+224|0;z=X+220|0;T=X+216|0;S=X+212|0;W=Yr(e,5306)|0;e:do if(!W){a[n>>2]=e;to(3,5308,n);n=fr(a[(hr()|0)>>2]|0)|0;a[i>>2]=5367;a[i+4>>2]=n;to(3,5361,i);n=0}else{Ko(N,W);a[r>>2]=z;if((aa(N,5368,r)|0)!=1){a[o>>2]=e;to(3,5371,o);Vr(W)|0;n=0;break}n=a[z>>2]|0;H=Ba(n*320|0)|0;if(!H){to(3,5472,s);bt(1)}v=L+8|0;_=L+16|0;y=L+24|0;b=L+32|0;w=L+40|0;x=L+48|0;E=L+56|0;k=(t|0)==0;t:do if((n|0)>0){n=0;r=0;n:while(1){Ko(N,W);i=H+(n*320|0)|0;o=H+(n*320|0)+312|0;a[A>>2]=o;a[A+4>>2]=M;if((aa(N,5489,A)|0)==1){m=a[o>>2]|0;a[i>>2]=(m&-32768|0)==0&0==0?m&32767:0;a[H+(n*320|0)+4>>2]=1;r=r|2}else{if(k){i=10;break}if(!(ao(F,e,2048,1)|0)){i=12;break}Ea(F,N,2047-(xa(F)|0)|0)|0;m=Ka(t,F)|0;a[i>>2]=m;if((m|0)<0){i=14;break}a[H+(n*320|0)+4>>2]=0;r=r|1}Ko(N,W);i=H+(n*320|0)+8|0;a[R>>2]=i;if((aa(N,5785,R)|0)!=1){i=18;break}Ko(N,W);p=H+(n*320|0)+16|0;g=H+(n*320|0)+24|0;m=H+(n*320|0)+40|0;a[C>>2]=p;a[C+4>>2]=g;a[C+8>>2]=H+(n*320|0)+32;a[C+12>>2]=m;if((aa(N,5894,C)|0)!=4){a[P>>2]=T;a[P+4>>2]=S;if((aa(N,5910,P)|0)==2)o=0;else{i=21;break}}else o=1;do{Ko(N,W);a[O>>2]=H+(n*320|0)+16+(o<<5);a[O+4>>2]=H+(n*320|0)+16+(o<<5)+8;a[O+8>>2]=H+(n*320|0)+16+(o<<5)+16;a[O+12>>2]=H+(n*320|0)+16+(o<<5)+24;if((aa(N,5894,O)|0)!=4){i=23;break n}o=o+1|0}while((o|0)<3);io(p,H+(n*320|0)+112|0)|0;q=+c[i>>3];Y=q*-.5;c[L>>3]=Y;q=q*.5;c[v>>3]=q;c[_>>3]=q;c[y>>3]=q;c[b>>3]=q;c[w>>3]=Y;c[x>>3]=Y;c[E>>3]=Y;i=H+(n*320|0)+48|0;o=H+(n*320|0)+56|0;s=H+(n*320|0)+72|0;l=H+(n*320|0)+80|0;u=H+(n*320|0)+88|0;f=H+(n*320|0)+104|0;d=0;do{Y=+c[L+(d<<4)>>3];q=+c[L+(d<<4)+8>>3];c[H+(n*320|0)+208+(d*24|0)>>3]=+c[m>>3]+(+c[p>>3]*Y+ +c[g>>3]*q);c[H+(n*320|0)+208+(d*24|0)+8>>3]=+c[s>>3]+(+c[i>>3]*Y+ +c[o>>3]*q);c[H+(n*320|0)+208+(d*24|0)+16>>3]=+c[f>>3]+(+c[l>>3]*Y+ +c[u>>3]*q);d=d+1|0}while((d|0)!=4);n=n+1|0;if((n|0)>=(a[z>>2]|0))break t}if((i|0)==10){a[D>>2]=e;a[D+4>>2]=N;to(3,5496,D)}else if((i|0)==12){a[I>>2]=e;to(3,5624,I)}else if((i|0)==14){a[U>>2]=e;a[U+4>>2]=F;to(3,5708,U)}else if((i|0)==18){a[B>>2]=e;a[B+4>>2]=n+1;to(3,5789,B)}else if((i|0)==21){a[j>>2]=e;a[j+4>>2]=n+1;to(3,5916,j)}else if((i|0)==23){a[V>>2]=e;a[V+4>>2]=n+1;to(3,5916,V)}Vr(W)|0;ja(H);n=0;break e}else r=0;while(0);Vr(W)|0;n=Ba(136)|0;if(!n){to(3,5472,G);bt(1)}a[n>>2]=H;a[n+4>>2]=a[z>>2];a[n+104>>2]=0;do if((r&3|0)!=3){i=n+108|0;if(!(r&1)){a[i>>2]=1;break}else{a[i>>2]=0;break}}else a[n+108>>2]=2;while(0);c[n+112>>3]=.5;c[n+120>>3]=.5}while(0);h=X;return n|0}function Ko(e,t){e=e|0;t=t|0;var n=0,r=0;e:do if(Xr(e,256,t)|0)while(1){n=xa(e)|0;t:do if(n)while(1){n=n+-1|0;r=e+n|0;switch(i[r>>0]|0){case 13:case 10:break;default:break t}i[r>>0]=0;if(!n)break t}while(0);switch(i[e>>0]|0){case 0:case 35:break;default:break e}if(!(Xr(e,256,t)|0))break e}while(0);return}function es(e,t,n,i){e=e|0;t=+t;n=+n;i=i|0;var r=0,o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0;v=h;h=h+400|0;d=v+296|0;m=v+200|0;p=v+128|0;g=v;l=a[e>>2]|0;r=a[e+4>>2]|0;if((yo(e+8|0,d,m)|0)<0)to(3,6025,v+392|0);else{s=+(r+-1|0);r=d+32|0;c[r>>3]=s*+c[d+64>>3]-+c[r>>3];r=d+40|0;c[r>>3]=s*+c[d+72>>3]-+c[r>>3];r=d+48|0;c[r>>3]=s*+c[d+80>>3]-+c[r>>3];r=d+56|0;c[r>>3]=s*+c[d+88>>3]-+c[r>>3];o=+c[d+80>>3];r=0;do{c[p+(r*24|0)>>3]=+c[d+(r<<5)>>3]/o;c[p+(r*24|0)+8>>3]=+c[d+(r<<5)+8>>3]/o;c[p+(r*24|0)+16>>3]=+c[d+(r<<5)+16>>3]/o;r=r+1|0}while((r|0)!=3);o=+(l+-1|0);c[g>>3]=+c[p>>3]*2/o;c[g+8>>3]=+c[p+8>>3]*2/o;c[g+16>>3]=+c[p+16>>3]*2/o+-1;l=g+24|0;a[l>>2]=0;a[l+4>>2]=0;a[l+8>>2]=0;a[l+12>>2]=0;c[g+40>>3]=+c[p+32>>3]*2/s;c[g+48>>3]=+c[p+40>>3]*2/s+-1;l=g+56|0;o=n-t;a[l>>2]=0;a[l+4>>2]=0;a[l+8>>2]=0;a[l+12>>2]=0;a[l+16>>2]=0;a[l+20>>2]=0;c[g+80>>3]=(t+n)/o;c[g+88>>3]=n*-2*t/o;l=g+96|0;a[l>>2]=0;a[l+4>>2]=0;a[l+8>>2]=0;a[l+12>>2]=0;c[g+112>>3]=1;c[g+120>>3]=0;o=+c[m+24>>3];s=+c[m+56>>3];n=+c[m+88>>3];l=0;do{t=+c[g+(l<<5)>>3];r=g+(l<<5)+8|0;e=g+(l<<5)+16|0;u=+c[r>>3];f=+c[e>>3];d=0;do{c[i+((d<<2)+l<<3)>>3]=t*+c[m+(d<<3)>>3]+u*+c[m+32+(d<<3)>>3]+f*+c[m+64+(d<<3)>>3];d=d+1|0}while((d|0)!=3);c[i+(l+12<<3)>>3]=+c[g+(l<<5)+24>>3]+(t*o+ +c[r>>3]*s+ +c[e>>3]*n);l=l+1|0}while((l|0)!=4)}h=v;return}function ts(e){e=e|0;a[496]=e;return}function ns(){return a[496]|0}function is(e){e=e|0;var t=0,n=0;t=e+212|0;n=a[t>>2]|0;if(n){Fu(n)|0;Jl(a[t>>2]|0)|0;a[t>>2]=0}t=e+224|0;if(a[t>>2]|0){Yl(t)|0;a[t>>2]=0}t=e+192|0;if(a[t>>2]|0){So(t)|0;a[t>>2]=0}return}function rs(e){e=e|0;var t=0,n=0,i=0,r=0,o=0;o=h;h=h+16|0;n=o;a[n>>2]=e;if(!(Ws(2044,n)|0))e=-1;else{r=Xs(2044,n)|0;e=r+196|0;t=a[e>>2]|0;if(t){ja(t);a[e>>2]=0;a[r+200>>2]=0}is(r);Uu(a[r+216>>2]|0)|0;Ys(2044,n)|0;n=r+248|0;i=r+252|0;e=a[n>>2]|0;if((a[i>>2]|0)!=(e|0)){t=0;do{qo(a[e+(t<<3)+4>>2]|0)|0;t=t+1|0;e=a[n>>2]|0}while(t>>>0<(a[i>>2]|0)-e>>3>>>0)}qs(n);Oi(n);qs(r+248|0);Oi(r);e=0}h=o;return e|0}function as(e){e=e|0;var t=0,n=0,r=0,o=0,s=0;s=h;h=h+208|0;o=s+192|0;r=s;n=s+196|0;if(!(i[e>>0]&1))t=e+1|0;else t=a[e+8>>2]|0;if((xo(t,1,r,s+184|0)|0)<0){if(!(i[e>>0]&1))t=e+1|0;else t=a[e+8>>2]|0;a[o>>2]=t;to(3,6093,o);t=-1}else{t=a[521]|0;a[521]=t+1;a[n>>2]=t;Qu(Zs(2064,n)|0,r|0,184)|0}h=s;return t|0}function os(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,u=0,f=0,d=0;d=h;h=h+48|0;f=d+24|0;u=d+16|0;s=d+8|0;r=d;n=d+32|0;i=d+28|0;a[n>>2]=e;a[i>>2]=t;do if((Ws(2044,n)|0)!=0?(l=Xs(2044,n)|0,(Qs(2064,i)|0)!=0):0){o=l+8|0;Qu(o|0,Zs(2064,i)|0,184)|0;i=a[o>>2]|0;n=l+204|0;t=a[l+12>>2]|0;e=l+208|0;if(!((i|0)==(a[n>>2]|0)?(t|0)==(a[e>>2]|0):0)){a[r>>2]=i;a[r+4>>2]=t;to(2,6152,r);_o(o,a[n>>2]|0,a[e>>2]|0,o)|0}is(l);n=To(o,15)|0;e=l+192|0;a[e>>2]=n;if(!n){to(3,6199,s);n=-1;break}n=ql(n)|0;t=l+212|0;a[t>>2]=n;if(!n){to(3,6237,u);n=-1;break}Zl(n,2)|0;u=Wl(o)|0;a[l+224>>2]=u;if(!u){to(3,6274,f);n=-1;break}else{Nu(a[t>>2]|0,a[l+216>>2]|0)|0;es(a[e>>2]|0,+c[l+232>>3],+c[l+240>>3],l+264|0);n=0;break}}else n=-1;while(0);h=d;return n|0}function ss(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,s=0,l=0;l=h;h=h+16|0;s=l+8|0;o=l;n=l+12|0;a[n>>2]=e;if(Ws(2044,n)|0){r=Xs(2044,n)|0;if(!(i[t>>0]&1))t=t+1|0;else t=a[t+8>>2]|0;e=r+216|0;n=Ka(a[e>>2]|0,t)|0;a[r+260>>2]=n;if((n|0)<0){a[o>>2]=t;to(3,6312,o);Uu(a[e>>2]|0)|0;to(3,6358,s);n=-1}}else n=-1;h=l;return n|0}function ls(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,s=0,l=0,u=0,c=0;c=h;h=h+32|0;o=c+16|0;r=c+8|0;n=c+20|0;u=c;a[n>>2]=e;do if(Ws(2044,n)|0){l=Xs(2044,n)|0;if(!(i[t>>0]&1))n=t+1|0;else n=a[t+8>>2]|0;e=a[l+212>>2]|0;t=l+216|0;s=l+220|0;n=Jo(n,a[t>>2]|0)|0;a[s>>2]=n;if(!n){to(3,6402,r);Uu(a[t>>2]|0)|0;to(3,6429,o);n=-1;break}switch(a[n+108>>2]|0){case 0:{su(e,0)|0;break}case 1:{su(e,2)|0;break}default:su(e,3)|0}e=l+248|0;t=l+252|0;r=a[t>>2]|0;n=r-(a[e>>2]|0)>>3;o=u;a[o>>2]=0;a[o+4>>2]=0;a[u>>2]=n;a[u+4>>2]=a[s>>2];if((r|0)==(a[l+256>>2]|0)){$s(e,u);break}else{l=u;n=a[l>>2]|0;l=a[l+4>>2]|0;u=r;a[u>>2]=n;a[u+4>>2]=l;a[t>>2]=(a[t>>2]|0)+8;break}}else n=-1;while(0);h=c;return n|0}function us(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0;o=h;h=h+16|0;n=o;a[n>>2]=e;if(((Ws(2044,n)|0)!=0?(i=Xs(2044,n)|0,(t|0)>=0):0)?(r=a[i+248>>2]|0,(a[i+252>>2]|0)-r>>3>>>0>t>>>0):0)n=a[(a[r+(t<<3)+4>>2]|0)+4>>2]|0;else n=-1;h=o;return n|0}function cs(e){e=e|0;var t=0,n=0;n=h;h=h+16|0;t=n;a[t>>2]=e;if(!(Ws(2044,t)|0))t=-1;else{t=Xs(2044,t)|0;t=(a[t+252>>2]|0)-(a[t+248>>2]|0)>>3}h=n;return t|0}function hs(e,t){e=e|0;t=+t;var n=0,i=0;i=h;h=h+16|0;n=i;a[n>>2]=e;if(Ws(2044,n)|0)c[(Xs(2044,n)|0)+232>>3]=t;h=i;return}function fs(e){e=e|0;var t=0,n=0,i=0;i=h;h=h+16|0;n=i;a[n>>2]=e;if(!(Ws(2044,n)|0))t=-1;else t=+c[(Xs(2044,n)|0)+232>>3];h=i;return+t}function ds(e,t){e=e|0;t=+t;var n=0,i=0;i=h;h=h+16|0;n=i;a[n>>2]=e;if(Ws(2044,n)|0)c[(Xs(2044,n)|0)+240>>3]=t;h=i;return}function ps(e){e=e|0;var t=0,n=0,i=0;i=h;h=h+16|0;n=i;a[n>>2]=e;if(!(Ws(2044,n)|0))t=-1;else t=+c[(Xs(2044,n)|0)+240>>3];h=i;return+t}function gs(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;r=h;h=h+16|0;i=r;n=r+4|0;a[n>>2]=e;if((Ws(2044,n)|0)!=0?(su(a[(Xs(2044,n)|0)+212>>2]|0,t)|0)==0:0){a[i>>2]=t;to(1,6478,i)}h=r;return}function ms(e){e=e|0;var t=0,n=0,i=0;i=h;h=h+16|0;t=i+4|0;n=i;a[t>>2]=e;if(!(Ws(2044,t)|0)){h=i;return-1}else{e=(cu(a[(Xs(2044,t)|0)+212>>2]|0,n)|0)==0;h=i;return(e?a[n>>2]|0:-1)|0}return 0}function vs(e,t){e=e|0;t=+t;var n=0,i=0,r=0,o=0,s=0,l=0;l=h;h=h+16|0;s=l;n=l+8|0;a[n>>2]=e;if((((Ws(2044,n)|0)!=0?(i=Xs(2044,n)|0,!(t<=0|t>=1)):0)?(r=t,o=a[i+212>>2]|0,(o|0)!=0):0)?(hu(o,r)|0)==0:0){c[s>>3]=r;to(1,6513,s)}h=l;return}function _s(e){e=e|0;var t=0,n=0,i=0,r=0;r=h;h=h+16|0;t=r+8|0;i=r;a[t>>2]=e;if((Ws(2044,t)|0)!=0?(n=a[(Xs(2044,t)|0)+212>>2]|0,(n|0)!=0):0){e=(fu(n,i)|0)==0;h=r;return+(e?+c[i>>3]:-1)}h=r;return-1}function ys(e,t){e=e|0;t=t|0;var n=0,i=0;i=h;h=h+16|0;n=i;a[n>>2]=e;if(Ws(2044,n)|0)lu(a[(Xs(2044,n)|0)+212>>2]|0,t)|0;h=i;return}function bs(e){e=e|0;var t=0,n=0,i=0;i=h;h=h+16|0;t=i+4|0;n=i;a[t>>2]=e;if(!(Ws(2044,t)|0))t=-1;else{uu(a[(Xs(2044,t)|0)+212>>2]|0,n)|0;t=a[n>>2]|0}h=i;return t|0}function ws(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;r=h;h=h+16|0;i=r;n=r+4|0;a[n>>2]=e;if((Ws(2044,n)|0)!=0?(eu(a[(Xs(2044,n)|0)+212>>2]|0,t)|0)==0:0){a[i>>2]=t;to(1,6544,i)}h=r;return}function xs(e){e=e|0;var t=0,n=0,i=0;i=h;h=h+16|0;t=i+4|0;n=i;a[t>>2]=e;if(!(Ws(2044,t)|0)){h=i;return-1}else{e=(tu(a[(Xs(2044,t)|0)+212>>2]|0,n)|0)==0;h=i;return(e?a[n>>2]|0:-1)|0}return 0}function Es(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0;o=h;h=h+16|0;r=o;n=o+4|0;a[n>>2]=e;if(((Ws(2044,n)|0)!=0?(i=Xs(2044,n)|0,t>>>0<=255):0)?(nu(a[i+212>>2]|0,t)|0)==0:0){a[r>>2]=t;to(1,6569,r)}h=o;return}function ks(e){e=e|0;var t=0,n=0,i=0;i=h;h=h+16|0;t=i+4|0;n=i;a[t>>2]=e;if(!(Ws(2044,t)|0)){h=i;return-1}else{e=(iu(a[(Xs(2044,t)|0)+212>>2]|0,n)|0)==0;h=i;return(e?a[n>>2]|0:-1)|0}return 0}function Ms(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;r=h;h=h+16|0;i=r;n=r+4|0;a[n>>2]=e;if((Ws(2044,n)|0)!=0?($l(a[(Xs(2044,n)|0)+212>>2]|0,t)|0)==0:0){a[i>>2]=t;to(1,6590,i)}h=r;return}function Ts(e){e=e|0;var t=0,n=0,i=0;i=h;h=h+16|0;t=i+4|0;n=i;a[t>>2]=e;if(!(Ws(2044,t)|0)){h=i;return-1}else{e=(ru(a[(Xs(2044,t)|0)+212>>2]|0,n)|0)==0;h=i;return(e?a[n>>2]|0:-1)|0}return 0}function Ss(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;r=h;h=h+16|0;i=r;n=r+4|0;a[n>>2]=e;if(!(Ws(2044,n)|0))t=0;else{e=(t|0)!=0;Ql(a[(Xs(2044,n)|0)+212>>2]|0,e&1)|0;a[i>>2]=e?6616:6620;to(1,6625,i)}h=r;return t|0}function As(e){e=e|0;var t=0,n=0;n=h;h=h+16|0;t=n;a[t>>2]=e;if(!(Ws(2044,t)|0))t=0;else t=a[(a[(Xs(2044,t)|0)+212>>2]|0)+4834148>>2]|0;h=n;return t|0}function Rs(e){e=e|0;var t=0,n=0,i=0;i=h;h=h+16|0;t=i+4|0;n=i;a[t>>2]=e;if(!(Ws(2044,t)|0))t=0;else{Kl(a[(Xs(2044,t)|0)+212>>2]|0,n)|0;t=a[n>>2]|0}h=i;return t|0}function Cs(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;r=h;h=h+16|0;i=r;n=r+4|0;a[n>>2]=e;if((Ws(2044,n)|0)!=0?(au(a[(Xs(2044,n)|0)+212>>2]|0,t)|0)==0:0){a[i>>2]=t;to(1,6647,i)}h=r;return}function Ps(e){e=e|0;var t=0,n=0,i=0;i=h;h=h+16|0;t=i+4|0;n=i;a[t>>2]=e;if(!(Ws(2044,t)|0)){h=i;return-1}else{e=(ou(a[(Xs(2044,t)|0)+212>>2]|0,n)|0)==0;h=i;return(e?a[n>>2]|0:-1)|0}return 0}function Os(e,t){e=e|0;t=t|0;var n=0;n=0;do{c[t+(n<<5)>>3]=+c[e+(n<<5)>>3];c[t+(n<<5)+8>>3]=+c[e+(n<<5)+8>>3];c[t+(n<<5)+16>>3]=+c[e+(n<<5)+16>>3];c[t+(n<<5)+24>>3]=+c[e+(n<<5)+24>>3];n=n+1|0}while((n|0)!=3);return}function Ls(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;r=h;h=h+16|0;i=r;a[i>>2]=e;do if(Ws(2044,i)|0){i=Xs(2044,i)|0;e=a[i+212>>2]|0;if((a[e+44>>2]|0)>(t|0)){+bu(a[i+224>>2]|0,(t|0)<0?8:e+48+(t<<8)|0,+(n|0),264);i=0;break}else{i=a[523]|0;break}}else i=a[522]|0;while(0);h=r;return i|0}function Ns(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;r=h;h=h+16|0;i=r;a[i>>2]=e;do if(Ws(2044,i)|0){i=Xs(2044,i)|0;e=a[i+212>>2]|0;if((a[e+44>>2]|0)>(t|0)){+wu(a[i+224>>2]|0,(t|0)<0?8:e+48+(t<<8)|0,264,+(n|0),264);i=0;break}else{i=a[523]|0;break}}else i=a[522]|0;while(0);h=r;return i|0}function Fs(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;r=h;h=h+16|0;i=r;a[i>>2]=e;do if(Ws(2044,i)|0){i=a[(Xs(2044,i)|0)+212>>2]|0;if((a[i+44>>2]|0)>(t|0)){a[((t|0)<0?8:i+48+(t<<8)|0)+16>>2]=n;i=0;break}else{i=a[523]|0;break}}else i=a[522]|0;while(0);h=r;return i|0}function Ds(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,u=0,f=0,d=0,p=0;i=h;h=h+16|0;n=i;a[n>>2]=e;do if(Ws(2044,n)|0){n=a[(Xs(2044,n)|0)+212>>2]|0;if((a[n+44>>2]|0)>(t|0)){n=(t|0)<0?8:n+48+(t<<8)|0;p=+c[33];c[n+168>>3]=p;l=+c[34];c[n+176>>3]=l;d=+c[35];c[n+184>>3]=d;s=+c[36];c[n+192>>3]=s;f=+c[37];c[n+200>>3]=f;o=+c[38];c[n+208>>3]=o;u=+c[39];c[n+216>>3]=u;r=+c[40];c[n+224>>3]=r;c[n+56>>3]=(p+d+f+u)*.25;c[n+64>>3]=(l+s+o+r)*.25;n=0;break}else{n=a[523]|0;break}}else n=a[522]|0;while(0);h=i;return n|0}function Is(e,t){e=e|0;t=t|0;var n=0,i=0;i=h;h=h+16|0;n=i;a[n>>2]=e;do if(Ws(2044,n)|0){n=Xs(2044,n)|0;e=a[n+248>>2]|0;if((t|0)<0?1:(a[n+252>>2]|0)-e>>3>>>0<=t>>>0){n=a[524]|0;break}else{t=a[e+(t<<3)+4>>2]|0;e=a[n+212>>2]|0;+Qo(a[n+224>>2]|0,e+48|0,a[e+44>>2]|0,t);Os(t+8|0,264);n=0;break}}else n=a[522]|0;while(0);h=i;return n|0}function Us(e,t){e=e|0;t=t|0;var n=0,i=0;i=h;h=h+16|0;n=i;a[n>>2]=e;do if(Ws(2044,n)|0){n=Xs(2044,n)|0;e=a[n+248>>2]|0;if((t|0)<0?1:(a[n+252>>2]|0)-e>>3>>>0<=t>>>0){n=a[524]|0;break}else{t=a[e+(t<<3)+4>>2]|0;e=a[n+212>>2]|0;+Zo(a[n+224>>2]|0,e+48|0,a[e+44>>2]|0,t);Os(t+8|0,264);n=0;break}}else n=a[522]|0;while(0);h=i;return n|0}function Hs(e){e=e|0;var t=0,n=0;n=h;h=h+16|0;t=n;a[t>>2]=e;if(!(Ws(2044,t)|0))t=a[522]|0;else{t=Xs(2044,t)|0;t=du(a[t+212>>2]|0,a[t+196>>2]|0)|0}h=n;return t|0}function zs(e){e=e|0;var t=0,n=0;n=h;h=h+16|0;t=n;a[t>>2]=e;if(!(Ws(2044,t)|0))t=2088;else t=(a[(Xs(2044,t)|0)+212>>2]|0)+44|0;h=n;return a[t>>2]|0}function Bs(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;r=h;h=h+16|0;i=r;a[i>>2]=e;do if(Ws(2044,i)|0){e=Xs(2044,i)|0;i=a[e+248>>2]|0;if((t|0)<0?1:(a[e+252>>2]|0)-i>>3>>>0<=t>>>0){i=a[524]|0;break}i=a[i+(t<<3)+4>>2]|0;if((n|0)<0?1:(a[i+4>>2]|0)<=(n|0)){i=a[523]|0;break}else{i=a[i>>2]|0;Os(i+(n*320|0)+16|0,264);zt(0,a[i+(n*320|0)+304>>2]|0,a[i+(n*320|0)>>2]|0,a[i+(n*320|0)+4>>2]|0,+ +c[i+(n*320|0)+8>>3])|0;i=0;break}}else i=a[522]|0;while(0);h=r;return i|0}function js(e,t){e=e|0;t=t|0;var n=0,i=0;i=h;h=h+16|0;n=i;a[n>>2]=e;do if(Ws(2044,n)|0){n=a[(Xs(2044,n)|0)+212>>2]|0;if((a[n+44>>2]|0)>(t|0)){n=(t|0)<0?8:n+48+(t<<8)|0;We(1,a[n>>2]|0,a[n+4>>2]|0,a[n+8>>2]|0,a[n+12>>2]|0,a[n+16>>2]|0,a[n+20>>2]|0,a[n+24>>2]|0,+ +c[n+32>>3],+ +c[n+40>>3],+ +c[n+48>>3],+ +c[n+56>>3],+ +c[n+64>>3],+ +c[n+72>>3],+ +c[n+80>>3],+ +c[n+88>>3],+ +c[n+96>>3],+ +c[n+104>>3],+ +c[n+112>>3],+ +c[n+120>>3],+ +c[n+128>>3],+ +c[n+136>>3],+ +c[n+144>>3],+ +c[n+152>>3],+ +c[n+160>>3],+ +c[n+168>>3],+ +c[n+176>>3],+ +c[n+184>>3],+ +c[n+192>>3],+ +c[n+200>>3],+ +c[n+208>>3],+ +c[n+216>>3],+ +c[n+224>>3],a[n+240>>2]|0)|0;n=0;break}else{n=a[523]|0;break}}else n=a[522]|0;while(0);h=i;return n|0}function Vs(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,s=0,l=0;s=h;h=h+16|0;o=s+8|0;r=s+12|0;i=a[525]|0;a[525]=i+1;a[r>>2]=i;r=Xs(2044,r)|0;a[r>>2]=i;a[r+204>>2]=e;a[r+208>>2]=t;l=ne(e<<2,t)|0;t=r+200|0;a[t>>2]=l;e=r+196|0;a[e>>2]=Ba(l)|0;l=Du()|0;a[r+216>>2]=l;if(!l)to(3,8285,s);os(i,n)|0;a[o>>2]=a[t>>2];to(1,8322,o);Ht(2,a[r>>2]|0,a[e>>2]|0,a[t>>2]|0,r+264|0,264)|0;h=s;return a[r>>2]|0}function Gs(e){e=e|0;var t=0;e=h;h=h+16|0;t=e;Js(8591,7);Ks(8597,3);el(8606,2);el(8617,3);tl(8633,4);Ks(8651,4);nl(8671,5);Js(8683,8);tl(8700,5);Js(8720,9);Js(8738,10);tl(8760,6);tl(8783,7);Ks(8812,6);Ks(8825,7);Js(8838,11);tl(8857,8);tl(8867,9);Ks(8880,8);Ks(8893,9);il(8912,10);rl(8924,1);al(8936,1);ol(8959,1);al(8982,2);ol(9004,2);sl(9026,1);Ks(9043,10);sl(9060,2);Ks(9073,11);sl(9086,3);Ks(9110,12);ll(9134,3);ol(9147,3);sl(9160,4);Ks(9178,13);sl(9196,5);Ks(9212,14);sl(9228,6);Ks(9245,15);ul(9262,2088);ul(9291,2096);ul(9319,2092);Pt(9352,680,0);Pt(9369,680,1);Pt(9385,680,0);Pt(9407,680,0);Pt(9432,680,1);Pt(9457,680,1);Pt(9482,680,100);Pt(9509,680,0);Pt(9535,680,1);Pt(9561,680,0);Pt(9588,680,0);Pt(9615,680,1);Pt(9641,680,2);Pt(9666,680,3);Pt(9704,680,4);Pt(9741,680,0);Pt(9775,680,0);Pt(9799,680,1);Pt(9825,680,2);Pt(9852,680,2);Pt(9886,680,5);c[t>>3]=.5;cl(9904,t);Pt(9925,680,0);Pt(9944,680,1);Pt(9962,680,2);Pt(9980,680,3);Pt(9999,680,4);Pt(10021,680,3);Pt(10040,680,515);Pt(10069,680,259);Pt(10097,680,4);Pt(10116,680,772);Pt(10146,680,1028);Pt(10176,680,0);Pt(10207,680,1);Pt(10243,680,2);Pt(10277,680,3);Pt(10315,680,0);Pt(10348,680,1);Pt(10395,680,2);Pt(10437,680,3);Pt(10480,680,4);Pt(10532,680,5);Pt(10583,680,6);Pt(10628,680,7);Pt(10667,680,8);Pt(10712,680,9);h=e;return}function Ws(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0;n=a[t>>2]|0;r=a[e+4>>2]|0;e:do if(r){o=r+-1|0;s=(o&r|0)==0;if(s)i=o&n;else i=(n>>>0)%(r>>>0)|0;t=a[(a[e>>2]|0)+(i<<2)>>2]|0;if(t){do{t=a[t>>2]|0;if(!t){t=0;break e}e=a[t+4>>2]|0;if(s)e=e&o;else e=(e>>>0)%(r>>>0)|0;if((e|0)!=(i|0)){t=0;break e}}while((a[t+8>>2]|0)!=(n|0))}else t=0}else t=0;while(0);return t|0}function Xs(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0;o=h;h=h+32|0;r=o+8|0;i=o;n=Ws(e,t)|0;if(!n){vi(r,e,t);_i(i,e,a[r>>2]|0);n=a[i>>2]|0;a[r>>2]=0}h=o;return n+16|0}function Ys(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;r=h;h=h+16|0;n=r+4|0;i=r;t=Ws(e,t)|0;if(!t)t=0;else{a[i>>2]=t;a[n>>2]=a[i>>2];gi(e,n)|0;t=1}h=r;return t|0}function qs(e){e=e|0;var t=0,n=0;n=a[e>>2]|0;if(n){t=e+4|0;e=a[t>>2]|0;if((e|0)!=(n|0)){do e=e+-8|0;while((e|0)!=(n|0));a[t>>2]=e}Oi(n)}return}function Zs(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0;o=h;h=h+32|0;r=o+8|0;i=o;n=Qs(e,t)|0;if(!n){Ll(r,e,t);Nl(i,e,a[r>>2]|0);n=a[i>>2]|0;a[r>>2]=0}h=o;return n+16|0}function Qs(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0;n=a[t>>2]|0;r=a[e+4>>2]|0;e:do if(r){o=r+-1|0;s=(o&r|0)==0;if(s)i=o&n;else i=(n>>>0)%(r>>>0)|0;t=a[(a[e>>2]|0)+(i<<2)>>2]|0;if(t){do{t=a[t>>2]|0;if(!t){t=0;break e}e=a[t+4>>2]|0;if(s)e=e&o;else e=(e>>>0)%(r>>>0)|0;if((e|0)!=(i|0)){t=0;break e}}while((a[t+8>>2]|0)!=(n|0))}else t=0}else t=0;while(0);return t|0}function $s(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0;l=h;h=h+32|0;s=l;o=e+4|0;n=a[e>>2]|0;r=((a[o>>2]|0)-n>>3)+1|0;if(r>>>0>536870911)Ci(e);i=n;n=(a[e+8>>2]|0)-i|0;if(n>>3>>>0<268435455){n=n>>2;n=n>>>0<r>>>0?r:n}else n=536870911;Cl(s,n,(a[o>>2]|0)-i>>3,e+8|0);o=s+8|0;r=a[o>>2]|0;n=t;i=a[n+4>>2]|0;t=r;a[t>>2]=a[n>>2];a[t+4>>2]=i;a[o>>2]=r+8;Pl(e,s);Ol(s);h=l;return}function Js(e,t){e=e|0;t=t|0;Ve(e|0,4,2200,10911,1,t|0);return}function Ks(e,t){e=e|0;t=t|0;Ve(e|0,2,2192,10801,10,t|0);return}function el(e,t){e=e|0;t=t|0;Ve(e|0,3,2180,10906,12,t|0);return}function tl(e,t){e=e|0;t=t|0;Ve(e|0,3,2168,10906,13,t|0);return}function nl(e,t){e=e|0;t=t|0;Ve(e|0,2,2160,10801,11,t|0);return}function il(e,t){e=e|0;t=t|0;Ve(e|0,2,2152,10797,7,t|0);return}function rl(e,t){e=e|0;t=t|0;Ve(e|0,1,2148,10794,16,t|0);return}function al(e,t){e=e|0;t=t|0;Ve(e|0,3,2136,10789,1,t|0);return}function ol(e,t){e=e|0;t=t|0;Ve(e|0,2,2128,10785,1,t|0);return}function sl(e,t){e=e|0;t=t|0;Ve(e|0,3,2116,10780,1,t|0);return}function ll(e,t){e=e|0;t=t|0;Ve(e|0,3,2104,10775,2,t|0);return}function ul(e,t){e=e|0;t=t|0;Pt(e|0,680,a[t>>2]|0);return}function cl(e,t){e=e|0;t=t|0;Pt(e|0,720,~~+c[t>>3]>>>0|0);return}function hl(){a[511]=0;a[512]=0;a[513]=0;a[514]=0;u[515]=1;Et(11,2044,m|0)|0;a[516]=0;a[517]=0;a[518]=0;a[519]=0;u[520]=1;Et(12,2064,m|0)|0;Gs(0);return}function fl(e){e=e|0;ml(e);return}function dl(e){e=e|0;pl(e);return}function pl(e){e=e|0;var t=0;gl(e,a[e+8>>2]|0);t=a[e>>2]|0;a[e>>2]=0;if(t)Oi(t);return}function gl(e,t){e=e|0;t=t|0;if(t)do{e=t;t=a[t>>2]|0;Oi(e)}while((t|0)!=0);return}function ml(e){e=e|0;var t=0;vl(e,a[e+8>>2]|0);t=a[e>>2]|0;a[e>>2]=0;if(t)Oi(t);return}function vl(e,t){e=e|0;t=t|0;if(t)do{e=t;t=a[t>>2]|0;qs(e+264|0);Oi(e)}while((t|0)!=0);return}function _l(e,t,n){e=e|0;t=t|0;n=+n;Bc[e&3](t,n);return}function yl(e,t,n){e=e|0;t=t|0;n=n|0;Wc[e&7](t,n);return}function bl(e,t){e=e|0;t=t|0;return+ +jc[e&3](t)}function wl(e,t,n){e=e|0;t=t|0;n=+n;Bc[e&3](t,n);return}function xl(e){e=e|0;return Vc[e&1]()|0}function El(e,t){e=e|0;t=t|0;Gc[e&15](t);return}function kl(e,t){e=e|0;t=t|0;var n=0,i=0;n=h;h=h+16|0;i=n;Ml(i,t);e=Xc[e&31](i)|0;Vu(i);h=n;return e|0}function Ml(e,t){e=e|0;t=t|0;ju(e,t+4|0,a[t>>2]|0);return}function Tl(e,t,n){e=e|0;t=t|0;n=n|0;return Jc[e&15](t,n)|0}function Sl(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;i=h;h=h+16|0;r=i;Ml(r,n);e=Jc[e&15](t,r)|0;Vu(r);h=i;return e|0}function Al(e,t){
e=e|0;t=t|0;return Xc[e&31](t)|0}function Rl(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;return Uc[e&15](t,n,i)|0}function Cl(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;a[e+12>>2]=0;a[e+16>>2]=i;if(!t)i=0;else i=Pi(t<<3)|0;a[e>>2]=i;n=i+(n<<3)|0;a[e+8>>2]=n;a[e+4>>2]=n;a[e+12>>2]=i+(t<<3);return}function Pl(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0;i=a[e>>2]|0;o=e+4|0;n=t+4|0;r=(a[o>>2]|0)-i|0;s=(a[n>>2]|0)+(0-(r>>3)<<3)|0;a[n>>2]=s;Qu(s|0,i|0,r|0)|0;r=a[e>>2]|0;a[e>>2]=a[n>>2];a[n>>2]=r;r=t+8|0;i=a[o>>2]|0;a[o>>2]=a[r>>2];a[r>>2]=i;r=e+8|0;e=t+12|0;i=a[r>>2]|0;a[r>>2]=a[e>>2];a[e>>2]=i;a[t>>2]=a[n>>2];return}function Ol(e){e=e|0;var t=0,n=0,i=0;n=a[e+4>>2]|0;i=e+8|0;t=a[i>>2]|0;if((t|0)!=(n|0)){do t=t+-8|0;while((t|0)!=(n|0));a[i>>2]=t}t=a[e>>2]|0;if(t)Oi(t);return}function Ll(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=Pi(200)|0;a[i+8>>2]=a[n>>2];Xu(i+16|0,0,184)|0;a[e>>2]=i;e=e+4|0;a[e>>2]=t+8;a[e+4>>2]=257;return}function Nl(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,s=0,l=0,c=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0;f=a[n+8>>2]|0;_=n+4|0;a[_>>2]=f;v=t+4|0;h=a[v>>2]|0;m=(h|0)==0;e:do if(!m){d=h+-1|0;p=(d&h|0)==0;if(p)o=d&f;else o=(f>>>0)%(h>>>0)|0;r=a[(a[t>>2]|0)+(o<<2)>>2]|0;if(!r)g=12;else while(1){s=a[r>>2]|0;if(!s){g=12;break e}r=a[s+4>>2]|0;if(p)r=r&d;else r=(r>>>0)%(h>>>0)|0;if((r|0)!=(o|0)){g=12;break e}if((a[s+8>>2]|0)==(f|0)){r=0;n=s;break}else r=s}}else{o=0;g=12}while(0);if((g|0)==12){f=t+12|0;l=+(((a[f>>2]|0)+1|0)>>>0);c=+u[t+16>>2];do if(m|l>+(h>>>0)*c){if(h>>>0>2)r=(h+-1&h|0)==0;else r=0;s=(r&1|h<<1)^1;r=~~+te(+(l/c))>>>0;di(t,s>>>0<r>>>0?r:s);s=a[v>>2]|0;r=a[_>>2]|0;o=s+-1|0;if(!(o&s)){h=s;o=o&r;break}else{h=s;o=(r>>>0)%(s>>>0)|0;break}}while(0);r=a[(a[t>>2]|0)+(o<<2)>>2]|0;if(!r){r=t+8|0;a[n>>2]=a[r>>2];a[r>>2]=n;a[(a[t>>2]|0)+(o<<2)>>2]=r;r=a[n>>2]|0;if(r){r=a[r+4>>2]|0;o=h+-1|0;if(!(o&h))r=r&o;else r=(r>>>0)%(h>>>0)|0;a[(a[t>>2]|0)+(r<<2)>>2]=n}}else{a[n>>2]=a[r>>2];a[r>>2]=n}a[f>>2]=(a[f>>2]|0)+1;r=1}a[e>>2]=n;i[e+4>>0]=r;return}function Fl(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;g=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=g;d=g+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=s*3|0;M=t+-1|0;if((n|0)>0){u=0;s=g;f=g+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{s=s+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;x=0-t|0;b=1-t|0;w=~t;e:do if((S|0)>1){E=(M|0)>1;p=(a[l+4>>2]|0)+u|0;k=1;d=e+(u*3|0)|0;e=g+(u<<1)|0;s=0;t:while(1){if(E){u=p;y=1;_=d;v=s;while(1){do if(((o[_+1>>0]|0)+(o[_>>0]|0)+(o[_+2>>0]|0)|0)>(T|0)){i[u>>0]=-1;s=r[e+(x<<1)>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}p=r[e+(b<<1)>>1]|0;g=p<<16>>16;s=r[e+(w<<1)>>1]|0;m=s<<16>>16;d=s<<16>>16>0;if(p<<16>>16<=0){if(d){r[e>>1]=s;s=m*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=r[e+-2>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(y|0)){s=v;break}a[s>>2]=y;s=v;break}else{s=v+1|0;if((v|0)>32767)break t;r[e>>1]=s;a[l+1179664+(v<<2)>>2]=s<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=y;a[l+1310736+(v+2<<2)>>2]=k;a[l+1310736+(v+3<<2)>>2]=y;a[l+1310736+(v+4<<2)>>2]=y;a[l+1310736+(v+5<<2)>>2]=k;a[l+1310736+(v+6<<2)>>2]=k;break}}if(d){s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+(m+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}d=r[e+-2>>1]|0;if(d<<16>>16<=0){r[e>>1]=p;s=g*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+k;s=v}else{r[e>>1]=0;i[u>>0]=0;s=v}while(0);y=y+1|0;d=_+3|0;e=e+2|0;u=u+1|0;if((y|0)>=(M|0))break;else{_=d;v=s}}}else u=p;k=k+1|0;if((k|0)>=(S|0)){g=s;R=52;break e}else{p=u+2|0;d=d+6|0;e=e+4|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){e=l+12|0;if((g|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(g|0)){d=d+1|0;f=f+4|0}else break}}p=l+8|0;u=s+-1|0;a[p>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[p>>2]|0))}if((g|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;d=e*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;e=e+1|0}while((e|0)<(g|0))}if((a[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[p>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function Dl(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;g=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=g;d=g+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=s*3|0;M=t+-1|0;if((n|0)>0){u=0;s=g;f=g+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{s=s+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;x=0-t|0;b=1-t|0;w=~t;e:do if((S|0)>1){E=(M|0)>1;p=(a[l+4>>2]|0)+u|0;k=1;d=e+(u<<1)|0;e=g+(u<<1)|0;s=0;t:while(1){if(E){u=p;y=1;_=d;v=s;while(1){g=o[_>>0]|0;m=o[_+1>>0]|0;do if(((g&248)+10+(g<<5&224)+(m>>>3&28)+(m<<3&248)|0)>(T|0)){i[u>>0]=-1;s=r[e+(x<<1)>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}p=r[e+(b<<1)>>1]|0;g=p<<16>>16;s=r[e+(w<<1)>>1]|0;m=s<<16>>16;d=s<<16>>16>0;if(p<<16>>16<=0){if(d){r[e>>1]=s;s=m*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=r[e+-2>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(y|0)){s=v;break}a[s>>2]=y;s=v;break}else{s=v+1|0;if((v|0)>32767)break t;r[e>>1]=s;a[l+1179664+(v<<2)>>2]=s<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=y;a[l+1310736+(v+2<<2)>>2]=k;a[l+1310736+(v+3<<2)>>2]=y;a[l+1310736+(v+4<<2)>>2]=y;a[l+1310736+(v+5<<2)>>2]=k;a[l+1310736+(v+6<<2)>>2]=k;break}}if(d){s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+(m+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}d=r[e+-2>>1]|0;if(d<<16>>16<=0){r[e>>1]=p;s=g*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+k;s=v}else{r[e>>1]=0;i[u>>0]=0;s=v}while(0);y=y+1|0;d=_+2|0;e=e+2|0;u=u+1|0;if((y|0)>=(M|0))break;else{_=d;v=s}}}else u=p;k=k+1|0;if((k|0)>=(S|0)){g=s;R=52;break e}else{p=u+2|0;d=d+4|0;e=e+4|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){e=l+12|0;if((g|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(g|0)){d=d+1|0;f=f+4|0}else break}}p=l+8|0;u=s+-1|0;a[p>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[p>>2]|0))}if((g|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;d=e*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;e=e+1|0}while((e|0)<(g|0))}if((a[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[p>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function Il(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;g=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=g;d=g+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=s*3|0;M=t+-1|0;if((n|0)>0){u=0;s=g;f=g+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{s=s+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;x=0-t|0;b=1-t|0;w=~t;e:do if((S|0)>1){E=(M|0)>1;p=(a[l+4>>2]|0)+u|0;k=1;d=e+(u<<2)|0;e=g+(u<<1)|0;s=0;t:while(1){if(E){u=p;y=1;_=d;v=s;while(1){do if(((o[_+1>>0]|0)+(o[_>>0]|0)+(o[_+2>>0]|0)|0)>(T|0)){i[u>>0]=-1;s=r[e+(x<<1)>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}p=r[e+(b<<1)>>1]|0;g=p<<16>>16;s=r[e+(w<<1)>>1]|0;m=s<<16>>16;d=s<<16>>16>0;if(p<<16>>16<=0){if(d){r[e>>1]=s;s=m*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=r[e+-2>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(y|0)){s=v;break}a[s>>2]=y;s=v;break}else{s=v+1|0;if((v|0)>32767)break t;r[e>>1]=s;a[l+1179664+(v<<2)>>2]=s<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=y;a[l+1310736+(v+2<<2)>>2]=k;a[l+1310736+(v+3<<2)>>2]=y;a[l+1310736+(v+4<<2)>>2]=y;a[l+1310736+(v+5<<2)>>2]=k;a[l+1310736+(v+6<<2)>>2]=k;break}}if(d){s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+(m+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}d=r[e+-2>>1]|0;if(d<<16>>16<=0){r[e>>1]=p;s=g*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+k;s=v}else{r[e>>1]=0;i[u>>0]=0;s=v}while(0);y=y+1|0;d=_+4|0;e=e+2|0;u=u+1|0;if((y|0)>=(M|0))break;else{_=d;v=s}}}else u=p;k=k+1|0;if((k|0)>=(S|0)){g=s;R=52;break e}else{p=u+2|0;d=d+8|0;e=e+4|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){e=l+12|0;if((g|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(g|0)){d=d+1|0;f=f+4|0}else break}}p=l+8|0;u=s+-1|0;a[p>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[p>>2]|0))}if((g|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;d=e*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;e=e+1|0}while((e|0)<(g|0))}if((a[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[p>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function Ul(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;g=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=g;d=g+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=s*3|0;M=t+-1|0;if((n|0)>0){u=0;s=g;f=g+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{s=s+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;x=0-t|0;b=1-t|0;w=~t;e:do if((S|0)>1){E=(M|0)>1;p=(a[l+4>>2]|0)+u|0;k=1;d=e+(u<<1)|0;e=g+(u<<1)|0;s=0;t:while(1){if(E){u=p;y=1;_=d;v=s;while(1){m=o[_>>0]|0;do if(((m&240)+24+(m<<4&240)+((o[_+1>>0]|0)&240)|0)>(T|0)){i[u>>0]=-1;s=r[e+(x<<1)>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}p=r[e+(b<<1)>>1]|0;g=p<<16>>16;s=r[e+(w<<1)>>1]|0;m=s<<16>>16;d=s<<16>>16>0;if(p<<16>>16<=0){if(d){r[e>>1]=s;s=m*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=r[e+-2>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(y|0)){s=v;break}a[s>>2]=y;s=v;break}else{s=v+1|0;if((v|0)>32767)break t;r[e>>1]=s;a[l+1179664+(v<<2)>>2]=s<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=y;a[l+1310736+(v+2<<2)>>2]=k;a[l+1310736+(v+3<<2)>>2]=y;a[l+1310736+(v+4<<2)>>2]=y;a[l+1310736+(v+5<<2)>>2]=k;a[l+1310736+(v+6<<2)>>2]=k;break}}if(d){s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+(m+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}d=r[e+-2>>1]|0;if(d<<16>>16<=0){r[e>>1]=p;s=g*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+k;s=v}else{r[e>>1]=0;i[u>>0]=0;s=v}while(0);y=y+1|0;d=_+2|0;e=e+2|0;u=u+1|0;if((y|0)>=(M|0))break;else{_=d;v=s}}}else u=p;k=k+1|0;if((k|0)>=(S|0)){g=s;R=52;break e}else{p=u+2|0;d=d+4|0;e=e+4|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){e=l+12|0;if((g|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(g|0)){d=d+1|0;f=f+4|0}else break}}p=l+8|0;u=s+-1|0;a[p>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[p>>2]|0))}if((g|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;d=e*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;e=e+1|0}while((e|0)<(g|0))}if((a[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[p>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function Hl(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;g=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=g;d=g+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=s*3|0;M=t+-1|0;if((n|0)>0){u=0;s=g;f=g+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{s=s+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;x=0-t|0;b=1-t|0;w=~t;e:do if((S|0)>1){E=(M|0)>1;p=(a[l+4>>2]|0)+u|0;k=1;d=e+(u<<1)|0;e=g+(u<<1)|0;s=0;t:while(1){if(E){u=p;y=1;_=d;v=s;while(1){g=o[_>>0]|0;m=o[_+1>>0]|0;do if(((g&248)+12+(g<<5&224)+(m>>>3&24)+(m<<2&248)|0)>(T|0)){i[u>>0]=-1;s=r[e+(x<<1)>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}p=r[e+(b<<1)>>1]|0;g=p<<16>>16;s=r[e+(w<<1)>>1]|0;m=s<<16>>16;d=s<<16>>16>0;if(p<<16>>16<=0){if(d){r[e>>1]=s;s=m*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=r[e+-2>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(y|0)){s=v;break}a[s>>2]=y;s=v;break}else{s=v+1|0;if((v|0)>32767)break t;r[e>>1]=s;a[l+1179664+(v<<2)>>2]=s<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=y;a[l+1310736+(v+2<<2)>>2]=k;a[l+1310736+(v+3<<2)>>2]=y;a[l+1310736+(v+4<<2)>>2]=y;a[l+1310736+(v+5<<2)>>2]=k;a[l+1310736+(v+6<<2)>>2]=k;break}}if(d){s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+(m+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}d=r[e+-2>>1]|0;if(d<<16>>16<=0){r[e>>1]=p;s=g*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+k;s=v}else{r[e>>1]=0;i[u>>0]=0;s=v}while(0);y=y+1|0;d=_+2|0;e=e+2|0;u=u+1|0;if((y|0)>=(M|0))break;else{_=d;v=s}}}else u=p;k=k+1|0;if((k|0)>=(S|0)){g=s;R=52;break e}else{p=u+2|0;d=d+4|0;e=e+4|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){e=l+12|0;if((g|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(g|0)){d=d+1|0;f=f+4|0}else break}}p=l+8|0;u=s+-1|0;a[p>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[p>>2]|0))}if((g|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;d=e*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;e=e+1|0}while((e|0)<(g|0))}if((a[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[p>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function zl(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;g=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=g;d=g+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=s*3|0;M=t+-1|0;if((n|0)>0){u=0;s=g;f=g+(M<<1)|0;while(1){r[f>>1]=0;r[s>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{s=s+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;x=0-t|0;b=1-t|0;w=~t;e:do if((S|0)>1){E=(M|0)>1;p=(a[l+4>>2]|0)+u|0;k=1;d=e+(u<<2)|0;e=g+(u<<1)|0;s=0;t:while(1){if(E){u=p;y=1;_=d;v=s;while(1){do if(((o[_+2>>0]|0)+(o[_+1>>0]|0)+(o[_+3>>0]|0)|0)>(T|0)){i[u>>0]=-1;s=r[e+(x<<1)>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}p=r[e+(b<<1)>>1]|0;g=p<<16>>16;s=r[e+(w<<1)>>1]|0;m=s<<16>>16;d=s<<16>>16>0;if(p<<16>>16<=0){if(d){r[e>>1]=s;s=m*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-3<<2)|0;if((a[d>>2]|0)<(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=r[e+-2>>1]|0;if(s<<16>>16>0){r[e>>1]=s;s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;s=l+1310736+(s+-3<<2)|0;if((a[s>>2]|0)>=(y|0)){s=v;break}a[s>>2]=y;s=v;break}else{s=v+1|0;if((v|0)>32767)break t;r[e>>1]=s;a[l+1179664+(v<<2)>>2]=s<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=y;a[l+1310736+(v+2<<2)>>2]=k;a[l+1310736+(v+3<<2)>>2]=y;a[l+1310736+(v+4<<2)>>2]=y;a[l+1310736+(v+5<<2)>>2]=k;a[l+1310736+(v+6<<2)>>2]=k;break}}if(d){s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+(m+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;m=l+1310736+(s+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+k;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}d=r[e+-2>>1]|0;if(d<<16>>16<=0){r[e>>1]=p;s=g*7|0;d=l+1310736+(s+-7<<2)|0;a[d>>2]=(a[d>>2]|0)+1;d=l+1310736+(s+-6<<2)|0;a[d>>2]=(a[d>>2]|0)+y;d=l+1310736+(s+-5<<2)|0;a[d>>2]=(a[d>>2]|0)+k;d=l+1310736+(s+-4<<2)|0;if((a[d>>2]|0)>(y|0))a[d>>2]=y;a[l+1310736+(s+-1<<2)>>2]=k;s=v;break}s=a[l+1179664+(g+-1<<2)>>2]|0;g=a[l+1179664+((d<<16>>16)+-1<<2)>>2]|0;if((s|0)>(g|0)){r[e>>1]=g;if((v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(s|0))a[p>>2]=g;d=d+1|0;if((d|0)>=(v|0)){s=g;break}else p=p+4|0}}else s=g}else{r[e>>1]=s;if((s|0)<(g|0)&(v|0)>0){d=0;p=f;while(1){if((a[p>>2]|0)==(g|0))a[p>>2]=s;d=d+1|0;if((d|0)>=(v|0))break;else p=p+4|0}}}s=(s<<16>>16)*7|0;m=l+1310736+(s+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(s+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+y;s=l+1310736+(s+-5<<2)|0;a[s>>2]=(a[s>>2]|0)+k;s=v}else{r[e>>1]=0;i[u>>0]=0;s=v}while(0);y=y+1|0;d=_+4|0;e=e+2|0;u=u+1|0;if((y|0)>=(M|0))break;else{_=d;v=s}}}else u=p;k=k+1|0;if((k|0)>=(S|0)){g=s;R=52;break e}else{p=u+2|0;d=d+8|0;e=e+4|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){e=l+12|0;if((g|0)<1)s=1;else{d=1;s=1;while(1){u=a[f>>2]|0;if((u|0)==(d|0)){u=s;s=s+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[f>>2]=u;if((d|0)<(g|0)){d=d+1|0;f=f+4|0}else break}}p=l+8|0;u=s+-1|0;a[p>>2]=u;if(u){Xu(e|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((s|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[p>>2]|0))}if((g|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;d=e*7|0;u=l+12+(f<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(d<<2)>>2]|0);u=f<<1;s=l+655376+(u<<3)|0;c[s>>3]=+c[s>>3]+ +(a[l+1310736+(d+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(d+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;s=a[l+1310736+(d+3<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;u=l+131084+((f|1)<<2)|0;s=a[l+1310736+(d+4<<2)>>2]|0;if((a[u>>2]|0)<(s|0))a[u>>2]=s;u=l+131084+((f|2)<<2)|0;s=a[l+1310736+(d+5<<2)>>2]|0;if((a[u>>2]|0)>(s|0))a[u>>2]=s;s=l+131084+((f|3)<<2)|0;u=a[l+1310736+(d+6<<2)>>2]|0;if((a[s>>2]|0)<(u|0))a[s>>2]=u;e=e+1|0}while((e|0)<(g|0))}if((a[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[p>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function Bl(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;p=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=p;d=p+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=t+-1|0;if((n|0)>0){u=0;f=p;d=p+(T<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{f=f+(t<<1)|0;d=d+(t<<1)|0}}}d=l+1179664|0;u=t+1|0;E=0-t|0;w=1-t|0;x=~t;e:do if((S|0)>1){k=(T|0)>1;g=(a[l+4>>2]|0)+u|0;M=1;e=e+u|0;p=p+(u<<1)|0;f=0;t:while(1){if(k){u=g;b=1;y=e;_=f;while(1){do if((o[y>>0]|0|0)>(s|0)){i[u>>0]=-1;f=r[p+(E<<1)>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}g=r[p+(w<<1)>>1]|0;m=g<<16>>16;f=r[p+(x<<1)>>1]|0;v=f<<16>>16;e=f<<16>>16>0;if(g<<16>>16<=0){if(e){r[p>>1]=f;f=v*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-3<<2)|0;if((a[e>>2]|0)<(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=r[p+-2>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(b|0)){f=_;break}a[f>>2]=b;f=_;break}else{f=_+1|0;if((_|0)>32767)break t;r[p>>1]=f;a[l+1179664+(_<<2)>>2]=f<<16>>16;_=_*7|0;a[l+1310736+(_<<2)>>2]=1;a[l+1310736+(_+1<<2)>>2]=b;a[l+1310736+(_+2<<2)>>2]=M;a[l+1310736+(_+3<<2)>>2]=b;a[l+1310736+(_+4<<2)>>2]=b;a[l+1310736+(_+5<<2)>>2]=M;a[l+1310736+(_+6<<2)>>2]=M;break}}if(e){f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(v+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0;
}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}e=r[p+-2>>1]|0;if(e<<16>>16<=0){r[p>>1]=g;f=m*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-4<<2)|0;if((a[e>>2]|0)>(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+M;f=_}else{r[p>>1]=0;i[u>>0]=0;f=_}while(0);b=b+1|0;e=y+1|0;p=p+2|0;u=u+1|0;if((b|0)>=(T|0))break;else{y=e;_=f}}}else u=g;M=M+1|0;if((M|0)>=(S|0)){m=f;R=52;break e}else{g=u+2|0;e=e+2|0;p=p+4|0}}to(3,3904,A);u=-1}else{m=0;R=52}while(0);if((R|0)==52){p=l+12|0;if((m|0)<1)f=1;else{e=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((e|0)<(m|0)){e=e+1|0;d=d+4|0}else break}}g=l+8|0;u=f+-1|0;a[g>>2]=u;if(u){Xu(p|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[g>>2]|0))}if((m|0)>0){p=0;do{d=(a[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(e+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(e+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(e+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(e+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;p=p+1|0}while((p|0)<(m|0))}if((a[g>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[g>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function jl(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;p=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=p;d=p+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=t+-1|0;if((n|0)>0){u=0;f=p;d=p+(T<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{f=f+(t<<1)|0;d=d+(t<<1)|0}}}d=l+1179664|0;u=t+1|0;E=0-t|0;w=1-t|0;x=~t;e:do if((S|0)>1){k=(T|0)>1;g=(a[l+4>>2]|0)+u|0;M=1;e=e+(u<<1)|0;p=p+(u<<1)|0;f=0;t:while(1){if(k){u=g;b=1;y=e;_=f;while(1){do if((o[y+1>>0]|0|0)>(s|0)){i[u>>0]=-1;f=r[p+(E<<1)>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}g=r[p+(w<<1)>>1]|0;m=g<<16>>16;f=r[p+(x<<1)>>1]|0;v=f<<16>>16;e=f<<16>>16>0;if(g<<16>>16<=0){if(e){r[p>>1]=f;f=v*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-3<<2)|0;if((a[e>>2]|0)<(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=r[p+-2>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(b|0)){f=_;break}a[f>>2]=b;f=_;break}else{f=_+1|0;if((_|0)>32767)break t;r[p>>1]=f;a[l+1179664+(_<<2)>>2]=f<<16>>16;_=_*7|0;a[l+1310736+(_<<2)>>2]=1;a[l+1310736+(_+1<<2)>>2]=b;a[l+1310736+(_+2<<2)>>2]=M;a[l+1310736+(_+3<<2)>>2]=b;a[l+1310736+(_+4<<2)>>2]=b;a[l+1310736+(_+5<<2)>>2]=M;a[l+1310736+(_+6<<2)>>2]=M;break}}if(e){f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(v+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}e=r[p+-2>>1]|0;if(e<<16>>16<=0){r[p>>1]=g;f=m*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-4<<2)|0;if((a[e>>2]|0)>(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+M;f=_}else{r[p>>1]=0;i[u>>0]=0;f=_}while(0);b=b+1|0;e=y+2|0;p=p+2|0;u=u+1|0;if((b|0)>=(T|0))break;else{y=e;_=f}}}else u=g;M=M+1|0;if((M|0)>=(S|0)){m=f;R=52;break e}else{g=u+2|0;e=e+4|0;p=p+4|0}}to(3,3904,A);u=-1}else{m=0;R=52}while(0);if((R|0)==52){p=l+12|0;if((m|0)<1)f=1;else{e=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((e|0)<(m|0)){e=e+1|0;d=d+4|0}else break}}g=l+8|0;u=f+-1|0;a[g>>2]=u;if(u){Xu(p|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[g>>2]|0))}if((m|0)>0){p=0;do{d=(a[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(e+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(e+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(e+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(e+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;p=p+1|0}while((p|0)<(m|0))}if((a[g>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[g>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function Vl(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;p=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=p;d=p+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=t+-1|0;if((n|0)>0){u=0;f=p;d=p+(T<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{f=f+(t<<1)|0;d=d+(t<<1)|0}}}d=l+1179664|0;u=t+1|0;E=0-t|0;w=1-t|0;x=~t;e:do if((S|0)>1){k=(T|0)>1;g=(a[l+4>>2]|0)+u|0;M=1;e=e+(u<<1)|0;p=p+(u<<1)|0;f=0;t:while(1){if(k){u=g;b=1;y=e;_=f;while(1){do if((o[y>>0]|0|0)>(s|0)){i[u>>0]=-1;f=r[p+(E<<1)>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}g=r[p+(w<<1)>>1]|0;m=g<<16>>16;f=r[p+(x<<1)>>1]|0;v=f<<16>>16;e=f<<16>>16>0;if(g<<16>>16<=0){if(e){r[p>>1]=f;f=v*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-3<<2)|0;if((a[e>>2]|0)<(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=r[p+-2>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(b|0)){f=_;break}a[f>>2]=b;f=_;break}else{f=_+1|0;if((_|0)>32767)break t;r[p>>1]=f;a[l+1179664+(_<<2)>>2]=f<<16>>16;_=_*7|0;a[l+1310736+(_<<2)>>2]=1;a[l+1310736+(_+1<<2)>>2]=b;a[l+1310736+(_+2<<2)>>2]=M;a[l+1310736+(_+3<<2)>>2]=b;a[l+1310736+(_+4<<2)>>2]=b;a[l+1310736+(_+5<<2)>>2]=M;a[l+1310736+(_+6<<2)>>2]=M;break}}if(e){f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(v+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}e=r[p+-2>>1]|0;if(e<<16>>16<=0){r[p>>1]=g;f=m*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-4<<2)|0;if((a[e>>2]|0)>(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+M;f=_}else{r[p>>1]=0;i[u>>0]=0;f=_}while(0);b=b+1|0;e=y+2|0;p=p+2|0;u=u+1|0;if((b|0)>=(T|0))break;else{y=e;_=f}}}else u=g;M=M+1|0;if((M|0)>=(S|0)){m=f;R=52;break e}else{g=u+2|0;e=e+4|0;p=p+4|0}}to(3,3904,A);u=-1}else{m=0;R=52}while(0);if((R|0)==52){p=l+12|0;if((m|0)<1)f=1;else{e=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((e|0)<(m|0)){e=e+1|0;d=d+4|0}else break}}g=l+8|0;u=f+-1|0;a[g>>2]=u;if(u){Xu(p|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[g>>2]|0))}if((m|0)>0){p=0;do{d=(a[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(e+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(e+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(e+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(e+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;p=p+1|0}while((p|0)<(m|0))}if((a[g>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[g>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function Gl(e,t,n,s,l){e=e|0;t=t|0;n=n|0;s=s|0;l=l|0;var u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0;C=h;h=h+16|0;A=C;p=a[l>>2]|0;S=n+-1|0;if((t|0)>0){u=0;f=p;d=p+((ne(S,t)|0)<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;d=d+2|0}}}T=t+-1|0;if((n|0)>0){u=0;f=p;d=p+(T<<1)|0;while(1){r[d>>1]=0;r[f>>1]=0;u=u+1|0;if((u|0)>=(n|0))break;else{f=f+(t<<1)|0;d=d+(t<<1)|0}}}d=l+1179664|0;f=t+1|0;E=0-t|0;w=1-t|0;x=~t;e:do if((S|0)>1){k=(T|0)>1;u=(a[l+4>>2]|0)+f|0;M=1;e=e+f|0;p=p+(f<<1)|0;s=s+f|0;f=0;t:while(1){if(k){b=1;y=e;_=f;while(1){do if((o[y>>0]|0)>(o[s>>0]|0)){i[u>>0]=-1;f=r[p+(E<<1)>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}g=r[p+(w<<1)>>1]|0;m=g<<16>>16;f=r[p+(x<<1)>>1]|0;v=f<<16>>16;e=f<<16>>16>0;if(g<<16>>16<=0){if(e){r[p>>1]=f;f=v*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-3<<2)|0;if((a[e>>2]|0)<(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=r[p+-2>>1]|0;if(f<<16>>16>0){r[p>>1]=f;f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;f=l+1310736+(f+-3<<2)|0;if((a[f>>2]|0)>=(b|0)){f=_;break}a[f>>2]=b;f=_;break}else{f=_+1|0;if((_|0)>32767)break t;r[p>>1]=f;a[l+1179664+(_<<2)>>2]=f<<16>>16;_=_*7|0;a[l+1310736+(_<<2)>>2]=1;a[l+1310736+(_+1<<2)>>2]=b;a[l+1310736+(_+2<<2)>>2]=M;a[l+1310736+(_+3<<2)>>2]=b;a[l+1310736+(_+4<<2)>>2]=b;a[l+1310736+(_+5<<2)>>2]=M;a[l+1310736+(_+6<<2)>>2]=M;break}}if(e){f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(v+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;v=l+1310736+(f+-5<<2)|0;a[v>>2]=(a[v>>2]|0)+M;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}e=r[p+-2>>1]|0;if(e<<16>>16<=0){r[p>>1]=g;f=m*7|0;e=l+1310736+(f+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+b;e=l+1310736+(f+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+M;e=l+1310736+(f+-4<<2)|0;if((a[e>>2]|0)>(b|0))a[e>>2]=b;a[l+1310736+(f+-1<<2)>>2]=M;f=_;break}f=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(m|0)){r[p>>1]=m;if((_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(f|0))a[g>>2]=m;e=e+1|0;if((e|0)>=(_|0)){f=m;break}else g=g+4|0}}else f=m}else{r[p>>1]=f;if((f|0)<(m|0)&(_|0)>0){e=0;g=d;while(1){if((a[g>>2]|0)==(m|0))a[g>>2]=f;e=e+1|0;if((e|0)>=(_|0))break;else g=g+4|0}}}f=(f<<16>>16)*7|0;v=l+1310736+(f+-7<<2)|0;a[v>>2]=(a[v>>2]|0)+1;v=l+1310736+(f+-6<<2)|0;a[v>>2]=(a[v>>2]|0)+b;f=l+1310736+(f+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+M;f=_}else{r[p>>1]=0;i[u>>0]=0;f=_}while(0);b=b+1|0;e=y+1|0;s=s+1|0;p=p+2|0;u=u+1|0;if((b|0)>=(T|0))break;else{y=e;_=f}}}M=M+1|0;if((M|0)>=(S|0)){g=f;R=52;break e}else{u=u+2|0;e=e+2|0;p=p+4|0;s=s+2|0}}to(3,3904,A);u=-1}else{g=0;R=52}while(0);if((R|0)==52){p=l+12|0;if((g|0)<1)f=1;else{e=1;f=1;while(1){u=a[d>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=a[l+1179664+(u+-1<<2)>>2]|0;a[d>>2]=u;if((e|0)<(g|0)){e=e+1|0;d=d+4|0}else break}}s=l+8|0;u=f+-1|0;a[s>>2]=u;if(u){Xu(p|0,0,u<<2|0)|0;Xu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{R=u<<2;a[l+131084+(R<<2)>>2]=t;a[l+131084+((R|1)<<2)>>2]=0;a[l+131084+((R|2)<<2)>>2]=n;a[l+131084+((R|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(a[s>>2]|0))}if((g|0)>0){p=0;do{d=(a[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(d<<2)|0;a[u>>2]=(a[u>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);u=d<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);d=d<<2;u=l+131084+(d<<2)|0;f=a[l+1310736+(e+3<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;u=l+131084+((d|1)<<2)|0;f=a[l+1310736+(e+4<<2)>>2]|0;if((a[u>>2]|0)<(f|0))a[u>>2]=f;u=l+131084+((d|2)<<2)|0;f=a[l+1310736+(e+5<<2)>>2]|0;if((a[u>>2]|0)>(f|0))a[u>>2]=f;f=l+131084+((d|3)<<2)|0;u=a[l+1310736+(e+6<<2)>>2]|0;if((a[f>>2]|0)<(u|0))a[f>>2]=u;p=p+1|0}while((p|0)<(g|0))}if((a[s>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;n=u<<1;R=l+655376+(n<<3)|0;c[R>>3]=+c[R>>3]/+(a[t>>2]|0);n=l+655376+((n|1)<<3)|0;c[n>>3]=+c[n>>3]/+(a[t>>2]|0);u=u+1|0}while((u|0)<(a[s>>2]|0));u=0}else u=0}else u=0}h=C;return u|0}function Wl(e){e=e|0;return Xl(e+8|0)|0}function Xl(e){e=e|0;var t=0,n=0;n=h;h=h+16|0;t=Ba(4)|0;if(!t){to(3,5472,n);bt(1)}e=Ho(e)|0;a[t>>2]=e;if(!e){ja(t);t=0}h=n;return t|0}function Yl(e){e=e|0;var t=0;t=a[e>>2]|0;if(!t)t=-1;else{zo(t)|0;ja(a[e>>2]|0);a[e>>2]=0;t=0}return t|0}function ql(e){e=e|0;var t=0,n=0,i=0;n=h;h=h+16|0;t=Ba(7062432)|0;if(!t){to(3,5472,n);bt(1)}a[t>>2]=0;a[t+4834148>>2]=0;a[t+7062408>>2]=0;a[t+4>>2]=-1;a[t+8>>2]=0;a[t+12>>2]=1;a[t+16>>2]=100;a[t+20>>2]=0;a[t+24>>2]=0;a[t+28>>2]=2;c[t+7062416>>3]=.5;a[t+7062424>>2]=3;a[t+32>>2]=e;i=a[e>>2]|0;a[t+36>>2]=i;e=a[e+4>>2]|0;a[t+40>>2]=e;a[t+44>>2]=0;a[t+15408>>2]=0;a[t+4834152>>2]=0;a[t+4818296>>2]=0;e=Ba(ne(i<<1,e)|0)|0;a[t+4834144>>2]=e;if(!e){to(3,5472,n+8|0);bt(1)}else{a[t+7062384>>2]=0;Zl(t,2)|0;Ql(t,0)|0;a[t+7062388>>2]=-1;$l(t,0)|0;a[t+7062392>>2]=7;a[t+7062396>>2]=0;h=n;return t|0}return 0}function Zl(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0;o=h;h=h+16|0;n=o;e:do if(e){i=e+4|0;if((a[i>>2]|0)!=(t|0)){switch(t|0){case 11:case 10:case 9:case 8:case 7:case 6:case 4:case 3:case 2:case 1:case 0:{r=0;break}case 14:case 13:case 12:case 5:{r=1;break}default:{a[n>>2]=t;to(3,3936,n);n=-1;break e}}a[i>>2]=t;a[e+8>>2]=ro(t)|0;n=e+7062408|0;t=a[n>>2]|0;if(t){Mu(t);a[n>>2]=ku(a[e+36>>2]|0,a[e+40>>2]|0,a[i>>2]|0,0)|0}n=e+24|0;t=a[n>>2]|0;if(!r)switch(t|0){case 1:{a[n>>2]=4;n=0;break e}case 4:{a[n>>2]=3;n=0;break e}default:{n=0;break e}}else switch(t|0){case 0:{a[n>>2]=1;n=0;break e}case 3:{a[n>>2]=4;n=0;break e}default:{n=0;break e}}}else n=0}else n=-1;while(0);h=o;return n|0}function Ql(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;r=h;h=h+16|0;i=r;do if(e)if((a[e>>2]|0)!=(t|0)){a[e>>2]=t;if(!t){n=e+4834148|0;ja(a[n>>2]|0);a[n>>2]=0;n=0;break}t=Ba(ne(a[e+40>>2]|0,a[e+36>>2]|0)|0)|0;a[e+4834148>>2]=t;if(!t){to(3,5472,i);bt(1)}else n=0}else n=0;else n=-1;while(0);h=r;return n|0}function $l(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0;l=h;h=h+16|0;s=l+8|0;r=l;if(e){o=e+7062388|0;if((a[o>>2]|0)!=(t|0)){n=e+7062408|0;i=a[n>>2]|0;if(i){Mu(i);a[n>>2]=0}switch(t|0){case 3:case 2:case 1:{a[n>>2]=ku(a[e+36>>2]|0,a[e+40>>2]|0,a[e+4>>2]|0,0)|0;break}case 4:{a[e+7062404>>2]=1;a[e+7062400>>2]=1;t=4;break}case 0:{t=0;break}default:{to(3,3985,r);t=0}}a[o>>2]=t;if((a[e>>2]|0)==1){a[s>>2]=a[760+(t<<2)>>2];to(3,4059,s);t=0}else t=0}else t=0}else t=-1;h=l;return t|0}function Jl(e){e=e|0;var t=0,n=0;if(!e)t=-1;else{t=e+7062408|0;n=a[t>>2]|0;if(n){Mu(n);a[t>>2]=0}ja(a[e+4834144>>2]|0);ja(a[e+4834148>>2]|0);ja(e);t=0}return t|0}function Kl(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){a[t>>2]=a[e>>2];e=0}else e=-1;return e|0}function eu(e,t){e=e|0;t=t|0;if((e|0)!=0&t>>>0<2){a[e+12>>2]=t;e=0}else e=-1;return e|0}function tu(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){a[t>>2]=a[e+12>>2];e=0}else e=-1;return e|0}function nu(e,t){e=e|0;t=t|0;if((e|0)==0|t>>>0>255)e=-1;else{a[e+16>>2]=t;e=0}return e|0}function iu(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){a[t>>2]=a[e+16>>2];e=0}else e=-1;return e|0}function ru(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){a[t>>2]=a[e+7062388>>2];e=0}else e=-1;return e|0}function au(e,t){e=e|0;t=t|0;if((e|0)!=0&t>>>0<2){a[e+20>>2]=t;e=0}else e=-1;return e|0}function ou(e,t){e=e|0;t=t|0;if(!e)e=-1;else{a[t>>2]=a[e+20>>2];e=0}return e|0}function su(e,t){e=e|0;t=t|0;if((e|0)!=0&t>>>0<5){a[e+24>>2]=t;e=0}else e=-1;return e|0}function lu(e,t){e=e|0;t=t|0;if(!e)e=-1;else{a[e+7062424>>2]=t;e=0}return e|0}function uu(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){a[t>>2]=a[e+7062424>>2];e=0}else e=-1;return e|0}function cu(e,t){e=e|0;t=t|0;if(!e)e=-1;else{a[t>>2]=a[e+24>>2];e=0}return e|0}function hu(e,t){e=e|0;t=+t;if((e|0)!=0?!(t<=0|t>=1):0){c[e+7062416>>3]=t;e=0}else e=-1;return e|0}function fu(e,t){e=e|0;t=t|0;if(!e)e=-1;else{c[t>>3]=+c[e+7062416>>3];e=0}return e|0}function du(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,O=0,L=0,N=0,F=0,D=0,I=0,U=0,H=0,z=0,B=0,j=0,V=0,G=0;j=h;h=h+80|0;U=j+32|0;O=j+24|0;M=j;k=j+52|0;R=j+40|0;I=j+64|0;B=e+44|0;a[B>>2]=0;F=e+7062388|0;i=a[F>>2]|0;e:do if((i|0)==4){N=e+7062396|0;n=a[N>>2]|0;do if((n|0)>0){i=4;n=n+-1|0}else{A=e+16|0;P=a[A>>2]|0;C=e+7062400|0;T=(a[C>>2]|0)+P|0;T=(T|0)>255?255:T;a[k>>2]=T;L=e+7062404|0;S=P-(a[L>>2]|0)|0;S=(S|0)<0?0:S;a[k+4>>2]=S;a[k+8>>2]=P;n=e+36|0;i=e+40|0;r=e+4|0;l=e+12|0;u=e+20|0;f=e+4834144|0;g=e+15416|0;m=e+15408|0;v=e+7062384|0;_=e+24|0;y=e+32|0;b=e+7062416|0;w=e+48|0;x=e+7062424|0;E=0;do{if((Lu(t,a[n>>2]|0,a[i>>2]|0,a[r>>2]|0,a[e>>2]|0,a[l>>2]|0,a[k+(E<<2)>>2]|0,a[u>>2]|0,f,0)|0)<0){n=-1;break e}if((gu(a[n>>2]|0,a[i>>2]|0,f,a[u>>2]|0,1e6,70,1,g,m)|0)<0){n=-1;break e}if((yu(t,a[n>>2]|0,a[i>>2]|0,a[r>>2]|0,g,a[m>>2]|0,a[v>>2]|0,a[u>>2]|0,a[_>>2]|0,(a[y>>2]|0)+184|0,+c[b>>3],w,B,a[x>>2]|0)|0)<0){n=-1;break e}a[R+(E<<2)>>2]=a[B>>2];E=E+1|0}while((E|0)<3);if((a[e>>2]|0)==1){H=a[R+4>>2]|0;r=a[R+8>>2]|0;i=a[R>>2]|0;a[M>>2]=S;a[M+4>>2]=H;a[M+8>>2]=P;a[M+12>>2]=r;a[M+16>>2]=T;a[M+20>>2]=i;to(3,4153,M)}else{i=a[R>>2]|0;r=a[R+8>>2]|0}n=a[R+4>>2]|0;if((i|0)>(r|0)|(n|0)>(r|0)){i=(i|0)>=(n|0)?T:S;a[A>>2]=i;n=i-P|0;if((n|0)>0){a[C>>2]=n;n=1}else{a[C>>2]=1;n=0-n|0}a[L>>2]=n;if((a[e>>2]|0)==1){a[O>>2]=i;to(3,4229,O)}i=a[F>>2]|0;n=a[e+7062392>>2]|0;break}n=a[C>>2]|0;i=a[L>>2]|0;do if((n|0)>=(i|0))if((n|0)>(i|0)){a[L>>2]=i+1;break}else{n=n+1|0;a[C>>2]=n;a[L>>2]=i+1;break}else{n=n+1|0;a[C>>2]=n}while(0);if((n+P|0)>254){a[C>>2]=1;n=1}if((P|0)<=(n|0))a[L>>2]=1;a[N>>2]=a[e+7062392>>2];H=47;break e}while(0);a[N>>2]=n;H=30}else H=30;while(0);e:do if((H|0)==30){t:do switch(i|0){case 3:{i=e+7062408|0;n=Ou(a[i>>2]|0,t,9,-7)|0;if((n|0)<0)break e;n=a[i>>2]|0;i=e+4834144|0;n=Lu(a[n>>2]|0,a[n+8>>2]|0,a[n+12>>2]|0,5,a[e>>2]|0,a[e+12>>2]|0,0,0,i,a[n+4>>2]|0)|0;if((n|0)<0)break e;n=e+36|0;r=e+40|0;l=e+20|0;break}case 2:case 1:{r=e+7062396|0;n=a[r>>2]|0;if((n|0)>0){a[r>>2]=n+-1;H=44;break t}n=a[e+7062408>>2]|0;if((i|0)==1)n=Cu(n,t,I)|0;else n=Pu(n,t,I)|0;if((n|0)<0)break e;n=e+16|0;if((a[e>>2]|0)==1?(D=o[I>>0]|0,(a[n>>2]|0)!=(D|0)):0){a[U>>2]=(a[F>>2]|0)==1?4281:4288;a[U+4>>2]=D;to(3,4293,U)}a[n>>2]=o[I>>0];a[r>>2]=a[e+7062392>>2];H=44;break}default:H=44}while(0);if((H|0)==44){n=e+36|0;r=e+40|0;l=e+20|0;i=e+4834144|0;if((Lu(t,a[n>>2]|0,a[r>>2]|0,a[e+4>>2]|0,a[e>>2]|0,a[e+12>>2]|0,a[e+16>>2]|0,a[l>>2]|0,i,0)|0)<0){n=-1;break}}u=e+15416|0;f=e+15408|0;if((gu(a[n>>2]|0,a[r>>2]|0,i,a[l>>2]|0,1e6,70,1,u,f)|0)>=0?(yu(t,a[n>>2]|0,a[r>>2]|0,a[e+4>>2]|0,u,a[f>>2]|0,a[e+7062384>>2]|0,a[l>>2]|0,a[e+24>>2]|0,(a[e+32>>2]|0)+184|0,+c[e+7062416>>3],e+48|0,B,a[e+7062424>>2]|0)|0)>=0:0)H=47;else n=-1}while(0);e:do if((H|0)==47){y=e+28|0;if((a[y>>2]|0)==1){pu(e);n=0;break}b=e+4818296|0;v=e+24|0;m=a[b>>2]|0;if((m|0)>0){_=0;do{i=a[B>>2]|0;r=e+4818304+(_*264|0)+56|0;l=e+4818304+(_*264|0)+64|0;if((i|0)>0){p=+(a[e+4818304+(_*264|0)>>2]|0);n=-1;u=0;d=.5;while(1){s=+(a[e+48+(u<<8)>>2]|0);V=p/s;if(!(V<.7|V>1.43)?(V=+c[e+48+(u<<8)+56>>3]-+c[r>>3],z=+c[e+48+(u<<8)+64>>3]-+c[l>>3],z=(V*V+z*z)/s,z<d):0){n=u;s=z}else s=d;u=u+1|0;if((u|0)>=(i|0)){g=n;break}else d=s}}else g=-1;t:do if((g|0)>-1){f=a[v>>2]|0;switch(f|0){case 2:case 1:case 0:break;case 4:case 3:{r=e+48+(g<<8)+40|0;s=+c[e+4818304+(_*264|0)+40>>3];if(!(+c[r>>3]<s)){n=e+48+(g<<8)+48|0;i=e+4818304+(_*264|0)+48|0;if(!(+c[n>>3]<+c[i>>3]))break t}else{i=e+4818304+(_*264|0)+48|0;n=e+48+(g<<8)+48|0}c[r>>3]=s;a[e+48+(g<<8)+8>>2]=a[e+4818304+(_*264|0)+8>>2];c[n>>3]=+c[i>>3];a[e+48+(g<<8)+12>>2]=a[e+4818304+(_*264|0)+12>>2];n=-1;d=1e8;r=0;while(1){s=0;i=0;do{t=(i+r|0)%4|0;p=+c[e+4818304+(_*264|0)+168+(i<<4)>>3]-+c[e+48+(g<<8)+168+(t<<4)>>3];V=+c[e+4818304+(_*264|0)+168+(i<<4)+8>>3]-+c[e+48+(g<<8)+168+(t<<4)+8>>3];s=s+(p*p+V*V);i=i+1|0}while((i|0)!=4);i=s<d;n=i?r:n;r=r+1|0;if((r|0)==4)break;else d=i?s:d}t=4-n|0;a[e+48+(g<<8)+20>>2]=(t+(a[e+4818304+(_*264|0)+20>>2]|0)|0)%4|0;a[e+48+(g<<8)+24>>2]=(t+(a[e+4818304+(_*264|0)+24>>2]|0)|0)%4|0;break t}default:{n=-1;break e}}n=e+48+(g<<8)+32|0;p=+c[e+4818304+(_*264|0)+32>>3];if(+c[n>>3]<p){c[n>>3]=p;u=a[e+4818304+(_*264|0)+4>>2]|0;a[e+48+(g<<8)+4>>2]=u;r=e+4818304+(_*264|0)+16|0;n=-1;d=1e8;l=0;while(1){s=0;i=0;do{t=(i+l|0)%4|0;G=+c[e+4818304+(_*264|0)+168+(i<<4)>>3]-+c[e+48+(g<<8)+168+(t<<4)>>3];V=+c[e+4818304+(_*264|0)+168+(i<<4)+8>>3]-+c[e+48+(g<<8)+168+(t<<4)+8>>3];s=s+(G*G+V*V);i=i+1|0}while((i|0)!=4);if(s<d)n=(4-l+(a[r>>2]|0)|0)%4|0;else s=d;l=l+1|0;if((l|0)==4)break;else d=s}a[e+48+(g<<8)+16>>2]=n;if(f>>>0<2){a[e+48+(g<<8)+8>>2]=u;c[e+48+(g<<8)+40>>3]=p;a[e+48+(g<<8)+20>>2]=n;break}else{a[e+48+(g<<8)+12>>2]=u;c[e+48+(g<<8)+48>>3]=p;a[e+48+(g<<8)+24>>2]=n;break}}}while(0);_=_+1|0}while((_|0)<(m|0))}pu(e);if((a[b>>2]|0)>0){r=0;n=0;do{i=e+4818304+(r*264|0)|0;H=e+4818304+(r*264|0)+256|0;t=(a[H>>2]|0)+1|0;a[H>>2]=t;if((t|0)<4){if((r|0)!=(n|0))Qu(e+4818304+(n*264|0)|0,i|0,264)|0;n=n+1|0}r=r+1|0}while((r|0)<(a[b>>2]|0))}else n=0;a[b>>2]=n;n=a[B>>2]|0;t:do if((n|0)>0){f=0;do{l=e+48+(f<<8)|0;r=a[e+48+(f<<8)+4>>2]|0;if((r|0)>=0){u=a[b>>2]|0;n:do if((u|0)>0){i=0;do{if((a[e+4818304+(i*264|0)+4>>2]|0)==(r|0))break n;i=i+1|0}while((i|0)<(u|0))}else i=0;while(0);if((i|0)==(u|0)){if((u|0)==60)break t;a[b>>2]=u+1}Qu(e+4818304+(i*264|0)|0,l|0,256)|0;a[e+4818304+(i*264|0)+256>>2]=1}f=f+1|0;n=a[B>>2]|0}while((f|0)<(n|0))}while(0);if((a[y>>2]|0)!=2?(a[b>>2]|0)>0:0){u=0;while(1){r=e+4818304+(u*264|0)+56|0;l=e+4818304+(u*264|0)+64|0;t:do if((n|0)>0){d=+(a[e+4818304+(u*264|0)>>2]|0);i=0;do{s=+(a[e+48+(i<<8)>>2]|0);G=d/s;if(!(G<.7|G>1.43)?(V=+c[e+48+(i<<8)+56>>3]-+c[r>>3],G=+c[e+48+(i<<8)+64>>3]-+c[l>>3],(V*V+G*G)/s<.5):0)break t;i=i+1|0}while((i|0)<(n|0))}else i=0;while(0);if((i|0)==(n|0)){Qu(e+48+(n<<8)|0,e+4818304+(u*264|0)|0,256)|0;n=(a[B>>2]|0)+1|0;a[B>>2]=n}u=u+1|0;if((u|0)>=(a[b>>2]|0)){n=0;break}}}else n=0}while(0);h=j;return n|0}function pu(e){e=e|0;var t=0,n=0,i=0,r=0;switch(a[e+24>>2]|0){case 1:case 0:{n=a[e+44>>2]|0;if((n|0)>0){i=0;do{t=e+48+(i<<8)+4|0;if((a[t>>2]|0)>-1?+c[e+48+(i<<8)+32>>3]<.5:0){a[e+48+(i<<8)+8>>2]=-1;a[t>>2]=-1;a[e+48+(i<<8)+236>>2]=6}i=i+1|0}while((i|0)<(n|0))}break}case 2:{n=a[e+44>>2]|0;if((n|0)>0){i=0;do{t=e+48+(i<<8)+4|0;if((a[t>>2]|0)>-1?+c[e+48+(i<<8)+32>>3]<.5:0){a[e+48+(i<<8)+12>>2]=-1;a[t>>2]=-1;a[e+48+(i<<8)+236>>2]=6}i=i+1|0}while((i|0)<(n|0))}break}default:{i=a[e+44>>2]|0;if((i|0)>0){r=0;do{t=e+48+(r<<8)+8|0;if((a[t>>2]|0)>-1?+c[e+48+(r<<8)+40>>3]<.5:0){a[t>>2]=-1;n=0}else n=1;t=e+48+(r<<8)+12|0;if(((a[t>>2]|0)>-1?+c[e+48+(r<<8)+48>>3]<.5:0)?(a[t>>2]=-1,(n|0)==0):0)a[e+48+(r<<8)+236>>2]=6;r=r+1|0}while((r|0)<(i|0))}}}return}function gu(e,t,n,i,r,o,s,l,u){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;s=+s;l=l|0;u=u|0;var f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,O=0,L=0,N=0,F=0,D=0,I=0,U=0;I=h;h=h+96|0;P=I+56|0;L=I+48|0;O=I+8|0;N=I;D=(i|0)==1;if(D){e=(e|0)/2|0;t=(t|0)/2|0;r=(r|0)/4|0;o=(o|0)/4|0}a[u>>2]=0;A=n+8|0;R=e+-2|0;M=t+-2|0;T=n+1179664|0;e:do if((a[A>>2]|0)>0){S=0;while(1){x=n+12+(S<<2)|0;k=a[x>>2]|0;t:do if(((((!((k|0)<(o|0)|(k|0)>(r|0))?(C=n+131084+(S<<4)|0,(a[C>>2]|0)!=1):0)?(a[n+131084+(S<<4)+4>>2]|0)!=(R|0):0)?(a[n+131084+(S<<4)+8>>2]|0)!=1:0)?(a[n+131084+(S<<4)+12>>2]|0)!=(M|0):0)?(mu(a[n>>2]|0,e,0,T,S+1|0,C,l+((a[u>>2]|0)*80048|0)|0)|0)>=0:0){y=a[x>>2]|0;E=a[u>>2]|0;b=l+(E*80048|0)+28|0;t=a[b>>2]|0;w=l+(E*80048|0)+40028|0;d=a[w>>2]|0;k=l+(E*80048|0)+24|0;p=(a[k>>2]|0)+-1|0;if((p|0)>1){v=0;_=1;i=0;while(1){g=(a[l+(E*80048|0)+28+(_<<2)>>2]|0)-t|0;g=ne(g,g)|0;m=(a[l+(E*80048|0)+40028+(_<<2)>>2]|0)-d|0;g=(ne(m,m)|0)+g|0;m=(g|0)>(v|0);i=m?_:i;_=_+1|0;if((_|0)>=(p|0))break;else v=m?g:v}}else i=0;f=+(y|0)/.75*.01*s;a[L>>2]=0;a[N>>2]=0;n:do if((vu(b,w,0,i,f,P,L)|0)>=0?(vu(b,w,i,(a[k>>2]|0)+-1|0,f,O,N)|0)>=0:0){t=a[L>>2]|0;d=a[N>>2]|0;do if((t|0)==1&(d|0)==1){t=a[O>>2]|0;d=a[P>>2]|0}else{if((t|0)>1&(d|0)==0){t=(i|0)/2|0;a[N>>2]=0;a[L>>2]=0;if((vu(b,w,0,t,f,P,L)|0)<0)break n;if((vu(b,w,t,i,f,O,N)|0)<0)break n;if(!((a[L>>2]|0)==1&(a[N>>2]|0)==1))break n;t=i;d=a[P>>2]|0;i=a[O>>2]|0;break}if(!((t|0)==0&(d|0)>1))break n;t=(i+-1+(a[k>>2]|0)|0)/2|0;a[N>>2]=0;a[L>>2]=0;if((vu(b,w,i,t,f,P,L)|0)<0)break n;if((vu(b,w,t,(a[k>>2]|0)+-1|0,f,O,N)|0)<0)break n;if(!((a[L>>2]|0)==1&(a[N>>2]|0)==1))break n;t=a[O>>2]|0;d=i;i=a[P>>2]|0}while(0);a[l+(E*80048|0)+80028>>2]=0;a[l+(E*80048|0)+80032>>2]=d;a[l+(E*80048|0)+80036>>2]=i;a[l+(E*80048|0)+80040>>2]=t;a[l+(E*80048|0)+80044>>2]=(a[k>>2]|0)+-1;a[l+((a[u>>2]|0)*80048|0)>>2]=a[x>>2];k=a[u>>2]|0;c[l+(k*80048|0)+8>>3]=+c[n+655376+(S<<4)>>3];c[l+(k*80048|0)+16>>3]=+c[n+655376+(S<<4)+8>>3];k=k+1|0;a[u>>2]=k;if((k|0)==60){i=60;break e}else break t}while(0)}while(0);S=S+1|0;if((S|0)>=(a[A>>2]|0)){F=4;break}}}else F=4;while(0);if((F|0)==4)i=a[u>>2]|0;if((i|0)>0){p=0;do{e=p;p=p+1|0;o=l+(e*80048|0)+16|0;d=l+(e*80048|0)|0;if((p|0)<(i|0)){s=+c[l+(e*80048|0)+8>>3];r=p;do{U=s-+c[l+(r*80048|0)+8>>3];f=+c[o>>3]-+c[l+(r*80048|0)+16>>3];f=U*U+f*f;i=a[d>>2]|0;e=l+(r*80048|0)|0;t=a[e>>2]|0;if((i|0)>(t|0)){if(f<+((i|0)/4|0|0))a[e>>2]=0}else if(f<+((t|0)/4|0|0))a[d>>2]=0;r=r+1|0;i=a[u>>2]|0}while((r|0)<(i|0))}}while((p|0)<(i|0))}if((i|0)>0){r=0;do{if(!(a[l+(r*80048|0)>>2]|0)){e=r+1|0;if((e|0)<(i|0)){i=r;t=e;while(1){Qu(l+(i*80048|0)|0,l+(t*80048|0)|0,80048)|0;i=a[u>>2]|0;e=t+1|0;if((e|0)<(i|0)){i=t;t=e}else break}}i=i+-1|0;a[u>>2]=i}r=r+1|0}while((r|0)<(i|0))}if(D&(i|0)>0){t=0;while(1){a[l>>2]=a[l>>2]<<2;i=l+8|0;c[i>>3]=+c[i>>3]*2;i=l+16|0;c[i>>3]=+c[i>>3]*2;i=l+24|0;if((a[i>>2]|0)>0){e=0;do{D=l+28+(e<<2)|0;a[D>>2]=a[D>>2]<<1;D=l+40028+(e<<2)|0;a[D>>2]=a[D>>2]<<1;e=e+1|0}while((e|0)<(a[i>>2]|0))}t=t+1|0;if((t|0)>=(a[u>>2]|0))break;else l=l+80048|0}}h=I;return 0}function mu(e,t,n,i,o,s,l){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;s=s|0;l=l|0;var u=0,c=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0;x=h;h=h+80032|0;g=x+16|0;p=x+8|0;c=x;b=x+40024|0;w=x+24|0;y=a[s+8>>2]|0;n=a[s>>2]|0;s=a[s+4>>2]|0;e:do if((n|0)<=(s|0)){u=n;n=e+((ne(y,t)|0)+n<<1)|0;while(1){_=r[n>>1]|0;if(_<<16>>16>0?(a[i+((_<<16>>16)+-1<<2)>>2]|0)==(o|0):0){d=u;break}if((u|0)<(s|0)){u=u+1|0;n=n+2|0}else{E=6;break e}}m=l+24|0;a[m>>2]=1;v=l+28|0;a[v>>2]=d;_=l+40028|0;a[_>>2]=y;i=y;f=d;u=1;n=5;while(1){s=(n+5|0)%8|0;n=0;while(1){o=a[776+(s<<2)>>2]|0;c=a[808+(s<<2)>>2]|0;if((r[e+(c+f+(ne(o+i|0,t)|0)<<1)>>1]|0)>0){n=o;o=s;break}n=n+1|0;s=(s+1|0)%8|0;if((n|0)>=8){E=11;break}}if((E|0)==11){E=0;if((n|0)==8){E=13;break}c=a[808+(s<<2)>>2]|0;n=a[776+(s<<2)>>2]|0;o=s}a[l+28+(u<<2)>>2]=c+f;s=a[m>>2]|0;a[l+40028+(s<<2)>>2]=n+(a[l+40028+(s+-1<<2)>>2]|0);n=a[m>>2]|0;s=l+28+(n<<2)|0;if((a[s>>2]|0)==(d|0)?(a[l+40028+(n<<2)>>2]|0)==(y|0):0){i=n;E=16;break}u=n+1|0;a[m>>2]=u;if((u|0)==9999){E=19;break}i=a[l+40028+(n<<2)>>2]|0;f=a[s>>2]|0;n=o}if((E|0)==13){to(3,4347,p);n=-1;break}else if((E|0)==16){if((i|0)>1){c=0;o=1;s=0;while(1){n=(a[l+28+(o<<2)>>2]|0)-d|0;n=ne(n,n)|0;u=(a[l+40028+(o<<2)>>2]|0)-y|0;n=(ne(u,u)|0)+n|0;u=(n|0)>(c|0);s=u?o:s;o=o+1|0;if((o|0)>=(i|0))break;else c=u?n:c}}else s=0;if((s|0)>0){n=0;do{a[b+(n<<2)>>2]=a[l+28+(n<<2)>>2];a[w+(n<<2)>>2]=a[l+40028+(n<<2)>>2];n=n+1|0}while((n|0)<(s|0))}if((s|0)<(i|0)){n=s;do{y=n-s|0;a[l+28+(y<<2)>>2]=a[l+28+(n<<2)>>2];a[l+40028+(y<<2)>>2]=a[l+40028+(n<<2)>>2];n=n+1|0}while((n|0)<(a[m>>2]|0))}if((s|0)>0){n=0;do{y=n-s|0;a[l+28+((a[m>>2]|0)+y<<2)>>2]=a[b+(n<<2)>>2];a[l+40028+((a[m>>2]|0)+y<<2)>>2]=a[w+(n<<2)>>2];n=n+1|0}while((n|0)<(s|0))}a[l+28+(a[m>>2]<<2)>>2]=a[v>>2];a[l+40028+(a[m>>2]<<2)>>2]=a[_>>2];a[m>>2]=(a[m>>2]|0)+1;n=0;break}else if((E|0)==19){to(3,4354,g);n=-1;break}}else E=6;while(0);if((E|0)==6){to(3,4340,c);n=-1}h=x;return n|0}function vu(e,t,n,i,r,o,s){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;o=o|0;s=s|0;var l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0;
l=a[t+(i<<2)>>2]|0;m=a[t+(n<<2)>>2]|0;p=+(l-m|0);h=a[e+(n<<2)>>2]|0;v=a[e+(i<<2)>>2]|0;f=+(h-v|0);c=+((ne(v,m)|0)-(ne(h,l)|0)|0);l=n+1|0;if((l|0)<(i|0)){u=0;h=l;do{_=c+(p*+(a[e+(h<<2)>>2]|0)+f*+(a[t+(h<<2)>>2]|0));_=_*_;v=_>u;u=v?_:u;l=v?h:l;h=h+1|0}while((h|0)<(i|0))}else u=0;if(u/(p*p+f*f)>r)if(((vu(e,t,n,l,r,o,s)|0)>=0?(d=a[s>>2]|0,(d|0)<=5):0)?(a[o+(d<<2)>>2]=l,a[s>>2]=(a[s>>2]|0)+1,(vu(e,t,l,i,r,o,s)|0)>=0):0)g=7;else l=-1;else g=7;if((g|0)==7)l=0;return l|0}function _u(e,t,n,i,r,o,s){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;s=s|0;var l=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0;k=h;h=h+16|0;y=k+4|0;b=k;w=Co(2)|0;x=Co(2)|0;E=oo(2,2)|0;m=0;e:while(1){v=m;m=m+1|0;_=a[i+(m<<2)>>2]|0;l=a[i+(v<<2)>>2]|0;g=+(_+1-l|0)*.05+.5;l=~~(+(l|0)+g);_=~~(+(_|0)-g)-l|0;d=_+1|0;n=oo(d,2)|0;if((_|0)>-1){_=0;do{M=_+l|0;if((Ro(r,+(a[e+(M<<2)>>2]|0),+(a[t+(M<<2)>>2]|0),y,b)|0)<0){l=10;break e}M=_<<1;T=a[n>>2]|0;c[T+(M<<3)>>3]=+u[y>>2];c[T+((M|1)<<3)>>3]=+u[b>>2];_=_+1|0}while((_|0)<(d|0))}if((po(n,E,w,x)|0)<0){l=10;break}T=a[E>>2]|0;p=+c[T+8>>3];c[o+(v*24|0)>>3]=p;g=-+c[T>>3];c[o+(v*24|0)+8>>3]=g;T=a[x>>2]|0;c[o+(v*24|0)+16>>3]=-(p*+c[T>>3]+ +c[T+8>>3]*g);ho(n)|0;if((m|0)>=4){l=7;break}}e:do if((l|0)==7){ho(E)|0;Po(x)|0;Po(w)|0;m=0;while(1){n=(m+3|0)%4|0;l=o+(n*24|0)|0;f=+c[o+(m*24|0)+8>>3];d=o+(m*24|0)|0;p=+c[o+(n*24|0)+8>>3];g=+c[l>>3]*f-+c[d>>3]*p;if(+V(+g)<1e-4){n=-1;break e}T=o+(m*24|0)+16|0;M=o+(n*24|0)+16|0;c[s+(m<<4)>>3]=(p*+c[T>>3]-f*+c[M>>3])/g;c[s+(m<<4)+8>>3]=(+c[d>>3]*+c[M>>3]-+c[l>>3]*+c[T>>3])/g;m=m+1|0;if((m|0)>=4){n=0;break}}}else if((l|0)==10){ho(n)|0;ho(E)|0;Po(x)|0;Po(w)|0;n=-1}while(0);h=k;return n|0}function yu(e,t,n,i,r,o,s,l,f,d,p,g,m,v){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;s=s|0;l=l|0;f=f|0;d=d|0;p=+p;g=g|0;m=m|0;v=v|0;var _=0,y=0,b=0,w=0,x=0,E=0,k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0;P=h;h=h+16|0;R=P+4|0;C=P;M=f>>>0<2;T=(f|0)==2;if((o|0)>0){A=0;_=0;do{a[g+(_<<8)>>2]=a[r+(A*80048|0)>>2];if((Ro(d,+c[r+(A*80048|0)+8>>3],+c[r+(A*80048|0)+16>>3],R,C)|0)>=0?(c[g+(_<<8)+56>>3]=+u[R>>2],c[g+(_<<8)+64>>3]=+u[C>>2],S=g+(_<<8)+168|0,(_u(r+(A*80048|0)+28|0,r+(A*80048|0)+40028|0,a[r+(A*80048|0)+24>>2]|0,r+(A*80048|0)+80028|0,d,g+(_<<8)+72|0,S)|0)>=0):0){y=g+(_<<8)+8|0;b=g+(_<<8)+20|0;w=g+(_<<8)+40|0;x=g+(_<<8)+12|0;E=g+(_<<8)+24|0;k=g+(_<<8)+48|0;switch(Hu(s,l,f,e,t,n,i,d,S,p,y,b,w,x,E,k,v,g+(_<<8)+240|0,g+(_<<8)+248|0)|0){case 0:{a[g+(_<<8)+236>>2]=0;break}case-1:{a[g+(_<<8)+236>>2]=2;break}case-2:{a[g+(_<<8)+236>>2]=3;break}case-3:{a[g+(_<<8)+236>>2]=4;break}case-4:{a[g+(_<<8)+236>>2]=5;break}case-5:{a[g+(_<<8)+236>>2]=9;break}case-6:{a[g+(_<<8)+236>>2]=1;break}default:{}}if(!M){if(T){a[g+(_<<8)+4>>2]=a[x>>2];a[g+(_<<8)+16>>2]=a[E>>2];c[g+(_<<8)+32>>3]=+c[k>>3]}}else{a[g+(_<<8)+4>>2]=a[y>>2];a[g+(_<<8)+16>>2]=a[b>>2];c[g+(_<<8)+32>>3]=+c[w>>3]}_=_+1|0}A=A+1|0}while((A|0)<(o|0))}else _=0;a[m>>2]=_;h=P;return 0}function bu(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;var r=0,o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0;l=h;h=h+288|0;f=l+200|0;u=l+104|0;r=l+264|0;s=l+8|0;o=l;p=a[t+16>>2]|0;g=(4-p|0)%4|0;c[f>>3]=+c[t+168+(g<<4)>>3];c[f+8>>3]=+c[t+168+(g<<4)+8>>3];g=(5-p|0)%4|0;c[f+16>>3]=+c[t+168+(g<<4)>>3];c[f+24>>3]=+c[t+168+(g<<4)+8>>3];g=(6-p|0)%4|0;c[f+32>>3]=+c[t+168+(g<<4)>>3];c[f+40>>3]=+c[t+168+(g<<4)+8>>3];p=(7-p|0)%4|0;c[f+48>>3]=+c[t+168+(p<<4)>>3];c[f+56>>3]=+c[t+168+(p<<4)+8>>3];d=n*-.5;c[u>>3]=d;n=n*.5;c[u+8>>3]=n;c[u+16>>3]=0;c[u+24>>3]=n;c[u+32>>3]=n;c[u+40>>3]=0;c[u+48>>3]=n;c[u+56>>3]=d;c[u+64>>3]=0;c[u+72>>3]=d;c[u+80>>3]=d;c[u+88>>3]=0;a[r>>2]=f;a[r+4>>2]=u;a[r+8>>2]=4;if((Yo(a[e>>2]|0,f,u,4,s)|0)<0)n=1e8;else{g=(jo(a[e>>2]|0,r,s,i,o)|0)<0;n=g?1e8:+c[o>>3]}h=l;return+n}function wu(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=+i;r=r|0;var o=0,s=0,l=0,u=0,f=0,d=0,p=0,g=0;s=h;h=h+192|0;f=s+104|0;u=s+8|0;l=s+168|0;o=s;p=a[t+16>>2]|0;g=(4-p|0)%4|0;c[f>>3]=+c[t+168+(g<<4)>>3];c[f+8>>3]=+c[t+168+(g<<4)+8>>3];g=(5-p|0)%4|0;c[f+16>>3]=+c[t+168+(g<<4)>>3];c[f+24>>3]=+c[t+168+(g<<4)+8>>3];g=(6-p|0)%4|0;c[f+32>>3]=+c[t+168+(g<<4)>>3];c[f+40>>3]=+c[t+168+(g<<4)+8>>3];p=(7-p|0)%4|0;c[f+48>>3]=+c[t+168+(p<<4)>>3];c[f+56>>3]=+c[t+168+(p<<4)+8>>3];d=i*-.5;c[u>>3]=d;i=i*.5;c[u+8>>3]=i;c[u+16>>3]=0;c[u+24>>3]=i;c[u+32>>3]=i;c[u+40>>3]=0;c[u+48>>3]=i;c[u+56>>3]=d;c[u+64>>3]=0;c[u+72>>3]=d;c[u+80>>3]=d;c[u+88>>3]=0;a[l>>2]=f;a[l+4>>2]=u;a[l+8>>2]=4;t=(jo(a[e>>2]|0,l,n,r,o)|0)<0;h=s;return+(t?1e8:+c[o>>3])}function xu(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;var s=0,l=0,u=0,f=0,d=0,p=0,g=0;g=h;h=h+32|0;f=g+20|0;d=g;s=Ba(r<<4)|0;a[f>>2]=s;if(!s){to(3,5472,g+8|0);bt(1)}l=Ba(r*24|0)|0;u=f+4|0;a[u>>2]=l;if(!l){to(3,5472,g+16|0);bt(1)}if((r|0)>0){p=0;do{c[s+(p<<4)>>3]=+c[n+(p<<4)>>3];c[s+(p<<4)+8>>3]=+c[n+(p<<4)+8>>3];c[l+(p*24|0)>>3]=+c[i+(p*24|0)>>3];c[l+(p*24|0)+8>>3]=+c[i+(p*24|0)+8>>3];c[l+(p*24|0)+16>>3]=+c[i+(p*24|0)+16>>3];p=p+1|0}while((p|0)<(r|0))}a[f+8>>2]=r;if((jo(a[e>>2]|0,f,t,o,d)|0)<0)c[d>>3]=1e8;ja(a[f>>2]|0);ja(a[u>>2]|0);h=g;return+ +c[d>>3]}function Eu(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;var s=0,l=0,u=0,f=0,d=0,p=0,g=0;g=h;h=h+32|0;f=g+20|0;d=g;s=Ba(r<<4)|0;a[f>>2]=s;if(!s){to(3,5472,g+8|0);bt(1)}l=Ba(r*24|0)|0;u=f+4|0;a[u>>2]=l;if(!l){to(3,5472,g+16|0);bt(1)}if((r|0)>0){p=0;do{c[s+(p<<4)>>3]=+c[n+(p<<4)>>3];c[s+(p<<4)+8>>3]=+c[n+(p<<4)+8>>3];c[l+(p*24|0)>>3]=+c[i+(p*24|0)>>3];c[l+(p*24|0)+8>>3]=+c[i+(p*24|0)+8>>3];c[l+(p*24|0)+16>>3]=+c[i+(p*24|0)+16>>3];p=p+1|0}while((p|0)<(r|0))}a[f+8>>2]=r;if((Go(a[e>>2]|0,f,t,o,d)|0)<0)c[d>>3]=1e8;ja(a[f>>2]|0);ja(a[u>>2]|0);h=g;return+ +c[d>>3]}function ku(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0;r=Ba(2080)|0;e:do if(r){a[r+2068>>2]=n;t:do if(!i){switch(n|0){case 5:case 12:case 13:case 14:break;default:{o=4;break t}}a[r+2076>>2]=0}else o=4;while(0);do if((o|0)==4){o=Ba(ne(t,e)|0)|0;a[r>>2]=o;if(!o){ja(r);r=0;break e}else{a[r+2076>>2]=1;break}}while(0);a[r+2072>>2]=i;a[r+4>>2]=0;a[r+8>>2]=e;a[r+12>>2]=t}while(0);return r|0}function Mu(e){e=e|0;if(e){if(a[e+2076>>2]|0)ja(a[e>>2]|0);ja(a[e+4>>2]|0);ja(e)}return}function Tu(e,t){e=e|0;t=t|0;var n=0,r=0,s=0,l=0,u=0,c=0,f=0;u=h;h=h+16|0;r=u;n=a[e+2068>>2]|0;e:do switch(n|0){case 5:case 12:case 13:case 14:if(!(a[e+2072>>2]|0)){a[e>>2]=t;n=0;break e}else{Qu(a[e>>2]|0,t|0,ne(a[e+12>>2]|0,a[e+8>>2]|0)|0)|0;n=0;break e}default:{if((n&-2|0)==2){n=e+8|0;r=e+12|0;if(!(ne(a[r>>2]|0,a[n>>2]|0)|0)){n=0;break e}else{s=0;l=0}while(1){i[(a[e>>2]|0)+s>>0]=(((o[t+(l|1)>>0]|0)+(o[t+l>>0]|0)+(o[t+(l|2)>>0]|0)|0)>>>0)/3|0;s=s+1|0;if(s>>>0>=(ne(a[r>>2]|0,a[n>>2]|0)|0)>>>0){n=0;break e}else l=l+4|0}}if((n&-3|0)==4){n=e+8|0;r=e+12|0;if(!(ne(a[r>>2]|0,a[n>>2]|0)|0)){n=0;break e}else{s=0;l=0}while(1){i[(a[e>>2]|0)+s>>0]=(((o[t+(l|2)>>0]|0)+(o[t+(l|1)>>0]|0)+(o[t+(l|3)>>0]|0)|0)>>>0)/3|0;s=s+1|0;if(s>>>0>=(ne(a[r>>2]|0,a[n>>2]|0)|0)>>>0){n=0;break e}else l=l+4|0}}if(n>>>0<2){n=e+8|0;r=e+12|0;if(!(ne(a[r>>2]|0,a[n>>2]|0)|0)){n=0;break e}else{s=0;l=0}while(1){i[(a[e>>2]|0)+s>>0]=(((o[t+(l+1)>>0]|0)+(o[t+l>>0]|0)+(o[t+(l+2)>>0]|0)|0)>>>0)/3|0;s=s+1|0;if(s>>>0>=(ne(a[r>>2]|0,a[n>>2]|0)|0)>>>0){n=0;break e}else l=l+3|0}}switch(n|0){case 8:{n=e+8|0;r=e+12|0;if(!(ne(a[r>>2]|0,a[n>>2]|0)|0)){n=0;break e}else{s=0;l=0}while(1){i[(a[e>>2]|0)+s>>0]=i[t+l>>0]|0;s=s+1|0;if(s>>>0>=(ne(a[r>>2]|0,a[n>>2]|0)|0)>>>0){n=0;break}else l=l+2|0}break}case 7:{n=e+8|0;r=e+12|0;if(!(ne(a[r>>2]|0,a[n>>2]|0)|0)){n=0;break e}else{s=0;l=0}while(1){i[(a[e>>2]|0)+s>>0]=i[t+(l|1)>>0]|0;s=s+1|0;if(s>>>0>=(ne(a[r>>2]|0,a[n>>2]|0)|0)>>>0){n=0;break}else l=l+2|0}break}case 9:{n=e+8|0;r=e+12|0;if(!(ne(a[r>>2]|0,a[n>>2]|0)|0)){n=0;break e}else{s=0;l=0}while(1){f=o[t+l>>0]|0;c=o[t+(l|1)>>0]|0;i[(a[e>>2]|0)+s>>0]=(((f&248)+10+(f<<5&224)+(c>>>3&28)+(c<<3&248)|0)>>>0)/3|0;s=s+1|0;if(s>>>0>=(ne(a[r>>2]|0,a[n>>2]|0)|0)>>>0){n=0;break}else l=l+2|0}break}case 10:{n=e+8|0;r=e+12|0;if(!(ne(a[r>>2]|0,a[n>>2]|0)|0)){n=0;break e}else{s=0;l=0}while(1){c=o[t+l>>0]|0;f=o[t+(l|1)>>0]|0;i[(a[e>>2]|0)+s>>0]=(((c&248)+12+(c<<5&224)+(f>>>3&24)+(f<<2&248)|0)>>>0)/3|0;s=s+1|0;if(s>>>0>=(ne(a[r>>2]|0,a[n>>2]|0)|0)>>>0){n=0;break}else l=l+2|0}break}case 11:{n=e+8|0;r=e+12|0;if(!(ne(a[r>>2]|0,a[n>>2]|0)|0)){n=0;break e}else{s=0;l=0}while(1){f=o[t+l>>0]|0;i[(a[e>>2]|0)+s>>0]=(((f&240)+24+(f<<4&240)+((o[t+(l|1)>>0]|0)&240)|0)>>>0)/3|0;s=s+1|0;if(s>>>0>=(ne(a[r>>2]|0,a[n>>2]|0)|0)>>>0){n=0;break}else l=l+2|0}break}default:{to(3,4361,r);n=-1;break e}}}}while(0);h=u;return n|0}function Su(e,t){e=e|0;t=t|0;var n=0,i=0;if((e|0)!=0&(t|0)!=0?(Tu(e,t)|0)>=0:0){Xu(e+16|0,0,1024)|0;t=a[e>>2]|0;i=ne(a[e+12>>2]|0,a[e+8>>2]|0)|0;n=t+i|0;if((i|0)>0){do{i=e+16+((o[t>>0]|0)<<2)|0;a[i>>2]=(a[i>>2]|0)+1;t=t+1|0}while(t>>>0<n>>>0);t=0}else t=0}else t=-1;return t|0}function Au(e,t){e=e|0;t=t|0;var n=0;t=Su(e,t)|0;if((t|0)>=0){t=0;n=0;do{t=(a[e+16+(n<<2)>>2]|0)+t|0;a[e+1040+(n<<2)>>2]=t;n=n+1|0}while((n|0)!=256);t=0}return t|0}function Ru(e,t,n,r){e=e|0;t=t|0;n=+n;r=r|0;var o=0,s=0,l=0;if(!(n<0|n>1)){t=Au(e,t)|0;if((t|0)>=0){l=~~(+(ne(a[e+12>>2]|0,a[e+8>>2]|0)|0)*n)>>>0;t=0;while(1){s=t&255;o=a[e+1040+(s<<2)>>2]|0;if(o>>>0<l>>>0)t=t+1<<24>>24;else break}if((o|0)==(l|0))do t=t+1<<24>>24;while((a[e+1040+((t&255)<<2)>>2]|0)==(l|0));i[r>>0]=((t&255)+s|0)>>>1;t=0}}else t=-1;return t|0}function Cu(e,t,n){e=e|0;t=t|0;n=n|0;return Ru(e,t,.5,n)|0}function Pu(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,s=0,l=0,u=0,c=0,h=0,f=0,d=0;t=Su(e,t)|0;if((t|0)>=0){t=1;r=0;do{r=r+ +((ne(a[e+16+(t<<2)>>2]|0,t)|0)>>>0);t=t+1|0}while((t|0)!=256);c=+(ne(a[e+12>>2]|0,a[e+8>>2]|0)|0);h=0;s=0;t=0;u=0;f=0;while(1){o=a[e+16+(h<<2)>>2]|0;f=f+ +(o>>>0);if(f!=0){l=c-f;if(l==0)break;s=s+ +((ne(h,o)|0)>>>0);d=s/f-(r-s)/l;l=d*(f*l*d);if(l>u)t=h&255;else l=u}else l=u;if((h&255)<<24>>24==-1)break;else{h=h+1|0;u=l}}i[n>>0]=t;t=0}return t|0}function Ou(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var s=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0,_=0,y=0,b=0;t=Su(e,t)|0;do if((t|0)>=0){y=e+4|0;if(!(a[y>>2]|0)){t=e+8|0;s=e+12|0;_=Ba(ne(a[s>>2]|0,a[t>>2]|0)|0)|0;a[y>>2]=_;if(!_){t=-1;break}else _=t}else{_=e+8|0;s=e+12|0}m=n>>1;v=0-m|0;t=a[s>>2]|0;if((t|0)>0){d=(m|0)<(v|0);p=(m|0)<(v|0);g=0;do{t=a[_>>2]|0;if((t|0)>0){f=0;do{if(d){l=0;n=0}else{l=0;h=v;n=0;while(1){u=h+g|0;if(((u|0)>=0?(u|0)<(a[s>>2]|0):0)?(b=ne(t,u)|0,!p):0){c=v;while(1){u=c+f|0;if((u|0)>-1&(u|0)<(t|0)){l=l+1|0;n=(o[(a[e>>2]|0)+(b+u)>>0]|0)+n|0}if((c|0)<(m|0))c=c+1|0;else break}}if((h|0)<(m|0))h=h+1|0;else break}}h=(ne(t,g)|0)+f|0;i[(a[y>>2]|0)+h>>0]=(n|0)/(l|0)|0;f=f+1|0;t=a[_>>2]|0}while((f|0)<(t|0))}g=g+1|0;t=a[s>>2]|0}while((g|0)<(t|0))}if((r|0)!=0?(ne(t,a[_>>2]|0)|0)>0:0){t=0;do{e=(a[y>>2]|0)+t|0;i[e>>0]=(o[e>>0]|0)+r;t=t+1|0}while((t|0)<(ne(a[s>>2]|0,a[_>>2]|0)|0));t=0}else t=0}while(0);return t|0}function Lu(e,t,n,i,r,a,o,s,l,u){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;a=a|0;o=o|0;s=s|0;l=l|0;u=u|0;var c=0;e:do switch(r|0){case 0:{switch(a|0){case 1:{if(u){c=Bn(e,t,n,u,l)|0;break e}switch(s|0){case 0:{if(i>>>0<2){c=On(e,t,n,o,l)|0;break e}if((i&-2|0)==2){c=Nn(e,t,n,o,l)|0;break e}if((i&-3|0)==4){c=In(e,t,n,o,l)|0;break e}switch(i|0){case 5:case 12:case 13:case 14:{c=Un(e,t,n,o,l)|0;break e}case 8:{c=zn(e,t,n,o,l)|0;break e}case 7:{c=Hn(e,t,n,o,l)|0;break e}case 9:{c=Ln(e,t,n,o,l)|0;break e}case 10:{c=Dn(e,t,n,o,l)|0;break e}case 11:{c=Fn(e,t,n,o,l)|0;break e}default:bt(0)}break}case 1:{if(i>>>0<2){c=En(e,t,n,o,l)|0;break e}if((i&-2|0)==2){c=Mn(e,t,n,o,l)|0;break e}if((i&-3|0)==4){c=An(e,t,n,o,l)|0;break e}switch(i|0){case 5:case 12:case 13:case 14:{c=Rn(e,t,n,o,l)|0;break e}case 8:{c=Pn(e,t,n,o,l)|0;break e}case 7:{c=Cn(e,t,n,o,l)|0;break e}case 9:{c=kn(e,t,n,o,l)|0;break e}case 10:{c=Sn(e,t,n,o,l)|0;break e}case 11:{c=Tn(e,t,n,o,l)|0;break e}default:bt(0)}break}default:bt(0)}break}case 0:{if(u){c=oi(e,t,n,u,l)|0;break e}switch(s|0){case 0:{if(i>>>0<2){c=$n(e,t,n,o,l)|0;break e}if((i&-2|0)==2){c=Kn(e,t,n,o,l)|0;break e}if((i&-3|0)==4){c=ni(e,t,n,o,l)|0;break e}switch(i|0){case 5:case 12:case 13:case 14:{c=ii(e,t,n,o,l)|0;break e}case 8:{c=ai(e,t,n,o,l)|0;break e}case 7:{c=ri(e,t,n,o,l)|0;break e}case 9:{c=Jn(e,t,n,o,l)|0;break e}case 10:{c=ti(e,t,n,o,l)|0;break e}case 11:{c=ei(e,t,n,o,l)|0;break e}default:bt(0)}break}case 1:{if(i>>>0<2){c=jn(e,t,n,o,l)|0;break e}if((i&-2|0)==2){c=Gn(e,t,n,o,l)|0;break e}if((i&-3|0)==4){c=Yn(e,t,n,o,l)|0;break e}switch(i|0){case 5:case 12:case 13:case 14:{c=qn(e,t,n,o,l)|0;break e}case 8:{c=Qn(e,t,n,o,l)|0;break e}case 7:{c=Zn(e,t,n,o,l)|0;break e}case 9:{c=Vn(e,t,n,o,l)|0;break e}case 10:{c=Xn(e,t,n,o,l)|0;break e}case 11:{c=Wn(e,t,n,o,l)|0;break e}default:bt(0)}break}default:bt(0)}break}default:bt(0)}break}case 1:{switch(a|0){case 1:{if(u){c=rn(e,t,n,u,l)|0;break e}switch(s|0){case 0:{if(i>>>0<2){c=qt(e,t,n,o,l)|0;break e}if((i&-2|0)==2){c=Qt(e,t,n,o,l)|0;break e}if((i&-3|0)==4){c=Kt(e,t,n,o,l)|0;break e}switch(i|0){case 5:case 12:case 13:case 14:{c=en(e,t,n,o,l)|0;break e}case 8:{c=nn(e,t,n,o,l)|0;break e}case 7:{c=tn(e,t,n,o,l)|0;break e}case 9:{c=Zt(e,t,n,o,l)|0;break e}case 10:{c=Jt(e,t,n,o,l)|0;break e}case 11:{c=$t(e,t,n,o,l)|0;break e}default:bt(0)}break}case 1:{if(i>>>0<2){c=si(e,t,n,o,l)|0;break e}if((i&-2|0)==2){c=ui(e,t,n,o,l)|0;break e}if((i&-3|0)==4){c=fi(e,t,n,o,l)|0;break e}switch(i|0){case 5:case 12:case 13:case 14:{c=Wt(e,t,n,o,l)|0;break e}case 8:{c=Yt(e,t,n,o,l)|0;break e}case 7:{c=Xt(e,t,n,o,l)|0;break e}case 9:{c=li(e,t,n,o,l)|0;break e}case 10:{c=hi(e,t,n,o,l)|0;break e}case 11:{c=ci(e,t,n,o,l)|0;break e}default:bt(0)}break}default:bt(0)}break}case 0:{if(u){c=Gl(e,t,n,u,l)|0;break e}switch(s|0){case 0:{if(i>>>0<2){c=Fl(e,t,n,o,l)|0;break e}if((i&-2|0)==2){c=Il(e,t,n,o,l)|0;break e}if((i&-3|0)==4){c=zl(e,t,n,o,l)|0;break e}switch(i|0){case 5:case 12:case 13:case 14:{c=Bl(e,t,n,o,l)|0;break e}case 8:{c=Vl(e,t,n,o,l)|0;break e}case 7:{c=jl(e,t,n,o,l)|0;break e}case 9:{c=Dl(e,t,n,o,l)|0;break e}case 10:{c=Hl(e,t,n,o,l)|0;break e}case 11:{c=Ul(e,t,n,o,l)|0;break e}default:bt(0)}break}case 1:{if(i>>>0<2){c=an(e,t,n,o,l)|0;break e}if((i&-2|0)==2){c=sn(e,t,n,o,l)|0;break e}if((i&-3|0)==4){c=cn(e,t,n,o,l)|0;break e}switch(i|0){case 5:case 12:case 13:case 14:{c=hn(e,t,n,o,l)|0;break e}case 8:{c=dn(e,t,n,o,l)|0;break e}case 7:{c=fn(e,t,n,o,l)|0;break e}case 9:{c=on(e,t,n,o,l)|0;break e}case 10:{c=un(e,t,n,o,l)|0;break e}case 11:{c=ln(e,t,n,o,l)|0;break e}default:bt(0)}break}default:bt(0)}break}default:bt(0)}break}default:bt(0)}while(0);return c|0}function Nu(e,t){e=e|0;t=t|0;var n=0;if((e|0)!=0?(n=e+7062384|0,(a[n>>2]|0)==0):0){a[n>>2]=t;n=0}else n=-1;return n|0}function Fu(e){e=e|0;var t=0;if((e|0)!=0?(t=e+7062384|0,(a[t>>2]|0)!=0):0){a[t>>2]=0;t=0}else t=-1;return t|0}function Du(){return Iu(16,50)|0}function Iu(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,s=0,l=0,u=0,c=0,f=0,d=0,p=0,g=0,m=0,v=0;v=h;h=h+64|0;m=v+56|0;g=v+48|0;l=v+40|0;s=v+32|0;o=v+24|0;r=v+16|0;i=v+8|0;n=v;e:do if(!((e+-16|0)>>>0>48|(t|0)<1)){d=Ba(32)|0;if(!d){to(3,5472,n);bt(1)}a[d>>2]=0;a[d+4>>2]=t;a[d+28>>2]=e;f=Ba(t<<2)|0;a[d+8>>2]=f;if(!f){to(3,5472,i);bt(1)}n=t<<4;c=Ba(n)|0;a[d+12>>2]=c;if(!c){to(3,5472,r);bt(1)}r=Ba(n)|0;u=d+20|0;a[u>>2]=r;if(!r){to(3,5472,o);bt(1)}n=t<<5;o=Ba(n)|0;a[d+16>>2]=o;if(!o){to(3,5472,s);bt(1)}s=Ba(n)|0;a[d+24>>2]=s;if(!s){to(3,5472,l);bt(1)}i=ne(e,e)|0;n=i*12|0;i=i<<2;if((t|0)>0){e=0;t:while(1){a[f+(e<<2)>>2]=0;r=e<<2;s=0;while(1){if((s|0)>=4)break;l=Ba(n)|0;o=s+r|0;a[c+(o<<2)>>2]=l;if(!l){n=18;break t}l=Ba(i)|0;a[(a[u>>2]|0)+(o<<2)>>2]=l;if(!l){n=20;break t}else s=s+1|0}e=e+1|0;if((e|0)>=(t|0)){p=d;break e}}if((n|0)==18){to(3,5472,g);bt(1)}else if((n|0)==20){to(3,5472,m);bt(1)}}else p=d}else p=0;while(0);h=v;return p|0}function Uu(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,s=0,l=0;if(!e)t=-1;else{t=e+4|0;n=e+8|0;i=e+12|0;r=e+20|0;if((a[t>>2]|0)>0){o=0;do{if(a[(a[n>>2]|0)+(o<<2)>>2]|0)eo(e,o)|0;s=o<<2;ja(a[(a[i>>2]|0)+(s<<2)>>2]|0);ja(a[(a[r>>2]|0)+(s<<2)>>2]|0);l=1+s|0;ja(a[(a[i>>2]|0)+(l<<2)>>2]|0);ja(a[(a[r>>2]|0)+(l<<2)>>2]|0);l=2+s|0;ja(a[(a[i>>2]|0)+(l<<2)>>2]|0);ja(a[(a[r>>2]|0)+(l<<2)>>2]|0);s=3+s|0;ja(a[(a[i>>2]|0)+(s<<2)>>2]|0);ja(a[(a[r>>2]|0)+(s<<2)>>2]|0);o=o+1|0}while((o|0)<(a[t>>2]|0))}ja(e);t=0}return t|0}function Hu(e,t,n,r,s,l,u,f,d,p,g,m,v,_,y,b,w,x,E){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;l=l|0;u=u|0;f=f|0;d=d|0;p=+p;g=g|0;m=m|0;v=v|0;_=_|0;y=y|0;b=b|0;w=w|0;x=x|0;E=E|0;var k=0,M=0,T=0,S=0,A=0,R=0,C=0,P=0,O=0,L=0,N=0,F=0,D=0,I=0;I=h;h=h+12448|0;T=I+12440|0;M=I+8|0;F=I;N=I+12312|0;D=I+24|0;do if((n+-2|0)>>>0<3){if((w|0)!=2830){k=w&255;if((Ya(t,2,k,k*3|0,r,s,l,u,f,d,p,D)|0)<0){a[_>>2]=-1;k=-6;break}k=qa(D,k,_,y,b,w,x)|0;if(!E)break;a[E>>2]=0;a[E+4>>2]=0;break}if((Ya(t,2,14,42,r,s,l,u,f,d,.875,D)|0)<0){a[_>>2]=-1;k=-6;break}a[M>>2]=0;a[M+4>>2]=182;a[M+8>>2]=195;a[M+12>>2]=13;w=i[D+(a[M>>2]|0)>>0]|0;k=(w&255)>0?w:0;w=(w&255)<255?w:-1;L=i[D+(a[M+4>>2]|0)>>0]|0;k=(L&255)>(k&255)?L:k;w=(L&255)<(w&255)?L:w;L=i[D+(a[M+8>>2]|0)>>0]|0;k=(L&255)>(k&255)?L:k;w=(L&255)<(w&255)?L:w;L=i[D+(a[M+12>>2]|0)>>0]|0;k=((L&255)>(k&255)?L:k)&255;w=((L&255)<(w&255)?L:w)&255;e:do if((k-w|0)>=30){L=(k+w|0)>>>1;i[T>>0]=(o[D+(a[M>>2]|0)>>0]|0)>>>0<L>>>0&1;i[T+1>>0]=(o[D+(a[M+4>>2]|0)>>0]|0)>>>0<L>>>0&1;i[T+2>>0]=(o[D+(a[M+8>>2]|0)>>0]|0)>>>0<L>>>0&1;i[T+3>>0]=(o[D+(a[M+12>>2]|0)>>0]|0)>>>0<L>>>0&1;w=0;while(1){k=w+1|0;if(((i[T+w>>0]|0)==1?(i[T+((k|0)%4|0)>>0]|0)==1:0)?(i[T+((w+2|0)%4|0)>>0]|0)==0:0){O=w;break}if((k|0)<4)w=k;else{O=k;break}}switch(O|0){case 4:{a[y>>2]=0;c[b>>3]=-1;k=-3;w=0;M=0;break e}case 0:{M=119;k=255;w=0;do{R=w+-3|0;S=(w&-2|0)==12;A=w*14|0;T=0;do{if(((T+-3|R)>>>0>=8?(P=T&-2,(T|w)>>>0>=2):0)?!(S&((P|0)==0|(P|0)==12)):0){C=(o[D+(T+A)>>0]|0)-L|0;i[N+M>>0]=C>>>31;C=(C|0)>-1?C:0-C|0;M=M+-1|0;k=(C|0)<(k|0)?C:k}T=T+1|0}while((T|0)!=14);w=w+1|0}while((w|0)!=14);break}case 1:{M=119;k=255;w=0;do{R=w+-3|0;A=w&-2;S=(A|0)==0;A=(A|0)==12;T=13;while(1){if(((T+-3|R)>>>0>=8?(C=(T&-2|0)==12,!(S&C)):0)?!(A&(T>>>0<2|C)):0){P=(o[D+((T*14|0)+w)>>0]|0)-L|0;i[N+M>>0]=P>>>31;P=(P|0)>-1?P:0-P|0;M=M+-1|0;k=(P|0)<(k|0)?P:k}if((T|0)>0)T=T+-1|0;else break}w=w+1|0}while((w|0)!=14);break}case 2:{w=119;k=255;R=13;while(1){S=R+-3|0;A=R>>>0<2|(R&-2|0)==12;T=R*14|0;M=13;while(1){if((M+-3|S)>>>0>=8?!((M|R)>>>0<2|A&(M&-2|0)==12):0){P=(o[D+(M+T)>>0]|0)-L|0;i[N+w>>0]=P>>>31;P=(P|0)>-1?P:0-P|0;w=w+-1|0;k=(P|0)<(k|0)?P:k}if((M|0)>0)M=M+-1|0;else break}if((R|0)>0)R=R+-1|0;else break}break}case 3:{w=119;k=255;R=13;while(1){A=R+-3|0;S=R&-2;T=(S|0)==12;S=(S|0)==0;M=0;do{if(((M+-3|A)>>>0>=8?!(T&M>>>0<2|(M|R)>>>0<2):0)?!(S&(M&-2|0)==12):0){P=(o[D+((M*14|0)+R)>>0]|0)-L|0;i[N+w>>0]=P>>>31;P=(P|0)>-1?P:0-P|0;w=w+-1|0;k=(P|0)<(k|0)?P:k}M=M+1|0}while((M|0)!=14);if((R|0)>0)R=R+-1|0;else break}break}default:k=255}a[y>>2]=O;c[b>>3]=(k|0)>30?1:+(k|0)/30;k=$a(2830,0,0,N,F)|0;if((k|0)<0){k=-4;w=0;M=0}else{if(x)a[x>>2]=k;M=F;k=0;w=a[M>>2]|0;M=a[M+4>>2]|0}}else{a[y>>2]=0;c[b>>3]=-1;k=-2;w=0;M=0}while(0);if((k|0)<0){a[_>>2]=-1;break}if((w|0)==-1&(M|0)==-1){a[_>>2]=-1;k=-5;break}a[_>>2]=(w&-32768|0)==0&0==0?w&32767:0;if(!E)k=0;else{k=E;a[k>>2]=w;a[k+4>>2]=M;k=0}}else k=1;while(0);e:do switch(n|0){case 0:case 1:case 3:case 4:{if(!e){a[g>>2]=-1;w=-1;break e}w=e+28|0;M=a[w>>2]|0;T=M<<2;switch(n|0){case 0:case 3:if((Ya(t,0,M,T,r,s,l,u,f,d,p,D)|0)<0){a[g>>2]=-1;w=-6;break e}else{w=Za(e,0,D,a[w>>2]|0,g,m,v)|0;break e}default:if((Ya(t,1,M,T,r,s,l,u,f,d,p,D)|0)<0){a[g>>2]=-1;w=-6;break e}else{w=Za(e,1,D,a[w>>2]|0,g,m,v)|0;break e}}}default:w=1}while(0);if((k|0)!=1){if((w|0)!=1)k=(w&k|0)<0?w:0}else k=w;h=I;return k|0}function zu(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,s=0,l=0,u=0;u=h;h=h+16|0;t=u+8|0;s=u+4|0;n=u;a[s>>2]=e;do if(e>>>0>=212){o=(e>>>0)/210|0;i=o*210|0;a[n>>2]=e-i;t=(Bu(3712,3904,n,t)|0)-3712>>2;r=t;t=(a[3712+(t<<2)>>2]|0)+i|0;e:while(1){i=5;while(1){if(i>>>0>=47){i=211;l=8;break}n=a[3520+(i<<2)>>2]|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=106;break e}if((t|0)==(ne(e,n)|0))break;else i=i+1|0}t:do if((l|0)==8)while(1){l=0;n=(t>>>0)/(i>>>0)|0;if(n>>>0<i>>>0){l=105;break e}if((t|0)==(ne(n,i)|0))break t;n=i+10|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+12|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+16|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+18|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+22|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+28|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+30|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+36|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+40|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+42|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+46|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+52|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+58|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+60|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+66|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+70|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+72|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+78|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+82|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+88|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+96|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+100|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+102|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+106|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+108|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+112|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+120|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+126|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+130|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+136|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+138|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+142|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+148|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+150|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+156|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+162|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+166|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+168|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+172|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+178|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+180|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+186|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+190|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+192|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+196|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+198|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break t;n=i+208|0;e=(t>>>0)/(n>>>0)|0;if(e>>>0<n>>>0){l=105;break e}if((t|0)==(ne(e,n)|0))break;else{i=i+210|0;l=8}}while(0);i=r+1|0;t=(i|0)==48;i=t?0:i;t=(t&1)+o|0;r=i;o=t;t=(a[3712+(i<<2)>>2]|0)+(t*210|0)|0}if((l|0)==105){a[s>>2]=t;break}else if((l|0)==106){a[s>>2]=t;break}}else t=a[(Bu(3520,3712,s,t)|0)>>2]|0;while(0);h=u;return t|0}function Bu(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=a[n>>2]|0;i=e;n=t-e>>2;e:while(1){while(1){if(!n)break e;e=(n|0)/2|0;if((a[i+(e<<2)>>2]|0)>>>0<r>>>0)break;else n=e}i=i+(e+1<<2)|0;n=n+-1-e|0}return i|0}function ju(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0;if(n>>>0>4294967279)ur(e);if(n>>>0<11){i[e>>0]=n<<1;e=e+1|0}else{o=n+16&-16;r=Pi(o)|0;a[e+8>>2]=r;a[e>>2]=o|1;a[e+4>>2]=n;e=r}Qu(e|0,t|0,n|0)|0;i[e+n>>0]=0;return}function Vu(e){e=e|0;if(i[e>>0]&1)Oi(a[e+8>>2]|0);return}function Gu(){}function Wu(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;i=t-i-(n>>>0>e>>>0|0)>>>0;return(O=i,e-n>>>0|0)|0}function Xu(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,s=0,l=0;r=e+n|0;if((n|0)>=20){t=t&255;s=e&3;l=t|t<<8|t<<16|t<<24;o=r&~3;if(s){s=e+4-s|0;while((e|0)<(s|0)){i[e>>0]=t;e=e+1|0}}while((e|0)<(o|0)){a[e>>2]=l;e=e+4|0}}while((e|0)<(r|0)){i[e>>0]=t;e=e+1|0}return e-n|0}function Yu(e,t,n){e=e|0;t=t|0;n=n|0;if((n|0)<32){O=t<<n|(e&(1<<n)-1<<32-n)>>>32-n;return e<<n}O=e<<n-32;return 0}function qu(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;n=e+n>>>0;return(O=t+i+(n>>>0<e>>>0|0)>>>0,n|0)|0}function Zu(e,t,n){e=e|0;t=t|0;n=n|0;if((n|0)<32){O=t>>>n;return e>>>n|(t&(1<<n)-1)<<32-n}O=0;return t>>>n-32|0}function Qu(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;if((n|0)>=4096)return Je(e|0,t|0,n|0)|0;r=e|0;if((e&3)==(t&3)){while(e&3){if(!n)return r|0;i[e>>0]=i[t>>0]|0;e=e+1|0;t=t+1|0;n=n-1|0}while((n|0)>=4){a[e>>2]=a[t>>2];e=e+4|0;t=t+4|0;n=n-4|0}}while((n|0)>0){i[e>>0]=i[t>>0]|0;e=e+1|0;t=t+1|0;n=n-1|0}return r|0}function $u(e,t,n){e=e|0;t=t|0;n=n|0;if((n|0)<32){O=t>>n;return e>>>n|(t&(1<<n)-1)<<32-n}O=(t|0)<0?-1:0;return t>>n-32|0}function Ju(e){e=e|0;var t=0;t=i[g+(e&255)>>0]|0;if((t|0)<8)return t|0;t=i[g+(e>>8&255)>>0]|0;if((t|0)<8)return t+8|0;t=i[g+(e>>16&255)>>0]|0;if((t|0)<8)return t+16|0;return(i[g+(e>>>24)>>0]|0)+24|0}function Ku(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0;a=e&65535;r=t&65535;n=ne(r,a)|0;i=e>>>16;e=(n>>>16)+(ne(r,i)|0)|0;r=t>>>16;t=ne(r,a)|0;return(O=(e>>>16)+(ne(r,i)|0)+(((e&65535)+t|0)>>>16)|0,e+t<<16|n&65535|0)|0}function ec(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,a=0,o=0,s=0,l=0,u=0;u=t>>31|((t|0)<0?-1:0)<<1;l=((t|0)<0?-1:0)>>31|((t|0)<0?-1:0)<<1;a=i>>31|((i|0)<0?-1:0)<<1;r=((i|0)<0?-1:0)>>31|((i|0)<0?-1:0)<<1;s=Wu(u^e,l^t,u,l)|0;o=O;e=a^u;t=r^l;return Wu((ac(s,o,Wu(a^n,r^i,a,r)|0,O,0)|0)^e,O^t,e,t)|0}function tc(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,s=0,l=0,u=0,c=0;r=h;h=h+16|0;l=r|0;s=t>>31|((t|0)<0?-1:0)<<1;o=((t|0)<0?-1:0)>>31|((t|0)<0?-1:0)<<1;c=i>>31|((i|0)<0?-1:0)<<1;u=((i|0)<0?-1:0)>>31|((i|0)<0?-1:0)<<1;e=Wu(s^e,o^t,s,o)|0;t=O;ac(e,t,Wu(c^n,u^i,c,u)|0,O,l)|0;i=Wu(a[l>>2]^s,a[l+4>>2]^o,s,o)|0;n=O;h=r;return(O=n,i)|0}function nc(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,a=0;r=e;a=n;n=Ku(r,a)|0;e=O;return(O=(ne(t,a)|0)+(ne(i,r)|0)+e|e&0,n|0|0)|0}function ic(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;return ac(e,t,n,i,0)|0}function rc(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0;o=h;h=h+16|0;r=o|0;ac(e,t,n,i,r)|0;h=o;return(O=a[r+4>>2]|0,a[r>>2]|0)|0}function ac(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,s=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0;h=e;u=t;c=u;s=n;d=i;l=d;if(!c){o=(r|0)!=0;if(!l){if(o){a[r>>2]=(h>>>0)%(s>>>0);a[r+4>>2]=0}d=0;r=(h>>>0)/(s>>>0)>>>0;return(O=d,r)|0}else{if(!o){d=0;r=0;return(O=d,r)|0}a[r>>2]=e|0;a[r+4>>2]=t&0;d=0;r=0;return(O=d,r)|0}}o=(l|0)==0;do if(s){if(!o){o=(re(l|0)|0)-(re(c|0)|0)|0;if(o>>>0<=31){f=o+1|0;l=31-o|0;t=o-31>>31;s=f;e=h>>>(f>>>0)&t|c<<l;t=c>>>(f>>>0)&t;o=0;l=h<<l;break}if(!r){d=0;r=0;return(O=d,r)|0}a[r>>2]=e|0;a[r+4>>2]=u|t&0;d=0;r=0;return(O=d,r)|0}o=s-1|0;if(o&s){l=(re(s|0)|0)+33-(re(c|0)|0)|0;g=64-l|0;f=32-l|0;u=f>>31;p=l-32|0;t=p>>31;s=l;e=f-1>>31&c>>>(p>>>0)|(c<<f|h>>>(l>>>0))&t;t=t&c>>>(l>>>0);o=h<<g&u;l=(c<<g|h>>>(p>>>0))&u|h<<f&l-33>>31;break}if(r){a[r>>2]=o&h;a[r+4>>2]=0}if((s|0)==1){p=u|t&0;g=e|0|0;return(O=p,g)|0}else{g=Ju(s|0)|0;p=c>>>(g>>>0)|0;g=c<<32-g|h>>>(g>>>0)|0;return(O=p,g)|0}}else{if(o){if(r){a[r>>2]=(c>>>0)%(s>>>0);a[r+4>>2]=0}p=0;g=(c>>>0)/(s>>>0)>>>0;return(O=p,g)|0}if(!h){if(r){a[r>>2]=0;a[r+4>>2]=(c>>>0)%(l>>>0)}p=0;g=(c>>>0)/(l>>>0)>>>0;return(O=p,g)|0}o=l-1|0;if(!(o&l)){if(r){a[r>>2]=e|0;a[r+4>>2]=o&c|t&0}p=0;g=c>>>((Ju(l|0)|0)>>>0);return(O=p,g)|0}o=(re(l|0)|0)-(re(c|0)|0)|0;if(o>>>0<=30){t=o+1|0;l=31-o|0;s=t;e=c<<l|h>>>(t>>>0);t=c>>>(t>>>0);o=0;l=h<<l;break}if(!r){p=0;g=0;return(O=p,g)|0}a[r>>2]=e|0;a[r+4>>2]=u|t&0;p=0;g=0;return(O=p,g)|0}while(0);if(!s){c=l;u=0;l=0}else{f=n|0|0;h=d|i&0;c=qu(f|0,h|0,-1,-1)|0;n=O;u=l;l=0;do{i=u;u=o>>>31|u<<1;o=l|o<<1;i=e<<1|i>>>31|0;d=e>>>31|t<<1|0;Wu(c,n,i,d)|0;g=O;p=g>>31|((g|0)<0?-1:0)<<1;l=p&1;e=Wu(i,d,p&f,(((g|0)<0?-1:0)>>31|((g|0)<0?-1:0)<<1)&h)|0;t=O;s=s-1|0}while((s|0)!=0);c=u;u=0}s=0;if(r){a[r>>2]=e;a[r+4>>2]=t}p=(o|0)>>>31|(c|s)<<1|(s<<1|o>>>31)&0|u;g=(o<<1|0>>>31)&-2|l;return(O=p,g)|0}function oc(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;return Uc[e&15](t|0,n|0,i|0)|0}function sc(e,t,n,i,r,a){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;a=a|0;Hc[e&3](t|0,n|0,i|0,r|0,a|0)}function lc(e,t,n){e=e|0;t=t|0;n=n|0;return+zc[e&1](t|0,n|0)}function uc(e,t,n){e=e|0;t=t|0;n=+n;Bc[e&3](t|0,+n)}function cc(e,t){e=e|0;t=t|0;return+jc[e&3](t|0)}function hc(e){e=e|0;return Vc[e&1]()|0}function fc(e,t){e=e|0;t=t|0;Gc[e&15](t|0)}function dc(e,t,n){e=e|0;t=t|0;n=n|0;Wc[e&7](t|0,n|0)}function pc(e,t){e=e|0;t=t|0;return Xc[e&31](t|0)|0}function gc(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;Yc[e&1](t|0,n|0,i|0)}function mc(e){e=e|0;qc[e&0]()}function vc(e,t,n,i){e=e|0;t=t|0;n=n|0;i=+i;Zc[e&3](t|0,n|0,+i)}function _c(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return Qc[e&1](t|0,n|0,i|0,r|0)|0}function yc(e,t,n,i,r,a,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;a=a|0;o=o|0;$c[e&3](t|0,n|0,i|0,r|0,a|0,o|0)}function bc(e,t,n){e=e|0;t=t|0;n=n|0;return Jc[e&15](t|0,n|0)|0}function wc(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;Kc[e&3](t|0,n|0,i|0,r|0)}function xc(e,t,n){e=e|0;t=t|0;n=n|0;ae(0);return 0}function Ec(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;ae(1)}function kc(e,t){e=e|0;t=t|0;ae(2);return 0}function Mc(e,t){e=e|0;t=+t;ae(3)}function Tc(e){e=e|0;ae(4);return 0}function Sc(){ae(5);return 0}function Ac(e){e=e|0;ae(6)}function Rc(e,t){e=e|0;t=t|0;ae(7)}function Cc(e){e=e|0;ae(8);return 0}function Pc(e,t,n){e=e|0;t=t|0;n=n|0;ae(9)}function Oc(){ae(10)}function Lc(e,t,n){e=e|0;t=t|0;n=+n;ae(11)}function Nc(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;ae(12);return 0}function Fc(e,t,n,i,r,a){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;a=a|0;ae(13)}function Dc(e,t){e=e|0;t=t|0;ae(14);return 0}function Ic(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;ae(15)}var Uc=[xc,Xi,Yi,Ia,Ir,Dr,Ur,Vs,Fs,Ls,Ns,Bs,Sl,Tl,Fr,La];var Hc=[Ec,ar,rr,tr];var zc=[kc,bl];var Bc=[Mc,hs,ds,vs];var jc=[Tc,fs,ps,_s];var Vc=[Sc,ns];var Gc=[Ac,Li,Ni,Hi,ji,zi,Bi,Vi,Gi,Wi,ts,fl,dl,Ra,Ca,Ac];var Wc=[Rc,Ms,Es,gs,ys,ws,Cs,El];var Xc=[Cc,Fi,Nr,rs,cs,as,Hs,zs,Rs,As,Ts,ks,ms,bs,xs,Ps,xl,Cc,Cc,Cc,Cc,Cc,Cc,Cc,Cc,Cc,Cc,Cc,Cc,Cc,Cc,Cc];var Yc=[Pc,yl];var qc=[Oc];var Zc=[Lc,wl,_l,Lc];var Qc=[Nc,Rl];var $c=[Fc,lr,sr,or];var Jc=[Dc,Xo,ss,ls,us,Ds,Us,Is,js,Ss,Al,kl,Dc,Dc,Dc,Dc];var Kc=[Ic,Zi,Qi,Ji];return{_i64Subtract:Wu,_fflush:Wr,_i64Add:qu,_memset:Xu,_malloc:Ba,_memcpy:Qu,___getTypeName:wi,_bitshift64Lshr:Zu,_free:ja,___errno_location:hr,_bitshift64Shl:Yu,__GLOBAL__sub_I_ARToolKitJS_cpp:hl,__GLOBAL__sub_I_bind_cpp:Ei,runPostSets:Gu,stackAlloc:pn,stackSave:gn,stackRestore:mn,establishStackSpace:vn,setThrew:_n,setTempRet0:wn,getTempRet0:xn,dynCall_iiii:oc,dynCall_viiiii:sc,dynCall_dii:lc,dynCall_vid:uc,dynCall_di:cc,dynCall_i:hc,dynCall_vi:fc,dynCall_vii:dc,dynCall_ii:pc,dynCall_viii:gc,dynCall_v:mc,dynCall_viid:vc,dynCall_iiiii:_c,dynCall_viiiiii:yc,dynCall_iii:bc,dynCall_viiii:wc}}(Module.asmGlobalArg,Module.asmLibraryArg,buffer),_i64Subtract=Module._i64Subtract=asm._i64Subtract,__GLOBAL__sub_I_bind_cpp=Module.__GLOBAL__sub_I_bind_cpp=asm.__GLOBAL__sub_I_bind_cpp,_fflush=Module._fflush=asm._fflush,__GLOBAL__sub_I_ARToolKitJS_cpp=Module.__GLOBAL__sub_I_ARToolKitJS_cpp=asm.__GLOBAL__sub_I_ARToolKitJS_cpp,_i64Add=Module._i64Add=asm._i64Add,_memset=Module._memset=asm._memset,runPostSets=Module.runPostSets=asm.runPostSets,_malloc=Module._malloc=asm._malloc,_memcpy=Module._memcpy=asm._memcpy,___getTypeName=Module.___getTypeName=asm.___getTypeName,_bitshift64Lshr=Module._bitshift64Lshr=asm._bitshift64Lshr,_free=Module._free=asm._free,___errno_location=Module.___errno_location=asm.___errno_location,_bitshift64Shl=Module._bitshift64Shl=asm._bitshift64Shl,dynCall_iiii=Module.dynCall_iiii=asm.dynCall_iiii,dynCall_viiiii=Module.dynCall_viiiii=asm.dynCall_viiiii,dynCall_dii=Module.dynCall_dii=asm.dynCall_dii,dynCall_vid=Module.dynCall_vid=asm.dynCall_vid,dynCall_di=Module.dynCall_di=asm.dynCall_di,dynCall_i=Module.dynCall_i=asm.dynCall_i,dynCall_vi=Module.dynCall_vi=asm.dynCall_vi,dynCall_vii=Module.dynCall_vii=asm.dynCall_vii,dynCall_ii=Module.dynCall_ii=asm.dynCall_ii,dynCall_viii=Module.dynCall_viii=asm.dynCall_viii,dynCall_v=Module.dynCall_v=asm.dynCall_v,dynCall_viid=Module.dynCall_viid=asm.dynCall_viid,dynCall_iiiii=Module.dynCall_iiiii=asm.dynCall_iiiii,dynCall_viiiiii=Module.dynCall_viiiiii=asm.dynCall_viiiiii,dynCall_iii=Module.dynCall_iii=asm.dynCall_iii,dynCall_viiii=Module.dynCall_viiii=asm.dynCall_viiii;
Runtime.stackAlloc=asm.stackAlloc,Runtime.stackSave=asm.stackSave,Runtime.stackRestore=asm.stackRestore,Runtime.establishStackSpace=asm.establishStackSpace,Runtime.setTempRet0=asm.setTempRet0,Runtime.getTempRet0=asm.getTempRet0,ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop,preloadStartTime=null,calledMain=!1;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function(e){function t(){for(var e=0;e<3;e++)i.push(0)}assert(0==runDependencies,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),assert(0==__ATPRERUN__.length,"cannot call main when preRun functions remain to be called"),e=e||[],ensureInitRuntime();var n=e.length+1,i=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];t();for(var r=0;r<n-1;r+=1)i.push(allocate(intArrayFromString(e[r]),"i8",ALLOC_NORMAL)),t();i.push(0),i=allocate(i,"i32",ALLOC_NORMAL);try{var a=Module._main(n,i,0);exit(a,!0)}catch(e){if(e instanceof ExitStatus)return;if("SimulateInfiniteLoop"==e)return void(Module.noExitRuntime=!0);throw e&&"object"==typeof e&&e.stack&&Module.printErr("exception thrown: "+[e,e.stack]),e}finally{calledMain=!0}},Module.run=Module.run=run,Module.exit=Module.exit=exit;var abortDecorators=[];if(Module.abort=Module.abort=abort,Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run(),function(){"use strict";function e(){d.forEach(function(e){f[e]=Module[e]});for(var e in Module)e.match(/^AR/)&&(f[e]=Module[e])}function t(e,t,n){var i="/marker_"+p++;l(t,i,function(){var t=Module._addMarker(e,i);n&&n(t)})}function n(e){return String.fromCharCode.apply(String,e)}function i(e){var t=n(e),i=t.split("\n"),r=[],a=0,o=0;return i.forEach(function(e){if(e=e.trim(),e&&!e.startsWith("#"))switch(a){case 0:return o=+e,void(a=1);case 1:e.match(/^\d+$/)||r.push(e);case 2:case 3:case 4:return void a++;case 5:return void(a=1)}}),r}function r(e,t,n){var r="/multi_marker_"+g++;l(t,r,function(a){function o(){var t=Module._addMultiMarker(e,r),i=Module.getMultiMarkerNum(e,t);n&&n(t,i)}var s=i(a);if(!s.length)return o();var l=t.split("/").slice(0,-1).join("/");s=s.map(function(e){return"patt.hiro"===e||"patt.kanji"===e||"patt2.hiro"===e||"patt2.kanji"===e?["http://127.0.0.1:8080/data/data/"+e,e]:[l+"/"+e,e]}),u(s,o)})}function a(e,t){var n="/camera_param_"+m++,i=function(){var e=Module._loadCamera(n);t&&t(e)};"object"==typeof e?s(n,e,i):e.indexOf("\n")>-1?o(n,e,i):l(e,n,i)}function o(e,t,n){for(var i=new Uint8Array(t.length),r=0;r<i.length;r++)i[r]=255&t.charCodeAt(r);s(e,i,n)}function s(e,t,n){FS.writeFile(e,t,{encoding:"binary"}),n(t)}function l(e,t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(e){var r=i.response,a=new Uint8Array(r);s(t,a,n)},i.send()}function u(e,t){var n=e.pop();n?l(n[0],n[1],function(){u(e,t)}):t()}var c=function(e,t,n){var i=e,r=t;if(this.orientation="landscape",this.listeners={},"number"!=typeof e){var a=e;n=t,i=a.videoWidth||a.width,r=a.videoHeight||a.height,this.image=a}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=i,this.canvas.height=r,this.ctx=this.canvas.getContext("2d"),this.videoWidth=i,this.videoHeight=r,"string"==typeof n){var o=this;this.cameraParam=new h(n,function(){o._initialize()},function(e){console.error("ARController: Failed to load ARCameraParam",e)})}else this.cameraParam=n,this._initialize()};c.prototype.dispose=function(){f.teardown(this.id);for(var e in this)this[e]=null},c.prototype.process=function(e){this.detectMarker(e);var t,n,i=this.getMarkerNum();for(t in this.patternMarkers)n=this.patternMarkers[t],n.inPrevious=n.inCurrent,n.inCurrent=!1;for(t in this.barcodeMarkers)n=this.barcodeMarkers[t],n.inPrevious=n.inCurrent,n.inCurrent=!1;for(var r=0;r<i;r++){var a=this.getMarker(r),o=f.UNKNOWN_MARKER,s=this.trackPatternMarkerId(-1);a.idPatt>-1&&(a.id===a.idPatt||a.idMatrix===-1)?(s=this.trackPatternMarkerId(a.idPatt),o=f.PATTERN_MARKER,a.dir!==a.dirPatt&&this.setMarkerInfoDir(r,a.dirPatt)):a.idMatrix>-1&&(s=this.trackBarcodeMarkerId(a.idMatrix),o=f.BARCODE_MARKER,a.dir!==a.dirMatrix&&this.setMarkerInfoDir(r,a.dirMatrix)),o!==f.UNKNOWN_MARKER&&s.inPrevious?this.getTransMatSquareCont(r,s.markerWidth,s.matrix,s.matrix):this.getTransMatSquare(r,s.markerWidth,s.matrix),s.inCurrent=!0,this.transMatToGLMat(s.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:r,type:o,marker:a,matrix:this.transform_mat}})}for(var l=this.getMultiMarkerCount(),r=0;r<l;r++){var u=this.getMultiMarkerPatternCount(r),s=!1;f.getTransMatMultiSquareRobust(this.id,r),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var c=0;c<u;c++){var h=this.getMultiEachMarker(r,c);if(h.visible>=0){s=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:r,matrix:this.transform_mat}});break}}if(s)for(var c=0;c<u;c++){var h=this.getMultiEachMarker(r,c);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:r,markerIndex:c,marker:h,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},c.prototype.trackPatternMarkerId=function(e,t){var n=this.patternMarkers[e];return n||(this.patternMarkers[e]=n={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(n.markerWidth=t),n},c.prototype.trackBarcodeMarkerId=function(e,t){var n=this.barcodeMarkers[e];return n||(this.barcodeMarkers[e]=n={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(n.markerWidth=t),n},c.prototype.getMultiMarkerCount=function(){return f.getMultiMarkerCount(this.id)},c.prototype.getMultiMarkerPatternCount=function(e){return f.getMultiMarkerNum(this.id,e)},c.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},c.prototype.removeEventListener=function(e,t){if(this.listeners[e]){var n=this.listeners[e].indexOf(t);n>-1&&this.listeners[e].splice(n,1)}},c.prototype.dispatchEvent=function(e){var t=this.listeners[e.name];if(t)for(var n=0;n<t.length;n++)t[n].call(this,e)},c.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},c.prototype.loadMarker=function(e,t,n){return f.addMarker(this.id,e,t,n)},c.prototype.loadMultiMarker=function(e,t,n){return f.addMultiMarker(this.id,e,t,n)},c.prototype.getTransMatSquare=function(e,t,n){return f.getTransMatSquare(this.id,e,t),n.set(this.marker_transform_mat),n},c.prototype.getTransMatSquareCont=function(e,t,n,i){return this.marker_transform_mat.set(n),f.getTransMatSquareCont(this.id,e,t),i.set(this.marker_transform_mat),i},c.prototype.getTransMatMultiSquare=function(e,t){return f.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},c.prototype.getTransMatMultiSquareRobust=function(e,t){return f.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},c.prototype.transMatToGLMat=function(e,t,n){return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=0,t[7]=0,t[11]=0,t[15]=1,void 0!=n&&0!==n&&(t[12]*=n,t[13]*=n,t[14]*=n),t},c.prototype.detectMarker=function(e){return this._copyImageToHeap(e)?f.detectMarker(this.id):-99},c.prototype.getMarkerNum=function(){return f.getMarkerNum(this.id)},c.prototype.getMarker=function(e){if(0===f.getMarker(this.id,e))return f.markerInfo},c.prototype.setMarkerInfoVertex=function(e,t){for(var n=0;n<t.length;n++)this.marker_transform_mat[2*n+0]=t[n][0],this.marker_transform_mat[2*n+1]=t[n][1];return f.setMarkerInfoVertex(this.id,e)},c.prototype.cloneMarkerInfo=function(e){return JSON.parse(JSON.stringify(e))},c.prototype.getMultiEachMarker=function(e,t){if(0===f.getMultiEachMarker(this.id,e,t))return f.multiEachMarkerInfo},c.prototype.getTransformationMatrix=function(){return this.transform_mat},c.prototype.getCameraMatrix=function(){return this.camera_mat},c.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},c.prototype.setDebugMode=function(e){return f.setDebugMode(this.id,e)},c.prototype.getDebugMode=function(){return f.getDebugMode(this.id)},c.prototype.getProcessingImage=function(){return f.getProcessingImage(this.id)},c.prototype.setLogLevel=function(e){return f.setLogLevel(e)},c.prototype.getLogLevel=function(){return f.getLogLevel()},c.prototype.setMarkerInfoDir=function(e,t){return f.setMarkerInfoDir(this.id,e,t)},c.prototype.setProjectionNearPlane=function(e){return f.setProjectionNearPlane(this.id,e)},c.prototype.getProjectionNearPlane=function(){return f.getProjectionNearPlane(this.id)},c.prototype.setProjectionFarPlane=function(e){return f.setProjectionFarPlane(this.id,e)},c.prototype.getProjectionFarPlane=function(){return f.getProjectionFarPlane(this.id)},c.prototype.setThresholdMode=function(e){return f.setThresholdMode(this.id,e)},c.prototype.getThresholdMode=function(){return f.getThresholdMode(this.id)},c.prototype.setThreshold=function(e){return f.setThreshold(this.id,e)},c.prototype.getThreshold=function(){return f.getThreshold(this.id)},c.prototype.setPatternDetectionMode=function(e){return f.setPatternDetectionMode(this.id,e)},c.prototype.getPatternDetectionMode=function(){return f.getPatternDetectionMode(this.id)},c.prototype.setMatrixCodeType=function(e){return f.setMatrixCodeType(this.id,e)},c.prototype.getMatrixCodeType=function(){return f.getMatrixCodeType(this.id)},c.prototype.setLabelingMode=function(e){return f.setLabelingMode(this.id,e)},c.prototype.getLabelingMode=function(){return f.getLabelingMode(this.id)},c.prototype.setPattRatio=function(e){return f.setPattRatio(this.id,e)},c.prototype.getPattRatio=function(){return f.getPattRatio(this.id)},c.prototype.setImageProcMode=function(e){return f.setImageProcMode(this.id,e)},c.prototype.getImageProcMode=function(){return f.getImageProcMode(this.id)},c.prototype.debugDraw=function(){var e=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),t=new ImageData(e,this.canvas.width,this.canvas.height);this.ctx.putImageData(t,0,0);for(var n=this.getMarkerNum(),i=0;i<n;i++)this._debugMarker(this.getMarker(i))},c.prototype._initialize=function(){this.id=f.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var e=f.frameMalloc;this.framepointer=e.framepointer,this.framesize=e.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,e.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,e.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var t=this;setTimeout(function(){t.onload&&t.onload(),t.dispatchEvent({name:"load",target:t})},1)},c.prototype._copyImageToHeap=function(e){e||(e=this.image),"portrait"===this.orientation?(this.ctx.save(),this.ctx.translate(this.canvas.width,0),this.ctx.rotate(Math.PI/2),this.ctx.drawImage(e,0,0,this.canvas.height,this.canvas.width),this.ctx.restore()):this.ctx.drawImage(e,0,0,this.canvas.width,this.canvas.height);var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),n=t.data;return!!this.dataHeap&&(this.dataHeap.set(n),!0)},c.prototype._debugMarker=function(e){var t,n;t=e.vertex;var i=this.ctx;i.strokeStyle="red",i.beginPath(),i.moveTo(t[0][0],t[0][1]),i.lineTo(t[1][0],t[1][1]),i.stroke(),i.beginPath(),i.moveTo(t[2][0],t[2][1]),i.lineTo(t[3][0],t[3][1]),i.stroke(),i.strokeStyle="green",i.beginPath(),i.lineTo(t[1][0],t[1][1]),i.lineTo(t[2][0],t[2][1]),i.stroke(),i.beginPath(),i.moveTo(t[3][0],t[3][1]),i.lineTo(t[0][0],t[0][1]),i.stroke(),n=e.pos,i.beginPath(),i.arc(n[0],n[1],8,0,2*Math.PI),i.fillStyle="red",i.fill()},c.getUserMedia=function(e){var t=e.facingMode||"environment",n=e.onSuccess,i=e.onError||function(e){console.error("ARController.getUserMedia",e)},r=document.createElement("video"),a=function(){0!==this.videoWidth&&n(r)},o=!1,s=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],l=function(e){o&&(r.play(),r.paused||s.forEach(function(e){window.removeEventListener(e,l,!0)}))};s.forEach(function(e){window.addEventListener(e,l,!0)});var u=function(e){r.addEventListener("loadedmetadata",a,!1),r.src=window.URL.createObjectURL(e),o=!0,l()},c={},h={};e.width&&(h.width=e.width,"object"==typeof e.width?(e.width.max&&(c.maxWidth=e.width.max),e.width.min&&(c.minWidth=e.width.max)):c.maxWidth=e.width),e.height&&(h.height=e.height,"object"==typeof e.height?(e.height.max&&(c.maxHeight=e.height.max),e.height.min&&(c.minHeight=e.height.max)):c.maxHeight=e.height),h.facingMode=t,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var f={audio:!1,video:{mandatory:c}};return navigator.getUserMedia?navigator.getUserMedia(f,u,i):i("navigator.getUserMedia is not supported on your browser"),r},c.getUserMediaARController=function(e){var t={};for(var n in e)t[n]=e[n];var i=e.onSuccess,r=e.cameraParam;t.onSuccess=function(){new h(r,function(){var t=this,n=e.maxARVideoSize||Math.max(a.videoWidth,a.videoHeight),r=n/Math.max(a.videoWidth,a.videoHeight),o=r*a.videoWidth,s=r*a.videoHeight;if(a.videoWidth<a.videoHeight){var l=o;o=s,s=l}var u=new c(o,s,t);u.image=a,a.videoWidth<a.videoHeight?(u.orientation="portrait",u.videoWidth=a.videoHeight,u.videoHeight=a.videoWidth):(u.orientation="landscape",u.videoWidth=a.videoWidth,u.videoHeight=a.videoHeight),i(u,t)},function(e){console.error("ARController: Failed to load ARCameraParam",e)})};var a=this.getUserMedia(t);return a};var h=function(e,t,n){this.id=-1,this._src="",this.complete=!1,this.onload=t,this.onerror=n,e&&this.load(e)};h.prototype.load=function(e){if(""!==this._src)throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=e,e){var t=this;f.loadCamera(e,function(e){t.id=e,t.complete=!0,t.onload()},function(e){t.onerror(e)})}},Object.defineProperty(h.prototype,"src",{set:function(e){this.load(e)},get:function(){return this._src}}),h.prototype.dispose=function(){this.id!==-1&&f.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var f={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:a,addMarker:t,addMultiMarker:r},d=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"],p=0,g=0,m=0;window.artoolkit=f,window.ARController=c,window.ARCameraParam=h,window.Module?e():window.Module={onRuntimeInitialized:function(){e()}}}();var AR=AR||{};AR.Marker=function(e,t){this.id=e,this.corners=t},AR.Detector=function(){this.grey=new CV.Image,this.thres=new CV.Image,this.homography=new CV.Image,this.binary=[],this.contours=[],this.polys=[],this.candidates=[]},AR.Detector.prototype.detect=function(e){return CV.grayscale(e,this.grey),CV.adaptiveThreshold(this.grey,this.thres,2,7),this.contours=CV.findContours(this.thres,this.binary),this.candidates=this.findCandidates(this.contours,.2*e.width,.05,10),this.candidates=this.clockwiseCorners(this.candidates),this.candidates=this.notTooNear(this.candidates,10),this.findMarkers(this.grey,this.candidates,49)},AR.Detector.prototype.findCandidates=function(e,t,n,i){var r,a,o,s=[],l=e.length;for(this.polys=[],o=0;o<l;++o)r=e[o],r.length>=t&&(a=CV.approxPolyDP(r,r.length*n),this.polys.push(a),4===a.length&&CV.isContourConvex(a)&&CV.minEdgeLength(a)>=i&&s.push(a));return s},AR.Detector.prototype.clockwiseCorners=function(e){var t,n,i,r,a,o,s=e.length;for(o=0;o<s;++o)t=e[o][1].x-e[o][0].x,i=e[o][1].y-e[o][0].y,n=e[o][2].x-e[o][0].x,r=e[o][2].y-e[o][0].y,t*r-i*n<0&&(a=e[o][1],e[o][1]=e[o][3],e[o][3]=a);return e},AR.Detector.prototype.notTooNear=function(e,t){var n,i,r,a,o,s,l=[],u=e.length;for(a=0;a<u;++a)for(o=a+1;o<u;++o){for(n=0,s=0;s<4;++s)i=e[a][s].x-e[o][s].x,r=e[a][s].y-e[o][s].y,n+=i*i+r*r;n/4<t*t&&(CV.perimeter(e[a])<CV.perimeter(e[o])?e[a].tooNear=!0:e[o].tooNear=!0)}for(a=0;a<u;++a)e[a].tooNear||l.push(e[a]);return l},AR.Detector.prototype.findMarkers=function(e,t,n){var i,r,a,o=[],s=t.length;for(a=0;a<s;++a)i=t[a],CV.warp(e,this.homography,i,n),CV.threshold(this.homography,this.homography,CV.otsu(this.homography)),r=this.getMarker(this.homography,i),r&&o.push(r);return o},AR.Detector.prototype.getMarker=function(e,t){var n,i,r,a,o,s=e.width/7>>>0,l=s*s>>1,u=[],c=[],h=[];for(a=0;a<7;++a)for(r=0===a||6===a?1:6,o=0;o<7;o+=r)if(n={x:o*s,y:a*s,width:s,height:s},CV.countNonZero(e,n)>l)return null;for(a=0;a<5;++a)for(u[a]=[],o=0;o<5;++o)n={x:(o+1)*s,y:(a+1)*s,width:s,height:s},u[a][o]=CV.countNonZero(e,n)>l?1:0;for(c[0]=u,h[0]=this.hammingDistance(c[0]),i={first:h[0],second:0},a=1;a<4;++a)c[a]=this.rotate(c[a-1]),h[a]=this.hammingDistance(c[a]),h[a]<i.first&&(i.first=h[a],i.second=a);return 0!==i.first?null:new AR.Marker(this.mat2id(c[i.second]),this.rotate2(t,4-i.second))},AR.Detector.prototype.hammingDistance=function(e){var t,n,i,r,a,o=[[1,0,0,0,0],[1,0,1,1,1],[0,1,0,0,1],[0,1,1,1,0]],s=0;for(i=0;i<5;++i){for(n=1/0,r=0;r<4;++r){for(t=0,a=0;a<5;++a)t+=e[i][a]===o[r][a]?0:1;t<n&&(n=t)}s+=n}return s},AR.Detector.prototype.mat2id=function(e){var t,n=0;for(t=0;t<5;++t)n<<=1,n|=e[t][1],n<<=1,n|=e[t][3];return n},AR.Detector.prototype.rotate=function(e){var t,n,i=[],r=e.length;for(t=0;t<r;++t)for(i[t]=[],n=0;n<e[t].length;++n)i[t][n]=e[e[t].length-n-1][t];return i},AR.Detector.prototype.rotate2=function(e,t){var n,i=[],r=e.length;for(n=0;n<r;++n)i[n]=e[(t+n)%r];return i};var CV=CV||{};CV.Image=function(e,t,n){this.width=e||0,this.height=t||0,this.data=n||[]},CV.grayscale=function(e,t){for(var n=e.data,i=t.data,r=n.length,a=0,o=0;a<r;a+=4)i[o++]=.299*n[a]+.587*n[a+1]+.114*n[a+2]+.5&255;return t.width=e.width,t.height=e.height,t},CV.threshold=function(e,t,n){var i,r=e.data,a=t.data,o=r.length,s=[];for(i=0;i<256;++i)s[i]=i<=n?0:255;for(i=0;i<o;++i)a[i]=s[r[i]];return t.width=e.width,t.height=e.height,t},CV.adaptiveThreshold=function(e,t,n,i){var r,a=e.data,o=t.data,s=a.length,l=[];for(CV.stackBoxBlur(e,t,n),r=0;r<768;++r)l[r]=r-255<=-i?255:0;for(r=0;r<s;++r)o[r]=l[a[r]-o[r]+255];return t.width=e.width,t.height=e.height,t},CV.otsu=function(e){var t,n,i,r=e.data,a=r.length,o=[],s=0,l=0,u=0,c=0,h=0,f=0;for(i=0;i<256;++i)o[i]=0;for(i=0;i<a;++i)o[r[i]]++;for(i=0;i<256;++i)l+=o[i]*i;for(i=0;i<256;++i)if(c+=o[i],0!==c){if(h=a-c,0===h)break;u+=o[i]*i,t=u/c-(l-u)/h,n=c*h*t*t,n>f&&(f=n,s=i)}return s},CV.stackBoxBlurMult=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265],CV.stackBoxBlurShift=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13],CV.BlurStack=function(){this.color=0,this.next=null},CV.stackBoxBlur=function(e,t,n){var i,r,a,o,s,l,u,c,h,f,d=e.data,p=t.data,g=e.height,m=e.width,v=g-1,_=m-1,y=n+n+1,b=n+1,w=CV.stackBoxBlurMult[n],x=CV.stackBoxBlurShift[n];for(i=r=new CV.BlurStack,f=1;f<y;++f)i=i.next=new CV.BlurStack;for(i.next=r,s=0,h=0;h<g;++h){for(l=s,a=d[s],o=b*a,i=r,f=0;f<b;++f)i.color=a,i=i.next;for(f=1;f<b;++f)i.color=d[s+f],o+=i.color,i=i.next;for(i=r,c=0;c<m;++c)p[s++]=o*w>>>x,u=c+b,u=l+(u<_?u:_),o-=i.color-d[u],i.color=d[u],i=i.next}for(c=0;c<m;++c){for(s=c,l=s+m,a=p[s],o=b*a,i=r,f=0;f<b;++f)i.color=a,i=i.next;for(f=1;f<b;++f)i.color=p[l],o+=i.color,i=i.next,l+=m;for(i=r,h=0;h<g;++h)p[s]=o*w>>>x,u=h+b,u=c+(u<v?u:v)*m,o-=i.color-p[u],i.color=p[u],i=i.next,s+=m}return t},CV.gaussianBlur=function(e,t,n,i){var r=CV.gaussianKernel(i);return t.width=e.width,t.height=e.height,n.width=e.width,n.height=e.height,CV.gaussianBlurFilter(e,n,r,!0),CV.gaussianBlurFilter(n,t,r,!1),t},CV.gaussianBlurFilter=function(e,t,n,i){var r,a,o,s,l,u=e.data,c=t.data,h=e.height,f=e.width,d=0,p=n.length>>1;for(o=0;o<h;++o)for(s=0;s<f;++s){for(a=0,l=-p;l<=p;++l)i?(r=d+l,s+l<0?r=d:s+l>=f&&(r=d)):(r=d+l*f,o+l<0?r=d:o+l>=h&&(r=d)),a+=n[p+l]*u[r];c[d++]=i?a:a+.5&255}return t},CV.gaussianKernel=function(e){var t,n,i,r,a,o,s=[[1],[.25,.5,.25],[.0625,.25,.375,.25,.0625],[.03125,.109375,.21875,.28125,.21875,.109375,.03125]],l=[];if(e<=7&&e%2===1)l=s[e>>1];else{for(t=.5*(e-1),n=.8+.3*(t-1),i=-.5/(n*n),r=0,o=0;o<e;++o)a=o-t,r+=l[o]=Math.exp(i*a*a);for(r=1/r,o=0;o<e;++o)l[o]*=r}return l},CV.findContours=function(e,t){var n,i,r,a,o,s,l,u,c,h=e.width,f=e.height,d=[];for(n=CV.binaryBorder(e,t),i=CV.neighborhoodDeltas(h+2),r=h+3,o=1,u=0;u<f;++u,r+=2)for(c=0;c<h;++c,++r)a=n[r],0!==a&&(s=l=!1,1===a&&0===n[r-1]?s=!0:a>=1&&0===n[r+1]&&(l=!0),(s||l)&&(++o,d.push(CV.borderFollowing(n,r,o,{x:c,y:u},l,i))));return d},CV.borderFollowing=function(e,t,n,i,r,a){var o,s,l,u,c,h,f=[];f.hole=r,u=c=r?0:4;do if(u=u-1&7,o=t+a[u],0!==e[o])break;while(u!==c);if(u===c)e[t]=-n,f.push({x:i.x,y:i.y});else for(s=t,h=4^u;;){c=u;do l=s+a[++u];while(0===e[l]);if(u&=7,u-1>>>0<c>>>0?e[s]=-n:1===e[s]&&(e[s]=n),f.push({x:i.x,y:i.y}),h=u,i.x+=CV.neighborhood[u][0],i.y+=CV.neighborhood[u][1],l===t&&s===o)break;s=l,u=u+4&7}return f},CV.neighborhood=[[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1],[0,1],[1,1]],CV.neighborhoodDeltas=function(e){for(var t=[],n=CV.neighborhood.length,i=0;i<n;++i)t[i]=CV.neighborhood[i][0]+CV.neighborhood[i][1]*e;return t.concat(t)},CV.approxPolyDP=function(e,t){var n,i,r,a,o,s,l,u,c,h,f,d={start_index:0,end_index:0},p={start_index:0,end_index:0},g=[],m=[],v=e.length;for(t*=t,f=0,c=0;c<3;++c)for(o=0,f=(f+p.start_index)%v,i=e[f],++f===v&&(f=0),h=1;h<v;++h)n=e[f],++f===v&&(f=0),l=n.x-i.x,u=n.y-i.y,a=l*l+u*u,a>o&&(o=a,p.start_index=h);for(o<=t?g.push({x:i.x,y:i.y}):(d.start_index=f,d.end_index=p.start_index+=d.start_index,p.start_index-=p.start_index>=v?v:0,p.end_index=d.start_index,p.end_index<p.start_index&&(p.end_index+=v),m.push({start_index:p.start_index,end_index:p.end_index}),m.push({start_index:d.start_index,end_index:d.end_index}));0!==m.length;){if(d=m.pop(),r=e[d.end_index%v],i=e[f=d.start_index%v],++f===v&&(f=0),d.end_index<=d.start_index+1)s=!0;else{for(o=0,l=r.x-i.x,u=r.y-i.y,c=d.start_index+1;c<d.end_index;++c)n=e[f],++f===v&&(f=0),a=Math.abs((n.y-i.y)*l-(n.x-i.x)*u),a>o&&(o=a,p.start_index=c);s=o*o<=t*(l*l+u*u)}s?g.push({x:i.x,y:i.y}):(p.end_index=d.end_index,d.end_index=p.start_index,m.push({start_index:p.start_index,end_index:p.end_index}),m.push({start_index:d.start_index,end_index:d.end_index}))}return g},CV.warp=function(e,t,n,i){var r,a,o,s,l,u,c,h,f,d,p,g,m,v,_,y,b,w,x,E,k,M,T,S=e.data,A=t.data,R=e.width,C=e.height,P=0;for(m=CV.getPerspectiveTransform(n,i-1),v=m[8],_=m[2],y=m[5],M=0;M<i;++M)for(v+=m[7],_+=m[1],y+=m[4],b=v,w=_,x=y,T=0;T<i;++T)b+=m[6],w+=m[0],x+=m[3],E=w/b,k=x/b,r=E>>>0,a=r===R-1?r:r+1,o=E-r,s=1-o,l=k>>>0,u=l===C-1?l:l+1,c=k-l,h=1-c,f=d=l*R,p=g=u*R,A[P++]=h*(s*S[f+r]+o*S[d+a])+c*(s*S[p+r]+o*S[g+a])&255;return t.width=i,t.height=i,t},CV.getPerspectiveTransform=function(e,t){var n=CV.square2quad(e);return n[0]/=t,n[1]/=t,n[3]/=t,n[4]/=t,n[6]/=t,n[7]/=t,n},CV.square2quad=function(e){var t,n,i,r,a,o,s,l=[];return t=e[0].x-e[1].x+e[2].x-e[3].x,n=e[0].y-e[1].y+e[2].y-e[3].y,0===t&&0===n?(l[0]=e[1].x-e[0].x,l[1]=e[2].x-e[1].x,l[2]=e[0].x,l[3]=e[1].y-e[0].y,l[4]=e[2].y-e[1].y,l[5]=e[0].y,l[6]=0,l[7]=0,l[8]=1):(i=e[1].x-e[2].x,r=e[3].x-e[2].x,a=e[1].y-e[2].y,o=e[3].y-e[2].y,s=i*o-r*a,l[6]=(t*o-r*n)/s,l[7]=(i*n-t*a)/s,l[8]=1,l[0]=e[1].x-e[0].x+l[6]*e[1].x,l[1]=e[3].x-e[0].x+l[7]*e[3].x,l[2]=e[0].x,l[3]=e[1].y-e[0].y+l[6]*e[1].y,l[4]=e[3].y-e[0].y+l[7]*e[3].y,l[5]=e[0].y),l},CV.isContourConvex=function(e){var t,n,i,r,a,o,s,l,u=0,c=!0,h=e.length,f=0,d=0;for(n=e[h-1],t=e[0],a=t.x-n.x,o=t.y-n.y;f<h;++f){if(++d===h&&(d=0),n=t,t=e[d],s=t.x-n.x,l=t.y-n.y,i=s*o,r=l*a,u|=r>i?1:r<i?2:3,3===u){c=!1;break}a=s,o=l}return c},CV.perimeter=function(e){for(var t,n,i=e.length,r=0,a=i-1,o=0;r<i;a=r++)t=e[r].x-e[a].x,n=e[r].y-e[a].y,o+=Math.sqrt(t*t+n*n);return o},CV.minEdgeLength=function(e){for(var t,n,i,r=e.length,a=0,o=r-1,s=1/0;a<r;o=a++)n=e[a].x-e[o].x,i=e[a].y-e[o].y,t=n*n+i*i,t<s&&(s=t);return Math.sqrt(s)},CV.countNonZero=function(e,t){var n,i,r=e.data,a=t.height,o=t.width,s=t.x+t.y*e.width,l=e.width-o,u=0;for(n=0;n<a;++n){for(i=0;i<o;++i)0!==r[s++]&&++u;s+=l}return u},CV.binaryBorder=function(e,t){var n,i,r=e.data,a=e.height,o=e.width,s=0,l=0;for(i=-2;i<o;++i)t[l++]=0;for(n=0;n<a;++n){for(t[l++]=0,i=0;i<o;++i)t[l++]=0===r[s++]?0:1;t[l++]=0}for(i=-2;i<o;++i)t[l++]=0;return t};var POS=POS||{};POS.Posit=function(e,t){this.objectPoints=this.buildModel(e),this.focalLength=t,this.objectVectors=[],this.objectNormal=[],this.objectMatrix=[[],[],[]],this.init()},POS.Posit.prototype.buildModel=function(e){var t=e/2;return[[-t,t,0],[t,t,0],[t,-t,0],[-t,-t,0]]},POS.Posit.prototype.init=function(){var e,t=this.objectPoints.length,n=[],i=[],r=0,a=2;for(e=0;e<t;++e)this.objectVectors[e]=[this.objectPoints[e][0]-this.objectPoints[0][0],this.objectPoints[e][1]-this.objectPoints[0][1],this.objectPoints[e][2]-this.objectPoints[0][2]],n[e]=[this.objectVectors[e][0],this.objectVectors[e][1],this.objectVectors[e][2]];for(;0===r;)i[0]=this.objectVectors[1][1]*this.objectVectors[a][2]-this.objectVectors[1][2]*this.objectVectors[a][1],i[1]=this.objectVectors[1][2]*this.objectVectors[a][0]-this.objectVectors[1][0]*this.objectVectors[a][2],i[2]=this.objectVectors[1][0]*this.objectVectors[a][1]-this.objectVectors[1][1]*this.objectVectors[a][0],r=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]),++a;for(e=0;e<3;++e)this.objectNormal[e]=i[e]/r;POS.pseudoInverse(n,t,this.objectMatrix)},POS.Posit.prototype.pose=function(e){var t,n,i,r,a,o,s=[[],[],[]],l=[[],[],[]],u=[],c=[[],[],[]],h=[[],[],[]],f=[],d=[];for(this.pos(e,s,l,u),i=this.isValid(s,u),t=i?this.iterate(e,s,u,c,f):{euclidean:-1,pixels:-1,maximum:-1},r=this.isValid(l,u),n=r?this.iterate(e,l,u,h,d):{euclidean:-1,pixels:-1,maximum:-1},a=0;a<3;++a)for(o=0;o<3;++o)i&&(f[a]-=c[a][o]*this.objectPoints[0][o]),r&&(d[a]-=h[a][o]*this.objectPoints[0][o]);return t.euclidean<n.euclidean?new POS.Pose(t.pixels,c,f,n.pixels,h,d):new POS.Pose(n.pixels,h,d,t.pixels,c,f)},POS.Posit.prototype.pos=function(e,t,n,i){var r,a,o,s,l,u,c,h,f,d,p=this.objectPoints.length,g=[],m=[],v=[],_=[],y=[],b=[],w=[],x=[];for(f=0;f<p;++f)g[f]=[e[f].x-e[0].x,e[f].y-e[0].y];for(f=0;f<3;++f)for(m[f]=0,v[f]=0,d=0;d<p;++d)m[f]+=this.objectMatrix[f][d]*g[d][0],v[f]+=this.objectMatrix[f][d]*g[d][1];for(r=m[0]*m[0]+m[1]*m[1]+m[2]*m[2],a=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],o=m[0]*v[0]+m[1]*v[1]+m[2]*v[2],s=(a-r)*(a-r)+4*(o*o),l=a-r>=0?(a-r+Math.sqrt(s))/2:(a-r-Math.sqrt(s))/2,l>=0?(u=Math.sqrt(l),c=0===u?0:-o/u):(u=Math.sqrt(-(o*o)/l),c=0===u?Math.sqrt(r-a):-o/u),f=0;f<3;++f)_[f]=m[f]+u*this.objectNormal[f],y[f]=v[f]+c*this.objectNormal[f];for(h=Math.sqrt(_[0]*_[0]+_[1]*_[1]+_[2]*_[2]),f=0;f<3;++f)b[f]=_[f]/h,w[f]=y[f]/h;for(x[0]=b[1]*w[2]-b[2]*w[1],x[1]=b[2]*w[0]-b[0]*w[2],x[2]=b[0]*w[1]-b[1]*w[0],f=0;f<3;++f)t[0][f]=b[f],t[1][f]=w[f],t[2][f]=x[f];for(f=0;f<3;++f)_[f]=m[f]-u*this.objectNormal[f],y[f]=v[f]-c*this.objectNormal[f];for(f=0;f<3;++f)b[f]=_[f]/h,w[f]=y[f]/h;for(x[0]=b[1]*w[2]-b[2]*w[1],x[1]=b[2]*w[0]-b[0]*w[2],x[2]=b[0]*w[1]-b[1]*w[0],f=0;f<3;++f)n[0][f]=b[f],n[1][f]=w[f],n[2][f]=x[f];i[0]=e[0].x/h,i[1]=e[0].y/h,i[2]=this.focalLength/h},POS.Posit.prototype.isValid=function(e,t){for(var n,i=this.objectPoints.length,r=1/0,a=0;a<i;++a)n=t[2]+(e[2][0]*this.objectVectors[a][0]+e[2][1]*this.objectVectors[a][1]+e[2][2]*this.objectVectors[a][2]),n<r&&(r=n);return r>=0},POS.Posit.prototype.iterate=function(e,t,n,i,r){var a,o,s,l,u,c,h,f,d,p=this.objectPoints.length,g=[],m=[],v=[[],[],[]],_=[[],[],[]],y=[],b=[],w=!1,x=0;for(f=0;f<p;++f)g[f]={x:e[f].x,y:e[f].y};for(f=0;f<3;++f){for(d=0;d<3;++d)i[f][d]=t[f][d];r[f]=n[f]}for(f=0;f<p;++f){for(s=0,d=0;d<3;++d)s+=this.objectVectors[f][d]*i[2][d]/r[2];m[f]={x:(1+s)*e[f].x,y:(1+s)*e[f].y}}for(o=0,f=0;f<p;++f)o+=Math.abs(m[f].x-g[f].x),o+=Math.abs(m[f].y-g[f].y);for(f=0;f<3;++f)y[f]=r[f]-(i[f][0]*this.objectPoints[0][0]+i[f][1]*this.objectPoints[0][1]+i[f][2]*this.objectPoints[0][2]);for(l=u=this.error(e,i,y),w=0===u.pixels||o<.01;x++<100&&!w;){for(f=0;f<p;++f)g[f].x=m[f].x,g[f].y=m[f].y;for(this.pos(m,v,_,r),f=0;f<3;++f)y[f]=r[f]-(v[f][0]*this.objectPoints[0][0]+v[f][1]*this.objectPoints[0][1]+v[f][2]*this.objectPoints[0][2]),b[f]=r[f]-(_[f][0]*this.objectPoints[0][0]+_[f][1]*this.objectPoints[0][1]+_[f][2]*this.objectPoints[0][2]);if(u=this.error(e,v,y),c=this.error(e,_,b),u.euclidean>=0&&c.euclidean>=0)if(c.euclidean<u.euclidean)for(l=c,f=0;f<3;++f)for(d=0;d<3;++d)i[f][d]=_[f][d];else for(l=u,f=0;f<3;++f)for(d=0;d<3;++d)i[f][d]=v[f][d];if(u.euclidean<0&&c.euclidean>=0)for(l=c,f=0;f<3;++f)for(d=0;d<3;++d)i[f][d]=_[f][d];if(c.euclidean<0&&u.euclidean>=0)for(l=u,f=0;f<3;++f)for(d=0;d<3;++d)i[f][d]=v[f][d];for(f=0;f<p;++f){for(s=0,d=0;d<3;++d)s+=this.objectVectors[f][d]*i[2][d]/r[2];m[f].x=(1+s)*e[f].x,m[f].y=(1+s)*e[f].y}for(a=o,o=0,f=0;f<p;++f)o+=Math.abs(m[f].x-g[f].x),o+=Math.abs(m[f].y-g[f].y);h=Math.abs(o-a),w=0===l.pixels||h<.01}return l},POS.Posit.prototype.error=function(e,t,n){var i,r,a,o=this.objectPoints.length,s=[],l=[],u=[],c=0,h=0,f=0;if(!this.isValid(t,n))return{euclidean:-1,pixels:-1,maximum:-1};for(i=0;i<o;++i)for(s[i]=[],r=0;r<3;++r)s[i][r]=n[r];for(i=0;i<o;++i)for(r=0;r<3;++r)for(a=0;a<3;++a)s[i][r]+=t[r][a]*this.objectPoints[i][a];for(i=0;i<o;++i)for(l[i]=[],r=0;r<2;++r)l[i][r]=this.focalLength*s[i][r]/s[i][2];for(i=0;i<o;++i)u[i]=[l[i][0]-e[i].x,l[i][1]-e[i].y];for(i=0;i<o;++i)c+=Math.sqrt(u[i][0]*u[i][0]+u[i][1]*u[i][1]),h+=Math.abs(Math.round(l[i][0])-Math.round(e[i].x))+Math.abs(Math.round(l[i][1])-Math.round(e[i].y)),Math.abs(u[i][0])>f&&(f=Math.abs(u[i][0])),Math.abs(u[i][1])>f&&(f=Math.abs(u[i][1]));return{euclidean:c/o,pixels:h,maximum:f}},POS.pseudoInverse=function(e,t,n){var i,r,a,o=[],s=[[],[],[]],l=[[],[],[]],u=0,c=0;for(SVD.svdcmp(e,t,3,o,s),i=0;i<3;++i)o[i]>u&&(u=o[i]);for(u*=.01,i=0;i<3;++i)o[i]<u&&(o[i]=0);for(r=0;r<3;++r)if(0===o[r])for(++c,a=r;a<2;++a){for(i=0;i<t;++i)e[i][a]=e[i][a+1];for(i=0;i<3;++i)s[i][a]=s[i][a+1]}for(r=0;r<2;++r)0===o[r]&&(o[r]=o[r+1]);for(i=0;i<3;++i)for(r=0;r<3-c;++r)l[i][r]=s[i][r]/o[r];for(i=0;i<3;++i)for(r=0;r<t;++r)for(n[i][r]=0,a=0;a<3-c;++a)n[i][r]+=l[i][a]*e[r][a]},POS.Pose=function(e,t,n,i,r,a){this.bestError=e,this.bestRotation=t,this.bestTranslation=n,this.alternativeError=i,this.alternativeRotation=r,this.alternativeTranslation=a};var SVD=SVD||{};SVD.svdcmp=function(e,t,n,i,r){var a,o,s,l,u,c,h,f,d,p,g,m,v,_,y,b=0,w=0,x=0,E=[];for(o=0;o<n;++o){if(h=o+1,E[o]=x*w,w=m=x=0,o<t){for(c=o;c<t;++c)x+=Math.abs(e[c][o]);if(0!==x){for(c=o;c<t;++c)e[c][o]/=x,m+=e[c][o]*e[c][o];for(p=e[o][o],w=-SVD.sign(Math.sqrt(m),p),g=p*w-m,e[o][o]=p-w,l=h;l<n;++l){for(m=0,c=o;c<t;++c)m+=e[c][o]*e[c][l];for(p=m/g,c=o;c<t;++c)e[c][l]+=p*e[c][o]}for(c=o;c<t;++c)e[c][o]*=x}}if(i[o]=x*w,w=m=x=0,o<t&&o!==n-1){for(c=h;c<n;++c)x+=Math.abs(e[o][c]);if(0!==x){for(c=h;c<n;++c)e[o][c]/=x,m+=e[o][c]*e[o][c];for(p=e[o][h],w=-SVD.sign(Math.sqrt(m),p),g=p*w-m,e[o][h]=p-w,c=h;c<n;++c)E[c]=e[o][c]/g;for(l=h;l<t;++l){for(m=0,c=h;c<n;++c)m+=e[l][c]*e[o][c];for(c=h;c<n;++c)e[l][c]+=m*E[c]}for(c=h;c<n;++c)e[o][c]*=x}}b=Math.max(b,Math.abs(i[o])+Math.abs(E[o]))}for(o=n-1;o>=0;--o){if(o<n-1){if(0!==w){for(l=h;l<n;++l)r[l][o]=e[o][l]/e[o][h]/w;
for(l=h;l<n;++l){for(m=0,c=h;c<n;++c)m+=e[o][c]*r[c][l];for(c=h;c<n;++c)r[c][l]+=m*r[c][o]}}for(l=h;l<n;++l)r[o][l]=r[l][o]=0}r[o][o]=1,w=E[o],h=o}for(o=Math.min(n,t)-1;o>=0;--o){for(h=o+1,w=i[o],l=h;l<n;++l)e[o][l]=0;if(0!==w){for(w=1/w,l=h;l<n;++l){for(m=0,c=h;c<t;++c)m+=e[c][o]*e[c][l];for(p=m/e[o][o]*w,c=o;c<t;++c)e[c][l]+=p*e[c][o]}for(l=o;l<t;++l)e[l][o]*=w}else for(l=o;l<t;++l)e[l][o]=0;++e[o][o]}for(c=n-1;c>=0;--c)for(s=1;s<=30;++s){for(a=!0,h=c;h>=0;--h){if(f=h-1,Math.abs(E[h])+b===b){a=!1;break}if(Math.abs(i[f])+b===b)break}if(a)for(d=0,m=1,o=h;o<=c&&(p=m*E[o],Math.abs(p)+b!==b);++o)for(w=i[o],g=SVD.pythag(p,w),i[o]=g,g=1/g,d=w*g,m=-p*g,l=1;l<=t;++l)_=e[l][f],y=e[l][o],e[l][f]=_*d+y*m,e[l][o]=y*d-_*m;if(y=i[c],h===c){if(y<0)for(i[c]=-y,l=0;l<n;++l)r[l][c]=-r[l][c];break}if(30===s)return!1;for(v=i[h],f=c-1,_=i[f],w=E[f],g=E[c],p=((_-y)*(_+y)+(w-g)*(w+g))/(2*g*_),w=SVD.pythag(p,1),p=((v-y)*(v+y)+g*(_/(p+SVD.sign(w,p))-g))/v,d=m=1,l=h;l<=f;++l){for(o=l+1,w=E[o],_=i[o],g=m*w,w=d*w,y=SVD.pythag(p,g),E[l]=y,d=p/y,m=g/y,p=v*d+w*m,w=w*d-v*m,g=_*m,_*=d,u=0;u<n;++u)v=r[u][l],y=r[u][o],r[u][l]=v*d+y*m,r[u][o]=y*d-v*m;for(y=SVD.pythag(p,g),i[l]=y,0!==y&&(y=1/y,d=p*y,m=g*y),p=d*w+m*_,v=d*_-m*w,u=0;u<t;++u)_=e[u][l],y=e[u][o],e[u][l]=_*d+y*m,e[u][o]=y*d-_*m}E[h]=0,E[c]=p,i[c]=v}return!0},SVD.pythag=function(e,t){var n,i=Math.abs(e),r=Math.abs(t);return i>r?(n=r/i,i*Math.sqrt(1+n*n)):0===r?0:(n=i/r,r*Math.sqrt(1+n*n))},SVD.sign=function(e,t){return t>=0?Math.abs(e):-Math.abs(e)};var THREEx=THREEx||{};THREEx.ArucoContext=function(e){e=e||{},this.parameters={debug:void 0!==e.debug&&e.debug,canvasWidth:void 0!==e.canvasWidth?e.canvasWidth:640,canvasHeight:void 0!==e.canvasHeight?e.canvasHeight:480},this.canvas=document.createElement("canvas"),this.detector=new AR.Detector,this.debug=null,1==e.debug&&(this.debug=new THREEx.ArucoDebug(this)),this.setSize(this.parameters.canvasWidth,this.parameters.canvasHeight)},THREEx.ArucoContext.prototype.setSize=function(e,t){this.canvas.width=e,this.canvas.height=t,null!==this.debug&&this.debug.setSize(e,t)},THREEx.ArucoContext.prototype.detect=function(e){var t=this.canvas,n=t.getContext("2d");n.drawImage(e,0,0,t.width,t.height);var i=n.getImageData(0,0,t.width,t.height),r=this.detector.detect(i);return r},THREEx.ArucoContext.prototype.updateObject3D=function(e,t,n,i){for(var r=i.corners,a=this.canvas,o=new Array(r.length),s=0;s<r.length;++s){var l=r[s];o[s]={x:l.x-a.width/2,y:-l.y+a.height/2}}var u=t.pose(o),c=u.bestRotation,h=u.bestTranslation;e.position.x=h[0],e.position.y=h[1],e.position.z=-h[2],e.rotation.x=-Math.asin(-c[1][2]),e.rotation.y=-Math.atan2(c[0][2],c[2][2]),e.rotation.z=Math.atan2(c[1][0],c[1][1]),e.scale.x=n,e.scale.y=n,e.scale.z=n};var THREEx=THREEx||{};AR.Detector.prototype.detect=function(e){var t=this.datGUIOptions;return CV.grayscale(e,this.grey),CV.adaptiveThreshold(this.grey,this.thres,t.adaptativeThreshold.kernelSize,t.adaptativeThreshold.threshold),this.contours=CV.findContours(this.thres,this.binary),this.candidates=this.findCandidates(this.contours,e.width*t.candidates.minSize,t.candidates.epsilon,t.candidates.minLength),this.candidates=this.clockwiseCorners(this.candidates),this.candidates=this.notTooNear(this.candidates,t.notTooNear.minDist),this.findMarkers(this.grey,this.candidates,t.findMarkers.warpSize)},AR.Detector.prototype.datGUIOptions={adaptativeThreshold:{kernelSize:2,threshold:7},candidates:{minSize:.2,epsilon:.05,minLength:10},notTooNear:{minDist:10},findMarkers:{warpSize:49}},THREEx.addArucoDatGui=function(e,t){var n=(e.detector.datGUIOptions,{resolution:"640x480"}),i=function(){var t=n.resolution.match(/(\d+)x(\d+)/),i=parseInt(t[1]),r=parseInt(t[2]);e.setSize(i,r)};i(),t.add(n,"resolution",["320x240","640x480"]).onChange(i);var r=t.addFolder("Adaptative Threshold");r.open(),r.add(e.detector.datGUIOptions.adaptativeThreshold,"kernelSize").min(0).step(1).onChange(i),r.add(e.detector.datGUIOptions.adaptativeThreshold,"threshold").min(0).step(1).onChange(i);var r=t.addFolder("Candidates");r.open(),r.add(e.detector.datGUIOptions.candidates,"minSize").min(0).max(1).onChange(i),r.add(e.detector.datGUIOptions.candidates,"epsilon").min(0).onChange(i),r.add(e.detector.datGUIOptions.candidates,"minLength").min(0).step(1).onChange(i);var r=t.addFolder("notTooNear");r.open(),r.add(e.detector.datGUIOptions.notTooNear,"minDist").min(0).step(1).onChange(i);var r=t.addFolder("findMarkers");r.open(),r.add(e.detector.datGUIOptions.findMarkers,"warpSize").min(0).step(1).onChange(i)};var THREEx=THREEx||{};THREEx.ArucoDebug=function(e){this.arucoContext=e,this.canvasElement=document.createElement("canvas"),this.canvasElement.width=this.arucoContext.canvas.width,this.canvasElement.height=this.arucoContext.canvas.height},THREEx.ArucoDebug.prototype.setSize=function(e,t){this.canvasElement.width!==e&&(this.canvasElement.width=e),this.canvasElement.height!==t&&(this.canvasElement.height=t)},THREEx.ArucoDebug.prototype.clear=function(){var e=this.canvasElement,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height)},THREEx.ArucoDebug.prototype.drawContoursContours=function(){var e=this.arucoContext.detector.contours,t=this.canvasElement;this.drawContours(e,0,0,t.width,t.height,function(e){return e?"magenta":"blue"})},THREEx.ArucoDebug.prototype.drawContoursPolys=function(){var e=this.arucoContext.detector.polys,t=this.canvasElement;this.drawContours(e,0,0,t.width,t.height,function(){return"green"})},THREEx.ArucoDebug.prototype.drawContoursCandidates=function(){var e=this.arucoContext.detector.candidates,t=this.canvasElement;this.drawContours(e,0,0,t.width,t.height,function(){return"red"})},THREEx.ArucoDebug.prototype.drawContours=function(e,t,n,i,r,a){var o,s,l,u=e.length,c=this.canvasElement,h=c.getContext("2d");for(h.save();u--;){for(s=e[u],h.strokeStyle=a(s.hole),h.beginPath(),o=0;o<s.length;++o)l=s[o],h.moveTo(t+l.x,n+l.y),l=s[(o+1)%s.length],h.lineTo(t+l.x,n+l.y);h.stroke(),h.closePath()}h.restore()},THREEx.ArucoDebug.prototype.drawDetectorGrey=function(){var e=arucoContext.detector.grey;this.drawCVImage(e)},THREEx.ArucoDebug.prototype.drawDetectorThreshold=function(){var e=arucoContext.detector.thres;this.drawCVImage(e)},THREEx.ArucoDebug.prototype.drawCVImage=function(e){var t=(this.arucoContext.detector,this.canvasElement),n=t.getContext("2d"),i=n.createImageData(t.width,t.height);this.copyCVImage2ImageData(e,i),n.putImageData(i,0,0)},THREEx.ArucoDebug.prototype.copyCVImage2ImageData=function(e,t){for(var n=e.data.length,i=4*n+3;n--;)t.data[i-=4]=255,t.data[i-1]=t.data[i-2]=t.data[i-3]=e.data[n];return t},THREEx.ArucoDebug.prototype.drawVideo=function(e){var t=this.canvasElement,n=t.getContext("2d");n.drawImage(e,0,0,t.width,t.height)},THREEx.ArucoDebug.prototype.drawMarkerIDs=function(e){var t,n,i,r,a,o,s=this.canvasElement,l=s.getContext("2d");for(l.save(),l.strokeStyle="blue",l.lineWidth=1,a=0;a!==e.length;++a){for(t=e[a].corners,i=1/0,r=1/0,o=0;o!==t.length;++o)n=t[o],i=Math.min(i,n.x),r=Math.min(r,n.y);l.strokeText(e[a].id,i,r)}l.restore()},THREEx.ArucoDebug.prototype.drawMarkerCorners=function(e){var t,n,i,r,a=this.canvasElement,o=a.getContext("2d");for(o.save(),o.lineWidth=3,i=0;i<e.length;++i){for(t=e[i].corners,o.strokeStyle="red",o.beginPath(),r=0;r<t.length;++r)n=t[r],o.moveTo(n.x,n.y),n=t[(r+1)%t.length],o.lineTo(n.x,n.y);o.stroke(),o.closePath(),o.strokeStyle="green",o.strokeRect(t[0].x-2,t[0].y-2,4,4)}o.restore()};var THREEx=THREEx||{};THREEx.ArucoMarkerGenerator=function(){},THREEx.ArucoMarkerGenerator.createSVG=function(e,t){var n=document.createElement("div");return n.innerHTML=new ArucoMarker(e).toSVG(t),n},THREEx.ArucoMarkerGenerator.createImage=function(e,t){var n=this.createCanvas(e,t),i=n.toDataURL(),r=document.createElement("img");return r.src=i,r},THREEx.ArucoMarkerGenerator.createCanvas=function(e,t){var n=document.createElement("canvas"),i=n.getContext("2d");n.width=t,n.height=t;var r=new ArucoMarker(e),a=r.markerMatrix(),o=.1*n.width,s=t-2*o,l=s/7;i.fillStyle="white",i.fillRect(0,0,n.width,n.height),i.fillStyle="black",i.fillRect(o,o,n.width-2*o,n.height-2*o);for(var u=0;u<5;u++)for(var c=0;c<5;c++)1===a[c][u]&&(i.fillStyle="white",i.fillRect(o+(c+1)*l,o+(u+1)*l,l+1,l+1));return n};var THREE=THREE||require("three");THREE.WebAR={},THREE.WebAR.MAX_FLOAT32_VALUE=3.4028e38,THREE.WebAR.VRPointCloud=function(e){this._vrDisplay=e,this._numberOfPointsInLastPointCloud=0,this._bufferGeometry=new THREE.BufferGeometry,this._bufferGeometry.frustumCulled=!1;var t=null;e?(this._pointCloud=new VRPointCloud,e.getPointCloud(this._pointCloud,!1,0,!1),t=this._pointCloud.points):t=new Float32Array([-1,1,-2,1,1,-2,1,-1,-2,-1,-1,-2]);for(var n=new Float32Array(t.length),i=new THREE.Color,r=0;r<n.length;r+=3)e&&(t[r]=THREE.WebAR.MAX_FLOAT32_VALUE,t[r+1]=THREE.WebAR.MAX_FLOAT32_VALUE,t[r+2]=THREE.WebAR.MAX_FLOAT32_VALUE),i.setRGB(1,1,1),n[r]=i.r,n[r+1]=i.g,n[r+2]=i.b;return this._positions=new THREE.BufferAttribute(t,3),this._bufferGeometry.addAttribute("position",this._positions),this._colors=new THREE.BufferAttribute(n,3),this._bufferGeometry.addAttribute("color",this._colors),this._bufferGeometry.computeBoundingSphere(),this},THREE.WebAR.VRPointCloud.prototype.getBufferGeometry=function(){return this._bufferGeometry},THREE.WebAR.VRPointCloud.prototype.update=function(e,t,n){this._vrDisplay&&(this._vrDisplay.getPointCloud(this._pointCloud,!e,"number"==typeof t?t:0,!!n),e&&this._pointCloud.numberOfPoints>0&&(this._positions.needsUpdate=!0))},THREE.WebAR.getIndexFromOrientation=function(e){var t=0;switch(e){case 90:t=1;break;case 180:t=2;break;case 270:t=3;break;default:t=0}return t},THREE.WebAR.getIndexFromScreenAndSeeThroughCameraOrientations=function(e){var t=screen.orientation.angle,n=e?e.getSeeThroughCamera():null,i=n?n.orientation:0,r=THREE.WebAR.getIndexFromOrientation(i),a=THREE.WebAR.getIndexFromOrientation(t);return ret=a-r,ret<0&&(ret+=4),ret%4},THREE.WebAR.createVRSeeThroughCameraMesh=function(e,t){var n,i=new THREE.BufferGeometry;if(e){var r=e.getSeeThroughCamera();if(!r)throw"ERROR: Could not get the see through camera!";n=r,n.readyState=2,n.HAVE_CURRENT_DATA=2;var a=r.width/r.textureWidth,o=r.height/r.textureHeight;i.WebAR_textureCoords=[new Float32Array([0,0,0,o,a,0,a,o]),new Float32Array([a,0,0,0,a,o,0,o]),new Float32Array([a,o,a,0,0,o,0,0]),new Float32Array([0,o,a,o,0,0,a,0])]}else{var n=document.createElement("video");n.src="string"==typeof t?t:"../../resources/videos/sintel.webm",n.play(),i.WebAR_textureCoords=[new Float32Array([0,0,0,1,1,0,1,1]),new Float32Array([1,0,0,0,1,1,0,1]),new Float32Array([1,1,1,0,0,1,0,0]),new Float32Array([0,1,1,1,0,0,1,0])]}i.addAttribute("position",new THREE.BufferAttribute(new Float32Array([-1,1,0,-1,-1,0,1,1,0,1,-1,0]),3)),i.setIndex(new THREE.BufferAttribute(new Uint16Array([0,1,2,2,1,3]),1)),i.WebAR_textureCoordIndex=THREE.WebAR.getIndexFromScreenAndSeeThroughCameraOrientations(e);var s=i.WebAR_textureCoords[i.WebAR_textureCoordIndex];i.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(s),2)),i.computeBoundingSphere();var l=new THREE.VideoTexture(n);l.minFilter=THREE.NearestFilter,l.magFilter=THREE.NearestFilter,l.format=THREE.RGBFormat,l.flipY=!1;var u;if(e){var c=["attribute vec3 position;","attribute vec2 uv;","","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","","varying vec2 vUV;","","void main(void) {","    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","    vUV = uv;","}"],h=["#extension GL_OES_EGL_image_external : require","precision mediump float;","","varying vec2 vUV;","","uniform samplerExternalOES map;","","void main(void) {","   gl_FragColor = texture2D(map, vUV);","}"];u=new THREE.RawShaderMaterial({uniforms:{map:{type:"t",value:l}},vertexShader:c.join("\r\n"),fragmentShader:h.join("\r\n"),side:THREE.DoubleSide})}else u=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,map:l});var f=new THREE.Mesh(i,u);return f},THREE.WebAR.updateCameraMeshOrientation=function(e,t){var n=THREE.WebAR.getIndexFromScreenAndSeeThroughCameraOrientations(e);if(n!=t.geometry.WebAR_textureCoordIndex){var i=t.geometry.getAttribute("uv"),r=t.geometry.WebAR_textureCoords[n];t.geometry.WebAR_textureCoordIndex=n;for(var a=0;a<i.length;a++)i.array[a]=r[a];i.needsUpdate=!0}},THREE.WebAR.createVRSeeThroughCamera=function(e,t,n){var i=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,t,n);return e&&THREE.WebAR.resizeVRSeeThroughCamera(e,i),i},THREE.WebAR.resizeVRSeeThroughCamera=function(e,t){if(t.aspect=window.innerWidth/window.innerHeight,e){var n=window.innerWidth>window.innerHeight,i=e.getSeeThroughCamera();if(i){var r=i.width>i.height,a=!(n&&r),o=a?i.height:i.width,s=a?i.width:i.height,l=a?i.focalLengthY:i.focalLengthX,u=a?i.focalLengthX:i.focalLengthY,c=a?i.pointY:i.pointX,h=a?i.pointX:i.pointY,f=t.near/l,d=t.near/u,p=(c-o/2)*f,g=-(h-s/2)*d,m=f*-o/2-p,v=f*o/2-p,_=d*-s/2-g,y=d*s/2-g;t.projectionMatrix.makePerspective(m,v,y,_,t.near,t.far),t.fov=2*THREE.Math.radToDeg(Math.atan(y*t.zoom/t.near))}}else t.updateProjectionMatrix()},THREE.WebAR._worldUp=new THREE.Vector3(0,1,0),THREE.WebAR._normalY=new THREE.Vector3,THREE.WebAR._normalZ=new THREE.Vector3,THREE.WebAR._rotationMatrix=new THREE.Matrix4,THREE.WebAR._planeNormal=new THREE.Vector3,THREE.WebAR.rotateObject3D=function(e,t,n){if(e instanceof THREE.Vector3||e instanceof THREE.Vector4)THREE.WebAR._planeNormal.set(e.x,e.y,e.z);else{if(!(e instanceof Float32Array))throw"Unknown normal1 type.";THREE.WebAR._planeNormal.set(e[0],e[1],e[2])}if(t instanceof THREE.Vector3||t instanceof THREE.Vector4)THREE.WebAR._normalZ.set(t.x,t.y,t.z);else{if(!(e instanceof Float32Array))throw"Unknown normal2 type.";THREE.WebAR._normalZ.set(t[0],t[1],t[2])}THREE.WebAR._normalY.crossVectors(THREE.WebAR._planeNormal,THREE.WebAR._normalZ).normalize(),THREE.WebAR._rotationMatrix.elements[0]=THREE.WebAR._planeNormal.x,THREE.WebAR._rotationMatrix.elements[1]=THREE.WebAR._planeNormal.y,THREE.WebAR._rotationMatrix.elements[2]=THREE.WebAR._planeNormal.z,THREE.WebAR._rotationMatrix.elements[4]=THREE.WebAR._normalZ.x,THREE.WebAR._rotationMatrix.elements[5]=THREE.WebAR._normalZ.y,THREE.WebAR._rotationMatrix.elements[6]=THREE.WebAR._normalZ.z,THREE.WebAR._rotationMatrix.elements[8]=THREE.WebAR._normalY.x,THREE.WebAR._rotationMatrix.elements[9]=THREE.WebAR._normalY.y,THREE.WebAR._rotationMatrix.elements[10]=THREE.WebAR._normalY.z,n.quaternion.setFromRotationMatrix(THREE.WebAR._rotationMatrix)},THREE.WebAR.rotateObject3DWithPickingPlane=function(e,t){if(e instanceof THREE.Vector3||e instanceof THREE.Vector4)THREE.WebAR._planeNormal.set(e.x,e.y,e.z);else{if(!(e instanceof Float32Array))throw"Unknown plane type.";THREE.WebAR._planeNormal.set(e[0],e[1],e[2])}THREE.WebAR._normalY.set(0,1,0);var n=.5;Math.abs(THREE.WebAR._planeNormal.dot(THREE.WebAR._worldUp))>n&&THREE.WebAR._normalY.set(0,0,1),THREE.WebAR._normalZ.crossVectors(THREE.WebAR._planeNormal,THREE.WebAR._normalY).normalize(),THREE.WebAR._normalY.crossVectors(THREE.WebAR._normalZ,THREE.WebAR._planeNormal).normalize(),THREE.WebAR._rotationMatrix.elements[0]=THREE.WebAR._planeNormal.x,THREE.WebAR._rotationMatrix.elements[1]=THREE.WebAR._planeNormal.y,THREE.WebAR._rotationMatrix.elements[2]=THREE.WebAR._planeNormal.z,THREE.WebAR._rotationMatrix.elements[4]=THREE.WebAR._normalY.x,THREE.WebAR._rotationMatrix.elements[5]=THREE.WebAR._normalY.y,THREE.WebAR._rotationMatrix.elements[6]=THREE.WebAR._normalY.z,THREE.WebAR._rotationMatrix.elements[8]=THREE.WebAR._normalZ.x,THREE.WebAR._rotationMatrix.elements[9]=THREE.WebAR._normalZ.y,THREE.WebAR._rotationMatrix.elements[10]=THREE.WebAR._normalZ.z,t.quaternion.setFromRotationMatrix(THREE.WebAR._rotationMatrix)},THREE.WebAR.positionObject3DWithPickingPoint=function(e,t){if(e instanceof THREE.Vector3||e instanceof THREE.Vector4)t.position.set(e.x,e.y,e.z);else{if(!(e instanceof Float32Array))throw"Unknown point type.";t.position.set(e[0],e[1],e[2])}},THREE.WebAR.positionAndRotateObject3DWithPickingPointAndPlaneInPointCloud=function(e,t,n){THREE.WebAR.rotateObject3DWithPickingPlane(e.plane,t),THREE.WebAR.positionObject3DWithPickingPoint(e.point,t),t.position.add(THREE.WebAR._planeNormal.multiplyScalar(n))},THREE.WebAR.positionAndRotateObject3D=function(e,t,n,i,r){THREE.WebAR.rotateObject3D(t,n,i),THREE.WebAR.positionObject3DWithPickingPoint(e,i),i.position.add(THREE.WebAR._planeNormal.multiplyScalar(r))},function(e,t){"function"==typeof define&&define.amd?define(["WebAR"],t):"object"==typeof exports?module.exports=t():e.WebAR=t()}(this,function(){return THREE.WebAR});var THREEx=THREEx||{};THREEx.ArBaseControls=function(e){this.id=THREEx.ArBaseControls.id++,this.object3d=e,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1},THREEx.ArBaseControls.id=0,Object.assign(THREEx.ArBaseControls.prototype,THREE.EventDispatcher.prototype),THREEx.ArBaseControls.prototype.update=function(){console.assert(!1,"you need to implement your own update")},THREEx.ArBaseControls.prototype.name=function(){return console.assert(!1,"you need to implement your own .name()"),"Not yet implemented - name()"};var THREEx=THREEx||{};THREEx.ARClickability=function(e){this._sourceElement=e;var t=parseInt(e.style.width),n=parseInt(e.style.height);this._cameraPicking=new THREE.PerspectiveCamera(42,t/n,.1,100),console.warn("THREEx.ARClickability works only in modelViewMatrix"),console.warn("OBSOLETE OBSOLETE! instead use THREEx.HitTestingPlane or THREEx.HitTestingTango")},THREEx.ARClickability.prototype.onResize=function(){var e=this._sourceElement,t=this._cameraPicking,n=parseInt(e.style.width),i=parseInt(e.style.height);t.aspect=n/i,t.updateProjectionMatrix()},THREEx.ARClickability.prototype.computeIntersects=function(e,t){var n=this._sourceElement,i=this._cameraPicking,r=new THREE.Vector3;r.x=e.layerX/parseInt(n.style.width)*2-1,r.y=2*-(e.layerY/parseInt(n.style.height))+1;var a=new THREE.Raycaster;a.setFromCamera(r,i);var o=a.intersectObjects(t);return o},THREEx.ARClickability.prototype.update=function(){},THREEx.ARClickability.tangoPickingPointCloud=function(e,t,n){var i=e._tangoContext.vrDisplay;if(null===i)return null;var r=i.getPickingPointAndPlaneInPointCloud(t,n);if(null==r)return console.warn("Could not retrieve the correct point and plane."),null;var a=.01,o=new THREE.Object3D;THREE.WebAR.positionAndRotateObject3DWithPickingPointAndPlaneInPointCloud(r,o,a),o.rotateZ(-Math.PI/2);var s={};return s.position=o.position,s.quaternion=o.quaternion,s};var THREEx=THREEx||{};THREEx.ArMarkerCloak=function(e){function t(e,t){var n=new THREE.Vector3;h[0].forEach(function(i,r){i.forEach(function(i,a){n.x=2*i.x-1,n.y=2*i.y-1,n.z=0,n.applyMatrix4(e),n.applyMatrix4(t),n.x/=n.z,n.y/=n.z,n.x=n.x/2+.5,n.y=n.y/2+.5,o.geometry.faceVertexUvs[0][r][a].set(n.x,n.y)})}),o.geometry.uvsNeedUpdate=!0}function n(e,t){var n=[];p.forEach(function(i,r){var a=i.clone();a.applyMatrix4(e),a.applyMatrix4(t),a.x/=a.z,a.y/=a.z,n.push(a)});for(var i=0;i<n.length;i++)g.geometry.vertices[i].copy(n[i]);g.geometry.computeBoundingSphere(),g.geometry.verticesNeedUpdate=!0}var i=!0,r=new THREE.PlaneGeometry(1.55,2.1,1,8).translate(0,-.3,0),a=new THREE.ShaderMaterial({vertexShader:THREEx.ArMarkerCloak.vertexShader,fragmentShader:THREEx.ArMarkerCloak.fragmentShader,transparent:!0,uniforms:{texture:{value:e},opacity:{value:.5}},defines:{updateInShaderEnabled:i?1:0}}),o=new THREE.Mesh(r,a);o.rotation.x=-Math.PI/2,this.object3d=o;for(var s=-.65,l=.65,u=.75,c=1.05,h=[[]],f=0;f<o.geometry.faces.length;f++)h[0][f]=[],h[0][f][0]=new THREE.Vector2,h[0][f][1]=new THREE.Vector2,h[0][f][2]=new THREE.Vector2;for(var d=0;d<o.geometry.parameters.heightSegments/2;d++)h[0][4*d+0][0].set(s/2+.5,c/2+.5),h[0][4*d+0][1].set(s/2+.5,u/2+.5),h[0][4*d+0][2].set(l/2+.5,c/2+.5),h[0][4*d+1][0].set(s/2+.5,u/2+.5),h[0][4*d+1][1].set(l/2+.5,u/2+.5),h[0][4*d+1][2].set(l/2+.5,c/2+.5),h[0][4*d+2][0].set(s/2+.5,u/2+.5),h[0][4*d+2][1].set(s/2+.5,c/2+.5),h[0][4*d+2][2].set(l/2+.5,u/2+.5),h[0][4*d+3][0].set(s/2+.5,c/2+.5),h[0][4*d+3][1].set(l/2+.5,c/2+.5),h[0][4*d+3][2].set(l/2+.5,u/2+.5);i===!0&&(o.geometry.faceVertexUvs=h,o.geometry.uvsNeedUpdate=!0);var p=[];p.push(new THREE.Vector3(s,c,0)),p.push(new THREE.Vector3(l,c,0)),p.push(new THREE.Vector3(s,u,0)),p.push(new THREE.Vector3(l,u,0));var a=new THREE.MeshNormalMaterial({transparent:!0,opacity:.5,side:THREE.DoubleSide}),r=new THREE.PlaneGeometry(1,1),g=new THREE.Mesh(r,a);this.orthoMesh=g,this.update=function(e,r){n(e,r),i===!1&&t(e,r)}},THREEx.ArMarkerCloak.markerSpaceShaderFunction="\n        vec2 transformUvToMarkerSpace(vec2 originalUv){\n                vec3 transformedUv;\n                // set transformedUv - from UV coord to clip coord\n                transformedUv.x = originalUv.x * 2.0 - 1.0;\n                transformedUv.y = originalUv.y * 2.0 - 1.0;\n                transformedUv.z = 0.0;\n\n\t\t// apply modelViewMatrix and projectionMatrix\n                transformedUv = (projectionMatrix * modelViewMatrix * vec4( transformedUv, 1.0 ) ).xyz;\n\n\t\t// apply perspective\n\t\ttransformedUv.x /= transformedUv.z;\n\t\ttransformedUv.y /= transformedUv.z;\n\n                // set back from clip coord to Uv coord\n                transformedUv.x = transformedUv.x / 2.0 + 0.5;\n                transformedUv.y = transformedUv.y / 2.0 + 0.5;\n\n                // return the result\n                return transformedUv.xy;\n        }",THREEx.ArMarkerCloak.vertexShader=THREEx.ArMarkerCloak.markerSpaceShaderFunction+"\tvarying vec2 vUv;\n\n\tvoid main(){\n                // pass the UV to the fragment\n                #if (updateInShaderEnabled == 1)\n\t\t        vUv = transformUvToMarkerSpace(uv);\n                #else\n\t\t        vUv = uv;\n                #endif\n\n                // compute gl_Position\n\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}",THREEx.ArMarkerCloak.fragmentShader="\n\tvarying vec2 vUv;\n\tuniform sampler2D texture;\n\tuniform float opacity;\n\n\tvoid main(void){\n\t\tvec3 color = texture2D( texture, vUv ).rgb;\n\n\t\tgl_FragColor = vec4( color, opacity);\n\t}";var THREEx=THREEx||{};THREEx.ArMarkerControls=function(e,t,n){function i(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var i=r.parameters[t];void 0!==i?r.parameters[t]=n:console.warn("THREEx.ArMarkerControls: '"+t+"' is not a property of this material.")}else console.warn("THREEx.ArMarkerControls: '"+t+"' parameter is undefined.")}}var r=this;THREEx.ArBaseControls.call(this,t),this.context=e,this.parameters={size:1,type:"unknown",patternUrl:null,barcodeValue:null,changeMatrixMode:"modelViewMatrix",minConfidence:.6};var a=["pattern","barcode","unknown"];console.assert(a.indexOf(this.parameters.type)!==-1,"illegal value",this.parameters.type);var a=["modelViewMatrix","cameraTransformMatrix"];console.assert(a.indexOf(this.parameters.changeMatrixMode)!==-1,"illegal value",this.parameters.changeMatrixMode),this.object3d=t,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1,i(n),e.addMarker(this),"artoolkit"===r.context.parameters.trackingBackend?this._initArtoolkit():"aruco"===r.context.parameters.trackingBackend?this._arucoPosit=new POS.Posit(this.parameters.size,r.context.arucoContext.canvas.width):"tango"===r.context.parameters.trackingBackend?this._initTango():console.assert(!1)},THREEx.ArMarkerControls.prototype=Object.create(THREEx.ArBaseControls.prototype),THREEx.ArMarkerControls.prototype.constructor=THREEx.ArMarkerControls,THREEx.ArMarkerControls.prototype.dispose=function(){this.context.removeMarker(this)},THREEx.ArMarkerControls.prototype.updateWithModelViewMatrix=function(e){var t=this.object3d;if(t.visible=!0,"artoolkit"===this.context.parameters.trackingBackend){var n=(new THREE.Matrix4).copy(this.context._artoolkitProjectionAxisTransformMatrix);n.multiply(e),e.copy(n)}else"aruco"===this.context.parameters.trackingBackend||"tango"===this.context.parameters.trackingBackend||console.assert(!1);if("tango"!==this.context.parameters.trackingBackend){var i=(new THREE.Matrix4).makeRotationX(Math.PI/2);e.multiply(i)}"modelViewMatrix"===this.parameters.changeMatrixMode?t.matrix.copy(e):"cameraTransformMatrix"===this.parameters.changeMatrixMode?t.matrix.getInverse(e):console.assert(!1),t.matrix.decompose(t.position,t.quaternion,t.scale),this.dispatchEvent({type:"markerFound"})},THREEx.ArMarkerControls.prototype.name=function(){var e="";if(e+=this.parameters.type,"pattern"===this.parameters.type){var t=this.parameters.patternUrl,n=t.replace(/^.*\//g,"");e+=" - "+n}else"barcode"===this.parameters.type?e+=" - "+this.parameters.barcodeValue:console.assert(!1,"no .name() implemented for this marker controls");return e},THREEx.ArMarkerControls.prototype._initArtoolkit=function(){function e(){var e=n.context.arController;console.assert(null!==e),"pattern"===n.parameters.type?e.loadMarker(n.parameters.patternUrl,function(t){i=t,e.trackPatternMarkerId(i,n.parameters.size)}):"barcode"===n.parameters.type?(i=n.parameters.barcodeValue,e.trackBarcodeMarkerId(i,n.parameters.size)):"unknown"===n.parameters.type?i=null:console.log(!1,"invalid marker type",n.parameters.type),e.addEventListener("getMarker",function(e){if(e.data.type===artoolkit.PATTERN_MARKER&&"pattern"===n.parameters.type){if(null===i)return;e.data.marker.idPatt===i&&t(e)}else if(e.data.type===artoolkit.BARCODE_MARKER&&"barcode"===n.parameters.type){if(null===i)return;e.data.marker.idMatrix===i&&t(e)}else e.data.type===artoolkit.UNKNOWN_MARKER&&"unknown"===n.parameters.type&&t(e)})}function t(e){if(!(e.data.type===artoolkit.PATTERN_MARKER&&e.data.marker.cfPatt<n.parameters.minConfidence||e.data.type===artoolkit.BARCODE_MARKER&&e.data.marker.cfMatt<n.parameters.minConfidence)){var t=(new THREE.Matrix4).fromArray(e.data.matrix);n.updateWithModelViewMatrix(t)}}var n=this,i=null,r=setInterval(function(){var t=n.context.arController;null!==t&&(clearInterval(r),r=null,e())},20)},THREEx.ArMarkerControls.prototype._initAruco=function(){this._arucoPosit=new POS.Posit(this.parameters.size,_this.context.arucoContext.canvas.width)},THREEx.ArMarkerControls.prototype._initTango=function(){console.log("init tango ArMarkerControls")};var THREEx=THREEx||{};THREEx.ArMarkerHelper=function(e){this.object3d=new THREE.Group;var t=new THREE.AxisHelper;this.object3d.add(t);var n=e.id,i=document.createElement("canvas");i.width=64,i.height=64;var r=i.getContext("2d"),a=new THREE.CanvasTexture(i);r.font="48px monospace",r.fillStyle="rgba(192,192,255, 0.5)",r.fillRect(0,0,i.width,i.height),r.fillStyle="darkblue",r.fillText(n,i.width/4,3*i.height/4),a.needsUpdate=!0;var o=new THREE.PlaneGeometry(1,1),s=new THREE.MeshBasicMaterial({map:a,transparent:!0}),t=new THREE.Mesh(o,s);t.rotation.x=-Math.PI/2,this.object3d.add(t)};var THREEx=THREEx||{};THREEx.ArSmoothedControls=function(e,t){function n(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=i.parameters[t];void 0!==r?i.parameters[t]=n:console.warn("THREEx.ArSmoothedControls: '"+t+"' is not a property of this material.")}else console.warn("THREEx.ArSmoothedControls: '"+t+"' parameter is undefined.")}}var i=this;THREEx.ArBaseControls.call(this,e),this.object3d.visible=!1,this._lastLerpStepAt=null,this._visibleStartedAt=null,this._unvisibleStartedAt=null,t=t||{},this.parameters={lerpPosition:.8,lerpQuaternion:.2,lerpScale:.7,lerpStepDelay:1/60,minVisibleDelay:0,minUnvisibleDelay:.2},n(t)},THREEx.ArSmoothedControls.prototype=Object.create(THREEx.ArBaseControls.prototype),THREEx.ArSmoothedControls.prototype.constructor=THREEx.ArSmoothedControls,THREEx.ArSmoothedControls.prototype.update=function(e){function t(){i.position.copy(e.position),i.quaternion.copy(e.quaternion),i.scale.copy(e.scale)}function n(){i.position.lerp(e.position,r.lerpPosition),i.quaternion.slerp(e.quaternion,r.lerpQuaternion),i.scale.lerp(e.scale,r.lerpScale)}var i=this.object3d,r=this.parameters,a=i.visible,o=performance.now()/1e3;if(e.visible===!1&&(this._visibleStartedAt=null),e.visible===!0&&(this._unvisibleStartedAt=null),e.visible===!0&&null===this._visibleStartedAt&&(this._visibleStartedAt=o),e.visible===!1&&null===this._unvisibleStartedAt&&(this._unvisibleStartedAt=o),a===!1&&e.visible===!0){var s=o-this._visibleStartedAt;s>=this.parameters.minVisibleDelay&&(i.visible=!0,t())}if(a===!0&&e.visible===!1){var l=o-this._unvisibleStartedAt;l>=this.parameters.minUnvisibleDelay&&(i.visible=!1)}if(null===this._lastLerpStepAt)n(),this._lastLerpStepAt=o;else for(var u=Math.floor((o-this._lastLerpStepAt)/this.parameters.lerpStepDelay),c=0;c<u;c++)n(),this._lastLerpStepAt+=this.parameters.lerpStepDelay;this.object3d.updateMatrix(),a===!1&&i.visible===!0&&this.dispatchEvent({type:"becameVisible"}),a===!0&&i.visible===!1&&this.dispatchEvent({type:"becameUnVisible"})};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Context=THREEx.ArToolkitContext=function(e){function t(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i){var r=n.parameters[t];void 0!==r?n.parameters[t]=i:console.warn("THREEx.ArToolkitContext: '"+t+"' is not a property of this material.")}else console.warn("THREEx.ArToolkitContext: '"+t+"' parameter is undefined.")}}var n=this;n._updatedAt=null,this.parameters={trackingBackend:"artoolkit",debug:!1,detectionMode:"mono",matrixCodeType:"3x3",cameraParametersUrl:ARjs.Context.baseURL+"parameters/camera_para.dat",maxDetectionRate:60,canvasWidth:640,canvasHeight:480,imageSmoothingEnabled:!1},console.assert(["artoolkit","aruco","tango"].indexOf(this.parameters.trackingBackend)!==-1,"invalid parameter trackingBackend",this.parameters.trackingBackend),console.assert(["color","color_and_matrix","mono","mono_and_matrix"].indexOf(this.parameters.detectionMode)!==-1,"invalid parameter detectionMode",this.parameters.detectionMode),this.arController=null,this.arucoContext=null,n.initialized=!1,this._arMarkersControls=[],t(e)},Object.assign(ARjs.Context.prototype,THREE.EventDispatcher.prototype),ARjs.Context.baseURL="https://jeromeetienne.github.io/AR.js/three.js/",ARjs.Context.REVISION="1.4.10",ARjs.Context.createDefaultCamera=function(e){if(console.assert(!1,"use ARjs.Utils.createDefaultCamera instead"),"artoolkit"===e)var t=new THREE.Camera;else if("aruco"===e)var t=new THREE.PerspectiveCamera(42,renderer.domElement.width/renderer.domElement.height,.01,100);else if("tango"===e)var t=new THREE.PerspectiveCamera(42,renderer.domElement.width/renderer.domElement.height,.01,100);else console.assert(!1);return t},ARjs.Context.prototype.init=function(e){function t(){n.dispatchEvent({type:"initialized"}),n.initialized=!0,e&&e()}var n=this;"artoolkit"===this.parameters.trackingBackend?this._initArtoolkit(t):"aruco"===this.parameters.trackingBackend?this._initAruco(t):"tango"===this.parameters.trackingBackend?this._initTango(t):console.assert(!1)},ARjs.Context.prototype.update=function(e){if("artoolkit"===this.parameters.trackingBackend&&null===this.arController)return!1;var t=performance.now();return!(null!==this._updatedAt&&t-this._updatedAt<1e3/this.parameters.maxDetectionRate)&&(this._updatedAt=t,this._arMarkersControls.forEach(function(e){e.object3d.visible=!1}),"artoolkit"===this.parameters.trackingBackend?this._updateArtoolkit(e):"aruco"===this.parameters.trackingBackend?this._updateAruco(e):"tango"===this.parameters.trackingBackend?this._updateTango(e):console.assert(!1),this.dispatchEvent({type:"sourceProcessed"}),!0)},ARjs.Context.prototype.addMarker=function(e){console.assert(e instanceof THREEx.ArMarkerControls),this._arMarkersControls.push(e)},ARjs.Context.prototype.removeMarker=function(e){console.assert(e instanceof THREEx.ArMarkerControls);var t=this.arMarkerControlss.indexOf(artoolkitMarker);console.assert(t!==t),this._arMarkersControls.splice(t,1)},ARjs.Context.prototype._initArtoolkit=function(e){var t=this;this._artoolkitProjectionAxisTransformMatrix=new THREE.Matrix4,this._artoolkitProjectionAxisTransformMatrix.multiply((new THREE.Matrix4).makeRotationY(Math.PI)),this._artoolkitProjectionAxisTransformMatrix.multiply((new THREE.Matrix4).makeRotationZ(Math.PI));
var n=new ARCameraParam(t.parameters.cameraParametersUrl,function(){var i=new ARController(t.parameters.canvasWidth,t.parameters.canvasHeight,n);t.arController=i,i.ctx.mozImageSmoothingEnabled=t.parameters.imageSmoothingEnabled,i.ctx.webkitImageSmoothingEnabled=t.parameters.imageSmoothingEnabled,i.ctx.msImageSmoothingEnabled=t.parameters.imageSmoothingEnabled,i.ctx.imageSmoothingEnabled=t.parameters.imageSmoothingEnabled,t.parameters.debug===!0&&(i.debugSetup(),i.canvas.style.position="absolute",i.canvas.style.top="0px",i.canvas.style.opacity="0.6",i.canvas.style.pointerEvents="none",i.canvas.style.zIndex="-1");var r={color:artoolkit.AR_TEMPLATE_MATCHING_COLOR,color_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_COLOR_AND_MATRIX,mono:artoolkit.AR_TEMPLATE_MATCHING_MONO,mono_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_MONO_AND_MATRIX},a=r[t.parameters.detectionMode];console.assert(void 0!==a),i.setPatternDetectionMode(a);var o={"3x3":artoolkit.AR_MATRIX_CODE_3x3,"3x3_HAMMING63":artoolkit.AR_MATRIX_CODE_3x3_HAMMING63,"3x3_PARITY65":artoolkit.AR_MATRIX_CODE_3x3_PARITY65,"4x4":artoolkit.AR_MATRIX_CODE_4x4,"4x4_BCH_13_9_3":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_9_3,"4x4_BCH_13_5_5":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_5_5},s=o[t.parameters.matrixCodeType];console.assert(void 0!==s),i.setMatrixCodeType(s),e()});return this},ARjs.Context.prototype.getProjectionMatrix=function(e){if("aruco"===this.parameters.trackingBackend)console.assert(!1,"dont call this function with aruco");else if("artoolkit"===this.parameters.trackingBackend){console.assert(this.arController,"arController MUST be initialized to call this function");var t=this.arController.getCameraMatrix(),n=(new THREE.Matrix4).fromArray(t)}else console.assert(!1);return n.multiply(this._artoolkitProjectionAxisTransformMatrix),n},ARjs.Context.prototype._updateArtoolkit=function(e){this.arController.process(e)},ARjs.Context.prototype._initAruco=function(e){this.arucoContext=new THREEx.ArucoContext,this.arucoContext.canvas.width=this.parameters.canvasWidth,this.arucoContext.canvas.height=this.parameters.canvasHeight;var t=this.arucoContext.canvas.getContext("2d");t.webkitImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,t.msImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,t.imageSmoothingEnabled=this.parameters.imageSmoothingEnabled,setTimeout(function(){e()},0)},ARjs.Context.prototype._updateAruco=function(e){var t=this,n=this._arMarkersControls,i=this.arucoContext.detect(e);i.forEach(function(e){for(var i=null,r=0;r<n.length;r++)if(console.assert("barcode"===n[r].parameters.type),n[r].parameters.barcodeValue===e.id){i=n[r];break}if(null!==i){var a=new THREE.Object3D;t.arucoContext.updateObject3D(a,i._arucoPosit,i.parameters.size,e),a.updateMatrix(),i.updateWithModelViewMatrix(a.matrix)}})},ARjs.Context.prototype._initTango=function(e){var t=this;navigator.getVRDisplays||(navigator.getVRDevices?alert("Your browser supports WebVR but not the latest version. See <a href='http://webvr.info'>webvr.info</a> for more info."):alert("Your browser does not support WebVR. See <a href='http://webvr.info'>webvr.info</a> for assistance.")),this._tangoContext={vrDisplay:null,vrPointCloud:null,frameData:new VRFrameData},navigator.getVRDisplays().then(function(n){0===n.length&&alert("no vrDisplays available");var i=t._tangoContext.vrDisplay=n[0];console.log("vrDisplays.displayName :",i.displayName),"Tango VR Device"===i.displayName&&(t._tangoContext.vrPointCloud=new THREE.WebAR.VRPointCloud(i,(!0))),e()})},ARjs.Context.prototype._updateTango=function(e){var t=this,n=(this._arMarkersControls,this._tangoContext,this._tangoContext.vrDisplay);if(null!==n){if("Tango VR Device"===n.displayName){var i=!0,r=0;t._tangoContext.vrPointCloud.update(i,r,!0)}if(0!==this._arMarkersControls.length){var a=this._arMarkersControls[0],o=this._tangoContext.frameData;if(n.getFrameData(o),null!==o.pose.position&&null!==o.pose.orientation){var s=(new THREE.Vector3).fromArray(o.pose.position),l=(new THREE.Quaternion).fromArray(o.pose.orientation),u=new THREE.Vector3(1,1,1),c=(new THREE.Matrix4).compose(s,l,u),h=new THREE.Matrix4;h.getInverse(c),a.updateWithModelViewMatrix(h)}}}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Profile=THREEx.ArToolkitProfile=function(){this.reset(),this.performance("default")},ARjs.Profile.prototype._guessPerformanceLabel=function(){var e=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i));return e===!0?"phone-normal":"desktop-normal"},ARjs.Profile.prototype.reset=function(){return this.sourceParameters={sourceType:"webcam"},this.contextParameters={cameraParametersUrl:THREEx.ArToolkitContext.baseURL+"../data/data/camera_para.dat",detectionMode:"mono"},this.defaultMarkerParameters={type:"pattern",patternUrl:THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro",changeMatrixMode:"modelViewMatrix"},this},ARjs.Profile.prototype.performance=function(e){return"default"===e&&(e=this._guessPerformanceLabel()),"desktop-fast"===e?(this.contextParameters.canvasWidth=1920,this.contextParameters.canvasHeight=1440,this.contextParameters.maxDetectionRate=30):"desktop-normal"===e?(this.contextParameters.canvasWidth=640,this.contextParameters.canvasHeight=480,this.contextParameters.maxDetectionRate=60):"phone-normal"===e?(this.contextParameters.canvasWidth=320,this.contextParameters.canvasHeight=240,this.contextParameters.maxDetectionRate=30):"phone-slow"===e?(this.contextParameters.canvasWidth=240,this.contextParameters.canvasHeight=180,this.contextParameters.maxDetectionRate=30):console.assert(!1,"unknonwn label "+e),this},ARjs.Profile.prototype.defaultMarker=function(e){return e=e||this.contextParameters.trackingBackend,"artoolkit"===e?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="pattern",this.defaultMarkerParameters.patternUrl=THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro"):"aruco"===e?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="barcode",this.defaultMarkerParameters.barcodeValue=1001):"tango"===e?(this.defaultMarkerParameters.type="barcode",this.defaultMarkerParameters.barcodeValue=1001):console.assert(!1),this},ARjs.Profile.prototype.sourceWebcam=function(){return this.sourceParameters.sourceType="webcam",delete this.sourceParameters.sourceUrl,this},ARjs.Profile.prototype.sourceVideo=function(e){return this.sourceParameters.sourceType="video",this.sourceParameters.sourceUrl=e,this},ARjs.Profile.prototype.sourceImage=function(e){return this.sourceParameters.sourceType="image",this.sourceParameters.sourceUrl=e,this},ARjs.Profile.prototype.trackingBackend=function(e){return console.warn("stop profile.trackingBackend() obsolete function. use .trackingMethod instead"),this.contextParameters.trackingBackend=e,this},ARjs.Profile.prototype.changeMatrixMode=function(e){return this.defaultMarkerParameters.changeMatrixMode=e,this},ARjs.Profile.prototype.trackingMethod=function(e){var t=ARjs.Utils.parseTrackingMethod(e);return this.defaultMarkerParameters.markersAreaEnabled=t.markersAreaEnabled,this.contextParameters.trackingBackend=t.trackingBackend,this},ARjs.Profile.prototype.checkIfValid=function(){return"tango"===this.contextParameters.trackingBackend&&this.sourceImage(THREEx.ArToolkitContext.baseURL+"../data/images/img.jpg"),this};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Source=THREEx.ArToolkitSource=function(e){function t(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i){var r=n.parameters[t];void 0!==r?n.parameters[t]=i:console.warn("THREEx.ArToolkitSource: '"+t+"' is not a property of this material.")}else console.warn("THREEx.ArToolkitSource: '"+t+"' parameter is undefined.")}}var n=this;this.ready=!1,this.domElement=null,this.parameters={sourceType:"webcam",sourceUrl:null,sourceWidth:640,sourceHeight:480,displayWidth:640,displayHeight:480},t(e)},ARjs.Source.prototype.init=function(e,t){function n(){document.body.appendChild(i.domElement),i.ready=!0,e&&e()}var i=this;if("image"===this.parameters.sourceType)var r=this._initSourceImage(n,t);else if("video"===this.parameters.sourceType)var r=this._initSourceVideo(n,t);else if("webcam"===this.parameters.sourceType)var r=this._initSourceWebcam(n,t);else console.assert(!1);return this.domElement=r,this.domElement.style.position="absolute",this.domElement.style.top="0px",this.domElement.style.left="0px",this.domElement.style.zIndex="-2",this},ARjs.Source.prototype._initSourceImage=function(e){var t=document.createElement("img");t.src=this.parameters.sourceUrl,t.width=this.parameters.sourceWidth,t.height=this.parameters.sourceHeight,t.style.width=this.parameters.displayWidth+"px",t.style.height=this.parameters.displayHeight+"px";var n=setInterval(function(){t.naturalWidth&&(e(),clearInterval(n))},20);return t},ARjs.Source.prototype._initSourceVideo=function(e){var t=document.createElement("video");t.src=this.parameters.sourceUrl,t.style.objectFit="initial",t.autoplay=!0,t.webkitPlaysinline=!0,t.controls=!1,t.loop=!0,t.muted=!0,document.body.addEventListener("click",function e(){document.body.removeEventListener("click",e),t.play()}),t.width=this.parameters.sourceWidth,t.height=this.parameters.sourceHeight,t.style.width=this.parameters.displayWidth+"px",t.style.height=this.parameters.displayHeight+"px";var n=setInterval(function(){t.videoWidth&&(e(),clearInterval(n))},20);return t},ARjs.Source.prototype._initSourceWebcam=function(e,t){var n=this;t=t||function(e){alert("Webcam Error\nName: "+e.name+"\nMessage: "+e.message)};var i=document.createElement("video");if(i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.setAttribute("playsinline",""),i.style.width=this.parameters.displayWidth+"px",i.style.height=this.parameters.displayHeight+"px",void 0===navigator.mediaDevices||void 0===navigator.mediaDevices.enumerateDevices||void 0===navigator.mediaDevices.getUserMedia){if(void 0===navigator.mediaDevices)var r="navigator.mediaDevices";else if(void 0===navigator.mediaDevices.enumerateDevices)var r="navigator.mediaDevices.enumerateDevices";else if(void 0===navigator.mediaDevices.getUserMedia)var r="navigator.mediaDevices.getUserMedia";else console.assert(!1);return t({name:"",message:"WebRTC issue-! "+r+" not present in your browser"}),null}return navigator.mediaDevices.enumerateDevices().then(function(r){var a={audio:!1,video:{facingMode:"environment",width:{ideal:n.parameters.sourceWidth},height:{ideal:n.parameters.sourceHeight}}};navigator.mediaDevices.getUserMedia(a).then(function(t){i.srcObject=t,document.body.addEventListener("click",function(){i.play()});var n=setInterval(function(){i.videoWidth&&(e(),clearInterval(n))},20)}).catch(function(e){t({name:e.name,message:e.message})})}).catch(function(e){t({message:e.message})}),i},ARjs.Source.prototype.hasMobileTorch=function(){var e=arToolkitSource.domElement.srcObject;if(e instanceof MediaStream==!1)return!1;void 0===this._currentTorchStatus&&(this._currentTorchStatus=!1);var t=e.getVideoTracks()[0];if(void 0===t.getCapabilities)return!1;var n=t.getCapabilities();return!!n.torch},ARjs.Source.prototype.toggleMobileTorch=function(){console.assert(this.hasMobileTorch()===!0);var e=arToolkitSource.domElement.srcObject;if(e instanceof MediaStream==!1)return void alert("enabling mobile torch is available only on webcam");void 0===this._currentTorchStatus&&(this._currentTorchStatus=!1);var t=e.getVideoTracks()[0],n=t.getCapabilities();return n.torch?(this._currentTorchStatus=this._currentTorchStatus===!1,void t.applyConstraints({advanced:[{torch:this._currentTorchStatus}]}).catch(function(e){console.log(e)})):void alert("no mobile torch is available on your camera")},ARjs.Source.prototype.onResizeElement=function(e){var t=this,n=window.innerWidth,i=window.innerHeight;if("IMG"===this.domElement.nodeName)var r=this.domElement.naturalWidth,a=this.domElement.naturalHeight;else if("VIDEO"===this.domElement.nodeName)var r=this.domElement.videoWidth,a=this.domElement.videoHeight;else console.assert(!1);var o=r/a,s=n/i;if(s<o){var l=o*i;this.domElement.style.width=l+"px",this.domElement.style.marginLeft=-(l-n)/2+"px",this.domElement.style.height=i+"px",this.domElement.style.marginTop="0px"}else{var u=1/(o/n);this.domElement.style.height=u+"px",this.domElement.style.marginTop=-(u-i)/2+"px",this.domElement.style.width=n+"px",this.domElement.style.marginLeft="0px"}0!==arguments.length&&console.warn("use bad signature for arToolkitSource.copyElementSizeTo"),void 0===e&&(e=[]),e instanceof Array==!1&&(e=[e]),e.forEach(function(e){t.copyElementSizeTo(e)})},ARjs.Source.prototype.copyElementSizeTo=function(e){e.style.width=this.domElement.style.width,e.style.height=this.domElement.style.height,e.style.marginLeft=this.domElement.style.marginLeft,e.style.marginTop=this.domElement.style.marginTop},ARjs.Source.prototype.copySizeTo=function(){console.warn("obsolete function arToolkitSource.copySizeTo. Use arToolkitSource.copyElementSizeTo"),this.copyElementSizeTo.apply(this,arguments)},ARjs.Source.prototype.onResize=function(e,t,n){if(3!==arguments.length)return console.warn("obsolete function arToolkitSource.onResize. Use arToolkitSource.onResizeElement"),this.onResizeElement.apply(this,arguments);var i=e.parameters.trackingBackend;if("artoolkit"===i){this.onResizeElement();var r=!!t.domElement.dataset.aframeCanvas;r===!1&&this.copyElementSizeTo(t.domElement),null!==e.arController&&this.copyElementSizeTo(e.arController.canvas)}else"aruco"===i?(this.onResizeElement(),this.copyElementSizeTo(t.domElement),this.copyElementSizeTo(e.arucoContext.canvas)):"tango"===i?t.setSize(window.innerWidth,window.innerHeight):console.assert(!1,"unhandled trackingBackend "+i);if("artoolkit"===i)null!==e.arController&&n.projectionMatrix.copy(e.getProjectionMatrix());else if("aruco"===i)n.aspect=t.domElement.width/t.domElement.height,n.updateProjectionMatrix();else if("tango"===i){var a=e._tangoContext.vrDisplay;a&&"Tango VR Device"===a.displayName&&THREE.WebAR.resizeVRSeeThroughCamera(a,n)}else console.assert(!1,"unhandled trackingBackend "+i)};var THREEx=THREEx||{};THREEx.ArVideoInWebgl=function(e){var t=new THREE.PlaneGeometry(2,2),n=new THREE.MeshBasicMaterial({map:e}),i=new THREE.Mesh(t,n);this.object3d=i,this.update=function(e){e.updateMatrixWorld(!0);var t=new THREE.Vector3((-0),0,(-20)),t=new THREE.Vector3((-0),0,(-20));i.position.copy(t),e.localToWorld(i.position),e.matrixWorld.decompose(e.position,e.quaternion,e.scale),i.quaternion.copy(e.quaternion);var n=2*THREE.Math.radToDeg(Math.atan(1/e.projectionMatrix.elements[5])),r=parseFloat(arToolkitSource.domElement.style.width.replace(/px$/,""),10),a=parseFloat(arToolkitSource.domElement.style.height.replace(/px$/,""),10),o=r/a;i.scale.y=Math.tan(THREE.Math.DEG2RAD*n/2)*t.length(),i.scale.x=i.scale.y*o}};var THREEx=THREEx||{};THREEx.HitTestingPlane=function(e){this._sourceElement=e,this._pickingScene=new THREE.Scene;var t=new THREE.PlaneGeometry(20,20,19,19).rotateX(-Math.PI/2),n=new THREE.MeshBasicMaterial({wireframe:!0});this._pickingPlane=new THREE.Mesh(t,n),this._pickingScene.add(this._pickingPlane);var i=parseInt(e.style.width),r=parseInt(e.style.height);this._pickingCamera=new THREE.PerspectiveCamera(42,i/r,.1,30)},THREEx.HitTestingPlane.prototype.update=function(e,t,n){if(this.onResize(),"modelViewMatrix"===n){var i=this._pickingPlane;t.parent.updateMatrixWorld(),i.matrix.copy(t.parent.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale)}else if("cameraTransformMatrix"===n){var r=this._pickingCamera;e.updateMatrixWorld(),r.matrix.copy(e.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale)}else console.assert(!1)},THREEx.HitTestingPlane.prototype.onResize=function(){var e=this._sourceElement,t=this._pickingCamera,n=parseInt(e.style.width),i=parseInt(e.style.height);t.aspect=n/i,t.updateProjectionMatrix()},THREEx.HitTestingPlane.prototype.test=function(e,t){e=2*(e-.5),t=2*-(t-.5),this._pickingScene.updateMatrixWorld(!0);var n=new THREE.Raycaster,i=new THREE.Vector3(e,t,1);n.setFromCamera(i,this._pickingCamera);var r=n.intersectObjects([this._pickingPlane]);if(0===r.length)return null;var a=this._pickingPlane.worldToLocal(r[0].point.clone()),o=new THREE.Quaternion,s=new THREE.Vector3(1,1,1);return{position:a,quaternion:o,scale:s}},THREEx.HitTestingPlane.prototype.renderDebug=function(e){e.render(this._pickingScene,this._pickingCamera)};var THREEx=THREEx||{};THREEx.HitTestingTango=function(e){this._arContext=e,this.boundingSphereRadius=.01,this.resultScale=new THREE.Vector3(1,1,1).multiplyScalar(1)},THREEx.HitTestingTango.prototype.update=function(){},THREEx.HitTestingTango.prototype.test=function(e,t){var n=this._arContext._tangoContext.vrDisplay;if(null===n)return null;if("Tango VR Device"!==n.displayName)return null;var i=n.getPickingPointAndPlaneInPointCloud(e,t);if(null==i)return console.warn("Could not retrieve the correct point and plane."),null;var r=new THREE.Object3D;THREE.WebAR.positionAndRotateObject3DWithPickingPointAndPlaneInPointCloud(i,r,this.boundingSphereRadius),r.rotateZ(-Math.PI/2);var a={position:r.position,quaternion:r.quaternion,scale:this.resultScale};return a};var ARjs=ARjs||{};ARjs.Anchor=function(e,t){var n=this,i=e.arContext,r=e.parameters.scene,a=e.parameters.camera;this.arSession=e,this.parameters=t,console.log("ARjs.Anchor -","changeMatrixMode:",this.parameters.changeMatrixMode,"/ markersAreaEnabled:",t.markersAreaEnabled);var o=new THREE.Group;if(r.add(o),"modelViewMatrix"===t.changeMatrixMode)var s=o;else if("cameraTransformMatrix"===t.changeMatrixMode)var s=a;else console.assert(!1);if(t.markersAreaEnabled===!1){new THREEx.ArMarkerControls(i,s,t)}else{console.assert("artoolkit"===i.parameters.trackingBackend||"aruco"===i.parameters.trackingBackend),null===localStorage.getItem("ARjsMultiMarkerFile")&&ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(i.parameters.trackingBackend),console.assert(null!==localStorage.getItem("ARjsMultiMarkerFile"));var l=localStorage.getItem("ARjsMultiMarkerFile");if("modelViewMatrix"===t.changeMatrixMode)var u=r;else if("cameraTransformMatrix"===t.changeMatrixMode)var u=a;else console.assert(!1);var c=ARjs.MarkersAreaControls.fromJSON(i,u,s,l);c.parameters.changeMatrixMode=t.changeMatrixMode;var h=[];c.subMarkersControls.forEach(function(e){var t=new THREEx.ArMarkerHelper(e);t.object3d.visible=!1,e.object3d.add(t.object3d),h.push(t)}),this.markersArea={},this.markersArea.setSubMarkersVisibility=function(e){h.forEach(function(t){t.object3d.visible=e})}}this.object3d=new THREE.Group;var f=!0;if("tango"===i.parameters.trackingBackend&&(f=!1),f===!0){var d=new THREE.Group;r.add(d);var p=new THREEx.ArSmoothedControls(d);d.add(this.object3d)}else o.add(this.object3d);this.update=function(){"cameraTransformMatrix"===t.changeMatrixMode&&(n.object3d.visible=s.visible),void 0!==p&&(void 0!==c&&c.updateSmoothedControls(p),p.update(o))}},ARjs.Anchor.prototype.applyHitTestResult=function(e){this.object3d.position.copy(e.position),this.object3d.quaternion.copy(e.quaternion),this.object3d.scale.copy(e.scale),this.object3d.updateMatrix()};var ARjs=ARjs||{};ARjs.SessionDebugUI=function(e,t){var n=e.arContext.parameters.trackingBackend;this.domElement=document.createElement("div");var i=document.createElement("span");if(this.domElement.appendChild(i),i.innerHTML="trackingBackend :"+n,"tango"===n&&t){var i=document.createElement("button");this.domElement.appendChild(i),i.id="buttonTangoTogglePointCloud",i.innerHTML="toggle-point-cloud",i.href="javascript:void(0)",i.addEventListener("click",function(){var n=e.parameters.scene;t.object3d.parent?n.remove(t.object3d):n.add(t.object3d)})}},ARjs.AnchorDebugUI=function(e){var t=e.arSession,n=t.arContext.parameters.trackingBackend;this.domElement=document.createElement("div");var i=document.createElement("span");if(this.domElement.appendChild(i),i.innerHTML="markersAreaEnabled :"+e.parameters.markersAreaEnabled,e.parameters.markersAreaEnabled){var i=document.createElement("button");this.domElement.appendChild(i),i.id="buttonToggleMarkerHelpers",i.innerHTML="toggle-marker-helper",i.href="javascript:void(0)";var r=!1;i.addEventListener("click",function(){r=!r,e.markersArea.setSubMarkersVisibility(r)})}if(e.parameters.markersAreaEnabled){var i=document.createElement("button");this.domElement.appendChild(i),i.id="buttonMarkersAreaLearner",i.innerHTML="Learn-new-marker-area",i.href="javascript:void(0)",i.addEventListener("click",function(){var e=ARjs.Context.baseURL+"examples/multi-markers/examples/learner.html";ARjs.MarkersAreaUtils.navigateToLearnerPage(e,n)})}if(e.parameters.markersAreaEnabled){var i=document.createElement("button");this.domElement.appendChild(i),i.id="buttonMarkersAreaReset",i.innerHTML="Reset-marker-area",i.href="javascript:void(0)",i.addEventListener("click",function(){ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(n),location.reload()})}};var ARjs=ARjs||{};ARjs.HitTesting=function(e){var t=this,n=e.arContext,i=n.parameters.trackingBackend;this.enabled=!0,this._arSession=e,this._hitTestingPlane=null,this._hitTestingTango=null,"tango"===i?t._hitTestingTango=new THREEx.HitTestingTango(n):t._hitTestingPlane=new THREEx.HitTestingPlane(e.arSource.domElement)},ARjs.HitTesting.prototype.update=function(e,t,n){this.enabled!==!1&&(null!==this._hitTestingTango?this._hitTestingTango.update():null!==this._hitTestingPlane?this._hitTestingPlane.update(e,t,n):console.assert(!1))},ARjs.HitTesting.prototype.testDomEvent=function(e){var t=this._arSession.arContext.parameters.trackingBackend,n=this._arSession.arSource;if(this.enabled===!1)return[];if("tango"===t)var i=e.pageX/window.innerWidth,r=e.pageY/window.innerHeight;else var i=e.layerX/parseInt(n.domElement.style.width),r=e.layerY/parseInt(n.domElement.style.height);return this.test(i,r)},ARjs.HitTesting.prototype.test=function(e,t){var n=this._arSession.arContext,i=n.parameters.trackingBackend,r=[];if(this.enabled===!1)return[];var a=null;if("tango"===i)var a=this._hitTestingTango.test(e,t);else var a=this._hitTestingPlane.test(e,t);if(null===a)return r;var o=new ARjs.HitTesting.Result(a.position,a.quaternion,a.scale);return r.push(o),r},ARjs.HitTesting.Result=function(e,t,n){this.position=e,this.quaternion=t,this.scale=n};var ARjs=ARjs||{};ARjs.Session=function(e){function t(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i){var r=n.parameters[t];void 0!==r?n.parameters[t]=i:console.warn("THREEx.Session: '"+t+"' is not a property of this material.")}else console.warn("THREEx.Session: '"+t+"' parameter is undefined.")}}var n=this;this.parameters={renderer:null,camera:null,scene:null,sourceParameters:{},contextParameters:{}},t(e),console.assert(this.parameters.renderer instanceof THREE.WebGLRenderer),console.assert(this.parameters.camera instanceof THREE.Camera),console.assert(this.parameters.scene instanceof THREE.Scene),Object.defineProperty(this,"renderer",{get:function(){return console.warn("use .parameters.renderer renderer"),this.parameters.renderer}}),Object.defineProperty(this,"camera",{get:function(){return console.warn("use .parameters.camera instead"),this.parameters.camera}}),Object.defineProperty(this,"scene",{get:function(){return console.warn("use .parameters.scene instead"),this.parameters.scene}}),console.log("AR.js",ARjs.Context.REVISION,"- trackingBackend:",e.contextParameters.trackingBackend);var i=n.arSource=new ARjs.Source(e.sourceParameters);i.init(function(){i.onResize(r,n.parameters.renderer,n.parameters.camera)}),window.addEventListener("resize",function(){i.onResize(r,n.parameters.renderer,n.parameters.camera)});var r=n.arContext=new ARjs.Context(e.contextParameters);n.arContext.init(),r.addEventListener("initialized",function(e){i.onResize(r,n.parameters.renderer,n.parameters.camera)}),this.update=function(){i.ready!==!1&&r.update(i.domElement)}},ARjs.Session.prototype.onResize=function(){this.arSource.onResize(this.arContext,this.parameters.renderer,this.parameters.camera)};var ARjs=ARjs||{};ARjs.TangoPointCloud=function(e){var t=this,n=e.arContext;this.object3d=new THREE.Group,console.warn("Work only on cameraTransformMatrix - fix me - useless limitation"),n.addEventListener("initialized",function(e){var i=n._tangoContext.vrPointCloud,r=i.getBufferGeometry(),a=new THREE.PointsMaterial({size:.01,depthWrite:!1}),o=new THREE.Points(r,a);o.frustumCulled=!1,o.renderDepth=0,t.object3d.add(o)})};var ARjs=ARjs||{};ARjs.TangoVideoMesh=function(e){var t=e.arContext,n=e.renderer,i=null,r=null,a=new THREE.Scene,o=new THREE.OrthographicCamera((-1),1,1,(-1),0,100);this._sceneOrtho=a,this._cameraOrtho=o,t.addEventListener("initialized",function(e){console.assert("tango"===t.parameters.trackingBackend),r=t._tangoContext.vrDisplay,console.assert(r,"vrDisplay MUST be defined"),"Tango VR Device"===r.displayName&&(i=THREE.WebAR.createVRSeeThroughCameraMesh(r),a.add(i))}),this.update=function(){console.assert("tango"===t.parameters.trackingBackend),null!==i&&THREE.WebAR.updateCameraMeshOrientation(r,i)},this.render=function(){console.assert("tango"===t.parameters.trackingBackend),n.render(a,o),n.clearDepth()}};var ARjs=ARjs||{};ARjs.Utils={},ARjs.Utils.createDefaultCamera=function(e){var t=this.parseTrackingMethod(e).trackingBackend;if("artoolkit"===t)var n=new THREE.Camera;else if("aruco"===t)var n=new THREE.PerspectiveCamera(42,window.innerWidth/window.innerHeight,.01,100);else if("tango"===t)var n=new THREE.PerspectiveCamera(42,window.innerWidth/window.innerHeight,.01,100);else console.assert(!1,"unknown trackingBackend: "+t);return n},ARjs.Utils.isTango=function(){var e=null!==navigator.userAgent.match("Chrome/57.0.2987.5");return e},ARjs.Utils.parseTrackingMethod=function(e){return"best"===e&&(e=ARjs.Utils.isTango()?"tango":"area-artoolkit"),e.startsWith("area-")?{trackingBackend:e.replace("area-",""),markersAreaEnabled:!0}:{trackingBackend:e,markersAreaEnabled:!1}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaControls=THREEx.ArMultiMarkerControls=function(e,t,n){var i=this;THREEx.ArBaseControls.call(this,t),arguments.length>3&&console.assert("wrong api for",THREEx.ArMultiMarkerControls),this.parameters={subMarkersControls:n.subMarkersControls,subMarkerPoses:n.subMarkerPoses,changeMatrixMode:void 0!==n.changeMatrixMode?n.changeMatrixMode:"modelViewMatrix"},this.object3d.visible=!1,this.subMarkersControls=this.parameters.subMarkersControls,this.subMarkerPoses=this.parameters.subMarkerPoses,e.addEventListener("sourceProcessed",function(){i._onSourceProcessed()})},ARjs.MarkersAreaControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkersAreaControls.prototype.constructor=ARjs.MarkersAreaControls,ARjs.MarkersAreaControls.prototype._onSourceProcessed=function(){var e=this,t={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},n=e.parameters.subMarkersControls[0].object3d.quaternion;if(this.parameters.subMarkersControls.forEach(function(i,r){var a=i.object3d;if(a.visible!==!1){var o=a.matrix.clone(),s=e.parameters.subMarkerPoses[r];o.multiply((new THREE.Matrix4).getInverse(s));var l=new THREE.Vector3,u=new THREE.Quaternion,c=new THREE.Vector3;o.decompose(l,u,c),t.count++,ARjs.MarkersAreaControls.averageVector3(t.position.sum,l,t.count,t.position.average),ARjs.MarkersAreaControls.averageQuaternion(t.quaternion.sum,u,n,t.count,t.quaternion.average),ARjs.MarkersAreaControls.averageVector3(t.scale.sum,c,t.count,t.scale.average)}}),t.count>0?e.object3d.visible=!0:e.object3d.visible=!1,t.count>0){var i=new THREE.Matrix4;i.compose(t.position.average,t.quaternion.average,t.scale.average),"modelViewMatrix"===this.parameters.changeMatrixMode?e.object3d.matrix.copy(i):"cameraTransformMatrix"===this.parameters.changeMatrixMode?e.object3d.matrix.getInverse(i):console.assert(!1),e.object3d.matrix.decompose(e.object3d.position,e.object3d.quaternion,e.object3d.scale)}},ARjs.MarkersAreaControls.averageQuaternion=function(e,t,n,i,r){return r=r||new THREE.Quaternion,console.assert(n instanceof THREE.Quaternion==!0),t.dot(n)>0&&(t=new THREE.Quaternion((-t.x),(-t.y),(-t.z),(-t.w))),e.x+=t.x,e.y+=t.y,e.z+=t.z,e.w+=t.w,r.x=e.x/i,r.y=e.y/i,r.z=e.z/i,r.w=e.w/i,r.normalize(),r},ARjs.MarkersAreaControls.averageVector3=function(e,t,n,i){return i=i||new THREE.Vector3,e.x+=t.x,e.y+=t.y,e.z+=t.z,i.x=e.x/n,i.y=e.y/n,i.z=e.z/n,i},ARjs.MarkersAreaControls.computeCenter=function(e){var t=JSON.parse(e),n={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},i=new THREE.Quaternion;t.subMarkersControls.forEach(function(e){var t=(new THREE.Matrix4).fromArray(e.poseMatrix),r=new THREE.Vector3,a=new THREE.Quaternion,o=new THREE.Vector3;t.decompose(r,a,o),n.count++,ARjs.MarkersAreaControls.averageVector3(n.position.sum,r,n.count,n.position.average),ARjs.MarkersAreaControls.averageQuaternion(n.quaternion.sum,a,i,n.count,n.quaternion.average),ARjs.MarkersAreaControls.averageVector3(n.scale.sum,o,n.count,n.scale.average)});var r=new THREE.Matrix4;return r.compose(n.position.average,n.quaternion.average,n.scale.average),r},ARjs.MarkersAreaControls.computeBoundingBox=function(e){var t=JSON.parse(e),n=new THREE.Box3;return t.subMarkersControls.forEach(function(e){var t=(new THREE.Matrix4).fromArray(e.poseMatrix),i=new THREE.Vector3,r=new THREE.Quaternion,a=new THREE.Vector3;t.decompose(i,r,a),n.expandByPoint(i)}),n},ARjs.MarkersAreaControls.prototype.updateSmoothedControls=function(e,t){void 0===t&&(t=[[.1,.1,.3],[.2,.1,.4],[.2,.2,.5],[.3,.2,.7],[.3,.2,.7]]);var n=0;if(this.parameters.subMarkersControls.forEach(function(e,t){var i=e.object3d;i.visible===!0&&n++}),void 0!==t[n-1])var i=t[n-1];else var i=t[t.length-1];e.parameters.lerpPosition=i[0],e.parameters.lerpQuaternion=i[1],e.parameters.lerpScale=i[2]},ARjs.MarkersAreaControls.fromJSON=function(e,t,n,i,r){var a=JSON.parse(i),o=[],s=[];r=r||{},a.subMarkersControls.forEach(function(n){var i=new THREE.Object3D;t.add(i);var r=new THREEx.ArMarkerControls(e,i,n.parameters);o.push(r),s.push((new THREE.Matrix4).fromArray(n.poseMatrix))}),r.subMarkersControls=o,r.subMarkerPoses=s;var l=new THREEx.ArMultiMarkerControls(e,n,r);return l};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaLearning=THREEx.ArMultiMakersLearning=function(e,t){var n=this;this._arToolkitContext=e,this.subMarkersControls=t,this.enabled=!0,e.addEventListener("sourceProcessed",function(){n._onSourceProcessed()})},ARjs.MarkersAreaLearning.prototype._onSourceProcessed=function(){var e=this.subMarkersControls[0].object3d.quaternion;if(this.enabled!==!1)for(var t=this.subMarkersControls.filter(function(e){return e.object3d.visible===!0}),n=Object.keys(t).length,i=new THREE.Vector3,r=new THREE.Quaternion,a=new THREE.Vector3,o=new THREE.Matrix4,s=0;s<n;s++)for(var l=t[s],u=0;u<n;u++){var c=t[u];if(s!==u){void 0===l.object3d.userData.seenCouples&&(l.object3d.userData.seenCouples={});var h=l.object3d.userData.seenCouples;void 0===h[c.id]&&(h[c.id]={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}}),o.getInverse(l.object3d.matrix),o.multiply(c.object3d.matrix),o.decompose(i,r,a);var f=h[c.id];f.count++,THREEx.ArMultiMarkerControls.averageVector3(f.position.sum,i,f.count,f.position.average),THREEx.ArMultiMarkerControls.averageQuaternion(f.quaternion.sum,r,e,f.count,f.quaternion.average),THREEx.ArMultiMarkerControls.averageVector3(f.scale.sum,a,f.count,f.scale.average)}}},ARjs.MarkersAreaLearning.prototype.computeResult=function(){
var e=this,t=this.subMarkersControls[0];this.deleteResult(),t.object3d.userData.result={averageMatrix:new THREE.Matrix4,confidenceFactor:1};do{var n=!1;this.subMarkersControls.forEach(function(t){var i=t.object3d.userData.result,r=void 0!==i&&i.confidenceFactor>=1;if(r!==!0){var a=e._getLearnedCoupleStats(t);if(null!==a){var o=e._getSubMarkerControlsByID(a),s=t.object3d.userData.seenCouples[a],l=new THREE.Matrix4;l.compose(s.position.average,s.quaternion.average,s.scale.average);var u=o.object3d.userData.result.averageMatrix,c=(new THREE.Matrix4).getInverse(u).multiply(l);c=(new THREE.Matrix4).getInverse(c),console.assert(void 0===t.object3d.userData.result),t.object3d.userData.result={averageMatrix:c,confidenceFactor:1},n=!0}}})}while(n===!0)},ARjs.MarkersAreaLearning.prototype._getLearnedCoupleStats=function(e){if(void 0===e.object3d.userData.seenCouples)return null;for(var t=e.object3d.userData.seenCouples,n=Object.keys(t).map(Number),i=0;i<n.length;i++){var r=n[i],a=this._getSubMarkerControlsByID(r),o=a.object3d.userData.result,s=void 0!==o&&o.confidenceFactor>=1;if(s!==!1)return r}return null},ARjs.MarkersAreaLearning.prototype._getSubMarkerControlsByID=function(e){for(var t=0;t<this.subMarkersControls.length;t++){var n=this.subMarkersControls[t];if(n.id===e)return n}return null},ARjs.MarkersAreaLearning.prototype.toJSON=function(){this.computeResult();var e={meta:{createdBy:"Area Learning - AR.js "+THREEx.ArToolkitContext.REVISION,createdAt:(new Date).toJSON()},trackingBackend:this._arToolkitContext.parameters.trackingBackend,subMarkersControls:[]},t=this.subMarkersControls[0];(new THREE.Matrix4).getInverse(t.object3d.matrix);this.subMarkersControls.forEach(function(t,n){if(void 0!==t.object3d.userData.result){var i=t.object3d.userData.result.averageMatrix;console.assert(i instanceof THREE.Matrix4);var r={parameters:{},poseMatrix:i.toArray()};"pattern"===t.parameters.type?(r.parameters.type=t.parameters.type,r.parameters.patternUrl=t.parameters.patternUrl):"barcode"===t.parameters.type?(r.parameters.type=t.parameters.type,r.parameters.barcodeValue=t.parameters.barcodeValue):console.assert(!1),e.subMarkersControls.push(r)}});var n=JSON.stringify(e,null,"\t"),i=!1;if(i===!0){var r=JSON.parse(n);r.subMarkersControls.forEach(function(e){e.poseMatrix=e.poseMatrix.map(function(e){var t=100;return Math.round(e*t)/t})}),n=JSON.stringify(r,null,"\t")}return n},ARjs.MarkersAreaLearning.prototype.resetStats=function(){this.deleteResult(),this.subMarkersControls.forEach(function(e){delete e.object3d.userData.seenCouples})},ARjs.MarkersAreaLearning.prototype.deleteResult=function(){this.subMarkersControls.forEach(function(e){delete e.object3d.userData.result})};var THREEx=THREEx||{},ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaUtils=THREEx.ArMultiMarkerUtils={},ARjs.MarkersAreaUtils.navigateToLearnerPage=function(e,t){var n={backURL:location.href,trackingBackend:t,markersControlsParameters:ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters(t)};location.href=e+"#"+encodeURIComponent(JSON.stringify(n))},ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile=function(e){var t=ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile(e);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(t))},ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile=function(e){console.assert(e);var t=document.createElement("a");t.href=ARjs.Context.baseURL;var n=t.href,i={meta:{createdBy:"AR.js Default Marker "+ARjs.Context.REVISION,createdAt:(new Date).toJSON()},trackingBackend:e,subMarkersControls:[]};return i.subMarkersControls[0]={parameters:{},poseMatrix:(new THREE.Matrix4).makeTranslation(0,0,0).toArray()},"artoolkit"===e?(i.subMarkersControls[0].parameters.type="pattern",i.subMarkersControls[0].parameters.patternUrl=n+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"):"aruco"===e?(i.subMarkersControls[0].parameters.type="barcode",i.subMarkersControls[0].parameters.barcodeValue=1001):console.assert(!1),i},ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters=function(e){var t=document.createElement("a");t.href=ARjs.Context.baseURL;var n=t.href;if("artoolkit"===e)var i=[{type:"pattern",patternUrl:n+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"},{type:"pattern",patternUrl:n+"examples/marker-training/examples/pattern-files/pattern-kanji.patt"},{type:"pattern",patternUrl:n+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"},{type:"pattern",patternUrl:n+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"},{type:"pattern",patternUrl:n+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"},{type:"pattern",patternUrl:n+"examples/marker-training/examples/pattern-files/pattern-letterF.patt"}];else if("aruco"===e)var i=[{type:"barcode",barcodeValue:1001},{type:"barcode",barcodeValue:1002},{type:"barcode",barcodeValue:1003},{type:"barcode",barcodeValue:1004},{type:"barcode",barcodeValue:1005},{type:"barcode",barcodeValue:1006}];else console.assert(!1);return i},gantt={version:"4.2.1"},gantt.event=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},gantt.eventRemove=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},gantt._eventable=function(e){e._silent_mode=!1,e._silentStart=function(){this._silent_mode=!0},e._silentEnd=function(){this._silent_mode=!1},e.attachEvent=function(e,t,n){return e="ev_"+e.toLowerCase(),this[e]||(this[e]=new this._eventCatcher(n||this)),e+":"+this[e].addEvent(t)},e.callEvent=function(e,t){return!!this._silent_mode||(e="ev_"+e.toLowerCase(),!this[e]||this[e].apply(this,t))},e.checkEvent=function(e){return!!this["ev_"+e.toLowerCase()]},e._eventCatcher=function(e){var t=[],n=function(){for(var n=!0,i=0;i<t.length;i++)if(t[i]){var r=t[i].apply(e,arguments);n=n&&r}return n};return n.addEvent=function(e){return"function"==typeof e&&t.push(e)-1},n.removeEvent=function(e){t[e]=null},n},e.detachEvent=function(e){if(e){var t=e.split(":");this[t[0]].removeEvent(t[1])}},e.detachAllEvents=function(){for(var e in this)0===e.indexOf("ev_")&&delete this[e]},e=null},gantt.copy=function(e){var t,n,i;if(e&&"object"==typeof e){for(i={},n=[Array,Date,Number,String,Boolean],t=0;t<n.length;t++)e instanceof n[t]&&(i=t?new n[t](e):new n[t]);for(t in e)Object.prototype.hasOwnProperty.apply(e,[t])&&(i[t]=gantt.copy(e[t]))}return i||e},gantt.mixin=function(e,t,n){for(var i in t)(!e[i]||n)&&(e[i]=t[i]);return e},gantt.defined=function(e){return"undefined"!=typeof e},gantt.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed},gantt.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},function(){function e(e){var t=!1,n=!1;if(window.getComputedStyle){var i=window.getComputedStyle(e,null);t=i.display,n=i.visibility}else e.currentStyle&&(t=e.currentStyle.display,n=e.currentStyle.visibility);return"none"!=t&&"hidden"!=n}function t(e){return!isNaN(e.getAttribute("tabindex"))&&1*e.getAttribute("tabindex")>=0}function n(e){var t={a:!0,area:!0};return!t[e.nodeName.loLowerCase()]||!!e.getAttribute("href")}function i(e){var t={input:!0,select:!0,textarea:!0,button:!0,object:!0};return!t[e.nodeName.toLowerCase()]||!e.hasAttribute("disabled")}gantt._getFocusableNodes=function(r){for(var a=r.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),o=Array.prototype.slice.call(a,0),s=0;s<o.length;s++){var l=o[s],u=(t(l)||i(l)||n(l))&&e(l);u||(o.splice(s,1),s--)}return o}}(),gantt._get_position=function(e){var t=0,n=0;if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),r=document.body,a=document.documentElement,o=window.pageYOffset||a.scrollTop||r.scrollTop,s=window.pageXOffset||a.scrollLeft||r.scrollLeft,l=a.clientTop||r.clientTop||0,u=a.clientLeft||r.clientLeft||0;return t=i.top+o-l,n=i.left+s-u,{y:Math.round(t),x:Math.round(n),width:e.offsetWidth,height:e.offsetHeight}}for(;e;)t+=parseInt(e.offsetTop,10),n+=parseInt(e.offsetLeft,10),e=e.offsetParent;return{y:t,x:n,width:e.offsetWidth,height:e.offsetHeight}},gantt._detectScrollSize=function(){var e=document.createElement("div");e.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t},window.dhtmlx&&(dhtmlx.attaches||(dhtmlx.attaches={}),dhtmlx.attaches.attachGantt=function(e,t,n){var i=document.createElement("DIV");n=n||window.gantt,i.id="gantt_"+n.uid(),i.style.width="100%",i.style.height="100%",i.cmp="grid",document.body.appendChild(i),this.attachObject(i.id),this.dataType="gantt",this.dataObj=n;var r=this.vs[this.av];r.grid=n,n.init(i.id,e,t),i.firstChild.style.border="none",r.gridId=i.id,r.gridObj=i;var a="_viewRestore";return this.vs[this[a]()].grid}),"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachGantt=function(e,t,n){n=n||window.gantt;var i=document.createElement("DIV");return i.id="gantt_"+n.uid(),i.style.width="100%",i.style.height="100%",i.cmp="grid",document.body.appendChild(i),this.attachObject(i.id),this.dataType="gantt",this.dataObj=n,n.init(i.id,e,t),i.firstChild.style.border="none",i=null,this.callEvent("_onContentAttach",[]),this.dataObj}),gantt._eventable(gantt),gantt.config||(gantt.config={}),gantt.config||(gantt.config={}),gantt.templates||(gantt.templates={}),function(){gantt.mixin(gantt.config,{links:{finish_to_start:"0",start_to_start:"1",finish_to_finish:"2",start_to_finish:"3"},types:{task:"task",project:"project",milestone:"milestone"},duration_unit:"day",work_time:!1,correct_work_time:!1,skip_off_time:!1,cascade_delete:!0,autosize:!1,autosize_min_width:0,autoscroll:!0,autoscroll_speed:30,show_links:!0,show_task_cells:!0,static_background:!1,branch_loading:!1,show_loading:!1,show_chart:!0,show_grid:!0,min_duration:36e5,xml_date:"%d-%m-%Y %H:%i",api_date:"%d-%m-%Y %H:%i",start_on_monday:!0,server_utc:!1,show_progress:!0,fit_tasks:!1,select_task:!0,scroll_on_click:!0,preserve_scroll:!0,readonly:!1,date_grid:"%Y-%m-%d",drag_links:!0,drag_progress:!0,drag_resize:!0,drag_move:!0,drag_mode:{resize:"resize",progress:"progress",move:"move",ignore:"ignore"},round_dnd_dates:!0,link_wrapper_width:20,root_id:0,autofit:!1,columns:[{name:"text",tree:!0,width:"*",resize:!0},{name:"start_date",align:"center",resize:!0},{name:"duration",align:"center"},{name:"add",width:"44"}],step:1,scale_unit:"day",scale_offset_minimal:!0,subscales:[],inherit_scale_class:!1,time_step:60,duration_step:1,date_scale:"%d %M",task_date:"%d %F %Y",time_picker:"%H:%i",task_attribute:"task_id",link_attribute:"link_id",layer_attribute:"data-layer",buttons_left:["gantt_save_btn","gantt_cancel_btn"],_migrate_buttons:{dhx_save_btn:"gantt_save_btn",dhx_cancel_btn:"gantt_cancel_btn",dhx_delete_btn:"gantt_delete_btn"},buttons_right:["gantt_delete_btn"],lightbox:{sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"time",type:"duration",map_to:"auto"}],project_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",type:"duration",readonly:!0,map_to:"auto"}],milestone_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",type:"duration",single_date:!0,map_to:"auto"}]},drag_lightbox:!0,sort:!1,details_on_create:!0,details_on_dblclick:!0,initial_scroll:!0,task_scroll_offset:100,order_branch:!1,order_branch_free:!1,task_height:"full",min_column_width:70,min_grid_column_width:70,grid_resizer_column_attribute:"column_index",grid_resizer_attribute:"grid_resizer",keep_grid_width:!1,grid_resize:!1,show_unscheduled:!0,readonly_property:"readonly",editable_property:"editable",calendar_property:"calendar_id",resource_calendars:{},type_renderers:{},open_tree_initially:!1,optimize_render:!0,prevent_default_scroll:!1,show_errors:!0,wai_aria_attributes:!0,smart_scales:!0}),gantt.keys={edit_save:13,edit_cancel:27},gantt._init_template=function(e,t,n){var i=this._reg_templates||{};n=n||e,this.config[e]&&i[n]!=this.config[e]&&(t&&this.templates[n]||(this.templates[n]=this.date.date_to_str(this.config[e]),i[n]=this.config[e])),this._reg_templates=i},gantt._init_templates=function(){var e=gantt.locale.labels;e.gantt_save_btn=e.icon_save,e.gantt_cancel_btn=e.icon_cancel,e.gantt_delete_btn=e.icon_delete;var t=this.date.date_to_str,n=this.config;gantt._init_template("date_scale",!0),gantt._init_template("date_grid",!0,"grid_date_format"),gantt._init_template("task_date",!0),gantt.mixin(this.templates,{xml_date:this.date.str_to_date(n.xml_date,n.server_utc),xml_format:t(n.xml_date,n.server_utc),api_date:this.date.str_to_date(n.api_date),progress_text:function(e,t,n){return""},grid_header_class:function(e,t){return""},task_text:function(e,t,n){return n.text},task_class:function(e,t,n){return""},grid_row_class:function(e,t,n){return""},task_row_class:function(e,t,n){return""},task_cell_class:function(e,t){return""},scale_cell_class:function(e){return""},scale_row_class:function(e){return""},grid_indent:function(e){return"<div class='gantt_tree_indent'></div>"},grid_folder:function(e){return"<div class='gantt_tree_icon gantt_folder_"+(e.$open?"open":"closed")+"'></div>"},grid_file:function(e){return"<div class='gantt_tree_icon gantt_file'></div>"},grid_open:function(e){return"<div class='gantt_tree_icon gantt_"+(e.$open?"close":"open")+"'></div>"},grid_blank:function(e){return"<div class='gantt_tree_icon gantt_blank'></div>"},date_grid:function(e,t){return t&&gantt.isUnscheduledTask(t)&&gantt.config.show_unscheduled?gantt.templates.task_unscheduled_time(t):gantt.templates.grid_date_format(e)},task_time:function(e,t,n){return gantt.isUnscheduledTask(n)&&gantt.config.show_unscheduled?gantt.templates.task_unscheduled_time(n):gantt.templates.task_date(e)+" - "+gantt.templates.task_date(t)},task_unscheduled_time:function(e){return""},time_picker:t(n.time_picker),link_class:function(e){return""},link_description:function(e){var t=gantt.getTask(e.source),n=gantt.getTask(e.target);return"<b>"+t.text+"</b> &ndash;  <b>"+n.text+"</b>"},drag_link:function(e,t,n,i){e=gantt.getTask(e);var r=gantt.locale.labels,a="<b>"+e.text+"</b> "+(t?r.link_start:r.link_end)+"<br/>";return n&&(n=gantt.getTask(n),a+="<b> "+n.text+"</b> "+(i?r.link_start:r.link_end)+"<br/>"),a},drag_link_class:function(e,t,n,i){var r="";if(e&&n){var a=gantt.isLinkAllowed(e,n,t,i);r=" "+(a?"gantt_link_allow":"gantt_link_deny")}return"gantt_link_tooltip"+r},tooltip_date_format:gantt.date.date_to_str("%Y-%m-%d"),tooltip_text:function(e,t,n){return"<b>Task:</b> "+n.text+"<br/><b>Start date:</b> "+gantt.templates.tooltip_date_format(e)+"<br/><b>End date:</b> "+gantt.templates.tooltip_date_format(t)}}),this.callEvent("onTemplatesReady",[])}}(),gantt._click={},gantt._dbl_click={},gantt._context_menu={},gantt._on_click=function(e){e=e||window.event;var t=e.target||e.srcElement,n=gantt.locate(e),i=!0;if(null!==n?i=!gantt.checkEvent("onTaskClick")||gantt.callEvent("onTaskClick",[n,e]):gantt.callEvent("onEmptyClick",[e]),i){var r=gantt._find_ev_handler(e,t,gantt._click,n);if(!r)return;n&&gantt.getTask(n)&&gantt.config.select_task&&gantt.selectTask(n)}},gantt._on_contextmenu=function(e){e=e||window.event;var t=e.target||e.srcElement,n=gantt.locate(t),i=gantt.locate(t,gantt.config.link_attribute),r=!gantt.checkEvent("onContextMenu")||gantt.callEvent("onContextMenu",[n,i,e]);return r||(e.preventDefault?e.preventDefault():e.returnValue=!1),r},gantt._find_ev_handler=function(e,t,n,i){for(var r=!0;t;){var a=gantt._getClassName(t);if(a){a=a.split(" ");for(var o=0;o<a.length;o++)if(a[o]&&n[a[o]]){var s=n[a[o]].call(gantt,e,i,t);r=r&&!("undefined"!=typeof s&&s!==!0)}}t=t.parentNode}return r},gantt._on_dblclick=function(e){e=e||window.event;var t=e.target||e.srcElement,n=gantt.locate(e),i=!gantt.checkEvent("onTaskDblClick")||gantt.callEvent("onTaskDblClick",[n,e]);if(i){var r=gantt._find_ev_handler(e,t,gantt._dbl_click,n);if(!r)return;null!==n&&gantt.getTask(n)&&i&&gantt.config.details_on_dblclick&&gantt.showLightbox(n)}},gantt._on_mousemove=function(e){if(gantt.checkEvent("onMouseMove")){var t=gantt.locate(e);gantt._last_move_event=e,gantt.callEvent("onMouseMove",[t,e])}},gantt._DnD=function(e,t){this._obj=e,t&&(this._settings=t),gantt._eventable(this);var n=this.getInputMethods();this._drag_start_timer=null,gantt.attachEvent("onGanttScroll",gantt.bind(function(e,t){this.clearDragTimer()},this));for(var i=0;i<n.length;i++)gantt.bind(function(n){gantt.event(e,n.down,gantt.bind(function(i){t.original_target={target:i.target||i.srcElement},gantt.config.touch?(this.clearDragTimer(),this._drag_start_timer=setTimeout(gantt.bind(function(){this.dragStart(e,i,n)},this),gantt.config.touch_drag)):this.dragStart(e,i,n)},this)),gantt.event(document.body,n.up,gantt.bind(function(e){this.clearDragTimer()},this))},this)(n[i])},gantt._DnD.prototype={traceDragEvents:function(e,t){var n=gantt.bind(function(n){return this.dragMove(e,n,t.accessor)},this),i=(gantt.bind(function(t){return this.dragScroll(e,t)},this),gantt.bind(function(e){return e&&e.preventDefault&&e.preventDefault(),(e||event).cancelBubble=!0,!(!gantt.defined(this.config.updates_per_second)||gantt._checkTimeout(this,this.config.updates_per_second))||n(e)},this)),r=gantt.bind(function(n){return gantt.eventRemove(document.body,t.move,i),gantt.eventRemove(document.body,t.up,r),this.dragEnd(e)},this);gantt.event(document.body,t.move,i),gantt.event(document.body,t.up,r)},checkPositionChange:function(e){var t=e.x-this.config.pos.x,n=e.y-this.config.pos.y,i=Math.sqrt(Math.pow(Math.abs(t),2)+Math.pow(Math.abs(n),2));return i>this.config.sensitivity},initDnDMarker:function(){var e=this.config.marker=document.createElement("div");e.className="gantt_drag_marker",e.innerHTML="Dragging object",document.body.appendChild(e)},backupEventTarget:function(e,t){if(gantt.config.touch){var n=t(e),i=n.target||n.srcElement,r=i.cloneNode(!0);this.config.original_target={target:r},this.config.backup_element=i,i.parentNode.appendChild(r),i.style.display="none",document.body.appendChild(i)}},getInputMethods:function(){var e=[];if(e.push({move:"mousemove",down:"mousedown",up:"mouseup",accessor:function(e){return e}}),gantt.config.touch){var t=!0;try{document.createEvent("TouchEvent")}catch(e){t=!1}t?e.push({move:"touchmove",down:"touchstart",up:"touchend",accessor:function(e){return e.touches&&e.touches.length>1?null:e.touches[0]?{target:document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY),pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:e}}):window.navigator.pointerEnabled?e.push({move:"pointermove",down:"pointerdown",up:"pointerup",accessor:function(e){return"mouse"==e.pointerType?null:e}}):window.navigator.msPointerEnabled&&e.push({move:"MSPointerMove",down:"MSPointerDown",up:"MSPointerUp",accessor:function(e){return e.pointerType==e.MSPOINTER_TYPE_MOUSE?null:e}})}return e},clearDragTimer:function(){this._drag_start_timer&&(clearTimeout(this._drag_start_timer),this._drag_start_timer=null)},dragStart:function(e,t,n){this.config={obj:e,marker:null,started:!1,pos:this.getPosition(t),sensitivity:4},this._settings&&gantt.mixin(this.config,this._settings,!0),this.traceDragEvents(e,n),gantt._prevent_touch_scroll=!0,document.body.className+=" gantt_noselect",gantt.config.touch&&this.dragMove(e,t,n.accessor)},dragMove:function(e,t,n){var i=n(t);if(i){if(!this.config.marker&&!this.config.started){var r=this.getPosition(i);if(gantt.config.touch||this.checkPositionChange(r)){if(this.config.started=!0,this.config.ignore=!1,this.callEvent("onBeforeDragStart",[e,this.config.original_target])===!1)return this.config.ignore=!0,!0;this.backupEventTarget(t,n),this.initDnDMarker(),gantt._touch_feedback(),this.callEvent("onAfterDragStart",[e,this.config.original_target])}else this.config.ignore=!0}return this.config.ignore?void 0:(i.pos=this.getPosition(i),this.config.marker.style.left=i.pos.x+"px",this.config.marker.style.top=i.pos.y+"px",this.callEvent("onDragMove",[e,i]),!1)}},dragEnd:function(e){var t=this.config.backup_element;t&&t.parentNode&&t.parentNode.removeChild(t),gantt._prevent_touch_scroll=!1,this.config.marker&&(this.config.marker.parentNode.removeChild(this.config.marker),this.config.marker=null,this.callEvent("onDragEnd",[])),document.body.className=document.body.className.replace(" gantt_noselect","")},getPosition:function(e){var t=0,n=0;return e=e||window.event,e.pageX||e.pageY?(t=e.pageX,n=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:t,y:n}}},gantt._init_grid=function(){this._click.gantt_close=this.bind(function(e,t,n){return this.close(t),!1},this),this._click.gantt_open=this.bind(function(e,t,n){return this.open(t),!1},this),this._click.gantt_row=this.bind(function(e,t,n){if(null!==t){var i=this.getTask(t);this.config.scroll_on_click&&this.showDate(i.start_date),this.callEvent("onTaskRowClick",[t,n])}},this),this._click.gantt_grid_head_cell=this.bind(function(e,t,n){var i=n.getAttribute("column_id");if(this.callEvent("onGridHeaderClick",[i,e])){if("add"==i)return void this._click.gantt_add(e,this.config.root_id);if(this.config.sort){for(var r,a=i,o=0;o<this.config.columns.length;o++)if(this.config.columns[o].name==i){r=this.config.columns[o];break}if(r&&void 0!==r.sort&&r.sort!==!0&&(a=r.sort,!a))return;var s=this._sort&&this._sort.direction&&this._sort.name==i?this._sort.direction:"desc";s="desc"==s?"asc":"desc",this._sort={name:i,direction:s},this.sort(a,"desc"==s)}}},this),!this.config.sort&&this.config.order_branch&&this._init_dnd(),this._click.gantt_add=this.bind(function(e,t,n){if(!this.config.readonly){var i={};return this.createTask(i,t?t:this.config.root_id),!1}},this),this._init_resize&&this._init_resize()},gantt._render_grid=function(){this._calc_grid_width(),this._is_grid_visible()&&this._render_grid_header()},gantt._calc_grid_width=function(){for(var e=this.getGridColumns(),t=0,n=[],i=[],r=0;r<e.length;r++){var a=parseInt(e[r].width,10);window.isNaN(a)&&(a=50,n.push(r)),i[r]=a,t+=a}if(this.config.autofit||n.length){var o=this._get_grid_width()-t;if(o/(n.length>0?n.length:i.length>0?i.length:1),n.length>0)for(var s=o/(n.length?n.length:1),r=0;r<n.length;r++){var l=n[r];i[l]+=s}else for(var s=o/(i.length?i.length:1),r=0;r<i.length;r++)i[r]+=s;for(var r=0;r<i.length;r++)e[r].width=i[r]}else this.config.grid_width=t},gantt._render_grid_header=function(){for(var e=this.getGridColumns(),t=[],n=0,i=this.locale.labels,r=this.config.scale_height-2,a=0;a<e.length;a++){var o=a==e.length-1,s=e[a];s.name||(s.name=gantt.uid()+"");var l=1*s.width;o&&this._get_grid_width()>n+l&&(s.width=l=this._get_grid_width()-n),n+=l;var u=this._sort&&s.name==this._sort.name?"<div class='gantt_sort gantt_"+this._sort.direction+"'></div>":"",c=["gantt_grid_head_cell","gantt_grid_head_"+s.name,o?"gantt_last_cell":"",this.templates.grid_header_class(s.name,s)].join(" "),h="width:"+(l-(o?1:0))+"px;",f=s.label||i["column_"+s.name];f=f||"";var d=this._waiAria.gridScaleCellAttrString(s,f),p="<div class='"+c+"' style='"+h+"' "+d+" column_id='"+s.name+"'>"+f+u+"</div>";t.push(p)}this.$grid_scale.style.height=this.config.scale_height-1+"px",this.$grid_scale.style.lineHeight=r+"px",this.$grid_scale.style.width=n-1+"px",this.$grid_scale.innerHTML=t.join("")},gantt._render_grid_item=function(e){if(!gantt._is_grid_visible())return null;for(var t,n=this.getGridColumns(),i=[],r=0;r<n.length;r++){var a,o,s,l=r==n.length-1,u=n[r];if("add"==u.name){var c=this._waiAria.gridAddButtonAttrString(u);o="<div "+c+" class='gantt_add'></div>",s=""}else o=u.template?u.template(e):e[u.name],o instanceof Date&&(o=this.templates.date_grid(o,e)),s=o,o="<div class='gantt_tree_content'>"+o+"</div>";var h="gantt_cell"+(l?" gantt_last_cell":""),f="";if(u.tree){for(var d=0;d<e.$level;d++)f+=this.templates.grid_indent(e);t=this._has_children(e.id),t?(f+=this.templates.grid_open(e),f+=this.templates.grid_folder(e)):(f+=this.templates.grid_blank(e),f+=this.templates.grid_file(e))}var p="width:"+(u.width-(l?1:0))+"px;";this.defined(u.align)&&(p+="text-align:"+u.align+";");var c=this._waiAria.gridCellAttrString(u,s);a="<div class='"+h+"' style='"+p+"' "+c+">"+f+o+"</div>",i.push(a)}var h=gantt.getGlobalTaskIndex(e.id)%2===0?"":" odd";if(h+=e.$transparent?" gantt_transparent":"",h+=e.$dataprocessor_class?" "+e.$dataprocessor_class:"",this.templates.grid_row_class){var g=this.templates.grid_row_class.call(this,e.start_date,e.end_date,e);g&&(h+=" "+g)}this.getState().selected_task==e.id&&(h+=" gantt_selected");var m=document.createElement("div");return m.className="gantt_row"+h,m.style.height=this.config.row_height+"px",m.style.lineHeight=gantt.config.row_height+"px",m.setAttribute(this.config.task_attribute,e.id),this._waiAria.taskRowAttr(e,m),m.innerHTML=i.join(""),m},gantt.open=function(e){gantt._set_item_state(e,!0),this.callEvent("onTaskOpened",[e])},gantt.close=function(e){gantt._set_item_state(e,!1),this.callEvent("onTaskClosed",[e])},gantt._set_item_state=function(e,t){e&&this._pull[e]&&(this._pull[e].$open=t,gantt._refresh_on_toggle_element(e))},gantt._refresh_on_toggle_element=function(e){this.refreshData()},gantt._is_grid_visible=function(){return this.config.grid_width&&this.config.show_grid},gantt._get_grid_width=function(){return this._is_grid_visible()?this._is_chart_visible()?this.config.grid_width:this._x:0},gantt.moveTask=function(e,t,n){var i=arguments[3];if(i){if(i===e)return;n=this.getParent(i),t=this.getTaskIndex(i)}if(e!=n){n=n||this.config.root_id;var r=this.getTask(e),a=this.getParent(r.id),o=(this.getChildren(this.getParent(r.id)),this.getChildren(n));if(-1==t&&(t=o.length+1),a==n){var s=this.getTaskIndex(e);if(s==t)return}if(this.callEvent("onBeforeTaskMove",[e,n,t])!==!1){this._replace_branch_child(a,e),o=this.getChildren(n);var l=o[t];l?o=o.slice(0,t).concat([e]).concat(o.slice(t)):o.push(e),this.setParent(r,n),this._branches[n]=o;var u=this.calculateTaskLevel(r)-r.$level;r.$level+=u;for(var c=this._getTaskTree(e),h=0;h<c.length;h++){var f=this._pull[c[h]];f.$level+=u}1*t>0?i?r.$drop_target=(this.getTaskIndex(e)>this.getTaskIndex(i)?"next:":"")+i:r.$drop_target="next:"+gantt.getPrevSibling(e):o[1*t+1]?r.$drop_target=o[1*t+1]:r.$drop_target=n,this.callEvent("onAfterTaskMove",[e,n,t])!==!1&&this.refreshData()}}},gantt._init_dnd=function(){var e=new gantt._DnD(this.$grid_data,{updates_per_second:60});this.defined(this.config.dnd_sensitivity)&&(e.config.sensitivity=this.config.dnd_sensitivity),e.attachEvent("onBeforeDragStart",this.bind(function(t,n){var i=this._locateHTML(n);if(!i)return!1;this.hideQuickInfo&&this._hideQuickInfo();var r=this.locate(n),a=gantt.getTask(r);return!gantt._is_readonly(a)&&(e.config.initial_open_state=a.$open,!!this.callEvent("onRowDragStart",[r,n.target||n.srcElement,n])&&void 0)},this)),e.attachEvent("onAfterDragStart",this.bind(function(t,n){var i=this._locateHTML(n);e.config.marker.innerHTML=i.outerHTML,e.config.id=this.locate(n);var r=this.getTask(e.config.id);e.config.index=this.getTaskIndex(e.config.id),e.config.parent=r.parent,r.$open=!1,r.$transparent=!0,this.refreshData()},this)),e.lastTaskOfLevel=function(e){for(var t=gantt._order,n=gantt._pull,i=null,r=0,a=t.length;a>r;r++)n[t[r]].$level==e&&(i=n[t[r]]);return i?i.id:null},e._getGridPos=this.bind(function(e){var t=this._get_position(this.$grid_data),n=t.x,i=e.pos.y-10;i<t.y&&(i=t.y);var r=gantt.getTaskCount()*gantt.config.row_height;return i>t.y+r-this.config.row_height&&(i=t.y+r-this.config.row_height),t.x=n,t.y=i,t},this),e._getTargetY=this.bind(function(e){var t=this._get_position(this.$grid_data),n=e.pageY-t.y+gantt.getScrollState().y;return 0>n&&(n=0),n},this),e._getTaskByY=this.bind(function(e,t){e=e||0,gantt.config.smart_rendering&&(e+=this.$grid_data.scrollTop);var n=Math.floor(e/this.config.row_height);return n=n>t?n-1:n,n>this._order.length-1?null:this._order[n]},this),e.attachEvent("onDragMove",this.bind(function(t,n){function i(e,t){return!gantt.isChildOf(u.id,t.id)&&(e.$level==t.$level||gantt.config.order_branch_free)}var r=e.config,a=e._getGridPos(n);r.marker.style.left=a.x+10+"px",r.marker.style.top=a.y+"px";var o=this.getTask(e.config.id),s=e._getTargetY(n),l=e._getTaskByY(s,gantt.getGlobalTaskIndex(o.id));if(this.isTaskExists(l)||(l=e.lastTaskOfLevel(gantt.config.order_branch_free?o.$level:0),l==e.config.id&&(l=null)),this.isTaskExists(l)){var u=this.getTask(l);if(gantt.getGlobalTaskIndex(u.id)*this.config.row_height+this.config.row_height/2<s){var c=this.getGlobalTaskIndex(u.id),h=this._pull[this._order[c+1]];if(h){if(h.id==o.id)return this.config.order_branch_free&&this.isChildOf(o.id,u.id)&&1==this.getChildren(u.id).length?void this.moveTask(o.id,this.getTaskIndex(u.id)+1,this.getParent(u.id)):void 0;u=h}else if(h=this._pull[this._order[c]],i(h,o)&&h.id!=o.id)return void this.moveTask(o.id,-1,this.getParent(h.id))}else if(this.config.order_branch_free&&u.id!=o.id&&i(u,o)){if(!this.hasChild(u.id))return u.$open=!0,void this.moveTask(o.id,-1,u.id);if(this.getGlobalTaskIndex(u.id)||this.config.row_height/3<s)return}for(var c=this.getGlobalTaskIndex(u.id),f=this._pull[this._order[c-1]],d=1;(!f||f.id==u.id)&&c-d>=0;)f=this._pull[this._order[c-d]],d++;if(o.id==u.id)return;i(u,o)&&o.id!=u.id?this.moveTask(o.id,0,0,u.id):u.$level!=o.$level-1||gantt.getChildren(u.id).length?f&&i(f,o)&&o.id!=f.id&&this.moveTask(o.id,-1,this.getParent(f.id)):this.moveTask(o.id,0,u.id)}return!0},this)),e.attachEvent("onDragEnd",this.bind(function(){var t=this.getTask(e.config.id);t.$transparent=!1,t.$open=e.config.initial_open_state,this.callEvent("onBeforeRowDragEnd",[e.config.id,e.config.parent,e.config.index])===!1?(this.moveTask(e.config.id,e.config.index,e.config.parent),t.$drop_target=null):this.callEvent("onRowDragEnd",[e.config.id,t.$drop_target]),this.refreshData()},this))},gantt.getGridColumns=function(){return this.config.columns},gantt._has_children=function(e){return this.getChildren(e).length>0},function(){function e(e){s&&clearInterval(s);var n={x:e.clientX,y:e.clientY};s=setInterval(function(){t(n)},o)}function t(e){if(!gantt.getState().drag_mode&&!document.querySelector(".gantt_drag_marker"))return clearInterval(s),void(l=null);var t=gantt._get_position(gantt.$task),o=e.x-t.x,u=e.y-t.y,c=n(o,t.width,l?l.x:0,r),h=n(u,t.height,l?l.y:0,r);!h&&!c||l||(l={x:o,y:u},c=0,h=0),c*=gantt.config.scroll_speed||a,h*=gantt.config.scroll_speed||a,c&&h&&(Math.abs(c/5)>Math.abs(h)?h=0:Math.abs(h/5)>Math.abs(c)&&(c=0)),c||h?(l.started=!0,i(c,h)):clearInterval(s)}function n(e,t,n,i){return i>e&&(!l||l.started||n>e)?-1:i>t-e&&(!l||l.started||e>n)?1:0}function i(e,t){var n=gantt.getScrollState(),i=null,r=null;e&&(i=n.x+e),t&&(r=n.y+t),gantt.scrollTo(i,r)}var r=50,a=30,o=50,s=null,l=null;gantt.attachEvent("onGanttReady",function(){gantt.eventRemove(document.body,"mousemove",e),gantt.event(document.body,"mousemove",e)})}(),gantt._wbs={_needRecalc:!0,reset:function(){this._needRecalc=!0},_isRecalcNeeded:function(){return!this._isGroupSort()&&this._needRecalc},_isGroupSort:function(){return!(!gantt._groups||!gantt._groups.is_active())},_getWBSCode:function(e){return e?(this._isRecalcNeeded()&&this._calcWBS(),e.$virtual?"":this._isGroupSort()?e.$wbs||"":(e.$wbs||(this.reset(),this._calcWBS()),e.$wbs)):""},_setWBSCode:function(e,t){e.$wbs=t},getWBSCode:function(e){return this._getWBSCode(e)},_calcWBS:function(){if(this._isRecalcNeeded()){var e=!0;gantt.eachTask(function(t){if(e)return e=!1,void this._setWBSCode(t,"1");var n=gantt.getPrevSibling(t.id);if(null!==n){var i=gantt.getTask(n).$wbs;i&&(i=i.split("."),i[i.length-1]++,this._setWBSCode(t,i.join(".")));
}else{var r=gantt.getParent(t.id);this._setWBSCode(t,gantt.getTask(r).$wbs+".1")}},gantt.config.root_id,this),this._needRecalc=!1}}},gantt.getWBSCode=function(e){return gantt._wbs.getWBSCode(e)},gantt.attachEvent("onAfterTaskMove",function(){return gantt._wbs.reset(),!0}),gantt.attachEvent("onBeforeParse",function(){return gantt._wbs.reset(),!0}),gantt.attachEvent("onAfterTaskDelete",function(){return gantt._wbs.reset(),!0}),gantt.attachEvent("onAfterTaskAdd",function(){return gantt._wbs.reset(),!0}),function(){var e=gantt._has_children;gantt._has_children=function(t){return!!e.apply(this,arguments)||!!this.isTaskExists(t)&&this.getTask(t).$has_child}}(),gantt._need_dynamic_loading=function(e){if(gantt.config.branch_loading&&gantt._load_url){var t=gantt.getUserData(e,"was_rendered");if(!t&&gantt._has_children(e)&&!gantt.hasChild(e))return!0}return!1},gantt._refresh_on_toggle_element=function(e){gantt._need_dynamic_loading(e)&&gantt.getTask(e).$open||this.refreshData()},gantt.attachEvent("onTaskOpened",function(e){if(gantt.config.branch_loading&&gantt._load_url&&gantt._need_dynamic_loading(e)){var t=gantt._load_url;t=t.replace(/(\?|&)?parent_id=.+&?/,"");var n=t.indexOf("?")>=0?"&":"?",i=0;this._cached_scroll_pos&&this._cached_scroll_pos.y&&(i=Math.max(this._cached_scroll_pos.y,0)),gantt.load(t+n+"parent_id="+encodeURIComponent(e),this._load_type,function(){i&&gantt.scrollTo(null,i)}),gantt.setUserData(e,"was_rendered",!0)}}),gantt.getGridColumns=function(){for(var e=gantt.config.columns,t=[],n=0;n<e.length;n++)e[n].hide||t.push(e[n]);return t},gantt.getGridColumn=function(e){for(var t=gantt.config.columns,n=0;n<t.length;n++)if(t[n].name==e)return t[n];return null},function(){function e(e){return(e+"").replace(i," ").replace(r," ")}function t(e){return(e+"").replace(a,"&#39;")}function n(){return!gantt.config.wai_aria_attributes}var i=new RegExp("<(?:.|\n)*?>","gm"),r=new RegExp(" +","gm"),a=new RegExp("'","gm");gantt._waiAria={getAttributeString:function(n){var i=[" "];for(var r in n){var a=t(e(n[r]));i.push(r+"='"+a+"'")}return i.push(" "),i.join(" ")},getTimelineCellAttr:function(e){return gantt._waiAria.getAttributeString({"aria-label":e})},_taskCommonAttr:function(t,n){n.setAttribute("aria-label",e(gantt.templates.tooltip_text(t.start_date,t.end_date,t))),gantt._is_readonly(t)&&n.setAttribute("aria-readonly",!0),t.$dataprocessor_class&&n.setAttribute("aria-busy",!0),n.setAttribute("aria-selected",gantt.getState().selected_task==t.id||gantt.isSelectedTask&&gantt.isSelectedTask(t.id)?"true":"false")},setTaskBarAttr:function(e,t){this._taskCommonAttr(e,t),!gantt._is_readonly(e)&&gantt.config.drag_move&&(e.id!=gantt.getState().drag_id?t.setAttribute("aria-grabbed",!1):t.setAttribute("aria-grabbed",!0))},taskRowAttr:function(e,t){this._taskCommonAttr(e,t),!gantt._is_readonly(e)&&gantt.config.order_branch&&t.setAttribute("aria-grabbed",!1),t.setAttribute("role","row"),t.setAttribute("aria-level",e.$level),gantt._has_children(e.id)&&t.setAttribute("aria-expanded",e.$open?"true":"false")},linkAttr:function(t,n){var i=gantt.config.links,r=t.type==i.finish_to_start||t.type==i.start_to_start,a=t.type==i.start_to_start||t.type==i.start_to_finish,o=gantt.locale.labels.link+" "+gantt.templates.drag_link(t.source,a,t.target,r);n.setAttribute("aria-label",e(o)),gantt._is_readonly(t)&&n.setAttribute("aria-readonly",!0)},gridSeparatorAttr:function(e){e.setAttribute("role","separator")},lightboxHiddenAttr:function(e){e.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(e){e.setAttribute("aria-hidden","false")},lightboxAttr:function(e){e.setAttribute("role","dialog"),e.setAttribute("aria-hidden","true"),e.firstChild.setAttribute("role","heading")},lightboxButtonAttrString:function(e){return this.getAttributeString({role:"button","aria-label":gantt.locale.labels[e],tabindex:"0"})},lightboxHeader:function(e,t){e.setAttribute("aria-label",t)},lightboxSelectAttrString:function(e){var t="";switch(e){case"%Y":t=gantt.locale.labels.years;break;case"%m":t=gantt.locale.labels.months;break;case"%d":t=gantt.locale.labels.days;break;case"%H:%i":t=gantt.locale.labels.hours+gantt.locale.labels.minutes}return gantt._waiAria.getAttributeString({"aria-label":t})},lightboxDurationInputAttrString:function(e){return this.getAttributeString({"aria-label":gantt.locale.labels.column_duration,"aria-valuemin":"0"})},gridAttrString:function(){return[" role='treegrid'",gantt.config.multiselect?"aria-multiselectable='true'":"aria-multiselectable='false'"," "].join(" ")},gridScaleRowAttrString:function(){return"role='row'"},gridScaleCellAttrString:function(e,t){var n="";if("add"==e.name)n=this.getAttributeString({role:"button","aria-label":gantt.locale.labels.new_task});else{var i={role:"columnheader","aria-label":t};gantt._sort&&gantt._sort.name==e.name&&("asc"==gantt._sort.direction?i["aria-sort"]="ascending":i["aria-sort"]="descending"),n=this.getAttributeString(i)}return n},gridDataAttrString:function(){return"role='rowgroup'"},gridCellAttrString:function(e,t){return this.getAttributeString({role:"gridcell","aria-label":t})},gridAddButtonAttrString:function(e){return this.getAttributeString({role:"button","aria-label":gantt.locale.labels.new_task})},messageButtonAttrString:function(e){return"tabindex='0' role='button' aria-label='"+e+"'"},messageInfoAttr:function(e){e.setAttribute("role","alert")},messageModalAttr:function(e,t){e.setAttribute("role","dialog"),t&&e.setAttribute("aria-labelledby",t)},quickInfoAttr:function(e){e.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' "},quickInfoHeader:function(e,t){e.setAttribute("aria-label",t)},quickInfoButtonAttrString:function(e){return gantt._waiAria.getAttributeString({role:"button","aria-label":e,tabindex:"0"})},tooltipAttr:function(e){e.setAttribute("role","tooltip")},tooltipVisibleAttr:function(e){e.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(e){e.setAttribute("aria-hidden","true")}};for(var o in gantt._waiAria)gantt._waiAria[o]=function(e){return function(){return n()?"":e.apply(this,arguments)}}(gantt._waiAria[o])}(),gantt._scale_helpers={getSum:function(e,t,n){void 0===n&&(n=e.length-1),void 0===t&&(t=0);for(var i=0,r=t;n>=r;r++)i+=e[r];return i},setSumWidth:function(e,t,n,i){var r=t.width;void 0===i&&(i=r.length-1),void 0===n&&(n=0);var a=i-n+1;if(!(n>r.length-1||0>=a||i>r.length-1)){var o=this.getSum(r,n,i),s=e-o;this.adjustSize(s,r,n,i),this.adjustSize(-s,r,i+1),t.full_width=this.getSum(r)}},splitSize:function(e,t){for(var n=[],i=0;t>i;i++)n[i]=0;return this.adjustSize(e,n),n},adjustSize:function(e,t,n,i){n||(n=0),void 0===i&&(i=t.length-1);for(var r=i-n+1,a=this.getSum(t,n,i),o=0,s=n;i>=s;s++){var l=Math.floor(e*(a?t[s]/a:1/r));a-=t[s],e-=l,r--,t[s]+=l,o+=l}t[t.length-1]+=e},sortScales:function(e){function t(e,t){var n=new Date(1970,0,1);return gantt.date.add(n,t,e)-n}e.sort(function(e,n){return t(e.unit,e.step)<t(n.unit,n.step)?1:t(e.unit,e.step)>t(n.unit,n.step)?-1:0});for(var n=0;n<e.length;n++)e[n].index=n},primaryScale:function(){return gantt._init_template("date_scale"),{unit:gantt.config.scale_unit,step:gantt.config.step,template:gantt.templates.date_scale,date:gantt.config.date_scale,css:gantt.templates.scale_cell_class}},prepareConfigs:function(e,t,n,i){for(var r=this.splitSize(i,e.length),a=n,o=[],s=e.length-1;s>=0;s--){var l=s==e.length-1,u=this.initScaleConfig(e[s]);l&&this.processIgnores(u),this.initColSizes(u,t,a,r[s]),this.limitVisibleRange(u),l&&(a=u.full_width),o.unshift(u)}for(var s=0;s<o.length-1;s++)this.alineScaleColumns(o[o.length-1],o[s]);for(var s=0;s<o.length;s++)this.setPosSettings(o[s]);return o},setPosSettings:function(e){for(var t=0,n=e.trace_x.length;n>t;t++)e.left.push((e.width[t-1]||0)+(e.left[t-1]||0))},_ignore_time_config:function(e,t){if(this.config.skip_off_time){for(var n=!0,i=e,r=0;r<t.step;r++)r&&(i=gantt.date.add(e,r,t.unit)),n=n&&!this.isWorkTime(i,t.unit);return n}return!1},processIgnores:function(e){e.ignore_x={},e.display_count=e.count},initColSizes:function(e,t,n,i){var r=n;e.height=i;var a=void 0===e.display_count?e.count:e.display_count;a||(a=1),e.col_width=Math.floor(r/a),t&&e.col_width<t&&(e.col_width=t,r=e.col_width*a),e.width=[];for(var o=e.ignore_x||{},s=0;s<e.trace_x.length;s++)if(o[e.trace_x[s].valueOf()]||e.display_count==e.count)e.width[s]=0;else{var l=1;if("month"==e.unit){var u=Math.round((gantt.date.add(e.trace_x[s],e.step,e.unit)-e.trace_x[s])/864e5);l=u}e.width[s]=l}this.adjustSize(r-this.getSum(e.width),e.width),e.full_width=this.getSum(e.width)},initScaleConfig:function(e){var t=gantt.mixin({count:0,col_width:0,full_width:0,height:0,width:[],left:[],trace_x:[],trace_indexes:{}},e);return this.eachColumn(e.unit,e.step,function(e){t.count++,t.trace_x.push(new Date(e)),t.trace_indexes[e.valueOf()]=t.trace_x.length-1}),t},iterateScales:function(e,t,n,i,r){for(var a=t.trace_x,o=e.trace_x,s=n||0,l=i||o.length-1,u=0,c=1;c<a.length;c++){var h=e.trace_indexes[+a[c]];void 0!==h&&l>=h&&(r&&r.apply(this,[u,c,s,h]),s=h,u=c)}},alineScaleColumns:function(e,t,n,i){this.iterateScales(e,t,n,i,function(n,i,r,a){var o=this.getSum(e.width,r,a-1),s=this.getSum(t.width,n,i-1);s!=o&&this.setSumWidth(o,t,n,i-1)})},eachColumn:function(e,t,n){var i=new Date(gantt._min_date),r=new Date(gantt._max_date);gantt.date[e+"_start"]&&(i=gantt.date[e+"_start"](i));var a=new Date(i);for(+a>=+r&&(r=gantt.date.add(a,t,e));+r>+a;){n.call(this,new Date(a));var o=a.getTimezoneOffset();a=gantt.date.add(a,t,e),a=gantt._correct_dst_change(a,o,t,e),gantt.date[e+"_start"]&&(a=gantt.date[e+"_start"](a))}},limitVisibleRange:function(e){var t=e.trace_x,n=0,i=e.width.length-1,r=0;if(+t[0]<+gantt._min_date&&n!=i){var a=Math.floor(e.width[0]*((t[1]-gantt._min_date)/(t[1]-t[0])));r+=e.width[0]-a,e.width[0]=a,t[0]=new Date(gantt._min_date)}var o=t.length-1,s=t[o],l=gantt.date.add(s,e.step,e.unit);if(+l>+gantt._max_date&&o>0){var a=e.width[o]-Math.floor(e.width[o]*((l-gantt._max_date)/(l-s)));r+=e.width[o]-a,e.width[o]=a}if(r){for(var u=this.getSum(e.width),c=0,h=0;h<e.width.length;h++){var f=Math.floor(r*(e.width[h]/u));e.width[h]+=f,c+=f}this.adjustSize(r-c,e.width)}}},gantt._tasks_dnd={drag:null,_events:{before_start:{},before_finish:{},after_finish:{}},_handlers:{},init:function(){this.clear_drag_state();var e=gantt.config.drag_mode;this.set_actions();var t={before_start:"onBeforeTaskDrag",before_finish:"onBeforeTaskChanged",after_finish:"onAfterTaskDrag"};for(var n in this._events)for(var i in e)this._events[n][i]=t[n];this._handlers[e.move]=this._move,this._handlers[e.resize]=this._resize,this._handlers[e.progress]=this._resize_progress},set_actions:function(){var e=gantt.$task_data;gantt.event(e,"mousemove",gantt.bind(function(e){this.on_mouse_move(e||event)},this)),gantt.event(e,"mousedown",gantt.bind(function(e){this.on_mouse_down(e||event)},this)),gantt.event(e,"mouseup",gantt.bind(function(e){this.on_mouse_up(e||event)},this))},clear_drag_state:function(){this.drag={id:null,mode:null,pos:null,start_x:null,start_y:null,obj:null,left:null}},_resize:function(e,t,n){var i=gantt.config,r=this._drag_task_coords(e,n);n.left?(e.start_date=gantt.dateFromPos(r.start+t),e.start_date||(e.start_date=new Date(gantt.getState().min_date))):(e.end_date=gantt.dateFromPos(r.end+t),e.end_date||(e.end_date=new Date(gantt.getState().max_date))),e.end_date-e.start_date<i.min_duration&&(n.left?e.start_date=gantt.calculateEndDate({start_date:e.end_date,duration:-1,task:e}):e.end_date=gantt.calculateEndDate({start_date:e.start_date,duration:1,task:e})),gantt._init_task_timing(e)},_resize_progress:function(e,t,n){var i=this._drag_task_coords(e,n),r=Math.max(0,n.pos.x-i.start);e.progress=Math.min(1,r/(i.end-i.start))},_move:function(e,t,n){var i=this._drag_task_coords(e,n),r=gantt.dateFromPos(i.start+t),a=gantt.dateFromPos(i.end+t);r?a?(e.start_date=r,e.end_date=a):(e.end_date=new Date(gantt.getState().max_date),e.start_date=gantt.dateFromPos(gantt.posFromDate(e.end_date)-(i.end-i.start))):(e.start_date=new Date(gantt.getState().min_date),e.end_date=gantt.dateFromPos(gantt.posFromDate(e.start_date)+(i.end-i.start)))},_drag_task_coords:function(e,t){var n=t.obj_s_x=t.obj_s_x||gantt.posFromDate(e.start_date),i=t.obj_e_x=t.obj_e_x||gantt.posFromDate(e.end_date);return{start:n,end:i}},_mouse_position_change:function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},_is_number:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},on_mouse_move:function(e){if(this.drag.start_drag){var t=gantt._get_mouse_pos(e),n=this.drag.start_drag.start_x,i=this.drag.start_drag.start_y;(Date.now()-this.drag.timestamp>50||this._is_number(n)&&this._is_number(i)&&this._mouse_position_change({x:n,y:i},t)>20)&&this._start_dnd(e)}var r=this.drag;if(r.mode){if(!gantt._checkTimeout(this,40))return;this._update_on_move(e)}},_update_on_move:function(e){var t=this.drag;if(t.mode){var n=gantt._get_mouse_pos(e);if(t.pos&&t.pos.x==n.x)return;t.pos=n;var i=gantt.dateFromPos(n.x);if(!i||isNaN(i.getTime()))return;var r=n.x-t.start_x,a=gantt.getTask(t.id);if(this._handlers[t.mode]){var o=gantt.mixin({},a),s=gantt.mixin({},a);this._handlers[t.mode].apply(this,[s,r,t]),gantt.mixin(a,s,!0),gantt.callEvent("onTaskDrag",[a.id,t.mode,s,o,e]),gantt.mixin(a,s,!0),gantt._update_parents(t.id),gantt.refreshTask(t.id)}}},on_mouse_down:function(e,t){if(2!=e.button){var n=gantt.locate(e),i=null;if(gantt.isTaskExists(n)&&(i=gantt.getTask(n)),!gantt._is_readonly(i)&&!this.drag.mode){this.clear_drag_state(),t=t||e.target||e.srcElement;var r=gantt._getClassName(t);if(!r||!this._get_drag_mode(r))return t.parentNode?this.on_mouse_down(e,t.parentNode):void 0;var a=this._get_drag_mode(r);if(a)if(a.mode&&a.mode!=gantt.config.drag_mode.ignore&&gantt.config["drag_"+a.mode]){if(n=gantt.locate(t),i=gantt.copy(gantt.getTask(n)||{}),gantt._is_readonly(i))return this.clear_drag_state(),!1;if(gantt._is_flex_task(i)&&a.mode!=gantt.config.drag_mode.progress)return void this.clear_drag_state();a.id=n;var o=gantt._get_mouse_pos(e);a.start_x=o.x,a.start_y=o.y,a.obj=i,this.drag.start_drag=a,this.drag.timestamp=Date.now()}else this.clear_drag_state();else if(gantt.checkEvent("onMouseDown")&&gantt.callEvent("onMouseDown",[r.split(" ")[0]])&&t.parentNode)return this.on_mouse_down(e,t.parentNode)}}},_fix_dnd_scale_time:function(e,t){function n(e){gantt.isWorkTime(e.start_date,void 0,e)||(e.start_date=gantt.calculateEndDate({start_date:e.start_date,duration:-1,unit:gantt.config.duration_unit,task:e}))}function i(e){gantt.isWorkTime(new Date(e.end_date-1),void 0,e)||(e.end_date=gantt.calculateEndDate({start_date:e.end_date,duration:1,unit:gantt.config.duration_unit,task:e}))}var r=gantt._tasks.unit,a=gantt._tasks.step;gantt.config.round_dnd_dates||(r="minute",a=gantt.config.time_step),t.mode==gantt.config.drag_mode.resize?t.left?(e.start_date=gantt.roundDate({date:e.start_date,unit:r,step:a}),n(e)):(e.end_date=gantt.roundDate({date:e.end_date,unit:r,step:a}),i(e)):t.mode==gantt.config.drag_mode.move&&(e.start_date=gantt.roundDate({date:e.start_date,unit:r,step:a}),n(e),e.end_date=gantt.calculateEndDate(e))},_fix_working_times:function(e,t){var t=t||{mode:gantt.config.drag_mode.move};gantt.config.work_time&&gantt.config.correct_work_time&&(t.mode==gantt.config.drag_mode.resize?t.left?e.start_date=gantt.getClosestWorkTime({date:e.start_date,dir:"future",task:e}):e.end_date=gantt.getClosestWorkTime({date:e.end_date,dir:"past",task:e}):t.mode==gantt.config.drag_mode.move&&gantt.correctTaskWorkTime(e))},on_mouse_up:function(e){var t=this.drag;if(t.mode&&t.id){var n=gantt.getTask(t.id);if(gantt.config.work_time&&gantt.config.correct_work_time&&this._fix_working_times(n,t),this._fix_dnd_scale_time(n,t),gantt._init_task_timing(n),this._fireEvent("before_finish",t.mode,[t.id,t.mode,gantt.copy(t.obj),e])){var i=t.id;gantt._init_task_timing(n),this.clear_drag_state(),gantt.updateTask(n.id),this._fireEvent("after_finish",t.mode,[i,t.mode,e])}else t.obj._dhx_changed=!1,gantt.mixin(n,t.obj,!0),gantt.updateTask(n.id)}this.clear_drag_state()},_get_drag_mode:function(e){var t=gantt.config.drag_mode,n=(e||"").split(" "),i=n[0],r={mode:null,left:null};switch(i){case"gantt_task_line":case"gantt_task_content":r.mode=t.move;break;case"gantt_task_drag":r.mode=t.resize,n[1]&&-1!==n[1].indexOf("left",n[1].length-"left".length)?r.left=!0:r.left=!1;break;case"gantt_task_progress_drag":r.mode=t.progress;break;case"gantt_link_control":case"gantt_link_point":r.mode=t.ignore;break;default:r=null}return r},_start_dnd:function(e){var t=this.drag=this.drag.start_drag;delete t.start_drag;var n=gantt.config,i=t.id;n["drag_"+t.mode]&&gantt.callEvent("onBeforeDrag",[i,t.mode,e])&&this._fireEvent("before_start",t.mode,[i,t.mode,e])?(delete t.start_drag,gantt.callEvent("onTaskDragStart",[])):this.clear_drag_state()},_fireEvent:function(e,t,n){gantt.assert(this._events[e],"Invalid stage:{"+e+"}");var i=this._events[e][t];return gantt.assert(i,"Unknown after drop mode:{"+t+"}"),gantt.assert(n,"Invalid event arguments"),!gantt.checkEvent(i)||gantt.callEvent(i,n)}},gantt.roundTaskDates=function(e){var t=gantt._tasks_dnd.drag;t||(t={mode:gantt.config.drag_mode.move}),gantt._tasks_dnd._fix_dnd_scale_time(e,t)},gantt._render_link=function(e){for(var t=this.getLink(e),n=gantt._get_link_renderers(),i=0;i<n.length;i++)n[i].render_item(t)},gantt._get_link_type=function(e,t){var n=null;return e&&t?n=gantt.config.links.start_to_start:!e&&t?n=gantt.config.links.finish_to_start:e||t?e&&!t&&(n=gantt.config.links.start_to_finish):n=gantt.config.links.finish_to_finish,n},gantt.isLinkAllowed=function(e,t,n,i){var r=null;if(r="object"==typeof e?e:{source:e,target:t,type:this._get_link_type(n,i)},!r)return!1;if(!(r.source&&r.target&&r.type))return!1;if(r.source==r.target)return!1;var a=!0;return this.checkEvent("onLinkValidation")&&(a=this.callEvent("onLinkValidation",[r])),a},gantt._render_link_element=function(e){var t=this._path_builder.get_points(e),n=gantt._drawer,i=n.get_lines(t),r=document.createElement("div"),a="gantt_task_link";e.color&&(a+=" gantt_link_inline_color");var o=this.templates.link_class?this.templates.link_class(e):"";o&&(a+=" "+o),this.config.highlight_critical_path&&this.isCriticalLink&&this.isCriticalLink(e)&&(a+=" gantt_critical_link"),r.className=a,r.setAttribute(gantt.config.link_attribute,e.id);for(var s=0;s<i.length;s++){s==i.length-1&&(i[s].size-=gantt.config.link_arrow_size);var l=n.render_line(i[s],i[s+1]);e.color&&(l.firstChild.style.backgroundColor=e.color),r.appendChild(l)}var u=i[i.length-1].direction,c=gantt._render_link_arrow(t[t.length-1],u);return e.color&&(c.style.borderColor=e.color),r.appendChild(c),gantt._waiAria.linkAttr(e,r),r},gantt._render_link_arrow=function(e,t){var n=document.createElement("div"),i=gantt._drawer,r=e.y,a=e.x,o=gantt.config.link_arrow_size,s=gantt.config.row_height,l="gantt_link_arrow gantt_link_arrow_"+t;switch(t){case i.dirs.right:r-=(o-s)/2,a-=o;break;case i.dirs.left:r-=(o-s)/2;break;case i.dirs.up:a-=o;break;case i.dirs.down:r+=2*o,a-=o}return n.style.cssText=["top:"+r+"px","left:"+a+"px"].join(";"),n.className=l,n},gantt._drawer={current_pos:null,dirs:{left:"left",right:"right",up:"up",down:"down"},path:[],clear:function(){this.current_pos=null,this.path=[]},point:function(e){this.current_pos=gantt.copy(e)},get_lines:function(e){this.clear(),this.point(e[0]);for(var t=1;t<e.length;t++)this.line_to(e[t]);return this.get_path()},line_to:function(e){var t=gantt.copy(e),n=this.current_pos,i=this._get_line(n,t);this.path.push(i),this.current_pos=t},get_path:function(){return this.path},get_wrapper_sizes:function(e){var t,n=gantt.config.link_wrapper_width,i=(gantt.config.link_line_width,e.y+(gantt.config.row_height-n)/2);switch(e.direction){case this.dirs.left:t={top:i,height:n,lineHeight:n,left:e.x-e.size-n/2,width:e.size+n};break;case this.dirs.right:t={top:i,lineHeight:n,height:n,left:e.x-n/2,width:e.size+n};break;case this.dirs.up:t={top:i-e.size,lineHeight:e.size+n,height:e.size+n,left:e.x-n/2,width:n};break;case this.dirs.down:t={top:i,lineHeight:e.size+n,height:e.size+n,left:e.x-n/2,width:n}}return t},get_line_sizes:function(e){var t,n=gantt.config.link_line_width,i=gantt.config.link_wrapper_width,r=e.size+n;switch(e.direction){case this.dirs.left:case this.dirs.right:t={height:n,width:r,marginTop:(i-n)/2,marginLeft:(i-n)/2};break;case this.dirs.up:case this.dirs.down:t={height:r,width:n,marginTop:(i-n)/2,marginLeft:(i-n)/2}}return t},render_line:function(e){var t=this.get_wrapper_sizes(e),n=document.createElement("div");n.style.cssText=["top:"+t.top+"px","left:"+t.left+"px","height:"+t.height+"px","width:"+t.width+"px"].join(";"),n.className="gantt_line_wrapper";var i=this.get_line_sizes(e),r=document.createElement("div");return r.style.cssText=["height:"+i.height+"px","width:"+i.width+"px","margin-top:"+i.marginTop+"px","margin-left:"+i.marginLeft+"px"].join(";"),r.className="gantt_link_line_"+e.direction,n.appendChild(r),n},_get_line:function(e,t){var n=this.get_direction(e,t),i={x:e.x,y:e.y,direction:this.get_direction(e,t)};return n==this.dirs.left||n==this.dirs.right?i.size=Math.abs(e.x-t.x):i.size=Math.abs(e.y-t.y),i},get_direction:function(e,t){var n=0;return n=t.x<e.x?this.dirs.left:t.x>e.x?this.dirs.right:t.y>e.y?this.dirs.down:this.dirs.up}},gantt._y_from_ind=function(e){return e*gantt.config.row_height},gantt._path_builder={path:[],clear:function(){this.path=[]},current:function(){return this.path[this.path.length-1]},point:function(e){return e?(this.path.push(gantt.copy(e)),e):this.current()},point_to:function(e,t,n){n=n?{x:n.x,y:n.y}:gantt.copy(this.point());var i=gantt._drawer.dirs;switch(e){case i.left:n.x-=t;break;case i.right:n.x+=t;break;case i.up:n.y-=t;break;case i.down:n.y+=t}return this.point(n)},get_points:function(e){var t=this.get_endpoint(e),n=gantt.config,i=t.e_y-t.y,r=t.e_x-t.x,a=gantt._drawer.dirs;this.clear(),this.point({x:t.x,y:t.y});var o=2*n.link_arrow_size,s=t.e_x>t.x;if(e.type==gantt.config.links.start_to_start)this.point_to(a.left,o),s?(this.point_to(a.down,i),this.point_to(a.right,r)):(this.point_to(a.right,r),this.point_to(a.down,i)),this.point_to(a.right,o);else if(e.type==gantt.config.links.finish_to_start)if(s=t.e_x>t.x+2*o,this.point_to(a.right,o),s)r-=o,this.point_to(a.down,i),this.point_to(a.right,r);else{r-=2*o;var l=i>0?1:-1;this.point_to(a.down,l*(n.row_height/2)),this.point_to(a.right,r),this.point_to(a.down,l*(Math.abs(i)-n.row_height/2)),this.point_to(a.right,o)}else if(e.type==gantt.config.links.finish_to_finish)this.point_to(a.right,o),s?(this.point_to(a.right,r),this.point_to(a.down,i)):(this.point_to(a.down,i),this.point_to(a.right,r)),this.point_to(a.left,o);else if(e.type==gantt.config.links.start_to_finish)if(s=t.e_x>t.x-2*o,this.point_to(a.left,o),s){r+=2*o;var l=i>0?1:-1;this.point_to(a.down,l*(n.row_height/2)),this.point_to(a.right,r),this.point_to(a.down,l*(Math.abs(i)-n.row_height/2)),this.point_to(a.left,o)}else r+=o,this.point_to(a.down,i),this.point_to(a.right,r);return this.path},get_endpoint:function(e){var t=gantt.config.links,n=!1,i=!1;e.type==t.start_to_start?n=i=!0:e.type==t.finish_to_finish?n=i=!1:e.type==t.finish_to_start?(n=!1,i=!0):e.type==t.start_to_finish?(n=!0,i=!1):gantt.assert(!1,"Invalid link type");var r=gantt._get_task_visible_pos(gantt._pull[e.source],n),a=gantt._get_task_visible_pos(gantt._pull[e.target],i);return{x:r.x,e_x:a.x,y:r.y,e_y:a.y}}},gantt._init_links_dnd=function(){function e(e,t,n){var i=gantt._get_task_pos(e,!!t);return i.y+=gantt.config.row_height/2,n=n||0,i.x+=(t?-1:1)*n,i}function t(e){var t=i(),n=["gantt_link_tooltip"];t.from&&t.to&&(gantt.isLinkAllowed(t.from,t.to,t.from_start,t.to_start)?n.push("gantt_allowed_link"):n.push("gantt_invalid_link"));var r=gantt.templates.drag_link_class(t.from,t.from_start,t.to,t.to_start);r&&n.push(r);var a="<div class='"+r+"'>"+gantt.templates.drag_link(t.from,t.from_start,t.to,t.to_start)+"</div>";e.innerHTML=a}function n(e,t){e.style.left=t.x+5+"px",e.style.top=t.y+5+"px"}function i(){return{from:gantt._link_source_task,to:gantt._link_target_task,from_start:gantt._link_source_task_start,to_start:gantt._link_target_task_start}}function r(){gantt._link_source_task=gantt._link_source_task_start=gantt._link_target_task=null,gantt._link_target_task_start=!0}function a(e,t,n,r){var a=l(),u=i(),c=["gantt_link_direction"];gantt.templates.link_direction_class&&c.push(gantt.templates.link_direction_class(u.from,u.from_start,u.to,u.to_start));var h=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2));if(h=Math.max(0,h-3)){a.className=c.join(" ");var f=(r-t)/(n-e),d=Math.atan(f);2==s(e,n,t,r)?d+=Math.PI:3==s(e,n,t,r)&&(d-=Math.PI);var p=Math.sin(d),g=Math.cos(d),m=Math.round(t),v=Math.round(e),_=["-webkit-transform: rotate("+d+"rad)","-moz-transform: rotate("+d+"rad)","-ms-transform: rotate("+d+"rad)","-o-transform: rotate("+d+"rad)","transform: rotate("+d+"rad)","width:"+Math.round(h)+"px"];if(-1!=window.navigator.userAgent.indexOf("MSIE 8.0")){_.push('-ms-filter: "'+o(p,g)+'"');var y=Math.abs(Math.round(e-n)),b=Math.abs(Math.round(r-t));switch(s(e,n,t,r)){case 1:m-=b;break;case 2:v-=y,m-=b;break;case 3:v-=y}}_.push("top:"+m+"px"),_.push("left:"+v+"px"),a.style.cssText=_.join(";")}}function o(e,t){return"progid:DXImageTransform.Microsoft.Matrix(M11 = "+t+",M12 = -"+e+",M21 = "+e+",M22 = "+t+",SizingMethod = 'auto expand')"}function s(e,t,n,i){return t>=e?n>=i?1:4:n>=i?2:3}function l(){return c._direction||(c._direction=document.createElement("div"),gantt.$task_links.appendChild(c._direction)),c._direction}function u(){c._direction&&(c._direction.parentNode&&c._direction.parentNode.removeChild(c._direction),c._direction=null)}var c=new gantt._DnD(this.$task_bars,{sensitivity:0,updates_per_second:60}),h="task_left",f="task_right",d="gantt_link_point",p="gantt_link_control";c.attachEvent("onBeforeDragStart",gantt.bind(function(t,n){var i=n.target||n.srcElement;if(r(),gantt.getState().drag_id)return!1;if(gantt._locate_css(i,d)){gantt._locate_css(i,h)&&(gantt._link_source_task_start=!0);var a=gantt._link_source_task=this.locate(n),o=gantt.getTask(a);if(gantt._is_readonly(o))return r(),!1;var s=0;return gantt._get_safe_type(o.type)==gantt.config.types.milestone&&(s=(gantt._get_visible_milestone_width()-gantt._get_milestone_width())/2),this._dir_start=e(o,!!gantt._link_source_task_start,s),!0}return!1},this)),c.attachEvent("onAfterDragStart",gantt.bind(function(e,n){this.config.touch&&(this._show_link_points=!0,this.refreshData()),t(c.config.marker)},this)),c.attachEvent("onDragMove",gantt.bind(function(i,r){var o=c.config,s=c.getPosition(r);n(o.marker,s);var l=gantt._is_link_drop_area(r),u=gantt._link_target_task,h=gantt._link_landing,d=gantt._link_target_task_start,g=gantt.locate(r),m=!0;if(l&&(m=!gantt._locate_css(r,f),l=!!g),gantt._link_target_task=g,gantt._link_landing=l,gantt._link_target_task_start=m,l){var v=gantt.getTask(g),_=gantt._locate_css(r,p),y=0;_&&(y=Math.floor(_.offsetWidth/2)),this._dir_end=e(v,!!gantt._link_target_task_start,y)}else this._dir_end=gantt._get_mouse_pos(r);var b=!(h==l&&u==g&&d==m);return b&&(u&&gantt.refreshTask(u,!1),g&&gantt.refreshTask(g,!1)),b&&t(o.marker),a(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y),!0},this)),c.attachEvent("onDragEnd",gantt.bind(function(){var e=i();if(e.from&&e.to&&e.from!=e.to){var t=gantt._get_link_type(e.from_start,e.to_start),n={source:e.from,target:e.to,type:t};n.type&&gantt.isLinkAllowed(n)&&gantt.addLink(n)}r(),this.config.touch?(this._show_link_points=!1,this.refreshData()):(e.from&&gantt.refreshTask(e.from,!1),e.to&&gantt.refreshTask(e.to,!1)),u()},this)),gantt._is_link_drop_area=function(e){return!!gantt._locate_css(e,p)}},gantt._get_link_state=function(){return{link_landing_area:this._link_landing,link_target_id:this._link_target_task,link_target_start:this._link_target_task_start,link_source_id:this._link_source_task,link_source_start:this._link_source_task_start}},gantt._task_renderer=function(e,t,n,i){return this._task_area_pulls||(this._task_area_pulls={}),this._task_area_renderers||(this._task_area_renderers={}),this._task_area_renderers[e]?this._task_area_renderers[e]:(t||this.assert(!1,"Invalid renderer call"),n&&n.setAttribute(this.config.layer_attribute,!0),this._task_area_renderers[e]={render_item:function(e,r){if(r=r||n,i&&!i(e))return void this.remove_item(e.id);var a=t.call(gantt,e);this.append(e,a,r)},clear:function(t){this.rendered=gantt._task_area_pulls[e]={},this.clear_container(t)},clear_container:function(e){e=e||n,e&&(e.innerHTML="")},render_items:function(e,t){t=t||n;var i=document.createDocumentFragment();this.clear(t);for(var r=0,a=e.length;a>r;r++)this.render_item(e[r],i);t.appendChild(i)},append:function(e,t,n){return t?(this.rendered[e.id]&&this.rendered[e.id].parentNode?this.replace_item(e.id,t):n.appendChild(t),void(this.rendered[e.id]=t)):void(this.rendered[e.id]&&this.remove_item(e.id))},replace_item:function(e,t){var n=this.rendered[e];n&&n.parentNode&&n.parentNode.replaceChild(t,n),this.rendered[e]=t},remove_item:function(e){this.hide(e),delete this.rendered[e]},hide:function(e){var t=this.rendered[e];t&&t.parentNode&&t.parentNode.removeChild(t)},restore:function(e){var t=this.rendered[e.id];t?t.parentNode||this.append(e,t,n):this.render_item(e,n)},change_id:function(e,t){this.rendered[t]=this.rendered[e],delete this.rendered[e]},rendered:this._task_area_pulls[e],node:n,unload:function(){this.clear(),delete gantt._task_area_renderers[e],delete gantt._task_area_pulls[e]}},this._task_area_renderers[e])},gantt._clear_renderers=function(){for(var e in this._task_area_renderers)this._task_renderer(e).unload()},gantt._is_layer=function(e){return e&&e.hasAttribute&&e.hasAttribute(this.config.layer_attribute)},gantt._show_link_points=!1,gantt._init_tasks=function(){function e(e,t,n,i){for(var r=0;r<e.length;r++)e[r].change_id(t,n),e[r].render_item(i)}this._tasks={col_width:this.config.columnWidth,width:[],full_width:0,trace_x:[],rendered:{}},this._click.gantt_task_link=this.bind(function(e,t){var n=this.locate(e,gantt.config.link_attribute);n&&this.callEvent("onLinkClick",[n,e])},this),this._click.gantt_scale_cell=this.bind(function(e,t){var n=gantt._get_mouse_pos(e),i=gantt.dateFromPos(n.x),r=Math.floor(gantt._day_index_by_date(i)),a=gantt._tasks.trace_x[r];gantt.callEvent("onScaleClick",[e,a])},this),this._dbl_click.gantt_task_link=this.bind(function(e,t,n){var t=this.locate(e,gantt.config.link_attribute);this._delete_link_handler(t,e)},this),this._dbl_click.gantt_link_point=this.bind(function(e,t,n){var t=this.locate(e),i=this.getTask(t),r=null;return n.parentNode&&gantt._getClassName(n.parentNode)&&(r=gantt._getClassName(n.parentNode).indexOf("_left")>-1?i.$target[0]:i.$source[0]),r&&this._delete_link_handler(r,e),!1},this),this._tasks_dnd.init(),this._init_links_dnd(),this._link_layers.clear();var t=this.addLinkLayer({renderer:this._render_link_element,container:this.$task_links,filter:gantt._create_filter([gantt._filter_link,gantt._is_chart_visible].concat(this._get_link_filters()))});this._linkRenderer=this._link_layers.getRenderer(t),this._task_layers.clear();var n=this.addTaskLayer({renderer:this._render_task_element,container:this.$task_bars,filter:gantt._create_filter([gantt._filter_task,gantt._is_chart_visible].concat(this._get_task_filters()))});this._taskRenderer=this._task_layers.getRenderer(n),this.addTaskLayer({renderer:this._render_grid_item,container:this.$grid_data,filter:gantt._create_filter([gantt._filter_task,gantt._is_grid_visible].concat(this._get_task_filters()))}),this.addTaskLayer({renderer:this._render_bg_line,container:this.$task_bg,filter:gantt._create_filter([gantt._filter_task,gantt._is_chart_visible,gantt._is_std_background].concat(this._get_task_filters()))}),this._onTaskIdChange&&this.detachEvent(this._onTaskIdChange),this._onTaskIdChange=this.attachEvent("onTaskIdChange",function(t,n){var i=this._get_task_renderers();e(i,t,n,this.getTask(n))}),this._onLinkIdChange&&this.detachEvent(this._onLinkIdChange),
this._onLinkIdChange=this.attachEvent("onLinkIdChange",function(t,n){var i=this._get_link_renderers();e(i,t,n,this.getLink(n))})},gantt._get_task_filters=function(){return[]},gantt._get_link_filters=function(){return[]},gantt._is_chart_visible=function(){return!!this.config.show_chart},gantt._filter_task=function(e,t){var n=null,i=null;if(this.config.start_date&&this.config.end_date){if(this._isAllowedUnscheduledTask(t))return!0;if(n=this.config.start_date.valueOf(),i=this.config.end_date.valueOf(),+t.start_date>i||+t.end_date<+n)return!1}return!0},gantt._filter_link=function(e,t){return!!this.config.show_links&&(!(!gantt.isTaskVisible(t.source)||!gantt.isTaskVisible(t.target)||gantt._isAllowedUnscheduledTask(gantt.getTask(t.source))||gantt._isAllowedUnscheduledTask(gantt.getTask(t.target)))&&this.callEvent("onBeforeLinkDisplay",[e,t]))},gantt._is_std_background=function(){return!this.config.static_background},gantt._delete_link_handler=function(e,t){if(e&&this.callEvent("onLinkDblClick",[e,t])){var n=gantt.getLink(e);if(gantt._is_readonly(n))return;var i="",r=gantt.locale.labels.link+" "+this.templates.link_description(this.getLink(e))+" "+gantt.locale.labels.confirm_link_deleting;window.setTimeout(function(){gantt._dhtmlx_confirm(r,i,function(){gantt.deleteLink(e)})},gantt.config.touch?300:1)}},gantt.getTaskNode=function(e){return this._taskRenderer.rendered[e]},gantt.getLinkNode=function(e){return this._linkRenderer.rendered[e]},gantt._get_tasks_data=function(){for(var e=[],t=this._get_data_range(),n=0;n<t.length;n++){var i=this._pull[t[n]];i.$index=n,this.resetProjectDates(i),e.push(i)}return e},gantt._get_data_range=function(){return this._order},gantt._get_links_data=function(){return this._links.slice()},gantt._render_data=function(){this.callEvent("onBeforeDataRender",[]),this._order_synced?this._order_synced=!1:this._sync_order();for(var e=this._get_tasks_data(),t=this._get_task_renderers(),n=0;n<t.length;n++)t[n].clear();var i=gantt._get_links_data();t=this._get_link_renderers();for(var n=0;n<t.length;n++)t[n].clear();this._update_layout_sizes(),this._scroll_resize();for(var t=this._get_task_renderers(),n=0;n<t.length;n++)t[n].render_items(e);var i=gantt._get_links_data();t=this._get_link_renderers();for(var n=0;n<t.length;n++)t[n].render_items(i);this.callEvent("onDataRender",[])},gantt._update_layout_sizes=function(){var e=this._tasks;e.bar_height=this._get_task_height();var t=Math.max(gantt._y-(gantt._scroll_sizes().x?gantt._scroll_sizes().scroll_size+1:0)-1,0);this.$task_data.style.height=Math.max(t-this.config.scale_height,0)+"px",gantt.config.smart_rendering?this.$task_bg.style.height=gantt.config.row_height*this.getVisibleTaskCount()+"px":this.$task_bg.style.height="",this.$task_bg.style.backgroundImage="";for(var n=this.$task_data.childNodes,i=0,r=n.length;r>i;i++){var a=n[i];this._is_layer(a)&&a.style&&(a.style.width=e.full_width+"px")}if(this._is_grid_visible()){for(var o=this.getGridColumns(),s=0,i=0;i<o.length;i++)s+=o[i].width;this.$grid_data.style.width=Math.max(s-1,0)+"px"}},gantt._scale_range_unit=function(){var e=this.config.scale_unit;if(this.config.scale_offset_minimal){var t=this._get_scales();e=t[t.length-1].unit}return e},gantt._init_tasks_range=function(){var e=this._scale_range_unit();if(this.config.start_date&&this.config.end_date){this._min_date=this.date[e+"_start"](new Date(this.config.start_date));var t=new Date(this.config.end_date),n=this.date[e+"_start"](new Date(t));return t=+t!=+n?this.date.add(n,1,e):n,void(this._max_date=t)}this._get_tasks_data();var i=this.getSubtaskDates();this._min_date=i.start_date,this._max_date=i.end_date,this._max_date&&this._min_date||(this._min_date=new Date,this._max_date=new Date),this._min_date=this.date[e+"_start"](this._min_date),this._min_date=this.calculateEndDate({start_date:this.date[e+"_start"](this._min_date),duration:-1,unit:e}),this._max_date=this.date[e+"_start"](this._max_date),this._max_date=this.calculateEndDate({start_date:this._max_date,duration:2,unit:e})},gantt._prepare_scale_html=function(e,t,n){var i=[],r=null,a=null,o=null;(e.template||e.date)&&(a=e.template||this.date.date_to_str(e.date));var s=0,l=e.count;!this.config.smart_scales||isNaN(t)||isNaN(n)||(s=this._findBinary(e.left,t),l=this._findBinary(e.left,n)+1),o=e.css||function(){},!e.css&&this.config.inherit_scale_class&&(o=gantt.templates.scale_cell_class);for(var u=s;l>u&&e.trace_x[u];u++){r=new Date(e.trace_x[u]);var c=a.call(this,r),h=e.width[u],f=e.height-(this.config.smart_scales&&e.index?1:0),d=e.left[u],p="",g="",m="";if(h){var v=this.config.smart_scales?"position:absolute;left:"+d+"px":"";p="width:"+h+"px;height:"+f+"px;"+v,m="gantt_scale_cell"+(u==e.count-1?" gantt_last_cell":""),g=o.call(this,r),g&&(m+=" "+g);var _=gantt._waiAria.getTimelineCellAttr(c),y="<div class='"+m+"'"+_+" style='"+p+"'>"+c+"</div>";i.push(y)}}return i.join("")},gantt._get_scales=function(){var e=this._scale_helpers,t=[e.primaryScale()].concat(this.config.subscales);return e.sortScales(t),t},gantt._get_scale_chunk_html=function(e,t,n){for(var i=[],r=this.templates.scale_row_class,a=0;a<e.length;a++){var o="gantt_scale_line",s=r(e[a]);s&&(o+=" "+s),i.push('<div class="'+o+'" style="height:'+e[a].height+"px;position:relative;line-height:"+e[a].height+'px">'+this._prepare_scale_html(e[a],t,n)+"</div>")}return i.join("")},gantt._refreshScales=function(){if(this.config.smart_scales&&this.config.show_chart){var e=this._scales,t=gantt.getScrollState().x;this.$task_scale.innerHTML=this._get_scale_chunk_html(e,t,t+this._x-this._get_grid_width())}},gantt.attachEvent("onGanttScroll",function(e,t,n,i){gantt.config.smart_scales&&e!=n&&gantt._refreshScales()}),gantt.attachEvent("onGanttRender",function(){gantt.config.smart_scales&&gantt._refreshScales()}),gantt._render_tasks_scales=function(){this._init_tasks_range(),this._scroll_resize(),this._set_sizes();var e="",t=0,n=0,i=0;if(this._is_chart_visible()){var r=this._scale_helpers,a=this._get_scales();i=this.config.scale_height-1;var o=this._get_resize_options(),s=o.x?Math.max(this.config.autosize_min_width,0):Math.max(this._x-this._get_grid_width()-2,0),l=r.prepareConfigs(a,this.config.min_column_width,s,i),u=this._tasks=l[l.length-1];this._scales=l,e=this._get_scale_chunk_html(l,0,this._x-this._get_grid_width());var c=this._scroll_sizes();t=u.full_width+(this._scroll_sizes().y?c.scroll_size:0)+"px",n=u.full_width+"px",i+="px"}this._is_chart_visible()?this.$task.style.display="":this.$task.style.display="none",this.$task_scale.style.height=i,this.$task_data.style.width=this.$task_scale.style.width=t,this.$task_scale.innerHTML=e},gantt._render_bg_line=function(e){var t=gantt._tasks,n=t.count,i=document.createElement("div");if(gantt.config.show_task_cells)for(var r=0;n>r;r++){var a=t.width[r],o="";if(a>0){var s=document.createElement("div");s.style.width=a+"px",o="gantt_task_cell"+(r==n-1?" gantt_last_cell":""),u=this.templates.task_cell_class(e,t.trace_x[r]),u&&(o+=" "+u),s.className=o,i.appendChild(s)}}var l=gantt.getGlobalTaskIndex(e.id)%2!==0,u=gantt.templates.task_row_class(e.start_date,e.end_date,e),c="gantt_task_row"+(l?" odd":"")+(u?" "+u:"");return this.getState().selected_task==e.id&&(c+=" gantt_selected"),i.className=c,gantt.config.smart_rendering&&(i.style.position="absolute",i.style.top=this.getTaskTop(e.id)+"px",i.style.width="100%"),i.style.height=gantt.config.row_height+"px",i.setAttribute(this.config.task_attribute,e.id),i},gantt._adjust_scales=function(){if(this.config.fit_tasks){var e=+this._min_date,t=+this._max_date;if(this._init_tasks_range(),+this._min_date!=e||+this._max_date!=t)return this.render(),this.callEvent("onScaleAdjusted",[]),!0}return!1},gantt.refreshTask=function(e,t){var n=this._get_task_renderers(),i=this.getTask(e);if(i&&this.isTaskVisible(e)){for(var r=0;r<n.length;r++)n[r].render_item(i);if(void 0!==t&&!t)return;for(var r=0;r<i.$source.length;r++)gantt.refreshLink(i.$source[r]);for(var r=0;r<i.$target.length;r++)gantt.refreshLink(i.$target[r])}},gantt.refreshLink=function(e){if(this.isLinkExists(e))this._render_link(e);else for(var t=this._get_link_renderers(),n=0;n<t.length;n++)t[n].remove_item(e)},gantt._combine_item_class=function(e,t,n){var i=[e];t&&i.push(t);var r=gantt.getState(),a=this.getTask(n);this._get_safe_type(a.type)==this.config.types.milestone&&i.push("gantt_milestone"),this._get_safe_type(a.type)==this.config.types.project&&i.push("gantt_project"),this._is_flex_task(a)&&i.push("gantt_dependent_task"),this.config.select_task&&n==r.selected_task&&i.push("gantt_selected"),n==r.drag_id&&(i.push("gantt_drag_"+r.drag_mode),r.touch_drag&&i.push("gantt_touch_"+r.drag_mode));var o=gantt._get_link_state();if(o.link_source_id==n&&i.push("gantt_link_source"),o.link_target_id==n&&i.push("gantt_link_target"),this.config.highlight_critical_path&&this.isCriticalTask&&this.isCriticalTask(a)&&i.push("gantt_critical_task"),o.link_landing_area&&o.link_target_id&&o.link_source_id&&o.link_target_id!=o.link_source_id){var s=o.link_source_id,l=o.link_source_start,u=o.link_target_start,c=gantt.isLinkAllowed(s,n,l,u),h="";h=c?u?"link_start_allow":"link_finish_allow":u?"link_start_deny":"link_finish_deny",i.push(h)}return i.join(" ")},gantt._render_pair=function(e,t,n,i){var r=gantt.getState();+n.start_date>=+r.min_date&&e.appendChild(i(t+" task_left")),+n.end_date<=+r.max_date&&e.appendChild(i(t+" task_right"))},gantt._get_task_height=function(){var e=this.config.task_height;return"full"==e&&(e=this.config.row_height-5),e=Math.min(e,this.config.row_height),Math.max(e,0)},gantt._get_milestone_width=function(){return this._get_task_height()},gantt._get_visible_milestone_width=function(){var e=gantt._get_task_height();return Math.sqrt(2*e*e)},gantt.getTaskPosition=function(e,t,n){var i=this.posFromDate(t||e.start_date),r=this.posFromDate(n||e.end_date);r=Math.max(i,r);var a=this.getTaskTop(e.id),o=gantt._get_task_height();return{left:i,top:a,height:o,width:Math.max(r-i,0)}},gantt._get_task_width=function(e,t,n){return Math.round(this._get_task_pos(e,!1).x-this._get_task_pos(e,!0).x)},gantt._is_readonly=function(e){return(!e||!e[this.config.editable_property])&&(e&&e[this.config.readonly_property]||this.config.readonly)},gantt._task_default_render=function(e){if(!this._isAllowedUnscheduledTask(e)){var t=this._get_task_pos(e),n=this.config,i=this._get_task_height(),r=Math.floor((this.config.row_height-i)/2);this._get_safe_type(e.type)==n.types.milestone&&n.link_line_width>1&&(r+=1);var a=document.createElement("div"),o=gantt._get_task_width(e),s=this._get_safe_type(e.type);a.setAttribute(this.config.task_attribute,e.id),n.show_progress&&s!=this.config.types.milestone&&this._render_task_progress(e,a,o);var l=gantt._render_task_content(e,o);e.textColor&&(l.style.color=e.textColor),a.appendChild(l);var u=this._combine_item_class("gantt_task_line",this.templates.task_class(e.start_date,e.end_date,e),e.id);(e.color||e.progressColor||e.textColor)&&(u+=" gantt_task_inline_color"),a.className=u;var c=["left:"+t.x+"px","top:"+(r+t.y)+"px","height:"+i+"px","line-height:"+Math.max(30>i?i-2:i,0)+"px","width:"+o+"px"];e.color&&c.push("background-color:"+e.color),e.textColor&&c.push("color:"+e.textColor),a.style.cssText=c.join(";");var h=this._render_leftside_content(e);return h&&a.appendChild(h),h=this._render_rightside_content(e),h&&a.appendChild(h),gantt._waiAria.setTaskBarAttr(e,a),this._is_readonly(e)||(n.drag_resize&&!this._is_flex_task(e)&&s!=this.config.types.milestone&&gantt._render_pair(a,"gantt_task_drag",e,function(e){var t=document.createElement("div");return t.className=e,t}),n.drag_links&&this.config.show_links&&gantt._render_pair(a,"gantt_link_control",e,function(e){var t=document.createElement("div");t.className=e,t.style.cssText=["height:"+i+"px","line-height:"+i+"px"].join(";");var n=document.createElement("div");return n.className="gantt_link_point",n.style.display=gantt._show_link_points?"block":"",t.appendChild(n),t})),a}},gantt._render_task_element=function(e){var t=this.config.type_renderers,n=t[this._get_safe_type(e.type)],i=this._task_default_render;return n||(n=i),n.call(this,e,this.bind(i,this))},gantt._render_side_content=function(e,t,n){if(!t)return null;var i=t(e.start_date,e.end_date,e);if(!i)return null;var r=document.createElement("div");return r.className="gantt_side_content "+n,r.innerHTML=i,r},gantt._render_leftside_content=function(e){var t="gantt_left "+gantt._get_link_crossing_css(!0,e);return gantt._render_side_content(e,this.templates.leftside_text,t)},gantt._render_rightside_content=function(e){var t="gantt_right "+gantt._get_link_crossing_css(!1,e);return gantt._render_side_content(e,this.templates.rightside_text,t)},gantt._get_conditions=function(e){return e?{$source:[gantt.config.links.start_to_start],$target:[gantt.config.links.start_to_start,gantt.config.links.finish_to_start]}:{$source:[gantt.config.links.finish_to_start,gantt.config.links.finish_to_finish],$target:[gantt.config.links.finish_to_finish]}},gantt._get_link_crossing_css=function(e,t){var n=gantt._get_conditions(e);for(var i in n)for(var r=t[i],a=0;a<r.length;a++)for(var o=gantt.getLink(r[a]),s=0;s<n[i].length;s++)if(o.type==n[i][s])return"gantt_link_crossing";return""},gantt._render_task_content=function(e,t){var n=document.createElement("div");return this._get_safe_type(e.type)!=this.config.types.milestone&&(n.innerHTML=this.templates.task_text(e.start_date,e.end_date,e)),n.className="gantt_task_content",n},gantt._render_task_progress=function(e,t,n){var i=1*e.progress||0;n=Math.max(n-2,0);var r=document.createElement("div"),a=Math.round(n*i);if(a=Math.min(n,a),e.progressColor&&(r.style.backgroundColor=e.progressColor,r.style.opacity=1),r.style.width=a+"px",r.className="gantt_task_progress",r.innerHTML=this.templates.progress_text(e.start_date,e.end_date,e),t.appendChild(r),this.config.drag_progress&&!gantt._is_readonly(e)){var o=document.createElement("div");o.style.left=a+"px",o.className="gantt_task_progress_drag",r.appendChild(o),t.appendChild(o)}},gantt._get_line=function(e){var t={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3,quarter:7776e3,year:31536e3};return t[e]||t.hour},gantt.dateFromPos=function(e){var t=this._tasks;if(0>e||e>t.full_width||!t.full_width)return null;var n=this._findBinary(this._tasks.left,e),i=this._tasks.left[n],r=t.width[n]||t.col_width,a=0;r&&(a=(e-i)/r);var o=0;a&&(o=gantt._get_coll_duration(t,t.trace_x[n]));var s=new Date(t.trace_x[n].valueOf()+Math.round(a*o));return s},gantt.posFromDate=function(e){if(!this._is_chart_visible())return 0;var t=gantt._day_index_by_date(e);this.assert(t>=0,"Invalid day index");var n=Math.floor(t),i=t%1,r=gantt._tasks.left[Math.min(n,gantt._tasks.width.length-1)];return n==gantt._tasks.width.length&&(r+=gantt._tasks.width[gantt._tasks.width.length-1]),i&&(r+=n<gantt._tasks.width.length?gantt._tasks.width[n]*(i%1):1),r},gantt._day_index_by_date=function(e){var t=new Date(e).valueOf(),n=gantt._tasks.trace_x,i=gantt._tasks.ignore_x;if(t<=this._min_date)return 0;if(t>=this._max_date)return n.length;for(var r=gantt._findBinary(n,t),a=+gantt._tasks.trace_x[r];i[a];)a=gantt._tasks.trace_x[++r];return a?r+(e-n[r])/gantt._get_coll_duration(gantt._tasks,n[r]):0},gantt._findBinary=function(e,t){for(var n,i,r,a=0,o=e.length-1;o>=a;)if(n=Math.floor((a+o)/2),i=+e[n],r=+e[n-1],t>i)a=n+1;else{if(!(i>t))return n;if(!isNaN(r)&&t>r)return n-1;o=n-1}return e.length-1},gantt._get_coll_duration=function(e,t){return gantt.date.add(t,e.step,e.unit)-t},gantt._get_x_pos=function(e,t){t=t!==!1,gantt.posFromDate(t?e.start_date:e.end_date)},gantt.getTaskTop=function(e){return this._y_from_ind(this.getGlobalTaskIndex(e))},gantt._get_task_coord=function(e,t,n){t=t!==!1,n=n||0;var i=this._get_safe_type(e.type)==this.config.types.milestone,r=null;r=t||i?e.start_date||this._default_task_date(e):e.end_date||this.calculateEndDate({start_date:this._default_task_date(e),task:e});var a=this.posFromDate(r),o=this.getTaskTop(e.id);return i&&(t?a-=n:a+=n),{x:a,y:o}},gantt._get_task_pos=function(e,t){t=t!==!1;var n=gantt._get_milestone_width()/2;return this._get_task_coord(e,t,n)},gantt._get_task_visible_pos=function(e,t){t=t!==!1;var n=gantt._get_visible_milestone_width()/2;return this._get_task_coord(e,t,n)},gantt._correct_shift=function(e,t){return e-=6e4*(new Date(gantt._min_date).getTimezoneOffset()-new Date(e).getTimezoneOffset())*(t?-1:1)},gantt._get_mouse_pos=function(e){if(e.pageX||e.pageY)var t={x:e.pageX,y:e.pageY};var n=gantt.env.isIE?document.documentElement:document.body,t={x:e.clientX+n.scrollLeft-n.clientLeft,y:e.clientY+n.scrollTop-n.clientTop},i=gantt._get_position(gantt.$task_data);return t.x=t.x-i.x+gantt.$task_data.scrollLeft,t.y=t.y-i.y+gantt.$task_data.scrollTop,t},gantt._is_layer=function(e){return e&&e.hasAttribute&&e.hasAttribute(this.config.layer_attribute)},gantt.attachEvent("onGanttReady",function(){gantt._task_layers.add(),gantt._link_layers.add()}),gantt._layers={prepareConfig:function(e){return"function"==typeof e&&(e={renderer:e}),e.id=gantt.uid(),e.container||(e.container=document.createElement("div")),e},create:function(e,t){return{tempCollection:[],renderers:{},container:e,getRenderers:function(){var e=[];for(var t in this.renderers)e.push(this.renderers[t]);return e},getRenderer:function(e){return this.renderers[e]},add:function(e){if(e&&this.tempCollection.push(e),this.container())for(var n=this.container(),i=this.tempCollection,r=0;r<i.length;r++){var e=i[r],a=e.container,o=e.id,s=e.topmost;if(!a.parentNode)if(s)n.appendChild(a);else{var l=t?t():n.firstChild;l?n.insertBefore(a,l):n.appendChild(a)}this.renderers[o]=gantt._task_renderer(o,e.renderer,a,e.filter),this.tempCollection.splice(r,1),r--}},remove:function(e){this.renderers[e].unload(),delete this.renderers[e]},clear:function(){for(var e in this.renderers)this.renderers[e].unload();this.renderers={}}}}},gantt._create_filter=function(e){return e instanceof Array||(e=Array.prototype.slice.call(arguments,0)),function(t){for(var n=!0,i=0,r=e.length;r>i;i++){var a=e[i];a&&(n=n&&a.apply(gantt,[t.id,t])!==!1)}return n}},gantt._add_generic_layer=function(e,t){return function(n){return void 0===n.filter&&(n.filter=gantt._create_filter(t)),n=gantt._layers.prepareConfig(n),e.add(n),n.id}},gantt._task_layers=gantt._layers.create(function(){return gantt.$task_data},function(){return gantt.$task_links}),gantt._link_layers=gantt._layers.create(function(){return gantt.$task_data}),gantt.addTaskLayer=gantt._add_generic_layer(gantt._task_layers,[gantt._filter_task,gantt._is_chart_visible].concat(gantt._get_task_filters())),gantt.removeTaskLayer=function(e){gantt._task_layers.remove(e)},gantt.addLinkLayer=gantt._add_generic_layer(gantt._link_layers,[gantt._filter_link,gantt._is_chart_visible].concat(gantt._get_link_filters())),gantt.removeLinkLayer=function(e){gantt._link_layers.remove(e)},gantt._get_task_renderers=function(){return this._task_layers.getRenderers()},gantt._get_link_renderers=function(){return this._link_layers.getRenderers()},gantt._pull={},gantt._branches={},gantt._order=[],gantt._lpull={},gantt._links=[],gantt._order_full=[],gantt.load=function(e,t,n){this._load_url=e,this.assert(arguments.length,"Invalid load arguments");var i="json",r=null;arguments.length>=3?(i=t,r=n):"string"==typeof arguments[1]?i=arguments[1]:"function"==typeof arguments[1]&&(r=arguments[1]),this._load_type=i,this.callEvent("onLoadStart",[e,i]),this.ajax.get(e,gantt.bind(function(t){this.on_load(t,i),this.callEvent("onLoadEnd",[e,i]),"function"==typeof r&&r.call(this)},this))},gantt.parse=function(e,t){this.on_load({xmlDoc:{responseText:e}},t)},gantt.serialize=function(e){return e=e||"json",this[e].serialize()},gantt.on_load=function(e,t){this.callEvent("onBeforeParse",[]),t||(t="json"),this.assert(this[t],"Invalid data type:'"+t+"'");var n=e.xmlDoc.responseText,i=this[t].parse(n,e);this._process_loading(i)},gantt._load_task=function(e){return this._init_task(e),!!this.callEvent("onTaskLoading",[e])&&(this._pull[e.id]=e,!0)},gantt._build_pull=function(e){for(var t=null,n=[],i=0,r=e.length;r>i;i++)t=e[i],this._load_task(t)&&n.push(t);return n},gantt._build_hierarchy=function(e){for(var t=null,n=0,i=e.length;i>n;n++)t=e[n],this.setParent(t,this.getParent(t)||this.config.root_id);for(var n=0,i=e.length;i>n;n++)t=e[n],this._add_branch(t),t.$level=this.calculateTaskLevel(t)},gantt._process_loading=function(e){e.collections&&this._load_collections(e.collections);var t=this._build_pull(e.data);if(this._build_hierarchy(t),this._sync_order(),this._order_synced=!0,this._init_links(e.links||(e.collections?e.collections.links:[])),this.callEvent("onParse",[]),this.render(),this.config.initial_scroll){var n=this._order[0]||this.config.root_id;n&&this.showTask(n)}},gantt._init_links=function(e){if(e)for(var t=0;t<e.length;t++)if(e[t]){var n=this._init_link(e[t]);this._lpull[n.id]=n}this._sync_links()},gantt._load_collections=function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){t=!0;var i=e[n],r=this.serverList[n];if(!r)continue;r.splice(0,r.length);for(var a=0;a<i.length;a++){var o=i[a],s=this.copy(o);s.key=s.value;for(var l in o)if(o.hasOwnProperty(l)){if("value"==l||"label"==l)continue;s[l]=o[l]}r.push(s)}}t&&this.callEvent("onOptionsLoad",[])},gantt._sync_order=function(e){this._order=[],this._order_full=[],this._order_search={},this._sync_order_item({parent:this.config.root_id,$open:!0,$ignore:!0,id:this.config.root_id}),e||(this._scroll_resize(),this._set_sizes())},gantt.attachEvent("onBeforeTaskDisplay",function(e,t){return!t.$ignore}),gantt._sync_order_item=function(e,t){e.id!==gantt.config.root_id&&(this._order_full.push(e.id),!t&&this._filter_task(e.id,e)&&this.callEvent("onBeforeTaskDisplay",[e.id,e])&&(this._order.push(e.id),this._order_search[e.id]=this._order.length-1));var n=this.getChildren(e.id);if(n)for(var i=0;i<n.length;i++)this._sync_order_item(this._pull[n[i]],t||!e.$open)},gantt.getTaskCount=function(){return this._order_full.length},gantt.getLinkCount=function(){return this._links.length},gantt.getVisibleTaskCount=function(){return this._order.length},gantt.getTaskIndex=function(e){for(var t=this.getChildren(this.getParent(e)),n=0;n<t.length;n++)if(t[n]==e)return n;return-1},gantt.getGlobalTaskIndex=function(e){this.assert(e,"Invalid argument");var t=this._order_search[e];return void 0!==t?t:-1},gantt._get_visible_order=gantt.getGlobalTaskIndex,gantt.eachTask=function(e,t,n){t=t||this.config.root_id,n=n||this;var i=this.getChildren(t);if(i)for(var r=0;r<i.length;r++){var a=this._pull[i[r]];e.call(n,a),this.hasChild(a.id)&&this.eachTask(e,a.id,n)}},gantt._eachParent=function(e,t,n){n=n||this;for(var i=t;this.getParent(i)&&this.isTaskExists(this.getParent(i));)i=this.getTask(this.getParent(i)),e.call(n,i)},gantt.json={parse:function(e){return gantt.assert(e,"Invalid data"),"string"==typeof e&&(window.JSON?e=JSON.parse(e):gantt.assert(!1,"JSON is not supported")),e.dhx_security&&(gantt.security_key=e.dhx_security),e},serializeTask:function(e){return this._copyObject(e)},serializeLink:function(e){return this._copyLink(e)},_copyLink:function(e){var t={};for(var n in e)t[n]=e[n];return t},_copyObject:function(e){var t={};for(var n in e)"$"!=n.charAt(0)&&(t[n]=e[n],t[n]instanceof Date&&(t[n]=gantt.templates.xml_format(t[n])));return t},serialize:function(){var e=[],t=[];gantt.eachTask(function(t){gantt.resetProjectDates(t),e.push(this.serializeTask(t))},gantt.config.root_id,this);for(var n=gantt.getLinks(),i=0;i<n.length;i++)t.push(this.serializeLink(n[i]));return{data:e,links:t}}},gantt.xml={_xmlNodeToJSON:function(e,t){for(var n={},i=0;i<e.attributes.length;i++)n[e.attributes[i].name]=e.attributes[i].value;if(!t){for(var i=0;i<e.childNodes.length;i++){var r=e.childNodes[i];1==r.nodeType&&(n[r.tagName]=r.firstChild?r.firstChild.nodeValue:"")}n.text||(n.text=e.firstChild?e.firstChild.nodeValue:"")}return n},_getCollections:function(e){for(var t={},n=gantt.ajax.xpath("//coll_options",e),i=0;i<n.length;i++)for(var r=n[i].getAttribute("for"),a=t[r]=[],o=gantt.ajax.xpath(".//item",n[i]),s=0;s<o.length;s++){for(var l=o[s],u=l.attributes,c={key:o[s].getAttribute("value"),label:o[s].getAttribute("label")},h=0;h<u.length;h++){var f=u[h];"value"!=f.nodeName&&"label"!=f.nodeName&&(c[f.nodeName]=f.nodeValue)}a.push(c)}return t},_getXML:function(e,t,n){n=n||"data",t.getXMLTopNode||(t=gantt.ajax.parse(t));var i=gantt.ajax.xmltop(n,t.xmlDoc);if(i.tagName!=n)throw"Invalid XML data";var r=i.getAttribute("dhx_security");return r&&(gantt.security_key=r),i},parse:function(e,t){t=this._getXML(e,t);for(var n={},i=n.data=[],r=gantt.ajax.xpath("//task",t),a=0;a<r.length;a++)i[a]=this._xmlNodeToJSON(r[a]);return n.collections=this._getCollections(t),n},_copyLink:function(e){return"<item id='"+e.id+"' source='"+e.source+"' target='"+e.target+"' type='"+e.type+"' />"},_copyObject:function(e){return"<task id='"+e.id+"' parent='"+(e.parent||"")+"' start_date='"+e.start_date+"' duration='"+e.duration+"' open='"+!!e.open+"' progress='"+e.progress+"' end_date='"+e.end_date+"'><![CDATA["+e.text+"]]></task>"},serialize:function(){for(var e=[],t=[],n=gantt.json.serialize(),i=0,r=n.data.length;r>i;i++)e.push(this._copyObject(n.data[i]));for(var i=0,r=n.links.length;r>i;i++)t.push(this._copyLink(n.links[i]));return"<data>"+e.join("")+"<coll_options for='links'>"+t.join("")+"</coll_options></data>"}},gantt.oldxml={parse:function(e,t){t=gantt.xml._getXML(e,t,"projects");for(var n={collections:{links:[]}},i=n.data=[],r=gantt.ajax.xpath("//task",t),a=0;a<r.length;a++){i[a]=gantt.xml._xmlNodeToJSON(r[a]);var o=r[a].parentNode;"project"==o.tagName?i[a].parent="project-"+o.getAttribute("id"):i[a].parent=o.parentNode.getAttribute("id")}r=gantt.ajax.xpath("//project",t);for(var a=0;a<r.length;a++){var s=gantt.xml._xmlNodeToJSON(r[a],!0);s.id="project-"+s.id,i.push(s)}for(var a=0;a<i.length;a++){var s=i[a];s.start_date=s.startdate||s.est,s.end_date=s.enddate,s.text=s.name,s.duration=s.duration/8,s.open=1,s.duration||s.end_date||(s.duration=1),s.predecessortasks&&n.collections.links.push({target:s.id,source:s.predecessortasks,type:gantt.config.links.finish_to_start})}return n},serialize:function(){gantt.message("Serialization to 'old XML' is not implemented")}},gantt.serverList=function(e,t){return t?this.serverList[e]=t.slice(0):this.serverList[e]||(this.serverList[e]=[]),this.serverList[e]},gantt._calendars={},gantt._calendars.calendarArgumentsHelper={getWorkHoursArguments:function(){var e=arguments[0];return e=e.date instanceof Date?{date:e}:gantt.mixin({},e)},setWorkTimeArguments:function(){return arguments[0]},unsetWorkTimeArguments:function(){return arguments[0]},isWorkTimeArguments:function(){var e=arguments[0];return e.date?(e=gantt.mixin({},e),e.unit=e.unit||gantt.config.duration_unit,e.task=e.task||null,e.calendar=e.calendar||null):(e={},e.date=arguments[0],e.unit=arguments[1],e.task=arguments[2],e.calendar=arguments[3]),e.unit=e.unit||gantt.config.duration_unit,e},getClosestWorkTimeArguments:function(e){return e=arguments[0],e=e instanceof Date?{date:e}:gantt.mixin({},e),e.dir=e.dir||"any",e.unit=e.unit||gantt.config.duration_unit,e},getDurationConfig:function(e,t,n,i){return this.start_date=e,this.end_date=t,this.task=n,this.calendar=i,this.unit=null,this.step=null,this},_getStartEndConfig:function(e){var t,n=gantt._calendars.calendarArgumentsHelper.getDurationConfig;return e instanceof n?e:(e instanceof Date?t=new n(arguments[0],arguments[1],arguments[2],arguments[3]):(t=new n(e.start_date,e.end_date,e.task),e.id&&(t.task=e)),t.unit=t.unit||gantt.config.duration_unit,t.step=t.step||gantt.config.duration_step,t.start_date=t.start_date||t.start||t.date,t)},getDurationArguments:function(e,t,n,i){return gantt._calendars.calendarArgumentsHelper._getStartEndConfig.apply(this,arguments)},hasDurationArguments:function(e,t,n,i){return gantt._calendars.calendarArgumentsHelper._getStartEndConfig.apply(this,arguments)},calculateEndDateArguments:function(e,t,n,i){var r=arguments[0];return r=r instanceof Date?{start_date:arguments[0],duration:arguments[1],unit:arguments[2],task:arguments[3],calendar:arguments[4]}:gantt.mixin({},r),r.unit=r.unit||gantt.config.duration_unit,r.step=r.step||gantt.config.duration_step,r}},gantt._calendars.calendarStrategy={units:["year","month","week","day","hour","minute"],_workingUnitsCache:{get:function(e,t){var n=-1,i=this._cache;if(i&&i[e]){var r=i[e],a=t.getTime();void 0!==r[a]&&(n=r[a])}return n},put:function(e,t,n){if(!e||!t)return!1;var i=this._cache,r=t.getTime();return n=!!n,!!i&&(i[e]||(i[e]={}),i[e][r]=n,!0)},clear:function(){this._cache={}}},_getUnitOrder:function(e){for(var t=0,n=this.units.length;n>t;t++)if(this.units[t]==e)return t},_timestamp:function(e){var t=null;return e.day||0===e.day?t=e.day:e.date&&(t=Date.UTC(e.date.getFullYear(),e.date.getMonth(),e.date.getDate())),t},_checkIfWorkingUnit:function(e,t,n){return void 0===n&&(n=this._getUnitOrder(t)),void 0===n||!(n&&!this._isWorkTime(e,this.units[n-1],n-1))&&(!this["_is_work_"+t]||this["_is_work_"+t](e))},_is_work_day:function(e){var t=this._getWorkHours(e);return t instanceof Array&&t.length>0},_is_work_hour:function(e){for(var t=this._getWorkHours(e),n=e.getHours(),i=0;i<t.length;i+=2){if(void 0===t[i+1])return t[i]==n;if(n>=t[i]&&n<t[i+1])return!0}return!1},_internDatesPull:{},_nextDate:function(e,t,n){return gantt.date.add(e,n,t)},_getWorkUnitsBetweenGeneric:function(e,t,n,i){var r=new Date(e),a=new Date(t);i=i||1;var o,s,l=0,u=null,c=!1;o=gantt.date[n+"_start"](new Date(r)),o.valueOf()!=r.valueOf()&&(c=!0);var h=!1;s=gantt.date[n+"_start"](new Date(t)),s.valueOf()!=t.valueOf()&&(h=!0);for(var f=!1;r.valueOf()<a.valueOf();)u=this._nextDate(r,n,i),f=u.valueOf()>a.valueOf(),this._isWorkTime(r,n)&&((c||h&&f)&&(o=gantt.date[n+"_start"](new Date(r)),s=gantt.date.add(o,i,n)),c?(c=!1,u=this._nextDate(o,n,i),l+=(s.valueOf()-r.valueOf())/(s.valueOf()-o.valueOf())):h&&f?(h=!1,l+=(a.valueOf()-r.valueOf())/(s.valueOf()-o.valueOf())):l++),r=u;return l},_getHoursPerDay:function(e){for(var t=this._getWorkHours(e),n=0,i=0;i<t.length;i+=2)n+=t[i+1]-t[i]||0;return n},_getWorkHoursForRange:function(e,t){for(var n=0,i=new Date(e),r=new Date(t);i.valueOf()<r.valueOf();)this._isWorkTime(i,"day")&&(n+=this._getHoursPerDay(i)),i=this._nextDate(i,"day",1);return n},_getWorkUnitsBetweenHours:function(e,t,n,i){var r=new Date(e),a=new Date(t);i=i||1;var o=new Date(r),s=gantt.date.add(gantt.date.day_start(new Date(r)),1,"day");if(a.valueOf()<=s.valueOf())return this._getWorkUnitsBetweenGeneric(e,t,n,i);var l=gantt.date.day_start(new Date(a)),u=a,c=this._getWorkUnitsBetweenGeneric(o,s,n,i),h=this._getWorkUnitsBetweenGeneric(l,u,n,i),f=this._getWorkHoursForRange(s,l);return f=f/i+c+h},_getCalendar:function(){return this.worktime},_setCalendar:function(e){this.worktime=e},_tryChangeCalendarSettings:function(e){var t=JSON.stringify(this._getCalendar());return e(),!this._isEmptyCalendar(this._getCalendar())||(gantt.assert(!1,"Invalid calendar settings, no worktime available"),this._setCalendar(JSON.parse(t)),this._workingUnitsCache.clear(),!1)},_isEmptyCalendar:function(e){var t=!1,n=[],i=!0;for(var r in e.dates)t|=!!e.dates[r],n.push(r);for(var a=[],r=0;r<n.length;r++)n[r]<10&&a.push(n[r]);a.sort();for(var r=0;7>r;r++)a[r]!=r&&(i=!1);return i?!t:!(t||e.hours)},getWorkHours:function(){var e=gantt._calendars.calendarArgumentsHelper.getWorkHoursArguments.apply(this,arguments);return this._getWorkHours(e.date)},_getWorkHours:function(e){var t=this._timestamp({date:e}),n=!0,i=this._getCalendar();return void 0!==i.dates[t]?n=i.dates[t]:void 0!==i.dates[e.getDay()]&&(n=i.dates[e.getDay()]),n===!0?i.hours:n?n:[]},setWorkTime:function(e){return this._tryChangeCalendarSettings(gantt.bind(function(){var t=void 0===e.hours||e.hours,n=this._timestamp(e);null!==n?this._getCalendar().dates[n]=t:this._getCalendar().hours=t,this._workingUnitsCache.clear()},this))},unsetWorkTime:function(e){return this._tryChangeCalendarSettings(gantt.bind(function(){if(e){var t=this._timestamp(e);
null!==t&&delete this._getCalendar().dates[t]}else this.reset_calendar();this._workingUnitsCache.clear()},this))},_isWorkTime:function(e,t,n){var i=this._workingUnitsCache.get(t,e);return-1==i&&(i=this._checkIfWorkingUnit(e,t,n),this._workingUnitsCache.put(t,e,i)),i},isWorkTime:function(){var e=gantt._calendars.calendarArgumentsHelper.isWorkTimeArguments.apply(this,arguments);return this._isWorkTime(e.date,e.unit)},calculateDuration:function(){var e=gantt._calendars.calendarArgumentsHelper.getDurationArguments.apply(this,arguments);if(!e.unit)return!1;var t=0;return t="hour"==e.unit?this._getWorkUnitsBetweenHours(e.start_date,e.end_date,e.unit,e.step):this._getWorkUnitsBetweenGeneric(e.start_date,e.end_date,e.unit,e.step),Math.round(t)},hasDuration:function(){var e=gantt._calendars.calendarArgumentsHelper.getDurationArguments.apply(this,arguments),t=e.start_date,n=e.end_date,i=e.unit,r=e.step;if(!i)return!1;var a=new Date(t),o=new Date(n);for(r=r||1;a.valueOf()<o.valueOf();){if(this._isWorkTime(a,i))return!0;a=this._nextDate(a,i,r)}return!1},calculateEndDate:function(){var e=gantt._calendars.calendarArgumentsHelper.calculateEndDateArguments.apply(this,arguments),t=e.start_date,n=e.duration,i=e.unit,r=e.step,a=e.duration>=0?1:-1;return this._calculateEndDate(t,n,i,r*a)},_calculateEndDate:function(e,t,n,i){if(!n)return!1;var r=new Date(e),a=0;for(i=i||1,t=Math.abs(1*t);t>a;){var o=this._nextDate(r,n,i);this._isWorkTime(i>0?new Date(o.valueOf()-1):new Date(o.valueOf()+1),n)&&a++,r=o}return r},getClosestWorkTime:function(){var e=gantt._calendars.calendarArgumentsHelper.getClosestWorkTimeArguments.apply(this,arguments);return this._getClosestWorkTime(e)},_getClosestWorkTime:function(e){if(this._isWorkTime(e.date,e.unit))return e.date;var t=e.unit,n=gantt.date[t+"_start"](e.date),i=new Date(n),r=new Date(n),a=!0,o=3e3,s=0,l="any"==e.dir||!e.dir,u=1;for("past"==e.dir&&(u=-1);!this._isWorkTime(n,t);){l&&(n=a?i:r,u=-1*u);var c=n.getTimezoneOffset();if(n=gantt.date.add(n,u,t),n=gantt._correct_dst_change(n,c,u,t),gantt.date[t+"_start"]&&(n=gantt.date[t+"_start"](n)),l&&(a?i=n:r=n),a=!a,s++,s>o)return gantt.assert(!1,"Invalid working time check"),!1}return(n==r||"past"==e.dir)&&(n=gantt.date.add(n,1,t)),n}},gantt._calendars.disabledWorkTimeCalendar={getWorkHours:function(){return[0,24]},setWorkTime:function(){return!0},unsetWorkTime:function(){return!0},isWorkTime:function(){return!0},getClosestWorkTime:function(e){var e=gantt._calendars.calendarArgumentsHelper.getClosestWorkTimeArguments.apply(this,arguments);return e.date},calculateDuration:function(){var e=gantt._calendars.calendarArgumentsHelper.getDurationArguments.apply(this,arguments),t=e.start_date,n=e.end_date,i=e.unit,r=e.step;return this._calculateDuration(t,n,i,r)},_calculateDuration:function(e,t,n,i){var r={week:6048e5,day:864e5,hour:36e5,minute:6e4},a=0;if(r[n])a=Math.round((t-e)/(i*r[n]));else{for(var o=new Date(e),s=new Date(t);o.valueOf()<s.valueOf();)a+=1,o=gantt.date.add(o,i,n);o.valueOf()!=t.valueOf()&&(a+=(s-o)/(gantt.date.add(o,i,n)-o))}return Math.round(a)},hasDuration:function(){var e=gantt._calendars.calendarArgumentsHelper.getDurationArguments.apply(this,arguments),t=e.start_date,n=e.end_date,i=e.unit;return e.step,!!i&&(t=new Date(t),n=new Date(n),t.valueOf()<n.valueOf())},calculateEndDate:function(){var e=gantt._calendars.calendarArgumentsHelper.calculateEndDateArguments.apply(this,arguments),t=e.start_date,n=e.duration,i=e.unit,r=e.step;return gantt.date.add(t,r*n,i)}},function(){var e=function(){this._cache={}};e.prototype=gantt._calendars.calendarStrategy._workingUnitsCache,gantt._calendars.CalendarAPICore=function(){this._workingUnitsCache=new e},gantt._calendars.CalendarAPICore.prototype=gantt._calendars.calendarStrategy}(),gantt._calendars.calendarManager={_calendars:{},_getDayHoursForMultiple:function(e,t){for(var n=[],i=!0,r=0,a=!1,o=gantt.date.day_start(new Date(t)),s=0;24>s;s++)a=e.reduce(function(e,t){return e&&t._is_work_hour(o)},!0),a?(i?(n[r]=s,n[r+1]=s+1,r+=2):n[r-1]+=1,i=!1):i||(i=!0),o=gantt.date.add(o,1,"hour");return n.length||(n=!1),n},mergeCalendars:function(){var e,t=this.createCalendar(),n=[],i=Array.prototype.slice.call(arguments,0);t.worktime.hours=[0,24],t.worktime.dates={};var r=gantt.date.day_start(new Date(2592e5));for(e=0;7>e;e++)n=this._getDayHoursForMultiple(i,r),t.worktime.dates[e]=n,r=gantt.date.add(r,1,"day");for(var a=0;a<i.length;a++)for(var o in i[a].worktime.dates)+o>1e4&&(n=this._getDayHoursForMultiple(i,new Date((+o))),t.worktime.dates[o]=n);return t},_convertWorktimeSettings:function(e){var t=e.days;if(t){e.dates=e.dates||{};for(var n=0;n<t.length;n++)e.dates[n]=t[n],t[n]instanceof Array||(e.dates[n]=!!t[n]);delete e.days}return e},createCalendar:function(e){var t;e||(e={}),t=e.worktime?gantt.copy(e.worktime):gantt.copy(e);var n=gantt.copy(this.defaults.fulltime.worktime);gantt.mixin(t,n);var i=gantt.uid(),r={id:i+"",worktime:this._convertWorktimeSettings(t)},a=new gantt._calendars.CalendarAPICore;return gantt.mixin(a,r),a._tryChangeCalendarSettings(function(){})?a:null},getCalendar:function(e){return e=e||"global",this.createDefaultCalendars(),this._calendars[e]},getCalendars:function(){var e=[];for(var t in this._calendars)e.push(this.getCalendar(t));return e},getTaskCalendar:function(e){if(!e)return this.getCalendar();if(e[gantt.config.calendar_property])return this.getCalendar(e[gantt.config.calendar_property]);if(gantt.config.resource_calendars)for(var t in gantt.config.resource_calendars){var n=gantt.config.resource_calendars[t];if(e[t]){var i=n[e[t]];if(i)return this.getCalendar(i)}}return this.getCalendar()},addCalendar:function(e){if(!(e instanceof gantt._calendars.CalendarAPICore)){var t=e.id;e=this.createCalendar(e),e.id=t}return e.id=e.id||gantt.uid(),this._calendars[e.id]=e,gantt.config.worktimes||(gantt.config.worktimes={}),gantt.config.worktimes[e.id]=e.worktime,e.id},deleteCalendar:function(e){e&&this._calendars[e.id]&&delete this._calendars[e.id],gantt.config.worktimes&&gantt.config.worktimes[e.id]&&delete gantt.config.worktimes[e.id]},restoreConfigCalendars:function(e){for(var t in e)if(!this._calendars[t]){var n=e[t],i=this.createCalendar(n);i.id=t,this.addCalendar(i)}},defaults:{global:{id:"global",worktime:{hours:[8,17],days:[0,1,1,1,1,1,0]}},fulltime:{id:"fulltime",worktime:{hours:[0,24],days:[1,1,1,1,1,1,1]}}},createDefaultCalendars:function(){this.restoreConfigCalendars(this.defaults),this.restoreConfigCalendars(gantt.config.worktimes)}},gantt._timeCalculator={_getCalendar:function(e){var t;if(gantt.config.work_time){var n=gantt._calendars.calendarManager;e.task?t=n.getTaskCalendar(e.task):e.id?t=n.getTaskCalendar(e):e.calendar&&(t=e.calendar),t||(t=n.getTaskCalendar())}else t=gantt._calendars.disabledWorkTimeCalendar;return t},getWorkHours:function(e){e=gantt._calendars.calendarArgumentsHelper.getWorkHoursArguments.apply(this,arguments);var t=this._getCalendar(e);return t.getWorkHours(e.date)},setWorkTime:function(e,t){return e=gantt._calendars.calendarArgumentsHelper.setWorkTimeArguments.apply(this,arguments),t||(t=gantt._calendars.calendarManager.getCalendar()),t.setWorkTime(e)},unsetWorkTime:function(e,t){return e=gantt._calendars.calendarArgumentsHelper.unsetWorkTimeArguments.apply(this,arguments),t||(t=gantt._calendars.calendarManager.getCalendar()),t.unsetWorkTime(e)},isWorkTime:function(e,t,n,i){var r=gantt._calendars.calendarArgumentsHelper.isWorkTimeArguments.apply(this,arguments);return i=this._getCalendar(r),i.isWorkTime(r)},getClosestWorkTime:function(e){e=gantt._calendars.calendarArgumentsHelper.getClosestWorkTimeArguments.apply(this,arguments);var t=this._getCalendar(e);return t.getClosestWorkTime(e)},calculateDuration:function(){var e=gantt._calendars.calendarArgumentsHelper.getDurationArguments.apply(this,arguments),t=this._getCalendar(e);return t.calculateDuration(e)},hasDuration:function(){var e=gantt._calendars.calendarArgumentsHelper.hasDurationArguments.apply(this,arguments),t=this._getCalendar(e);return t.hasDuration(e)},calculateEndDate:function(e){var e=gantt._calendars.calendarArgumentsHelper.calculateEndDateArguments.apply(this,arguments),t=this._getCalendar(e);return t.calculateEndDate(e)}},function(){var e=gantt._calendars.calendarManager;gantt.createCalendar=gantt.bind(e.createCalendar,e),gantt.addCalendar=gantt.bind(e.addCalendar,e),gantt.getCalendar=gantt.bind(e.getCalendar,e),gantt.getCalendars=gantt.bind(e.getCalendars,e),gantt.getTaskCalendar=gantt.bind(e.getTaskCalendar,e),gantt.deleteCalendar=gantt.bind(e.deleteCalendar,e)}(),gantt.getTask=function(e){gantt.assert(e,"Invalid argument for gantt.getTask");var t=this._pull[e];return gantt.assert(t,"Task not found id="+e),t},gantt.getTaskByTime=function(e,t){var n=this._pull,i=[];if(e||t){e=+e||-(1/0),t=+t||1/0;for(var r in n){var a=n[r];+a.start_date<t&&+a.end_date>e&&i.push(a)}}else for(var r in n)i.push(n[r]);return i},gantt.isTaskExists=function(e){return gantt.defined(this._pull[e])},gantt.isUnscheduledTask=function(e){return!!e.unscheduled||!e.start_date},gantt._isAllowedUnscheduledTask=function(e){return!(!e.unscheduled||!gantt.config.show_unscheduled)},gantt.isTaskVisible=function(e){if(!this._pull[e])return!1;var t=this._pull[e];return!(!(+t.start_date<+this._max_date&&+t.end_date>+this._min_date||gantt._isAllowedUnscheduledTask(t))||void 0===this._order_search[e])},gantt.updateTask=function(e,t){return gantt.defined(t)||(t=this.getTask(e)),this.callEvent("onBeforeTaskUpdate",[e,t])!==!1&&(this._pull[t.id]=t,this._is_parent_sync(t)||this._resync_parent(t),this._isAllowedUnscheduledTask(t)&&(this._init_task(t),this._sync_links()),this._update_parents(t.id),this.refreshTask(t.id),this._sync_order(!0),this.callEvent("onAfterTaskUpdate",[e,t]),void this._adjust_scales())},gantt._add_branch=function(e,t){var n=this.getParent(e);this.hasChild(n)||(this._branches[n]=[]);for(var i=this.getChildren(n),r=!1,a=0,o=i.length;o>a;a++)if(i[a]==e.id){r=!0;break}r||(1*t==t?i.splice(t,0,e.id):i.push(e.id)),this._sync_parent(e)},gantt._move_branch=function(e,t,n){this.setParent(e,n),this._sync_parent(e),this._replace_branch_child(t,e.id),this.isTaskExists(n)||n==this.config.root_id?this._add_branch(e):delete this._branches[e.id],e.$level=this.calculateTaskLevel(e),this.eachTask(function(e){e.$level=this.calculateTaskLevel(e)},e.id),this._sync_order()},gantt._resync_parent=function(e){this._move_branch(e,e.$rendered_parent,this.getParent(e))},gantt._sync_parent=function(e){e.$rendered_parent=this.getParent(e)},gantt._is_parent_sync=function(e){return e.$rendered_parent==this.getParent(e)},gantt._replace_branch_child=function(e,t,n){var i=this.getChildren(e);if(i){for(var r=[],a=0;a<i.length;a++)i[a]!=t?r.push(i[a]):n&&r.push(n);this._branches[e]=r}this._sync_order()},gantt.addTask=function(e,t,n){return gantt.defined(e.id)||(e.id=gantt.uid()),gantt.defined(t)||(t=this.getParent(e)||0),this.isTaskExists(t)||(t=0),this.setParent(e,t),e=this._init_task(e),this.callEvent("onBeforeTaskAdd",[e.id,e])!==!1&&(this._pull[e.id]=e,this._add_branch(e,n),this._sync_order(!0),this.callEvent("onAfterTaskAdd",[e.id,e]),this.refreshData(),this._adjust_scales(),e.id)},gantt._default_task_date=function(e,t){var n=!(!t||t==this.config.root_id)&&this.getTask(t),i="";if(n)i=n.start_date;else{var r=this._order[0];i=r?this.getTask(r).start_date?this.getTask(r).start_date:this.getTask(r).end_date?this.calculateEndDate({start_date:this.getTask(r).end_date,duration:-this.config.duration_step}):"":this.config.start_date||this.getState().min_date}return gantt.assert(i,"Invalid dates"),new Date(i)},gantt._set_default_task_timing=function(e){e.start_date=e.start_date||gantt._default_task_date(e,this.getParent(e)),e.duration=e.duration||this.config.duration_step,e.end_date=e.end_date||this.calculateEndDate(e)},gantt.createTask=function(e,t,n){if(e=e||{},gantt.defined(e.id)||(e.id=gantt.uid()),e.start_date||(e.start_date=gantt._default_task_date(e,t)),void 0===e.text&&(e.text=gantt.locale.labels.new_task),void 0===e.duration&&(e.duration=1),t){this.setParent(e,t);var i=this.getTask(t);i.$open=!0}return this.callEvent("onTaskCreated",[e])?(this.config.details_on_create?(e.$new=!0,this._pull[e.id]=this._init_task(e),this._add_branch(e,n),e.$level=this.calculateTaskLevel(e),this.selectTask(e.id),this.refreshData(),this.showLightbox(e.id)):this.addTask(e,t,n)&&(this.showTask(e.id),this.selectTask(e.id)),e.id):null},gantt.deleteTask=function(e){return this._deleteTask(e)},gantt._getChildLinks=function(e){var t=this.getTask(e);if(!t)return[];for(var n=t.$source.concat(t.$target),i=this.getChildren(t.id),r=0;r<i.length;r++)n=n.concat(this._getChildLinks(i[r]));for(var a={},r=0;r<n.length;r++)a[n[r]]=!0;n=[];for(var r in a)this.isLinkExists(r)&&n.push(r);return n},gantt._getTaskTree=function(e){var t=this.getTask(e);if(!t)return[];for(var n=[],i=this.getChildren(t.id),r=0;r<i.length;r++)n.push(i[r]),n=n.concat(this._getTaskTree(i[r]));return n},gantt._deleteRelatedLinks=function(e,t){var n=this._dp&&!t&&this.config.cascade_delete,i="",r=!!n&&"off"!=this._dp.updateMode;n&&(i=this._dp.updateMode,this._dp.setUpdateMode("off"));for(var a=0;a<e.length;a++)n&&(this._dp.setGanttMode("links"),this._dp.setUpdated(e[a],!0,"deleted")),this._deleteLink(e[a],!0);n&&(this._dp.setUpdateMode(i),r&&this._dp.sendAllData())},gantt._deleteRelatedTasks=function(e,t){var n=this._dp&&!t&&this.config.cascade_delete,i="";n&&(i=this._dp.updateMode,this._dp.setGanttMode("tasks"),this._dp.setUpdateMode("off"));for(var r=this._getTaskTree(e),a=0;a<r.length;a++){var o=r[a];this._unset_task(o),n&&this._dp.setUpdated(o,!0,"deleted")}n&&this._dp.setUpdateMode(i)},gantt._unset_task=function(e){var t=this.getTask(e);this._update_flags(e,null),delete this._pull[e],this._move_branch(t,this.getParent(t),null)},gantt._deleteTask=function(e,t){var n=this.getTask(e);if(!t&&this.callEvent("onBeforeTaskDelete",[e,n])===!1)return!1;var i=gantt._getChildLinks(e);return this._deleteRelatedTasks(e,t),this._deleteRelatedLinks(i,t),this._unset_task(e),t||(this._sync_order(!0),this.callEvent("onAfterTaskDelete",[e,n]),this.refreshData()),!0},gantt.clearAll=function(){this._clear_data(),this.callEvent("onClear",[]),this.refreshData()},gantt._clear_data=function(){this._pull={},this._branches={},this._order=[],this._order_full=[],this._lpull={},this._links=[],this._update_flags(),this.userdata={}},gantt._update_flags=function(e,t){void 0===e?(this._lightbox_id=this._selected_task=null,this._tasks_dnd.drag&&(this._tasks_dnd.drag.id=null)):(this._lightbox_id==e&&(this._lightbox_id=t),this._selected_task==e&&(this._selected_task=t),this._tasks_dnd.drag&&this._tasks_dnd.drag.id==e&&(this._tasks_dnd.drag.id=t))},gantt.changeTaskId=function(e,t){var n=this._pull[t]=this._pull[e];this._pull[t].id=t,delete this._pull[e],this._update_flags(e,t),this._replace_branch_child(this.getParent(n),e,t);for(var i in this._pull){var r=this._pull[i];this.getParent(r)==e&&(this.setParent(r,t),this._resync_parent(r))}for(var a=this._get_task_links(n),o=0;o<a.length;o++){var s=this.getLink(a[o]);s.source==e&&(s.source=t),s.target==e&&(s.target=t)}this.callEvent("onTaskIdChange",[e,t])},gantt._get_task_links=function(e){var t=[];return e.$source&&(t=t.concat(e.$source)),e.$target&&(t=t.concat(e.$target)),t},gantt._get_duration_unit=function(){return 1e3*gantt._get_line(this.config.duration_unit)||this.config.duration_unit},gantt._get_safe_type=function(e){return"task"},gantt._get_type_name=function(e){for(var t in this.config.types)if(this.config.types[t]==e)return t;return"task"},gantt.getWorkHours=function(e){return gantt._timeCalculator.getWorkHours(e)},gantt.setWorkTime=function(e){return gantt._timeCalculator.setWorkTime(e)},gantt.unsetWorkTime=function(e){gantt._timeCalculator.unsetWorkTime(e)},gantt.isWorkTime=function(e,t,n){return gantt._timeCalculator.isWorkTime(e,t,n)},gantt.correctTaskWorkTime=function(e){gantt.config.work_time&&gantt.config.correct_work_time&&(gantt.isWorkTime(e.start_date,e)?gantt.isWorkTime(new Date(+e.end_date-1),e)||(e.end_date=gantt.calculateEndDate(e)):(e.start_date=gantt.getClosestWorkTime({date:e.start_date,dir:"future",task:e}),e.end_date=gantt.calculateEndDate(e)))},gantt.getClosestWorkTime=function(e){return gantt._timeCalculator.getClosestWorkTime(e)},gantt.calculateDuration=function(e,t,n){return gantt._timeCalculator.calculateDuration(e,t,n)},gantt._hasDuration=function(e,t,n){return gantt._timeCalculator.hasDuration(e,t,n)},gantt.calculateEndDate=function(e,t,n,i){return gantt._timeCalculator.calculateEndDate(e,t,n,i)},gantt._init_task=function(e){gantt.defined(e.id)||(e.id=gantt.uid()),e.start_date&&(e.start_date=gantt.date.parseDate(e.start_date,"xml_date")),e.end_date&&(e.end_date=gantt.date.parseDate(e.end_date,"xml_date"));var t=null;return(e.duration||0===e.duration)&&(e.duration=t=1*e.duration),t&&(e.start_date&&!e.end_date?e.end_date=this.calculateEndDate(e):!e.start_date&&e.end_date&&(e.start_date=this.calculateEndDate({start_date:e.end_date,duration:-e.duration,task:e}))),this._isAllowedUnscheduledTask(e)&&this._set_default_task_timing(e),gantt._init_task_timing(e),e.start_date&&e.end_date&&gantt.correctTaskWorkTime(e),e.$source=[],e.$target=[],void 0===e.parent&&this.setParent(e,this.config.root_id),gantt.defined(e.$open)||(e.$open=gantt.defined(e.open)?e.open:this.config.open_tree_initially),e.$level=this.calculateTaskLevel(e),e},gantt._get_task_timing_mode=function(e,t){var n=this._get_safe_type(e.type),i={type:n,$no_start:!1,$no_end:!1};return t||n!=e.$rendered_type?(n==this.config.types.project?i.$no_end=i.$no_start=!0:n!=this.config.types.milestone&&(i.$no_end=!(e.end_date||e.duration),i.$no_start=!e.start_date,this._isAllowedUnscheduledTask(e)&&(i.$no_end=i.$no_start=!1)),i):(i.$no_start=e.$no_start,i.$no_end=e.$no_end,i)},gantt._init_task_timing=function(e){var t=gantt._get_task_timing_mode(e,!0),n=e.$rendered_type!=t.type,i=t.type;n&&(e.$no_start=t.$no_start,e.$no_end=t.$no_end,e.$rendered_type=t.type),n&&i!=this.config.types.milestone&&i==this.config.types.project&&this._set_default_task_timing(e),i==this.config.types.milestone&&(e.end_date=e.start_date),e.start_date&&e.end_date&&(e.duration=this.calculateDuration(e)),e.duration=e.duration||0},gantt._is_flex_task=function(e){var t=gantt._get_task_timing_mode(e);return!(!t.$no_end&&!t.$no_start)},gantt.resetProjectDates=function(e){var t=this._get_task_timing_mode(e);if(t.$no_end||t.$no_start){var n=this.getSubtaskDates(e.id);this._assign_project_dates(e,n.start_date,n.end_date)}},gantt.getSubtaskDates=function(e){var t=null,n=null,i=void 0!==e?e:gantt.config.root_id;return this.eachTask(function(e){this._get_safe_type(e.type)==gantt.config.types.project||this.isUnscheduledTask(e)||(e.start_date&&!e.$no_start&&(!t||t>e.start_date.valueOf())&&(t=e.start_date.valueOf()),e.end_date&&!e.$no_end&&(!n||n<e.end_date.valueOf())&&(n=e.end_date.valueOf()))},i),{start_date:t?new Date(t):null,end_date:n?new Date(n):null}},gantt._assign_project_dates=function(e,t,n){var i=this._get_task_timing_mode(e);i.$no_start&&(t&&t!=1/0?e.start_date=new Date(t):e.start_date=this._default_task_date(e,this.getParent(e))),i.$no_end&&(n&&n!=-(1/0)?e.end_date=new Date(n):e.end_date=this.calculateEndDate({start_date:e.start_date,duration:this.config.duration_step,task:e})),(i.$no_start||i.$no_end)&&this._init_task_timing(e)},gantt._update_parents=function(e,t){if(e){var n=this.getTask(e),i=this.getParent(n),r=this._get_task_timing_mode(n),a=!0;if(r.$no_start||r.$no_end){var o=n.start_date.valueOf(),s=n.end_date.valueOf();gantt.resetProjectDates(n),o==n.start_date.valueOf()&&s==n.end_date.valueOf()&&(a=!1),a&&!t&&this.refreshTask(n.id,!0)}a&&i&&this.isTaskExists(i)&&this._update_parents(i,t)}},gantt.isChildOf=function(e,t){if(!this.isTaskExists(e))return!1;if(t===this.config.root_id)return this.isTaskExists(e);for(var n=this.getTask(e),i=this.getParent(e);n&&this.isTaskExists(i);){if(n=this.getTask(i),n&&n.id==t)return!0;i=this.getParent(n)}return!1},gantt.roundDate=function(e){e instanceof Date&&(e={date:e,unit:gantt._tasks.unit,step:gantt._tasks.step});var t,n,i,r=e.date,a=e.step,o=e.unit;if(o==gantt._tasks.unit&&a==gantt._tasks.step&&+r>=+gantt._min_date&&+r<=+gantt._max_date)i=Math.floor(gantt._day_index_by_date(r)),gantt._tasks.trace_x[i]||(i-=1),n=new Date(gantt._tasks.trace_x[i]),t=new Date(n),t=gantt._tasks.trace_x[i+1]?new Date(gantt._tasks.trace_x[i+1]):gantt.date.add(n,a,o);else{for(i=Math.floor(gantt._day_index_by_date(r)),t=gantt.date[o+"_start"](new Date(this._min_date)),gantt._tasks.trace_x[i]&&(t=gantt.date[o+"_start"](gantt._tasks.trace_x[i]));+r>+t;){t=gantt.date[o+"_start"](gantt.date.add(t,a,o));var s=t.getTimezoneOffset();t=gantt._correct_dst_change(t,s,t,o),gantt.date[o+"_start"]&&(t=gantt.date[o+"_start"](t))}n=gantt.date.add(t,-1*a,o)}return e.dir&&"future"==e.dir?t:e.dir&&"past"==e.dir?n:Math.abs(r-n)<Math.abs(t-r)?n:t},gantt.attachEvent("onBeforeTaskUpdate",function(e,t){return gantt._init_task_timing(t),!0}),gantt.attachEvent("onBeforeTaskAdd",function(e,t){return gantt._init_task_timing(t),!0}),gantt.calculateTaskLevel=function(e){var t=0;return this._eachParent(function(){t++},e),t},gantt.sort=function(e,t,n,i){var r=!i;this.isTaskExists(n)||(n=this.config.root_id),e||(e="order");var a="string"==typeof e?function(t,n){if(t[e]==n[e])return 0;var i=t[e]>n[e];return i?1:-1}:e;if(t){var o=a;a=function(e,t){return o(t,e)}}var s=this.getChildren(n);if(s){for(var l=[],u=s.length-1;u>=0;u--)l[u]=this._pull[s[u]];l.sort(a);for(var u=0;u<l.length;u++)s[u]=l[u].id,this.sort(e,t,s[u],!0)}r&&this.render()},gantt.getNext=function(e){for(var t=0;t<this._order.length-1;t++)if(this._order[t]==e)return this._order[t+1];return null},gantt.getPrev=function(e){for(var t=1;t<this._order.length;t++)if(this._order[t]==e)return this._order[t-1];return null},gantt._get_parent_id=function(e){var t=this.config.root_id;return e&&(t=e.parent),t},gantt.getParent=function(e){var t=null;return t=void 0!==e.id?e:gantt.getTask(e),this._get_parent_id(t)},gantt.setParent=function(e,t){e.parent=t},gantt.getSiblings=function(e){if(!this.isTaskExists(e))return[];var t=this.getParent(e);return this.getChildren(t)},gantt.getNextSibling=function(e){for(var t=this.getSiblings(e),n=0,i=t.length;i>n;n++)if(t[n]==e)return t[n+1]||null;return null},gantt.getPrevSibling=function(e){for(var t=this.getSiblings(e),n=0,i=t.length;i>n;n++)if(t[n]==e)return t[n-1]||null;return null},gantt._dp_init=function(e){function t(t){for(var n=e.updatedRows.slice(),i=!1,r=0;r<n.length&&!e._in_progress[t];r++)n[r]==t&&("inserted"==gantt.getUserData(t,"!nativeeditor_status")&&(i=!0),e.setUpdated(t,!1));return i}e.setTransactionMode("POST",!0),e.serverProcessor+=(-1!=e.serverProcessor.indexOf("?")?"&":"?")+"editing=true",e._serverProcessor=e.serverProcessor,e.styles={updated:"gantt_updated",order:"gantt_updated",inserted:"gantt_inserted",deleted:"gantt_deleted",invalid:"gantt_invalid",error:"gantt_error",clear:""},e._methods=["_row_style","setCellTextStyle","_change_id","_delete_task"],e.setGanttMode=function(t){var n=e.modes||{};e._ganttMode&&(n[e._ganttMode]={_in_progress:e._in_progress,_invalid:e._invalid,updatedRows:e.updatedRows});var i=n[t];i||(i=n[t]={_in_progress:{},_invalid:{},updatedRows:[]}),e._in_progress=i._in_progress,e._invalid=i._invalid,e.updatedRows=i.updatedRows,e.modes=n,e._ganttMode=t},this._sendTaskOrder=function(t,n){n.$drop_target&&(e.setGanttMode("tasks"),this.getTask(t).target=n.$drop_target,e.setUpdated(t,!0,"order"),delete this.getTask(t).$drop_target)},this.attachEvent("onAfterTaskAdd",function(t,n){e.setGanttMode("tasks"),e.setUpdated(t,!0,"inserted")}),this.attachEvent("onAfterTaskUpdate",function(t,n){e.setGanttMode("tasks"),e.setUpdated(t,!0),gantt._sendTaskOrder(t,n)}),this.attachEvent("onAfterTaskDelete",function(n,i){e.setGanttMode("tasks");var r=!t(n);r&&(e.setUpdated(n,!0,"deleted"),"off"==e.updateMode||e._tSend||e.sendAllData())}),this.attachEvent("onAfterLinkUpdate",function(t,n){e.setGanttMode("links"),e.setUpdated(t,!0)}),this.attachEvent("onAfterLinkAdd",function(t,n){e.setGanttMode("links"),e.setUpdated(t,!0,"inserted")}),this.attachEvent("onAfterLinkDelete",function(n,i){e.setGanttMode("links");var r=!t(n);r&&e.setUpdated(n,!0,"deleted")}),this.attachEvent("onRowDragEnd",function(e,t){gantt._sendTaskOrder(e,gantt.getTask(e))});var n=null,i=null;this.attachEvent("onTaskIdChange",function(t,r){if(e._waitMode){var a=gantt.getChildren(r);if(a.length){n=n||{};for(var o=0;o<a.length;o++){var s=this.getTask(a[o]);n[s.id]=s}}var l=this.getTask(r),u=this._get_task_links(l);if(u.length){i=i||{};for(var o=0;o<u.length;o++){var c=this.getLink(u[o]);i[c.id]=c}}}}),e.attachEvent("onAfterUpdateFinish",function(){(n||i)&&(gantt.batchUpdate(function(){for(var e in n)gantt.updateTask(n[e].id);for(var e in i)gantt.updateLink(i[e].id);n=null,i=null}),n?gantt._dp.setGanttMode("tasks"):gantt._dp.setGanttMode("links"))}),e.attachEvent("onBeforeDataSending",function(){var e=this._serverProcessor;if("REST"==this._tMode){var t=this._ganttMode.substr(0,this._ganttMode.length-1);e=e.substring(0,e.indexOf("?")>-1?e.indexOf("?"):e.length),this.serverProcessor=e+("/"==e.slice(-1)?"":"/")+t}else this.serverProcessor=e+gantt._urlSeparator(e)+"gantt_mode="+this._ganttMode;return!0}),this._init_dp_live_update_hooks(e);var r=e.afterUpdate;e.afterUpdate=function(){var t;t=3==arguments.length?arguments[1]:arguments[4];var n=e._ganttMode,i=t.filePath;n="REST"!=this._tMode?-1!=i.indexOf("gantt_mode=links")?"links":"tasks":i.indexOf("/link")>i.indexOf("/task")?"links":"tasks",e.setGanttMode(n);var a=r.apply(e,arguments);return e.setGanttMode(n),a},e._getRowData=gantt.bind(function(t,n){var i;i="tasks"==e._ganttMode?this.isTaskExists(t)?this.getTask(t):{id:t}:this.isLinkExists(t)?this.getLink(t):{id:t},i=gantt.copy(i);var r={};for(var a in i)if("$"!=a.substr(0,1)){var o=i[a];o instanceof Date?r[a]=this.templates.xml_format(o):null===o?r[a]="":r[a]=o}var s=this._get_task_timing_mode(i);return s.$no_start&&(i.start_date="",i.duration=""),s.$no_end&&(i.end_date="",i.duration=""),r[e.action_param]=this.getUserData(t,e.action_param),r},this),this._change_id=gantt.bind(function(t,n){"tasks"!=e._ganttMode?this.changeLinkId(t,n):this.changeTaskId(t,n)},this),this._row_style=function(t,n){if("tasks"==e._ganttMode&&gantt.isTaskExists(t)){var i=gantt.getTask(t);i.$dataprocessor_class=n,gantt.refreshTask(t)}},this._delete_task=function(e,t){},this._dp=e},gantt.getUserData=function(e,t){return this.userdata||(this.userdata={}),this.userdata[e]&&this.userdata[e][t]?this.userdata[e][t]:""},gantt.setUserData=function(e,t,n){this.userdata||(this.userdata={}),this.userdata[e]||(this.userdata[e]={}),this.userdata[e][t]=n},gantt._init_link=function(e){return gantt.defined(e.id)||(e.id=gantt.uid()),e},gantt._sync_links=function(){for(var e=null,t=0,n=this._order_full.length;n>t;t++)e=this._pull[this._order_full[t]],e.$source=[],e.$target=[];this._links=[];for(var i in this._lpull){var r=this._lpull[i];this._links.push(r),this._pull[r.source]&&this._pull[r.source].$source.push(i),this._pull[r.target]&&this._pull[r.target].$target.push(i)}},gantt.getLink=function(e){return gantt.assert(this._lpull[e],"Link doesn't exist"),this._lpull[e]},gantt._get_linked_task=function(e,t){var n=null,i=t?e.target:e.source;gantt.isTaskExists(i)&&(n=gantt.getTask(i));var r=t?"target":"source";return gantt.assert(n,"Link "+r+" not found. Task id="+i+", link id="+e.id),n},gantt._get_link_target=function(e){return gantt._get_linked_task(e,!0)},gantt._get_link_source=function(e){return gantt._get_linked_task(e,!1)},gantt.getLinks=function(){var e=[];for(var t in gantt._lpull)e.push(gantt._lpull[t]);return e},gantt.isLinkExists=function(e){return gantt.defined(this._lpull[e])},gantt.addLink=function(e){return e=this._init_link(e),this.callEvent("onBeforeLinkAdd",[e.id,e])!==!1&&(this._lpull[e.id]=e,this._sync_links(),this._render_link(e.id),this.callEvent("onAfterLinkAdd",[e.id,e]),e.id)},gantt.updateLink=function(e,t){return gantt.defined(t)||(t=this.getLink(e)),this.callEvent("onBeforeLinkUpdate",[e,t])!==!1&&(this._lpull[e]=t,this._sync_links(),this._render_link(e),this.callEvent("onAfterLinkUpdate",[e,t]),!0)},gantt.deleteLink=function(e){return this._deleteLink(e)},gantt._deleteLink=function(e,t){var n=this.getLink(e);return!(!t&&this.callEvent("onBeforeLinkDelete",[e,n])===!1)&&(delete this._lpull[e],this._sync_links(),this.refreshLink(e),t||this.callEvent("onAfterLinkDelete",[e,n]),!0)},gantt.changeLinkId=function(e,t){this._lpull[e]&&(this._lpull[t]=this._lpull[e],this._lpull[t].id=t,delete this._lpull[e],this._sync_links(),this.callEvent("onLinkIdChange",[e,t]))},gantt.getChildren=function(e){return gantt.defined(this._branches[e])?this._branches[e]:[]},gantt.hasChild=function(e){return gantt.defined(this._branches[e])&&this._branches[e].length},gantt.refreshData=function(){this._render_data()},gantt._isTask=function(e){var t=this._get_task_timing_mode(e);return!(e.type&&e.type==gantt.config.types.project||t.$no_start||t.$no_end)},gantt._isProject=function(e){return!this._isTask(e)},gantt._configure=function(e,t,n){for(var i in t)("undefined"==typeof e[i]||n)&&(e[i]=t[i])},gantt._init_skin=function(){gantt._get_skin(!1),gantt._init_skin=function(){}},gantt._get_skin=function(e){var t=gantt.skin;if(!t||e)for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var r=n[i].href.match("dhtmlxgantt_([a-z_]+).css");if(r&&(gantt.skins[r[1]]||!t)){t=r[1];break}}gantt.skin=t||"terrace";var a=gantt.skins[gantt.skin]||gantt.skins.terrace;this._configure(gantt.config,a.config,e);var o=gantt.getGridColumns();o[1]&&"undefined"==typeof o[1].width&&(o[1].width=a._second_column_width),o[2]&&"undefined"==typeof o[2].width&&(o[2].width=a._third_column_width),a._lightbox_template&&(gantt._lightbox_template=a._lightbox_template),gantt.resetLightbox()},gantt.resetSkin=function(){this.skin="",this._get_skin(!0)},gantt.skins={},gantt._lightbox_methods={},gantt._lightbox_template="<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>",gantt.showLightbox=function(e){if(e&&!gantt._is_readonly(this.getTask(e))&&this.callEvent("onBeforeLightbox",[e])){var t=this.getTask(e),n=this.getLightbox(this._get_safe_type(t.type));this._center_lightbox(n),this.showCover(),this._fill_lightbox(e,n),this._waiAria.lightboxVisibleAttr(n),this.callEvent("onLightbox",[e])}},gantt._get_timepicker_step=function(){if(this.config.round_dnd_dates){var e=gantt._tasks,t=this._get_line(e.unit)*e.step/60;return(t>=1440||!this._is_chart_visible())&&(t=this.config.time_step),t}return this.config.time_step},gantt.getLabel=function(e,t){for(var n=this._get_typed_lightbox_config(),i=0;i<n.length;i++)if(n[i].map_to==e)for(var r=n[i].options,a=0;a<r.length;a++)if(r[a].key==t)return r[a].label;return""},gantt.updateCollection=function(e,t){t=t.slice(0);var n=gantt.serverList(e);return!!n&&(n.splice(0,n.length),n.push.apply(n,t||[]),void gantt.resetLightbox())},gantt.getLightboxType=function(){return this._get_safe_type(this._lightbox_type)},gantt.getLightbox=function(e){if(void 0===e&&(e=this.getLightboxType()),!this._lightbox||this.getLightboxType()!=this._get_safe_type(e)){this._lightbox_type=this._get_safe_type(e);var t=document.createElement("DIV");t.className="gantt_cal_light";var n=this._is_lightbox_timepicker();(gantt.config.wide_form||n)&&(t.className+=" gantt_cal_light_wide"),n&&(gantt.config.wide_form=!0,t.className+=" gantt_cal_light_full"),t.style.visibility="hidden";for(var i,r=this._lightbox_template,a=this.config.buttons_left,o=0;o<a.length;o++){var s=this.config._migrate_buttons[a[o]]?this.config._migrate_buttons[a[o]]:a[o];i=this._waiAria.lightboxButtonAttrString(s),r+="<div "+i+" class='gantt_btn_set gantt_left_btn_set "+s+"_set'><div dhx_button='1' class='"+s+"'></div><div>"+this.locale.labels[s]+"</div></div>";
}a=this.config.buttons_right;for(var o=0;o<a.length;o++){var s=this.config._migrate_buttons[a[o]]?this.config._migrate_buttons[a[o]]:a[o];i=this._waiAria.lightboxButtonAttrString(s),r+="<div "+i+" class='gantt_btn_set gantt_right_btn_set "+s+"_set' style='float:right;'><div dhx_button='1' class='"+s+"'></div><div>"+this.locale.labels[s]+"</div></div>"}r+="</div>",t.innerHTML=r,gantt._waiAria.lightboxAttr(t),gantt.config.drag_lightbox&&(t.firstChild.onmousedown=gantt._ready_to_dnd,t.firstChild.onselectstart=function(){return!1},t.firstChild.style.cursor="pointer",gantt._init_dnd_events()),document.body.insertBefore(t,document.body.firstChild),this._lightbox=t;var l=this._get_typed_lightbox_config(e);r=this._render_sections(l);for(var u=t.getElementsByTagName("div"),o=0;o<u.length;o++){var c=u[o];if("gantt_cal_larea"==c.className){c.innerHTML=r;break}}for(var o=0;o<l.length;o++){var h=l[o];if(h.id&&document.getElementById(h.id)){var f=document.getElementById(h.id),d=f.querySelector("label"),p=f.nextSibling;if(p){var g=p.querySelector("input, select, textarea");g&&(h.inputId=g.id||"input_"+gantt.uid(),g.id||(g.id=h.inputId),d.setAttribute("for",h.inputId))}}}this.resizeLightbox(),this._init_lightbox_events(this),t.style.display="none",t.style.visibility="visible"}return this._lightbox},gantt._render_sections=function(e){for(var t="",n=0;n<e.length;n++){var i=this.form_blocks[e[n].type];if(i){e[n].id="area_"+this.uid();var r=e[n].hidden?" style='display:none'":"",a="";e[n].button&&(a="<div class='gantt_custom_button' index='"+n+"'><div class='gantt_custom_button_"+e[n].button+"'></div><div class='gantt_custom_button_label'>"+this.locale.labels["button_"+e[n].button]+"</div></div>"),this.config.wide_form&&(t+="<div class='gantt_wrap_section' "+r+">"),t+="<div id='"+e[n].id+"' class='gantt_cal_lsection'><label>"+a+this.locale.labels["section_"+e[n].name]+"</label></div>"+i.render.call(this,e[n]),t+="</div>"}}return t},gantt.resizeLightbox=function(){var e=this._lightbox;if(e){var t=e.childNodes[1];t.style.height="0px",t.style.height=t.scrollHeight+"px",e.style.height=t.scrollHeight+this.config.lightbox_additional_height+"px",t.style.height=t.scrollHeight+"px"}},gantt._center_lightbox=function(e){if(e){e.style.display="block";var t=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,n=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,i=window.innerHeight||document.documentElement.clientHeight;t?e.style.top=Math.round(t+Math.max((i-e.offsetHeight)/2,0))+"px":e.style.top=Math.round(Math.max((i-e.offsetHeight)/2,0)+9)+"px",document.documentElement.scrollWidth>document.body.offsetWidth?e.style.left=Math.round(n+(document.body.offsetWidth-e.offsetWidth)/2)+"px":e.style.left=Math.round((document.body.offsetWidth-e.offsetWidth)/2)+"px"}},gantt.showCover=function(){if(!this._cover){this._cover=document.createElement("DIV"),this._cover.className="gantt_cal_cover";var e=void 0!==document.height?document.height:document.body.offsetHeight,t=document.documentElement?document.documentElement.scrollHeight:0;this._cover.style.height=Math.max(e,t)+"px",document.body.appendChild(this._cover)}},gantt._init_lightbox_events=function(){gantt.lightbox_events={},gantt.lightbox_events.gantt_save_btn=function(e){gantt._save_lightbox()},gantt.lightbox_events.gantt_delete_btn=function(e){gantt.callEvent("onLightboxDelete",[gantt._lightbox_id])&&(gantt.isTaskExists(gantt._lightbox_id)?gantt.$click.buttons.delete(gantt._lightbox_id):gantt.hideLightbox())},gantt.lightbox_events.gantt_cancel_btn=function(e){gantt._cancel_lightbox()},gantt.lightbox_events.default=function(e,t){if(t.getAttribute("dhx_button"))gantt.callEvent("onLightboxButton",[t.className,t,e]);else{var n,i,r,a=gantt._getClassName(t);if(-1!=a.indexOf("gantt_custom_button"))if(-1!=a.indexOf("gantt_custom_button_"))for(n=t.parentNode.getAttribute("index"),r=t;r&&-1==gantt._getClassName(r).indexOf("gantt_cal_lsection");)r=r.parentNode;else n=t.getAttribute("index"),r=t.parentNode,t=t.firstChild;var o=gantt._get_typed_lightbox_config();n&&(n=1*n,i=gantt.form_blocks[o[1*n].type],i.button_click(n,t,r,r.nextSibling))}},this.event(gantt.getLightbox(),"click",function(e){e=e||window.event;var t=e.target?e.target:e.srcElement,n=gantt._getClassName(t);if(n||(t=t.previousSibling,n=gantt._getClassName(t)),t&&n&&0===n.indexOf("gantt_btn_set")&&(t=t.firstChild,n=gantt._getClassName(t)),t&&n){var i=gantt.defined(gantt.lightbox_events[t.className])?gantt.lightbox_events[t.className]:gantt.lightbox_events.default;return i(e,t)}return!1}),gantt.getLightbox().onkeydown=function(e){var t=e||window.event,n=e.target||e.srcElement,i=!!(gantt._getClassName(n).indexOf("gantt_btn_set")>-1);switch((e||t).keyCode){case 32:if((e||t).shiftKey)return;i&&n.click&&n.click();break;case gantt.keys.edit_save:if((e||t).shiftKey)return;i&&n.click?n.click():gantt._save_lightbox();break;case gantt.keys.edit_cancel:gantt._cancel_lightbox()}}},gantt._cancel_lightbox=function(){var e=this.getLightboxValues();this.callEvent("onLightboxCancel",[this._lightbox_id,e.$new]),gantt.isTaskExists(e.id)&&e.$new&&this._deleteTask(e.id,!0),this.refreshData(),this.hideLightbox()},gantt._save_lightbox=function(){var e=this.getLightboxValues();this.callEvent("onLightboxSave",[this._lightbox_id,e,!!e.$new])&&(e.$new?(delete e.$new,this._replace_branch_child(this.getParent(e.id),e.id),this.addTask(e)):this.isTaskExists(e.id)&&(this.mixin(this.getTask(e.id),e,!0),this.updateTask(e.id)),this.refreshData(),this.hideLightbox())},gantt._resolve_default_mapping=function(e){var t=e.map_to,n={time:!0,time_optional:!0,duration:!0,duration_optional:!0};return n[e.type]&&("auto"==e.map_to?t={start_date:"start_date",end_date:"end_date",duration:"duration"}:"string"==typeof e.map_to&&(t={start_date:e.map_to})),t},gantt.getLightboxValues=function(){var e={};gantt.isTaskExists(this._lightbox_id)&&(e=this.mixin({},this.getTask(this._lightbox_id)));for(var t=this._get_typed_lightbox_config(),n=0;n<t.length;n++){var i=document.getElementById(t[n].id);i=i?i.nextSibling:i;var r=this.form_blocks[t[n].type];if(r){var a=r.get_value.call(this,i,e,t[n]),o=gantt._resolve_default_mapping(t[n]);if("string"==typeof o&&"auto"!=o)e[o]=a;else if("object"==typeof o)for(var s in o)o[s]&&(e[o[s]]=a[s])}}return e},gantt.hideLightbox=function(){var e=this.getLightbox();e&&(e.style.display="none"),this._waiAria.lightboxHiddenAttr(e),this._lightbox_id=null,this.hideCover(),this.callEvent("onAfterLightbox",[])},gantt.hideCover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},gantt.resetLightbox=function(){gantt._lightbox&&!gantt._custom_lightbox&&gantt._lightbox.parentNode.removeChild(gantt._lightbox),gantt._lightbox=null},gantt._set_lightbox_values=function(e,t){var n=e,i=t.getElementsByTagName("span"),r=[];gantt.templates.lightbox_header?(r.push(""),r.push(gantt.templates.lightbox_header(n.start_date,n.end_date,n)),i[1].innerHTML="",i[2].innerHTML=gantt.templates.lightbox_header(n.start_date,n.end_date,n)):(r.push(this.templates.task_time(n.start_date,n.end_date,n)),r.push((this.templates.task_text(n.start_date,n.end_date,n)||"").substr(0,70)),i[1].innerHTML=this.templates.task_time(n.start_date,n.end_date,n),i[2].innerHTML=(this.templates.task_text(n.start_date,n.end_date,n)||"").substr(0,70)),i[1].innerHTML=r[0],i[2].innerHTML=r[1],gantt._waiAria.lightboxHeader(t,r.join(" "));for(var a=this._get_typed_lightbox_config(this.getLightboxType()),o=0;o<a.length;o++){var s=a[o];if(this.form_blocks[s.type]){var l=document.getElementById(s.id).nextSibling,u=this.form_blocks[s.type],c=gantt._resolve_default_mapping(a[o]),h=this.defined(n[c])?n[c]:s.default_value;u.set_value.call(gantt,l,h,n,s),s.focus&&u.focus.call(gantt,l)}}e.id&&(gantt._lightbox_id=e.id)},gantt._fill_lightbox=function(e,t){var n=this.getTask(e);this._set_lightbox_values(n,t)},gantt.getLightboxSection=function(e){var t=this._get_typed_lightbox_config(),n=0;for(n;n<t.length&&t[n].name!=e;n++);var i=t[n];if(!i)return null;this._lightbox||this.getLightbox();var r=document.getElementById(i.id),a=r.nextSibling,o={section:i,header:r,node:a,getValue:function(e){return gantt.form_blocks[i.type].get_value.call(gantt,a,e||{},i)},setValue:function(e,t){return gantt.form_blocks[i.type].set_value.call(gantt,a,e,t||{},i)}},s=this._lightbox_methods["get_"+i.type+"_control"];return s?s(o):o},gantt._lightbox_methods.get_template_control=function(e){return e.control=e.node,e},gantt._lightbox_methods.get_select_control=function(e){return e.control=e.node.getElementsByTagName("select")[0],e},gantt._lightbox_methods.get_textarea_control=function(e){return e.control=e.node.getElementsByTagName("textarea")[0],e},gantt._lightbox_methods.get_time_control=function(e){return e.control=e.node.getElementsByTagName("select"),e},gantt._init_dnd_events=function(){this.event(document.body,"mousemove",gantt._move_while_dnd),this.event(document.body,"mouseup",gantt._finish_dnd),gantt._init_dnd_events=function(){}},gantt._move_while_dnd=function(e){if(gantt._dnd_start_lb){document.gantt_unselectable||(document.body.className+=" gantt_unselectable",document.gantt_unselectable=!0);var t=gantt.getLightbox(),n=e&&e.target?[e.pageX,e.pageY]:[event.clientX,event.clientY];t.style.top=gantt._lb_start[1]+n[1]-gantt._dnd_start_lb[1]+"px",t.style.left=gantt._lb_start[0]+n[0]-gantt._dnd_start_lb[0]+"px"}},gantt._ready_to_dnd=function(e){var t=gantt.getLightbox();gantt._lb_start=[parseInt(t.style.left,10),parseInt(t.style.top,10)],gantt._dnd_start_lb=e&&e.target?[e.pageX,e.pageY]:[event.clientX,event.clientY]},gantt._finish_dnd=function(){gantt._lb_start&&(gantt._lb_start=gantt._dnd_start_lb=!1,document.body.className=document.body.className.replace(" gantt_unselectable",""),document.gantt_unselectable=!1)},gantt._focus=function(e,t){if(e&&e.focus)if(gantt.config.touch);else try{t&&e.select&&e.select(),e.focus()}catch(e){}},gantt.form_blocks={getTimePicker:function(e,t){var n=e.time_format;if(!n){var n=["%d","%m","%Y"];gantt._get_line(gantt._tasks.unit)<gantt._get_line("day")&&n.push("%H:%i")}e._time_format_order={size:0};var i=this.config,r=this.date.date_part(new Date(gantt._min_date.valueOf())),a=1440,o=0;gantt.config.limit_time_select&&(a=60*i.last_hour+1,o=60*i.first_hour,r.setHours(i.first_hour));for(var s="",l=0;l<n.length;l++){var u=n[l];l>0&&(s+=" ");var c="";switch(u){case"%Y":e._time_format_order[2]=l,e._time_format_order.size++;var h,f,d,p;e.year_range&&(isNaN(e.year_range)?e.year_range.push&&(d=e.year_range[0],p=e.year_range[1]):h=e.year_range),h=h||10,f=f||Math.floor(h/2),d=d||r.getFullYear()-f,p=p||d+h;for(var g=d;p>g;g++)c+="<option value='"+g+"'>"+g+"</option>";break;case"%m":e._time_format_order[1]=l,e._time_format_order.size++;for(var g=0;12>g;g++)c+="<option value='"+g+"'>"+this.locale.date.month_full[g]+"</option>";break;case"%d":e._time_format_order[0]=l,e._time_format_order.size++;for(var g=1;32>g;g++)c+="<option value='"+g+"'>"+g+"</option>";break;case"%H:%i":e._time_format_order[3]=l,e._time_format_order.size++;var g=o,m=r.getDate();for(e._time_values=[];a>g;){var v=this.templates.time_picker(r);c+="<option value='"+g+"'>"+v+"</option>",e._time_values.push(g),r.setTime(r.valueOf()+60*this._get_timepicker_step()*1e3);var _=r.getDate()!=m?1:0;g=24*_*60+60*r.getHours()+r.getMinutes()}}if(c){var y=gantt._waiAria.lightboxSelectAttrString(u),b=e.readonly?"disabled='disabled'":"",w=t?" style='display:none' ":"";s+="<select "+b+w+y+">"+c+"</select>"}}return s},_fill_lightbox_select:function(e,t,n,i,r){if(e[t+i[0]].value=n.getDate(),e[t+i[1]].value=n.getMonth(),e[t+i[2]].value=n.getFullYear(),gantt.defined(i[3])){var a=60*n.getHours()+n.getMinutes();a=Math.round(a/gantt._get_timepicker_step())*gantt._get_timepicker_step();var o=e[t+i[3]];o.value=a,o.setAttribute("data-value",a)}},template:{render:function(e){var t=(e.height||"30")+"px";return"<div class='gantt_cal_ltext gantt_cal_template' style='height:"+t+";'></div>"},set_value:function(e,t,n,i){e.innerHTML=t||""},get_value:function(e,t,n){return e.innerHTML||""},focus:function(e){}},textarea:{render:function(e){var t=(e.height||"130")+"px";return"<div class='gantt_cal_ltext' style='height:"+t+";'><textarea></textarea></div>"},set_value:function(e,t,n){this.form_blocks.textarea._get_input(e).value=t||""},get_value:function(e,t){return this.form_blocks.textarea._get_input(e).value},focus:function(e){var t=this.form_blocks.textarea._get_input(e);gantt._focus(t,!0)},_get_input:function(e){return e.querySelector("textarea")}},select:{render:function(e){for(var t=(e.height||"23")+"px",n="<div class='gantt_cal_ltext' style='height:"+t+";'><select style='width:100%;'>",i=0;i<e.options.length;i++)n+="<option value='"+e.options[i].key+"'>"+e.options[i].label+"</option>";return n+="</select></div>"},set_value:function(e,t,n,i){var r=e.firstChild;!r._dhx_onchange&&i.onchange&&(r.onchange=i.onchange,r._dhx_onchange=!0),"undefined"==typeof t&&(t=(r.options[0]||{}).value),r.value=t||""},get_value:function(e,t){return e.firstChild.value},focus:function(e){var t=e.firstChild;gantt._focus(t,!0)}},time:{render:function(e){var t=this.form_blocks.getTimePicker.call(this,e),n=["<div style='height:"+(e.height||30)+"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>"];return n.push(t),e.single_date?(t=this.form_blocks.getTimePicker.call(this,e,!0),n.push("<span></span>")):n.push("<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"),n.push(t),n.push("</div>"),n.join("")},set_value:function(e,t,n,i){var r=i,a=e.getElementsByTagName("select"),o=i._time_format_order;if(i._time_format_size,r.auto_end_date)for(var s=function(){c=new Date(a[o[2]].value,a[o[1]].value,a[o[0]].value,0,0),h=gantt.calculateEndDate({start_date:c,duration:1,task:n}),this.form_blocks._fill_lightbox_select(a,o.size,h,o,r)},l=0;4>l;l++)a[l].onchange=s;var u=gantt._resolve_default_mapping(i);"string"==typeof u&&(u={start_date:u});var c=n[u.start_date]||new Date,h=n[u.end_date]||gantt.calculateEndDate({start_date:c,duration:1,task:n});this.form_blocks._fill_lightbox_select(a,0,c,o,r),this.form_blocks._fill_lightbox_select(a,o.size,h,o,r)},get_value:function(e,t,n){var i=e.getElementsByTagName("select"),r=n._time_format_order,a=0,o=0;if(gantt.defined(r[3])){var s=parseInt(i[r[3]].value,10);a=Math.floor(s/60),o=s%60}var l=new Date(i[r[2]].value,i[r[1]].value,i[r[0]].value,a,o);if(a=o=0,gantt.defined(r[3])){var s=parseInt(i[r.size+r[3]].value,10);a=Math.floor(s/60),o=s%60}var u=new Date(i[r[2]+r.size].value,i[r[1]+r.size].value,i[r[0]+r.size].value,a,o);l>=u&&(u=gantt.date.add(l,gantt._get_timepicker_step(),"minute"));var c=gantt._resolve_default_mapping(n),h={start_date:new Date(l),end_date:new Date(u)};return"string"==typeof c?h.start_date:h},focus:function(e){gantt._focus(e.getElementsByTagName("select")[0])}},duration:{render:function(e){var t=this.form_blocks.getTimePicker.call(this,e);t="<div class='gantt_time_selects'>"+t+"</div>";var n=this.locale.labels[this.config.duration_unit+"s"],i=e.single_date?' style="display:none"':"",r=e.readonly?" disabled='disabled'":"",a=this._waiAria.lightboxDurationInputAttrString(e),o="<div class='gantt_duration' "+i+"><input type='button' class='gantt_duration_dec' value='鈭�'"+r+"><input type='text' value='5' class='gantt_duration_value'"+r+" "+a+"><input type='button' class='gantt_duration_inc' value='+'"+r+"> "+n+" <span></span></div>",s="<div style='height:"+(e.height||30)+"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>"+t+" "+o+"</div>";return s},set_value:function(e,t,n,i){function r(){var t=gantt.form_blocks.duration._get_start_date.call(gantt,e,i),r=gantt.form_blocks.duration._get_duration.call(gantt,e,i),a=gantt.calculateEndDate({start_date:t,duration:r,task:n});h.innerHTML=gantt.templates.task_date(a)}function a(e){var t=u.value;t=parseInt(t,10),window.isNaN(t)&&(t=0),t+=e,1>t&&(t=1),u.value=t,r()}var o=i,s=e.getElementsByTagName("select"),l=e.getElementsByTagName("input"),u=l[1],c=[l[0],l[2]],h=e.getElementsByTagName("span")[0],f=i._time_format_order;c[0].onclick=gantt.bind(function(){a(-1*this.config.duration_step)},this),c[1].onclick=gantt.bind(function(){a(1*this.config.duration_step)},this),s[0].onchange=r,s[1].onchange=r,s[2].onchange=r,s[3]&&(s[3].onchange=r),u.onkeydown=gantt.bind(function(e){e=e||window.event;var t=e.charCode||e.keyCode||e.which;return 40==t?(a(-1*this.config.duration_step),!1):38==t?(a(1*this.config.duration_step),!1):void window.setTimeout(function(e){r()},1)},this),u.onchange=gantt.bind(function(e){r()},this);var d=gantt._resolve_default_mapping(i);"string"==typeof d&&(d={start_date:d});var p=n[d.start_date]||new Date,g=n[d.end_date]||gantt.calculateEndDate({start_date:p,duration:1,task:n}),m=Math.round(n[d.duration])||gantt.calculateDuration({start_date:p,end_date:g,task:n});gantt.form_blocks._fill_lightbox_select(s,0,p,f,o),u.value=m,r()},_get_start_date:function(e,t){var n=e.getElementsByTagName("select"),i=t._time_format_order,r=0,a=0;if(gantt.defined(i[3])){var o=n[i[3]],s=parseInt(o.value,10);isNaN(s)&&o.hasAttribute("data-value")&&(s=parseInt(o.getAttribute("data-value"),10)),r=Math.floor(s/60),a=s%60}return new Date(n[i[2]].value,n[i[1]].value,n[i[0]].value,r,a)},_get_duration:function(e,t){var n=e.getElementsByTagName("input")[1];return n=parseInt(n.value,10),(!n||window.isNaN(n))&&(n=1),0>n&&(n*=-1),n},get_value:function(e,t,n){var i=gantt.form_blocks.duration._get_start_date(e,n),r=gantt.form_blocks.duration._get_duration(e,n),a=gantt.calculateEndDate({start_date:i,duration:r,task:t}),o=gantt._resolve_default_mapping(n),s={start_date:new Date(i),end_date:new Date(a),duration:r};return"string"==typeof o?s.start_date:s},focus:function(e){gantt._focus(e.getElementsByTagName("select")[0])}},parent:{_filter:function(e,t,n){var i=t.filter||function(){return!0};e=e.slice(0);for(var r=0;r<e.length;r++){var a=e[r];(a.id==n||gantt.isChildOf(a.id,n)||i(a.id,a)===!1)&&(e.splice(r,1),r--)}return e},_display:function(e,t){var n=[],i=[];t&&(n=gantt.getTaskByTime(),e.allow_root&&n.unshift({id:gantt.config.root_id,text:e.root_label||""}),n=this._filter(n,e,t),e.sort&&n.sort(e.sort));for(var r=e.template||gantt.templates.task_text,a=0;a<n.length;a++){var o=r.apply(gantt,[n[a].start_date,n[a].end_date,n[a]]);void 0===o&&(o=""),i.push({key:n[a].id,label:o})}return e.options=i,e.map_to=e.map_to||"parent",gantt.form_blocks.select.render.apply(this,arguments)},render:function(e){return gantt.form_blocks.parent._display(e,!1)},set_value:function(e,t,n,i){var r=document.createElement("div");r.innerHTML=gantt.form_blocks.parent._display(i,n.id);var a=r.removeChild(r.firstChild);return e.onselect=null,e.parentNode.replaceChild(a,e),gantt.form_blocks.select.set_value.apply(gantt,[a,t,n,i])},get_value:function(){return gantt.form_blocks.select.get_value.apply(gantt,arguments)},focus:function(){return gantt.form_blocks.select.focus.apply(gantt,arguments)}}},gantt._is_lightbox_timepicker=function(){for(var e=this._get_typed_lightbox_config(),t=0;t<e.length;t++)if("time"==e[t].name&&"time"==e[t].type)return!0;return!1},gantt._dhtmlx_confirm=function(e,t,n,i){if(!e)return n();var r={text:e};t&&(r.title=t),i&&(r.ok=i),n&&(r.callback=function(e){e&&n()}),gantt.confirm(r)},gantt._get_typed_lightbox_config=function(e){void 0===e&&(e=this.getLightboxType());var t=this._get_type_name(e);return gantt.config.lightbox[t+"_sections"]?gantt.config.lightbox[t+"_sections"]:gantt.config.lightbox.sections},gantt._silent_redraw_lightbox=function(e){var t=this.getLightboxType();if(this.getState().lightbox){var n=this.getState().lightbox,i=this.getLightboxValues(),r=this.copy(this.getTask(n));this.resetLightbox();var a=this.mixin(r,i,!0),o=this.getLightbox(e?e:void 0);this._center_lightbox(this.getLightbox()),this._set_lightbox_values(a,o)}else this.resetLightbox(),this.getLightbox(e?e:void 0);this.callEvent("onLightboxChange",[t,this.getLightboxType()])},gantt._extend_to_optional=function(e){var t=e,n={render:t.render,focus:t.focus,set_value:function(e,i,r,a){var o=gantt._resolve_default_mapping(a);if(!r[o.start_date]||"start_date"==o.start_date&&this._isAllowedUnscheduledTask(r)){n.disable(e,a);var s={};for(var l in o)s[o[l]]=r[l];return t.set_value.call(gantt,e,i,s,a)}return n.enable(e,a),t.set_value.call(gantt,e,i,r,a)},get_value:function(e,n,i){return i.disabled?{start_date:null}:t.get_value.call(gantt,e,n,i)},update_block:function(e,t){if(gantt.callEvent("onSectionToggle",[gantt._lightbox_id,t]),e.style.display=t.disabled?"none":"block",t.button){var n=e.previousSibling.querySelector(".gantt_custom_button_label"),i=gantt.locale.labels,r=t.disabled?i[t.name+"_enable_button"]:i[t.name+"_disable_button"];n.innerHTML=r}gantt.resizeLightbox()},disable:function(e,t){t.disabled=!0,n.update_block(e,t)},enable:function(e,t){t.disabled=!1,n.update_block(e,t)},button_click:function(e,t,i,r){if(gantt.callEvent("onSectionButton",[gantt._lightbox_id,i])!==!1){var a=gantt._get_typed_lightbox_config()[e];a.disabled?n.enable(r,a):n.disable(r,a)}}};return n},gantt.form_blocks.duration_optional=gantt._extend_to_optional(gantt.form_blocks.duration),gantt.form_blocks.time_optional=gantt._extend_to_optional(gantt.form_blocks.time),gantt.dataProcessor=function(e){return this.serverProcessor=e,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),gantt._eventable(this),this},gantt.dataProcessor.prototype={setTransactionMode:function(e,t){"object"==typeof e?(this._tMode=e.mode||this._tMode,gantt.defined(e.headers)&&(this._headers=e.headers),gantt.defined(e.payload)&&(this._payload=e.payload)):(this._tMode=e,this._tSend=t),"REST"==this._tMode&&(this._tSend=!1,this._endnm=!0),"JSON"==this._tMode&&(this._tSend=!1,this._endnm=!0,this._headers=this._headers||{},this._headers["Content-type"]="application/json")},escape:function(e){return this._utf?encodeURIComponent(e):escape(e)},enableUTFencoding:function(e){this._utf=!!e},setDataColumns:function(e){this._columns="string"==typeof e?e.split(","):e},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(e){this._endnm=!!e},enablePartialDataSend:function(e){this._changed=!!e},setUpdateMode:function(e,t){this.autoUpdate="cell"==e,this.updateMode=e,this.dnd=t},ignore:function(e,t){this._silent_mode=!0,e.call(t||window),this._silent_mode=!1},setUpdated:function(e,t,n){if(!this._silent_mode){var i=this.findRow(e);n=n||"updated";var r=this.obj.getUserData(e,this.action_param);r&&"updated"==n&&(n=r),t?(this.set_invalid(e,!1),this.updatedRows[i]=e,this.obj.setUserData(e,this.action_param,n),this._in_progress[e]&&(this._in_progress[e]="wait")):this.is_invalid(e)||(this.updatedRows.splice(i,1),this.obj.setUserData(e,this.action_param,"")),t||this._clearUpdateFlag(e),this.markRow(e,t,n),t&&this.autoUpdate&&this.sendData(e)}},_clearUpdateFlag:function(e){},markRow:function(e,t,n){var i="",r=this.is_invalid(e);if(r&&(i=this.styles[r],t=!0),this.callEvent("onRowMark",[e,t,n,r])&&(i=this.styles[t?n:"clear"]+i,this.obj[this._methods[0]](e,i),r&&r.details)){i+=this.styles[r+"_cell"];for(var a=0;a<r.details.length;a++)r.details[a]&&this.obj[this._methods[1]](e,a,i)}},getState:function(e){return this.obj.getUserData(e,this.action_param)},is_invalid:function(e){return this._invalid[e]},set_invalid:function(e,t,n){n&&(t={value:t,details:n,toString:function(){return this.value.toString()}}),this._invalid[e]=t},checkBeforeUpdate:function(e){return!0},sendData:function(e){return!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2?(this.obj.editStop&&this.obj.editStop(),"undefined"==typeof e||this._tSend?this.sendAllData():!this._in_progress[e]&&(this.messages=[],!(!this.checkBeforeUpdate(e)&&this.callEvent("onValidationError",[e,this.messages]))&&void this._beforeSendData(this._getRowData(e),e))):void 0},_beforeSendData:function(e,t){return!!this.callEvent("onBeforeUpdate",[t,this.getState(t),e])&&void this._sendData(e,t)},serialize:function(e,t){if("string"==typeof e)return e;if("undefined"!=typeof t)return this.serialize_one(e,"");var n=[],i=[];for(var r in e)e.hasOwnProperty(r)&&(n.push(this.serialize_one(e[r],r+this.post_delim)),i.push(r));return n.push("ids="+this.escape(i.join(","))),gantt.security_key&&n.push("dhx_security="+gantt.security_key),n.join("&")},serialize_one:function(e,t){if("string"==typeof e)return e;var n=[];for(var i in e)if(e.hasOwnProperty(i)){if(("id"==i||i==this.action_param)&&"REST"==this._tMode)continue;n.push(this.escape((t||"")+i)+"="+this.escape(e[i]))}return n.join("&")},_applyPayload:function(e){if(this._payload)for(var t in this._payload)e=e+gantt._urlSeparator(e)+this.escape(t)+"="+this.escape(this._payload[t]);return e},_sendData:function(e,t){if(e){if(!this.callEvent("onBeforeDataSending",t?[t,this.getState(t),e]:[null,null,e]))return!1;t&&(this._in_progress[t]=(new Date).valueOf());var n=this,i=function(i){var r=[];if(t)r.push(t);else if(e)for(var a in e)r.push(a);return n.afterUpdate(n,i,r)},r=this.serverProcessor+(this._user?gantt._urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):""),a=this._applyPayload(r);if("GET"==this._tMode)gantt.ajax.query({url:a+gantt._urlSeparator(a)+this.serialize(e,t),method:"GET",callback:i,headers:this._headers});else if("POST"==this._tMode)gantt.ajax.query({url:a,method:"POST",headers:this._headers,data:this.serialize(e,t),callback:i});else if("JSON"==this._tMode){var o=e[this.action_param],s={};for(var l in e)s[l]=e[l];delete s[this.action_param],delete s.id,delete s.gr_id,gantt.ajax.query({url:a,method:"POST",headers:this._headers,callback:i,data:JSON.stringify({id:t,action:o,data:s})})}else if("REST"==this._tMode){var u=this.getState(t),c=r.replace(/(\&|\?)editing\=true/,""),s="",h="post";"inserted"==u?s=this.serialize(e,t):"deleted"==u?(h="DELETE",c=c+("/"==c.slice(-1)?"":"/")+t):(h="PUT",s=this.serialize(e,t),c=c+("/"==c.slice(-1)?"":"/")+t),c=this._applyPayload(c),gantt.ajax.query({url:c,method:h,headers:this._headers,data:s,callback:i})}this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var e=!0,t=0;t<this.updatedRows.length;t++)e&=this.checkBeforeUpdate(this.updatedRows[t]);if(!e&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(var t=0;t<this.updatedRows.length;t++)if(!this._in_progress[this.updatedRows[t]]){if(this.is_invalid(this.updatedRows[t]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[t]),this.updatedRows[t]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(e){for(var t={},n=!1,i=0;i<this.updatedRows.length;i++){var r=this.updatedRows[i];if(!this._in_progress[r]&&!this.is_invalid(r)){var a=this._getRowData(r);this.callEvent("onBeforeUpdate",[r,this.getState(r),a])&&(t[r]=a,n=!0,this._in_progress[r]=(new Date).valueOf())}}return n?t:null},setVerificator:function(e,t){this.mandatoryFields[e]=t||function(e){return""!==e}},clearVerificator:function(e){this.mandatoryFields[e]=!1},findRow:function(e){var t=0;for(t=0;t<this.updatedRows.length&&e!=this.updatedRows[t];t++);return t},defineAction:function(e,t){this._uActions||(this._uActions=[]),this._uActions[e]=t},afterUpdateCallback:function(e,t,n,i){var r=e,a="error"!=n&&"invalid"!=n;if(a||this.set_invalid(e,n),this._uActions&&this._uActions[n]&&!this._uActions[n](i))return delete this._in_progress[r];"wait"!=this._in_progress[r]&&this.setUpdated(e,!1);var o=e;switch(n){case"inserted":case"insert":t!=e&&(this.setUpdated(e,!1),this.obj[this._methods[2]](e,t),e=t);break;case"delete":case"deleted":return this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj[this._methods[3]](e),delete this._in_progress[r],this.callEvent("onAfterUpdate",[e,n,t,i])}"wait"!=this._in_progress[r]?(a&&this.obj.setUserData(e,this.action_param,""),delete this._in_progress[r]):(delete this._in_progress[r],this.setUpdated(t,!0,this.obj.getUserData(e,this.action_param))),this.callEvent("onAfterUpdate",[o,n,t,i])},afterUpdate:function(e,t,n){if(window.JSON){var i;try{i=JSON.parse(t.xmlDoc.responseText)}catch(e){t.xmlDoc.responseText.length||(i={})}if(i){var r=i.action||this.getState(n)||"updated",a=i.sid||n[0],o=i.tid||n[0];return e.afterUpdateCallback(a,o,r,i),void e.finalizeUpdate()}}var s=gantt.ajax.xmltop("data",t.xmlDoc);if(!s)return this.cleanUpdate(n);var l=gantt.ajax.xpath("//data/action",s);if(!l.length)return this.cleanUpdate(n);for(var u=0;u<l.length;u++){var c=l[u],r=c.getAttribute("type"),a=c.getAttribute("sid"),o=c.getAttribute("tid");e.afterUpdateCallback(a,o,r,c)}e.finalizeUpdate()},cleanUpdate:function(e){if(e)for(var t=0;t<e.length;t++)delete this._in_progress[e[t]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(e){this.obj=e,this.obj._dp_init&&this.obj._dp_init(this)},setOnAfterUpdate:function(e){this.attachEvent("onAfterUpdate",e)},enableDebug:function(e){},setOnBeforeUpdateHandler:function(e){this.attachEvent("onBeforeDataSending",e)},setAutoUpdate:function(e,t){e=e||2e3,this._user=t||(new Date).valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(e,t,n,i){this.afterAutoUpdate(e,t,n,i)}),this.attachEvent("onFullSync",function(){this.fullSync()});var n=this;window.setInterval(function(){n.loadUpdate()},e)},afterAutoUpdate:function(e,t,n,i){return"collision"!=t||(this._need_update=!0,!1)},fullSync:function(){return this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(e,t){return!this._update_busy&&(this._update_busy=!0,void gantt.ajax.get(e,t))},_v:function(e){return e.firstChild?e.firstChild.nodeValue:""},_a:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=this._v(e[n]);return t},loadUpdate:function(){var e=this,t=this.obj.getUserData(0,"version"),n=this.serverProcessor+gantt._urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+t].join("&");n=n.replace("editing=true&",""),this.getUpdates(n,function(t){var n=gantt.ajax.xpath("//userdata",t);e.obj.setUserData(0,"version",e._v(n[0]));var i=gantt.ajax.xpath("//update",t);if(i.length){e._silent_mode=!0;for(var r=0;r<i.length;r++){var a=i[r].getAttribute("status"),o=i[r].getAttribute("id"),s=i[r].getAttribute("parent");switch(a){case"inserted":e.callEvent("insertCallback",[i[r],o,s]);break;case"updated":e.callEvent("updateCallback",[i[r],o,s]);break;case"deleted":e.callEvent("deleteCallback",[i[r],o,s])}}e._silent_mode=!1}e._update_busy=!1,e=null})}},gantt._init_dp_live_update_hooks=function(e){e.attachEvent("insertCallback",gantt._insert_callback),e.attachEvent("updateCallback",gantt._update_callback),e.attachEvent("deleteCallback",gantt._delete_callback)},gantt._update_callback=function(e,t){var n=e.data||gantt.xml._xmlNodeToJSON(e.firstChild);if(gantt.isTaskExists(t)){var i=gantt.getTask(t);for(var r in n){var a=n[r];switch(r){case"id":continue;case"start_date":case"end_date":a=gantt.templates.xml_date(a);break;case"duration":i.end_date=gantt.calculateEndDate({start_date:i.start_date,duration:a,task:i})}i[r]=a}gantt.updateTask(t),gantt.refreshData()}},gantt._insert_callback=function(e,t,n,i){var r=e.data||gantt.xml._xmlNodeToJSON(e.firstChild),a={add:gantt.addTask,
isExist:gantt.isTaskExists};"links"==i&&(a.add=gantt.addLink,a.isExist=gantt.isLinkExists),a.isExist.call(gantt,t)||(r.id=t,a.add.call(gantt,r))},gantt._delete_callback=function(e,t,n,i){var r={delete:gantt.deleteTask,isExist:gantt.isTaskExists};"links"==i&&(r.delete=gantt.deleteLink,r.isExist=gantt.isLinkExists),r.isExist.call(gantt,t)&&r.delete.call(gantt,t)},gantt.assert=function(e,t){e||gantt.config.show_errors&&gantt.callEvent("onError",[t])!==!1&&gantt.message({type:"error",text:t,expire:-1})},gantt.init=function(e,t,n){this.callEvent("onBeforeGanttReady",[]),t&&n&&(this.config.start_date=this._min_date=new Date(t),this.config.end_date=this._max_date=new Date(n)),this._init_skin(),this.date.init(),this.config.scroll_size||(this.config.scroll_size=this._detectScrollSize());var i;gantt.event(window,"resize",function(){clearTimeout(i),i=setTimeout(function(){gantt.render()},300)}),this.init=function(e){this.$container&&this.$container.parentNode&&(this.$container.parentNode.removeChild(this.$container),this.$container=null),this._reinit(e)},this._reinit(e)},gantt._reinit=function(e){this._init_html_area(e),this._set_sizes(),this._clear_renderers(),this.resetLightbox(),this._update_flags(),this._init_touch_events(),this._init_templates(),this._init_grid(),this._init_tasks(),this._set_scroll_events(),gantt.event(this.$container,"click",this._on_click),gantt.event(this.$container,"dblclick",this._on_dblclick),gantt.event(this.$container,"mousemove",this._on_mousemove),gantt.event(this.$container,"contextmenu",this._on_contextmenu),this.callEvent("onGanttReady",[]),this.render()},gantt._init_html_area=function(e){"string"==typeof e?this._obj=document.getElementById(e):this._obj=e,this.assert(this._obj,"Invalid html container: "+e);var t=this._waiAria.gridAttrString(),n=this._waiAria.gridDataAttrString(),i="<div class='gantt_container'><div class='gantt_grid' "+t+"></div><div class='gantt_task'></div>";i+="<div class='gantt_ver_scroll'><div></div></div><div class='gantt_hor_scroll'><div></div></div></div>",this._obj.innerHTML=i,this.$container=this._obj.firstChild;var r=this.$container.childNodes;this.$grid=r[0],this.$task=r[1],this.$scroll_ver=r[2],this.$scroll_hor=r[3],this.$grid.innerHTML="<div class='gantt_grid_scale' "+gantt._waiAria.gridScaleRowAttrString()+"></div><div class='gantt_grid_data' "+n+"></div>",this.$grid_scale=this.$grid.childNodes[0],this.$grid_data=this.$grid.childNodes[1],this.$task.innerHTML="<div class='gantt_task_scale'></div><div class='gantt_data_area'><div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div></div>",this.$task_scale=this.$task.childNodes[0],this.$task_data=this.$task.childNodes[1],this.$task_bg=this.$task_data.childNodes[0],this.$task_links=this.$task_data.childNodes[1],this.$task_bars=this.$task_data.childNodes[2]},gantt.$click={buttons:{edit:function(e){gantt.showLightbox(e)},delete:function(e){var t=gantt.locale.labels.confirm_deleting,n=gantt.locale.labels.confirm_deleting_title;gantt._dhtmlx_confirm(t,n,function(){if(!gantt.isTaskExists(e))return void gantt.hideLightbox();var t=gantt.getTask(e);t.$new?(gantt._deleteTask(e,!0),gantt.refreshData()):gantt.deleteTask(e),gantt.hideLightbox()})}}},gantt._calculate_content_height=function(){var e=this.config.scale_height,t=this._order.length*this.config.row_height,n=this._scroll_hor?this.config.scroll_size+1:0;return this._is_grid_visible()||this._is_chart_visible()?e+t+2+n:0},gantt._calculate_content_width=function(){var e=this._get_grid_width(),t=this._tasks?this._tasks.full_width:0;return this._scroll_ver?this.config.scroll_size+1:0,this._is_chart_visible()||(t=0),this._is_grid_visible()||(e=0),e+t+1},gantt._get_resize_options=function(){var e={x:!1,y:!1};return"xy"==this.config.autosize?e.x=e.y=!0:"y"==this.config.autosize||this.config.autosize===!0?e.y=!0:"x"==this.config.autosize&&(e.x=!0),e},gantt._clean_el_size=function(e){return 1*(e||"").toString().replace("px","")||0},gantt._get_box_styles=function(){var e=null;e=window.getComputedStyle?window.getComputedStyle(this._obj,null):{width:this._obj.clientWidth,height:this._obj.clientHeight};var t=["width","height","paddingTop","paddingBottom","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],n={boxSizing:"border-box"==e.boxSizing};e.MozBoxSizing&&(n.boxSizing="border-box"==e.MozBoxSizing);for(var i=0;i<t.length;i++)n[t[i]]=e[t[i]]?this._clean_el_size(e[t[i]]):0;var r={horPaddings:n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth,vertPaddings:n.paddingTop+n.paddingBottom+n.borderTopWidth+n.borderBottomWidth,borderBox:n.boxSizing,innerWidth:n.width,innerHeight:n.height,outerWidth:n.width,outerHeight:n.height};return r.borderBox?(r.innerWidth-=r.horPaddings,r.innerHeight-=r.vertPaddings):(r.outerWidth+=r.horPaddings,r.outerHeight+=r.vertPaddings),r},gantt._do_autosize=function(){var e=this._get_resize_options(),t=this._get_box_styles();if(e.y){var n=this._calculate_content_height();t.borderBox&&(n+=t.vertPaddings),this._obj.style.height=n+"px"}if(e.x){var i=this._calculate_content_width();t.borderBox&&(i+=t.horPaddings),this._obj.style.width=i+"px"}},gantt._set_sizes=function(){this._do_autosize();var e=this._get_box_styles();if(this._y=e.innerHeight,!(this._y<20)){this.$grid.style.height=this.$task.style.height=Math.max(this._y-this.$scroll_hor.offsetHeight-2,0)+"px";var t=Math.max(this._y-(this.config.scale_height||0)-this.$scroll_hor.offsetHeight-2,0);this.$grid_data.style.height=this.$task_data.style.height=t+"px";var n=Math.max(this._get_grid_width()-1,0);this.$grid.style.width=n+"px",this.$grid.style.display=0===n?"none":"",e=this._get_box_styles(),this._x=e.innerWidth,this._x<20||(this.$grid_data.style.width=Math.max(this._get_grid_width()-1,0)+"px",this.$task.style.width=Math.max(this._x-this._get_grid_width()-2,0)+"px")}},gantt.getScrollState=function(){return this.$task&&this.$task_data?{x:this.$task.scrollLeft,y:this.$task_data.scrollTop}:null},gantt._save_scroll_state=function(e,t){var n={};this._cached_scroll_pos=this._cached_scroll_pos||{},void 0!==e&&(n.x=Math.max(e,0)),void 0!==t&&(n.y=Math.max(t,0)),this.mixin(this._cached_scroll_pos,n,!0)},gantt._restore_scroll_state=function(){var e={x:0,y:0};return this._cached_scroll_pos&&(e.x=this._cached_scroll_pos.x||e.x,e.y=this._cached_scroll_pos.y||e.y),e},gantt.scrollTo=function(e,t){var n=this._restore_scroll_state();1*e==e&&(this.$task.scrollLeft=e,this._save_scroll_state(e,void 0)),1*t==t&&(this.$scroll_ver.scrollTop=t,this.$task_data.scrollTop=t,this.$grid_data.scrollTop=t,this._save_scroll_state(void 0,this.config.show_chart?this.$task_data.scrollTop:this.$scroll_ver.scrollTop));var i=gantt._restore_scroll_state();this.callEvent("onGanttScroll",[n.x,n.y,i.x,i.y])},gantt.showDate=function(e){var t=this.posFromDate(e),n=Math.max(t-this.config.task_scroll_offset,0);this.scrollTo(n)},gantt.showTask=function(e){var t,n=this._get_task_pos(this.getTask(e)),i=Math.max(n.x-this.config.task_scroll_offset,0),r=this._scroll_sizes().y;t=r?n.y-(r-this.config.row_height)/2:n.y,this.scrollTo(i,t)},gantt._on_resize=gantt.setSizes=function(){gantt._set_sizes(),gantt._scroll_resize(),gantt._set_sizes()},gantt.render=function(){this.callEvent("onBeforeGanttRender",[]);var e=this.copy(this._restore_scroll_state()),t=null;if(e&&(t=gantt.dateFromPos(e.x+this.config.task_scroll_offset)),this._render_grid(),this._render_tasks_scales(),this._scroll_resize(),this._on_resize(),this._render_data(),this.config.preserve_scroll&&e){var n=gantt._restore_scroll_state(),i=gantt.dateFromPos(n.x);(+t!=+i||n.y!=e.y)&&(t&&this.showDate(t),gantt.scrollTo(void 0,e.y))}this.callEvent("onGanttRender",[])},gantt._set_scroll_events=function(){function e(e){var n=gantt._get_resize_options();gantt._wheel_time=new Date;var i=t?-20*e.deltaX:2*e.wheelDeltaX,r=t?-40*e.deltaY:e.wheelDelta;if(!e.shiftKey||e.deltaX||e.wheelDeltaX||(i=2*r,r=0),i&&Math.abs(i)>Math.abs(r)){if(n.x)return!0;if(!gantt.$scroll_hor||!gantt.$scroll_hor.offsetWidth)return!0;var a=i/-40,o=gantt.$task.scrollLeft,s=o+30*a;if(gantt.scrollTo(s,null),gantt.$scroll_hor.scrollLeft=s,o==gantt.$task.scrollLeft)return!0}else{if(n.y)return!0;if(!gantt.$scroll_ver||!gantt.$scroll_ver.offsetHeight)return!0;var a=r/-40;"undefined"==typeof r&&(a=e.detail);var l=gantt.$scroll_ver.scrollTop,u=gantt.$scroll_ver.scrollTop+30*a;if(!gantt.config.prevent_default_scroll&&gantt._cached_scroll_pos&&(gantt._cached_scroll_pos.y==u||gantt._cached_scroll_pos.y<=0&&0>=u))return!0;if(gantt.scrollTo(null,u),gantt.$scroll_ver.scrollTop=u,l==gantt.$scroll_ver.scrollTop)return!0}return e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,!1}this.event(this.$scroll_hor,"scroll",function(){if(new Date-(gantt._wheel_time||0)<100)return!0;if(!gantt._touch_scroll_active){var e=gantt.$scroll_hor.scrollLeft;gantt.scrollTo(e)}}),this.event(this.$scroll_ver,"scroll",function(){if(!gantt._touch_scroll_active){var e=gantt.$scroll_ver.scrollTop,t=gantt.$scroll_ver.prevTop;e!=t&&(gantt.$scroll_ver.prevTop=e,gantt.scrollTo(null,e))}}),this.event(this.$task,"scroll",function(){var e=gantt.$task.scrollLeft,t=gantt.$scroll_hor.scrollLeft;t!=e&&(gantt.$scroll_hor.scrollLeft=e)}),this.event(this.$task_data,"scroll",function(){var e=gantt.$task_data.scrollTop,t=gantt.$scroll_ver.scrollTop;t!=e&&(gantt.$scroll_ver.scrollTop=e)});var t=gantt.env.isFF;t?this.event(gantt.$container,"wheel",e):this.event(gantt.$container,"mousewheel",e)},gantt._scroll_resize=function(){if(!(this._x<20||this._y<20)){var e=this._scroll_sizes();e.x?(this.$scroll_hor.style.display="block",this.$scroll_hor.style.height=e.scroll_size+"px",this.$scroll_hor.style.width=e.x+"px",this.$scroll_hor.firstChild.style.width=e.x_inner+"px"):(this.$scroll_hor.style.display="none",this.$scroll_hor.style.height=this.$scroll_hor.style.width="0px"),e.y?(this.$scroll_ver.style.display="block",this.$scroll_ver.style.width=e.scroll_size+"px",this.$scroll_ver.style.height=e.y+"px",this.$scroll_ver.style.top=this.config.scale_height+"px",this.$scroll_ver.firstChild.style.height=e.y_inner+"px"):(this.$scroll_ver.style.display="none",this.$scroll_ver.style.width=this.$scroll_ver.style.height="0px")}},gantt._scroll_sizes=function(){var e=this._get_grid_width(),t=Math.max(this._x-e,0),n=Math.max(this._y-this.config.scale_height,0),i=this.config.scroll_size+1,r=this._get_resize_options(),a=this.config.row_height*this._order.length,o=this._scroll_ver=!r.y&&a>n,s=Math.max(this._tasks.full_width-(o?0:i),0),l=this._scroll_hor=!r.x&&s>t,u={x:!1,y:!1,scroll_size:i,x_inner:s+e+i+2,y_inner:a};return l&&(u.x=Math.max(this._x-(o?i:2),0)),o&&(u.y=Math.max(this._y-(l?i:2)-this.config.scale_height,0)),u},gantt._getClassName=function(e){if(!e)return"";var t=e.className||"";return t.baseVal&&(t=t.baseVal),t.indexOf||(t=""),gantt._trim(t)},gantt.locate=function(e){var t=gantt._get_target_node(e),n=gantt._getClassName(t);if((n||"").indexOf("gantt_task_cell")>=0)return null;for(var i=arguments[1]||this.config.task_attribute;t;){if(t.getAttribute){var r=t.getAttribute(i);if(r)return r}t=t.parentNode}return null},gantt._get_target_node=function(e){var t;return e.tagName?t=e:(e=e||window.event,t=e.target||e.srcElement),t},gantt._trim=function(e){var t=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};return t.apply(e)},gantt._locate_css=function(e,t,n){void 0===n&&(n=!0);for(var i=gantt._get_target_node(e),r="";i;){if(r=gantt._getClassName(i)){var a=r.indexOf(t);if(a>=0){if(!n)return i;var o=0===a||!gantt._trim(r.charAt(a-1)),s=a+t.length>=r.length||!gantt._trim(r.charAt(a+t.length));if(o&&s)return i}}i=i.parentNode}return null},gantt._locateHTML=function(e,t){var n=gantt._get_target_node(e);for(t=t||this.config.task_attribute;n;){if(n.getAttribute){var i=n.getAttribute(t);if(i)return n}n=n.parentNode}return null},gantt.getTaskRowNode=function(e){for(var t=this.$grid_data.childNodes,n=this.config.task_attribute,i=0;i<t.length;i++)if(t[i].getAttribute){var r=t[i].getAttribute(n);if(r==e)return t[i]}return null},gantt.getState=function(){return{drag_id:this._tasks_dnd.drag?this._tasks_dnd.drag.id:void 0,drag_mode:this._tasks_dnd.drag?this._tasks_dnd.drag.mode:void 0,drag_from_start:this._tasks_dnd.drag?this._tasks_dnd.drag.left:void 0,selected_task:this._selected_task,min_date:this._min_date?new Date(this._min_date):void 0,max_date:this._max_date?new Date(this._max_date):void 0,lightbox:this._lightbox_id,touch_drag:this._touch_drag,scale_unit:this._tasks?this._tasks.unit:void 0,scale_step:this._tasks?this._tasks.step:void 0}},gantt._checkTimeout=function(e,t){if(!t)return!0;var n=1e3/t;return 1>n||!e._on_timeout&&(setTimeout(function(){delete e._on_timeout},n),e._on_timeout=!0,!0)},gantt.selectTask=function(e){if(!this.config.select_task)return!1;if(e){if(this._selected_task==e)return this._selected_task;if(!this.callEvent("onBeforeTaskSelected",[e]))return!1;this.unselectTask(),this._selected_task=e,this.refreshTask(e),this.callEvent("onTaskSelected",[e])}return this._selected_task},gantt.unselectTask=function(e){var e=e||this._selected_task;e&&(this._selected_task=null,this.refreshTask(e),this.callEvent("onTaskUnselected",[e]))},gantt.getSelectedId=function(){return this.defined(this._selected_task)?this._selected_task:null},gantt.changeLightboxType=function(e){return this.getLightboxType()==e||void gantt._silent_redraw_lightbox(e)},gantt._is_render_active=function(){return!this._skip_render},gantt._correct_dst_change=function(e,t,n,i){var r=gantt._get_line(i)*n;if(r>3600&&86400>r){var a=e.getTimezoneOffset()-t;a&&(e=gantt.date.add(e,a,"minute"))}return e},function(){var e={};gantt._disableMethod=function(t,n){n="function"==typeof n?n:function(){},e[t]||(e[t]=this[t],this[t]=n)},gantt._restoreMethod=function(t){e[t]&&(this[t]=e[t],e[t]=null)},gantt._disableMethods=function(e){for(var t in e)this._disableMethod(t,e[t])},gantt._restoreMethods=function(){for(var t in e)this._restoreMethod(t)}}(),gantt._batchUpdatePayload=function(e){try{e()}catch(e){window.console.error(e)}},gantt.batchUpdate=function(e,t){if(!this._is_render_active())return void this._batchUpdatePayload(e);var n,i=this._dp&&"off"!=this._dp.updateMode;i&&(n=this._dp.updateMode,this._dp.setUpdateMode("off"));var r={},a={_sync_order:!0,_sync_links:!0,_adjust_scales:!0,render:!0,_render_data:!0,refreshTask:!0,refreshLink:!0,resetProjectDates:function(e){r[e.id]=e}};this._disableMethods(a),this._skip_render=!0,this.callEvent("onBeforeBatchUpdate",[]),this._batchUpdatePayload(e),this.callEvent("onAfterBatchUpdate",[]),this._restoreMethods(),this._sync_order(),this._sync_links();for(var o in r)this.resetProjectDates(r[o]);this._adjust_scales(),this._skip_render=!1,t||this.render(),i&&(this._dp.setUpdateMode(n),this._dp.setGanttMode("tasks"),this._dp.sendData(),this._dp.setGanttMode("links"),this._dp.sendData())},gantt.env={isIE:navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,isIE6:!window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,isIE7:navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,isIE8:navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,isOpera:navigator.userAgent.indexOf("Opera")>=0,isChrome:navigator.userAgent.indexOf("Chrome")>=0,isKHTML:navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0,isFF:navigator.userAgent.indexOf("Firefox")>=0,isIPad:navigator.userAgent.search(/iPad/gi)>=0,isEdge:-1!=navigator.userAgent.indexOf("Edge")},gantt.ajax={cache:!0,method:"get",parse:function(e){if("string"!=typeof e)return e;var t;return e=e.replace(/^[\s]+/,""),window.DOMParser&&!gantt.env.isIE?t=(new window.DOMParser).parseFromString(e,"text/xml"):window.ActiveXObject!==window.undefined&&(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)),t},xmltop:function(e,t,n){if("undefined"==typeof t.status||t.status<400){var i=t.responseXML?t.responseXML||t:gantt.ajax.parse(t.responseText||t);if(i&&null!==i.documentElement&&!i.getElementsByTagName("parsererror").length)return i.getElementsByTagName(e)[0]}return-1!==n&&gantt.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],n]),document.createElement("DIV")},xpath:function(e,t){if(t.nodeName||(t=t.responseXML||t),gantt.env.isIE)return t.selectNodes(e)||[];for(var n,i=[],r=(t.ownerDocument||t).evaluate(e,t,null,XPathResult.ANY_TYPE,null);n=r.iterateNext(),n;)i.push(n);return i},query:function(e){gantt.ajax._call(e.method||"GET",e.url,e.data||"",e.async||!0,e.callback,null,e.headers)},get:function(e,t){this._call("GET",e,null,!0,t)},getSync:function(e){return this._call("GET",e,null,!1)},put:function(e,t,n){this._call("PUT",e,t,!0,n)},del:function(e,t,n){this._call("DELETE",e,t,!0,n)},post:function(e,t,n){1==arguments.length?t="":2!=arguments.length||"function"!=typeof t&&"function"!=typeof window[t]?t=String(t):(n=t,t=""),this._call("POST",e,t,!0,n)},postSync:function(e,t){return t=null===t?"":String(t),this._call("POST",e,t,!1)},getLong:function(e,t){this._call("GET",e,null,!0,t,{url:e})},postLong:function(e,t,n){2==arguments.length&&(n=t,t=""),this._call("POST",e,t,!0,n,{url:e,postData:t})},_call:function(e,t,n,i,r,a,o){var s=window.XMLHttpRequest&&!gantt.env.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),l=null!==navigator.userAgent.match(/AppleWebKit/)&&null!==navigator.userAgent.match(/Qt/)&&null!==navigator.userAgent.match(/Safari/);if(i&&(s.onreadystatechange=function(){if(4==s.readyState||l&&3==s.readyState){if((200!=s.status||""===s.responseText)&&!gantt.callEvent("onAjaxError",[s]))return;window.setTimeout(function(){"function"==typeof r&&r.apply(window,[{xmlDoc:s,filePath:t}]),a&&("undefined"!=typeof a.postData?gantt.ajax.postLong(a.url,a.postData,r):gantt.ajax.getLong(a.url,r)),r=null,s=null},1)}}),"GET"!=e||this.cache||(t+=(t.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),s.open(e,t,i),o)for(var u in o)s.setRequestHeader(u,o[u]);else"POST"==e.toUpperCase()||"PUT"==e||"DELETE"==e?s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==e&&(n=null);return s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(n),i?void 0:{xmlDoc:s,filePath:t}}},gantt._urlSeparator=function(e){return-1!=e.indexOf("?")?"&":"?"},function(){function e(e,t){var n=e.callback;gantt.modalbox.hide(e.box),d=e.box=null,n&&n(t)}function t(t){if(d){t=t||event;var n=t.which||event.keyCode,i=!1;if(gantt.message.keyboard){if(13==n||32==n){var r=t.target||t.srcElement;gantt._getClassName(r).indexOf("gantt_popup_button")>-1&&r.click?r.click():(e(d,!0),i=!0)}27==n&&(e(d,!1),i=!0)}if(i)return t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0)}}function n(e){n.cover||(n.cover=document.createElement("DIV"),n.cover.onkeydown=t,n.cover.className="dhx_modal_cover",document.body.appendChild(n.cover)),document.body.scrollHeight,n.cover.style.display=e?"inline-block":"none"}function i(e,t){var n=gantt._waiAria.messageButtonAttrString(e),i="gantt_"+e.toLowerCase().replace(/ /g,"_")+"_button dhtmlx_"+e.toLowerCase().replace(/ /g,"_")+"_button";return"<div "+n+" class='gantt_popup_button dhtmlx_popup_button "+i+"' result='"+t+"' ><div>"+e+"</div></div>"}function r(e){p.area||(p.area=document.createElement("DIV"),p.area.className="gantt_message_area dhtmlx_message_area",p.area.style[p.position]="5px",document.body.appendChild(p.area)),p.hide(e.id);var t=document.createElement("DIV");return t.innerHTML="<div>"+e.text+"</div>",t.className="gantt-info dhtmlx-info gantt-"+e.type+" dhtmlx-"+e.type,t.onclick=function(){p.hide(e.id),e=null},gantt._waiAria.messageInfoAttr(t),"bottom"==p.position&&p.area.firstChild?p.area.insertBefore(t,p.area.firstChild):p.area.appendChild(t),e.expire>0&&(p.timers[e.id]=window.setTimeout(function(){p.hide(e.id)},e.expire)),p.pull[e.id]=t,t=null,e.id}function a(){for(var e=[].slice.apply(arguments,[0]),t=0;t<e.length;t++)if(e[t])return e[t]}function o(t,n,r){var o=document.createElement("DIV"),s=gantt.uid();gantt._waiAria.messageModalAttr(o,s),o.className=" gantt_modal_box dhtmlx_modal_box gantt-"+t.type+" dhtmlx-"+t.type,o.setAttribute("dhxbox",1);var l="";if(t.width&&(o.style.width=t.width),t.height&&(o.style.height=t.height),t.title&&(l+='<div class="gantt_popup_title dhtmlx_popup_title">'+t.title+"</div>"),l+='<div class="gantt_popup_text dhtmlx_popup_text" id="'+s+'"><span>'+(t.content?"":t.text)+'</span></div><div  class="gantt_popup_controls dhtmlx_popup_controls">',n&&(l+=i(a(t.ok,gantt.locale.labels.message_ok,"OK"),!0)),r&&(l+=i(a(t.cancel,gantt.locale.labels.message_cancel,"Cancel"),!1)),t.buttons)for(var u=0;u<t.buttons.length;u++)l+=i(t.buttons[u],u);if(l+="</div>",o.innerHTML=l,t.content){var c=t.content;"string"==typeof c&&(c=document.getElementById(c)),"none"==c.style.display&&(c.style.display=""),o.childNodes[t.title?1:0].appendChild(c)}return o.onclick=function(n){n=n||event;var i=n.target||n.srcElement;if(i.className||(i=i.parentNode),"gantt_popup_button"==i.className.split(" ")[0]){var r=i.getAttribute("result");r="true"==r||"false"!=r&&r,e(t,r)}},t.box=o,(n||r)&&(d=t),o}function s(e,i,r){var a=e.tagName?e:o(e,i,r);e.hidden||n(!0),document.body.appendChild(a);var s=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-a.offsetWidth)/2)),l=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-a.offsetHeight)/2));return"top"==e.position?a.style.top="-3px":a.style.top=l+"px",a.style.left=s+"px",a.onkeydown=t,gantt.modalbox.focus(a),e.hidden&&gantt.modalbox.hide(a),gantt.callEvent("onMessagePopup",[a]),a}function l(e){return s(e,!0,!1)}function u(e){return s(e,!0,!0)}function c(e){return s(e)}function h(e,t,n){return"object"!=typeof e&&("function"==typeof t&&(n=t,t=""),e={text:e,type:t,callback:n}),e}function f(e,t,n,i){return"object"!=typeof e&&(e={text:e,type:t,expire:n,id:i}),e.id=e.id||p.uid(),e.expire=e.expire||p.expire,e}var d=null;document.attachEvent?document.attachEvent("onkeydown",t):document.addEventListener("keydown",t,!0),gantt.alert=function(){var e=h.apply(this,arguments);return e.type=e.type||"confirm",l(e)},gantt.confirm=function(){var e=h.apply(this,arguments);return e.type=e.type||"alert",u(e)},gantt.modalbox=function(){var e=h.apply(this,arguments);return e.type=e.type||"alert",c(e)},gantt.modalbox.hide=function(e){for(;e&&e.getAttribute&&!e.getAttribute("dhxbox");)e=e.parentNode;e&&(e.parentNode.removeChild(e),n(!1),gantt.callEvent("onAfterMessagePopup",[e]))},gantt.modalbox.focus=function(e){setTimeout(function(){var t=gantt._getFocusableNodes(e);t.length&&t[0].focus&&t[0].focus()},1)};var p=gantt.message=function(e,t,n,i){e=f.apply(this,arguments),e.type=e.type||"info";var a=e.type.split("-")[0];switch(a){case"alert":return l(e);case"confirm":return u(e);case"modalbox":return c(e);default:return r(e)}};p.seed=(new Date).valueOf(),p.uid=function(){return p.seed++},p.expire=4e3,p.keyboard=!0,p.position="top",p.pull={},p.timers={},p.hideAll=function(){for(var e in p.pull)p.hide(e)},p.hide=function(e){var t=p.pull[e];t&&t.parentNode&&(window.setTimeout(function(){t.parentNode.removeChild(t),t=null},2e3),t.className+=" hidden",p.timers[e]&&window.clearTimeout(p.timers[e]),delete p.pull[e])}}(),gantt.date={init:function(){for(var e=gantt.locale.date.month_short,t=gantt.locale.date.month_short_hash={},n=0;n<e.length;n++)t[e[n]]=n;for(var e=gantt.locale.date.month_full,t=gantt.locale.date.month_full_hash={},n=0;n<e.length;n++)t[e[n]]=n},date_part:function(e){var t=new Date(e);return e.setHours(0),this.hour_start(e),e.getHours()&&(e.getDate()<t.getDate()||e.getMonth()<t.getMonth()||e.getFullYear()<t.getFullYear())&&e.setTime(e.getTime()+36e5*(24-e.getHours())),e},time_part:function(e){return(e.valueOf()/1e3-60*e.getTimezoneOffset())%86400},week_start:function(e){var t=e.getDay();return gantt.config.start_on_monday&&(0===t?t=6:t--),this.date_part(this.add(e,-1*t,"day"))},month_start:function(e){return e.setDate(1),this.date_part(e)},year_start:function(e){return e.setMonth(0),this.month_start(e)},day_start:function(e){return this.date_part(e)},hour_start:function(e){return e.getMinutes()&&e.setMinutes(0),this.minute_start(e),e},minute_start:function(e){return e.getSeconds()&&e.setSeconds(0),e.getMilliseconds()&&e.setMilliseconds(0),e},_add_days:function(e,t){var n=new Date(e.valueOf());return n.setDate(n.getDate()+t),t>=0&&!e.getHours()&&n.getHours()&&(n.getDate()<=e.getDate()||n.getMonth()<e.getMonth()||n.getFullYear()<e.getFullYear())&&n.setTime(n.getTime()+36e5*(24-n.getHours())),n},add:function(e,t,n){var i=new Date(e.valueOf());switch(n){case"day":i=gantt.date._add_days(i,t);break;case"week":i=gantt.date._add_days(i,7*t);break;case"month":i.setMonth(i.getMonth()+t);break;case"year":i.setYear(i.getFullYear()+t);break;case"hour":i.setTime(i.getTime()+60*t*60*1e3);break;case"minute":i.setTime(i.getTime()+60*t*1e3);break;default:return gantt.date["add_"+n](e,t,n)}return i},to_fixed:function(e){return 10>e?"0"+e:e},copy:function(e){return new Date(e.valueOf())},date_to_str:function(e,t){return e=e.replace(/%[a-zA-Z]/g,function(e){switch(e){case"%d":return'"+gantt.date.to_fixed(date.getDate())+"';case"%m":return'"+gantt.date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+gantt.date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+gantt.locale.date.day_short[date.getDay()]+"';case"%l":return'"+gantt.locale.date.day_full[date.getDay()]+"';case"%M":return'"+gantt.locale.date.month_short[date.getMonth()]+"';case"%F":return'"+gantt.locale.date.month_full[date.getMonth()]+"';case"%h":return'"+gantt.date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+gantt.date.to_fixed(date.getHours())+"';case"%i":return'"+gantt.date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+gantt.date.to_fixed(date.getSeconds())+"';case"%W":return'"+gantt.date.to_fixed(gantt.date.getISOWeek(date))+"';default:return e}}),t&&(e=e.replace(/date\.get/g,"date.getUTC")),new Function("date",'return "'+e+'";')},str_to_date:function(e,t){for(var n="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",i=e.match(/%[a-zA-Z]/g),r=0;r<i.length;r++)switch(i[r]){case"%j":case"%d":n+="set[2]=temp["+r+"]||1;";break;case"%n":case"%m":n+="set[1]=(temp["+r+"]||1)-1;";break;case"%y":n+="set[0]=temp["+r+"]*1+(temp["+r+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":n+="set[3]=temp["+r+"]||0;";break;case"%i":n+="set[4]=temp["+r+"]||0;";break;case"%Y":n+="set[0]=temp["+r+"]||0;";break;case"%a":case"%A":n+="set[3]=set[3]%12+((temp["+r+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":n+="set[5]=temp["+r+"]||0;";break;case"%M":n+="set[1]=gantt.locale.date.month_short_hash[temp["+r+"]]||0;";break;case"%F":n+="set[1]=gantt.locale.date.month_full_hash[temp["+r+"]]||0;"}var a="set[0],set[1],set[2],set[3],set[4],set[5]";return t&&(a=" Date.UTC("+a+")"),new Function("date","var set=[0,0,1,0,0,0]; "+n+" return new Date("+a+");")},getISOWeek:function(e){if(!e)return!1;var t=e.getDay();0===t&&(t=7);var n=new Date(e.valueOf());n.setDate(e.getDate()+(4-t));var i=n.getFullYear(),r=Math.round((n.getTime()-new Date(i,0,1).getTime())/864e5),a=1+Math.floor(r/7);return a},getUTCISOWeek:function(e){return this.getISOWeek(e)},convert_to_utc:function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())},parseDate:function(e,t){return e&&!e.getFullYear&&(gantt.defined(t)&&(t="string"==typeof t?gantt.defined(gantt.templates[t])?gantt.templates[t]:gantt.date.str_to_date(t):gantt.templates.xml_date),e=e?t(e):null),e}},gantt.date.quarter_start=function(e){gantt.date.month_start(e);var t,n=e.getMonth();return t=n>=9?9:n>=6?6:n>=3?3:0,e.setMonth(t),e},gantt.date.add_quarter=function(e,t){return gantt.date.add(e,3*t,"month")},window.jQuery&&!function(e){var t=[];e.fn.dhx_gantt=function(n){if(n=n||{},"string"!=typeof n){var i=[];return this.each(function(){if(this&&this.getAttribute&&!this.getAttribute("dhxgantt")){for(var e in n)"data"!=e&&(gantt.config[e]=n[e]);gantt.init(this),n.data&&gantt.parse(n.data),i.push(gantt)}}),1===i.length?i[0]:i}return t[n]?t[n].apply(this,[]):void e.error("Method "+n+" does not exist on jQuery.dhx_gantt")}}(jQuery),gantt.locale={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{new_task:"New task",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Task will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",section_type:"Type",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Cancel"}},gantt.skins.skyblue={config:{grid_width:350,row_height:27,scale_height:27,link_line_width:1,link_arrow_size:8,lightbox_additional_height:75},_second_column_width:95,_third_column_width:80},gantt.skins.meadow={config:{grid_width:350,row_height:27,scale_height:30,link_line_width:2,link_arrow_size:6,lightbox_additional_height:72},_second_column_width:95,_third_column_width:80},gantt.skins.terrace={config:{grid_width:360,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:6,lightbox_additional_height:75},_second_column_width:90,_third_column_width:70},gantt.skins.broadway={config:{grid_width:360,row_height:35,scale_height:35,link_line_width:1,link_arrow_size:7,lightbox_additional_height:86},_second_column_width:90,_third_column_width:80,_lightbox_template:"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>",_config_buttons_left:{},_config_buttons_right:{gantt_delete_btn:"icon_delete",gantt_save_btn:"icon_save"}},gantt.skins.contrast_black={config:{grid_width:360,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:6,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80},gantt.skins.contrast_white={config:{grid_width:360,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:6,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80},gantt.config.touch_drag=500,gantt.config.touch=!0,gantt.config.touch_feedback=!0,gantt.config.touch_feedback_duration=1,gantt._prevent_touch_scroll=!1,gantt._touch_feedback=function(){gantt.config.touch_feedback&&navigator.vibrate&&navigator.vibrate(gantt.config.touch_feedback_duration)},gantt._init_touch_events=function(){if("force"!=this.config.touch&&(this.config.touch=this.config.touch&&(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("Touch"))),this.config.touch){var e=!0;try{document.createEvent("TouchEvent")}catch(t){e=!1}e?this._touch_events(["touchmove","touchstart","touchend"],function(e){return e.touches&&e.touches.length>1?null:e.touches[0]?{target:e.target,pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:e},function(){return!1}):window.navigator.pointerEnabled?this._touch_events(["pointermove","pointerdown","pointerup"],function(e){
return"mouse"==e.pointerType?null:e},function(e){return!e||"mouse"==e.pointerType}):window.navigator.msPointerEnabled&&this._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(e){return e.pointerType==e.MSPOINTER_TYPE_MOUSE?null:e},function(e){return!e||e.pointerType==e.MSPOINTER_TYPE_MOUSE})}},gantt._touch_events=function(e,t,n){function i(e){return e&&e.preventDefault&&e.preventDefault(),(e||event).cancelBubble=!0,!1}function r(e){var t=gantt._task_area_pulls,n=gantt.getTask(e);if(n&&gantt.isTaskVisible(e))for(var i in t)if(n=t[i][e],n&&n.getAttribute("task_id")&&n.getAttribute("task_id")==e){var r=n.cloneNode(!0);return h=n,t[i][e]=r,n.style.display="none",r.className+=" gantt_drag_move ",n.parentNode.appendChild(r),r}}var a,o=0,s=!1,l=!1,u=null,c=null,h=null;this._gantt_touch_event_ready||(this._gantt_touch_event_ready=1,gantt.event(gantt.$container,e[0],function(e){if(!n(e)&&s){c&&clearTimeout(c);var r=t(e);if(gantt._tasks_dnd.drag.id||gantt._tasks_dnd.drag.start_drag)return gantt._tasks_dnd.on_mouse_move(r),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,!1;if(!gantt._prevent_touch_scroll){if(r&&u){var h=u.pageX-r.pageX,f=u.pageY-r.pageY;if(!l&&(Math.abs(h)>5||Math.abs(f)>5)&&(gantt._touch_scroll_active=l=!0,o=0,a=gantt.getScrollState()),l){gantt.scrollTo(a.x+h,a.y+f);var d=gantt.getScrollState();if(a.x!=d.x&&f>2*h||a.y!=d.y&&h>2*f)return i(e)}}return i(e)}return!0}})),gantt.event(this.$container,"contextmenu",function(e){return s?i(e):void 0}),gantt.event(this.$container,e[1],function(e){if(!n(e)){if(e.touches&&e.touches.length>1)return void(s=!1);u=t(e),gantt._locate_css(u,"gantt_hor_scroll")||gantt._locate_css(u,"gantt_ver_scroll")||(s=!0),c=setTimeout(function(){var e=gantt.locate(u);!e||gantt._locate_css(u,"gantt_link_control")||gantt._locate_css(u,"gantt_grid_data")||(gantt._tasks_dnd.on_mouse_down(u),gantt._tasks_dnd.drag&&gantt._tasks_dnd.drag.start_drag&&(r(e),gantt._tasks_dnd._start_dnd(u),gantt._touch_drag=!0,gantt.refreshTask(e),gantt._touch_feedback())),c=null},gantt.config.touch_drag)}}),gantt.event(this.$container,e[2],function(e){if(!n(e)){c&&clearTimeout(c),gantt._touch_drag=!1,s=!1;var r=t(e);if(gantt._tasks_dnd.on_mouse_up(r),h&&(gantt.refreshTask(gantt.locate(h)),h.parentNode&&(h.parentNode.removeChild(h),gantt._touch_feedback())),gantt._touch_scroll_active=s=l=!1,h=null,u&&o){var a=new Date;500>a-o?(gantt._on_dblclick(u),i(e)):o=a}else o=new Date}})},function(){function e(e,t){var n=gantt.env.isIE?"":"%c",i=[n,'"',e,'"',n," has been deprecated in dhtmlxGantt v4.0 and will stop working in v5.0. Use ",n,'"',t,'"',n," instead. \nSee more details at http://docs.dhtmlx.com/gantt/migrating.html "].join(""),r=window.console.warn||window.console.log,a=[i];gantt.env.isIE||(a=a.concat(["font-weight:bold","font-weight:normal","font-weight:bold","font-weight:normal"])),r.apply(window.console,a)}function t(t){return function(){return e("dhtmlx."+t,"gantt."+t),gantt[t].apply(gantt,arguments)}}window.dhtmlx||(window.dhtmlx={});for(var n=["message","alert","confirm","modalbox","uid","copy","mixin","defined","bind","assert"],i=0;i<n.length;i++)window.dhtmlx[n[i]]||(dhtmlx[n[i]]=t(n[i]));window.dataProcessor||(window.dataProcessor=function(t){return e("new dataProcessor(url)","new gantt.dataProcessor(url)"),new gantt.dataProcessor(t)})}();!function(e){function t(){this.fake=!0,this.boundary="--------FormData"+Math.random(),this._fields=[]}e.FormData||(t.prototype.append=function(e,t){this._fields.push([e,t])},t.prototype.toString=function(){var e=this.boundary,t="";return this._fields.forEach(function(n){if(t+="--"+e+"\r\n",n[1].name){var i=n[1];t+='Content-Disposition: form-data; name="'+n[0]+'"; filename="'+i.name+'"\r\n',t+="Content-Type: "+i.type+"\r\n\r\n",t+=i.getAsBinary()+"\r\n"}else t+='Content-Disposition: form-data; name="'+n[0]+'";\r\n\r\n',t+=n[1]+"\r\n"}),t+="--"+e+"--"},e.FormData=t)}(window|self);!function(){function e(e,t,n){gantt.env.isIE?(gantt.env.isIE=!1,gantt.ajax.post(e,t,n),gantt.env.isIE=!0):gantt.ajax.post(e,t,n)}function t(e,t){for(var n in t)e[n]||(e[n]=t[n]);return e}function n(e){var t=e.config.columns;if(t)for(var n=0;n<t.length;n++)t[n].template&&(t[n].$template=!0)}function i(i){function o(e){if(!t){var t=document.createElement("DIV");t.style.cssText="position:absolute; display:none;",document.body.appendChild(t)}return v[e]?v[e]:(t.className=e,v[e]=c(t,"color")+";"+c(t,"backgroundColor"))}function s(e,t){return function(n,i,r){i=i||this.config.root_id,r=r||this;var a=this.getChildren(i);if(a)for(var o=0;o<a.length;o++){var s=this._pull[a[o]];(!e||s.end_date>e)&&(!t||s.start_date<t)&&n.call(r,s),this.hasChild(s.id)&&this.eachTask(n,s.id,r)}}}function l(e){var t={};for(var n in e)"$"!=n.charAt(0)&&(t[n]=e[n]);return t.start_date=i.templates.xml_format(t.start_date),t.end_date&&(t.end_date=i.templates.xml_format(t.end_date)),t}function u(e){var t=i.templates.task_text(e.start_date,e.end_date,e),n=l(e);return n.text=t||n.text,n}function c(e,t){var n=e.currentStyle?e.currentStyle[t]:getComputedStyle(e,null)[t],i=n.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+)/i);return(i&&4===i.length?("0"+parseInt(i[1],10).toString(16)).slice(-2)+("0"+parseInt(i[2],10).toString(16)).slice(-2)+("0"+parseInt(i[3],10).toString(16)).slice(-2):n).replace("#","")}function h(e){var t=d(e,u(e));t.start_date&&(t.start_date=e.start_date.valueOf()),t.end_date&&(t.end_date=e.end_date.valueOf()),t.$start=i._day_index_by_date(e.start_date),t.$end=i._day_index_by_date(e.end_date),t.$level=e.$level,t.$type=e.$rendered_type;var n=i.templates;return t.$text=n.task_text(e.start,e.end_date,e),t.$left=n.leftside_text?n.leftside_text(e.start,e.end_date,e):"",t.$right=n.rightside_text?n.rightside_text(e.start,e.end_date,e):"",t}function f(e){var t=h(e),n=i.getTaskNode(e.id);if(n&&n.firstChild){var r=c(i._no_progress_colors?n:n.firstChild,"backgroundColor");"363636"==r&&(r=c(n,"backgroundColor")),t.$color=r}else e.color&&(t.$color=e.color);return t}function d(e,t){for(var n=0;n<i.config.columns.length;n++){var r=i.config.columns[n].template;if(r){var a=r(e);a instanceof Date&&(a=i.templates.date_grid(a,e)),t["_"+n]=a}}return t}function p(e){for(var t=l(e),n=0;n<a.length;n++){var r=i.templates[a[n]];r&&(t["$"+n]=r(e.start_date,e.end_date,e))}return d(e,t),t.open=e.$open,t}function g(e,t){for(var n=0;n<t.length;n++)t[n].label=t[n].label||e.locale.labels["column_"+t[n].name],"string"==typeof t[n].width&&(t[n].width=1*t[n].width)}function m(){i.exportMode=!0;var e=i.serialize();return i.exportMode=!1,e}var v={};i.exportToPDF=function(e){e&&e.raw?e=t(e,{name:"gantt.pdf",data:this._serialize_html()}):(e=t(e||{},{name:"gantt.pdf",data:this._serialize_all(),config:this.config}),g(i,e.config.columns)),e.version=this.version,this._send_to_export(e,"pdf")},i.exportToPNG=function(e){e&&e.raw?e=t(e,{name:"gantt.png",data:this._serialize_html()}):(e=t(e||{},{name:"gantt.png",data:this._serialize_all(),config:this.config}),g(i,e.config.columns)),e.version=this.version,this._send_to_export(e,"png")},i.exportToICal=function(e){e=t(e||{},{name:"gantt.ical",data:this._serialize_plain().data,version:this.version}),this._send_to_export(e,"ical")},i.exportToExcel=function(e){e=e||{};var n,i,r,a;if(e.start||e.end){r=this.getState(),i=[this.config.start_date,this.config.end_date],a=this.getScrollState();var o=this.date.str_to_date(this.config.api_date);n=this.eachTask,e.start&&(this.config.start_date=o(e.start)),e.end&&(this.config.end_date=o(e.end)),this.render(),this.eachTask=s(this.config.start_date,this.config.end_date)}this._no_progress_colors="base-colors"===e.visual,e=t(e,{name:"gantt.xlsx",title:"Tasks",data:this._serialize_table(e).data,columns:this._serialize_columns({rawDates:!0}),version:this.version}),e.visual&&(e.scales=this._serialize_scales(e)),this._send_to_export(e,"excel"),(e.start||e.end)&&(this.config.start_date=r.min_date,this.config.end_date=r.max_date,this.eachTask=n,this.render(),this.scrollTo(a.x,a.y),this.config.start_date=i[0],this.config.end_date=i[1])},i.exportToJSON=function(e){e=t(e||{},{name:"gantt.json",data:this._serialize_all(),config:this.config,columns:this._serialize_columns(),worktime:{hours:this._working_time_helper.hours,dates:this._working_time_helper.dates},version:this.version}),this._send_to_export(e,"json")},i._msp_config=function(e){if(e.project)for(var t in e.project)e._custom_data||(e._custom_data={}),e._custom_data[t]=e.project[t](this.config);if(e.tasks)for(var n=0;n<e.data.length;n++){var r=this.getTask(e.data[n].id);r._custom_data||(r._custom_data={});for(var t in e.tasks)r._custom_data[t]=e.tasks[t](r,this.config)}delete e.project,delete e.tasks,e.time={hours:i._working_time_helper.hours,dates:i._working_time_helper.dates};var a=this.getSubtaskDates(),o=this.date.date_to_str("%d-%m-%Y %H:%i:%s");e.start_end={start_date:o(a.start_date),end_date:o(a.end_date)}},i._msp_data=function(){var e=this.templates.xml_format;this.templates.xml_format=this.date.date_to_str("%d-%m-%Y %H:%i:%s");var t=this._serialize_all();return this.templates.xml_format=e,t},i._ajax_to_export=function(t,n,i){delete t.callback;var a=t.server||r,o="type="+n+"&store=1&data="+encodeURIComponent(JSON.stringify(t)),s=function(e){var t=e.xmlDoc||e,n=t.status>400,r=null;if(!n)try{r=JSON.parse(t.responseText)}catch(e){}i(r)};e(a,o,s)},i._send_to_export=function(e,t){if(e.config&&n(e,t),e.callback)return i._ajax_to_export(e,t,e.callback);var a=this._create_hidden_form();a.firstChild.action=e.server||r,a.firstChild.childNodes[0].value=JSON.stringify(e),a.firstChild.childNodes[1].value=t,a.firstChild.submit()},i._create_hidden_form=function(){if(!this._hidden_export_form){var e=this._hidden_export_form=document.createElement("div");e.style.display="none",e.innerHTML="<form method='POST' target='_blank'><textarea name='data' style='width:0px; height:0px;' readonly='true'></textarea><input type='hidden' name='type' value=''></form>",document.body.appendChild(e)}return this._hidden_export_form};var _=i.json._copyObject;i._serialize_html=function(){return this.$container.parentNode.innerHTML},i._serialize_all=function(){i.json._copyObject=p;var e=m();return i.json._copyObject=_,e},i._serialize_plain=function(){var e=i.templates.xml_format;i.templates.xml_format=i.date.date_to_str("%Y%m%dT%H%i%s",!0),i.json._copyObject=u;var t=m();return i.templates.xml_format=e,i.json._copyObject=_,delete t.links,t},i._serialize_table=function(e){i.json._copyObject=e.visual?f:h;var t=m();if(i.json._copyObject=_,delete t.links,e.cellColors){var n=this.templates.task_cell_class;if(n){for(var r=this._scale_helpers.prepareConfigs(this._get_scales(),this.config.min_column_width,this._get_resize_options().x?Math.max(this.config.autosize_min_width,0):this.$task.offsetWidth,this.config.scale_height-1),a=r[0].trace_x,s=1;s<r.length;s++)r[s].trace_x.length>a.length&&(a=r[s].trace_x);for(var s=0;s<t.data.length;s++){t.data[s].styles=[];for(var l=this.getTask(t.data[s].id),u=0;u<a.length;u++){var c=a[u],d=n(l,c);d&&t.data[s].styles.push({index:u,styles:o(d)})}}}}return t},i._serialize_scales=function(e){for(var t=[],n=this._scale_helpers.prepareConfigs(this._get_scales(),this.config.min_column_width,this._get_resize_options().x?Math.max(this.config.autosize_min_width,0):this.$task.offsetWidth,this.config.scale_height-1),r=1/0,a=0,s=0;s<n.length;s++)r=Math.min(r,n[s].col_width);for(var s=0;s<n.length;s++){var l=0,u=0,c=[];t.push(c);var h=n[s];a=Math.max(a,h.trace_x.length);for(var f=h.template||(h.date?i.date.date_to_str(h.date):i.config.date_scale),d=0;d<h.trace_x.length;d++){var p=h.trace_x[d];u=l+Math.round(h.width[d]/r);var g={text:f(p),start:l,end:u};if(e.cellColors){var m=h.css||this.templates.scale_cell_class;if(m){var v=m(p);v&&(g.styles=o(v))}}c.push(g),l=u}}return{width:a,height:t.length,data:t}},i._serialize_columns=function(e){i.exportMode=!0;for(var t=[],n=i.config.columns,r=0,a=0;a<n.length;a++)"add"!=n[a].name&&"buttons"!=n[a].name&&(t[r]={id:n[a].template?"_"+a:n[a].name,header:n[a].label||i.locale.labels["column_"+n[a].name],width:n[a].width?Math.floor(n[a].width/4):""},"duration"==n[a].name&&(t[r].type="number"),"start_date"!=n[a].name&&"end_date"!=n[a].name||(t[r].type="date",e&&e.rawDates&&(t[r].id=n[a].name)),r++);return i.exportMode=!1,t}}var r="https://export.dhtmlx.com/gantt",a=["leftside_text","rightside_text","task_text","progress_text","task_class"];gantt.ajax||(window.dhtmlxAjax?gantt.ajax=window.dhtmlxAjax:window.dhx4&&(gantt.ajax=window.dhx4.ajax)),i(gantt),window.Gantt&&Gantt.plugin&&Gantt.plugin(i)}(),function(){function e(e){for(var t=0;t<e.length;t++){0==e[t].parent&&(e[t]._lvl=1);for(var n=t+1;n<e.length;n++)e[t].id==e[n].parent&&(e[n]._lvl=e[t]._lvl+1)}}function t(e){for(var t=0;t<e.length;t++)delete e[t]._lvl}function n(n){e(n.data);for(var r={},s=0;s<n.data.length;s++)r[n.data[s].id]=n.data[s];var l={};for(s=0;s<n.links.length;s++){var u=n.links[s];gantt.isTaskExists(u.source)&&gantt.isTaskExists(u.target)&&(l[u.id]=u)}for(s in l)a(l[s],r);var c={};for(s in r)i(r[s],l,r,{},c,null);for(s in l)o(l,r);for(s=0;s<n.links.length;s++)l[n.links[s].id]||(n.links.splice(s,1),s--);t(n.data)}function i(e,t,n,a,o,s){var l=e.$_source;if(l){a[e.id]&&r(s,t,a,o),a[e.id]=!0;for(var u={},c=0;c<l.length;c++)if(!o[l[c]]){var h=t[l[c]],f=n[h._target];u[f.id]&&r(h,t,a,o),u[f.id]=!0,i(f,t,n,a,o,h)}a[e.id]=!1}}function r(e,t,n,i){e&&(gantt.callEvent("onExportCircularDependency",[e.id,e])&&delete t[e.id],delete n[e._source],delete n[e._target],i[e.id]=!0)}function a(e,t){var n,i,r={target:t[e.target],source:t[e.source]};if(r.target._lvl!=r.source._lvl){r.target._lvl<r.source._lvl?(n="source",i=r.target._lvl):(n="target",i=r.source._lvl);do{var a=t[r[n].parent];if(!a)break;r[n]=a}while(r[n]._lvl<i);for(var o=t[r.source.parent],s=t[r.target.parent];o&&s&&o.id!=s.id;)r.source=o,r.target=s,o=t[r.source.parent],s=t[r.target.parent]}e._target=r.target.id,e._source=r.source.id,r.target.$_target||(r.target.$_target=[]),r.target.$_target.push(e.id),r.source.$_source||(r.source.$_source=[]),r.source.$_source.push(e.id)}function o(e,t){for(var n in e)delete e[n]._target,delete e[n]._source;for(var i in t)delete t[i].$_source,delete t[i].$_target}function s(e,t){if(t&&t.project){for(var n in t.project)gantt.config.$custom_data||(gantt.config.$custom_data={}),gantt.config.$custom_data[n]="function"==typeof t.project[n]?t.project[n](gantt.config):t.project[n];delete t.project}}function l(e,t){t&&t.tasks&&(e.data.forEach(function(e){for(var n in t.tasks)e.$custom_data||(e.$custom_data={}),e.$custom_data[n]="function"==typeof t.tasks[n]?t.tasks[n](e,gantt.config):t.tasks[n]}),delete t.tasks)}function u(e,t){var n=t.name||"gantt.xml";delete t.name,gantt.config.custom=t;var i,r=gantt._working_time_helper;i=r.get_calendar?r.get_calendar():{hours:gantt._working_time_helper.hours,dates:gantt._working_time_helper.dates};var a=gantt.getSubtaskDates();a.start_date&&a.end_date&&(gantt.config.start_end={start_date:gantt.templates.xml_format(a.start_date),end_date:gantt.templates.xml_format(a.end_date)});var o=void 0!==t.auto_scheduling&&!!t.auto_scheduling,s={callback:t.callback||null,config:gantt.config,data:e,manual:o,name:n,worktime:i};for(var l in t)s[l]=t[l];return s}function c(e){function t(e){var t=e.server||h,n=e.store||0,i=e.data,r=e.callback,a={};e.durationUnit&&(a.durationUnit=e.durationUnit),e.projectProperties&&(a.projectProperties=e.projectProperties),e.taskProperties&&(a.taskProperties=e.taskProperties),i.append("type","msproject-parse"),i.append("data",JSON.stringify(a)),n&&i.append("store",n);var o=new XMLHttpRequest;o.onreadystatechange=function(e){4==o.readyState&&0==o.status&&r&&r(null)},o.onload=function(){var e=o.status>400,t=null;if(!e)try{t=JSON.parse(o.responseText)}catch(e){}r&&r(t)},o.open("POST",t,!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(i)}e._ms_export={},e.exportToMSProject=function(e){e=e||{},e.skip_circular_links=void 0===e.skip_circular_links||!!e.skip_circular_links;var t=this.templates.xml_format;this.templates.xml_format=this.date.date_to_str("%d-%m-%Y %H:%i:%s");var i=this._serialize_all();s(i,e),l(i,e),e.skip_circular_links&&n(i),e=u(i,e),this._send_to_export(e,"msproject"),this.templates.xml_format=t,this.config.$custom_data=null,this.config.custom=null},e.importFromMSProject=function(e){var n=e.data;if(n instanceof FormData);else if(n instanceof File){var i=new FormData;i.append("file",n),e.data=i}t(e)}}var h="https://export.dhtmlx.com/gantt";c(gantt),window.Gantt&&Gantt.plugin&&Gantt.plugin(c)}();var saveAs=saveAs||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},o=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u="application/octet-stream",c=4e4,h=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,c)},f=function(e,t,n){t=[].concat(t);for(var i=t.length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){l(e)}}},d=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},p=function(t,l,c){c||(t=d(t));var p,g=this,m=t.type,v=m===u,_=function(){f(g,"writestart progress write writeend".split(" "))},y=function(){if((s||v&&o)&&e.FileReader){var i=new FileReader;return i.onloadend=function(){var t=s?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=e.open(t,"_blank");n||(e.location.href=t),t=void 0,g.readyState=g.DONE,_()},i.readAsDataURL(t),void(g.readyState=g.INIT)}if(p||(p=n().createObjectURL(t)),v)e.location.href=p;else{var r=e.open(p,"_blank");r||(e.location.href=p)}g.readyState=g.DONE,_(),h(p)};return g.readyState=g.INIT,r?(p=n().createObjectURL(t),void setTimeout(function(){i.href=p,i.download=l,a(i),_(),h(p),g.readyState=g.DONE})):void y()},g=p.prototype,m=function(e,t,n){return new p(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=d(e)),navigator.msSaveOrOpenBlob(e,t)}:(g.abort=function(){},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs}),gantt._markers||(gantt._markers={}),gantt.config.show_markers=!0,gantt.attachEvent("onClear",function(){gantt._markers={}}),gantt.attachEvent("onGanttReady",function(){function e(e){if(!gantt.config.show_markers)return!1;if(!e.start_date)return!1;var t=gantt.getState();if(!(+e.start_date>+t.max_date||+e.end_date&&+e.end_date<+t.min_date||+e.start_date<+t.min_date)){var n=document.createElement("div");n.setAttribute("marker_id",e.id);var i="gantt_marker";gantt.templates.marker_class&&(i+=" "+gantt.templates.marker_class(e)),e.css&&(i+=" "+e.css),e.title&&(n.title=e.title),n.className=i;var r=gantt.posFromDate(e.start_date);if(n.style.left=r+"px",n.style.height=Math.max(gantt._y_from_ind(gantt._order.length),0)+"px",e.end_date){var a=gantt.posFromDate(e.end_date);n.style.width=Math.max(a-r,0)+"px"}return e.text&&(n.innerHTML="<div class='gantt_marker_content' >"+e.text+"</div>"),n}}var t=document.createElement("div");t.className="gantt_marker_area",gantt.$task_data.appendChild(t),gantt.$marker_area=t,gantt._markerRenderer=gantt._task_renderer("markers",e,gantt.$marker_area,null)}),gantt.attachEvent("onDataRender",function(){gantt.renderMarkers()}),gantt.getMarker=function(e){return this._markers?this._markers[e]:null},gantt.addMarker=function(e){return e.id=e.id||gantt.uid(),this._markers[e.id]=e,e.id},gantt.deleteMarker=function(e){return!(!this._markers||!this._markers[e])&&(delete this._markers[e],!0)},gantt.updateMarker=function(e){this._markerRenderer&&this._markerRenderer.render_item(this.getMarker(e))},gantt._getMarkers=function(){var e=[];for(var t in this._markers)e.push(this._markers[t]);return e},gantt.renderMarkers=function(){if(!this._markers)return!1;if(!this._markerRenderer)return!1;var e=this._getMarkers();return this._markerRenderer.render_items(e),!0},function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Popper=t()}(this,function(){"use strict";function e(e){var t=!1,n=0,i=document.createElement("span"),r=new MutationObserver(function(){e(),t=!1});return r.observe(i,{attributes:!0}),function(){t||(t=!0,i.setAttribute("x-index",n),n+=1)}}function t(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},K))}}function n(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function i(e,t){Object.keys(t).forEach(function(i){var r="";["width","height","top","right","bottom","left"].indexOf(i)!==-1&&n(t[i])&&(r="px"),e.style[i]=t[i]+r})}function r(e){for(var t=[!1,"ms","webkit","moz","o"],n=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<t.length-1;i++){var r=t[i],a=r?""+r+n:e;if("undefined"!=typeof window.document.body.style[a])return a}return null}function a(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||e.firstElementChild.offsetParent===e)}function o(e){return null!==e.parentNode?o(e.parentNode):e}function s(e){var t=e&&e.offsetParent,n=t&&t.nodeName;return n&&"BODY"!==n&&"HTML"!==n?t:window.document.documentElement}function l(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return window.document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?e:t,r=n?t:e,u=document.createRange();u.setStart(i,0),u.setEnd(r,0);var c=u.commonAncestorContainer;if(e!==c&&t!==c)return a(c)?c:s(c);var h=o(e);return h.host?l(h.host,t):l(e,o(t).host)}function u(e,t){if(1!==e.nodeType)return[];var n=window.getComputedStyle(e,null);return t?n[t]:n}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===t?"scrollTop":"scrollLeft",i=e.nodeName;if("BODY"===i||"HTML"===i){var r=window.document.documentElement,a=window.document.scrollingElement||r;return a[n]}return e[n]}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=c(t,"top"),r=c(t,"left"),a=n?-1:1;return e.top+=i*a,e.bottom+=i*a,e.left+=r*a,e.right+=r*a,e}function f(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function d(e){if(!e||["HTML","BODY","#document"].indexOf(e.nodeName)!==-1)return window.document.body;var t=u(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/(auto|scroll)/.test(n+r+i)?e:d(f(e))}function p(e,t){var n="x"===t?"Left":"Top",i="Left"===n?"Right":"Bottom";return+e["border"+n+"Width"].split("px")[0]+ +e["border"+i+"Width"].split("px")[0]}function g(){var e=window.document.body,t=window.document.documentElement;return{height:Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight),width:Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth)}}function m(e){return oe({},e,{right:e.left+e.width,bottom:e.top+e.height})}function v(e){var t={};if(le){try{t=e.getBoundingClientRect()}catch(e){}var n=c(e,"top"),i=c(e,"left");t.top+=n,t.left+=i}else t=e.getBoundingClientRect();var r={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},a="HTML"===e.nodeName?g():{},o=a.width||e.clientWidth||r.right-r.left,s=a.height||e.clientHeight||r.bottom-r.top,l=e.offsetWidth-o,h=e.offsetHeight-s;if(l||h){var f=u(e);l-=p(f,"x"),h-=p(f,"y"),r.width-=l,r.height-=h}return m(r)}function _(e,t){var n="HTML"===t.nodeName,i=v(e),r=v(t),a=d(e),o=m({top:i.top-r.top,left:i.left-r.left,width:i.width,height:i.height});if(n||"BODY"===t.nodeName){var s=u(t),l=ue&&n?0:+s.borderTopWidth.split("px")[0],c=ue&&n?0:+s.borderLeftWidth.split("px")[0],f=ue&&n?0:+s.marginTop.split("px")[0],p=ue&&n?0:+s.marginLeft.split("px")[0];o.top-=l-f,o.bottom-=l-f,o.left-=c-p,o.right-=c-p,o.marginTop=f,o.marginLeft=p}return t.contains(a)&&(ue||"BODY"!==a.nodeName)&&(o=h(o,t)),o}function y(e,t,n){var i=l(t,n);return _(n,i)}function b(e){var t=window.getComputedStyle(e),n=parseFloat(t.marginTop)+parseFloat(t.marginBottom),i=parseFloat(t.marginLeft)+parseFloat(t.marginRight),r={width:e.offsetWidth+i,height:e.offsetHeight+n};return r}function w(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function x(e,t,n,i){i=i.split("-")[0];var r=b(t),a={position:e,width:r.width,height:r.height},o=["right","left"].indexOf(i)!==-1,s=o?"top":"left",l=o?"left":"top",u=o?"height":"width",c=o?"width":"height";return a[s]=n[s]+n[u]/2-r[u]/2,i===l?a[l]=n[l]-r[c]:a[l]=n[w(l)],a}function E(e){var t={};return e&&"[object Function]"===t.toString.call(e)}function k(e,t,n,i){var r="BODY"===e.nodeName,a=r?window:e;a.addEventListener(t,n,{passive:!0}),r||k(d(a.parentNode),t,n,i),i.push(a)}function M(e,t,n,i){n.updateBound=i,window.addEventListener("resize",n.updateBound,{passive:!0});var r=d(e);return k(r,"scroll",n.updateBound,n.scrollParents),n.scrollElement=r,n.eventsEnabled=!0,n}function T(e,t){return window.removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function S(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function A(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var i=S(e,function(e){return e[t]===n});return e.indexOf(i)}function R(e,t,n){var i=void 0===n?e:e.slice(0,A(e,"name",n));return i.forEach(function(e){e.enabled&&E(e.function)&&(t=e.function(t,e))}),t}function C(e,t){return e.some(function(e){var n=e.name,i=e.enabled;return i&&n===t})}function P(e){var t=window.document.documentElement,n=_(e,t),i=Math.max(t.clientWidth,window.innerWidth||0),r=Math.max(t.clientHeight,window.innerHeight||0),a=c(t),o=c(t,"left"),s={top:a-n.top+n.marginTop,left:o-n.left+n.marginLeft,width:i,height:r};return m(s)}function O(e){var t=e.nodeName;return"BODY"!==t&&"HTML"!==t&&("fixed"===u(e,"position")||O(f(e)))}function L(e,t,n,i){var r={top:0,left:0},a=l(e,t);if("viewport"===i)r=P(a);else{var o=void 0;"scrollParent"===i?(o=d(f(e)),"BODY"===o.nodeName&&(o=window.document.documentElement)):o="window"===i?window.document.documentElement:i;var s=_(o,a);if("HTML"!==o.nodeName||O(a))r=s;else{var u=g(),c=u.height,h=u.width;r.top+=s.top-s.marginTop,r.bottom=c+s.top,r.left+=s.left-s.marginLeft,r.right=h+s.left}}return r.left+=n,r.top+=n,r.right-=n,r.bottom-=n,r}function N(e,t,n,i){if(e.indexOf("auto")===-1)return e;var r=L(n,i,0,"scrollParent"),a={top:t.top-r.top,right:r.right-t.right,bottom:r.bottom-t.bottom,left:t.left-r.left},o=Object.keys(a).sort(function(e,t){return a[t]-a[e]})[0],s=e.split("-")[1];return o+(s?"-"+s:"")}function F(e,t){Object.keys(t).forEach(function(n){var i=t[n];i!==!1?e.setAttribute(n,t[n]):e.removeAttribute(n)})}function D(e,t){var n={position:e.offsets.popper.position},a={"x-placement":e.placement},o=Math.round(e.offsets.popper.left),s=Math.round(e.offsets.popper.top),l=r("transform");return t.gpuAcceleration&&l?(n[l]="translate3d("+o+"px, "+s+"px, 0)",n.top=0,n.left=0,n.willChange="transform"):(n.left=o,n.top=s,n.willChange="top, left"),i(e.instance.popper,oe({},n,e.styles)),F(e.instance.popper,oe({},a,e.attributes)),e.offsets.arrow&&i(e.arrowElement,e.offsets.arrow),e}function I(e,t,n,i,r){var a=y(r,t,e);return n.placement=N(n.placement,a,t,e),t.setAttribute("x-placement",n.placement),n}function U(e,t,n){var i=S(e,function(e){var n=e.name;return n===t});return!!i&&e.some(function(e){return e.name===n&&e.enabled&&e.order<i.order})}function H(e,t){if(!U(e.instance.modifiers,"arrow","keepTogether"))return console.warn("WARNING: `keepTogether` modifier is required by arrow modifier in order to work, be sure to include it before `arrow`!"),e;var n=t.element;if("string"==typeof n){if(n=e.instance.popper.querySelector(n),!n)return e}else if(!e.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var i=e.placement.split("-")[0],r=m(e.offsets.popper),a=e.offsets.reference,o=["left","right"].indexOf(i)!==-1,s=o?"height":"width",l=o?"top":"left",u=o?"left":"top",c=o?"bottom":"right",h=b(n)[s];a[c]-h<r[l]&&(e.offsets.popper[l]-=r[l]-(a[c]-h)),a[l]+h>r[c]&&(e.offsets.popper[l]+=a[l]+h-r[c]);var f=a[l]+a[s]/2-h/2,d=f-m(e.offsets.popper)[l];return d=Math.max(Math.min(r[s]-h,d),0),e.arrowElement=n,e.offsets.arrow={},e.offsets.arrow[l]=d,e.offsets.arrow[u]="",e}function z(e){return"end"===e?"start":"start"===e?"end":e}function B(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=he.indexOf(e),i=he.slice(n+1).concat(he.slice(0,n));return t?i.reverse():i}function j(e,t){if(C(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=L(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement),i=e.placement.split("-")[0],r=w(i),a=e.placement.split("-")[1]||"",o=[];switch(t.behavior){case fe.FLIP:o=[i,r];break;case fe.CLOCKWISE:o=B(i);break;case fe.COUNTERCLOCKWISE:o=B(i,!0);break;default:o=t.behavior}return o.forEach(function(s,l){if(i!==s||o.length===l+1)return e;i=e.placement.split("-")[0],r=w(i);var u=m(e.offsets.popper),c=e.offsets.reference,h=Math.floor,f="left"===i&&h(u.right)>h(c.left)||"right"===i&&h(u.left)<h(c.right)||"top"===i&&h(u.bottom)>h(c.top)||"bottom"===i&&h(u.top)<h(c.bottom),d=h(u.left)<h(n.left),p=h(u.right)>h(n.right),g=h(u.top)<h(n.top),v=h(u.bottom)>h(n.bottom),_="left"===i&&d||"right"===i&&p||"top"===i&&g||"bottom"===i&&v,y=["top","bottom"].indexOf(i)!==-1,b=!!t.flipVariations&&(y&&"start"===a&&d||y&&"end"===a&&p||!y&&"start"===a&&g||!y&&"end"===a&&v);(f||_||b)&&(e.flipped=!0,(f||_)&&(i=o[l+1]),b&&(a=z(a)),e.placement=i+(a?"-"+a:""),e.offsets.popper=x(e.instance.state.position,e.instance.popper,e.offsets.reference,e.placement),e=R(e.instance.modifiers,e,"flip"))}),e}function V(e){var t=m(e.offsets.popper),n=e.offsets.reference,i=e.placement.split("-")[0],r=Math.floor,a=["top","bottom"].indexOf(i)!==-1,o=a?"right":"bottom",s=a?"left":"top",l=a?"width":"height";return t[o]<r(n[s])&&(e.offsets.popper[s]=r(n[s])-t[l]),t[s]>r(n[o])&&(e.offsets.popper[s]=r(n[o])),e}function G(e,t){var i=e.placement,r=e.offsets.popper,a=void 0;return n(t.offset)?a=[t.offset,0]:(a=t.offset.split(" "),a=a.map(function(t,n){var r=t.match(/(\d*\.?\d*)(.*)/),a=+r[1],o=r[2],s=i.indexOf("right")!==-1||i.indexOf("left")!==-1;1===n&&(s=!s);var l=s?"height":"width";if(0===o.indexOf("%")){var u=void 0;switch(o){case"%p":u=e.offsets.popper;break;case"%":case"$r":default:u=e.offsets.reference}var c=m(u),h=c[l];return h/100*a}if("vh"===o||"vw"===o){var f=void 0;return f="vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0),f/100*a}return"px"===o?+a:+t})),e.placement.indexOf("left")!==-1?(r.top+=a[0],r.left-=a[1]||0):e.placement.indexOf("right")!==-1?(r.top+=a[0],r.left+=a[1]||0):e.placement.indexOf("top")!==-1?(r.left+=a[0],r.top-=a[1]||0):e.placement.indexOf("bottom")!==-1&&(r.left+=a[0],r.top+=a[1]||0),e}function W(e,t){var n=t.boundariesElement||s(e.instance.popper),i=L(e.instance.popper,e.instance.reference,t.padding,n);t.boundaries=i;var r=t.priority,a=m(e.offsets.popper),o={primary:function(e){var n=a[e];return a[e]<i[e]&&!t.escapeWithReference&&(n=Math.max(a[e],i[e])),ae({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=a[n];return a[e]>i[e]&&!t.escapeWithReference&&(r=Math.min(a[n],i[e]-("right"===e?a.width:a.height))),
ae({},n,r)}};return r.forEach(function(e){var t=["left","top"].indexOf(e)!==-1?"primary":"secondary";a=oe({},a,o[t](e))}),e.offsets.popper=a,e}function X(e){var t=e.placement,n=t.split("-")[0],i=t.split("-")[1];if(i){var r=e.offsets.reference,a=m(e.offsets.popper),o=["bottom","top"].indexOf(n)!==-1,s=o?"left":"top",l=o?"width":"height",u={start:ae({},s,r[s]),end:ae({},s,r[s]+r[l]-a[l])};e.offsets.popper=oe({},a,u[i])}return e}function Y(e){if(!U(e.instance.modifiers,"hide","preventOverflow"))return console.warn("WARNING: preventOverflow modifier is required by hide modifier in order to work, be sure to include it before hide!"),e;var t=e.offsets.reference,n=S(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(e.hide===!0)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(e.hide===!1)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}function q(e){var t=e.placement,n=t.split("-")[0],i=m(e.offsets.popper),r=m(e.offsets.reference),a=["left","right"].indexOf(n)!==-1,o=["top","left"].indexOf(n)===-1;return i[a?"left":"top"]=r[t]-(o?i[a?"width":"height"]:0),e.placement=w(t),e.offsets.popper=m(i),e}for(var Z=["native code","[object MutationObserverConstructor]"],Q=function(e){return Z.some(function(t){return(e||"").toString().indexOf(t)>-1})},$="undefined"!=typeof window,J=["Edge","Trident","Firefox"],K=0,ee=0;ee<J.length;ee+=1)if($&&navigator.userAgent.indexOf(J[ee])>=0){K=1;break}var te=$&&Q(window.MutationObserver),ne=te?e:t,ie=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},re=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ae=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},se=function(){return navigator.appVersion.indexOf("MSIE 10")!==-1},le=se(),ue=se(),ce=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],he=ce.slice(3),fe={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},de={shift:{order:100,enabled:!0,function:X},offset:{order:200,enabled:!0,function:G,offset:0},preventOverflow:{order:300,enabled:!0,function:W,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,function:V},arrow:{order:500,enabled:!0,function:H,element:"[x-arrow]"},flip:{order:600,enabled:!0,function:j,behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,function:q},hide:{order:800,enabled:!0,function:Y},applyStyle:{order:900,enabled:!0,gpuAcceleration:!0,function:D,onLoad:I}},pe={placement:"bottom",eventsEnabled:!0,onCreate:function(){},onUpdate:function(){},modifiers:de},ge=function(){function e(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ie(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=ne(this.update.bind(this)),this.options=oe({},e.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t.jquery?t[0]:t,this.popper=n.jquery?n[0]:n,i(this.popper,{position:"absolute"}),this.modifiers=Object.keys(e.Defaults.modifiers).map(function(t){return oe({name:t},e.Defaults.modifiers[t])}),this.modifiers=this.modifiers.map(function(e){var t=a.modifiers&&a.modifiers[e.name]||{};return oe({},e,t)}),a.modifiers&&(this.options.modifiers=oe({},e.Defaults.modifiers,a.modifiers),Object.keys(a.modifiers).forEach(function(t){if(void 0===e.Defaults.modifiers[t]){var n=a.modifiers[t];n.name=t,r.modifiers.push(n)}})),this.modifiers=this.modifiers.sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&E(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return re(e,[{key:"update",value:function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=y(this.state,this.popper,this.reference),e.placement=N(this.options.placement,e.offsets.reference,this.popper,this.reference),e.originalPlacement=this.options.placement,e.offsets.popper=x(this.state,this.popper,e.offsets.reference,e.placement),e=R(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}},{key:"destroy",value:function(){return this.state.isDestroyed=!0,C(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.left="",this.popper.style.position="",this.popper.style.top="",this.popper.style[r("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}},{key:"enableEventListeners",value:function(){this.state.eventsEnabled||(this.state=M(this.reference,this.options,this.state,this.scheduleUpdate))}},{key:"disableEventListeners",value:function(){this.state.eventsEnabled&&(window.cancelAnimationFrame(this.scheduleUpdate),this.state=T(this.reference,this.state))}}]),e}();return ge.Utils=window.PopperUtils,ge.placements=ce,ge.Defaults=pe,ge}),!function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function t(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function n(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function i(e){return null===e?NaN:+e}function r(e){return!isNaN(e)}function a(e){return{left:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var a=i+r>>>1;e(t[a],n)<0?i=a+1:r=a}return i},right:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var a=i+r>>>1;e(t[a],n)>0?r=a:i=a+1}return i}}}function o(e){return e.length}function s(e){for(var t=1;e*t%1;)t*=10;return t}function l(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function u(){this._=Object.create(null)}function c(e){return(e+="")===yo||e[0]===bo?bo+e:e}function h(e){return(e+="")[0]===bo?e.slice(1):e}function f(e){return c(e)in this._}function d(e){return(e=c(e))in this._&&delete this._[e]}function p(){var e=[];for(var t in this._)e.push(h(t));return e}function g(){var e=0;for(var t in this._)++e;return e}function m(){for(var e in this._)return!1;return!0}function v(){this._=Object.create(null)}function _(e){return e}function y(e,t,n){return function(){var i=n.apply(t,arguments);return i===t?e:i}}function b(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,i=wo.length;i>n;++n){var r=wo[n]+t;if(r in e)return r}}function w(){}function x(){}function E(e){function t(){for(var t,i=n,r=-1,a=i.length;++r<a;)(t=i[r].on)&&t.apply(this,arguments);return e}var n=[],i=new u;return t.on=function(t,r){var a,o=i.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),i.remove(t)),r&&n.push(i.set(t,{on:r})),e)},t}function k(){so.event.preventDefault()}function M(){for(var e,t=so.event;e=t.sourceEvent;)t=e;return t}function T(e){for(var t=new x,n=0,i=arguments.length;++n<i;)t[arguments[n]]=E(t);return t.of=function(n,i){return function(r){try{var a=r.sourceEvent=so.event;r.target=e,so.event=r,t[r.type].apply(n,i)}finally{so.event=a}}},t}function S(e){return Eo(e,So),e}function A(e){return"function"==typeof e?e:function(){return ko(e,this)}}function R(e){return"function"==typeof e?e:function(){return Mo(e,this)}}function C(e,t){function n(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function r(){this.setAttribute(e,t)}function a(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=so.ns.qualify(e),null==t?e.local?i:n:"function"==typeof t?e.local?s:o:e.local?a:r}function P(e){return e.trim().replace(/\s+/g," ")}function O(e){return new RegExp("(?:^|\\s+)"+so.requote(e)+"(?:\\s+|$)","g")}function L(e){return(e+"").trim().split(/^|\s+/)}function N(e,t){function n(){for(var n=-1;++n<r;)e[n](this,t)}function i(){for(var n=-1,i=t.apply(this,arguments);++n<r;)e[n](this,i)}e=L(e).map(F);var r=e.length;return"function"==typeof t?i:n}function F(e){var t=O(e);return function(n,i){if(r=n.classList)return i?r.add(e):r.remove(e);var r=n.getAttribute("class")||"";i?(t.lastIndex=0,t.test(r)||n.setAttribute("class",P(r+" "+e))):n.setAttribute("class",P(r.replace(t," ")))}}function D(e,t,n){function i(){this.style.removeProperty(e)}function r(){this.style.setProperty(e,t,n)}function a(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}return null==t?i:"function"==typeof t?a:r}function I(e,t){function n(){delete this[e]}function i(){this[e]=t}function r(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?r:i}function U(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ao&&t.documentElement.namespaceURI===Ao?t.createElement(e):t.createElementNS(n,e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=so.ns.qualify(e)).local?n:t}function H(){var e=this.parentNode;e&&e.removeChild(this)}function z(e){return{__data__:e}}function B(e){return function(){return To(this,e)}}function j(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function V(e,t){for(var n=0,i=e.length;i>n;n++)for(var r,a=e[n],o=0,s=a.length;s>o;o++)(r=a[o])&&t(r,o,n);return e}function G(e){return Eo(e,Co),e}function W(e){var t,n;return function(i,r,a){var o,s=e[a].update,l=s.length;for(a!=n&&(n=a,t=0),r>=t&&(t=r+1);!(o=s[t])&&++t<l;);return o}}function X(e,t,n){function i(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function r(){var r=l(t,uo(arguments));i.call(this),this.addEventListener(e,this[o]=r,r.$=n),r._=t}function a(){var t,n=new RegExp("^__on([^.]+)"+so.requote(e)+"$");for(var i in this)if(t=i.match(n)){var r=this[i];this.removeEventListener(t[1],r,r.$),delete this[i]}}var o="__on"+e,s=e.indexOf("."),l=Y;s>0&&(e=e.slice(0,s));var u=Po.get(e);return u&&(e=u,l=q),s?t?r:i:t?w:a}function Y(e,t){return function(n){var i=so.event;so.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{so.event=i}}}function q(e,t){var n=Y(e,t);return function(e){var t=this,i=e.relatedTarget;i&&(i===t||8&i.compareDocumentPosition(t))||n.call(t,e)}}function Z(n){var i=".dragsuppress-"+ ++Lo,r="click"+i,a=so.select(t(n)).on("touchmove"+i,k).on("dragstart"+i,k).on("selectstart"+i,k);if(null==Oo&&(Oo=!("onselectstart"in n)&&b(n.style,"userSelect")),Oo){var o=e(n).style,s=o[Oo];o[Oo]="none"}return function(e){if(a.on(i,null),Oo&&(o[Oo]=s),e){var t=function(){a.on(r,null)};a.on(r,function(){k(),t()},!0),setTimeout(t,0)}}}function Q(e,n){n.changedTouches&&(n=n.changedTouches[0]);var i=e.ownerSVGElement||e;if(i.createSVGPoint){var r=i.createSVGPoint();if(0>No){var a=t(e);if(a.scrollX||a.scrollY){i=so.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=i[0][0].getScreenCTM();No=!(o.f||o.e),i.remove()}}return No?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}function $(){return so.event.changedTouches[0].identifier}function J(e){return e>0?1:0>e?-1:0}function K(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ee(e){return e>1?0:-1>e?Io:Math.acos(e)}function te(e){return e>1?zo:-1>e?-zo:Math.asin(e)}function ne(e){return((e=Math.exp(e))-1/e)/2}function ie(e){return((e=Math.exp(e))+1/e)/2}function re(e){return((e=Math.exp(2*e))-1)/(e+1)}function ae(e){return(e=Math.sin(e/2))*e}function oe(){}function se(e,t,n){return this instanceof se?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof se?new se(e.h,e.s,e.l):we(""+e,xe,se):new se(e,t,n)}function le(e,t,n){function i(e){return e>360?e-=360:0>e&&(e+=360),60>e?a+(o-a)*e/60:180>e?o:240>e?a+(o-a)*(240-e)/60:a}function r(e){return Math.round(255*i(e))}var a,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,a=2*n-o,new ve(r(e+120),r(e),r(e-120))}function ue(e,t,n){return this instanceof ue?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof ue?new ue(e.h,e.c,e.l):e instanceof he?de(e.l,e.a,e.b):de((e=Ee((e=so.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ue(e,t,n)}function ce(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new he(n,Math.cos(e*=Bo)*t,Math.sin(e)*t)}function he(e,t,n){return this instanceof he?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof he?new he(e.l,e.a,e.b):e instanceof ue?ce(e.h,e.c,e.l):Ee((e=ve(e)).r,e.g,e.b):new he(e,t,n)}function fe(e,t,n){var i=(e+16)/116,r=i+t/500,a=i-n/200;return r=pe(r)*Jo,i=pe(i)*Ko,a=pe(a)*es,new ve(me(3.2404542*r-1.5371385*i-.4985314*a),me(-.969266*r+1.8760108*i+.041556*a),me(.0556434*r-.2040259*i+1.0572252*a))}function de(e,t,n){return e>0?new ue(Math.atan2(n,t)*jo,Math.sqrt(t*t+n*n),e):new ue(NaN,NaN,e)}function pe(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ge(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function me(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ve(e,t,n){return this instanceof ve?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof ve?new ve(e.r,e.g,e.b):we(""+e,ve,le):new ve(e,t,n)}function _e(e){return new ve(e>>16,e>>8&255,255&e)}function ye(e){return _e(e)+""}function be(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function we(e,t,n){var i,r,a,o=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(Me(r[0]),Me(r[1]),Me(r[2]))}return(a=is.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o=o>>4|o,s=240&a,s=s>>4|s,l=15&a,l=l<<4|l):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),t(o,s,l))}function xe(e,t,n){var i,r,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,l=(o+a)/2;return s?(r=.5>l?s/(o+a):s/(2-o-a),i=e==o?(t-n)/s+(n>t?6:0):t==o?(n-e)/s+2:(e-t)/s+4,i*=60):(i=NaN,r=l>0&&1>l?0:i),new se(i,r,l)}function Ee(e,t,n){e=ke(e),t=ke(t),n=ke(n);var i=ge((.4124564*e+.3575761*t+.1804375*n)/Jo),r=ge((.2126729*e+.7151522*t+.072175*n)/Ko),a=ge((.0193339*e+.119192*t+.9503041*n)/es);return he(116*r-16,500*(i-r),200*(r-a))}function ke(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Me(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Te(e){return"function"==typeof e?e:function(){return e}}function Se(e){return function(t,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),Ae(t,n,e,i)}}function Ae(e,t,n,i){function r(){var e,t=l.status;if(!t&&Ce(l)||t>=200&&300>t||304===t){try{e=n.call(a,l)}catch(e){return void o.error.call(a,e)}o.load.call(a,e)}else o.error.call(a,l)}var a={},o=so.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(e){var t=so.event;so.event=e;try{o.progress.call(a,l)}finally{so.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(u=e,a):u},a.response=function(e){return n=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(uo(arguments)))}}),a.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=u&&(l.responseType=u),null!=r&&a.on("error",r).on("load",function(e){r(null,e)}),o.beforesend.call(a,l),l.send(null==i?null:i),a},a.abort=function(){return l.abort(),a},so.rebind(a,o,"on"),null==i?a:a.get(Re(i))}function Re(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Ce(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Pe(e,t,n){var i=arguments.length;2>i&&(t=0),3>i&&(n=Date.now());var r=n+t,a={c:e,t:r,n:null};return as?as.n=a:rs=a,as=a,os||(ss=clearTimeout(ss),os=1,ls(Oe)),a}function Oe(){var e=Le(),t=Ne()-e;t>24?(isFinite(t)&&(clearTimeout(ss),ss=setTimeout(Oe,t)),os=0):(os=1,ls(Oe))}function Le(){for(var e=Date.now(),t=rs;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Ne(){for(var e,t=rs,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:rs=t.n;return as=e,n}function Fe(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function De(e,t){var n=Math.pow(10,3*_o(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Ie(e){var t=e.decimal,n=e.thousands,i=e.grouping,r=e.currency,a=i&&n?function(e,t){for(var r=e.length,a=[],o=0,s=i[0],l=0;r>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),a.push(e.substring(r-=s,r+s)),!((l+=s+1)>t));)s=i[o=(o+1)%i.length];return a.reverse().join(n)}:_;return function(e){var n=cs.exec(e),i=n[1]||" ",o=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],h=n[7],f=n[8],d=n[9],p=1,g="",m="",v=!1,_=!0;switch(f&&(f=+f.substring(1)),(u||"0"===i&&"="===o)&&(u=i="0",o="="),d){case"n":h=!0,d="g";break;case"%":p=100,m="%",d="f";break;case"p":p=100,m="%",d="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+d.toLowerCase());case"c":_=!1;case"d":v=!0,f=0;break;case"s":p=-1,d="r"}"$"===l&&(g=r[0],m=r[1]),"r"!=d||f||(d="g"),null!=f&&("g"==d?f=Math.max(1,Math.min(21,f)):"e"!=d&&"f"!=d||(f=Math.max(0,Math.min(20,f)))),d=hs.get(d)||Ue;var y=u&&h;return function(e){var n=m;if(v&&e%1)return"";var r=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>p){var l=so.formatPrefix(e,f);e=l.scale(e),n=l.symbol+m}else e*=p;e=d(e,f);var b,w,x=e.lastIndexOf(".");if(0>x){var E=_?e.lastIndexOf("e"):-1;0>E?(b=e,w=""):(b=e.substring(0,E),w=e.substring(E))}else b=e.substring(0,x),w=t+e.substring(x+1);!u&&h&&(b=a(b,1/0));var k=g.length+b.length+w.length+(y?0:r.length),M=c>k?new Array(k=c-k+1).join(i):"";return y&&(b=a(M+b,M.length?c-w.length:1/0)),r+=g,e=b+w,("<"===o?r+e+M:">"===o?M+r+e:"^"===o?M.substring(0,k>>=1)+r+e+M.substring(k):r+(y?e:M+e))+n}}}function Ue(e){return e+""}function He(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ze(e,t,n){function i(t){var n=e(t),i=a(n,1);return i-t>t-n?n:i}function r(n){return t(n=e(new ds(n-1)),1),n}function a(e,n){return t(e=new ds((+e)),n),e}function o(e,i,a){var o=r(e),s=[];if(a>1)for(;i>o;)n(o)%a||s.push(new Date((+o))),t(o,1);else for(;i>o;)s.push(new Date((+o))),t(o,1);return s}function s(e,t,n){try{ds=He;var i=new He;return i._=e,o(i,t,n)}finally{ds=Date}}e.floor=e,e.round=i,e.ceil=r,e.offset=a,e.range=o;var l=e.utc=Be(e);return l.floor=l,l.round=Be(i),l.ceil=Be(r),l.offset=Be(a),l.range=s,e}function Be(e){return function(t,n){try{ds=He;var i=new He;return i._=t,e(i,n)._}finally{ds=Date}}}function je(e){function t(e){function t(t){for(var n,r,a,o=[],s=-1,l=0;++s<i;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(r=gs[n=e.charAt(++s)])&&(n=e.charAt(++s)),(a=A[n])&&(n=a(t,null==r?"e"===n?" ":"0":r)),o.push(n),l=s+1);return o.push(e.slice(l,s)),o.join("")}var i=e.length;return t.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(i,e,t,0);if(r!=t.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var a=null!=i.Z&&ds!==He,o=new(a?He:ds);return"j"in i?o.setFullYear(i.y,0,i.j):"W"in i||"U"in i?("w"in i||(i.w="W"in i?1:0),o.setFullYear(i.y,0,1),o.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(o.getDay()+5)%7:i.w+7*i.U-(o.getDay()+6)%7)):o.setFullYear(i.y,i.m,i.d),o.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),a?o._:o},t.toString=function(){return e},t}function n(e,t,n,i){for(var r,a,o,s=0,l=t.length,u=n.length;l>s;){if(i>=u)return-1;if(r=t.charCodeAt(s++),37===r){if(o=t.charAt(s++),a=R[o in gs?t.charAt(s++):o],!a||(i=a(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(e,t,n){x.lastIndex=0;var i=x.exec(t.slice(n));return i?(e.w=E.get(i[0].toLowerCase()),n+i[0].length):-1}function r(e,t,n){b.lastIndex=0;var i=b.exec(t.slice(n));return i?(e.w=w.get(i[0].toLowerCase()),n+i[0].length):-1}function a(e,t,n){T.lastIndex=0;var i=T.exec(t.slice(n));return i?(e.m=S.get(i[0].toLowerCase()),n+i[0].length):-1}function o(e,t,n){k.lastIndex=0;var i=k.exec(t.slice(n));return i?(e.m=M.get(i[0].toLowerCase()),n+i[0].length):-1}function s(e,t,i){return n(e,A.c.toString(),t,i)}function l(e,t,i){return n(e,A.x.toString(),t,i)}function u(e,t,i){return n(e,A.X.toString(),t,i)}function c(e,t,n){var i=y.get(t.slice(n,n+=2).toLowerCase());return null==i?-1:(e.p=i,n)}var h=e.dateTime,f=e.date,d=e.time,p=e.periods,g=e.days,m=e.shortDays,v=e.months,_=e.shortMonths;t.utc=function(e){function n(e){try{ds=He;var t=new ds;return t._=e,i(t)}finally{ds=Date}}var i=t(e);return n.parse=function(e){try{ds=He;var t=i.parse(e);return t&&t._}finally{ds=Date}},n.toString=i.toString,n},t.multi=t.utc.multi=lt;var y=so.map(),b=Ge(g),w=We(g),x=Ge(m),E=We(m),k=Ge(v),M=We(v),T=Ge(_),S=We(_);p.forEach(function(e,t){y.set(e.toLowerCase(),t)});var A={a:function(e){return m[e.getDay()]},A:function(e){return g[e.getDay()]},b:function(e){return _[e.getMonth()]},B:function(e){return v[e.getMonth()]},c:t(h),d:function(e,t){return Ve(e.getDate(),t,2)},e:function(e,t){return Ve(e.getDate(),t,2)},H:function(e,t){return Ve(e.getHours(),t,2)},I:function(e,t){return Ve(e.getHours()%12||12,t,2)},j:function(e,t){return Ve(1+fs.dayOfYear(e),t,3)},L:function(e,t){return Ve(e.getMilliseconds(),t,3)},m:function(e,t){return Ve(e.getMonth()+1,t,2)},M:function(e,t){return Ve(e.getMinutes(),t,2)},p:function(e){return p[+(e.getHours()>=12)]},S:function(e,t){return Ve(e.getSeconds(),t,2)},U:function(e,t){return Ve(fs.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ve(fs.mondayOfYear(e),t,2)},x:t(f),X:t(d),y:function(e,t){return Ve(e.getFullYear()%100,t,2)},Y:function(e,t){return Ve(e.getFullYear()%1e4,t,4)},Z:ot,"%":function(){return"%"}},R={a:i,A:r,b:a,B:o,c:s,d:et,e:et,H:nt,I:nt,j:tt,L:at,m:Ke,M:it,p:c,S:rt,U:Ye,w:Xe,W:qe,x:l,X:u,y:Qe,Y:Ze,Z:$e,"%":st};return t}function Ve(e,t,n){var i=0>e?"-":"",r=(i?-e:e)+"",a=r.length;return i+(n>a?new Array(n-a+1).join(t)+r:r)}function Ge(e){return new RegExp("^(?:"+e.map(so.requote).join("|")+")","i")}function We(e){for(var t=new u,n=-1,i=e.length;++n<i;)t.set(e[n].toLowerCase(),n);return t}function Xe(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Ye(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n));return i?(e.U=+i[0],n+i[0].length):-1}function qe(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n));return i?(e.W=+i[0],n+i[0].length):-1}function Ze(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Qe(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.y=Je(+i[0]),n+i[0].length):-1}function $e(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Je(e){return e+(e>68?1900:2e3)}function Ke(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function et(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function tt(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+3));return i?(e.j=+i[0],n+i[0].length):-1}function nt(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function it(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function rt(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function at(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function ot(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",i=_o(t)/60|0,r=_o(t)%60;return n+Ve(i,"0",2)+Ve(r,"0",2)}function st(e,t,n){vs.lastIndex=0;var i=vs.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function lt(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,i=e[n];!i[1](t);)i=e[++n];return i[0](t)}}function ut(){}function ct(e,t,n){var i=n.s=e+t,r=i-e,a=i-r;n.t=e-a+(t-r)}function ht(e,t){e&&ws.hasOwnProperty(e.type)&&ws[e.type](e,t)}function ft(e,t,n){var i,r=-1,a=e.length-n;for(t.lineStart();++r<a;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function dt(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)ft(e[n],t,1);t.polygonEnd()}function pt(){function e(e,t){e*=Bo,t=t*Bo/2+Io/4;var n=e-i,o=n>=0?1:-1,s=o*n,l=Math.cos(t),u=Math.sin(t),c=a*u,h=r*l+c*Math.cos(s),f=c*o*Math.sin(s);Es.add(Math.atan2(f,h)),i=e,r=l,a=u}var t,n,i,r,a;ks.point=function(o,s){ks.point=e,i=(t=o)*Bo,r=Math.cos(s=(n=s)*Bo/2+Io/4),a=Math.sin(s)},ks.lineEnd=function(){e(t,n)}}function gt(e){var t=e[0],n=e[1],i=Math.cos(n);return[i*Math.cos(t),i*Math.sin(t),Math.sin(n)]}function mt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function _t(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function yt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function bt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function wt(e){return[Math.atan2(e[1],e[0]),te(e[2])]}function xt(e,t){return _o(e[0]-t[0])<Fo&&_o(e[1]-t[1])<Fo}function Et(e,t){e*=Bo;var n=Math.cos(t*=Bo);kt(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function kt(e,t,n){++Ms,Ss+=(e-Ss)/Ms,As+=(t-As)/Ms,Rs+=(n-Rs)/Ms}function Mt(){function e(e,r){e*=Bo;var a=Math.cos(r*=Bo),o=a*Math.cos(e),s=a*Math.sin(e),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=n*l-i*s)*u+(u=i*o-t*l)*u+(u=t*s-n*o)*u),t*o+n*s+i*l);Ts+=u,Cs+=u*(t+(t=o)),Ps+=u*(n+(n=s)),Os+=u*(i+(i=l)),kt(t,n,i)}var t,n,i;Ds.point=function(r,a){r*=Bo;var o=Math.cos(a*=Bo);t=o*Math.cos(r),n=o*Math.sin(r),i=Math.sin(a),Ds.point=e,kt(t,n,i)}}function Tt(){Ds.point=Et}function St(){function e(e,t){e*=Bo;var n=Math.cos(t*=Bo),o=n*Math.cos(e),s=n*Math.sin(e),l=Math.sin(t),u=r*l-a*s,c=a*o-i*l,h=i*s-r*o,f=Math.sqrt(u*u+c*c+h*h),d=i*o+r*s+a*l,p=f&&-ee(d)/f,g=Math.atan2(f,d);Ls+=p*u,Ns+=p*c,Fs+=p*h,Ts+=g,Cs+=g*(i+(i=o)),Ps+=g*(r+(r=s)),Os+=g*(a+(a=l)),kt(i,r,a)}var t,n,i,r,a;Ds.point=function(o,s){t=o,n=s,Ds.point=e,o*=Bo;var l=Math.cos(s*=Bo);i=l*Math.cos(o),r=l*Math.sin(o),a=Math.sin(s),kt(i,r,a)},Ds.lineEnd=function(){e(t,n),Ds.lineEnd=Tt,Ds.point=Et}}function At(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),n}function Rt(){return!0}function Ct(e,t,n,i,r){var a=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],i=e[t];if(xt(n,i)){r.lineStart();for(var s=0;t>s;++s)r.point((n=e[s])[0],n[1]);return void r.lineEnd()}var l=new Ot(n,e,null,(!0)),u=new Ot(n,null,l,(!1));l.o=u,a.push(l),o.push(u),l=new Ot(i,e,null,(!1)),u=new Ot(i,null,l,(!0)),l.o=u,a.push(l),o.push(u)}}),o.sort(t),Pt(a),Pt(o),a.length){for(var s=0,l=n,u=o.length;u>s;++s)o[s].e=l=!l;for(var c,h,f=a[0];;){for(var d=f,p=!0;d.v;)if((d=d.n)===f)return;c=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(var s=0,u=c.length;u>s;++s)r.point((h=c[s])[0],h[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(p){c=d.p.z;for(var s=c.length-1;s>=0;--s)r.point((h=c[s])[0],h[1])}else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,c=d.z,p=!p}while(!d.v);r.lineEnd()}}}function Pt(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function Ot(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Lt(e,t,n,i){return function(r,a){function o(t,n){var i=r(t,n);e(t=i[0],n=i[1])&&a.point(t,n)}function s(e,t){var n=r(e,t);m.point(n[0],n[1])}function l(){_.point=s,m.lineStart()}function u(){_.point=o,m.lineEnd()}function c(e,t){g.push([e,t]);var n=r(e,t);b.point(n[0],n[1])}function h(){b.lineStart(),g=[]}function f(){c(g[0][0],g[0][1]),b.lineEnd();var e,t=b.clean(),n=y.buffer(),i=n.length;if(g.pop(),p.push(g),g=null,i)if(1&t){e=n[0];var r,i=e.length-1,o=-1;if(i>0){for(w||(a.polygonStart(),w=!0),a.lineStart();++o<i;)a.point((r=e[o])[0],r[1]);a.lineEnd()}}else i>1&&2&t&&n.push(n.pop().concat(n.shift())),d.push(n.filter(Nt))}var d,p,g,m=t(a),v=r.invert(i[0],i[1]),_={point:o,lineStart:l,lineEnd:u,polygonStart:function(){_.point=c,_.lineStart=h,_.lineEnd=f,d=[],p=[]},polygonEnd:function(){_.point=o,_.lineStart=l,_.lineEnd=u,d=so.merge(d);var e=zt(v,p);d.length?(w||(a.polygonStart(),w=!0),Ct(d,Dt,e,n,a)):e&&(w||(a.polygonStart(),w=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),w&&(a.polygonEnd(),w=!1),d=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},y=Ft(),b=t(y),w=!1;return _}}function Nt(e){return e.length>1}function Ft(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:w,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Dt(e,t){return((e=e.x)[0]<0?e[1]-zo-Fo:zo-e[1])-((t=t.x)[0]<0?t[1]-zo-Fo:zo-t[1])}function It(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?Io:-Io,l=_o(a-n);_o(l-Io)<Fo?(e.point(n,i=(i+o)/2>0?zo:-zo),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),e.point(a,i),t=0):r!==s&&l>=Io&&(_o(n-r)<Fo&&(n-=r*Fo),_o(a-s)<Fo&&(a-=s*Fo),i=Ut(n,i,a,o),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),t=0),e.point(n=a,i=o),r=s},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}}function Ut(e,t,n,i){var r,a,o=Math.sin(e-n);return _o(o)>Fo?Math.atan((Math.sin(t)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(t))*Math.sin(e))/(r*a*o)):(t+i)/2}function Ht(e,t,n,i){var r;if(null==e)r=n*zo,i.point(-Io,r),i.point(0,r),i.point(Io,r),i.point(Io,0),i.point(Io,-r),i.point(0,-r),i.point(-Io,-r),i.point(-Io,0),i.point(-Io,r);else if(_o(e[0]-t[0])>Fo){var a=e[0]<t[0]?Io:-Io;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function zt(e,t){var n=e[0],i=e[1],r=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Es.reset();for(var s=0,l=t.length;l>s;++s){var u=t[s],c=u.length;if(c)for(var h=u[0],f=h[0],d=h[1]/2+Io/4,p=Math.sin(d),g=Math.cos(d),m=1;;){m===c&&(m=0),e=u[m];var v=e[0],_=e[1]/2+Io/4,y=Math.sin(_),b=Math.cos(_),w=v-f,x=w>=0?1:-1,E=x*w,k=E>Io,M=p*y;if(Es.add(Math.atan2(M*x*Math.sin(E),g*b+M*Math.cos(E))),a+=k?w+x*Uo:w,k^f>=n^v>=n){var T=vt(gt(h),gt(e));bt(T);var S=vt(r,T);bt(S);var A=(k^w>=0?-1:1)*te(S[2]);(i>A||i===A&&(T[0]||T[1]))&&(o+=k^w>=0?1:-1)}if(!m++)break;f=v,p=y,g=b,h=e}}return(-Fo>a||Fo>a&&-Fo>Es)^1&o}function Bt(e){function t(e,t){return Math.cos(e)*Math.cos(t)>a}function n(e){var n,a,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,f){var d,p=[h,f],g=t(h,f),m=o?g?0:r(h,f):g?r(h+(0>h?Io:-Io),f):0;if(!n&&(u=l=g)&&e.lineStart(),g!==l&&(d=i(n,p),(xt(n,d)||xt(p,d))&&(p[0]+=Fo,p[1]+=Fo,g=t(p[0],p[1]))),g!==l)c=0,
g?(e.lineStart(),d=i(p,n),e.point(d[0],d[1])):(d=i(n,p),e.point(d[0],d[1]),e.lineEnd()),n=d;else if(s&&n&&o^g){var v;m&a||!(v=i(p,n,!0))||(c=0,o?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||n&&xt(n,p)||e.point(p[0],p[1]),n=p,l=g,a=m},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function i(e,t,n){var i=gt(e),r=gt(t),o=[1,0,0],s=vt(i,r),l=mt(s,s),u=s[0],c=l-u*u;if(!c)return!n&&e;var h=a*l/c,f=-a*u/c,d=vt(o,s),p=yt(o,h),g=yt(s,f);_t(p,g);var m=d,v=mt(p,m),_=mt(m,m),y=v*v-_*(mt(p,p)-1);if(!(0>y)){var b=Math.sqrt(y),w=yt(m,(-v-b)/_);if(_t(w,p),w=wt(w),!n)return w;var x,E=e[0],k=t[0],M=e[1],T=t[1];E>k&&(x=E,E=k,k=x);var S=k-E,A=_o(S-Io)<Fo,R=A||Fo>S;if(!A&&M>T&&(x=M,M=T,T=x),R?A?M+T>0^w[1]<(_o(w[0]-E)<Fo?M:T):M<=w[1]&&w[1]<=T:S>Io^(E<=w[0]&&w[0]<=k)){var C=yt(m,(-v+b)/_);return _t(C,p),[w,wt(C)]}}}function r(t,n){var i=o?e:Io-e,r=0;return-i>t?r|=1:t>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var a=Math.cos(e),o=a>0,s=_o(a)>Fo,l=gn(e,6*Bo);return Lt(t,n,l,o?[0,-e]:[-Io,e-Io])}function jt(e,t,n,i){return function(r){var a,o=r.a,s=r.b,l=o.x,u=o.y,c=s.x,h=s.y,f=0,d=1,p=c-l,g=h-u;if(a=e-l,p||!(a>0)){if(a/=p,0>p){if(f>a)return;d>a&&(d=a)}else if(p>0){if(a>d)return;a>f&&(f=a)}if(a=n-l,p||!(0>a)){if(a/=p,0>p){if(a>d)return;a>f&&(f=a)}else if(p>0){if(f>a)return;d>a&&(d=a)}if(a=t-u,g||!(a>0)){if(a/=g,0>g){if(f>a)return;d>a&&(d=a)}else if(g>0){if(a>d)return;a>f&&(f=a)}if(a=i-u,g||!(0>a)){if(a/=g,0>g){if(a>d)return;a>f&&(f=a)}else if(g>0){if(f>a)return;d>a&&(d=a)}return f>0&&(r.a={x:l+f*p,y:u+f*g}),1>d&&(r.b={x:l+d*p,y:u+d*g}),r}}}}}}function Vt(e,t,n,i){function r(i,r){return _o(i[0]-e)<Fo?r>0?0:3:_o(i[0]-n)<Fo?r>0?2:1:_o(i[1]-t)<Fo?r>0?1:0:r>0?3:2}function a(e,t){return o(e.x,t.x)}function o(e,t){var n=r(e,1),i=r(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function l(e){for(var t=0,n=m.length,i=e[1],r=0;n>r;++r)for(var a,o=1,s=m[r],l=s.length,u=s[0];l>o;++o)a=s[o],u[1]<=i?a[1]>i&&K(u,a,e)>0&&++t:a[1]<=i&&K(u,a,e)<0&&--t,u=a;return 0!==t}function u(a,s,l,u){var c=0,h=0;if(null==a||(c=r(a,l))!==(h=r(s,l))||o(a,s)<0^l>0){do u.point(0===c||3===c?e:n,c>1?i:t);while((c=(c+l+4)%4)!==h)}else u.point(s[0],s[1])}function c(r,a){return r>=e&&n>=r&&a>=t&&i>=a}function h(e,t){c(e,t)&&s.point(e,t)}function f(){R.point=p,m&&m.push(v=[]),k=!0,E=!1,w=x=NaN}function d(){g&&(p(_,y),b&&E&&S.rejoin(),g.push(S.buffer())),R.point=h,E&&s.lineEnd()}function p(e,t){e=Math.max(-Us,Math.min(Us,e)),t=Math.max(-Us,Math.min(Us,t));var n=c(e,t);if(m&&v.push([e,t]),k)_=e,y=t,b=n,k=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&E)s.point(e,t);else{var i={a:{x:w,y:x},b:{x:e,y:t}};A(i)?(E||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),M=!1):n&&(s.lineStart(),s.point(e,t),M=!1)}w=e,x=t,E=n}var g,m,v,_,y,b,w,x,E,k,M,T=s,S=Ft(),A=jt(e,t,n,i),R={point:h,lineStart:f,lineEnd:d,polygonStart:function(){s=S,g=[],m=[],M=!0},polygonEnd:function(){s=T,g=so.merge(g);var t=l([e,i]),n=M&&t,r=g.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),r&&Ct(g,a,t,u,s),s.polygonEnd()),g=m=v=null}};return R}}function Gt(e){var t=0,n=Io/3,i=sn(e),r=i(t,n);return r.parallels=function(e){return arguments.length?i(t=e[0]*Io/180,n=e[1]*Io/180):[t/Io*180,n/Io*180]},r}function Wt(e,t){function n(e,t){var n=Math.sqrt(a-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),o-n*Math.cos(e)]}var i=Math.sin(e),r=(i+Math.sin(t))/2,a=1+i*(2*r-i),o=Math.sqrt(a)/r;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/r,te((a-(e*e+n*n)*r*r)/(2*r))]},n}function Xt(){function e(e,t){zs+=r*e-i*t,i=e,r=t}var t,n,i,r;Ws.point=function(a,o){Ws.point=e,t=i=a,n=r=o},Ws.lineEnd=function(){e(t,n)}}function Yt(e,t){Bs>e&&(Bs=e),e>Vs&&(Vs=e),js>t&&(js=t),t>Gs&&(Gs=t)}function qt(){function e(e,t){o.push("M",e,",",t,a)}function t(e,t){o.push("M",e,",",t),s.point=n}function n(e,t){o.push("L",e,",",t)}function i(){s.point=e}function r(){o.push("Z")}var a=Zt(4.5),o=[],s={point:e,lineStart:function(){s.point=t},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(e){return a=Zt(e),s},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return s}function Zt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Qt(e,t){Ss+=e,As+=t,++Rs}function $t(){function e(e,i){var r=e-t,a=i-n,o=Math.sqrt(r*r+a*a);Cs+=o*(t+e)/2,Ps+=o*(n+i)/2,Os+=o,Qt(t=e,n=i)}var t,n;Ys.point=function(i,r){Ys.point=e,Qt(t=i,n=r)}}function Jt(){Ys.point=Qt}function Kt(){function e(e,t){var n=e-i,a=t-r,o=Math.sqrt(n*n+a*a);Cs+=o*(i+e)/2,Ps+=o*(r+t)/2,Os+=o,o=r*e-i*t,Ls+=o*(i+e),Ns+=o*(r+t),Fs+=3*o,Qt(i=e,r=t)}var t,n,i,r;Ys.point=function(a,o){Ys.point=e,Qt(t=i=a,n=r=o)},Ys.lineEnd=function(){e(t,n)}}function en(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,Uo)}function n(t,n){e.moveTo(t,n),s.point=i}function i(t,n){e.lineTo(t,n)}function r(){s.point=t}function a(){e.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(e){return o=e,s},result:w};return s}function tn(e){function t(e){return(s?i:n)(e)}function n(t){return an(t,function(n,i){n=e(n,i),t.point(n[0],n[1])})}function i(t){function n(n,i){n=e(n,i),t.point(n[0],n[1])}function i(){y=NaN,k.point=a,t.lineStart()}function a(n,i){var a=gt([n,i]),o=e(n,i);r(y,b,_,w,x,E,y=o[0],b=o[1],_=n,w=a[0],x=a[1],E=a[2],s,t),t.point(y,b)}function o(){k.point=n,t.lineEnd()}function l(){i(),k.point=u,k.lineEnd=c}function u(e,t){a(h=e,f=t),d=y,p=b,g=w,m=x,v=E,k.point=a}function c(){r(y,b,_,w,x,E,d,p,h,g,m,v,s,t),k.lineEnd=o,o()}var h,f,d,p,g,m,v,_,y,b,w,x,E,k={point:n,lineStart:i,lineEnd:o,polygonStart:function(){t.polygonStart(),k.lineStart=l},polygonEnd:function(){t.polygonEnd(),k.lineStart=i}};return k}function r(t,n,i,s,l,u,c,h,f,d,p,g,m,v){var _=c-t,y=h-n,b=_*_+y*y;if(b>4*a&&m--){var w=s+d,x=l+p,E=u+g,k=Math.sqrt(w*w+x*x+E*E),M=Math.asin(E/=k),T=_o(_o(E)-1)<Fo||_o(i-f)<Fo?(i+f)/2:Math.atan2(x,w),S=e(T,M),A=S[0],R=S[1],C=A-t,P=R-n,O=y*C-_*P;(O*O/b>a||_o((_*C+y*P)/b-.5)>.3||o>s*d+l*p+u*g)&&(r(t,n,i,s,l,u,A,R,T,w/=k,x/=k,E,m,v),v.point(A,R),r(A,R,T,w,x,E,c,h,f,d,p,g,m,v))}}var a=.5,o=Math.cos(30*Bo),s=16;return t.precision=function(e){return arguments.length?(s=(a=e*e)>0&&16,t):Math.sqrt(a)},t}function nn(e){var t=tn(function(t,n){return e([t*jo,n*jo])});return function(e){return ln(t(e))}}function rn(e){this.stream=e}function an(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function on(e){return sn(function(){return e})()}function sn(e){function t(e){return e=s(e[0]*Bo,e[1]*Bo),[e[0]*f+l,u-e[1]*f]}function n(e){return e=s.invert((e[0]-l)/f,(u-e[1])/f),e&&[e[0]*jo,e[1]*jo]}function i(){s=At(o=hn(v,y,b),a);var e=a(g,m);return l=d-e[0]*f,u=p+e[1]*f,r()}function r(){return c&&(c.valid=!1,c=null),t}var a,o,s,l,u,c,h=tn(function(e,t){return e=a(e,t),[e[0]*f+l,u-e[1]*f]}),f=150,d=480,p=250,g=0,m=0,v=0,y=0,b=0,w=Is,x=_,E=null,k=null;return t.stream=function(e){return c&&(c.valid=!1),c=ln(w(o,h(x(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(w=null==e?(E=e,Is):Bt((E=+e)*Bo),r()):E},t.clipExtent=function(e){return arguments.length?(k=e,x=e?Vt(e[0][0],e[0][1],e[1][0],e[1][1]):_,r()):k},t.scale=function(e){return arguments.length?(f=+e,i()):f},t.translate=function(e){return arguments.length?(d=+e[0],p=+e[1],i()):[d,p]},t.center=function(e){return arguments.length?(g=e[0]%360*Bo,m=e[1]%360*Bo,i()):[g*jo,m*jo]},t.rotate=function(e){return arguments.length?(v=e[0]%360*Bo,y=e[1]%360*Bo,b=e.length>2?e[2]%360*Bo:0,i()):[v*jo,y*jo,b*jo]},so.rebind(t,h,"precision"),function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,i()}}function ln(e){return an(e,function(t,n){e.point(t*Bo,n*Bo)})}function un(e,t){return[e,t]}function cn(e,t){return[e>Io?e-Uo:-Io>e?e+Uo:e,t]}function hn(e,t,n){return e?t||n?At(dn(e),pn(t,n)):dn(e):t||n?pn(t,n):cn}function fn(e){return function(t,n){return t+=e,[t>Io?t-Uo:-Io>t?t+Uo:t,n]}}function dn(e){var t=fn(e);return t.invert=fn(-e),t}function pn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*i+s*r;return[Math.atan2(l*a-c*o,s*i-u*r),te(c*a+l*o)]}var i=Math.cos(e),r=Math.sin(e),a=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*a-l*o;return[Math.atan2(l*a+u*o,s*i+c*r),te(c*i-s*r)]},n}function gn(e,t){var n=Math.cos(e),i=Math.sin(e);return function(r,a,o,s){var l=o*t;null!=r?(r=mn(n,r),a=mn(n,a),(o>0?a>r:r>a)&&(r+=o*Uo)):(r=e+o*Uo,a=e-.5*l);for(var u,c=r;o>0?c>a:a>c;c-=l)s.point((u=wt([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],u[1])}}function mn(e,t){var n=gt(t);n[0]-=e,bt(n);var i=ee(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Fo)%(2*Math.PI)}function vn(e,t,n){var i=so.range(e,t-Fo,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function _n(e,t,n){var i=so.range(e,t-Fo,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}function yn(e){return e.source}function bn(e){return e.target}function wn(e,t,n,i){var r=Math.cos(t),a=Math.sin(t),o=Math.cos(i),s=Math.sin(i),l=r*Math.cos(e),u=r*Math.sin(e),c=o*Math.cos(n),h=o*Math.sin(n),f=2*Math.asin(Math.sqrt(ae(i-t)+r*o*ae(n-e))),d=1/Math.sin(f),p=f?function(e){var t=Math.sin(e*=f)*d,n=Math.sin(f-e)*d,i=n*l+t*c,r=n*u+t*h,o=n*a+t*s;return[Math.atan2(r,i)*jo,Math.atan2(o,Math.sqrt(i*i+r*r))*jo]}:function(){return[e*jo,t*jo]};return p.distance=f,p}function xn(){function e(e,r){var a=Math.sin(r*=Bo),o=Math.cos(r),s=_o((e*=Bo)-t),l=Math.cos(s);qs+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=i*a-n*o*l)*s),n*a+i*o*l),t=e,n=a,i=o}var t,n,i;Zs.point=function(r,a){t=r*Bo,n=Math.sin(a*=Bo),i=Math.cos(a),Zs.point=e},Zs.lineEnd=function(){Zs.point=Zs.lineEnd=w}}function En(e,t){function n(t,n){var i=Math.cos(t),r=Math.cos(n),a=e(i*r);return[a*r*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var i=Math.sqrt(e*e+n*n),r=t(i),a=Math.sin(r),o=Math.cos(r);return[Math.atan2(e*a,i*o),Math.asin(i&&n*a/i)]},n}function kn(e,t){function n(e,t){o>0?-zo+Fo>t&&(t=-zo+Fo):t>zo-Fo&&(t=zo-Fo);var n=o/Math.pow(r(t),a);return[n*Math.sin(a*e),o-n*Math.cos(a*e)]}var i=Math.cos(e),r=function(e){return Math.tan(Io/4+e/2)},a=e===t?Math.sin(e):Math.log(i/Math.cos(t))/Math.log(r(t)/r(e)),o=i*Math.pow(r(e),a)/a;return a?(n.invert=function(e,t){var n=o-t,i=J(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(o/i,1/a))-zo]},n):Tn}function Mn(e,t){function n(e,t){var n=a-t;return[n*Math.sin(r*e),a-n*Math.cos(r*e)]}var i=Math.cos(e),r=e===t?Math.sin(e):(i-Math.cos(t))/(t-e),a=i/r+e;return _o(r)<Fo?un:(n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,a-J(r)*Math.sqrt(e*e+n*n)]},n)}function Tn(e,t){return[e,Math.log(Math.tan(Io/4+t/2))]}function Sn(e){var t,n=on(e),i=n.scale,r=n.translate,a=n.clipExtent;return n.scale=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o===n){if(t=null==e){var s=Io*i(),l=r();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}function An(e,t){return[Math.log(Math.tan(Io/4+t/2)),-e]}function Rn(e){return e[0]}function Cn(e){return e[1]}function Pn(e){for(var t=e.length,n=[0,1],i=2,r=2;t>r;r++){for(;i>1&&K(e[n[i-2]],e[n[i-1]],e[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function On(e,t){return e[0]-t[0]||e[1]-t[1]}function Ln(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Nn(e,t,n,i){var r=e[0],a=n[0],o=t[0]-r,s=i[0]-a,l=e[1],u=n[1],c=t[1]-l,h=i[1]-u,f=(s*(l-u)-h*(r-a))/(h*o-s*c);return[r+f*o,l+f*c]}function Fn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Dn(){ii(this),this.edge=this.site=this.circle=null}function In(e){var t=sl.pop()||new Dn;return t.site=e,t}function Un(e){qn(e),rl.remove(e),sl.push(e),ii(e)}function Hn(e){var t=e.circle,n=t.x,i=t.cy,r={x:n,y:i},a=e.P,o=e.N,s=[e];Un(e);for(var l=a;l.circle&&_o(n-l.circle.x)<Fo&&_o(i-l.circle.cy)<Fo;)a=l.P,s.unshift(l),Un(l),l=a;s.unshift(l),qn(l);for(var u=o;u.circle&&_o(n-u.circle.x)<Fo&&_o(i-u.circle.cy)<Fo;)o=u.N,s.push(u),Un(u),u=o;s.push(u),qn(u);var c,h=s.length;for(c=1;h>c;++c)u=s[c],l=s[c-1],ei(u.edge,l.site,u.site,r);l=s[0],u=s[h-1],u.edge=Jn(l.site,u.site,null,r),Yn(l),Yn(u)}function zn(e){for(var t,n,i,r,a=e.x,o=e.y,s=rl._;s;)if(i=Bn(s,o)-a,i>Fo)s=s.L;else{if(r=a-jn(s,o),!(r>Fo)){i>-Fo?(t=s.P,n=s):r>-Fo?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=In(e);if(rl.insert(t,l),t||n){if(t===n)return qn(t),n=In(t.site),rl.insert(l,n),l.edge=n.edge=Jn(t.site,l.site),Yn(t),void Yn(n);if(!n)return void(l.edge=Jn(t.site,l.site));qn(t),qn(n);var u=t.site,c=u.x,h=u.y,f=e.x-c,d=e.y-h,p=n.site,g=p.x-c,m=p.y-h,v=2*(f*m-d*g),_=f*f+d*d,y=g*g+m*m,b={x:(m*_-d*y)/v+c,y:(f*y-g*_)/v+h};ei(n.edge,u,p,b),l.edge=Jn(u,e,null,b),n.edge=Jn(e,p,null,b),Yn(t),Yn(n)}}function Bn(e,t){var n=e.site,i=n.x,r=n.y,a=r-t;if(!a)return i;var o=e.P;if(!o)return-(1/0);n=o.site;var s=n.x,l=n.y,u=l-t;if(!u)return s;var c=s-i,h=1/a-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+r-a/2)))/h+i:(i+s)/2}function jn(e,t){var n=e.N;if(n)return Bn(n,t);var i=e.site;return i.y===t?i.x:1/0}function Vn(e){this.site=e,this.edges=[]}function Gn(e){for(var t,n,i,r,a,o,s,l,u,c,h=e[0][0],f=e[1][0],d=e[0][1],p=e[1][1],g=il,m=g.length;m--;)if(a=g[m],a&&a.prepare())for(s=a.edges,l=s.length,o=0;l>o;)c=s[o].end(),i=c.x,r=c.y,u=s[++o%l].start(),t=u.x,n=u.y,(_o(i-t)>Fo||_o(r-n)>Fo)&&(s.splice(o,0,new ti(Kn(a.site,c,_o(i-h)<Fo&&p-r>Fo?{x:h,y:_o(t-h)<Fo?n:p}:_o(r-p)<Fo&&f-i>Fo?{x:_o(n-p)<Fo?t:f,y:p}:_o(i-f)<Fo&&r-d>Fo?{x:f,y:_o(t-f)<Fo?n:d}:_o(r-d)<Fo&&i-h>Fo?{x:_o(n-d)<Fo?t:h,y:d}:null),a.site,null)),++l)}function Wn(e,t){return t.angle-e.angle}function Xn(){ii(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yn(e){var t=e.P,n=e.N;if(t&&n){var i=t.site,r=e.site,a=n.site;if(i!==a){var o=r.x,s=r.y,l=i.x-o,u=i.y-s,c=a.x-o,h=a.y-s,f=2*(l*h-u*c);if(!(f>=-Do)){var d=l*l+u*u,p=c*c+h*h,g=(h*d-u*p)/f,m=(l*p-c*d)/f,h=m+s,v=ll.pop()||new Xn;v.arc=e,v.site=r,v.x=g+o,v.y=h+Math.sqrt(g*g+m*m),v.cy=h,e.circle=v;for(var _=null,y=ol._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){_=y.P;break}y=y.L}else{if(!y.R){_=y;break}y=y.R}ol.insert(_,v),_||(al=v)}}}}function qn(e){var t=e.circle;t&&(t.P||(al=t.N),ol.remove(t),ll.push(t),ii(t),e.circle=null)}function Zn(e){for(var t,n=nl,i=jt(e[0][0],e[0][1],e[1][0],e[1][1]),r=n.length;r--;)t=n[r],(!Qn(t,e)||!i(t)||_o(t.a.x-t.b.x)<Fo&&_o(t.a.y-t.b.y)<Fo)&&(t.a=t.b=null,n.splice(r,1))}function Qn(e,t){var n=e.b;if(n)return!0;var i,r,a=e.a,o=t[0][0],s=t[1][0],l=t[0][1],u=t[1][1],c=e.l,h=e.r,f=c.x,d=c.y,p=h.x,g=h.y,m=(f+p)/2,v=(d+g)/2;if(g===d){if(o>m||m>=s)return;if(f>p){if(a){if(a.y>=u)return}else a={x:m,y:l};n={x:m,y:u}}else{if(a){if(a.y<l)return}else a={x:m,y:u};n={x:m,y:l}}}else if(i=(f-p)/(g-d),r=v-i*m,-1>i||i>1)if(f>p){if(a){if(a.y>=u)return}else a={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else{if(a){if(a.y<l)return}else a={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else if(g>d){if(a){if(a.x>=s)return}else a={x:o,y:i*o+r};n={x:s,y:i*s+r}}else{if(a){if(a.x<o)return}else a={x:s,y:i*s+r};n={x:o,y:i*o+r}}return e.a=a,e.b=n,!0}function $n(e,t){this.l=e,this.r=t,this.a=this.b=null}function Jn(e,t,n,i){var r=new $n(e,t);return nl.push(r),n&&ei(r,e,t,n),i&&ei(r,t,e,i),il[e.i].edges.push(new ti(r,e,t)),il[t.i].edges.push(new ti(r,t,e)),r}function Kn(e,t,n){var i=new $n(e,null);return i.a=t,i.b=n,nl.push(i),i}function ei(e,t,n,i){e.a||e.b?e.l===n?e.b=i:e.a=i:(e.a=i,e.l=t,e.r=n)}function ti(e,t,n){var i=e.a,r=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function ni(){this._=null}function ii(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ri(e,t){var n=t,i=t.R,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function ai(e,t){var n=t,i=t.L,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function oi(e){for(;e.L;)e=e.L;return e}function si(e,t){var n,i,r,a=e.sort(li).pop();for(nl=[],il=new Array(e.length),rl=new ni,ol=new ni;;)if(r=al,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))a.x===n&&a.y===i||(il[a.i]=new Vn(a),zn(a),n=a.x,i=a.y),a=e.pop();else{if(!r)break;Hn(r.arc)}t&&(Zn(t),Gn(t));var o={cells:il,edges:nl};return rl=ol=nl=il=null,o}function li(e,t){return t.y-e.y||t.x-e.x}function ui(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function ci(e){return e.x}function hi(e){return e.y}function fi(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function di(e,t,n,i,r,a){if(!e(t,n,i,r,a)){var o=.5*(n+r),s=.5*(i+a),l=t.nodes;l[0]&&di(e,l[0],n,i,o,s),l[1]&&di(e,l[1],o,i,r,s),l[2]&&di(e,l[2],n,s,o,a),l[3]&&di(e,l[3],o,s,r,a)}}function pi(e,t,n,i,r,a,o){var s,l=1/0;return function e(u,c,h,f,d){if(!(c>a||h>o||i>f||r>d)){if(p=u.point){var p,g=t-u.x,m=n-u.y,v=g*g+m*m;if(l>v){var _=Math.sqrt(l=v);i=t-_,r=n-_,a=t+_,o=n+_,s=p}}for(var y=u.nodes,b=.5*(c+f),w=.5*(h+d),x=t>=b,E=n>=w,k=E<<1|x,M=k+4;M>k;++k)if(u=y[3&k])switch(3&k){case 0:e(u,c,h,b,w);break;case 1:e(u,b,h,f,w);break;case 2:e(u,c,w,b,d);break;case 3:e(u,b,w,f,d)}}}(e,i,r,a,o),s}function gi(e,t){e=so.rgb(e),t=so.rgb(t);var n=e.r,i=e.g,r=e.b,a=t.r-n,o=t.g-i,s=t.b-r;return function(e){return"#"+be(Math.round(n+a*e))+be(Math.round(i+o*e))+be(Math.round(r+s*e))}}function mi(e,t){var n,i={},r={};for(n in e)n in t?i[n]=yi(e[n],t[n]):r[n]=e[n];for(n in t)n in e||(r[n]=t[n]);return function(e){for(n in i)r[n]=i[n](e);return r}}function vi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _i(e,t){var n,i,r,a=cl.lastIndex=hl.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=cl.exec(e))&&(i=hl.exec(t));)(r=i.index)>a&&(r=t.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:vi(n,i)})),a=hl.lastIndex;return a<t.length&&(r=t.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,i=0;t>i;++i)s[(n=l[i]).i]=n.x(e);return s.join("")})}function yi(e,t){for(var n,i=so.interpolators.length;--i>=0&&!(n=so.interpolators[i](e,t)););return n}function bi(e,t){var n,i=[],r=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)i.push(yi(e[n],t[n]));for(;a>n;++n)r[n]=e[n];for(;o>n;++n)r[n]=t[n];return function(e){for(n=0;s>n;++n)r[n]=i[n](e);return r}}function wi(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function xi(e){return function(t){return 1-e(1-t)}}function Ei(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function ki(e){return e*e}function Mi(e){return e*e*e}function Ti(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Si(e){return function(t){return Math.pow(t,e)}}function Ai(e){return 1-Math.cos(e*zo)}function Ri(e){return Math.pow(2,10*(e-1))}function Ci(e){return 1-Math.sqrt(1-e*e)}function Pi(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Uo*Math.asin(1/e):(e=1,n=t/4),function(i){return 1+e*Math.pow(2,-10*i)*Math.sin((i-n)*Uo/t)}}function Oi(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Li(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Ni(e,t){e=so.hcl(e),t=so.hcl(t);var n=e.h,i=e.c,r=e.l,a=t.h-n,o=t.c-i,s=t.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?t.c:i),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return ce(n+a*e,i+o*e,r+s*e)+""}}function Fi(e,t){e=so.hsl(e),t=so.hsl(t);var n=e.h,i=e.s,r=e.l,a=t.h-n,o=t.s-i,s=t.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?t.s:i),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return le(n+a*e,i+o*e,r+s*e)+""}}function Di(e,t){e=so.lab(e),t=so.lab(t);var n=e.l,i=e.a,r=e.b,a=t.l-n,o=t.a-i,s=t.b-r;return function(e){return fe(n+a*e,i+o*e,r+s*e)+""}}function Ii(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Ui(e){var t=[e.a,e.b],n=[e.c,e.d],i=zi(t),r=Hi(t,n),a=zi(Bi(n,t,-r))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*jo,this.translate=[e.e,e.f],this.scale=[i,a],this.skew=a?Math.atan2(r,a)*jo:0}function Hi(e,t){return e[0]*t[0]+e[1]*t[1]}function zi(e){var t=Math.sqrt(Hi(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Bi(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function ji(e){return e.length?e.pop()+",":""}function Vi(e,t,n,i){if(e[0]!==t[0]||e[1]!==t[1]){var r=n.push("translate(",null,",",null,")");i.push({i:r-4,x:vi(e[0],t[0])},{i:r-2,x:vi(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}function Gi(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(ji(n)+"rotate(",null,")")-2,x:vi(e,t)})):t&&n.push(ji(n)+"rotate("+t+")")}function Wi(e,t,n,i){e!==t?i.push({i:n.push(ji(n)+"skewX(",null,")")-2,x:vi(e,t)}):t&&n.push(ji(n)+"skewX("+t+")")}function Xi(e,t,n,i){if(e[0]!==t[0]||e[1]!==t[1]){var r=n.push(ji(n)+"scale(",null,",",null,")");i.push({i:r-4,x:vi(e[0],t[0])},{i:r-2,x:vi(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(ji(n)+"scale("+t+")")}function Yi(e,t){var n=[],i=[];return e=so.transform(e),t=so.transform(t),Vi(e.translate,t.translate,n,i),Gi(e.rotate,t.rotate,n,i),Wi(e.skew,t.skew,n,i),Xi(e.scale,t.scale,n,i),e=t=null,function(e){for(var t,r=-1,a=i.length;++r<a;)n[(t=i[r]).i]=t.x(e);return n.join("")}}function qi(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Zi(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Qi(e){for(var t=e.source,n=e.target,i=Ji(t,n),r=[t];t!==i;)t=t.parent,r.push(t);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function $i(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Ji(e,t){if(e===t)return e;for(var n=$i(e),i=$i(t),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o}function Ki(e){e.fixed|=2}function er(e){e.fixed&=-7}function tr(e){e.fixed|=4,e.px=e.x,e.py=e.y}function nr(e){e.fixed&=-5}function ir(e,t,n){var i=0,r=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,l=-1;++l<s;)a=o[l],null!=a&&(ir(a,t,n),e.charge+=a.charge,i+=a.charge*a.cx,r+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,i+=u*e.point.x,r+=u*e.point.y}e.cx=i/e.charge,e.cy=r/e.charge}function rr(e,t){return so.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=cr,e}function ar(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(r=e.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function or(e,t){for(var n=[e],i=[];null!=(e=n.pop());)if(i.push(e),(a=e.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)n.push(a[o]);for(;null!=(e=i.pop());)t(e)}function sr(e){return e.children}function lr(e){return e.value}function ur(e,t){return t.value-e.value}function cr(e){return so.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function hr(e){return e.x}function fr(e){return e.y}function dr(e,t,n){e.y0=t,e.y=n}function pr(e){return so.range(e.length)}function gr(e){for(var t=-1,n=e[0].length,i=[];++t<n;)i[t]=0;return i}function mr(e){for(var t,n=1,i=0,r=e[0][1],a=e.length;a>n;++n)(t=e[n][1])>r&&(i=n,r=t);return i}function vr(e){return e.reduce(_r,0)}function _r(e,t){return e+t[1]}function yr(e,t){return br(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function br(e,t){for(var n=-1,i=+e[0],r=(e[1]-i)/t,a=[];++n<=t;)a[n]=r*n+i;return a}function wr(e){return[so.min(e),so.max(e)]}function xr(e,t){return e.value-t.value}function Er(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function kr(e,t){e._pack_next=t,t._pack_prev=e}function Mr(e,t){var n=t.x-e.x,i=t.y-e.y,r=e.r+t.r;return.999*r*r>n*n+i*i}function Tr(e){function t(e){c=Math.min(e.x-e.r,c),h=Math.max(e.x+e.r,h),f=Math.min(e.y-e.r,f),d=Math.max(e.y+e.r,d)}if((n=e.children)&&(u=n.length)){var n,i,r,a,o,s,l,u,c=1/0,h=-(1/0),f=1/0,d=-(1/0);if(n.forEach(Sr),i=n[0],i.x=-i.r,i.y=0,t(i),u>1&&(r=n[1],r.x=r.r,r.y=0,t(r),u>2))for(a=n[2],Cr(i,r,a),t(a),Er(i,a),i._pack_prev=a,Er(a,r),r=i._pack_next,o=3;u>o;o++){Cr(i,r,a=n[o]);var p=0,g=1,m=1;for(s=r._pack_next;s!==r;s=s._pack_next,g++)if(Mr(s,a)){p=1;break}if(1==p)for(l=i._pack_prev;l!==s._pack_prev&&!Mr(l,a);l=l._pack_prev,m++);p?(m>g||g==m&&r.r<i.r?kr(i,r=s):kr(i=l,r),o--):(Er(i,a),r=a,t(a))}var v=(c+h)/2,_=(f+d)/2,y=0;for(o=0;u>o;o++)a=n[o],a.x-=v,a.y-=_,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=y,n.forEach(Ar)}}function Sr(e){e._pack_next=e._pack_prev=e}function Ar(e){delete e._pack_next,delete e._pack_prev}function Rr(e,t,n,i){var r=e.children;if(e.x=t+=i*e.x,e.y=n+=i*e.y,e.r*=i,r)for(var a=-1,o=r.length;++a<o;)Rr(r[a],t,n,i)}function Cr(e,t,n){var i=e.r+n.r,r=t.x-e.x,a=t.y-e.y;if(i&&(r||a)){var o=t.r+n.r,s=r*r+a*a;o*=o,i*=i;var l=.5+(i-o)/(2*s),u=Math.sqrt(Math.max(0,2*o*(i+s)-(i-=s)*i-o*o))/(2*s);n.x=e.x+l*r+u*a,n.y=e.y+l*a-u*r}else n.x=e.x+i,n.y=e.y}function Pr(e,t){return e.parent==t.parent?1:2}function Or(e){var t=e.children;return t.length?t[0]:e.t}function Lr(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Nr(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Fr(e){for(var t,n=0,i=0,r=e.children,a=r.length;--a>=0;)t=r[a],t.z+=n,t.m+=n,n+=t.s+(i+=t.c)}function Dr(e,t,n){return e.a.parent===t.parent?e.a:n}function Ir(e){return 1+so.max(e,function(e){return e.y})}function Ur(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Hr(e){var t=e.children;return t&&t.length?Hr(t[0]):e}function zr(e){var t,n=e.children;return n&&(t=n.length)?zr(n[t-1]):e}function Br(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function jr(e,t){var n=e.x+t[3],i=e.y+t[0],r=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return 0>r&&(n+=r/2,r=0),0>a&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Vr(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Gr(e){return e.rangeExtent?e.rangeExtent():Vr(e.range())}function Wr(e,t,n,i){var r=n(e[0],e[1]),a=i(t[0],t[1]);return function(e){return a(r(e))}}function Xr(e,t){var n,i=0,r=e.length-1,a=e[i],o=e[r];return a>o&&(n=i,i=r,r=n,n=a,a=o,o=n),e[i]=t.floor(a),e[r]=t.ceil(o),e}function Yr(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:xl}function qr(e,t,n,i){var r=[],a=[],o=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=s;)r.push(n(e[o-1],e[o])),a.push(i(t[o-1],t[o]));return function(t){var n=so.bisect(e,t,1,s)-1;return a[n](r[n](t))}}function Zr(e,t,n,i){function r(){var r=Math.min(e.length,t.length)>2?qr:Wr,l=i?Zi:qi;return o=r(e,t,l,n),s=r(t,e,l,yi),a}function a(e){return o(e)}var o,s;return a.invert=function(e){return s(e)},a.domain=function(t){return arguments.length?(e=t.map(Number),r()):e},a.range=function(e){return arguments.length?(t=e,r()):t},a.rangeRound=function(e){return a.range(e).interpolate(Ii)},a.clamp=function(e){return arguments.length?(i=e,r()):i},a.interpolate=function(e){return arguments.length?(n=e,r()):n},a.ticks=function(t){return Kr(e,t)},a.tickFormat=function(t,n){return ea(e,t,n)},a.nice=function(t){return $r(e,t),r()},a.copy=function(){return Zr(e,t,n,i)},r()}function Qr(e,t){return so.rebind(e,t,"range","rangeRound","interpolate","clamp")}function $r(e,t){return Xr(e,Yr(Jr(e,t)[2])),Xr(e,Yr(Jr(e,t)[2])),e}function Jr(e,t){null==t&&(t=10);var n=Vr(e),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),a=t/i*r;return.15>=a?r*=10:.35>=a?r*=5:.75>=a&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Kr(e,t){return so.range.apply(so,Jr(e,t))}function ea(e,t,n){var i=Jr(e,t);if(n){var r=cs.exec(n);if(r.shift(),"s"===r[8]){var a=so.formatPrefix(Math.max(_o(i[0]),_o(i[1])));return r[7]||(r[7]="."+ta(a.scale(i[2]))),r[8]="f",n=so.format(r.join("")),function(e){return n(a.scale(e))+a.symbol}}r[7]||(r[7]="."+na(r[8],i)),n=r.join("")}else n=",."+ta(i[2])+"f";return so.format(n)}function ta(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function na(e,t){var n=ta(t[2]);return e in El?Math.abs(n-ta(Math.max(_o(t[0]),_o(t[1]))))+ +("e"!==e):n-2*("%"===e)}function ia(e,t,n,i){function r(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(r(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((i=t.map(Number)).map(r)),o):i},o.base=function(n){return arguments.length?(t=+n,e.domain(i.map(r)),o):t},o.nice=function(){var t=Xr(i.map(r),n?Math:Ml);return e.domain(t),i=t.map(a),o},o.ticks=function(){var e=Vr(i),o=[],s=e[0],l=e[1],u=Math.floor(r(s)),c=Math.ceil(r(l)),h=t%1?2:t;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var f=1;h>f;f++)o.push(a(u)*f);o.push(a(u))}else for(o.push(a(u));u++<c;)for(var f=h-1;f>0;f--)o.push(a(u)*f);for(u=0;o[u]<s;u++);for(c=o.length;o[c-1]>l;c--);o=o.slice(u,c)}return o},o.tickFormat=function(e,n){if(!arguments.length)return kl;arguments.length<2?n=kl:"function"!=typeof n&&(n=so.format(n));var i=Math.max(1,t*e/o.ticks().length);return function(e){var o=e/a(Math.round(r(e)));return t-.5>o*t&&(o*=t),i>=o?n(e):""}},o.copy=function(){return ia(e.copy(),t,n,i)},Qr(o,e)}function ra(e,t,n){function i(t){return e(r(t))}var r=aa(t),a=aa(1/t);return i.invert=function(t){return a(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),i):n},i.ticks=function(e){return Kr(n,e)},i.tickFormat=function(e,t){return ea(n,e,t)},i.nice=function(e){return i.domain($r(n,e))},i.exponent=function(o){return arguments.length?(r=aa(t=o),a=aa(1/t),e.domain(n.map(r)),i):t},i.copy=function(){return ra(e.copy(),t,n)},Qr(i,e)}function aa(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function oa(e,t){function n(n){return a[((r.get(n)||("range"===t.t?r.set(n,e.push(n)):NaN))-1)%a.length]}function i(t,n){return so.range(e.length).map(function(e){return t+n*e})}var r,a,o;return n.domain=function(i){if(!arguments.length)return e;e=[],r=new u;for(var a,o=-1,s=i.length;++o<s;)r.has(a=i[o])||r.set(a,e.push(a));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(a=e,o=0,t={t:"range",a:arguments},n):a},n.rangePoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],u=r[1],c=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+s);return a=i(l+c*s/2,c),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],u=r[1],c=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+s)|0;return a=i(l+Math.round(c*s/2+(u-l-(e.length-1+s)*c)/2),c),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=r[1]<r[0],c=r[u-0],h=r[1-u],f=(h-c)/(e.length-s+2*l);return a=i(c+f*l,f),u&&a.reverse(),o=f*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=r[1]<r[0],c=r[u-0],h=r[1-u],f=Math.floor((h-c)/(e.length-s+2*l));return a=i(c+Math.round((h-c-(e.length-s)*f)/2),f),u&&a.reverse(),o=Math.round(f*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Vr(t.a[0])},n.copy=function(){return oa(e,t)},n.domain(e)}function sa(e,t){function a(){var n=0,i=t.length;for(s=[];++n<i;)s[n-1]=so.quantile(e,n/i);return o}function o(e){return isNaN(e=+e)?void 0:t[so.bisect(s,e)]}var s;return o.domain=function(t){return arguments.length?(e=t.map(i).filter(r).sort(n),a()):e},o.range=function(e){return arguments.length?(t=e,a()):t;
},o.quantiles=function(){return s},o.invertExtent=function(n){return n=t.indexOf(n),0>n?[NaN,NaN]:[n>0?s[n-1]:e[0],n<s.length?s[n]:e[e.length-1]]},o.copy=function(){return sa(e,t)},a()}function la(e,t,n){function i(t){return n[Math.max(0,Math.min(o,Math.floor(a*(t-e))))]}function r(){return a=n.length/(t-e),o=n.length-1,i}var a,o;return i.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],r()):[e,t]},i.range=function(e){return arguments.length?(n=e,r()):n},i.invertExtent=function(t){return t=n.indexOf(t),t=0>t?NaN:t/a+e,[t,t+1/a]},i.copy=function(){return la(e,t,n)},r()}function ua(e,t){function n(n){return n>=n?t[so.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return ua(e,t)},n}function ca(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Kr(e,t)},t.tickFormat=function(t,n){return ea(e,t,n)},t.copy=function(){return ca(e)},t}function ha(){return 0}function fa(e){return e.innerRadius}function da(e){return e.outerRadius}function pa(e){return e.startAngle}function ga(e){return e.endAngle}function ma(e){return e&&e.padAngle}function va(e,t,n,i){return(e-n)*t-(t-i)*e>0?0:1}function _a(e,t,n,i,r){var a=e[0]-t[0],o=e[1]-t[1],s=(r?i:-i)/Math.sqrt(a*a+o*o),l=s*o,u=-s*a,c=e[0]+l,h=e[1]+u,f=t[0]+l,d=t[1]+u,p=(c+f)/2,g=(h+d)/2,m=f-c,v=d-h,_=m*m+v*v,y=n-i,b=c*d-f*h,w=(0>v?-1:1)*Math.sqrt(Math.max(0,y*y*_-b*b)),x=(b*v-m*w)/_,E=(-b*m-v*w)/_,k=(b*v+m*w)/_,M=(-b*m+v*w)/_,T=x-p,S=E-g,A=k-p,R=M-g;return T*T+S*S>A*A+R*R&&(x=k,E=M),[[x-l,E-u],[x*n/y,E*n/y]]}function ya(e){function t(t){function o(){u.push("M",a(e(c),s))}for(var l,u=[],c=[],h=-1,f=t.length,d=Te(n),p=Te(i);++h<f;)r.call(this,l=t[h],h)?c.push([+d.call(this,l,h),+p.call(this,l,h)]):c.length&&(o(),c=[]);return c.length&&o(),u.length?u.join(""):null}var n=Rn,i=Cn,r=Rt,a=ba,o=a.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(r=e,t):r},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?a=e:(a=Pl.get(e)||ba).key,t):o},t.tension=function(e){return arguments.length?(s=e,t):s},t}function ba(e){return e.length>1?e.join("L"):e+"Z"}function wa(e){return e.join("L")+"Z"}function xa(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i[0]+(i=e[t])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function Ea(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("V",(i=e[t])[1],"H",i[0]);return r.join("")}function ka(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i=e[t])[0],"V",i[1]);return r.join("")}function Ma(e,t){return e.length<4?ba(e):e[1]+Aa(e.slice(1,-1),Ra(e,t))}function Ta(e,t){return e.length<3?wa(e):e[0]+Aa((e.push(e[0]),e),Ra([e[e.length-2]].concat(e,[e[1]]),t))}function Sa(e,t){return e.length<3?ba(e):e[0]+Aa(e,Ra(e,t))}function Aa(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ba(e);var n=e.length!=t.length,i="",r=e[0],a=e[1],o=t[0],s=o,l=1;if(n&&(i+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=e[1],l=2),t.length>1){s=t[1],a=e[l],l++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;u<t.length;u++,l++)a=e[l],s=t[u],i+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=e[l];i+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return i}function Ra(e,t){for(var n,i=[],r=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;++s<l;)n=a,a=o,o=e[s],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function Ca(e){if(e.length<3)return ba(e);var t=1,n=e.length,i=e[0],r=i[0],a=i[1],o=[r,r,r,(i=e[1])[0]],s=[a,a,a,i[1]],l=[r,",",a,"L",Na(Nl,o),",",Na(Nl,s)];for(e.push(e[n-1]);++t<=n;)i=e[t],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Fa(l,o,s);return e.pop(),l.push("L",i),l.join("")}function Pa(e){if(e.length<4)return ba(e);for(var t,n=[],i=-1,r=e.length,a=[0],o=[0];++i<3;)t=e[i],a.push(t[0]),o.push(t[1]);for(n.push(Na(Nl,a)+","+Na(Nl,o)),--i;++i<r;)t=e[i],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),Fa(n,a,o);return n.join("")}function Oa(e){for(var t,n,i=-1,r=e.length,a=r+4,o=[],s=[];++i<4;)n=e[i%r],o.push(n[0]),s.push(n[1]);for(t=[Na(Nl,o),",",Na(Nl,s)],--i;++i<a;)n=e[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Fa(t,o,s);return t.join("")}function La(e,t){var n=e.length-1;if(n)for(var i,r,a=e[0][0],o=e[0][1],s=e[n][0]-a,l=e[n][1]-o,u=-1;++u<=n;)i=e[u],r=u/n,i[0]=t*i[0]+(1-t)*(a+r*s),i[1]=t*i[1]+(1-t)*(o+r*l);return Ca(e)}function Na(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Fa(e,t,n){e.push("C",Na(Ol,t),",",Na(Ol,n),",",Na(Ll,t),",",Na(Ll,n),",",Na(Nl,t),",",Na(Nl,n))}function Da(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Ia(e){for(var t=0,n=e.length-1,i=[],r=e[0],a=e[1],o=i[0]=Da(r,a);++t<n;)i[t]=(o+(o=Da(r=a,a=e[t+1])))/2;return i[t]=o,i}function Ua(e){for(var t,n,i,r,a=[],o=Ia(e),s=-1,l=e.length-1;++s<l;)t=Da(e[s],e[s+1]),_o(t)<Fo?o[s]=o[s+1]=0:(n=o[s]/t,i=o[s+1]/t,r=n*n+i*i,r>9&&(r=3*t/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i));for(s=-1;++s<=l;)r=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}function Ha(e){return e.length<3?ba(e):e[0]+Aa(e,Ua(e))}function za(e){for(var t,n,i,r=-1,a=e.length;++r<a;)t=e[r],n=t[0],i=t[1]-zo,t[0]=n*Math.cos(i),t[1]=n*Math.sin(i);return e}function Ba(e){function t(t){function l(){g.push("M",s(e(v),h),c,u(e(m.reverse()),h),"Z")}for(var f,d,p,g=[],m=[],v=[],_=-1,y=t.length,b=Te(n),w=Te(r),x=n===i?function(){return d}:Te(i),E=r===a?function(){return p}:Te(a);++_<y;)o.call(this,f=t[_],_)?(m.push([d=+b.call(this,f,_),p=+w.call(this,f,_)]),v.push([+x.call(this,f,_),+E.call(this,f,_)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=Rn,i=Rn,r=0,a=Cn,o=Rt,s=ba,l=s.key,u=s,c="L",h=.7;return t.x=function(e){return arguments.length?(n=i=e,t):i},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(r=a=e,t):a},t.y0=function(e){return arguments.length?(r=e,t):r},t.y1=function(e){return arguments.length?(a=e,t):a},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=Pl.get(e)||ba).key,u=s.reverse||s,c=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(h=e,t):h},t}function ja(e){return e.radius}function Va(e){return[e.x,e.y]}function Ga(e){return function(){var t=e.apply(this,arguments),n=t[0],i=t[1]-zo;return[n*Math.cos(i),n*Math.sin(i)]}}function Wa(){return 64}function Xa(){return"circle"}function Ya(e){var t=Math.sqrt(e/Io);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function qa(e){return function(){var t,n,i;(t=this[e])&&(i=t[n=t.active])&&(i.timer.c=null,i.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function Za(e,t,n){return Eo(e,Bl),e.namespace=t,e.id=n,e}function Qa(e,t,n,i){var r=e.id,a=e.namespace;return V(e,"function"==typeof n?function(e,o,s){e[a][r].tween.set(t,i(n.call(e,e.__data__,o,s)))}:(n=i(n),function(e){e[a][r].tween.set(t,n)}))}function $a(e){return null==e&&(e=""),function(){this.textContent=e}}function Ja(e){return null==e?"__transition__":"__transition_"+e+"__"}function Ka(e,t,n,i,r){function a(e){var t=g.delay;return c.t=t+l,e>=t?o(e-t):void(c.c=o)}function o(n){var r=p.active,a=p[r];a&&(a.timer.c=null,a.timer.t=NaN,--p.count,delete p[r],a.event&&a.event.interrupt.call(e,e.__data__,a.index));for(var o in p)if(i>+o){var u=p[o];u.timer.c=null,u.timer.t=NaN,--p.count,delete p[o]}c.c=s,Pe(function(){return c.c&&s(n||1)&&(c.c=null,c.t=NaN),1},0,l),p.active=i,g.event&&g.event.start.call(e,e.__data__,t),d=[],g.tween.forEach(function(n,i){(i=i.call(e,e.__data__,t))&&d.push(i)}),f=g.ease,h=g.duration}function s(r){for(var a=r/h,o=f(a),s=d.length;s>0;)d[--s].call(e,o);return a>=1?(g.event&&g.event.end.call(e,e.__data__,t),--p.count?delete p[i]:delete e[n],1):void 0}var l,c,h,f,d,p=e[n]||(e[n]={active:0,count:0}),g=p[i];g||(l=r.time,c=Pe(a,0,l),g=p[i]={tween:new u,time:l,timer:c,delay:r.delay,duration:r.duration,ease:r.ease,index:t},r=null,++p.count)}function eo(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate("+(isFinite(i)?i:n(e))+",0)"})}function to(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate(0,"+(isFinite(i)?i:n(e))+")"})}function no(e){return e.toISOString()}function io(e,t,n){function i(t){return e(t)}function r(e,n){var i=e[1]-e[0],r=i/n,a=so.bisect(Ql,r);return a==Ql.length?[t.year,Jr(e.map(function(e){return e/31536e6}),n)[2]]:a?t[r/Ql[a-1]<Ql[a]/r?a-1:a]:[Kl,Jr(e,n)[2]]}return i.invert=function(t){return ro(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(ro)},i.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,ro(+n+1),t).length}var a=i.domain(),o=Vr(a),s=null==e?r(o,10):"number"==typeof e&&r(o,e);return s&&(e=s[0],t=s[1]),i.domain(Xr(a,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=ro(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=ro(+t+1);return t}}:e))},i.ticks=function(e,t){var n=Vr(i.domain()),a=null==e?r(n,10):"number"==typeof e?r(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],ro(+n[1]+1),1>t?1:t)},i.tickFormat=function(){return n},i.copy=function(){return io(e.copy(),t,n)},Qr(i,e)}function ro(e){return new Date(e)}function ao(e){return JSON.parse(e.responseText)}function oo(e){var t=co.createRange();return t.selectNode(co.body),t.createContextualFragment(e.responseText)}var so={version:"3.5.17"},lo=[].slice,uo=function(e){return lo.call(e)},co=this.document;if(co)try{uo(co.documentElement.childNodes)[0].nodeType}catch(e){uo=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),co)try{co.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var ho=this.Element.prototype,fo=ho.setAttribute,po=ho.setAttributeNS,go=this.CSSStyleDeclaration.prototype,mo=go.setProperty;ho.setAttribute=function(e,t){fo.call(this,e,t+"")},ho.setAttributeNS=function(e,t,n){po.call(this,e,t,n+"")},go.setProperty=function(e,t,n){mo.call(this,e,t+"",n)}}so.ascending=n,so.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:NaN},so.min=function(e,t){var n,i,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=e[r])&&n>i&&(n=i)}else{for(;++r<a;)if(null!=(i=t.call(e,e[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=t.call(e,e[r],r))&&n>i&&(n=i)}return n},so.max=function(e,t){var n,i,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=e[r])&&i>n&&(n=i)}else{for(;++r<a;)if(null!=(i=t.call(e,e[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=t.call(e,e[r],r))&&i>n&&(n=i)}return n},so.extent=function(e,t){var n,i,r,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=e[a])&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=e[a])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++a<o;)if(null!=(i=t.call(e,e[a],a))&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=t.call(e,e[a],a))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},so.sum=function(e,t){var n,i=0,a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)r(n=+e[o])&&(i+=n);else for(;++o<a;)r(n=+t.call(e,e[o],o))&&(i+=n);return i},so.mean=function(e,t){var n,a=0,o=e.length,s=-1,l=o;if(1===arguments.length)for(;++s<o;)r(n=i(e[s]))?a+=n:--l;else for(;++s<o;)r(n=i(t.call(e,e[s],s)))?a+=n:--l;return l?a/l:void 0},so.quantile=function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),r=+e[i-1],a=n-i;return a?r+a*(e[i]-r):r},so.median=function(e,t){var a,o=[],s=e.length,l=-1;if(1===arguments.length)for(;++l<s;)r(a=i(e[l]))&&o.push(a);else for(;++l<s;)r(a=i(t.call(e,e[l],l)))&&o.push(a);return o.length?so.quantile(o.sort(n),.5):void 0},so.variance=function(e,t){var n,a,o=e.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<o;)r(n=i(e[u]))&&(a=n-s,s+=a/++c,l+=a*(n-s));else for(;++u<o;)r(n=i(t.call(e,e[u],u)))&&(a=n-s,s+=a/++c,l+=a*(n-s));return c>1?l/(c-1):void 0},so.deviation=function(){var e=so.variance.apply(this,arguments);return e?Math.sqrt(e):e};var vo=a(n);so.bisectLeft=vo.left,so.bisect=so.bisectRight=vo.right,so.bisector=function(e){return a(1===e.length?function(t,i){return n(e(t),i)}:e)},so.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,2>a&&(t=0));for(var i,r,a=n-t;a;)r=Math.random()*a--|0,i=e[a+t],e[a+t]=e[r+t],e[r+t]=i;return e},so.permute=function(e,t){for(var n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i},so.pairs=function(e){for(var t,n=0,i=e.length-1,r=e[0],a=new Array(0>i?0:i);i>n;)a[n]=[t=r,r=e[++n]];return a},so.transpose=function(e){if(!(r=e.length))return[];for(var t=-1,n=so.min(e,o),i=new Array(n);++t<n;)for(var r,a=-1,s=i[t]=new Array(r);++a<r;)s[a]=e[a][t];return i},so.zip=function(){return so.transpose(arguments)},so.keys=function(e){var t=[];for(var n in e)t.push(n);return t},so.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},so.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},so.merge=function(e){for(var t,n,i,r=e.length,a=-1,o=0;++a<r;)o+=e[a].length;for(n=new Array(o);--r>=0;)for(i=e[r],t=i.length;--t>=0;)n[--o]=i[t];return n};var _o=Math.abs;so.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var i,r=[],a=s(_o(n)),o=-1;if(e*=a,t*=a,n*=a,0>n)for(;(i=e+n*++o)>t;)r.push(i/a);else for(;(i=e+n*++o)<t;)r.push(i/a);return r},so.map=function(e,t){var n=new u;if(e instanceof u)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var i,r=-1,a=e.length;if(1===arguments.length)for(;++r<a;)n.set(r,e[r]);else for(;++r<a;)n.set(t.call(e,i=e[r],r),i)}else for(var o in e)n.set(o,e[o]);return n};var yo="__proto__",bo="\0";l(u,{has:f,get:function(e){return this._[c(e)]},set:function(e,t){return this._[c(e)]=t},remove:d,keys:p,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:h(t),value:this._[t]});return e},size:g,empty:m,forEach:function(e){for(var t in this._)e.call(this,h(t),this._[t])}}),so.nest=function(){function e(t,o,s){if(s>=a.length)return i?i.call(r,o):n?o.sort(n):o;for(var l,c,h,f,d=-1,p=o.length,g=a[s++],m=new u;++d<p;)(f=m.get(l=g(c=o[d])))?f.push(c):m.set(l,[c]);return t?(c=t(),h=function(n,i){c.set(n,e(t,i,s))}):(c={},h=function(n,i){c[n]=e(t,i,s)}),m.forEach(h),c}function t(e,n){if(n>=a.length)return e;var i=[],r=o[n++];return e.forEach(function(e,r){i.push({key:e,values:t(r,n)})}),r?i.sort(function(e,t){return r(e.key,t.key)}):i}var n,i,r={},a=[],o=[];return r.map=function(t,n){return e(n,t,0)},r.entries=function(n){return t(e(so.map,n,0),0)},r.key=function(e){return a.push(e),r},r.sortKeys=function(e){return o[a.length-1]=e,r},r.sortValues=function(e){return n=e,r},r.rollup=function(e){return i=e,r},r},so.set=function(e){var t=new v;if(e)for(var n=0,i=e.length;i>n;++n)t.add(e[n]);return t},l(v,{has:f,add:function(e){return this._[c(e+="")]=!0,e},remove:d,values:p,size:g,empty:m,forEach:function(e){for(var t in this._)e.call(this,h(t))}}),so.behavior={},so.rebind=function(e,t){for(var n,i=1,r=arguments.length;++i<r;)e[n=arguments[i]]=y(e,t,t[n]);return e};var wo=["webkit","ms","moz","Moz","o","O"];so.dispatch=function(){for(var e=new x,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=E(e);return e},x.prototype.on=function(e,t){var n=e.indexOf("."),i="";if(n>=0&&(i=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(i):this[e].on(i,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(i,null);return this}},so.event=null,so.requote=function(e){return e.replace(xo,"\\$&")};var xo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Eo={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},ko=function(e,t){return t.querySelector(e)},Mo=function(e,t){return t.querySelectorAll(e)},To=function(e,t){var n=e.matches||e[b(e,"matchesSelector")];return(To=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(ko=function(e,t){return Sizzle(e,t)[0]||null},Mo=Sizzle,To=Sizzle.matchesSelector),so.selection=function(){return so.select(co.documentElement)};var So=so.selection.prototype=[];So.select=function(e){var t,n,i,r,a=[];e=A(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(i=this[o]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(t.push(n=e.call(r,r.__data__,l,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):t.push(null)}return S(a)},So.selectAll=function(e){var t,n,i=[];e=R(e);for(var r=-1,a=this.length;++r<a;)for(var o=this[r],s=-1,l=o.length;++s<l;)(n=o[s])&&(i.push(t=uo(e.call(n,n.__data__,s,r))),t.parentNode=n);return S(i)};var Ao="http://www.w3.org/1999/xhtml",Ro={svg:"http://www.w3.org/2000/svg",xhtml:Ao,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};so.ns={prefix:Ro,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Ro.hasOwnProperty(n)?{space:Ro[n],local:e}:e}},So.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=so.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(C(t,e[t]));return this}return this.each(C(e,t))},So.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),i=(e=L(e)).length,r=-1;if(t=n.classList){for(;++r<i;)if(!t.contains(e[r]))return!1}else for(t=n.getAttribute("class");++r<i;)if(!O(e[r]).test(t))return!1;return!0}for(t in e)this.each(N(t,e[t]));return this}return this.each(N(e,t))},So.style=function(e,n,i){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(n="");for(i in e)this.each(D(i,e[i],n));return this}if(2>r){var a=this.node();return t(a).getComputedStyle(a,null).getPropertyValue(e)}i=""}return this.each(D(e,n,i))},So.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(I(t,e[t]));return this}return this.each(I(e,t))},So.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},So.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},So.append=function(e){return e=U(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},So.insert=function(e,t){return e=U(e),t=A(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},So.remove=function(){return this.each(H)},So.data=function(e,t){function n(e,n){var i,r,a,o=e.length,h=n.length,f=Math.min(o,h),d=new Array(h),p=new Array(h),g=new Array(o);if(t){var m,v=new u,_=new Array(o);for(i=-1;++i<o;)(r=e[i])&&(v.has(m=t.call(r,r.__data__,i))?g[i]=r:v.set(m,r),_[i]=m);for(i=-1;++i<h;)(r=v.get(m=t.call(n,a=n[i],i)))?r!==!0&&(d[i]=r,r.__data__=a):p[i]=z(a),v.set(m,!0);for(i=-1;++i<o;)i in _&&v.get(_[i])!==!0&&(g[i]=e[i])}else{for(i=-1;++i<f;)r=e[i],a=n[i],r?(r.__data__=a,d[i]=r):p[i]=z(a);for(;h>i;++i)p[i]=z(n[i]);for(;o>i;++i)g[i]=e[i]}p.update=d,p.parentNode=d.parentNode=g.parentNode=e.parentNode,s.push(p),l.push(d),c.push(g)}var i,r,a=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(i=this[0]).length);++a<o;)(r=i[a])&&(e[a]=r.__data__);return e}var s=G([]),l=S([]),c=S([]);if("function"==typeof e)for(;++a<o;)n(i=this[a],e.call(i,i.parentNode.__data__,a));else for(;++a<o;)n(i=this[a],e);return l.enter=function(){return s},l.exit=function(){return c},l},So.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},So.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=B(e));for(var a=0,o=this.length;o>a;a++){r.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;l>s;s++)(i=n[s])&&e.call(i,i.__data__,s,a)&&t.push(i)}return S(r)},So.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,i=this[e],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},So.sort=function(e){e=j.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},So.each=function(e){return V(this,function(t,n,i){e.call(t,t.__data__,n,i)})},So.call=function(e){var t=uo(arguments);return e.apply(t[0]=this,t),this},So.empty=function(){return!this.node()},So.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],i=0,r=n.length;r>i;i++){var a=n[i];if(a)return a}return null},So.size=function(){var e=0;return V(this,function(){++e}),e};var Co=[];so.selection.enter=G,so.selection.enter.prototype=Co,Co.append=So.append,Co.empty=So.empty,Co.node=So.node,Co.call=So.call,Co.size=So.size,Co.select=function(e){for(var t,n,i,r,a,o=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,o.push(t=[]),t.parentNode=r.parentNode;for(var u=-1,c=r.length;++u<c;)(a=r[u])?(t.push(i[u]=n=e.call(r.parentNode,a.__data__,u,s)),n.__data__=a.__data__):t.push(null)}return S(o)},Co.insert=function(e,t){return arguments.length<2&&(t=W(this)),So.insert.call(this,e,t)},so.select=function(t){var n;return"string"==typeof t?(n=[ko(t,co)],n.parentNode=co.documentElement):(n=[t],n.parentNode=e(t)),S([n])},so.selectAll=function(e){var t;return"string"==typeof e?(t=uo(Mo(e,co)),t.parentNode=co.documentElement):(t=uo(e),t.parentNode=null),S([t])},So.on=function(e,t,n){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(t=!1);for(n in e)this.each(X(n,e[n],t));return this}if(2>i)return(i=this.node()["__on"+e])&&i._;n=!1}return this.each(X(e,t,n))};var Po=so.map({mouseenter:"mouseover",mouseleave:"mouseout"});co&&Po.forEach(function(e){"on"+e in co&&Po.remove(e)});var Oo,Lo=0;so.mouse=function(e){return Q(e,M())};var No=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;so.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=M().changedTouches),t)for(var i,r=0,a=t.length;a>r;++r)if((i=t[r]).identifier===n)return Q(e,i)},so.behavior.drag=function(){function e(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function n(e,t,n,a,o){return function(){function s(){var e,n,i=t(f,g);i&&(e=i[0]-y[0],n=i[1]-y[1],p|=e|n,y=i,d({type:"drag",x:i[0]+u[0],y:i[1]+u[1],dx:e,dy:n}))}function l(){t(f,g)&&(v.on(a+m,null).on(o+m,null),_(p),d({type:"dragend"}))}var u,c=this,h=so.event.target.correspondingElement||so.event.target,f=c.parentNode,d=i.of(c,arguments),p=0,g=e(),m=".drag"+(null==g?"":"-"+g),v=so.select(n(h)).on(a+m,s).on(o+m,l),_=Z(h),y=t(f,g);r?(u=r.apply(c,arguments),u=[u.x-y[0],u.y-y[1]]):u=[0,0],d({type:"dragstart"})}}var i=T(e,"drag","dragstart","dragend"),r=null,a=n(w,so.mouse,t,"mousemove","mouseup"),o=n($,so.touch,_,"touchmove","touchend");return e.origin=function(t){return arguments.length?(r=t,e):r},so.rebind(e,i,"on")},so.touches=function(e,t){return arguments.length<2&&(t=M().touches),t?uo(t).map(function(t){var n=Q(e,t);return n.identifier=t.identifier,n}):[]};var Fo=1e-6,Do=Fo*Fo,Io=Math.PI,Uo=2*Io,Ho=Uo-Fo,zo=Io/2,Bo=Io/180,jo=180/Io,Vo=Math.SQRT2,Go=2,Wo=4;so.interpolateZoom=function(e,t){var n,i,r=e[0],a=e[1],o=e[2],s=t[0],l=t[1],u=t[2],c=s-r,h=l-a,f=c*c+h*h;if(Do>f)i=Math.log(u/o)/Vo,n=function(e){return[r+e*c,a+e*h,o*Math.exp(Vo*e*i)]};else{var d=Math.sqrt(f),p=(u*u-o*o+Wo*f)/(2*o*Go*d),g=(u*u-o*o-Wo*f)/(2*u*Go*d),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);i=(v-m)/Vo,n=function(e){var t=e*i,n=ie(m),s=o/(Go*d)*(n*re(Vo*t+m)-ne(m));return[r+s*c,a+s*h,o*n/ie(Vo*t+m)]}}return n.duration=1e3*i,n},so.behavior.zoom=function(){function e(e){e.on(P,h).on(Yo+".zoom",d).on("dblclick.zoom",p).on(N,f)}function n(e){return[(e[0]-M.x)/M.k,(e[1]-M.y)/M.k]}function i(e){return[e[0]*M.k+M.x,e[1]*M.k+M.y]}function r(e){M.k=Math.max(A[0],Math.min(A[1],e))}function a(e,t){t=i(t),M.x+=e[0]-t[0],M.y+=e[1]-t[1]}function o(t,n,i,o){t.__chart__={x:M.x,y:M.y,k:M.k},r(Math.pow(2,o)),a(m=n,i),t=so.select(t),R>0&&(t=t.transition().duration(R)),t.call(e.event)}function s(){w&&w.domain(b.range().map(function(e){return(e-M.x)/M.k}).map(b.invert)),E&&E.domain(x.range().map(function(e){return(e-M.y)/M.k}).map(x.invert))}function l(e){C++||e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:M.k,translate:[M.x,M.y]})}function c(e){--C||(e({type:"zoomend"}),m=null)}function h(){function e(){s=1,a(so.mouse(r),f),u(o)}function i(){h.on(O,null).on(L,null),d(s),c(o)}var r=this,o=F.of(r,arguments),s=0,h=so.select(t(r)).on(O,e).on(L,i),f=n(so.mouse(r)),d=Z(r);zl.call(r),l(o)}function f(){function e(){var e=so.touches(p);return d=M.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=n(e))}),e}function t(){var t=so.event.target;so.select(t).on(b,i).on(w,s),x.push(t);for(var n=so.event.changedTouches,r=0,a=n.length;a>r;++r)m[n[r].identifier]=null;var l=e(),u=Date.now();if(1===l.length){if(500>u-y){var c=l[0];o(p,c,m[c.identifier],Math.floor(Math.log(M.k)/Math.LN2)+1),k()}y=u}else if(l.length>1){var c=l[0],h=l[1],f=c[0]-h[0],d=c[1]-h[1];v=f*f+d*d}}function i(){var e,t,n,i,o=so.touches(p);zl.call(p);for(var s=0,l=o.length;l>s;++s,i=null)if(n=o[s],i=m[n.identifier]){if(t)break;e=n,t=i}if(i){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,h=v&&Math.sqrt(c/v);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+i[0])/2,(t[1]+i[1])/2],r(h*d)}y=null,a(e,t),u(g)}function s(){if(so.event.touches.length){for(var t=so.event.changedTouches,n=0,i=t.length;i>n;++n)delete m[t[n].identifier];for(var r in m)return void e()}so.selectAll(x).on(_,null),E.on(P,h).on(N,f),T(),c(g)}var d,p=this,g=F.of(p,arguments),m={},v=0,_=".zoom-"+so.event.changedTouches[0].identifier,b="touchmove"+_,w="touchend"+_,x=[],E=so.select(p),T=Z(p);t(),l(g),E.on(P,null).on(N,t)}function d(){var e=F.of(this,arguments);_?clearTimeout(_):(zl.call(this),g=n(m=v||so.mouse(this)),l(e)),_=setTimeout(function(){_=null,c(e)},50),k(),r(Math.pow(2,.002*Xo())*M.k),a(m,g),u(e)}function p(){var e=so.mouse(this),t=Math.log(M.k)/Math.LN2;o(this,e,n(e),so.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var g,m,v,_,y,b,w,x,E,M={x:0,y:0,k:1},S=[960,500],A=qo,R=250,C=0,P="mousedown.zoom",O="mousemove.zoom",L="mouseup.zoom",N="touchstart.zoom",F=T(e,"zoomstart","zoom","zoomend");return Yo||(Yo="onwheel"in co?(Xo=function(){return-so.event.deltaY*(so.event.deltaMode?120:1)},"wheel"):"onmousewheel"in co?(Xo=function(){return so.event.wheelDelta},"mousewheel"):(Xo=function(){return-so.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=F.of(this,arguments),t=M;Ul?so.select(this).transition().each("start.zoom",function(){M=this.__chart__||{x:0,y:0,k:1},l(e)}).tween("zoom:zoom",function(){var n=S[0],i=S[1],r=m?m[0]:n/2,a=m?m[1]:i/2,o=so.interpolateZoom([(r-M.x)/M.k,(a-M.y)/M.k,n/M.k],[(r-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(t){var i=o(t),s=n/i[2];this.__chart__=M={x:r-i[0]*s,y:a-i[1]*s,k:s},u(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=M,l(e),u(e),c(e))})},e.translate=function(t){return arguments.length?(M={x:+t[0],y:+t[1],k:M.k},s(),e):[M.x,M.y]},e.scale=function(t){return arguments.length?(M={x:M.x,y:M.y,k:null},r(+t),s(),e):M.k},e.scaleExtent=function(t){return arguments.length?(A=null==t?qo:[+t[0],+t[1]],e):A},e.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],e):v},e.size=function(t){return arguments.length?(S=t&&[+t[0],+t[1]],e):S},e.duration=function(t){return arguments.length?(R=+t,e):R},e.x=function(t){return arguments.length?(w=t,b=t.copy(),M={x:0,y:0,k:1},e):w},e.y=function(t){return arguments.length?(E=t,x=t.copy(),M={x:0,y:0,k:1},e):E},so.rebind(e,F,"on")};var Xo,Yo,qo=[0,1/0];so.color=oe,oe.prototype.toString=function(){return this.rgb()+""},so.hsl=se;var Zo=se.prototype=new oe;Zo.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,this.l/e)},Zo.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,e*this.l)},Zo.rgb=function(){return le(this.h,this.s,this.l)},so.hcl=ue;var Qo=ue.prototype=new oe;Qo.brighter=function(e){return new ue(this.h,this.c,Math.min(100,this.l+$o*(arguments.length?e:1)))},Qo.darker=function(e){return new ue(this.h,this.c,Math.max(0,this.l-$o*(arguments.length?e:1)))},Qo.rgb=function(){return ce(this.h,this.c,this.l).rgb()},so.lab=he;var $o=18,Jo=.95047,Ko=1,es=1.08883,ts=he.prototype=new oe;ts.brighter=function(e){return new he(Math.min(100,this.l+$o*(arguments.length?e:1)),this.a,this.b)},ts.darker=function(e){return new he(Math.max(0,this.l-$o*(arguments.length?e:1)),this.a,this.b)},ts.rgb=function(){return fe(this.l,this.a,this.b)},so.rgb=ve;var ns=ve.prototype=new oe;ns.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,i=this.b,r=30;return t||n||i?(t&&r>t&&(t=r),n&&r>n&&(n=r),i&&r>i&&(i=r),new ve(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,i/e))):new ve(r,r,r)},ns.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ve(e*this.r,e*this.g,e*this.b)},ns.hsl=function(){return xe(this.r,this.g,this.b)},ns.toString=function(){return"#"+be(this.r)+be(this.g)+be(this.b)};var is=so.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,
slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});is.forEach(function(e,t){is.set(e,_e(t))}),so.functor=Te,so.xhr=Se(_),so.dsv=function(e,t){function n(e,n,a){arguments.length<3&&(a=n,n=null);var o=Ae(e,t,null==n?i:r(n),a);return o.row=function(e){return arguments.length?o.response(null==(n=e)?i:r(e)):n},o}function i(e){return n.parse(e.responseText)}function r(e){return function(t){return n.parse(t.responseText,e)}}function a(t){return t.map(o).join(e)}function o(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var i;return n.parseRows(e,function(e,n){if(i)return i(e,n-1);var r=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");i=t?function(e,n){return t(r(e),n)}:r})},n.parseRows=function(e,t){function n(){if(c>=u)return o;if(r)return r=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var i=e.charCodeAt(n+1);return 13===i?(r=!0,10===e.charCodeAt(n+2)&&++c):10===i&&(r=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;u>c;){var i=e.charCodeAt(c++),s=1;if(10===i)r=!0;else if(13===i)r=!0,10===e.charCodeAt(c)&&(++c,++s);else if(i!==l)continue;return e.slice(t,c-s)}return e.slice(t)}for(var i,r,a={},o={},s=[],u=e.length,c=0,h=0;(i=n())!==o;){for(var f=[];i!==a&&i!==o;)f.push(i),i=n();t&&null==(f=t(f,h++))||s.push(f)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var i=new v,r=[];return t.forEach(function(e){for(var t in e)i.has(t)||r.push(i.add(t))}),[r.map(o).join(e)].concat(t.map(function(t){return r.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(a).join("\n")},n},so.csv=so.dsv(",","text/csv"),so.tsv=so.dsv("\t","text/tab-separated-values");var rs,as,os,ss,ls=this[b(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};so.timer=function(){Pe.apply(this,arguments)},so.timer.flush=function(){Le(),Ne()},so.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var us=["y","z","a","f","p","n","碌","m","","k","M","G","T","P","E","Z","Y"].map(De);so.formatPrefix=function(e,t){var n=0;return(e=+e)&&(0>e&&(e*=-1),t&&(e=so.round(e,Fe(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),us[8+n/3]};var cs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,hs=so.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=so.round(e,Fe(e,t))).toFixed(Math.max(0,Math.min(20,Fe(e*(1+1e-15),t))))}}),fs=so.time={},ds=Date;He.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ps.setUTCDate.apply(this._,arguments)},setDay:function(){ps.setUTCDay.apply(this._,arguments)},setFullYear:function(){ps.setUTCFullYear.apply(this._,arguments)},setHours:function(){ps.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ps.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ps.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ps.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ps.setUTCSeconds.apply(this._,arguments)},setTime:function(){ps.setTime.apply(this._,arguments)}};var ps=Date.prototype;fs.year=ze(function(e){return e=fs.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),fs.years=fs.year.range,fs.years.utc=fs.year.utc.range,fs.day=ze(function(e){var t=new ds(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),fs.days=fs.day.range,fs.days.utc=fs.day.utc.range,fs.dayOfYear=function(e){var t=fs.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=fs[e]=ze(function(e){return(e=fs.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=fs.year(e).getDay();return Math.floor((fs.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});fs[e+"s"]=n.range,fs[e+"s"].utc=n.utc.range,fs[e+"OfYear"]=function(e){var n=fs.year(e).getDay();return Math.floor((fs.dayOfYear(e)+(n+t)%7)/7)}}),fs.week=fs.sunday,fs.weeks=fs.sunday.range,fs.weeks.utc=fs.sunday.utc.range,fs.weekOfYear=fs.sundayOfYear;var gs={"-":"",_:" ",0:"0"},ms=/^\s*\d+/,vs=/^%/;so.locale=function(e){return{numberFormat:Ie(e),timeFormat:je(e)}};var _s=so.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});so.format=_s.numberFormat,so.geo={},ut.prototype={s:0,t:0,add:function(e){ct(e,this.t,ys),ct(ys.s,this.s,this),this.s?this.t+=ys.t:this.s=ys.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ys=new ut;so.geo.stream=function(e,t){e&&bs.hasOwnProperty(e.type)?bs[e.type](e,t):ht(e,t)};var bs={Feature:function(e,t){ht(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)ht(n[i].geometry,t)}},ws={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){ft(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)ft(n[i],t,0)},Polygon:function(e,t){dt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)dt(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)ht(n[i],t)}};so.geo.area=function(e){return xs=0,so.geo.stream(e,ks),xs};var xs,Es=new ut,ks={sphere:function(){xs+=4*Io},point:w,lineStart:w,lineEnd:w,polygonStart:function(){Es.reset(),ks.lineStart=pt},polygonEnd:function(){var e=2*Es;xs+=0>e?4*Io+e:e,ks.lineStart=ks.lineEnd=ks.point=w}};so.geo.bounds=function(){function e(e,t){y.push(b=[c=e,f=e]),h>t&&(h=t),t>d&&(d=t)}function t(t,n){var i=gt([t*Bo,n*Bo]);if(v){var r=vt(v,i),a=[r[1],-r[0],0],o=vt(a,r);bt(o),o=wt(o);var l=t-p,u=l>0?1:-1,g=o[0]*jo*u,m=_o(l)>180;if(m^(g>u*p&&u*t>g)){var _=o[1]*jo;_>d&&(d=_)}else if(g=(g+360)%360-180,m^(g>u*p&&u*t>g)){var _=-o[1]*jo;h>_&&(h=_)}else h>n&&(h=n),n>d&&(d=n);m?p>t?s(c,t)>s(c,f)&&(f=t):s(t,f)>s(c,f)&&(c=t):f>=c?(c>t&&(c=t),t>f&&(f=t)):t>p?s(c,t)>s(c,f)&&(f=t):s(t,f)>s(c,f)&&(c=t)}else e(t,n);v=i,p=t}function n(){w.point=t}function i(){b[0]=c,b[1]=f,w.point=e,v=null}function r(e,n){if(v){var i=e-p;_+=_o(i)>180?i+(i>0?360:-360):i}else g=e,m=n;ks.point(e,n),t(e,n)}function a(){ks.lineStart()}function o(){r(g,m),ks.lineEnd(),_o(_)>Fo&&(c=-(f=180)),b[0]=c,b[1]=f,v=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function u(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,h,f,d,p,g,m,v,_,y,b,w={point:e,lineStart:n,lineEnd:i,polygonStart:function(){w.point=r,w.lineStart=a,w.lineEnd=o,_=0,ks.polygonStart()},polygonEnd:function(){ks.polygonEnd(),w.point=e,w.lineStart=n,w.lineEnd=i,0>Es?(c=-(f=180),h=-(d=90)):_>Fo?d=90:-Fo>_&&(h=-90),b[0]=c,b[1]=f}};return function(e){d=f=-(c=h=1/0),y=[],so.geo.stream(e,w);var t=y.length;if(t){y.sort(l);for(var n,i=1,r=y[0],a=[r];t>i;++i)n=y[i],u(n[0],r)||u(n[1],r)?(s(r[0],n[1])>s(r[0],r[1])&&(r[1]=n[1]),s(n[0],r[1])>s(r[0],r[1])&&(r[0]=n[0])):a.push(r=n);for(var o,n,p=-(1/0),t=a.length-1,i=0,r=a[t];t>=i;r=n,++i)n=a[i],(o=s(r[1],n[0]))>p&&(p=o,c=n[0],f=r[1])}return y=b=null,c===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,h],[f,d]]}}(),so.geo.centroid=function(e){Ms=Ts=Ss=As=Rs=Cs=Ps=Os=Ls=Ns=Fs=0,so.geo.stream(e,Ds);var t=Ls,n=Ns,i=Fs,r=t*t+n*n+i*i;return Do>r&&(t=Cs,n=Ps,i=Os,Fo>Ts&&(t=Ss,n=As,i=Rs),r=t*t+n*n+i*i,Do>r)?[NaN,NaN]:[Math.atan2(n,t)*jo,te(i/Math.sqrt(r))*jo]};var Ms,Ts,Ss,As,Rs,Cs,Ps,Os,Ls,Ns,Fs,Ds={sphere:w,point:Et,lineStart:Mt,lineEnd:Tt,polygonStart:function(){Ds.lineStart=St},polygonEnd:function(){Ds.lineStart=Mt}},Is=Lt(Rt,It,Ht,[-Io,-Io/2]),Us=1e9;so.geo.clipExtent=function(){var e,t,n,i,r,a,o={stream:function(e){return r&&(r.valid=!1),r=a(e),r.valid=!0,r},extent:function(s){return arguments.length?(a=Vt(e=+s[0][0],t=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),o):[[e,t],[n,i]]}};return o.extent([[0,0],[960,500]])},(so.geo.conicEqualArea=function(){return Gt(Wt)}).raw=Wt,so.geo.albers=function(){return so.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},so.geo.albersUsa=function(){function e(e){var a=e[0],o=e[1];return t=null,n(a,o),t||(i(a,o),t)||r(a,o),t}var t,n,i,r,a=so.geo.albers(),o=so.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=so.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?o:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:a).invert(e)},e.stream=function(e){var t=a.stream(e),n=o.stream(e),i=s.stream(e);return{point:function(e,r){t.point(e,r),n.point(e,r),i.point(e,r)},sphere:function(){t.sphere(),n.sphere(),i.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},e.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var u=a.scale(),c=+t[0],h=+t[1];return n=a.translate(t).clipExtent([[c-.455*u,h-.238*u],[c+.455*u,h+.238*u]]).stream(l).point,i=o.translate([c-.307*u,h+.201*u]).clipExtent([[c-.425*u+Fo,h+.12*u+Fo],[c-.214*u-Fo,h+.234*u-Fo]]).stream(l).point,r=s.translate([c-.205*u,h+.212*u]).clipExtent([[c-.214*u+Fo,h+.166*u+Fo],[c-.115*u-Fo,h+.234*u-Fo]]).stream(l).point,e},e.scale(1070)};var Hs,zs,Bs,js,Vs,Gs,Ws={point:w,lineStart:w,lineEnd:w,polygonStart:function(){zs=0,Ws.lineStart=Xt},polygonEnd:function(){Ws.lineStart=Ws.lineEnd=Ws.point=w,Hs+=_o(zs/2)}},Xs={point:Yt,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Ys={point:Qt,lineStart:$t,lineEnd:Jt,polygonStart:function(){Ys.lineStart=Kt},polygonEnd:function(){Ys.point=Qt,Ys.lineStart=$t,Ys.lineEnd=Jt}};so.geo.path=function(){function e(e){return e&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=r(a)),so.geo.stream(e,o)),a.result()}function t(){return o=null,e}var n,i,r,a,o,s=4.5;return e.area=function(e){return Hs=0,so.geo.stream(e,r(Ws)),Hs},e.centroid=function(e){return Ss=As=Rs=Cs=Ps=Os=Ls=Ns=Fs=0,so.geo.stream(e,r(Ys)),Fs?[Ls/Fs,Ns/Fs]:Os?[Cs/Os,Ps/Os]:Rs?[Ss/Rs,As/Rs]:[NaN,NaN]},e.bounds=function(e){return Vs=Gs=-(Bs=js=1/0),so.geo.stream(e,r(Xs)),[[Bs,js],[Vs,Gs]]},e.projection=function(e){return arguments.length?(r=(n=e)?e.stream||nn(e):_,t()):n},e.context=function(e){return arguments.length?(a=null==(i=e)?new qt:new en(e),"function"!=typeof s&&a.pointRadius(s),t()):i},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(a.pointRadius(+t),+t),e):s},e.projection(so.geo.albersUsa()).context(null)},so.geo.transform=function(e){return{stream:function(t){var n=new rn(t);for(var i in e)n[i]=e[i];return n}}},rn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},so.geo.projection=on,so.geo.projectionMutator=sn,(so.geo.equirectangular=function(){return on(un)}).raw=un.invert=un,so.geo.rotation=function(e){function t(t){return t=e(t[0]*Bo,t[1]*Bo),t[0]*=jo,t[1]*=jo,t}return e=hn(e[0]%360*Bo,e[1]*Bo,e.length>2?e[2]*Bo:0),t.invert=function(t){return t=e.invert(t[0]*Bo,t[1]*Bo),t[0]*=jo,t[1]*=jo,t},t},cn.invert=un,so.geo.circle=function(){function e(){var e="function"==typeof i?i.apply(this,arguments):i,t=hn(-e[0]*Bo,-e[1]*Bo,0).invert,r=[];return n(null,null,1,{point:function(e,n){r.push(e=t(e,n)),e[0]*=jo,e[1]*=jo}}),{type:"Polygon",coordinates:[r]}}var t,n,i=[0,0],r=6;return e.origin=function(t){return arguments.length?(i=t,e):i},e.angle=function(i){return arguments.length?(n=gn((t=+i)*Bo,r*Bo),e):t},e.precision=function(i){return arguments.length?(n=gn(t*Bo,(r=+i)*Bo),e):r},e.angle(90)},so.geo.distance=function(e,t){var n,i=(t[0]-e[0])*Bo,r=e[1]*Bo,a=t[1]*Bo,o=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r),c=Math.sin(a),h=Math.cos(a);return Math.atan2(Math.sqrt((n=h*o)*n+(n=u*c-l*h*s)*n),l*c+u*h*s)},so.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return so.range(Math.ceil(a/m)*m,r,m).map(f).concat(so.range(Math.ceil(u/v)*v,l,v).map(d)).concat(so.range(Math.ceil(i/p)*p,n,p).filter(function(e){return _o(e%m)>Fo}).map(c)).concat(so.range(Math.ceil(s/g)*g,o,g).filter(function(e){return _o(e%v)>Fo}).map(h))}var n,i,r,a,o,s,l,u,c,h,f,d,p=10,g=p,m=90,v=360,_=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[f(a).concat(d(l).slice(1),f(r).reverse().slice(1),d(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],r=+t[1][0],u=+t[0][1],l=+t[1][1],a>r&&(t=a,a=r,r=t),u>l&&(t=u,u=l,l=t),e.precision(_)):[[a,u],[r,l]]},e.minorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],i>n&&(t=i,i=n,n=t),s>o&&(t=s,s=o,o=t),e.precision(_)):[[i,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.minorStep=function(t){return arguments.length?(p=+t[0],g=+t[1],e):[p,g]},e.precision=function(t){return arguments.length?(_=+t,c=vn(s,o,90),h=_n(i,n,_),f=vn(u,l,90),d=_n(a,r,_),e):_},e.majorExtent([[-180,-90+Fo],[180,90-Fo]]).minorExtent([[-180,-80-Fo],[180,80+Fo]])},so.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||i.apply(this,arguments),n||r.apply(this,arguments)]}}var t,n,i=yn,r=bn;return e.distance=function(){return so.geo.distance(t||i.apply(this,arguments),n||r.apply(this,arguments))},e.source=function(n){return arguments.length?(i=n,t="function"==typeof n?null:n,e):i},e.target=function(t){return arguments.length?(r=t,n="function"==typeof t?null:t,e):r},e.precision=function(){return arguments.length?e:0},e},so.geo.interpolate=function(e,t){return wn(e[0]*Bo,e[1]*Bo,t[0]*Bo,t[1]*Bo)},so.geo.length=function(e){return qs=0,so.geo.stream(e,Zs),qs};var qs,Zs={sphere:w,point:w,lineStart:xn,lineEnd:w,polygonStart:w,polygonEnd:w},Qs=En(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(so.geo.azimuthalEqualArea=function(){return on(Qs)}).raw=Qs;var $s=En(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},_);(so.geo.azimuthalEquidistant=function(){return on($s)}).raw=$s,(so.geo.conicConformal=function(){return Gt(kn)}).raw=kn,(so.geo.conicEquidistant=function(){return Gt(Mn)}).raw=Mn;var Js=En(function(e){return 1/e},Math.atan);(so.geo.gnomonic=function(){return on(Js)}).raw=Js,Tn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-zo]},(so.geo.mercator=function(){return Sn(Tn)}).raw=Tn;var Ks=En(function(){return 1},Math.asin);(so.geo.orthographic=function(){return on(Ks)}).raw=Ks;var el=En(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(so.geo.stereographic=function(){return on(el)}).raw=el,An.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-zo]},(so.geo.transverseMercator=function(){var e=Sn(An),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=An,so.geom={},so.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,r=Te(n),a=Te(i),o=e.length,s=[],l=[];for(t=0;o>t;t++)s.push([+r.call(this,e[t],t),+a.call(this,e[t],t),t]);for(s.sort(On),t=0;o>t;t++)l.push([s[t][0],-s[t][1]]);var u=Pn(s),c=Pn(l),h=c[0]===u[0],f=c[c.length-1]===u[u.length-1],d=[];for(t=u.length-1;t>=0;--t)d.push(e[s[u[t]][2]]);for(t=+h;t<c.length-f;++t)d.push(e[s[c[t]][2]]);return d}var n=Rn,i=Cn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t)},so.geom.polygon=function(e){return Eo(e,tl),e};var tl=so.geom.polygon.prototype=[];tl.area=function(){for(var e,t=-1,n=this.length,i=this[n-1],r=0;++t<n;)e=i,i=this[t],r+=e[1]*i[0]-e[0]*i[1];return.5*r},tl.centroid=function(e){var t,n,i=-1,r=this.length,a=0,o=0,s=this[r-1];for(arguments.length||(e=-1/(6*this.area()));++i<r;)t=s,s=this[i],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},tl.clip=function(e){for(var t,n,i,r,a,o,s=Fn(e),l=-1,u=this.length-Fn(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,r=this[l],a=t[(i=t.length-s)-1],n=-1;++n<i;)o=t[n],Ln(o,c,r)?(Ln(a,c,r)||e.push(Nn(a,o,c,r)),e.push(o)):Ln(a,c,r)&&e.push(Nn(a,o,c,r)),a=o;s&&e.push(e[0]),c=r}return e};var nl,il,rl,al,ol,sl=[],ll=[];Vn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Wn),t.length},ti.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ni.prototype={insert:function(e,t){var n,i,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=oi(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.R&&(ri(this,n),e=n,n=e.U),n.C=!1,i.C=!0,ai(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.L&&(ai(this,n),e=n,n=e.U),n.C=!1,i.C=!0,ri(this,i))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,i,r=e.U,a=e.L,o=e.R;if(n=a?o?oi(o):a:o,r?r.L===e?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(r=n.U,n.U=e.U,e=n.R,r.L=e,n.R=o,o.U=n):(n.U=r,r=n,e=n.R)):(i=e.C,e=n),e&&(e.U=r),!i){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===r.L){if(t=r.R,t.C&&(t.C=!1,r.C=!0,ri(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ai(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,ri(this,r),e=this._;break}}else if(t=r.L,t.C&&(t.C=!1,r.C=!0,ai(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ri(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,ai(this,r),e=this._;break}t.C=!0,e=r,r=r.U}while(!e.C);e&&(e.C=!1)}}},so.geom.voronoi=function(e){function t(e){var t=new Array(e.length),i=s[0][0],r=s[0][1],a=s[1][0],o=s[1][1];return si(n(e),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=i&&u.x<=a&&u.y>=r&&u.y<=o?[[i,o],[a,o],[a,r],[i,r]]:[];c.point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/Fo)*Fo,y:Math.round(o(e,t)/Fo)*Fo,i:t}})}var i=Rn,r=Cn,a=i,o=r,s=ul;return e?t(e):(t.links=function(e){return si(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return si(n(e)).cells.forEach(function(n,i){for(var r,a,o=n.site,s=n.edges.sort(Wn),l=-1,u=s.length,c=s[u-1].edge,h=c.l===o?c.r:c.l;++l<u;)r=c,a=h,c=s[l].edge,h=c.l===o?c.r:c.l,i<a.i&&i<h.i&&ui(o,a,h)<0&&t.push([e[i],e[a.i],e[h.i]])}),t},t.x=function(e){return arguments.length?(a=Te(i=e),t):i},t.y=function(e){return arguments.length?(o=Te(r=e),t):r},t.clipExtent=function(e){return arguments.length?(s=null==e?ul:e,t):s===ul?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===ul?null:s&&s[1]},t)};var ul=[[-1e6,-1e6],[1e6,1e6]];so.geom.delaunay=function(e){return so.geom.voronoi().triangles(e)},so.geom.quadtree=function(e,t,n,i,r){function a(e){function a(e,t,n,i,r,a,o,s){if(!isNaN(n)&&!isNaN(i))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(_o(l-n)+_o(c-i)<.01)u(e,t,n,i,r,a,o,s);else{var h=e.point;e.x=e.y=e.point=null,u(e,h,l,c,r,a,o,s),u(e,t,n,i,r,a,o,s)}else e.x=n,e.y=i,e.point=t}else u(e,t,n,i,r,a,o,s)}function u(e,t,n,i,r,o,s,l){var u=.5*(r+s),c=.5*(o+l),h=n>=u,f=i>=c,d=f<<1|h;e.leaf=!1,e=e.nodes[d]||(e.nodes[d]=fi()),h?r=u:s=u,f?o=c:l=c,a(e,t,n,i,r,o,s,l)}var c,h,f,d,p,g,m,v,_,y=Te(s),b=Te(l);if(null!=t)g=t,m=n,v=i,_=r;else if(v=_=-(g=m=1/0),h=[],f=[],p=e.length,o)for(d=0;p>d;++d)c=e[d],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>_&&(_=c.y),h.push(c.x),f.push(c.y);else for(d=0;p>d;++d){var w=+y(c=e[d],d),x=+b(c,d);g>w&&(g=w),m>x&&(m=x),w>v&&(v=w),x>_&&(_=x),h.push(w),f.push(x)}var E=v-g,k=_-m;E>k?_=m+E:v=g+k;var M=fi();if(M.add=function(e){a(M,e,+y(e,++d),+b(e,d),g,m,v,_)},M.visit=function(e){di(e,M,g,m,v,_)},M.find=function(e){return pi(M,e[0],e[1],g,m,v,_)},d=-1,null==t){for(;++d<p;)a(M,e[d],h[d],f[d],g,m,v,_);--d}else e.forEach(M.add);return h=f=e=c=null,M}var o,s=Rn,l=Cn;return(o=arguments.length)?(s=ci,l=hi,3===o&&(r=n,i=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(l=e,a):l},a.extent=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=+e[0][0],n=+e[0][1],i=+e[1][0],r=+e[1][1]),a):null==t?null:[[t,n],[i,r]]},a.size=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=n=0,i=+e[0],r=+e[1]),a):null==t?null:[i-t,r-n]},a)},so.interpolateRgb=gi,so.interpolateObject=mi,so.interpolateNumber=vi,so.interpolateString=_i;var cl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hl=new RegExp(cl.source,"g");so.interpolate=yi,so.interpolators=[function(e,t){var n=typeof t;return("string"===n?is.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?gi:_i:t instanceof oe?gi:Array.isArray(t)?bi:"object"===n&&isNaN(t)?mi:vi)(e,t)}],so.interpolateArray=bi;var fl=function(){return _},dl=so.map({linear:fl,poly:Si,quad:function(){return ki},cubic:function(){return Mi},sin:function(){return Ai},exp:function(){return Ri},circle:function(){return Ci},elastic:Pi,back:Oi,bounce:function(){return Li}}),pl=so.map({in:_,out:xi,"in-out":Ei,"out-in":function(e){return Ei(xi(e))}});so.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,i=t>=0?e.slice(t+1):"in";return n=dl.get(n)||fl,i=pl.get(i)||_,wi(i(n.apply(null,lo.call(arguments,1))))},so.interpolateHcl=Ni,so.interpolateHsl=Fi,so.interpolateLab=Di,so.interpolateRound=Ii,so.transform=function(e){var t=co.createElementNS(so.ns.prefix.svg,"g");return(so.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Ui(n?n.matrix:gl)})(e)},Ui.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var gl={a:1,b:0,c:0,d:1,e:0,f:0};so.interpolateTransform=Yi,so.layout={},so.layout.bundle=function(){return function(e){for(var t=[],n=-1,i=e.length;++n<i;)t.push(Qi(e[n]));return t}},so.layout.chord=function(){function e(){var e,u,h,f,d,p={},g=[],m=so.range(a),v=[];for(n=[],i=[],e=0,f=-1;++f<a;){for(u=0,d=-1;++d<a;)u+=r[f][d];g.push(u),v.push(so.range(a)),e+=u}for(o&&m.sort(function(e,t){return o(g[e],g[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(r[t][e],r[t][n])})}),e=(Uo-c*a)/e,u=0,f=-1;++f<a;){for(h=u,d=-1;++d<a;){var _=m[f],y=v[_][d],b=r[_][y],w=u,x=u+=b*e;p[_+"-"+y]={index:_,subindex:y,startAngle:w,endAngle:x,value:b}}i[_]={index:_,startAngle:h,endAngle:u,value:g[_]},u+=c}for(f=-1;++f<a;)for(d=f-1;++d<a;){var E=p[f+"-"+d],k=p[d+"-"+f];(E.value||k.value)&&n.push(E.value<k.value?{source:k,target:E}:{source:E,target:k})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,i,r,a,o,s,l,u={},c=0;return u.matrix=function(e){return arguments.length?(a=(r=e)&&r.length,n=i=null,u):r},u.padding=function(e){return arguments.length?(c=e,n=i=null,u):c},u.sortGroups=function(e){return arguments.length?(o=e,n=i=null,u):o},u.sortSubgroups=function(e){return arguments.length?(s=e,n=null,u):s},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return i||e(),i},u},so.layout.force=function(){function e(e){return function(t,n,i,r){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=r-n,l=a*a+o*o;if(l>s*s/v){if(g>l){var u=t.charge/l;e.px-=a*u,e.py-=o*u}return!0}if(t.point&&l&&g>l){var u=t.pointCharge/l;e.px-=a*u,e.py-=o*u}}return!t.charge}}function t(e){e.px=so.event.x,e.py=so.event.y,l.resume()}var n,i,r,a,o,s,l={},u=so.dispatch("start","tick","end"),c=[1,1],h=.9,f=ml,d=vl,p=-30,g=_l,m=.1,v=.64,y=[],b=[];return l.tick=function(){if((r*=.99)<.005)return n=null,u.end({type:"end",alpha:r=0}),!0;var t,i,l,f,d,g,v,_,w,x=y.length,E=b.length;for(i=0;E>i;++i)l=b[i],f=l.source,d=l.target,_=d.x-f.x,w=d.y-f.y,(g=_*_+w*w)&&(g=r*o[i]*((g=Math.sqrt(g))-a[i])/g,_*=g,w*=g,d.x-=_*(v=f.weight+d.weight?f.weight/(f.weight+d.weight):.5),d.y-=w*v,f.x+=_*(v=1-v),f.y+=w*v);if((v=r*m)&&(_=c[0]/2,w=c[1]/2,i=-1,v))for(;++i<x;)l=y[i],l.x+=(_-l.x)*v,l.y+=(w-l.y)*v;if(p)for(ir(t=so.geom.quadtree(y),r,s),i=-1;++i<x;)(l=y[i]).fixed||t.visit(e(l));for(i=-1;++i<x;)l=y[i],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*h,l.y-=(l.py-(l.py=l.y))*h);u.tick({type:"tick",alpha:r})},l.nodes=function(e){return arguments.length?(y=e,l):y},l.links=function(e){return arguments.length?(b=e,l):b},l.size=function(e){return arguments.length?(c=e,l):c},l.linkDistance=function(e){return arguments.length?(f="function"==typeof e?e:+e,l):f},l.distance=l.linkDistance,l.linkStrength=function(e){return arguments.length?(d="function"==typeof e?e:+e,l):d},l.friction=function(e){return arguments.length?(h=+e,l):h},l.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,l):p},l.chargeDistance=function(e){return arguments.length?(g=e*e,l):Math.sqrt(g)},l.gravity=function(e){return arguments.length?(m=+e,l):m},l.theta=function(e){return arguments.length?(v=e*e,l):Math.sqrt(v)},l.alpha=function(e){return arguments.length?(e=+e,r?e>0?r=e:(n.c=null,n.t=NaN,n=null,u.end({type:"end",alpha:r=0})):e>0&&(u.start({type:"start",alpha:r=e}),n=Pe(l.tick)),l):r},l.start=function(){function e(e,i){if(!n){for(n=new Array(r),l=0;r>l;++l)n[l]=[];for(l=0;u>l;++l){var a=b[l];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,s=n[t],l=-1,c=s.length;++l<c;)if(!isNaN(o=s[l][e]))return o;return Math.random()*i}var t,n,i,r=y.length,u=b.length,h=c[0],g=c[1];for(t=0;r>t;++t)(i=y[t]).index=t,i.weight=0;for(t=0;u>t;++t)i=b[t],"number"==typeof i.source&&(i.source=y[i.source]),"number"==typeof i.target&&(i.target=y[i.target]),++i.source.weight,++i.target.weight;for(t=0;r>t;++t)i=y[t],isNaN(i.x)&&(i.x=e("x",h)),isNaN(i.y)&&(i.y=e("y",g)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(a=[],"function"==typeof f)for(t=0;u>t;++t)a[t]=+f.call(this,b[t],t);else for(t=0;u>t;++t)a[t]=f;if(o=[],"function"==typeof d)for(t=0;u>t;++t)o[t]=+d.call(this,b[t],t);else for(t=0;u>t;++t)o[t]=d;if(s=[],"function"==typeof p)for(t=0;r>t;++t)s[t]=+p.call(this,y[t],t);else for(t=0;r>t;++t)s[t]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return i||(i=so.behavior.drag().origin(_).on("dragstart.force",Ki).on("drag.force",t).on("dragend.force",er)),arguments.length?void this.on("mouseover.force",tr).on("mouseout.force",nr).call(i):i},so.rebind(l,u,"on")};var ml=20,vl=1,_l=1/0;so.layout.hierarchy=function(){function e(r){var a,o=[r],s=[];for(r.depth=0;null!=(a=o.pop());)if(s.push(a),(u=n.call(e,a,a.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)o.push(c=u[l]),c.parent=a,c.depth=a.depth+1;i&&(a.value=0),a.children=u}else i&&(a.value=+i.call(e,a,a.depth)||0),delete a.children;return or(r,function(e){var n,r;t&&(n=e.children)&&n.sort(t),i&&(r=e.parent)&&(r.value+=e.value)}),s}var t=ur,n=sr,i=lr;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(i=t,e):i},e.revalue=function(t){return i&&(ar(t,function(e){e.children&&(e.value=0)}),or(t,function(t){var n;t.children||(t.value=+i.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},so.layout.partition=function(){function e(t,n,i,r){var a=t.children;if(t.x=n,t.y=t.depth*r,t.dx=i,t.dy=r,a&&(o=a.length)){var o,s,l,u=-1;for(i=t.value?i/t.value:0;++u<o;)e(s=a[u],n,l=s.value*i,r),n+=l}}function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,t(n[a]));return 1+i}function n(n,a){var o=i.call(this,n,a);return e(o[0],0,r[0],r[1]/t(o[0])),o}var i=so.layout.hierarchy(),r=[1,1];return n.size=function(e){return arguments.length?(r=e,n):r},rr(n,i)},so.layout.pie=function(){function e(o){var s,l=o.length,u=o.map(function(n,i){return+t.call(e,n,i)}),c=+("function"==typeof i?i.apply(this,arguments):i),h=("function"==typeof r?r.apply(this,arguments):r)-c,f=Math.min(Math.abs(h)/l,+("function"==typeof a?a.apply(this,arguments):a)),d=f*(0>h?-1:1),p=so.sum(u),g=p?(h-l*d)/p:0,m=so.range(l),v=[];return null!=n&&m.sort(n===yl?function(e,t){return u[t]-u[e]}:function(e,t){return n(o[e],o[t])}),m.forEach(function(e){v[e]={data:o[e],value:s=u[e],startAngle:c,endAngle:c+=s*g+d,padAngle:f}}),v}var t=Number,n=yl,i=0,r=Uo,a=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(i=t,e):i},e.endAngle=function(t){return arguments.length?(r=t,e):r},e.padAngle=function(t){return arguments.length?(a=t,e):a},e};var yl={};so.layout.stack=function(){function e(s,l){if(!(f=s.length))return s;var u=s.map(function(n,i){return t.call(e,n,i)}),c=u.map(function(t){return t.map(function(t,n){return[a.call(e,t,n),o.call(e,t,n)]})}),h=n.call(e,c,l);u=so.permute(u,h),c=so.permute(c,h);var f,d,p,g,m=i.call(e,c,l),v=u[0].length;for(p=0;v>p;++p)for(r.call(e,u[0][p],g=m[p],c[0][p][1]),d=1;f>d;++d)r.call(e,u[d][p],g+=c[d-1][p][1],c[d][p][1]);return s}var t=_,n=pr,i=gr,r=dr,a=hr,o=fr;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:bl.get(t)||pr,e):n},e.offset=function(t){
return arguments.length?(i="function"==typeof t?t:wl.get(t)||gr,e):i},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(r=t,e):r},e};var bl=so.map({"inside-out":function(e){var t,n,i=e.length,r=e.map(mr),a=e.map(vr),o=so.range(i).sort(function(e,t){return r[e]-r[t]}),s=0,l=0,u=[],c=[];for(t=0;i>t;++t)n=o[t],l>s?(s+=a[n],u.push(n)):(l+=a[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return so.range(e.length).reverse()},default:pr}),wl=so.map({silhouette:function(e){var t,n,i,r=e.length,a=e[0].length,o=[],s=0,l=[];for(n=0;a>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];i>s&&(s=i),o.push(i)}for(n=0;a>n;++n)l[n]=(s-o[n])/2;return l},wiggle:function(e){var t,n,i,r,a,o,s,l,u,c=e.length,h=e[0],f=h.length,d=[];for(d[0]=l=u=0,n=1;f>n;++n){for(t=0,r=0;c>t;++t)r+=e[t][n][1];for(t=0,a=0,s=h[n][0]-h[n-1][0];c>t;++t){for(i=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);t>i;++i)o+=(e[i][n][1]-e[i][n-1][1])/s;a+=o*e[t][n][1]}d[n]=l-=r?a/r*s:0,u>l&&(u=l)}for(n=0;f>n;++n)d[n]-=u;return d},expand:function(e){var t,n,i,r=e.length,a=e[0].length,o=1/r,s=[];for(n=0;a>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];if(i)for(t=0;r>t;t++)e[t][n][1]/=i;else for(t=0;r>t;t++)e[t][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:gr});so.layout.histogram=function(){function e(e,a){for(var o,s,l=[],u=e.map(n,this),c=i.call(this,u,a),h=r.call(this,c,u,a),a=-1,f=u.length,d=h.length-1,p=t?1:1/f;++a<d;)o=l[a]=[],o.dx=h[a+1]-(o.x=h[a]),o.y=0;if(d>0)for(a=-1;++a<f;)s=u[a],s>=c[0]&&s<=c[1]&&(o=l[so.bisect(h,s,1,d)-1],o.y+=p,o.push(e[a]));return l}var t=!0,n=Number,i=wr,r=yr;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(i=Te(t),e):i},e.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return br(e,t)}:Te(t),e):r},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},so.layout.pack=function(){function e(e,a){var o=n.call(this,e,a),s=o[0],l=r[0],u=r[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,or(s,function(e){e.r=+c(e.value)}),or(s,Tr),i){var h=i*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;or(s,function(e){e.r+=h}),or(s,Tr),or(s,function(e){e.r-=h})}return Rr(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),o}var t,n=so.layout.hierarchy().sort(xr),i=0,r=[1,1];return e.size=function(t){return arguments.length?(r=t,e):r},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(i=+t,e):i},rr(e,n)},so.layout.tree=function(){function e(e,r){var c=o.call(this,e,r),h=c[0],f=t(h);if(or(f,n),f.parent.m=-f.z,ar(f,i),u)ar(h,a);else{var d=h,p=h,g=h;ar(h,function(e){e.x<d.x&&(d=e),e.x>p.x&&(p=e),e.depth>g.depth&&(g=e)});var m=s(d,p)/2-d.x,v=l[0]/(p.x+s(p,d)/2+m),_=l[1]/(g.depth||1);ar(h,function(e){e.x=(e.x+m)*v,e.y=e.depth*_})}return c}function t(e){for(var t,n={A:null,children:[e]},i=[n];null!=(t=i.pop());)for(var r,a=t.children,o=0,s=a.length;s>o;++o)i.push((a[o]=r={_:a[o],parent:t,children:(r=a[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,i=e.i?n[e.i-1]:null;if(t.length){Fr(e);var a=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+s(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+s(e._,i._));e.parent.A=r(e,i,e.parent.A||n[0])}function i(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e,t,n){if(t){for(var i,r=e,a=e,o=t,l=r.parent.children[0],u=r.m,c=a.m,h=o.m,f=l.m;o=Lr(o),r=Or(r),o&&r;)l=Or(l),a=Lr(a),a.a=e,i=o.z+h-r.z-u+s(o._,r._),i>0&&(Nr(Dr(o,e,n),e,i),u+=i,c+=i),h+=o.m,u+=r.m,f+=l.m,c+=a.m;o&&!Lr(a)&&(a.t=o,a.m+=h-c),r&&!Or(l)&&(l.t=r,l.m+=u-f,n=e)}return n}function a(e){e.x*=l[0],e.y=e.depth*l[1]}var o=so.layout.hierarchy().sort(null).value(null),s=Pr,l=[1,1],u=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(u=null==(l=t)?a:null,e):u?null:l},e.nodeSize=function(t){return arguments.length?(u=null==(l=t)?null:a,e):u?l:null},rr(e,o)},so.layout.cluster=function(){function e(e,a){var o,s=t.call(this,e,a),l=s[0],u=0;or(l,function(e){var t=e.children;t&&t.length?(e.x=Ur(t),e.y=Ir(t)):(e.x=o?u+=n(e,o):0,e.y=0,o=e)});var c=Hr(l),h=zr(l),f=c.x-n(c,h)/2,d=h.x+n(h,c)/2;return or(l,r?function(e){e.x=(e.x-l.x)*i[0],e.y=(l.y-e.y)*i[1]}:function(e){e.x=(e.x-f)/(d-f)*i[0],e.y=(1-(l.y?e.y/l.y:1))*i[1]}),s}var t=so.layout.hierarchy().sort(null).value(null),n=Pr,i=[1,1],r=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(r=null==(i=t),e):r?null:i},e.nodeSize=function(t){return arguments.length?(r=null!=(i=t),e):r?i:null},rr(e,t)},so.layout.treemap=function(){function e(e,t){for(var n,i,r=-1,a=e.length;++r<a;)i=(n=e[r]).value*(0>t?0:t),n.area=isNaN(i)||0>=i?0:i}function t(n){var a=n.children;if(a&&a.length){var o,s,l,u=h(n),c=[],f=a.slice(),p=1/0,g="slice"===d?u.dx:"dice"===d?u.dy:"slice-dice"===d?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(f,u.dx*u.dy/n.value),c.area=0;(l=f.length)>0;)c.push(o=f[l-1]),c.area+=o.area,"squarify"!==d||(s=i(c,g))<=p?(f.pop(),p=s):(c.area-=c.pop().area,r(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(r(c,g,u,!0),c.length=c.area=0),a.forEach(t)}}function n(t){var i=t.children;if(i&&i.length){var a,o=h(t),s=i.slice(),l=[];for(e(s,o.dx*o.dy/t.value),l.area=0;a=s.pop();)l.push(a),l.area+=a.area,null!=a.z&&(r(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);i.forEach(n)}}function i(e,t){for(var n,i=e.area,r=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(a>n&&(a=n),n>r&&(r=n));return i*=i,t*=t,i?Math.max(t*r*p/i,i/(t*a*p)):1/0}function r(e,t,n,i){var r,a=-1,o=e.length,s=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((i||c>n.dy)&&(c=n.dy);++a<o;)r=e[a],r.x=s,r.y=u,r.dy=c,s+=r.dx=Math.min(n.x+n.dx-s,c?l(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++a<o;)r=e[a],r.x=s,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?l(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function a(i){var r=o||s(i),a=r[0];return a.x=a.y=0,a.value?(a.dx=u[0],a.dy=u[1]):a.dx=a.dy=0,o&&s.revalue(a),e([a],a.dx*a.dy/a.value),(o?n:t)(a),f&&(o=r),r}var o,s=so.layout.hierarchy(),l=Math.round,u=[1,1],c=null,h=Br,f=!1,d="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(e){return arguments.length?(u=e,a):u},a.padding=function(e){function t(t){var n=e.call(a,t,t.depth);return null==n?Br(t):jr(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return jr(t,e)}if(!arguments.length)return c;var i;return h=null==(c=e)?Br:"function"==(i=typeof e)?t:"number"===i?(e=[e,e,e,e],n):n,a},a.round=function(e){return arguments.length?(l=e?Math.round:Number,a):l!=Number},a.sticky=function(e){return arguments.length?(f=e,o=null,a):f},a.ratio=function(e){return arguments.length?(p=e,a):p},a.mode=function(e){return arguments.length?(d=e+"",a):d},rr(a,s)},so.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return e+t*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=so.random.normal.apply(so,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=so.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},so.scale={};var xl={floor:_,ceil:_};so.scale.linear=function(){return Zr([0,1],[0,1],yi,!1)};var El={s:1,g:1,p:1,r:1,e:1};so.scale.log=function(){return ia(so.scale.linear().domain([0,1]),10,!0,[1,10])};var kl=so.format(".0e"),Ml={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};so.scale.pow=function(){return ra(so.scale.linear(),1,[0,1])},so.scale.sqrt=function(){return so.scale.pow().exponent(.5)},so.scale.ordinal=function(){return oa([],{t:"range",a:[[]]})},so.scale.category10=function(){return so.scale.ordinal().range(Tl)},so.scale.category20=function(){return so.scale.ordinal().range(Sl)},so.scale.category20b=function(){return so.scale.ordinal().range(Al)},so.scale.category20c=function(){return so.scale.ordinal().range(Rl)};var Tl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ye),Sl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ye),Al=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ye),Rl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ye);so.scale.quantile=function(){return sa([],[])},so.scale.quantize=function(){return la(0,1,[0,1])},so.scale.threshold=function(){return ua([.5],[0,1])},so.scale.identity=function(){return ca([0,1])},so.svg={},so.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+i.apply(this,arguments)),c=o.apply(this,arguments)-zo,h=s.apply(this,arguments)-zo,f=Math.abs(h-c),d=c>h?0:1;if(e>u&&(p=u,u=e,e=p),f>=Ho)return t(u,d)+(e?t(e,1-d):"")+"Z";var p,g,m,v,_,y,b,w,x,E,k,M,T=0,S=0,A=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=a===Cl?Math.sqrt(e*e+u*u):+a.apply(this,arguments),d||(S*=-1),u&&(S=te(m/u*Math.sin(v))),e&&(T=te(m/e*Math.sin(v)))),u){_=u*Math.cos(c+S),y=u*Math.sin(c+S),b=u*Math.cos(h-S),w=u*Math.sin(h-S);var R=Math.abs(h-c-2*S)<=Io?0:1;if(S&&va(_,y,b,w)===d^R){var C=(c+h)/2;_=u*Math.cos(C),y=u*Math.sin(C),b=w=null}}else _=y=0;if(e){x=e*Math.cos(h-T),E=e*Math.sin(h-T),k=e*Math.cos(c+T),M=e*Math.sin(c+T);var P=Math.abs(c-h+2*T)<=Io?0:1;if(T&&va(x,E,k,M)===1-d^P){var O=(c+h)/2;x=e*Math.cos(O),E=e*Math.sin(O),k=M=null}}else x=E=0;if(f>Fo&&(p=Math.min(Math.abs(u-e)/2,+r.apply(this,arguments)))>.001){g=u>e^d?0:1;var L=p,N=p;if(Io>f){var F=null==k?[x,E]:null==b?[_,y]:Nn([_,y],[k,M],[b,w],[x,E]),D=_-F[0],I=y-F[1],U=b-F[0],H=w-F[1],z=1/Math.sin(Math.acos((D*U+I*H)/(Math.sqrt(D*D+I*I)*Math.sqrt(U*U+H*H)))/2),B=Math.sqrt(F[0]*F[0]+F[1]*F[1]);N=Math.min(p,(e-B)/(z-1)),L=Math.min(p,(u-B)/(z+1))}if(null!=b){var j=_a(null==k?[x,E]:[k,M],[_,y],u,L,d),V=_a([b,w],[x,E],u,L,d);p===L?A.push("M",j[0],"A",L,",",L," 0 0,",g," ",j[1],"A",u,",",u," 0 ",1-d^va(j[1][0],j[1][1],V[1][0],V[1][1]),",",d," ",V[1],"A",L,",",L," 0 0,",g," ",V[0]):A.push("M",j[0],"A",L,",",L," 0 1,",g," ",V[0])}else A.push("M",_,",",y);if(null!=k){var G=_a([_,y],[k,M],e,-N,d),W=_a([x,E],null==b?[_,y]:[b,w],e,-N,d);p===N?A.push("L",W[0],"A",N,",",N," 0 0,",g," ",W[1],"A",e,",",e," 0 ",d^va(W[1][0],W[1][1],G[1][0],G[1][1]),",",1-d," ",G[1],"A",N,",",N," 0 0,",g," ",G[0]):A.push("L",W[0],"A",N,",",N," 0 0,",g," ",G[0])}else A.push("L",x,",",E)}else A.push("M",_,",",y),null!=b&&A.push("A",u,",",u," 0 ",R,",",d," ",b,",",w),A.push("L",x,",",E),null!=k&&A.push("A",e,",",e," 0 ",P,",",1-d," ",k,",",M);return A.push("Z"),A.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=fa,i=da,r=ha,a=Cl,o=pa,s=ga,l=ma;return e.innerRadius=function(t){return arguments.length?(n=Te(t),e):n},e.outerRadius=function(t){return arguments.length?(i=Te(t),e):i},e.cornerRadius=function(t){return arguments.length?(r=Te(t),e):r},e.padRadius=function(t){return arguments.length?(a=t==Cl?Cl:Te(t),e):a},e.startAngle=function(t){return arguments.length?(o=Te(t),e):o},e.endAngle=function(t){return arguments.length?(s=Te(t),e):s},e.padAngle=function(t){return arguments.length?(l=Te(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-zo;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Cl="auto";so.svg.line=function(){return ya(_)};var Pl=so.map({linear:ba,"linear-closed":wa,step:xa,"step-before":Ea,"step-after":ka,basis:Ca,"basis-open":Pa,"basis-closed":Oa,bundle:La,cardinal:Sa,"cardinal-open":Ma,"cardinal-closed":Ta,monotone:Ha});Pl.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Ol=[0,2/3,1/3,0],Ll=[0,1/3,2/3,0],Nl=[0,1/6,2/3,1/6];so.svg.line.radial=function(){var e=ya(za);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Ea.reverse=ka,ka.reverse=Ea,so.svg.area=function(){return Ba(_)},so.svg.area.radial=function(){var e=Ba(za);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},so.svg.chord=function(){function e(e,s){var l=t(this,a,e,s),u=t(this,o,e,s);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,i){var r=t.call(e,n,i),a=s.call(e,r,i),o=l.call(e,r,i)-zo,c=u.call(e,r,i)-zo;return{r:a,a0:o,a1:c,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function i(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Io)+",1 "+t}function r(e,t,n,i){return"Q 0,0 "+i}var a=yn,o=bn,s=ja,l=pa,u=ga;return e.radius=function(t){return arguments.length?(s=Te(t),e):s},e.source=function(t){return arguments.length?(a=Te(t),e):a},e.target=function(t){return arguments.length?(o=Te(t),e):o},e.startAngle=function(t){return arguments.length?(l=Te(t),e):l},e.endAngle=function(t){return arguments.length?(u=Te(t),e):u},e},so.svg.diagonal=function(){function e(e,r){var a=t.call(this,e,r),o=n.call(this,e,r),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=yn,n=bn,i=Va;return e.source=function(n){return arguments.length?(t=Te(n),e):t},e.target=function(t){return arguments.length?(n=Te(t),e):n},e.projection=function(t){return arguments.length?(i=t,e):i},e},so.svg.diagonal.radial=function(){var e=so.svg.diagonal(),t=Va,n=e.projection;return e.projection=function(e){return arguments.length?n(Ga(t=e)):t},e},so.svg.symbol=function(){function e(e,i){return(Fl.get(t.call(this,e,i))||Ya)(n.call(this,e,i))}var t=Xa,n=Wa;return e.type=function(n){return arguments.length?(t=Te(n),e):t},e.size=function(t){return arguments.length?(n=Te(t),e):n},e};var Fl=so.map({circle:Ya,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Il)),n=t*Il;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Dl),n=t*Dl/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Dl),n=t*Dl/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});so.svg.symbolTypes=Fl.keys();var Dl=Math.sqrt(3),Il=Math.tan(30*Bo);So.transition=function(e){for(var t,n,i=Ul||++jl,r=Ja(e),a=[],o=Hl||{time:Date.now(),ease:Ti,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(t=[]);for(var u=this[s],c=-1,h=u.length;++c<h;)(n=u[c])&&Ka(n,c,r,i,o),t.push(n)}return Za(a,r,i)},So.interrupt=function(e){return this.each(null==e?zl:qa(Ja(e)))};var Ul,Hl,zl=qa(Ja()),Bl=[],jl=0;Bl.call=So.call,Bl.empty=So.empty,Bl.node=So.node,Bl.size=So.size,so.transition=function(e,t){return e&&e.transition?Ul?e.transition(t):e:so.selection().transition(e)},so.transition.prototype=Bl,Bl.select=function(e){var t,n,i,r=this.id,a=this.namespace,o=[];e=A(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var u=this[s],c=-1,h=u.length;++c<h;)(i=u[c])&&(n=e.call(i,i.__data__,c,s))?("__data__"in i&&(n.__data__=i.__data__),Ka(n,c,a,r,i[a][r]),t.push(n)):t.push(null)}return Za(o,a,r)},Bl.selectAll=function(e){var t,n,i,r,a,o=this.id,s=this.namespace,l=[];e=R(e);for(var u=-1,c=this.length;++u<c;)for(var h=this[u],f=-1,d=h.length;++f<d;)if(i=h[f]){a=i[s][o],n=e.call(i,i.__data__,f,u),l.push(t=[]);for(var p=-1,g=n.length;++p<g;)(r=n[p])&&Ka(r,p,s,o,a),t.push(r)}return Za(l,s,o)},Bl.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=B(e));for(var a=0,o=this.length;o>a;a++){r.push(t=[]);for(var n=this[a],s=0,l=n.length;l>s;s++)(i=n[s])&&e.call(i,i.__data__,s,a)&&t.push(i)}return Za(r,this.namespace,this.id)},Bl.tween=function(e,t){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(e):V(this,null==t?function(t){t[i][n].tween.remove(e)}:function(r){r[i][n].tween.set(e,t)})},Bl.attr=function(e,t){function n(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=o(n,e),function(e){this.setAttribute(s,t(e))})})}function a(e){return null==e?i:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Yi:yi,s=so.ns.qualify(e);return Qa(this,"attr."+e,t,s.local?a:r)},Bl.attrTween=function(e,t){function n(e,n){var i=t.call(this,e,n,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function i(e,n){var i=t.call(this,e,n,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=so.ns.qualify(e);return this.tween("attr."+e,r.local?i:n)},Bl.style=function(e,n,i){function r(){this.style.removeProperty(e)}function a(n){return null==n?r:(n+="",function(){var r,a=t(this).getComputedStyle(this,null).getPropertyValue(e);return a!==n&&(r=yi(a,n),function(t){this.style.setProperty(e,r(t),i)})})}var o=arguments.length;if(3>o){if("string"!=typeof e){2>o&&(n="");for(i in e)this.style(i,e[i],n);return this}i=""}return Qa(this,"style."+e,n,a)},Bl.styleTween=function(e,n,i){function r(r,a){var o=n.call(this,r,a,t(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),i)}}return arguments.length<3&&(i=""),this.tween("style."+e,r)},Bl.text=function(e){return Qa(this,"text",e,$a)},Bl.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Bl.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=so.ease.apply(so,arguments)),V(this,function(i){i[n][t].ease=e}))},Bl.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:V(this,"function"==typeof e?function(i,r,a){i[n][t].delay=+e.call(i,i.__data__,r,a)}:(e=+e,function(i){i[n][t].delay=e}))},Bl.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:V(this,"function"==typeof e?function(i,r,a){i[n][t].duration=Math.max(1,e.call(i,i.__data__,r,a))}:(e=Math.max(1,e),function(i){i[n][t].duration=e}))},Bl.each=function(e,t){var n=this.id,i=this.namespace;if(arguments.length<2){var r=Hl,a=Ul;try{Ul=n,V(this,function(t,r,a){Hl=t[i][n],e.call(t,t.__data__,r,a)})}finally{Hl=r,Ul=a}}else V(this,function(r){var a=r[i][n];(a.event||(a.event=so.dispatch("start","end","interrupt"))).on(e,t)});return this},Bl.transition=function(){for(var e,t,n,i,r=this.id,a=++jl,o=this.namespace,s=[],l=0,u=this.length;u>l;l++){s.push(e=[]);for(var t=this[l],c=0,h=t.length;h>c;c++)(n=t[c])&&(i=n[o][r],Ka(n,c,o,a,{time:i.time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration})),e.push(n)}return Za(s,o,a)},so.svg.axis=function(){function e(e){e.each(function(){var e,u=so.select(this),c=this.__chart__||n,h=this.__chart__=n.copy(),f=null==l?h.ticks?h.ticks.apply(h,s):h.domain():l,d=null==t?h.tickFormat?h.tickFormat.apply(h,s):_:t,p=u.selectAll(".tick").data(f,h),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Fo),m=so.transition(p.exit()).style("opacity",Fo).remove(),v=so.transition(p.order()).style("opacity",1),y=Math.max(r,0)+o,b=Gr(h),w=u.selectAll(".domain").data([0]),x=(w.enter().append("path").attr("class","domain"),so.transition(w));g.append("line"),g.append("text");var E,k,M,T,S=g.select("line"),A=v.select("line"),R=p.select("text").text(d),C=g.select("text"),P=v.select("text"),O="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(e=eo,E="x",M="y",k="x2",T="y2",R.attr("dy",0>O?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+b[0]+","+O*a+"V0H"+b[1]+"V"+O*a)):(e=to,E="y",M="x",k="y2",T="x2",R.attr("dy",".32em").style("text-anchor",0>O?"end":"start"),x.attr("d","M"+O*a+","+b[0]+"H0V"+b[1]+"H"+O*a)),S.attr(T,O*r),C.attr(M,O*y),A.attr(k,0).attr(T,O*r),P.attr(E,0).attr(M,O*y),h.rangeBand){var L=h,N=L.rangeBand()/2;c=h=function(e){return L(e)+N}}else c.rangeBand?c=h:m.call(e,h,c);g.call(e,c,h),v.call(e,h,h)})}var t,n=so.scale.linear(),i=Vl,r=6,a=6,o=3,s=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(i=t in Gl?t+"":Vl,e):i},e.ticks=function(){return arguments.length?(s=uo(arguments),e):s},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(r=+t,a=+arguments[n-1],e):r},e.innerTickSize=function(t){return arguments.length?(r=+t,e):r},e.outerTickSize=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var Vl="bottom",Gl={top:1,right:1,bottom:1,left:1};so.svg.brush=function(){function e(t){t.each(function(){var t=so.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(g,_);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Wl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var l,h=so.transition(t),f=so.transition(o);u&&(l=Gr(u),f.attr("x",l[0]).attr("width",l[1]-l[0]),i(h)),c&&(l=Gr(c),f.attr("y",l[0]).attr("height",l[1]-l[0]),r(h)),n(h)})}function n(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+h[+/e$/.test(e)]+","+f[+/^s/.test(e)]+")"})}function i(e){e.select(".extent").attr("x",h[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function r(e){e.select(".extent").attr("y",f[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function a(){function a(){32==so.event.keyCode&&(R||(y=null,P[0]-=h[1],P[1]-=f[1],R=2),k())}function g(){32==so.event.keyCode&&2==R&&(P[0]+=h[1],P[1]+=f[1],R=0,k())}function m(){var e=so.mouse(w),t=!1;b&&(e[0]+=b[0],e[1]+=b[1]),R||(so.event.altKey?(y||(y=[(h[0]+h[1])/2,(f[0]+f[1])/2]),P[0]=h[+(e[0]<y[0])],P[1]=f[+(e[1]<y[1])]):y=null),S&&v(e,u,0)&&(i(M),t=!0),A&&v(e,c,1)&&(r(M),t=!0),t&&(n(M),E({type:"brush",mode:R?"move":"resize"}))}function v(e,t,n){var i,r,a=Gr(t),l=a[0],u=a[1],c=P[n],g=n?f:h,m=g[1]-g[0];return R&&(l-=c,u-=m+c),i=(n?p:d)?Math.max(l,Math.min(u,e[n])):e[n],R?r=(i+=c)+m:(y&&(c=Math.max(l,Math.min(u,2*y[n]-i))),i>c?(r=i,i=c):r=c),g[0]!=i||g[1]!=r?(n?s=null:o=null,g[0]=i,g[1]=r,!0):void 0}function _(){m(),M.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),so.select("body").style("cursor",null),O.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),E({type:"brushend"})}var y,b,w=this,x=so.select(so.event.target),E=l.of(w,arguments),M=so.select(w),T=x.datum(),S=!/^(n|s)$/.test(T)&&u,A=!/^(e|w)$/.test(T)&&c,R=x.classed("extent"),C=Z(w),P=so.mouse(w),O=so.select(t(w)).on("keydown.brush",a).on("keyup.brush",g);if(so.event.changedTouches?O.on("touchmove.brush",m).on("touchend.brush",_):O.on("mousemove.brush",m).on("mouseup.brush",_),M.interrupt().selectAll("*").interrupt(),R)P[0]=h[0]-P[0],P[1]=f[0]-P[1];else if(T){var L=+/w$/.test(T),N=+/^n/.test(T);b=[h[1-L]-P[0],f[1-N]-P[1]],P[0]=h[L],P[1]=f[N]}else so.event.altKey&&(y=P.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null),so.select("body").style("cursor",x.style("cursor")),E({type:"brushstart"}),m()}var o,s,l=T(e,"brushstart","brush","brushend"),u=null,c=null,h=[0,0],f=[0,0],d=!0,p=!0,g=Xl[0];return e.event=function(e){e.each(function(){var e=l.of(this,arguments),t={x:h,y:f,i:o,j:s},n=this.__chart__||t;this.__chart__=t,Ul?so.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,h=n.x,f=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=bi(h,t.x),i=bi(f,t.y);return o=s=null,function(r){h=t.x=n(r),f=t.y=i(r),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(u=t,g=Xl[!u<<1|!c],e):u},e.y=function(t){return arguments.length?(c=t,g=Xl[!u<<1|!c],e):c},e.clamp=function(t){return arguments.length?(u&&c?(d=!!t[0],p=!!t[1]):u?d=!!t:c&&(p=!!t),e):u&&c?[d,p]:u?d:c?p:null},e.extent=function(t){var n,i,r,a,l;return arguments.length?(u&&(n=t[0],i=t[1],c&&(n=n[0],i=i[0]),o=[n,i],u.invert&&(n=u(n),i=u(i)),n>i&&(l=n,n=i,i=l),n==h[0]&&i==h[1]||(h=[n,i])),c&&(r=t[0],a=t[1],u&&(r=r[1],a=a[1]),s=[r,a],c.invert&&(r=c(r),a=c(a)),r>a&&(l=r,r=a,a=l),r==f[0]&&a==f[1]||(f=[r,a])),e):(u&&(o?(n=o[0],i=o[1]):(n=h[0],i=h[1],u.invert&&(n=u.invert(n),i=u.invert(i)),n>i&&(l=n,n=i,i=l))),c&&(s?(r=s[0],a=s[1]):(r=f[0],a=f[1],c.invert&&(r=c.invert(r),a=c.invert(a)),r>a&&(l=r,r=a,a=l))),u&&c?[[n,r],[i,a]]:u?[n,i]:c&&[r,a])},e.clear=function(){return e.empty()||(h=[0,0],f=[0,0],o=s=null),e},e.empty=function(){return!!u&&h[0]==h[1]||!!c&&f[0]==f[1]},so.rebind(e,l,"on")};var Wl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Xl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Yl=fs.format=_s.timeFormat,ql=Yl.utc,Zl=ql("%Y-%m-%dT%H:%M:%S.%LZ");Yl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?no:Zl,no.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},no.toString=Zl.toString,fs.second=ze(function(e){return new ds(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),fs.seconds=fs.second.range,fs.seconds.utc=fs.second.utc.range,fs.minute=ze(function(e){return new ds(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),fs.minutes=fs.minute.range,fs.minutes.utc=fs.minute.utc.range,fs.hour=ze(function(e){var t=e.getTimezoneOffset()/60;return new ds(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),fs.hours=fs.hour.range,fs.hours.utc=fs.hour.utc.range,fs.month=ze(function(e){return e=fs.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),fs.months=fs.month.range,fs.months.utc=fs.month.utc.range;var Ql=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],$l=[[fs.second,1],[fs.second,5],[fs.second,15],[fs.second,30],[fs.minute,1],[fs.minute,5],[fs.minute,15],[fs.minute,30],[fs.hour,1],[fs.hour,3],[fs.hour,6],[fs.hour,12],[fs.day,1],[fs.day,2],[fs.week,1],[fs.month,1],[fs.month,3],[fs.year,1]],Jl=Yl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Rt]]),Kl={range:function(e,t,n){return so.range(Math.ceil(e/n)*n,+t,n).map(ro)},floor:_,ceil:_};$l.year=fs.year,fs.scale=function(){return io(so.scale.linear(),$l,Jl)};var eu=$l.map(function(e){return[e[0].utc,e[1]]}),tu=ql.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Rt]]);eu.year=fs.year.utc,fs.scale.utc=function(){return io(so.scale.linear(),eu,tu)},so.text=Se(function(e){return e.responseText}),so.json=function(e,t){return Ae(e,"application/json",ao,t)},so.html=function(e,t){return Ae(e,"text/html",oo,t)},so.xml=Se(function(e){return e.responseXML}),"function"==typeof define&&define.amd?(this.d3=so,define(so)):"object"==typeof module&&module.exports?module.exports=so:this.d3=so}();var _Group=function(){this._tweens={},this._tweensAddedDuringUpdate={}};_Group.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(e=void 0!==e?e:TWEEN.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]];r&&r.update(e)===!1&&(r._isPlaying=!1,t||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var TWEEN=new _Group;TWEEN.Group=_Group,TWEEN._nextId=0,TWEEN.nextId=function(){return TWEEN._nextId++},"undefined"==typeof window&&"undefined"!=typeof process?TWEEN.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?TWEEN.now=window.performance.now.bind(window.performance):void 0!==Date.now?TWEEN.now=Date.now:TWEEN.now=function(){return(new Date).getTime()},TWEEN.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=TWEEN.Easing.Linear.None,this._interpolationFunction=TWEEN.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||TWEEN,this._id=TWEEN.nextId()},TWEEN.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=e,void 0!==t&&(this._duration=t),this},start:function(e){this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?TWEEN.now()+parseFloat(e):e:TWEEN.now(),this._startTime+=this._delayTime;for(var t in this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==!1&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),
this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},group:function e(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,n,i;if(e<this._startTime)return!0;this._onStartCallbackFired===!1&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,i=this._easingFunction(n);for(t in this._valuesEnd)if(void 0!==this._valuesStart[t]){var r=this._valuesStart[t]||0,a=this._valuesEnd[t];a instanceof Array?this._object[t]=this._interpolationFunction(a,i):("string"==typeof a&&(a="+"===a.charAt(0)||"-"===a.charAt(0)?r+parseFloat(a):parseFloat(a)),"number"==typeof a&&(this._object[t]=r+(a-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1===n){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(t in this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var o=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=o}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5}}},TWEEN.Interpolation={Linear:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),a=TWEEN.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],i):t>1?a(e[n],e[n-1],n-i):a(e[r],e[r+1>n?n:r+1],i-r)},Bezier:function(e,t){for(var n=0,i=e.length-1,r=Math.pow,a=TWEEN.Interpolation.Utils.Bernstein,o=0;o<=i;o++)n+=r(1-t,i-o)*r(t,o)*e[o]*a(i,o);return n},CatmullRom:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),a=TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(r=Math.floor(i=n*(1+t))),a(e[(r-1+n)%n],e[r],e[(r+1)%n],e[(r+2)%n],i-r)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):a(e[r?r-1:0],e[r],e[n<r+1?n:r+1],e[n<r+2?n:r+2],i-r)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=TWEEN.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var i=t;i>1;i--)n*=i;return e[t]=n,n}}(),CatmullRom:function(e,t,n,i,r){var a=.5*(n-e),o=.5*(i-t),s=r*r,l=r*s;return(2*t-2*n+a+o)*l+(-3*t+3*n-2*a-o)*s+a*r+t}}},function(e){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"undefined"!=typeof module&&"object"==typeof exports?module.exports=TWEEN:void 0!==e&&(e.TWEEN=TWEEN)}(this);